System.register(["./index.vue_vue_type_script_setup_true_lang-legacy.js?v=1752142539265","./index.vue_vue_type_script_setup_true_lang-legacy6.js?v=1752142539265","./vue-legacy.js?v=1752142539265","./page_layout-legacy.js?v=1752142539265","./public-legacy.js?v=1752142539265","./naive-legacy.js?v=1752142539265","./index.vue_vue_type_script_setup_true_lang-legacy2.js?v=1752142539265","./index-legacy100.js?v=1752142539265"],(function(e,a){"use strict";var l,t,s,p,n,o,i,r,u,c,d,v,m,f,x,g,_,b,y,h,k,w,A,C,D,j,$,S,O,P,z,E,q,I,R,U,M,B,F,T,L,N,H,W,V,J,K,Q,X,Z,G,Y,ee,ae,le,te,se,pe,ne,oe,ie,re,ue,ce,de,ve,me,fe,xe;return{setters:[e=>{l=e._},e=>{t=e._},e=>{s=e.k,p=e.P,n=e.$,o=e.af,i=e.r,r=e.c,u=e.Q,c=e.t,d=e.F,v=e.u,m=e.e,f=e.U,x=e.X,g=e.a2,_=e.V,b=e.W,y=e.ah,h=e.N,k=e.a1,w=e.O,A=e.j,C=e.a3,D=e.l,j=e.v,$=e.aj,S=e._,O=e.w,P=e.I},e=>{z=e.v,E=e.i,q=e.u,I=e._,R=e.w,U=e.y,M=e.bg,B=e.d,F=e.bh,T=e.f,L=e.m,N=e.bi,H=e.V,W=e.W,V=e.k,J=e.bj,K=e.p,Q=e.q,X=e.a,Z=e.e},e=>{G=e.u,Y=e.d,ee=e.y,ae=e.c},e=>{le=e.c0,te=e.cK,se=e.cz,pe=e.aq,ne=e.bZ,oe=e._,ie=e.cD,re=e.B,ue=e.bA,ce=e.ay,de=e.cH,ve=e.b$,me=e.cA},e=>{fe=e._},e=>{xe=e._}],execute:function(){var ge=document.createElement("style");ge.textContent=".n-form-item[data-v-ff0af478]{--n-label-font-size: 14px}\n/*$vite$:1*/",document.head.appendChild(ge);const _e=(e,a=!1)=>z.post("/mod/docker/com/get_apps",e,{requestOptions:{loading:a?E.global.t("Docker.api.App.index_1"):""}}),be=(e("g",(e=>z.post("/mod/docker/com/get_app_log",e))),e("a",(e=>z.post("/mod/docker/com/get_app_installed_log",e))),e("b",(e=>z.post("/mod/docker/com/get_backup_list",e))),e("c",(e=>z.post("/mod/docker/com/backup_app",e,{requestOptions:{loading:E.global.t("Docker.api.App.index_5"),successMessage:!0}}))),e("d",(e=>z.post("/mod/docker/com/delete_backup",e,{requestOptions:{loading:E.global.t("Docker.api.App.index_4"),successMessage:!0}}))),e("r",(e=>z.post("/mod/docker/com/restore_backup",e,{requestOptions:{loading:E.global.t("Docker.api.App.index_6"),successMessage:!0}}))),e("u",(e=>z.post("/mod/docker/com/upload_backup",e,{headers:{"Content-Type":"multipart/form-data"},requestOptions:{loading:E.global.t("Docker.api.App.index_7"),successMessage:!0}}))),s({name:"DockerAppCategory",props:{value:{type:String}},setup(e,{emit:a}){const{t:l}=p(),t=q(),{mainWidth:s}=n(t),c=o(e,"value",a),d=i([]),v=r((()=>Math.floor((s.value-480)/100))),m=r((()=>d.value.slice(0,v.value))),f=r((()=>d.value.slice(v.value,d.value.length).map((e=>({label:e.label,key:e.value}))))),x=r((()=>f.value.filter((e=>e.key===c.value)).length>0)),g=r((()=>{const e=f.value.filter((e=>e.key===c.value));return e.length>0?`（${e[0].label}）`:""})),_=e=>{c.value=e},b=()=>{d.value.unshift({label:l("Docker.App.app_category_0"),value:"installed"}),d.value.unshift({label:l("Public.All"),value:"all"})};return b(),(async()=>{const{message:e}=await((e={})=>z.post("/mod/docker/com/get_tags",e))();R(e)&&(te(e,["sort"],["asc"]),d.value=e.map((e=>({label:e.desc,value:e.type}))),b())})(),()=>u("div",{class:"flex gap-10px"},[m.value.map((e=>u(he,{label:e.label,active:e.value===c.value,onClick:()=>{c.value=e.value}},null))),f.value.length>0?u(le,{trigger:"hover",options:f.value,onSelect:_},{default:()=>[u(he,{active:x.value},{default:()=>[u("span",{class:"mr-8px"},[l("Docker.App.app_category_1"),g.value]),u(I,{name:"base-arrow-bottom"},null)]})]}):""])}})),ye=U({display:"flex",alignItems:"center",justifyContent:"center",minWidth:"80px",height:"32px",padding:"0 10px",borderRadius:"2px",cursor:"pointer",backgroundColor:"#E6E6E6",transition:"all .3s",color:"#555","&.active":{backgroundColor:"#E8F6EB",color:"#20A53A"}}),he=s({name:"DockerAppCategoryItem",props:{label:{type:String,default:""},active:{type:Boolean,default:!1},onClick:{type:Function}},setup:(e,{emit:a,slots:l})=>()=>u("div",{class:[ye,e.active?"active":""],onClick:()=>{a("click")}},[l.default?l.default():e.label])});function ke(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!v(e)}const we=s({name:"ConfigForm",props:{data:{type:Object,default:()=>({})},config:{type:Array,default:()=>[]}},setup(e){const a=c(e,"config"),l=o(e,"data");return a.value.forEach((e=>{l.value[e.attr]=e.default})),()=>u(d,null,[a.value.map(((e,t)=>{let s;return u(se,{key:e.attr,label:(n=e.name,n?n.charAt(0).toUpperCase()+n.slice(1):n),showFeedback:t!==a.value.length-1},ke(s=function(e,a){const{t:l}=p(),t=M(),{attr:s,name:n,type:o}=e,{maxCpu:i,maxMemory:r}=t;let c=e.suffix;"cpus"===s&&(c=`${c} ${i}`),"memory_limit"===s&&(c=`${c} ${r} MB`);const v=l("Docker.App.Install.index_7",[n]);switch(o){case"checkbox":return u(d,null,[u(oe,{checked:a.value[s],"onUpdate:checked":e=>a.value[s]=e,class:"items-center"},ke(c)?c:{default:()=>[c]})]);case"textarea":return u(d,null,[u("div",{class:"w-240px min-w-240px"},[u(xe,{value:a.value[s],"onUpdate:value":e=>a.value[s]=e,rows:1,placeholder:v},null)]),u("span",{class:"ml-10px"},[c])]);case"number":return u(d,null,[u("div",{class:"w-240px min-w-240px"},[u(ne,{value:a.value[s],"onUpdate:value":e=>a.value[s]=e,showButton:!1,placeholder:v},null)]),u("span",{class:"ml-10px"},[c])]);case"password":return u(d,null,[u("div",{class:"w-240px min-w-240px"},[u(fe,{value:a.value[s],"onUpdate:value":e=>a.value[s]=e,default:!0,placeholder:v},null)]),u("span",{class:"ml-10px"},[c])]);case"url":case"text":return u(d,null,[u("div",{class:"w-240px min-w-240px"},[u(pe,{value:a.value[s],"onUpdate:value":e=>a.value[s]=e,placeholder:v},null)]),u("span",{class:"ml-10px"},[c])])}return u(d,null,null)}(e,l))?s:{default:()=>[s]});var n}))])}}),Ae=s({name:"DependForm",props:{data:{type:Object,default:()=>({})},config:{type:Array,default:()=>[]}},emits:["close"],setup(e,{emit:a}){const{t:l}=p(),t=M(),s=c(e,"config"),n=o(e,"data"),r=i([]),v=i({});return(async()=>{const e=[];if(v.value={},r.value=[],s.value.forEach((a=>{const l=a.appname?a.appname[0]:null;n.value[a.apptype]={name:l,service_name:null},a.appname.forEach((l=>{v.value[l]={appName:l,appType:a.apptype,version:"",options:[]},r.value.push({label:l,value:l}),e.push({app_name:l,app_type:a.apptype})}))})),0===e.length)return;const{message:a}=await(l={depend_app:e},z.post("/mod/docker/com/get_dependence_apps",{depend_app:JSON.stringify(l.depend_app)}));var l;B(a)&&R(a.data)&&a.data.forEach((e=>{const a=v.value[e.appname];a&&(a.options=e.installed.map((e=>({label:`${e.service_name} ${e.version}`,value:e.service_name}))),n.value[e.app_type]&&n.value[e.app_type].name===e.appname&&e.installed.length>0&&(n.value[e.app_type].service_name=e.installed[0].service_name))}))})(),()=>u(d,null,[s.value.map(((e,p)=>{const o=n.value[e.apptype].name,i=v.value[o||""]||{appName:"",options:[]};return u(se,{key:e.apptype,label:e.appTypeCN,class:0===p?"mt-20px":"",showFeedback:p!==s.value.length-1},{default:()=>[u("div",{class:"flex-1"},[u("div",{class:"flex items-center"},[i.appName?u("div",{class:"w-120px min-w-120px"},[u(ie,{value:n.value[e.apptype].name,"onUpdate:value":[a=>n.value[e.apptype].name=a,()=>{const a=n.value[e.apptype].name,l=v.value[a||""]||{options:[]};l.options.length>0?n.value[e.apptype].service_name=`${l.options[0].value}`:n.value[e.apptype].service_name=null}],options:r.value},null)]):"",u("div",{class:"w-160px min-w-160px ml-8px"},[u(ie,{value:n.value[e.apptype].service_name,"onUpdate:value":a=>n.value[e.apptype].service_name=a,options:i.options,disabled:0===i.options.length,placeholder:i.options.length>0?void 0:l("Docker.App.Install.index_8")},null)]),u("span",{class:"ml-8px"},[e.appDesc])]),0===i.options.length?u("div",{class:"mt-8px"},[u("a",{class:"bt-link",href:"javascript:;",onClick:()=>{(async e=>{const l=e.apptype,s=n.value[l].name,{message:p}=await _e({p:1,row:300,query:"",app_type:"all",force:0},!0);if(B(p)&&R(p.data)){const e=p.data.find((e=>e.appname===s));e&&(a("close"),t.setType(e.apptype),t.setRefresh(!0),Se(e))}})(e)}},[l("Public.Btn.Install")])]):""])]})}))])}}),Ce={class:"p-20px py-24px"},De={class:"w-240px"},je={class:"w-160px"},$e=s({__name:"index",props:{app:{}},emits:["close"],setup(e,{expose:a,emit:t}){const s=t,n=c(e,"app"),{t:o}=p(),r=M(),d=m({service_name:`${n.value.appname}_${F(4)}`,version:null}),v=i({}),k=i({}),w=i([]),A=()=>{s("close")};return w.value=[],n.value.appversion.forEach((e=>{e.s_version.length?e.s_version.forEach((a=>{w.value.push({label:`${e.m_version}.${a}`,value:`${e.m_version}.${a}`})})):w.value.push({label:e.m_version,value:e.m_version})})),w.value.length>0&&(d.version=w.value[0].value?`${w.value[0].value}`:null),a({onConfirm:async()=>{const e=(()=>{const{domain:e}=v.value;if(T(e)&&e){const a=e.split("\n"),l=a.findIndex((e=>e.split(":")[0].length<3||e.split(":")[0].length>40));if(-1!==l)throw L.error(o("Docker.App.Install.index_4",[l+1])),new Error("validate");for(let e=0;e<a.length;e++)if(!N(a[e].split(":")[0]))throw L.error(o("Docker.App.Install.index_5",[e+1,a[e]])),new Error("validate")}const a=Object.entries(k.value),l=[];for(let p=0;p<a.length;p++){const[,e]=a[p];if(null===e.name||null===e.service_name)throw L.error(o("Docker.App.Install.index_6")),new Error("validate");l.push({appname:e.name,service_name:e.service_name})}const t=d.version||"",s=(e=>{if(!(e.indexOf(".")>-1))return null;const a=e.split(".");return 3===a.length?{x:a[0],yz:`${a[1]}.${a[2]}`}:2===a.length?{x:a[0],yz:a[1]}:null})(t);return{...h(d),...h(v.value),app_name:n.value.appname,disable_domain:Number(!v.value.domain),allow_access:Number(v.value.allow_access),version:t,m_version:s?s.x:t,s_version:s?s.yz:"",...l.length>0?{depend_app:JSON.stringify(l)}:{}}})();var a;await(a=e,z.post("/mod/docker/com/create_app",a,{requestOptions:{loading:E.global.t("Docker.api.App.index_2"),successMessage:!0}})),r.setType("installed"),r.setRefresh(!0)}}),(e,a)=>{const t=pe,s=se,p=ie,o=l;return x(),f("div",Ce,[u(o,{model:b(d),"label-width":"150"},{default:g((()=>[u(s,{label:e.$t("Docker.App.Install.index_1")},{default:g((()=>[_("div",De,[u(t,{value:b(d).service_name,"onUpdate:value":a[0]||(a[0]=e=>b(d).service_name=e),placeholder:e.$t("Docker.App.Install.index_2")},null,8,["value","placeholder"])])])),_:1},8,["label"]),u(s,{label:e.$t("Docker.App.Install.index_3")},{default:g((()=>[_("div",je,[u(p,{value:b(d).version,"onUpdate:value":a[1]||(a[1]=e=>b(d).version=e),options:b(w)},null,8,["value","options"])])])),_:1},8,["label"]),u(b(we),{data:b(v),"onUpdate:data":a[2]||(a[2]=e=>y(v)?v.value=e:null),config:b(n).field||[]},null,8,["data","config"]),u(b(Ae),{data:b(k),"onUpdate:data":a[3]||(a[3]=e=>y(k)?k.value=e:null),config:b(n).depend||[],onClose:A},null,8,["data","config"])])),_:1},8,["model"])])}}}),Se=e=>{G({title:E.global.t("Docker.App.index_7",[e.apptitle]),width:800,footer:!0,data:{app:e},component:$e})},Oe={class:"p-20px"},Pe={key:1,class:"flex-center h-160px"},ze=s({__name:"index",props:{app:{}},setup(e){const a=c(e,"app");return(e,l)=>{const t=H,s=W,p=re;return x(),f("div",Oe,[b(a).appinfo?(x(),k(s,{key:0,class:"max-h-460px overflow-auto",column:1,bordered:!0,"label-placement":"left","label-style":{width:"180px",color:"#999"}},{default:g((()=>[(x(!0),f(d,null,w(b(a).appinfo,(e=>(x(),k(t,{key:e.fieldKey,label:e.fieldTitle},{default:g((()=>[A(C(e.fieldValue),1)])),_:2},1032,["label"])))),128))])),_:1})):(x(),f("div",Pe,[u(p)]))])}}});function Ee(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!v(e)}const qe=U({display:"grid",gap:"16px",gridTemplateColumns:"repeat(2, minmax(0, 1fr))",padding:"4px"}),Ie=s({name:"DockerAppList",props:{loading:{type:Boolean,default:!1},data:{type:Object,default:()=>({install:[],installed:[]})}},setup(e){const a=M(),{type:l}=n(a),t=c(e,"data"),s=r((()=>"installed"===l.value?t.value.installed:t.value.install)),p=r((()=>s.value.length>0));return()=>u(d,null,[D(u("div",{class:qe},[u(V,{height:"140px"},null),u(V,{height:"140px"},null),u(V,{height:"140px"},null),u(V,{height:"140px"},null),u(V,{height:"140px"},null)]),[[j,e.loading]]),D(u("div",{class:qe},[s.value.map((e=>u(Ue,{type:l.value,data:e},null)))]),[[j,!e.loading&&p.value]]),D(u("div",{class:"pt-120px"},[u(re,{size:"large"},null)]),[[j,!e.loading&&!p.value]])])}}),Re=U({display:"flex",justifyContent:"space-between",padding:"16px",border:"1px solid #FFFFFF",borderRadius:"4px",transition:"all .3s",boxShadow:"0 0 6px rgba(0, 0, 0, 0.15)","&:hover":{border:"1px solid #20a53a80"},".n-image":{display:"flex",alignItems:"center",justifyContent:"center",width:"46px",height:"46px",borderRadius:"50%",border:"1px solid #EEEEEE",boxShadow:"0 0 6px rgba(0, 0, 0, .15)"},".n-tag":{"--n-height":"24px"}}),Ue=s({name:"DockerAppItem",props:{type:{type:String,default:"all"},data:{type:Object,required:!0}},setup(e){const a=r((()=>{const a=e.data.appname.replace(/-+[{0-9},.,]+$/,"");return`${J}images/soft-ico/dkapp/ico-dkapp_${a}.png`}));return()=>{return u("div",{class:Re},[u(ue,{class:"mr-12px",width:38,height:38,lazy:!0,src:a.value,"preview-disabled":!0,"object-fit":"contain"},null),(l=e.type,t=e.data,u("installed"===l?Le:Be,{data:t},null))]);var l,t}}});const Me=U({flex:1,display:"flex",flexDirection:"column",justifyContent:"space-between",minHeight:"128px",".label-tag":{"--n-color":"#f4f4f5","--n-border":"1px solid #e9e9eb","--n-text-color":"#909399"}}),Be=s({name:"DockerAppInstall",props:{data:{type:Object,required:!0}},setup(e){const a=c(e,"data"),{t:l}=p(),t=M();return()=>{let e;return u("div",{class:Me},[u("div",{class:"flex justify-between"},[u("div",{class:"flex-1 mr-16px"},[u("div",{class:"flex items-center"},[u("span",{class:"leading-22px text-16px font-600 text-default"},[a.value.apptitle]),a.value.installedCount?u("a",{class:"bt-link ml-12px",href:"javascript:;",onClick:()=>{t.setType("installed"),t.setRefresh(!0)}},[l("Docker.App.app_list_0",[a.value.installedCount])]):"",a.value.help?u("a",{class:"bt-link ml-12px",href:a.value.help,target:"_blank"},[">>"+l("Public.Btn.Help")]):""]),u("div",{class:"mt-8px text-default"},[a.value.appdesc||"--"])]),u(ce,{type:"primary",secondary:!0,onClick:()=>{Se(a.value)}},Ee(e=l("Public.Btn.Install"))?e:{default:()=>[e]})]),u("div",{class:"flex flex-wrap gap-8px mt-8px"},[u(de,{class:"label-tag"},{default:()=>[a.value.appTypeCN]})])])}}}),Fe=U({flex:1,display:"flex",flexDirection:"column",justifyContent:"space-between",minHeight:"138px",".info-tag":{"--n-color":"#fff","--n-border":"1px solid #d3d4d6","--n-text-color":"#909399"},".n-button.error":{"--n-color-hover":"#fef0f0","--n-border-hover":"1px solid #fbc4c4","--n-border-focus":"1px solid #fbc4c4","--n-border-pressed":"1px solid #fbc4c4","--n-text-color-hover":"#f56c6c","--n-text-color-focus":"#fef0f0","--n-text-color-pressed":"#fef0f0"}}),Te=U`
	animation: rotating 2s linear infinite;

	@keyframes rotating {
		0% {
			transform: rotate(0);
		}
		100% {
			transform: rotate(360deg);
		}
	}
`,Le=s({name:"DockerAppInstalled",props:{data:{type:Object,required:!0}},setup(e){const{t:l}=p(),t=c(e,"data"),s=M(),n=$(),o=r((()=>{const e=[l("Public.Status.Abnormal"),"warning"];switch(t.value.status){case"running":e[0]=l("Public.Status.Running"),e[1]="success";break;case"exited":e[0]=l("Public.Status.Stopped"),e[1]="error";break;case"initializing":e[0]=l("Docker.App.app_list_1"),e[1]="default"}return e})),v=()=>{G({title:l("Docker.App.app_list_2"),width:820,height:556,data:{app:t.value},component:S((()=>X((()=>a.import("./index-legacy141.js?v=1752142539265")),void 0)))})},m=new Map([["start",l("Public.Status.Start").toLocaleLowerCase()],["stop",l("Public.Status.Stop").toLocaleLowerCase()],["restart",l("Public.Status.Restart").toLocaleLowerCase()],["rebuild",l("Public.Btn.Rebuild").toLocaleLowerCase()]]),f=e=>{Y({title:l("Public.Confirm.Title"),content:l("Docker.App.app_list_4",[m.get(e),t.value.service_name]),onConfirm:async()=>{var a;await(a={service_name:t.value.service_name,app_name:t.value.appname,status:e},z.post("/mod/docker/com/set_app_status",a,{requestOptions:{loading:E.global.t("Docker.api.App.index_3"),successMessage:!0}})),s.setRefresh(!0)}})},x=()=>{const e=i(!1);Y({title:l("Public.Confirm.Title"),content:()=>{let a;return u(d,null,[u("div",{class:"mb-16px"},[l("Docker.App.app_list_6",[t.value.service_name])]),u(oe,{checked:e.value,"onUpdate:checked":a=>e.value=a},Ee(a=l("Docker.App.app_list_8"))?a:{default:()=>[a]})])},onConfirm:async()=>{var a;await(a={id:t.value.id,delete_data:e.value?1:0},z.post("/mod/docker/com/remove_app",a,{requestOptions:{loading:E.global.t("Docker.api.App.index_4"),successMessage:!0}})),s.setRefresh(!0)}})};return()=>{let e,s,p,i,r,c,d;return u("div",{class:Fe},[u("div",{class:"flex justify-between"},[u("div",{class:"flex-1 mr-16px"},[u("div",{class:"flex items-center text-#555"},[u("div",{class:"min-w-0 leading-22px text-16px text-default"},[u("div",{class:"max-w-full truncate",title:t.value.service_name},[t.value.service_name])]),u("div",{class:"ml-8px",onClick:()=>{"initializing"===t.value.status&&v()}},[u(de,{type:o.value[1],class:"initializing"===t.value.status?"cursor-pointer":""},{default:()=>[o.value[0],"initializing"===t.value.status?u(I,{class:[Te,"ml-4px"],name:"base-loading"},null):""]})]),u(ve,null,{trigger:()=>u("div",{class:"ml-8px text-default hover:text-primary cursor-pointer",onClick:()=>{Q("Path",t.value.path),n.push("/files")}},[u(I,{name:"base-folder-open",size:18},null)]),default:()=>l("Docker.App.app_list_9")}),u(ve,null,{trigger:()=>u("div",{class:"ml-8px text-default hover:text-primary cursor-pointer",onClick:()=>{v()}},[u(I,{name:"base-left-logs",size:18},null)]),default:()=>l("Docker.App.app_list_10")}),u("span",{class:"ml-8px"},[l("Docker.App.app_list_11"),t.value.createat])]),u("div",{class:"flex items-center gap-8px mt-8px"},[u(de,{class:"info-tag",size:"small"},{default:()=>[l("Docker.App.app_list_12"),t.value.m_version+(t.value.s_version?".":"")+t.value.s_version]}),u(Ne,{port:t.value.port||[]},null)]),t.value.domain?u("div",{class:"flex items-center gap-8px mt-8px"},[u(ve,null,{trigger:()=>u("div",{onClick:()=>{window.open(`http://${t.value.domain}`)}},[u(de,{class:"info-tag cursor-pointer",size:"small"},{default:()=>[u(I,{class:"hover:text-primary",name:"base-max-black",size:"14"},null),u("span",{class:"ml-4px"},[l("Docker.App.app_list_14"),t.value.domain])]})]),default:()=>u("span",null,[l("Docker.App.app_list_15"),t.value.domain])}),u("a",{class:"bt-link",href:"javascript:;",onClick:()=>{n.push("/site/proxy")}},[`>${l("Docker.App.app_list_16")}`])]):""]),u(ce,{size:"small",onClick:()=>{G({title:l("Docker.App.app_list_3"),width:920,minHeight:280,data:{app:t.value},component:S((()=>X((()=>a.import("./index-legacy142.js?v=1752142539265")),void 0)))})}},Ee(e=l("Docker.App.app_list_17"))?e:{default:()=>[e]})]),u("div",null,[u(K,null,null),u("div",{class:"flex gap-10px mt-10px"},["exited"===t.value.status?u(ce,{size:"small",onClick:()=>{f("start")}},Ee(s=l("Public.Status.Start"))?s:{default:()=>[s]}):"","exited"!==t.value.status?u(ce,{size:"small",onClick:()=>{f("stop")}},Ee(p=l("Public.Status.Stop"))?p:{default:()=>[p]}):"",u(ce,{size:"small",onClick:()=>{f("restart")}},Ee(i=l("Public.Status.Restart"))?i:{default:()=>[i]}),u(ce,{size:"small",onClick:()=>{G({title:l("Docker.App.app_list_5"),width:640,data:{app:t.value},component:ze})}},Ee(r=l("Public.Btn.Details"))?r:{default:()=>[r]}),u(ce,{size:"small",class:"error",onClick:()=>{f("rebuild")}},Ee(c=l("Public.Btn.Rebuild"))?c:{default:()=>[c]}),u(ce,{size:"small",class:"error",onClick:()=>{x()}},Ee(d=l("Public.Btn.Uninstall"))?d:{default:()=>[d]})])])])}}}),Ne=s({name:"PortTags",functional:!0,props:{port:{type:Array,default:()=>[]}},setup(e){const{t:a}=p(),l=r((()=>e.port.slice(0,2))),t=r((()=>e.port.slice(2)));return()=>u(d,null,[l.value.map((e=>u(de,{class:"info-tag",size:"small",key:e},{default:()=>[a("Docker.App.app_list_13"),e]}))),t.value.length>0?u(ve,null,{trigger:()=>u(de,{class:"info-tag"},{default:()=>[A("+"),t.value.length]}),default:()=>t.value.join(a("Public.Punctuation.Comma"))}):""])}}),He={class:"flex-1 flex items-center justify-between"},We=s({__name:"index",setup(e){const a=M(),{type:s,refresh:p}=n(a),o=i(),{height:r}=ee(o),{loading:c,setLoading:d}=ae(),v=m({p:1,row:300,query:"",force:0}),f=m({install:[],installed:[]}),w=async()=>{try{d(!0),"installed"===s.value?await $():await j()}finally{d(!1)}},D=()=>({...h(v),app_type:"installed"===s.value?"all":s.value}),j=async()=>{const{message:e}=await _e(D());1===v.force&&(v.force=0),B(e)&&(f.install=R(e.data)?e.data:[],a.setMaxCpu(e.maximum_cpu),a.setMaxMemory(e.maximum_memory))},$=async()=>{const{message:e}=await((e,a=!1)=>z.post("/mod/docker/com/get_installed_apps",e,{requestOptions:{loading:a?E.global.t("Docker.api.App.index_1"):""}}))(D());B(e)&&(f.installed=R(e.data)?e.data:[])},S=()=>{v.p=1,w()},q=()=>{v.query="",S()},I=()=>{v.force=1,S()};return O((()=>p.value),(e=>{e&&(a.setRefresh(!1),S())})),w(),(e,a)=>{const p=t,n=ce,i=se,d=l,m=me;return x(),k(m,{class:"p-16px"},{default:g((()=>[u(d,{class:"mb-8px p-4px","label-align":"left","label-width":"0"},{default:g((()=>[u(i,{label:"","show-feedback":!1,"label-style":{paddingRight:"0"}},{default:g((()=>[u(p,{value:b(v).query,"onUpdate:value":a[0]||(a[0]=e=>b(v).query=e),width:460,prefix:!0,placeholder:e.$t("Docker.App.index_1"),onSearch:S},null,8,["value","placeholder"]),u(n,{type:"primary",class:"ml-10px",onClick:S},{default:g((()=>[A(C(e.$t("Public.Btn.Search")),1)])),_:1})])),_:1}),u(i,{class:"mt-20px",label:"","show-feedback":!1,"label-style":{paddingRight:"0"}},{default:g((()=>[_("div",He,[u(b(be),{value:b(s),"onUpdate:value":[a[1]||(a[1]=e=>y(s)?s.value=e:null),q]},null,8,["value"]),u(n,{onClick:I},{default:g((()=>[A(C(e.$t("Docker.App.index_2")),1)])),_:1})])])),_:1})])),_:1}),_("div",{ref_key:"scrollbarRef",ref:o,class:"overflow-auto",style:P({height:b(r)})},[u(b(Ie),{loading:b(c),data:b(f)},null,8,["loading","data"])],4)])),_:1})}}}),Ve=Z(We,[["__scopeId","data-v-ff0af478"]]),Je=Object.freeze(Object.defineProperty({__proto__:null,default:Ve},Symbol.toStringTag,{value:"Module"}));e("i",Je)}}}));
