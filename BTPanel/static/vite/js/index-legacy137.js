System.register(["./useTableData-legacy.js?v=1721298337096","./index-legacy.js?v=1721298337096","./file-legacy2.js?v=1721298337096","./useLoading-legacy.js?v=1721298337096","./_baseFindIndex-legacy.js?v=1721298337096","./vue-legacy.js?v=1721298337096","./Checkbox-legacy.js?v=1721298337096","./Ellipsis-legacy.js?v=1721298337096","./Skeleton-legacy.js?v=1721298337096","./DataTable-legacy.js?v=1721298337096","./Select-legacy.js?v=1721298337096","./Tag-legacy.js?v=1721298337096","./Empty-legacy.js?v=1721298337096","./omit-legacy.js?v=1721298337096","./pinia-legacy.js?v=1721298337096"],(function(e,l){"use strict";var a,i,n,t,s,c,o,u,r,d,p,f,v,m,y,g,x,h,k,b,j,w,C,_,D,S;return{setters:[e=>{a=e.u,i=e._},e=>{n=e.ay,t=e._,s=e.j,c=e.al,o=e.M,u=e.B,r=e.G},e=>{d=e.c},e=>{p=e.u},e=>{f=e.b},e=>{v=e.l,m=e.r,y=e.P,g=e.S,x=e.Z,h=e.V,k=e.q,b=e._,j=e.a3,w=e.W,C=e.F,_=e.ag},e=>{D=e._},e=>{S=e._},null,null,null,null,null,null,null],execute:function(){const l={class:"flex flex-col h-full"},z={class:"flex-1 w-0 truncate"},E={class:"flex flex-1 overflow-hidden"},I={class:"w-160px py-12px overflow-auto"},P=["onClick"],T={class:"flex-1 ml-8px"},$={class:"flex-1","b-l":"1 solid #aaa"};e("default",v({__name:"index",props:{data:{}},setup(e,{expose:v}){const F=e,{path:L,checkedType:M,callback:O}=F.data,R=m([]),q=m([]),A=m(L||"/"),{table:B,columns:G}=a([{key:"checkbox",title:"",width:36,render:e=>M.includes(e.type)?y("div",{onClick:e=>{e.stopPropagation()}},[y(D,{checked:e.filename===q.value[0],onUpdateChecked:l=>{q.value=l?[e.filename]:[]}},null)]):""},{key:"filename",title:"File name",render:e=>y("div",{class:"flex"},[y("div",{class:"flex items-center flex-1 cursor-pointer",onClick:l=>{"dir"===e.type&&(l.preventDefault(),A.value+=`${"/"===A.value?"":"/"}${e.filename}`,W(),l.stopPropagation())}},[y("div",null,["dir"===e.type?y(t,{name:"base-dir",size:"16"},null):"","file"===e.type?y(t,{name:"base-file",size:"16",color:"#666"},null):""]),y("div",{class:"ml-6px flex-1 w-0"},[y(S,null,{default:()=>[e.filename]})])])])},{key:"time",title:"Modification time",width:146},{key:"permission",title:"Permission",width:86},{key:"owner",title:"Owner",width:72}]),H=e=>({onClick:()=>{if(M.includes(e.type)){const i=(l=q.value,a=l=>l===e.filename,null!=l&&l.length?f(l,n(a),0):-1);q.value=-1!==i?[]:[e.filename]}var l,a},onDblclick:()=>{M.includes(e.type)&&(A.value+=`${"/"===A.value?"":"/"}${e.filename}`,W())}}),K=()=>{const e=A.value.substring(0,A.value.lastIndexOf("/"));A.value=""===e?"/":e,W()},{loading:U,setLoading:V}=p(),W=async()=>{try{V(!0),B.data=[],q.value=[];const{message:e}=await d({path:A.value});if(s(e)){const l=[],a=c(e,"DIR",[]),i=c(e,"FILES",[]);a.forEach((e=>{l.push(Z(e,"dir"))})),i.forEach((e=>{l.push(Z(e,"file"))})),A.value=e.PATH,B.data=l,R.value=c(e,"DISK",[])}}finally{V(!1)}},Z=(e,l)=>{const a=e.split(";"),i=a[0],n=o(a[2]),t=a[3],s=a[4];return{path:("/"!==A.value?A.value+"/":"")+i,filename:i,time:n,permission:t,owner:s,type:l}};return W(),v({onConfirm:({hide:e})=>{const l=q.value.length>0?q.value[0]:"",a=("/"!==A.value?A.value+"/":"")+l,i=B.data.find((e=>e.filename===l));O?.(a,i),e()}}),(e,a)=>{const n=u,s=r,c=i;return g(),x("div",l,[y(s,{class:"items-center h-50px px-12px","b-b":"1 solid #aaa"},{default:h((()=>[y(n,{onClick:K},{default:h((()=>[k("Return")])),_:1}),b("div",z,"Current path: "+j(w(A)),1)])),_:1}),b("div",E,[b("div",I,[(g(!0),x(C,null,_(w(R),(e=>(g(),x("div",{key:e.path,class:"flex items-center p-8px pl-16px hover:bg-#ececec cursor-pointer transition-colors",onClick:l=>{return a=e.path,A.value=a,void W();var a}},[y(t,{name:"file-disk",size:"18",color:"#666"}),b("div",T,j(e.path)+" "+j(e.size[2]?`(${e.size[2]})`:""),1)],8,P)))),128))]),b("div",$,[y(c,{loading:w(U),"loading-num":10,bordered:!1,"virtual-scroll":!0,"max-height":456,data:w(B).data,columns:w(G),"row-props":H},null,8,["loading","data","columns"])])])])}}}))}}}));
