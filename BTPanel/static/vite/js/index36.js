import{_ as e}from"./index.js?v=1752142539265";import{_ as a}from"./index.vue_vue_type_script_setup_true_lang4.js?v=1752142539265";import{e as l,b as o,h as t,q as r,c as s,f as n}from"./public.js?v=1752142539265";import{_ as i}from"./index.vue_vue_type_script_setup_true_lang11.js?v=1752142539265";import{bf as d,bR as m,X as u,bS as c,bT as p,w as _,bU as k}from"./page_layout.js?v=1752142539265";import{_ as f}from"./index.vue_vue_type_script_setup_true_lang.js?v=1752142539265";import{_ as x}from"./index100.js?v=1752142539265";import{k as v,P as h,r as w,e as y,U as b,X as D,Q as V,a2 as g,V as j,W as U,N as $,w as N,a1 as C,ah as R,j as L,a3 as W}from"./vue.js?v=1752142539265";import{cz as P,aq as A,ay as q,cA as z}from"./naive.js?v=1752142539265";import"./common.js?v=1752142539265";import"./__commonjsHelpers__.js?v=1752142539265";import"./index.vue_vue_type_script_setup_true_lang7.js?v=1752142539265";const K={class:"px-20px py-24px"},M={class:"w-350px"},S={class:"w-350px"},X={class:"w-350px"},B={class:"w-350px"},E=v({__name:"index",setup(e,{expose:a}){const{t:l}=h(),o=d(),t=w(null),r=y({name:"",driver:"local",driver_opts:"",labels:"",remark:""}),s={name:{trigger:["blur"],validator:()=>""!==r.name||new Error(l("Docker.Volume.form.index_2"))}};return a({onConfirm:async()=>{var e;await(null==(e=t.value)?void 0:e.validate()),await m($(r)),o.setRefresh(!0)}}),(e,a)=>{const l=A,o=P,n=x,i=f;return D(),b("div",K,[V(i,{ref_key:"formRef",ref:t,model:U(r),rules:s},{default:g((()=>[V(o,{label:e.$t("Docker.Volume.form.index_1"),path:"name"},{default:g((()=>[j("div",M,[V(l,{value:U(r).name,"onUpdate:value":a[0]||(a[0]=e=>U(r).name=e),placeholder:e.$t("Docker.Volume.form.index_2")},null,8,["value","placeholder"])])])),_:1},8,["label"]),V(o,{label:e.$t("Docker.Volume.form.index_3"),path:"driver_opts"},{default:g((()=>[j("div",S,[V(n,{value:U(r).driver_opts,"onUpdate:value":a[1]||(a[1]=e=>U(r).driver_opts=e),rows:3,placeholder:e.$t("Docker.Volume.form.index_3")},null,8,["value","placeholder"])])])),_:1},8,["label"]),V(o,{label:e.$t("Docker.Volume.form.index_4"),path:"labels"},{default:g((()=>[j("div",X,[V(n,{value:U(r).labels,"onUpdate:value":a[2]||(a[2]=e=>U(r).labels=e),rows:3,placeholder:e.$t("Docker.Volume.form.index_5")},null,8,["value","placeholder"])])])),_:1},8,["label"]),V(o,{label:e.$t("Docker.Volume.form.index_6"),path:"remark"},{default:g((()=>[j("div",B,[V(n,{value:U(r).remark,"onUpdate:value":a[3]||(a[3]=e=>U(r).remark=e),rows:3,placeholder:e.$t("Docker.Volume.form.index_6")},null,8,["value","placeholder"])])])),_:1},8,["label"])])),_:1},8,["model"])])}}}),H=v({__name:"index",setup(m){const{t:f}=h(),x=l(f("Docker.Volume.index_1")),v=d(),w=()=>{x.show=!0},b=()=>{r({title:f("Docker.Volume.index_2"),width:400,content:()=>V("span",{class:"text-error"},[f("Docker.Volume.index_13")]),onConfirm:async()=>{await k(),B()}})},j=y({page:1,pageSize:10}),{keys:$,table:P,columns:A}=o([{type:"selection",width:40},{key:"Name",title:f("Docker.Volume.index_3"),ellipsis:{tooltip:!0},render:e=>e.Name||"--"},{key:"Mountpoint",title:f("Docker.Volume.index_4"),ellipsis:{tooltip:!0},render:e=>e.Mountpoint||"--"},{key:"container",title:f("Docker.Volume.index_5"),width:"16%",minWidth:120,ellipsis:{tooltip:!0},render:e=>e.container||"--"},{key:"Driver",title:f("Docker.Volume.index_6"),width:"10%",minWidth:100,render:e=>e.Driver||"--"},{key:"CreatedAt",title:f("Docker.Volume.index_7"),width:"12%",minWidth:140,render:e=>u(e.CreatedAt)},{key:"Labels",title:f("Docker.Volume.index_8"),width:"16%",minWidth:140,ellipsis:{tooltip:!0},render:e=>{if(!e.Labels)return"--";return(Object.entries(e.Labels)||[]).map((e=>"".concat(e[0],":").concat(e[1]))).join("\n")}},t({width:80,options:e=>[{label:f("Public.Btn.Del"),onClick:()=>{K(e)}}]})]),K=e=>{r({title:f("Docker.Volume.index_10",[e.Name]),content:()=>V("span",{class:"text-error"},[f("Docker.Volume.index_14",[e.Name])]),onConfirm:async()=>{await c({name:e.Name}),B()}})},M=[{key:"del",type:"confirm",label:"Please choose del",confirm:{title:f("Docker.Volume.index_11"),desc:f("Docker.Volume.index_12"),api:e=>c({name:e.Name},!1),done:()=>{B()},columns:[A.value[1]]}}],{loading:S,setLoading:X}=s(),B=async()=>{try{X(!0);const{message:e}=await p();P.data=_(e)?e:[]}finally{$.value=[],X(!1)}};return N((()=>v.isRefresh),(e=>{e&&(v.setRefresh(!1),B())})),B(),(l,o)=>{const t=q,r=i,s=n,d=a,m=e,u=z;return D(),C(u,{class:"p-16px"},{default:g((()=>[V(d,null,{toolsLeft:g((()=>[V(t,{type:"primary",onClick:w},{default:g((()=>[L(W(l.$t("Docker.Volume.index_1")),1)])),_:1}),V(t,{onClick:b},{default:g((()=>[L(W(l.$t("Docker.Volume.index_2")),1)])),_:1})])),table:g((()=>[V(s,{page:U(j),"onUpdate:page":o[1]||(o[1]=e=>R(j)?j.value=e:null),"checked-row-keys":U($),"onUpdate:checkedRowKeys":o[2]||(o[2]=e=>R($)?$.value=e:null),"row-key":"Name","is-page":!0,loading:U(S),data:U(P).data,columns:U(A)},{pagePrefix:g((()=>[V(r,{"checked-row-keys":U($),"onUpdate:checkedRowKeys":o[0]||(o[0]=e=>R($)?$.value=e:null),"row-key":"Name",data:U(P).data,options:M},null,8,["checked-row-keys","data"])])),_:1},8,["page","checked-row-keys","loading","data","columns"])])),_:1}),V(m,{show:U(x).show,"onUpdate:show":o[3]||(o[3]=e=>U(x).show=e),title:U(x).title,width:580,footer:!0,component:E},null,8,["show","title"])])),_:1})}}});export{H as default};
