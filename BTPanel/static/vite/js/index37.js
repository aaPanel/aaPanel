import{_ as e}from"./index.js?v=1764233927359";import{_ as a}from"./index.vue_vue_type_script_setup_true_lang5.js?v=1764233927359";import{e as r,c as o,f as t,p as s,d as l,h as i}from"./public.js?v=1764233927359";import{_ as d}from"./index.vue_vue_type_script_setup_true_lang12.js?v=1764233927359";import{cg as n,ch as p,d as c,ci as u,c5 as m,x as _}from"./page_layout.js?v=1764233927359";import{_ as y}from"./index.vue_vue_type_script_setup_true_lang.js?v=1764233927359";import{k,P as f,t as v,r as w,e as x,R as h,V as g,W as R,a3 as b,S as D,U as j,N as $,a2 as U,ak as E,j as C,a4 as P}from"./vue.js?v=1764233927359";import{dR as B,au as L,aC as S,dS as K}from"./naive.js?v=1764233927359";import"./common.js?v=1764233927359";import"./__commonjsHelpers__.js?v=1764233927359";import"./index.vue_vue_type_script_setup_true_lang6.js?v=1764233927359";const z={class:"px-20px py-24px"},H={class:"w-430px"},N={class:"w-430px"},V={class:"flex"},W={class:"w-160px"},q={class:"w-160px"},A={class:"w-430px"},F={class:"w-430px"},G=k({__name:"index",props:{isEdit:{type:Boolean,default:!1},row:{default:void 0}},emits:["refresh"],setup(e,{expose:a,emit:r}){const o=e,t=r,{t:s}=f(),l=v(o,"isEdit"),i=w(),d=x({registry:"",name:"",username:"",password:"",namespace:"",remark:""}),u={registry:{trigger:["blur"],validator:()=>""!==d.registry||new Error(s("Docker.Repository.form.index_11"))},name:{trigger:["blur"],validator:()=>""!==d.name||new Error(s("Docker.Repository.form.index_12"))},username:{trigger:["blur"],validator:()=>""!==d.username||new Error(s("Docker.Repository.form.index_13"))},password:{trigger:["blur"],validator:()=>""!==d.password||new Error(s("Docker.Repository.form.index_13"))},namespace:{trigger:["blur"],validator:()=>""!==d.namespace||new Error(s("Docker.Repository.form.index_14"))}};return(()=>{const{row:e}=o;l.value&&c(e)&&(console.log(1),d.registry=e.url,d.name=e.name,d.username=e.username,d.password=e.password,d.namespace=e.namespace,d.remark=e.remark)})(),a({onConfirm:async()=>{var e;await(null==(e=i.value)?void 0:e.validate()),l.value?o.row&&await p({...$(d),id:o.row.id}):await n($(d)),t("refresh")}}),(e,a)=>{const r=L,o=B,t=y;return g(),h("div",z,[R(t,{ref_key:"formRef",ref:i,model:j(d),rules:u,"label-width":"140px"},{default:b(()=>[R(o,{label:e.$t("Docker.Repository.form.index_1"),path:"registry"},{default:b(()=>[D("div",H,[R(r,{value:j(d).registry,"onUpdate:value":a[0]||(a[0]=e=>j(d).registry=e),placeholder:e.$t("Docker.Repository.form.index_2")},null,8,["value","placeholder"])])]),_:1},8,["label"]),R(o,{label:e.$t("Docker.Repository.form.index_3"),path:"name"},{default:b(()=>[D("div",N,[R(r,{value:j(d).name,"onUpdate:value":a[1]||(a[1]=e=>j(d).name=e),placeholder:e.$t("Docker.Repository.form.index_4")},null,8,["value","placeholder"])])]),_:1},8,["label"]),D("div",V,[R(o,{label:e.$t("Docker.Repository.form.index_5"),path:"username"},{default:b(()=>[D("div",W,[R(r,{value:j(d).username,"onUpdate:value":a[2]||(a[2]=e=>j(d).username=e),placeholder:e.$t("Docker.Repository.form.index_6")},null,8,["value","placeholder"])])]),_:1},8,["label"]),R(o,{label:e.$t("Docker.Repository.form.index_15"),"label-width":"110",path:"password"},{default:b(()=>[D("div",q,[R(r,{value:j(d).password,"onUpdate:value":a[3]||(a[3]=e=>j(d).password=e),placeholder:e.$t("Docker.Repository.form.index_7")},null,8,["value","placeholder"])])]),_:1},8,["label"])]),R(o,{label:e.$t("Docker.Repository.form.index_8"),path:"namespace"},{default:b(()=>[D("div",A,[R(r,{value:j(d).namespace,"onUpdate:value":a[4]||(a[4]=e=>j(d).namespace=e),placeholder:e.$t("Docker.Repository.form.index_9")},null,8,["value","placeholder"])])]),_:1},8,["label"]),R(o,{label:e.$t("Docker.Repository.form.index_10"),path:"remark","show-feedback":!1},{default:b(()=>[D("div",F,[R(r,{value:j(d).remark,"onUpdate:value":a[5]||(a[5]=e=>j(d).remark=e),placeholder:e.$t("Docker.Repository.form.index_10")},null,8,["value","placeholder"])])]),_:1},8,["label"])]),_:1},8,["model"])])}}}),I=k({__name:"index",setup(n){const{t:p}=f(),c=r(p("Docker.Repository.index_1"),{isEdit:!1,onRefresh:()=>{z()}}),y=()=>{c.data.row=void 0,c.data.isEdit=!1,c.title=p("Docker.Repository.index_1"),c.show=!0},k=x({page:1,pageSize:10}),{keys:v,table:w,columns:h}=o([{type:"selection",width:40},{key:"url",title:"URL",ellipsis:{tooltip:{width:"trigger"}},render:e=>e.url||"--"},{key:"namespace",title:p("Docker.Repository.index_3"),ellipsis:{tooltip:{width:"trigger"}},render:e=>e.namespace||"--"},{key:"name",title:p("Docker.Repository.index_4"),ellipsis:{tooltip:{width:"trigger"}},render:e=>e.name||"--"},{key:"remark",title:p("Docker.Repository.index_5"),render:e=>e.remark||"--"},t({width:120,options:e=>[{label:p("Public.Btn.Edit"),disabled:1===e.id,onClick:()=>{(e=>{c.data.row=e,c.data.isEdit=!0,c.title=p("Docker.Repository.index_2",[e.name]),c.show=!0})(e)}},{label:p("Public.Btn.Del"),disabled:1===e.id,onClick:()=>{D(e)}}]})]),D=e=>{s({title:p("Docker.Repository.index_8",[e.name]),content:p("Docker.Repository.index_9",[e.name]),onConfirm:async()=>{await u({id:e.id}),z()}})},$=[{key:"del",type:"confirm",label:"Please choose del",confirm:{title:p("Docker.Repository.index_10"),desc:p("Docker.Repository.index_11"),columns:[h.value[3]],api:e=>u({id:e.id},!1),done:()=>{z()}}}],{loading:B,setLoading:L}=l(),z=async()=>{try{L(!0);const{message:e}=await m();w.data=_(e)?e:[]}finally{v.value=[],L(!1)}};return z(),(r,o)=>{const t=S,s=d,l=i,n=a,p=e,u=K;return g(),U(u,{class:"p-16px"},{default:b(()=>[R(n,null,{toolsLeft:b(()=>[R(t,{type:"primary",onClick:y},{default:b(()=>[C(P(r.$t("Docker.Repository.index_1")),1)]),_:1})]),table:b(()=>[R(l,{page:j(k),"onUpdate:page":o[1]||(o[1]=e=>E(k)?k.value=e:null),"checked-row-keys":j(v),"onUpdate:checkedRowKeys":o[2]||(o[2]=e=>E(v)?v.value=e:null),"is-page":!0,loading:j(B),data:j(w).data,columns:j(h)},{pagePrefix:b(()=>[R(s,{"checked-row-keys":j(v),"onUpdate:checkedRowKeys":o[0]||(o[0]=e=>E(v)?v.value=e:null),data:j(w).data,options:$},null,8,["checked-row-keys","data"])]),_:1},8,["page","checked-row-keys","loading","data","columns"])]),_:1}),R(p,{show:j(c).show,"onUpdate:show":o[3]||(o[3]=e=>j(c).show=e),data:j(c).data,title:j(c).title,width:620,footer:!0,component:G},null,8,["show","data","title"])]),_:1})}}});export{I as default};
