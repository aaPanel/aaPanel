System.register(["./page_layout-legacy.js?v=1769066082311","./index-legacy.js?v=1769066082311","./public-legacy.js?v=1769066082311","./vue-legacy.js?v=1769066082311","./naive-legacy.js?v=1769066082311"],function(s,e){"use strict";var t,a,o,n,i,l,r,c,p,d,u,m,g,_,w,h,v,f,y,x,k,S,b,T,j;return{setters:[s=>{t=s.aE,a=s._,o=s.T,n=s.a,i=s.d,l=s.m,r=s.p},s=>{c=s._},s=>{p=s.e,d=s.y,u=s.z},s=>{m=s.k,g=s.P,_=s.r,w=s.o,h=s.b,v=s.R,f=s.V,y=s.W,x=s.a3,k=s.S,S=s.U,b=s.a4,T=s._},s=>{j=s.bJ}],execute:function(){var J=document.createElement("style");J.textContent=".panel-ssl-progress[data-v-82c005c3]{min-width:340px;padding:24px 24px 22px}.panel-ssl-progress .progress-item[data-v-82c005c3]{display:flex;gap:16px;cursor:pointer}.panel-ssl-progress .progress-item+.progress-item[data-v-82c005c3]{margin-top:16px}.panel-ssl-progress .progress-item .progress-label[data-v-82c005c3]{min-width:120px}\n/*$vite$:1*/",document.head.appendChild(J),s("g",()=>t.post("/ssl_domain?action=get_panel_domain")),s("s",s=>t.post("/ssl_domain?action=set_panel_domain_ssl",{domain:JSON.stringify(s.domain)},{requestOptions:{loading:"Installing certificate, please wait...",successMessage:!1}}));const C={class:"panel-ssl-progress"},D={class:"progress-label"},E={class:"w-120px"},F=m({__name:"ssl-lets-progress",props:{task_id:{type:Number,default:0},isJump:{type:Boolean,default:!0},onFinish:{type:Function,default:()=>{}}},emits:["close"],setup(s,{emit:r}){const m=T(()=>n(()=>e.import("./ssl-log-legacy.js?v=1769066082311"),void 0)),{t:J}=g(),F=r,L=_({});let $=null;const z=_(!1),I=p(J("SSL.Domain.index_5")),N=async(e=!1)=>{try{e&&(z.value=!0);const{message:o}=await(a={task_id:s.task_id},t.post("/ssl_domain?action=ssl_tasks_status",a));if(i(o)&&(L.value=o,-1===o.task_code)){F("close");const s=o.task_result.match(/Error:\s*(\[[\s\S]+\])$/);if(s&&s[1]){const e=s[1];try{const s=d.parse(e);u(s)}catch{l.error(J("SSL.index_31"))}}else l.error(J("SSL.index_31"));return}100===L.value.task_status?($&&clearTimeout($),F("close"),s.onFinish?.(),l.success(J("Config.Safe.Ssl.index_11")),s.isJump&&setTimeout(()=>{window.location.href=window.location.href.split("?")[0]+"?_t="+Date.now()},1e3)):O()}catch{s.isJump&&setTimeout(()=>{window.location.href=window.location.href.split("?")[0]+"?_t="+Date.now()},1e3)}finally{e&&(z.value=!1)}var a},O=()=>{$&&clearTimeout($),$=window.setTimeout(()=>{N()},3e3)};return w(()=>{N(!0)}),h(()=>{$&&(clearTimeout($),$=null)}),(s,e)=>{const t=j,n=a,i=o,l=c;return f(),v("div",C,[y(i,{show:S(z)},{default:x(()=>[k("div",{class:"progress-item",onClick:e[0]||(e[0]=s=>{return e=S(L),I.data.path=e.task_log,void(I.show=!0);var e})},[k("span",D,b(S(L).task_name),1),k("div",E,[y(t,{percentage:S(L).task_status,type:"line",status:"success",processing:100!==S(L).task_status,"indicator-placement":"inside"},null,8,["percentage","processing"])]),y(n,{name:"base-left-logs",size:"18"})])]),_:1},8,["show"]),y(l,{show:S(I).show,"onUpdate:show":e[1]||(e[1]=s=>S(I).show=s),title:S(I).title,data:S(I).data,width:700,height:450,footer:!1,component:S(m)},null,8,["show","title","data","component"])])}}});s("a",r(F,[["__scopeId","data-v-82c005c3"]]))}}});
