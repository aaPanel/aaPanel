System.register(["./page_layout-legacy.js?v=1764233927359","./index-legacy.js?v=1764233927359","./public-legacy.js?v=1764233927359","./vue-legacy.js?v=1764233927359","./naive-legacy.js?v=1764233927359"],function(s,e){"use strict";var t,a,o,n,i,l,r,c,p,d,u,m,g,_,w,h,f,v,y,x,k,S,b,T,j;return{setters:[s=>{t=s.bf,a=s._,o=s.T,n=s.a,i=s.d,l=s.m,r=s.p},s=>{c=s._},s=>{p=s.e,d=s.y,u=s.z},s=>{m=s.k,g=s.P,_=s.r,w=s.o,h=s.b,f=s.R,v=s.V,y=s.W,x=s.a3,k=s.S,S=s.U,b=s.a4,T=s._},s=>{j=s.bH}],execute:function(){var C=document.createElement("style");C.textContent=".panel-ssl-progress[data-v-82c005c3]{min-width:340px;padding:24px 24px 22px}.panel-ssl-progress .progress-item[data-v-82c005c3]{display:flex;gap:16px;cursor:pointer}.panel-ssl-progress .progress-item+.progress-item[data-v-82c005c3]{margin-top:16px}.panel-ssl-progress .progress-item .progress-label[data-v-82c005c3]{min-width:120px}\n/*$vite$:1*/",document.head.appendChild(C),s("g",()=>t.post("/ssl_domain?action=get_panel_domain")),s("s",s=>t.post("/ssl_domain?action=set_panel_domain_ssl",{domain:JSON.stringify(s.domain)},{requestOptions:{loading:"Installing certificate, please wait...",successMessage:!1}}));const J={class:"panel-ssl-progress"},D={class:"progress-label"},F={class:"w-120px"},L=m({__name:"ssl-lets-progress",props:{task_id:{type:Number,default:0},isJump:{type:Boolean,default:!0},onFinish:{type:Function,default:()=>{}}},emits:["close"],setup(s,{emit:r}){const m=T(()=>n(()=>e.import("./ssl-log-legacy.js?v=1764233927359"),void 0)),{t:C}=g(),L=r,$=_({});let z=null;const E=_(!1),I=p(C("SSL.Domain.index_5")),N=async(e=!1)=>{try{e&&(E.value=!0);const{message:o}=await(a={task_id:s.task_id},t.post("/ssl_domain?action=ssl_tasks_status",a));if(i(o)&&($.value=o,-1===o.task_code)){L("close");const s=o.task_result.match(/Error:\s*(\[[\s\S]+\])$/);if(s&&s[1]){const e=s[1];try{const s=d.parse(e);u(s)}catch{l.error(C("SSL.index_31"))}}else l.error(C("SSL.index_31"));return}100===$.value.task_status?(z&&clearTimeout(z),L("close"),s.onFinish?.(),l.success(C("Config.Safe.Ssl.index_11")),s.isJump&&setTimeout(()=>{window.location.href=window.location.href.split("?")[0]+"?_t="+Date.now()},1e3)):O()}catch{s.isJump&&setTimeout(()=>{window.location.href=window.location.href.split("?")[0]+"?_t="+Date.now()},1e3)}finally{e&&(E.value=!1)}var a},O=()=>{z&&clearTimeout(z),z=window.setTimeout(()=>{N()},3e3)};return w(()=>{N(!0)}),h(()=>{z&&(clearTimeout(z),z=null)}),(s,e)=>{const t=j,n=a,i=o,l=c;return v(),f("div",J,[y(i,{show:S(E)},{default:x(()=>[k("div",{class:"progress-item",onClick:e[0]||(e[0]=s=>{return e=S($),I.data.path=e.task_log,void(I.show=!0);var e})},[k("span",D,b(S($).task_name),1),k("div",F,[y(t,{percentage:S($).task_status,type:"line",status:"success",processing:100!==S($).task_status,"indicator-placement":"inside"},null,8,["percentage","processing"])]),y(n,{name:"base-left-logs",size:"18"})])]),_:1},8,["show"]),y(l,{show:S(I).show,"onUpdate:show":e[1]||(e[1]=s=>S(I).show=s),title:S(I).title,data:S(I).data,width:700,height:450,footer:!1,component:S(m)},null,8,["show","title","data","component"])])}}});s("a",r(L,[["__scopeId","data-v-82c005c3"]]))}}});
