System.register(["./page_layout-legacy.js?v=1752142539265","./index-legacy.js?v=1752142539265","./index-legacy102.js?v=1752142539265","./ssl-legacy.js?v=1752142539265","./cert-legacy.js?v=1752142539265","./index-legacy84.js?v=1752142539265","./public-legacy.js?v=1752142539265","./index-legacy100.js?v=1752142539265","./naive-legacy.js?v=1752142539265","./vue-legacy.js?v=1752142539265","./index-legacy127.js?v=1752142539265","./index.vue_vue_type_script_setup_true_lang-legacy4.js?v=1752142539265","./utils-legacy3.js?v=1752142539265","./index-legacy208.js?v=1752142539265","./index.vue_vue_type_script_setup_true_lang-legacy.js?v=1752142539265","./ssl-lets-progress-legacy.js?v=1752142539265","./site-legacy.js?v=1752142539265","./common-legacy.js?v=1752142539265","./__commonjsHelpers__-legacy.js?v=1752142539265","./index.vue_vue_type_script_setup_true_lang-legacy5.js?v=1752142539265","./index.vue_vue_type_script_setup_true_lang-legacy11.js?v=1752142539265","./index.vue_vue_type_script_setup_true_lang-legacy6.js?v=1752142539265","./site-legacy4.js?v=1752142539265","./index-legacy184.js?v=1752142539265","./index.vue_vue_type_script_setup_true_lang-legacy9.js?v=1752142539265","./index-legacy96.js?v=1752142539265","./index.vue_vue_type_script_setup_true_lang-legacy14.js?v=1752142539265","./theme-chrome-legacy.js?v=1752142539265","./file-legacy.js?v=1752142539265","./index-legacy101.js?v=1752142539265","./soft-legacy.js?v=1752142539265","./useOperate-legacy.js?v=1752142539265","./useModal-legacy2.js?v=1752142539265","./index.vue_vue_type_script_setup_true_lang-legacy7.js?v=1752142539265","./paypal-js-legacy.js?v=1752142539265"],(function(e,t){"use strict";var a,n,l,s,i,d,o,u,r,c,_,p,S,h,m,y,f,v,x,g,w,C,L,b,k,$,j,P,B,E,D,N,R,U,O,z,A,I,M,T,F,H,J,q,X,G,W,Q,V,K,Y,Z,ee,te,ae,ne,le,se,ie,de,oe,ue,re,ce,_e,pe,Se,he,me,ye,fe,ve,xe,ge,we,Ce,Le,be,ke,$e,je,Pe,Be,Ee,De,Ne,Re,Ue,Oe,ze,Ae,Ie,Me,Te;return{setters:[e=>{a=e.dk,n=e.cd,l=e.o,s=e.O,i=e.a,d=e.m,o=e.d,u=e.e,r=e._,c=e.u,_=e.aF,p=e.w},e=>{S=e._},e=>{h=e._},e=>{m=e.c,y=e.s,f=e.a,v=e.g,x=e.b},e=>{g=e.C},e=>{w=e.u},e=>{C=e.e,L=e._,b=e.d,k=e.ac,$=e.ad,j=e.a6,P=e.b,B=e.h,E=e.a0,D=e.a1,N=e.a2,R=e.f,U=e.n,O=e.c,z=e.ae,A=e.af,I=e.u,M=e.ag,T=e.ah,F=e.ai,H=e.j,J=e.q,q=e.a5},e=>{X=e._},e=>{G=e.c3,W=e.cN,Q=e.c2,V=e.c1,K=e.bX,Y=e.ay,Z=e.cz,ee=e.cB,te=e.cC,ae=e._,ne=e.cO,le=e.B,se=e.bR},e=>{ie=e.k,de=e.P,oe=e.r,ue=e.c,re=e.y,ce=e.a1,_e=e.X,pe=e.a2,Se=e.an,he=e.Q,me=e.W,ye=e.V,fe=e.a3,ve=e.j,xe=e.U,ge=e.ah,we=e._,Ce=e.F,Le=e.O,be=e.H,ke=e.$,$e=e.e,je=e.aj,Pe=e.w,Be=e.o,Ee=e.l,De=e.v,Ne=e.m,Re=e.x},e=>{Ue=e._},e=>{Oe=e._},e=>{ze=e.u},e=>{Ae=e.A},e=>{Ie=e._},e=>{Me=e.a},e=>{Te=e.a0},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){var Fe=document.createElement("style");Fe.textContent=".n-alert[data-v-401ad942]{--n-font-size: 12px}.cert-info[data-v-401ad942]{display:flex;align-items:center;height:24px}.cert-info .cert-label[data-v-401ad942]{color:#666;font-weight:700}.cert-info .cert-value[data-v-401ad942]{flex:1;width:0;margin-left:4px}.n-alert[data-v-1f82c2df]{--n-font-size: 12px}.cert-info[data-v-1f82c2df]{display:flex;align-items:center;height:24px}.cert-info .cert-label[data-v-1f82c2df]{color:#666;font-weight:700}.cert-info .cert-value[data-v-1f82c2df]{flex:1;width:0;margin-left:4px}\n/*$vite$:1*/",document.head.appendChild(Fe);const He={class:"cert-info"},Je={class:"cert-label"},qe={class:"cert-value"},Xe={class:"cert-info"},Ge={class:"cert-label"},We={class:"cert-value"},Qe={class:"cert-info"},Ve={class:"cert-label"},Ke={class:"cert-value"},Ye={class:"cert-info"},Ze={class:"cert-label"},et={class:"cert-value"},tt={key:0,class:"text-primary"},at={key:1,class:"text-error"},nt={class:"cert-info"},lt={class:"cert-label"},st={class:"cert-value"},it={class:"w-48%"},dt={class:"mb-8px"},ot={class:"w-48%"},ut={class:"mb-8px"},rt=ie({__name:"index",props:{info:{default:null},isRenew:{type:Boolean,default:!1},loading:{type:Boolean,default:!1}},emits:["refresh"],setup(e,{expose:u,emit:r}){const c=we((()=>i((()=>t.import("./ssl-log-legacy.js?v=1752142539265")),void 0))),_=e,p=r,{t:h}=de(),{data:v}=w(),x=C(h("SSL.index_43")),P=a(),B=oe(-1),E=oe(!1),D=oe(!1),N=oe(""),R=oe("");let U="";const O=oe("");let z="";const A=oe({issuer:"",notAfter:"",notBefore:"",dns:[],subject:"",endtime:0}),I=ue((()=>B.value===g.LetsEncryptDeploy?h("Site.Cert.index_65"):B.value===g.BusinessDeploy?h("Site.Cert.index_64"):B.value===g.TestDeploy?h("Site.Cert.index_38"):h("Site.Cert.index_37"))),M=ue((()=>!!O.value)),T=ue((()=>_.isRenew||B.value===g.LetsEncryptDeploy)),F=ue((()=>!1)),H=ue((()=>E.value)),J=async e=>{e?(await y({siteName:v.name}),p("refresh")):b({title:h("Site.Cert.index_12"),content:h("Site.Cert.index_13"),onConfirm:async()=>{await m({siteName:v.name}),p("refresh")},onPublicClose:()=>{D.value=!0}})},q=()=>{""!==R.value.trim()&&""!==O.value.trim()?R.value!==U&&U||O.value!==z&&z?b({title:h("Site.Cert.index_10"),content:h("Site.Cert.index_11"),onConfirm:async()=>{await Z()}}):Z():d.error(h("Site.Cert.index_9"))},Z=async()=>{const{message:e}=await k({key:R.value,cert:O.value});o(e)&&e.hash&&(await $({hash:e.hash,domains:JSON.stringify([v.name]),append:1}),d.success(h("SSL.index_32"))),ae()},ee=async()=>{const{message:e}=await j({hash:_.info?.hash||""});o(e)&&(x.data.path=e.result,x.show=!0)},te=async()=>{await f({updateOf:1,siteName:v.name}),ae()},ae=()=>{p("refresh"),P.setRefresh(!0)};return re((()=>{const{info:e}=_;e&&(B.value=e.type,E.value=e.status,D.value=e.httpTohttps,R.value=e.key||"",U=e.key||"",O.value=e.csr||"",z=e.csr||"",A.value=e.cert_data,N.value=e.index)})),u({init:p("refresh")}),(e,t)=>{const a=l,i=W,d=Q,o=V,u=n,r=G,_=X,p=K,h=Y,m=L,y=S,f=s;return _e(),ce(f,{show:e.loading},{default:pe((()=>[me(M)?(_e(),ce(r,{key:0,class:"mb-16px",type:"success","show-icon":!1},{default:pe((()=>[he(u,{"x-gap":12,cols:"15"},{default:pe((()=>[he(i,{span:"8"},{default:pe((()=>[ye("div",He,[ye("div",Je,fe(e.$t("Site.Cert.index_44"))+fe(e.$t("Public.Punctuation.Colon")),1),ye("div",qe,[he(a,null,{default:pe((()=>[ve(fe(me(I)),1)])),_:1})])])])),_:1}),he(i,{span:"7"},{default:pe((()=>[ye("div",Xe,[ye("div",Ge,fe(e.$t("Site.Cert.index_45"))+fe(e.$t("Public.Punctuation.Colon")),1),ye("div",We,[he(d,null,{default:pe((()=>[ve(fe(me(A).issuer),1)])),_:1})])])])),_:1}),he(i,{span:"8"},{default:pe((()=>[ye("div",Qe,[ye("div",Ve,fe(e.$t("Site.Cert.index_46"))+fe(e.$t("Public.Punctuation.Colon")),1),ye("div",Ke,[he(d,null,{default:pe((()=>[ve(fe(me(A).dns.join(e.$t("Public.Punctuation.Comma"))),1)])),_:1})])])])),_:1}),he(i,{span:"7"},{default:pe((()=>[ye("div",Ye,[ye("div",Ze,fe(e.$t("Site.Cert.index_47"))+fe(e.$t("Public.Punctuation.Colon")),1),ye("div",et,[me(A).endtime>0?(_e(),xe("span",tt,fe(e.$t("Site.Cert.index_48",{date:me(A).notAfter,days:me(A).endtime})),1)):(_e(),xe("span",at,fe(e.$t("Site.Cert.index_47")),1))])])])),_:1}),he(i,{span:"8"},{default:pe((()=>[ye("div",nt,[ye("div",lt,fe(e.$t("Site.Cert.index_49"))+fe(e.$t("Public.Punctuation.Colon")),1),ye("div",st,[he(o,{value:me(D),"onUpdate:value":[t[0]||(t[0]=e=>ge(D)?D.value=e:null),J],size:"small"},null,8,["value"])])])])),_:1})])),_:1})])),_:1})):Se("",!0),he(p,{class:"mb-16px",size:10,justify:"space-between"},{default:pe((()=>[ye("div",it,[ye("div",dt,fe(e.$t("Site.Cert.index_50")),1),he(_,{value:me(R),"onUpdate:value":t[1]||(t[1]=e=>ge(R)?R.value=e:null),rows:10},null,8,["value"])]),ye("div",ot,[ye("div",ut,fe(e.$t("Site.Cert.index_51")),1),he(_,{value:me(O),"onUpdate:value":t[2]||(t[2]=e=>ge(O)?O.value=e:null),rows:10},null,8,["value"])])])),_:1}),he(p,{class:"mb-12px"},{default:pe((()=>[he(h,{type:"primary",onClick:q},{default:pe((()=>[ve(fe(me(E)?e.$t("Public.Btn.Save"):e.$t("Site.Cert.index_52")),1)])),_:1}),me(T)?(_e(),ce(h,{key:0,type:"primary",onClick:ee},{default:pe((()=>[ve(fe(e.$t("Site.Cert.index_53")),1)])),_:1})):Se("",!0),me(F)?(_e(),ce(h,{key:1},{default:pe((()=>[ve(fe(e.$t("Site.Cert.index_54")),1)])),_:1})):Se("",!0),me(H)?(_e(),ce(h,{key:2,onClick:te},{default:pe((()=>[ve(fe(e.$t("Site.Cert.index_55")),1)])),_:1})):Se("",!0)])),_:1}),he(m,null,{default:pe((()=>[ye("li",null,fe(e.$t("Site.Cert.index_33")),1),ye("li",null,fe(e.$t("Site.Cert.index_34")),1),ye("li",null,fe(e.$t("Site.Cert.index_35")),1),ye("li",null,fe(e.$t("Site.Cert.index_36")),1)])),_:1}),he(y,{show:me(x).show,"onUpdate:show":t[3]||(t[3]=e=>me(x).show=e),title:me(x).title,data:me(x).data,width:650,"min-height":450,component:me(c)},null,8,["show","title","data","component"])])),_:1},8,["show"])}}}),ct=u(rt,[["__scopeId","data-v-401ad942"]]),_t={class:"flex flex-wrap bg-#dff0d8 border-#d6e9c6 border-1px rounded-5px p-12px"},pt={class:"text-#3c763d w-100%"},St=ie({__name:"top-tips",setup(e){const{t:t}=de(),a=[t("SSL.SiteSSL.index_5"),t("SSL.SiteSSL.index_6"),t("SSL.SiteSSL.index_7"),t("SSL.SiteSSL.index_8"),t("SSL.SiteSSL.index_9"),t("SSL.SiteSSL.index_10"),t("SSL.SiteSSL.index_11")];return(e,t)=>{const n=r,l=K;return _e(),xe("div",_t,[(_e(),xe(Ce,null,Le(a,((e,t)=>he(l,{size:5,key:e,class:be(["flex-nowrap! leading-20px",{"w-33%":t!==a.length-1}])},{default:pe((()=>[he(n,{name:"base-tick",size:16,color:"#ff8d00"}),ye("span",pt,fe(e),1)])),_:2},1032,["class"]))),64))])}}}),ht={class:"my-10px"},mt=ie({__name:"table",setup(e){const n=we((()=>i((()=>t.import("./index-legacy203.js?v=1752142539265")),void 0))),l=we((()=>i((()=>t.import("./index-legacy204.js?v=1752142539265")),void 0))),s=we((()=>i((()=>t.import("./dns-verification-legacy.js?v=1752142539265")),void 0))),d=c(),{userInfo:u}=ke(d),r=a(),{t:_}=de(),p=$e({p:1,limit:9999}),h=C(_("SSL.Business.index_41"),{onRefresh:(e,t)=>{f.data.request=!0,f.data.uc_id=t,f.data.verify=e,f.show=!0,w()}}),m=C(_("SSL.index_44")),y=C(_("SSL.index_49"),{onRefresh:()=>{w(),r.setRefresh(!0)}}),f=C(_("SSL.Business.index_42"),{onRefresh:()=>{w()}}),{table:v,columns:x}=P([{key:"verify_domains",title:_("Layout.Sider.mail_3"),render:e=>he("span",{innerHTML:e.verify_domains&&e.verify_domains.length>0?e.verify_domains.join("<br/>"):"--"},null)},{key:"title",title:_("Site.Cert.index_44"),render:e=>e.order_info.title,ellipsis:{tooltip:!0}},ze({title:_("SSL.index_54")}),{key:"order_status",title:_("SSL.Business.index_43"),render:e=>{const t=e.order_info;return t.certId||t.domains.length?!t.certId&&t.domains.length?he("span",{class:"color-warning"},[ve(" "),_("SSL.Business.index_45"),ve(" ")]):"PENDING"===t.order_status&&1===t.status?he("span",{class:"color-warning"},[ve(" "),_("SSL.Business.index_46"),ve(" ")]):"COMPLETE"===t.order_status&&1===t.status?he("span",{class:"color-#20a53a"},[ve(" "),_("SSL.Business.index_47"),ve(" ")]):"CANCELLED"===t.order_status&&1===t.status||-1===t.status?he("span",{class:"color-warning"},[ve(" "),_("SSL.Business.index_48"),ve(" ")]):"FAILED"===t.order_status&&1===t.status?he("span",{class:"color-error"},[ve(" "),_("SSL.Business.index_49"),ve(" ")]):"EXPIRED"===t.order_status&&1===t.status?he("span",{class:"color-warning"},[ve(" "),_("SSL.Business.index_50"),ve(" ")]):1!==t.status||["PENDING","COMPLETE","CANCELLED","FAILED","EXPIRED"].includes(t.order_status)?0===t.status?he("span",{class:"color-warning"},[ve(" "),_("SSL.Business.index_52"),ve(" ")]):void 0:he("span",{class:"color-warning"},[ve(" "),_("SSL.Business.index_51"),ve(" ")]):he("span",{class:"color-warning cursor-pointer",onClick:()=>g(e)},[" ",_("SSL.Business.index_44")," "])}},B({width:140,options:e=>[{show:!e.order_info.certId&&!e.order_info.domains.length,label:_("SSL.Business.index_53"),onClick:()=>{g(e)}},{show:"PENDING"===e.order_info.order_status&&1===e.order_info.status,label:_("SSL.Business.index_54"),onClick:async()=>{const{message:t}=await E({uc_id:e.order_info.uc_id});o(t)&&(f.data.uc_id=e.order_info.uc_id,f.data.verify=t.data,f.show=!0)}},{show:"COMPLETE"===e.order_info.order_status&&1===e.order_info.status,label:_("SSL.index_58"),onClick:async()=>{y.data.row=e,y.show=!0}},{show:"COMPLETE"===e.order_info.order_status&&1===e.order_info.status,label:_("Ftp.Label.index_11"),onClick:async()=>{const t=window.location.origin+"/v2/business_ssl?action=download_cert&uc_id="+e.order_info.uc_id;window.open(t)}},{show:!1,label:_("Public.Btn.Del"),onClick:()=>{b({title:_("SSL.index_59"),content:_("SSL.index_60"),onConfirm:async()=>{await D({hash:e.hash}),w()}})}}]})]),g=e=>{h.data.row=e,h.show=!0},w=async()=>{try{v.loading=!0;const{message:e}=await N(p);o(e)&&(v.data=e.data,v.total=e.total)}finally{v.loading=!1}};return u.value.status&&w(),(e,t)=>{const a=Y,i=R,d=Oe,o=S,r=Ue;return _e(),xe("div",ht,[he(r,{install:me(u).status},{desc:pe((()=>[t[5]||(t[5]=ye("span",{class:"mr-10px"},"Business certificates require login panel to start using them",-1)),he(a,{type:"primary",onClick:me(U)},{default:pe((()=>[ve(fe(e.$t("Login.index_3")),1)])),_:1},8,["onClick"])])),default:pe((()=>[he(d,null,{toolsLeft:pe((()=>[he(a,{type:"primary",onClick:t[0]||(t[0]=e=>me(m).show=!0)},{default:pe((()=>[ve(fe(me(_)("SSL.index_44")),1)])),_:1})])),table:pe((()=>[he(i,{loading:me(v).loading,data:me(v).data,columns:me(x),"max-height":220},null,8,["loading","data","columns"])])),_:1}),he(o,{show:me(m).show,"onUpdate:show":t[1]||(t[1]=e=>me(m).show=e),title:me(m).title,data:me(m).data,"min-height":250,component:Ae},null,8,["show","title","data"]),he(o,{show:me(h).show,"onUpdate:show":t[2]||(t[2]=e=>me(h).show=e),title:me(h).title,data:me(h).data,width:650,"min-height":450,component:me(n)},null,8,["show","title","data","component"]),he(o,{show:me(y).show,"onUpdate:show":t[3]||(t[3]=e=>me(y).show=e),title:me(y).title,data:me(y).data,width:720,height:530,component:me(l)},null,8,["show","title","data","component"]),he(o,{show:me(f).show,"onUpdate:show":t[4]||(t[4]=e=>me(f).show=e),title:me(f).title,data:me(f).data,width:650,"min-height":450,component:me(s)},null,8,["show","title","data","component"])])),_:1},8,["install"])])}}}),yt={class:"text-error"},ft=u({},[["render",function(e,t){const a=l,n=L;return _e(),ce(n,null,{default:pe((()=>[ye("li",yt,fe(e.$t("SSL.SiteSSL.index_1")),1),ye("li",null,fe(e.$t("SSL.SiteSSL.index_2")),1),ye("li",null,fe(e.$t("SSL.SiteSSL.index_3")),1),ye("li",null,[ve(fe(e.$t("SSL.SiteSSL.index_4"))+" ",1),he(a,{href:"https://www.aapanel.com/docs/Function/BusinessCertificate.html",target:"_blank"},{default:pe((()=>[ve(fe(e.$t("SSL.Business.index_20")),1)])),_:1})])])),_:1})}]]),vt=ie({__name:"index",setup:e=>(e,t)=>(_e(),xe("div",null,[he(St),he(mt),he(ft)]))}),xt={class:"cert-info"},gt={class:"cert-label"},wt={class:"cert-value"},Ct={class:"cert-info"},Lt={class:"cert-label"},bt={class:"cert-value"},kt={class:"cert-info"},$t={class:"cert-label"},jt={class:"cert-value"},Pt={class:"cert-info"},Bt={class:"cert-label"},Et={class:"cert-value"},Dt={key:0,class:"text-primary"},Nt={key:1,class:"text-error"},Rt={class:"w-48%"},Ut={class:"mb-8px"},Ot={class:"w-48%"},zt={class:"mb-8px"},At=ie({__name:"cert",emits:["update"],setup(e,{emit:l}){const d=we((()=>i((()=>t.import("./ssl-log-legacy.js?v=1752142539265")),void 0))),u=l,{t:r}=de(),{data:c}=w(),_=C(r("SSL.index_43")),p=a(),h=oe(!1),m=oe(1),y=oe(""),x=oe(""),g=$e({hash:"",issuer:"",notAfter:"",notBefore:"",dns:[],subject:"",endtime:0}),b=async()=>{const{message:e}=await j({hash:g.hash});o(e)&&(_.data.path=e.result,_.show=!0)},k=async()=>{await f({updateOf:1,siteName:c.name}),u("update"),p.setRefresh(!0)},{loading:$,setLoading:P}=O();return(async()=>{try{P(!0);const{message:e}=await v({siteName:c.name});o(e)&&(h.value=e.status,g.hash=e.hash,g.issuer=e.cert_data.issuer,g.notAfter=e.cert_data.notAfter,g.notBefore=e.cert_data.notBefore,g.dns=e.cert_data.dns,g.subject=e.cert_data.subject,g.endtime=e.cert_data.endtime,y.value=e.key,x.value=e.csr,m.value=e.auto_renew)}finally{P(!1)}})(),(e,t)=>{const a=W,l=Q,i=n,o=G,u=X,r=K,c=Y,p=L,h=S,f=s;return _e(),ce(f,{show:me($)},{default:pe((()=>[he(o,{class:"mb-16px",type:"success","show-icon":!1},{default:pe((()=>[he(i,{"x-gap":12,cols:"15"},{default:pe((()=>[me(m)?(_e(),ce(a,{key:0,span:"16"},{default:pe((()=>[ye("div",xt,[ye("div",gt,fe(e.$t("SSL.SiteSSL.index_22"))+"：",1),ye("div",wt,fe(e.$t("SSL.SiteSSL.index_23")),1)])])),_:1})):Se("",!0),he(a,{span:"7"},{default:pe((()=>[ye("div",Ct,[ye("div",Lt,fe(e.$t("Site.Cert.index_45"))+"：",1),ye("div",bt,[he(l,null,{default:pe((()=>[ve(fe(me(g).issuer),1)])),_:1})])])])),_:1}),he(a,{span:"8"},{default:pe((()=>[ye("div",kt,[ye("div",$t,fe(e.$t("Site.Cert.index_46"))+"：",1),ye("div",jt,[he(l,null,{default:pe((()=>[ve(fe(me(g).dns.join(e.$t("Public.Punctuation.Comma"))),1)])),_:1})])])])),_:1}),he(a,{span:"7"},{default:pe((()=>[ye("div",Pt,[ye("div",Bt,fe(e.$t("Site.Cert.index_47"))+fe(e.$t("Public.Punctuation.Colon")),1),ye("div",Et,[me(g).endtime>0?(_e(),xe("span",Dt,fe(e.$t("Site.Cert.index_48",{date:me(g).notAfter,days:me(g).endtime})),1)):(_e(),xe("span",Nt,fe(e.$t("Site.Cert.index_47")),1))])])])),_:1})])),_:1})])),_:1}),he(r,{class:"mb-16px",size:10,justify:"space-between"},{default:pe((()=>[ye("div",Rt,[ye("div",Ut,fe(e.$t("Site.Cert.index_50")),1),he(u,{readonly:"",value:me(y),"onUpdate:value":t[0]||(t[0]=e=>ge(y)?y.value=e:null),rows:14},null,8,["value"])]),ye("div",Ot,[ye("div",zt,fe(e.$t("Site.Cert.index_51")),1),he(u,{readonly:"",value:me(x),"onUpdate:value":t[1]||(t[1]=e=>ge(x)?x.value=e:null),rows:14},null,8,["value"])])])),_:1}),he(r,{class:"mb-12px"},{default:pe((()=>[he(c,{type:"primary",onClick:b},{default:pe((()=>[ve(fe(e.$t("Site.Cert.index_53")),1)])),_:1}),he(c,{onClick:k},{default:pe((()=>[ve(fe(e.$t("Site.Cert.index_55")),1)])),_:1})])),_:1}),he(p,null,{default:pe((()=>[ye("li",null,fe(e.$t("SSL.SiteSSL.index_24")),1),ye("li",null,fe(e.$t("SSL.SiteSSL.index_25")),1)])),_:1}),he(h,{show:me(_).show,"onUpdate:show":t[2]||(t[2]=e=>me(_).show=e),title:me(_).title,data:me(_).data,width:650,"min-height":450,component:me(d)},null,8,["show","title","data","component"])])),_:1},8,["show"])}}}),It=u(At,[["__scopeId","data-v-1f82c2df"]]),Mt={class:"flex items-center"},Tt={class:"leading-17px"},Ft={class:"w-full"},Ht={class:"w-full"},Jt={class:"text-error"},qt=ie({__name:"apply",emits:["update"],setup(e,{emit:t}){const n=je(),{t:l}=de(),{data:i}=w(),u=a(),c=t,S=$e({auth_type:"http",dns_manual:0,auto_wildcard:0,domains:[],all:!1}),h={domains:{required:!0,trigger:"change",type:"array",message:l("SSL.SiteSSL.index_16")}},m=oe(null),y=oe([]),f=e=>y.value.find((t=>t.name===e))?.auto,v=()=>{n.push("/ssl_domain/domain")},x=ue((()=>S.domains.length>0&&S.domains.length<y.value.length));Pe((()=>S.domains),(e=>{e.length===y.value.length?S.all=!0:e.length||(S.all=!1)})),Pe((()=>S.all),(e=>{e?(S.domains=y.value.map((e=>e.name)),m.value?.validate()):S.domains=[]})),Pe((()=>S.auth_type),(e=>{"dns"===e?(S.domains=y.value.filter((e=>e.auto)).map((e=>e.name)),m.value?.validate()):S.domains=[]}));const g=ue((()=>S.domains.filter((e=>!f(e))))),C=async()=>{if(await(m.value?.validate()),"dns"===S.auth_type&&g.value.length)return void d.error({content:()=>Ne("span",{innerHTML:`${g.value.join("<br/>")}${l("SSL.SiteSSL.index_14")}`})});let e={auth_type:S.dns_manual?"dns_manual":S.auth_type,auto_wildcard:S.auto_wildcard,domains:JSON.stringify(S.domains),site_id:S.dns_manual?i.id:void 0,deploy:S.dns_manual?0:1};if(S.dns_manual){const{message:t}=await z({site_id:i.id,domains:JSON.stringify(S.domains)});if(o(t)&&Object.keys(t).length)return void A(t.auths,i.id,S.domains,(()=>{c("update"),u.setRefresh(!0)}),!0);const n=I({width:500,height:300,hideClose:!0,component:M});try{const{message:t}=await T(e,!1);o(t)&&(t.deploy?(d.success(t.result||l("SSL.index_32")),c("update"),u.setRefresh(!0)):Array.isArray(t.auths)&&t.auths.length&&A(t.auths,i.id,S.domains,(()=>{c("update"),u.setRefresh(!0)})))}catch(a){F(se(a,"message",""))}finally{n.hide()}return}const{message:t}=await T(e);o(t)&&I({hideClose:!0,data:{isJump:!1,task_id:t.task_id,onFinish:()=>{c("update"),u.setRefresh(!0)}},component:Me})},{loading:b,setLoading:k}=O();return Be((()=>{(async()=>{try{k(!0);const{message:e}=await Te({id:i.id});if(p(e)){const t=e.map((async e=>{const{message:t}=await H({domain:e.name});o(t)&&y.value.push({name:e.name,auto:!!t.hash})}));await Promise.all(t)}}finally{k(!1)}})()})),(e,t)=>{const a=r,n=G,l=te,i=_,d=ee,o=Z,u=ae,c=K,p=ne,w=le,k=s,$=Y,j=Ie,P=L;return _e(),xe("div",null,[Ee(he(n,{"show-icon":!1,class:"mb-10px"},{default:pe((()=>[ye("div",Mt,[he(a,{name:"base-info",size:"17",class:"mr-8px"}),ye("span",Tt,fe(e.$t("SSL.SiteSSL.index_12")),1)])])),_:1},512),[[De,"dns"===me(S).auth_type]]),he(j,{ref_key:"formRef",ref:m,model:me(S),rules:h,"label-width":"140"},{default:pe((()=>[he(o,{label:e.$t("Config.Safe.Ssl.index_2")},{default:pe((()=>[he(d,{value:me(S).auth_type,"onUpdate:value":t[0]||(t[0]=e=>me(S).auth_type=e)},{default:pe((()=>[he(i,null,{default:pe((()=>[he(l,{value:"http"},{default:pe((()=>[ve(fe(e.$t("SSL.SiteSSL.index_17")),1)])),_:1}),he(l,{value:"dns"},{default:pe((()=>[ve(fe(e.$t("SSL.index_12"))+" (Wildcard support) ",1)])),_:1})])),_:1})])),_:1},8,["value"])])),_:1},8,["label"]),Ee(he(o,{label:" ","show-feedback":!1},{default:pe((()=>[he(u,{checked:me(S).dns_manual,"onUpdate:checked":t[1]||(t[1]=e=>me(S).dns_manual=e),"checked-value":1,"unchecked-value":0},{default:pe((()=>[ve(fe(e.$t("SSL.index_2")),1)])),_:1},8,["checked"])])),_:1},512),[[De,"dns"===me(S).auth_type]]),Ee(he(o,{label:" "},{default:pe((()=>[he(u,{checked:me(S).auto_wildcard,"onUpdate:checked":t[2]||(t[2]=e=>me(S).auto_wildcard=e),"checked-value":1,"unchecked-value":0},{default:pe((()=>[ve(fe(e.$t("SSL.SiteSSL.index_20")),1)])),_:1},8,["checked"])])),_:1},512),[[De,"dns"===me(S).auth_type]]),he(o,{label:e.$t("Mail.Domain.index_3"),path:"domains"},{default:pe((()=>[he(k,{show:me(b),class:"p-12px w-300px max-h-300px min-h-100px overflow-auto border border-solid border-#ccc"},{default:pe((()=>[he(u,{class:"mb-12px",checked:me(S).all,"onUpdate:checked":t[3]||(t[3]=e=>me(S).all=e),label:e.$t("Public.SelectAll"),indeterminate:me(x)},null,8,["checked","label","indeterminate"]),me(y).length?(_e(),ce(p,{key:0,value:me(S).domains,"onUpdate:value":t[4]||(t[4]=e=>me(S).domains=e)},{default:pe((()=>[he(c,{class:"flex-col!",size:12},{default:pe((()=>[(_e(!0),xe(Ce,null,Le(me(y),(e=>(_e(),ce(u,{key:e.name,value:e.name,label:e.name},null,8,["value","label"])))),128))])),_:1})])),_:1},8,["value"])):(_e(),ce(w,{key:1,description:"No domain name"}))])),_:1},8,["show"])])),_:1},8,["label"]),Ee(he(o,{label:" "},{default:pe((()=>[he(n,{"show-icon":!1,type:me(g).length?"warning":"success"},{default:pe((()=>[(_e(!0),xe(Ce,null,Le(me(S).domains,(t=>(_e(),ce(c,{key:t},{default:pe((()=>[f(t)?(_e(),ce(c,{key:0,class:"flex-nowrap! py-3px"},{default:pe((()=>[he(a,{name:"base-success",size:"17",color:"#20a53a"}),ye("span",Ft,"["+fe(t)+"] "+fe(e.$t("SSL.SiteSSL.index_13")),1)])),_:2},1024)):(_e(),ce(c,{key:1,class:"flex-nowrap! py-3px items-center!"},{default:pe((()=>[he(a,{name:"base-error",size:"17",color:"#E85445"}),ye("span",Ht,"["+fe(t)+"] "+fe(e.$t("SSL.SiteSSL.index_14")),1),he($,{type:"primary",size:"tiny",onClick:v},{default:pe((()=>[ve(fe(e.$t("SSL.SiteSSL.index_21")),1)])),_:1})])),_:2},1024))])),_:2},1024)))),128))])),_:1},8,["type"])])),_:1},512),[[De,"dns"===me(S).auth_type&&me(S).domains.length&&!me(S).dns_manual]]),he(o,{label:" "},{default:pe((()=>[he($,{type:"primary",onClick:C},{default:pe((()=>[ve(fe(e.$t("Public.Btn.Apply")),1)])),_:1})])),_:1})])),_:1},8,["model"]),Ee(he(P,{class:"mt-16px"},{default:pe((()=>[ye("li",Jt,fe(e.$t("SSL.SiteSSL.index_15")),1),ye("li",null,fe(e.$t("Site.Cert.index_21")),1),ye("li",null,fe(e.$t("Site.Cert.index_23")),1),ye("li",null,fe(e.$t("Site.Cert.index_24")),1)])),_:1},512),[[De,"http"===me(S).auth_type]]),Ee(he(P,{class:"mt-24px"},{default:pe((()=>[t[5]||(t[5]=ye("li",null,"Manually resolved certificates do not support auto-renewal",-1)),ye("li",null,fe(e.$t("Site.Cert.index_25")),1),ye("li",null,fe(e.$t("Site.Cert.index_26")),1),ye("li",null,fe(e.$t("Site.Cert.index_27")),1),ye("li",null,fe(e.$t("Site.Cert.index_28")),1)])),_:1,__:[5]},512),[[De,"dns"===me(S).auth_type]])])}}}),Xt=ie({__name:"index",props:{isOpen:{type:Boolean},type:{},onRefresh:{type:Function}},setup(e){const t=e,a=()=>{t.onRefresh()};return(e,n)=>(_e(),xe("div",null,[t.isOpen&&"Let's Encrypt"===t.type?(_e(),ce(It,{key:0,onUpdate:a})):(_e(),ce(qt,{key:1,onUpdate:a}))]))}}),Gt=ie({__name:"index",props:{onMenuChange:{type:Function}},setup(e,{expose:t}){const{data:a}=w(),{t:n}=de(),l=$e({p:1,limit:99999}),{columns:s,table:i}=P([{key:"domain",title:n("Site.Cert.index_29"),render:e=>he("span",{innerHTML:e.verify_domains.length>0?e.verify_domains.join("<br/>"):"--"},null)},ze({title:n("SSL.index_54"),width:140}),{key:"issuer",title:n("Site.Cert.index_30"),ellipsis:{tooltip:!0}},B({width:150,options:t=>[{label:n("Public.Btn.Deploy"),onClick:async()=>{try{await $({hash:t.hash,domains:JSON.stringify([a.name]),append:1}),d.success(n("SSL.index_32")),setTimeout((()=>{e.onMenuChange()}),500)}catch(l){console.log(l)}}},{show:"Let's Encrypt"===t.provider,label:n("Public.Btn.Del"),onClick:()=>{(e=>{J({title:n("Site.Cert.index_31"),content:n("Site.Cert.index_32"),onConfirm:async()=>{await D({hash:e.hash}),c()}})})(t)}}]})]),{loading:u,setLoading:r}=O(!0),c=async()=>{try{r(!0);const{message:e}=await q(l);o(e)&&(i.data=e.data)}finally{r(!1)}};return c(),t({init:c}),(e,t)=>{const a=R;return _e(),xe("div",null,[he(a,{loading:me(u),columns:me(s),data:me(i).data,"max-height":510},null,8,["loading","columns","data"])])}}}),Wt={class:"mr-12px"},Qt={key:0,class:"mr-12px"},Vt={key:1,class:"mr-12px"};e("default",ie({__name:"index",setup(e,{expose:n}){const l=we((()=>i((()=>t.import("./ssl-log-legacy.js?v=1752142539265")),void 0))),s=a(),{data:d}=w(),{t:u}=de(),r=oe("current"),c=oe(""),_=C(u("SSL.index_43")),p=oe(g.NotDeploy),m=oe(""),y=oe(!1),f=oe(0),v=oe(!1),L=oe(""),b=async()=>{const{message:e}=await j({hash:c.value});o(e)&&(_.data.path=e.result,_.show=!0)},k=e=>{P.value[0].data&&(P.value[0].data.loading=e)},$=async()=>{try{k(!0);const{message:a}=await x({siteName:d.name});o(a)&&(p.value=a.type,y.value=a.status,f.value=se(a,"cert_data.endtime",0),L.value=a.cert_data.issuer_O||"",v.value=(()=>{let e=!1;return f.value<=30&&(e=!0),p.value===g.TestDeploy&&f.value<0&&(e=!0),p.value!==g.SaveOrHolderDeploy&&p.value!==g.NotDeploy||(e=!1),e})(),m.value=a.cert_data.dns.join(","),c.value=a.hash,t=a,P.value[0].data&&(P.value[0].data.info=t),e=v.value,P.value[0].data&&(P.value[0].data.isRenew=e))}catch{y.value=!1,v.value=!1}finally{k(!1)}var e,t},P=oe([{key:"current",label:()=>he("div",null,[he("span",null,[ve("Current Certs - ")]),he("span",{class:y.value?"text-#1d9534":"text-red-500"},[ve("["),y.value?"Deployed":"Not Deployed",ve("]")])]),data:{info:null,isRenew:!1,loading:!0,onRefresh:$},component:Re(ct)},{key:"business",label:u("Site.Cert.index_64"),component:Re(vt)},{key:"let",label:u("Site.Cert.index_65"),data:{isOpen:ue((()=>y.value)),type:ue((()=>L.value)),onRefresh:$},component:Re(Xt)},{key:"holder",label:u("Site.Cert.index_66"),component:Re(Gt),data:{onMenuChange:()=>{r.value="current",$(),s.setRefresh(!0)}}}]);return n({init:()=>{$()}}),(e,t)=>{const a=Y,n=G,s=h,i=S;return _e(),xe("div",null,[me(y)?Se("",!0):(_e(),ce(n,{key:0,class:"mb-12px",type:"error","show-icon":!1,style:{"--n-padding":"9px 16px"}},{default:pe((()=>[ye("span",Wt,fe(e.$t("Site.Cert.index_41")),1),he(a,{size:"tiny",type:"primary",onClick:t[0]||(t[0]=e=>r.value="business")},{default:pe((()=>[ve(fe(e.$t("Site.Cert.index_43")),1)])),_:1})])),_:1})),me(y)&&me(v)?(_e(),ce(n,{key:1,class:"mb-12px",type:"error","show-icon":!1,style:{"--n-padding":"9px 16px"}},{default:pe((()=>[me(f)>0?(_e(),xe("span",Qt,fe(e.$t("SSL.SiteSSL.index_26",[me(m),me(f)])),1)):(_e(),xe("span",Vt,fe(e.$t("SSL.SiteSSL.index_19",[me(m)])),1)),he(a,{size:"tiny",type:"primary",onClick:b},{default:pe((()=>[ve(fe(e.$t("Site.Cert.index_53")),1)])),_:1})])),_:1})):Se("",!0),he(s,{value:me(r),"onUpdate:value":t[1]||(t[1]=e=>ge(r)?r.value=e:null),options:me(P)},null,8,["value","options"]),he(i,{show:me(_).show,"onUpdate:show":t[2]||(t[2]=e=>me(_).show=e),title:me(_).title,data:me(_).data,width:650,"min-height":450,component:me(l)},null,8,["show","title","data","component"])])}}}))}}}));
