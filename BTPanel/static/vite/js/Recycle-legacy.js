System.register(["./index-legacy.js?v=1764830988434","./index.vue_vue_type_script_setup_true_lang-legacy9.js?v=1764830988434","./public-legacy.js?v=1764830988434","./index-legacy246.js?v=1764830988434","./page_layout-legacy.js?v=1764830988434","./index-legacy37.js?v=1764830988434","./naive-legacy.js?v=1764830988434","./vue-legacy.js?v=1764830988434","./common-legacy.js?v=1764830988434","./__commonjsHelpers__-legacy.js?v=1764830988434","./soft-legacy2.js?v=1764830988434","./soft-legacy.js?v=1764830988434","./site-legacy.js?v=1764830988434","./file-legacy2.js?v=1764830988434","./index.vue_vue_type_script_setup_true_lang-legacy7.js?v=1764830988434"],function(e,l){"use strict";var t,a,c,i,n,s,r,o,d,f,p,y,m,u,v,g,b,w,x,_,h,k,j,R,$,C,z,D,U,T,F,P,B;return{setters:[e=>{t=e._},e=>{a=e._},e=>{c=e.f,i=e.a,n=e.Z,s=e.h},e=>{r=e._},e=>{o=e.n,d=e.a9,f=e.aD,p=e.d,y=e.x,m=e.p},e=>{u=e.F,v=e.g},e=>{g=e.dc,b=e.dj,w=e.aC,x=e.dQ},e=>{_=e.k,h=e.P,k=e.i,j=e.r,R=e.W,$=e.c,C=e.a2,z=e.V,D=e.a3,U=e.S,T=e.a4,F=e.ak,P=e.U,B=e.j},null,null,null,null,null,null,null],execute:function(){var l=document.createElement("style");l.textContent='@charset "UTF-8";.modal-footer-btns[data-v-2e0c3f71]{display:flex;align-items:center;flex-direction:row;justify-content:end;gap:10px;padding:10px}.single-line-ellipsis[data-v-2e0c3f71]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.recycle-wrapper .recycle-top[data-v-2e0c3f71]{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;border-bottom:1px solid var(--color-border);padding:16px 20px}.recycle-wrapper .recycle-top .config-item[data-v-2e0c3f71]{display:flex;align-items:center;gap:10px}.recycle-wrapper .recycle-main[data-v-2e0c3f71]{display:flex;height:568px}.recycle-wrapper .recycle-main .bt-tabs-modal[data-v-2e0c3f71]{--n-tab-item-width: 120px}.recycle-wrapper .recycle-main .tab-content[data-v-2e0c3f71]{flex:1;width:0;height:100%;padding:16px}\n/*$vite$:1*/',document.head.appendChild(l);const q={class:"recycle-wrapper"},M={class:"recycle-top"},O={class:"flex gap-20px"},N={class:"config-item"},S={class:"config-item"},G={class:"config-item"},K={class:"recycle-main"},E={class:"tabs"},H={class:"tab-content"},I={class:"mt-10px"};e("default",m(_({__name:"Recycle",setup(e,{expose:l}){const{t:m}=h(),_=k("fileStore"),J=j(!1);l({open(){J.value=!0,le()},close(){J.value=!1}});const Q=j("all"),V=j(!1),W=j([]),Z=j([]),A=j([]),L=j(!1),X=j(!1),Y=j([{type:"selection",width:40},{key:"name",title:()=>m("file.fileName"),render:e=>R("div",{class:"flex items-center gap-4px"},[R(u,{ext:e.ext},null),R("div",{class:"flex-1 w-0"},[R(g,null,{default:()=>[e.name]})])])},{key:"dname",title:()=>m("file.recycle.originalDirectory"),ellipsis:{tooltip:!0}},{key:"size",title:()=>m("file.size"),width:180,render:e=>o(e.size)},{title:()=>m("file.recycle.removalTime"),key:"time",width:200,render:e=>d(e.time)},c({width:200,options:e=>[{label:m("file.recycle.recover"),onClick:()=>{de(e)}},{label:m("file.recycle.deletePermanently"),onClick:()=>{fe(e)}}]})]),ee=[{key:"restore",label:m("file.recycle.batchRestore"),type:"confirm",confirm:{title:m("file.recycle.batchRestore"),desc:m("file.recycle.batchRestoreConfirm"),api:e=>f.post("/files?action=Re_Recycle_bin",{path:e.rname}),done:()=>{le(),v(_)},columns:[{key:"name",title:()=>m("file.fileName")}]}},{key:"delete",label:m("file.recycle.batchDeletePermanently"),type:"confirm",confirm:{title:m("file.recycle.batchDeletePermanently"),desc:m("file.recycle.batchDeleteConfirm"),api:e=>f.post("/files?action=Del_Recycle_bin",{path:e.rname}),done:()=>{le()},columns:[{key:"name",title:()=>m("file.fileName")}]}}];async function le(){try{W.value=[],V.value=!0;const{message:e}=await f.post("/files?action=Get_Recycle_bin");p(e)&&(A.value=y(e.dirs)?e.dirs.map(e=>({...e,type:"dir",ext:"folder"})):[],Z.value=y(e.files)?e.files.map(e=>({...e,type:"file",ext:e.name.split(".").pop()||""})):[],L.value=e.status,X.value=e.status_db)}finally{V.value=!1}}const te=["jpg","jpeg","png","bmp","gif","tiff","ico","JPG","webp"],ae=["zip","rar","gz","war","tgz"],ce=["mp4","mp3","mpeg","mpg","mov","avi","webm","mkv","mkv","mp3","rmvb","wma","wmv"],ie=["iso","xlsx","xls","doc","docx","tiff","exe","so","7z","bz","dmg","apk","pptx","ppt","xlsb","pdf"],ne=$(()=>{let e=[];switch(Q.value){case"all":e=[...A.value,...Z.value];break;case"folder":e=[...A.value];break;case"file":e=[...Z.value];break;case"image":e=Z.value.filter(e=>te.some(l=>e.name.includes(`.${l}`)));break;case"document":e=Z.value.filter(e=>{const l=te.some(l=>e.name.includes(`.${l}`)),t=ae.some(l=>e.name.includes(`.${l}`)),a=ce.some(l=>e.name.includes(`.${l}`)),c=ie.some(l=>e.name.includes(`.${l}`));return l||t||a||c});break;case"database":e=[...A.value,...Z.value].filter(e=>e.name.includes("BTDB_"));break;default:e=[]}return e.sort((e,l)=>l.time-e.time),e}),se=()=>{le()},re=async e=>{const l={};"file"!==e&&(l[e]=1),await f.post("/files?action=Recycle_bin",l,{requestOptions:{loading:m("file.recycle.switching"),successMessage:!0}}),le()},oe=()=>{n({text:m("file.recycle.emptyTitle"),title:m("file.recycle.emptyTitle"),content:m("file.recycle.emptyConfirm"),onConfirm:async()=>{await f.post("/files?action=Close_Recycle_bin","",{requestOptions:{loading:m("file.recycle.emptying"),successMessage:!0}}),le()}})},de=e=>{i({title:m("file.recycle.restoreFileTitle",{name:e.name}),content:m("file.recycle.restoreFileConfirm"),onConfirm:async()=>{await f.post("/files?action=Re_Recycle_bin",{path:e.rname},{requestOptions:{loading:m("file.recycle.restoring"),successMessage:!0}}),le(),v(_)}})},fe=e=>{n({text:m("file.delete"),title:m("file.recycle.deleteFileTitle",{name:e.name}),content:m("file.recycle.deleteFileConfirm"),onConfirm:async()=>{await f.post("/files?action=Del_Recycle_bin",{path:e.rname},{requestOptions:{loading:m("file.recycle.deleting"),successMessage:!0}}),le()}})};return(e,l)=>{const c=b,i=w,n=x,o=r,d=s,f=a,p=t;return z(),C(p,{show:P(J),"onUpdate:show":l[7]||(l[7]=e=>F(J)?J.value=e:null),title:e.$t("file.recycle.title"),width:"80%"},{default:D(()=>[U("div",q,[U("div",M,[U("div",O,[U("div",N,[U("div",null,T(e.$t("file.recycle.fileRecycleBin")),1),R(c,{value:P(L),"onUpdate:value":[l[0]||(l[0]=e=>F(L)?L.value=e:null),l[1]||(l[1]=()=>re("file"))]},null,8,["value"])]),U("div",S,[U("div",null,T(e.$t("file.recycle.databaseRecycleBin")),1),R(c,{value:P(X),"onUpdate:value":[l[2]||(l[2]=e=>F(X)?X.value=e:null),l[3]||(l[3]=()=>re("db"))]},null,8,["value"])]),U("div",G,T(e.$t("file.recycle.warning")),1)]),R(i,{onClick:oe},{default:D(()=>[B(T(e.$t("file.recycle.emptyRecycleBin")),1)]),_:1})]),U("div",K,[U("div",E,[R(o,{value:P(Q),"onUpdate:value":[l[4]||(l[4]=e=>F(Q)?Q.value=e:null),se],panePadding:"0"},{default:D(()=>[R(n,{name:"all",tab:e.$t("file.recycle.all")},null,8,["tab"]),R(n,{name:"folder",tab:e.$t("file.recycle.folder")},null,8,["tab"]),R(n,{name:"file",tab:e.$t("file.recycle.file")},null,8,["tab"]),R(n,{name:"image",tab:e.$t("file.recycle.image")},null,8,["tab"]),R(n,{name:"document",tab:e.$t("file.recycle.document")},null,8,["tab"]),R(n,{name:"database",tab:e.$t("file.recycle.database")},null,8,["tab"])]),_:1},8,["value"])]),U("div",H,[R(d,{"checked-row-keys":P(W),"onUpdate:checkedRowKeys":l[5]||(l[5]=e=>F(W)?W.value=e:null),loading:P(V),"max-height":450,"row-key":"rname",columns:P(Y),data:P(ne)},null,8,["checked-row-keys","loading","columns","data"]),U("div",I,[R(f,{"checked-row-keys":P(W),"onUpdate:checkedRowKeys":l[6]||(l[6]=e=>F(W)?W.value=e:null),"row-key":"rname","select-width":240,data:P(ne),options:ee},null,8,["checked-row-keys","data"])])])])])]),_:1},8,["show","title"])}}}),[["__scopeId","data-v-2e0c3f71"]]))}}});
