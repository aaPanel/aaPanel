System.register(["./index-legacy245.js?v=1763625242172","./vue-legacy.js?v=1763625242172","./public-legacy.js?v=1763625242172","./index-legacy168.js?v=1763625242172","./page_layout-legacy.js?v=1763625242172","./naive-legacy.js?v=1763625242172","./soft-legacy.js?v=1763625242172","./site-legacy.js?v=1763625242172","./index.vue_vue_type_script_setup_true_lang-legacy.js?v=1763625242172","./__commonjsHelpers__-legacy.js?v=1763625242172","./common-legacy.js?v=1763625242172"],(function(e,a){"use strict";var n,t,s,i,r,o,l,d,c,p,u,m,v,g,b,_,x,h,y,f,w,D,$,M,P,k,C,j,A,S,q,z,U,B,O,F,I,E,H,L,N,R,T;return{setters:[e=>{n=e._},e=>{t=e.p,s=e.i,i=e.k,r=e.P,o=e.r,l=e.R,d=e.S,c=e.U,p=e.a4,u=e.X,m=e.V,v=e.F,g=e.a3,b=e.j,_=e.a2,x=e.e,h=e.aj},e=>{y=e.a,f=e.b,w=e._,D=e.d},e=>{$=e._},e=>{M=e.i,P=e.bf,k=e.M,C=e.u,j=e.x,A=e.m,S=e.fM,q=e.c,z=e.q,U=e.p,B=e.b},e=>{O=e.aC,F=e.d5,I=e.dV,E=e.d9,H=e.df,L=e.dP},e=>{N=e.a},e=>{R=e.g},e=>{T=e._},null,null],execute:function(){var a=document.createElement("style");a.textContent=".access-btn[data-v-989f4d59]{padding:0 24px;--n-height: 40px;--n-border-radius: 4px;--n-color: var(--button-gray-color);--n-text-color: var(--color-text-2);--n-border: none;--n-color-hover: var(--color-primary);--n-border-hover: 1px solid var(--color-primary);--n-text-color-hover: #fff;--n-color-focus: var(--color-primary);--n-text-color-focus: #fff;--n-border-focus: 1px solid var(--color-primary)}.bg-recommend[data-v-989f4d59]{position:absolute;width:32px;height:32px;top:-1px;left:-1px;background-image:url(/static/vite/images/recommend.svg);background-repeat:no-repeat;background-position:center;background-size:contain}\n",document.head.appendChild(a);const V=Symbol("php-admin"),{t:X}=M.global,G=()=>P.post("/adminer_manager?action=get_status"),J=e=>P.post("/adminer_manager?action=switch_php",e,{requestOptions:{loading:X("Database.adminerManager.switchingPhp"),successMessage:!0}}),K=e=>P.post("/adminer_manager?action=install",e,{requestOptions:{loading:X("Database.adminerManager.installing"),successMessage:!0}}),Q=()=>P.post("/adminer_manager?action=uninstall",{},{requestOptions:{loading:X("Database.adminerManager.uninstalling"),successMessage:!0}}),W=e=>P.post("/adminer_manager?action=switch_port",e,{requestOptions:{loading:X("Database.adminerManager.switchingPort"),successMessage:!0}});async function Y(e,a,n,t=""){const s=document.createElement("form");s.action=`${k()}/adminer/index.php?driver=${e}&username=${a}`,s.method="post",s.target="_blank",s.style.display="none";let i="";"mongo"===e&&(i="localhost:27017"+("root"===a?"/admin?authSource=admin":`/${a}?authSource=${a}`),t="root"===a?"admin":t);const r=`\n\t\t<input type="text" name="auth[driver]" id="driver" value="${e}" size="24" />\n\t\t<input type="text" name="auth[username]" id="username" value="${a}" size="24" />\n\t\t<input type="password" name="auth[password]" id="password" value="${n}" size="24" />\n\t\t<input type="text" name="auth[db]" id="db" value="${t}" size="24" />\n\t\t<input type="text" name="auth[server]" id="server" value="${i}" size="24" />\n\t`;s.innerHTML=r,document.body.appendChild(s),s.submit(),document.body.removeChild(s)}const Z={class:"p-4px"},ee={class:"flex items-center h-40px mb-10px text-14px whitespace-pre-wrap"},ae={class:"flex gap-10px"},ne={class:"mt-20px"},te={class:"flex gap-24px mt-20px"},se=i({__name:"index",setup(e,{expose:a}){const{t:n}=r(),{type:t,db:i,username:x,password:h}=s(V),D=C(),M=o(!1),U=o(""),B=async()=>{y({title:n("Database.adminerManager.service.fixed"),content:n("Database.adminerManager.service.confirmFixed"),onConfirm:async()=>{await K({version:U.value}),N()}})},F=()=>{y({title:n("Database.adminerManager.service.uninstall"),content:n("Database.adminerManager.service.confirmUninstall"),onConfirm:async()=>{await Q(),N()}})},I=()=>{y({title:n("Database.adminerManager.service.install"),content:n("Database.adminerManager.service.confirmInstall"),onConfirm:async()=>{const{message:e}=await P.post("/adminer_manager?action=support_versions");j(e)&&await K({version:e[0]}),N()}})},E=new Map([["pgsql","postgres"],["mongo","root"]]),H=async()=>{if(D.isFree)return void f({source:160});if(x&&h&&i)return void Y(t,x,h,i);const e=A.loading(n("Database.adminerManager.service.jumpingToAdminer"));try{if("mongo"===t)return void(await L());const{message:e}=await S(t);q(e)&&Y(t,E.get(t)||"",e.result)}finally{e.close()}},L=async()=>{const{message:e}=await S("mongodb");q(e)&&Y(t,E.get(t)||"",e.root)},N=async()=>{const{message:e}=await G();q(e)&&(M.value=1===e.install,U.value=e.version)};return N(),a({init:N}),(e,a)=>{const n=$,s=O,i=z,r=w;return l(),d("div",Z,[c("div",ee,[c("span",null,p(e.$t("Database.adminerManager.service.currentStatus")),1),u(n,{value:m(M)},null,8,["value"])]),c("div",ae,[m(M)?(l(),d(v,{key:0},[u(s,{onClick:B},{default:g((()=>[b(p(e.$t("Database.adminerManager.service.fixed")),1)])),_:1}),u(s,{onClick:F},{default:g((()=>[b(p(e.$t("Public.Btn.Uninstall")),1)])),_:1})],64)):(l(),_(s,{key:1,onClick:I},{default:g((()=>[b(p(e.$t("Public.Btn.Install")),1)])),_:1}))]),c("div",ne,[u(i,{dashed:""})]),c("div",te,[u(s,{class:"access-btn",onClick:H},{default:g((()=>[c("span",null,p(e.$t("Database.PhpAdmin.index_11")),1),a[1]||(a[1]=c("span",{class:"bg-recommend"},null,-1))])),_:1,__:[1]}),u(s,{class:"access-btn",onClick:a[0]||(a[0]=e=>(async()=>{window.open(`${k()}/adminer/index.php?driver=${t}`)})())},{default:g((()=>[b(p(e.$t("Database.PhpAdmin.index_6")),1)])),_:1})]),u(r,{class:"mt-16px"},{default:g((()=>[c("li",null,p(e.$t("Database.PhpAdmin.index_7")),1),c("li",null,p(e.$t("Database.PhpAdmin.index_33")),1)])),_:1})])}}}),ie=U(se,[["__scopeId","data-v-989f4d59"]]),re={class:"p-8px"},oe={class:"w-160px"},le=i({__name:"index",setup(e,{expose:a}){const{t:n}=r(),t=x({php_version:null}),s=o([]),{loading:i,setLoading:v}=D(),_=async()=>{try{v(!0);const[e,a]=await Promise.all([R(),G()]),{message:n}=e;j(n)&&(s.value=n.filter((e=>"00"!==e.version)).map((e=>({label:e.name,value:e.version}))));const{message:i}=a;t.php_version=F(i,"php_version",null)}finally{v(!1)}},h=async()=>{const e=t.php_version;null!==e?(await J({php_version:e}),_()):A.error(n("Database.PhpAdmin.index_32"))},y=async()=>{const{message:e}=await B({sName:"php-"+Number(t.php_version)/10});q(e)&&N(e)};return _(),a({init:_}),(e,a)=>{const n=I,r=O,o=E;return l(),d("div",re,[u(o,{class:"items-center"},{default:g((()=>[c("span",null,p(e.$t("Database.PhpAdmin.index_31")),1),c("div",oe,[u(n,{value:m(t).php_version,"onUpdate:value":a[0]||(a[0]=e=>m(t).php_version=e),loading:m(i),options:m(s)},null,8,["value","loading","options"])]),u(r,{disabled:null===m(t).php_version,type:"primary",onClick:h},{default:g((()=>[b(p(e.$t("Public.Btn.Save")),1)])),_:1},8,["disabled"]),u(r,{disabled:null===m(t).php_version,onClick:y},{default:g((()=>a[1]||(a[1]=[b(" Settings ")]))),_:1,__:[1]},8,["disabled"])])),_:1})])}}}),de={class:"p-4px"},ce={class:"w-142px mr-8px"},pe=i({__name:"index",setup(e,{expose:a}){const{t:n}=r(),t=o(null),s=async()=>{const e=t.value;null!==e?(await W({port:e}),v()):A.error(n("Database.PhpAdmin.index_25"))},i=o(!1),v=async()=>{const{message:e}=await G();t.value=F(e,"port",null)},_=()=>{v()};return _(),a({init:_}),(e,a)=>{const n=H,r=O,o=L,v=T;return l(),d("div",de,[u(v,{"label-width":"160"},{default:g((()=>[u(o,{label:e.$t("Database.PhpAdmin.index_16"),"label-width":"auto"},{default:g((()=>[c("div",ce,[u(n,{value:m(t),"onUpdate:value":a[0]||(a[0]=e=>h(t)?t.value=e:null),min:0,max:66325,"show-button":!1,loading:m(i),placeholder:""},null,8,["value","loading"])]),u(r,{type:"primary",onClick:s},{default:g((()=>[b(p(e.$t("Public.Btn.Save")),1)])),_:1})])),_:1},8,["label"])])),_:1})])}}}),ue={class:"h-580px"};e("default",i({__name:"index",props:{type:{},username:{},password:{},db:{}},setup(e){const a=e,{t:s}=r(),i=o("service"),c=[{key:"service",label:s("Database.PhpAdmin.index_1"),component:ie},{key:"php",label:s("Database.PhpAdmin.index_2"),component:le},{key:"safe",label:s("Database.PhpAdmin.index_3"),component:pe}];var p;return p={type:a.type,username:a.username,password:a.password,db:a.db},t(V,p),(e,a)=>{const t=n;return l(),d("div",ue,[u(t,{value:m(i),"onUpdate:value":a[0]||(a[0]=e=>h(i)?i.value=e:null),ref:"tabsRef",data:c},null,8,["value"])])}}}))}}}));
