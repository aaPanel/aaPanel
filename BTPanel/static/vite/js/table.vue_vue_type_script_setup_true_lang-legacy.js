System.register(["./page_layout-legacy.js?v=1763625242172","./index-legacy.js?v=1763625242172","./index.vue_vue_type_script_setup_true_lang-legacy5.js?v=1763625242172","./public-legacy.js?v=1763625242172","./vue-legacy.js?v=1763625242172","./index-legacy104.js?v=1763625242172","./naive-legacy.js?v=1763625242172"],(function(e,a){"use strict";var l,t,o,n,i,d,s,c,u,r,m,p,g,f,_,x,v,k,w,y,h,b,C,I,D,j,$,U,S,z,P,R,B,L,O,E,T,V,q,F,H,K;return{setters:[e=>{l=e.bf,t=e.bU,o=e.m,n=e.c,i=e.x,d=e.p,s=e.a,c=e.c4,u=e._},e=>{r=e._},e=>{m=e._},e=>{p=e.C,g=e.u,f=e.c,_=e.f,x=e.e,v=e.d,k=e.h},e=>{w=e.k,y=e.P,h=e.r,b=e.R,C=e.S,I=e.X,D=e.V,j=e.c,$=e.U,U=e.a4,S=e.aj,z=e.a3,P=e.j,R=e.F,B=e.e,L=e.w,O=e.ak,E=e._,T=e.N},e=>{V=e._},e=>{q=e.dV,F=e.aC,H=e.au,K=e.dh}],execute:function(){var M=document.createElement("style");M.textContent=".info[data-v-42cf0db8]{margin-bottom:16px;padding:20px;border-radius:8px;background-color:#f7f7f7}.info .info-title[data-v-42cf0db8]{margin-bottom:10px;font-size:16px;font-weight:700;color:#606266}.info ul[data-v-42cf0db8]{display:flex;flex-direction:column;gap:8px}.info ul li[data-v-42cf0db8]{display:flex;align-items:center;justify-content:space-between;font-size:14px;color:#606266}\n",document.head.appendChild(M);const N={class:"h-400px bg-#282c34 rounded-b-4px"},W=w({__name:"index",props:{name:{type:String,default:""}},emits:["close"],setup(e,{emit:a}){const l=a,{t:n}=y(),i=t(),d=h(n("Docker.CloudImage.index_9")+"\n"),{send:s,close:c}=p("/ws_model",{onMessage:(e,a)=>{const{data:t}=a;d.value+=t,t.includes("successful")?(o.success(n("Docker.CloudImage.pull.success")),i.setRefresh(!0),setTimeout((()=>{l("close")}),1500),c()):t.includes("failed")&&(o.error(n("Docker.CloudImage.pull.failed")),c())}});return s({model_index:"btdocker",mod_name:"image",def_name:"pull_from_some_registry",ws_callback:111,name:"Docker public repository",image:e.name}),(e,a)=>{const l=V;return b(),C("div",N,[I(l,{log:D(d)},null,8,["log"])])}}}),X={class:"p-20px"},A={class:"info"},G={class:"info-title"},J={class:"flex gap-8px"},Q={class:"flex-1"},Y=d(w({__name:"image",props:{row:{type:Object,default:()=>({})}},setup(e){const{t:a}=y(),t=h({}),d=h(null),s=j((()=>"library"===t.value.namespace?a("Docker.CloudImage.detail.yes"):a("Docker.CloudImage.detail.no"))),c=j((()=>{const e=t.value.pull_count;return e?e.toLocaleString():"--"})),u=h(!1),r=h([]),m=({option:e})=>I(R,null,[e.label]),p=e=>{const l=e.data;return I("div",{class:"flex items-center justify-between py-10px"},[I("div",{class:"max-w-250px flex-1 w-0"},[I("div",{class:"leading-[1.4] text-14px text-font2 truncate"},[l.tag_name]),I("div",{class:"mt-10px leading-[1.2] text-font3 truncate"},[l.digest])]),I("div",{class:"text-14px text-font2"},[l.last_updated,P(" "),a("Docker.CloudImage.detail.updated")])])},f=()=>{if(!d.value)return void o.error(a("Docker.CloudImage.detail.selectImageError"));const l=`${e.row.name}:${d.value}`;g({title:a("Docker.CloudImage.detail.pullImageTitle"),width:660,data:{name:l},component:W})},_=async()=>{const{message:a}=await(o={image:e.row.name},l.post("/btdocker/image/get_image_detail",o));var o;n(a)&&(t.value=a)},x=async()=>{const{message:a}=await(o={image:e.row.name,id:t.value?.id||0,search:""},l.post("/btdocker/image/get_image_tags",o));var o;i(a)&&(r.value=a.map((e=>({label:e.tag_name,value:e.tag_name,data:e}))))};return(async()=>{try{u.value=!0,await _(),await x()}finally{u.value=!1}})(),(a,l)=>{const o=q,n=F;return b(),C("div",X,[$("div",A,[$("div",G,U(e.row.name),1),$("ul",null,[$("li",null,[$("span",null,U(a.$t("Docker.CloudImage.detail.lastUpdated")),1),$("span",null,U(D(t).last_updated),1)]),$("li",null,[$("span",null,U(a.$t("Docker.CloudImage.detail.isOfficial")),1),$("span",null,U(D(s)),1)]),$("li",null,[$("span",null,U(a.$t("Docker.CloudImage.detail.source")),1),$("span",null,U(a.$t("Docker.CloudImage.detail.dockerHub")),1)]),$("li",null,[$("span",null,U(a.$t("Docker.CloudImage.detail.pullsCount")),1),$("span",null,U(D(c)),1)])])]),$("div",J,[$("div",Q,[I(o,{value:D(d),"onUpdate:value":l[0]||(l[0]=e=>S(d)?d.value=e:null),options:D(r),loading:D(u),filterable:!0,"render-tag":m,"render-label":p,placeholder:a.$t("Docker.CloudImage.detail.selectPlaceholder")},null,8,["value","options","loading","placeholder"])]),I(n,{type:"primary",onClick:f},{default:z((()=>[P(U(a.$t("Docker.CloudImage.detail.pullButton")),1)])),_:1})])])}}}),[["__scopeId","data-v-42cf0db8"]]),Z={class:"w-510px"},ee={class:"ml-4px"};e("_",w({__name:"table",setup(e){const l=E((()=>s((()=>a.import("./index-legacy164.js?v=1763625242172")),void 0))),{t:n}=y(),d=t(),p=()=>{X.page=1,A()},g=()=>{""!==W.name?window.open("https://hub.docker.com/search?type=image&q="+W.name):o.error(n("Docker.CloudImage.index_1"))},w=B({show:!1,image:""}),{table:h,columns:j}=f([{key:"name",title:n("Docker.CloudImage.index_5"),width:200},{key:"star_count",title:n("Docker.CloudImage.index_6"),width:70},{key:"is_official",title:n("Docker.CloudImage.index_7"),width:100,render:e=>e.is_official?"Official":"Unofficial"},{key:"description",title:n("Docker.CloudImage.index_8"),minWidth:130,ellipsis:{tooltip:!0}},_({width:230,options:e=>[{label:n("Docker.CloudImage.index_11"),onClick:()=>{w.show=!0,w.image=e.name}},{label:n("Docker.CloudImage.index_10"),onClick:()=>{q(e)}}]})]),V=x(n("Docker.CloudImage.index_4"),{row:void 0}),q=e=>{V.data.row=e,V.show=!0},{loading:M,setLoading:N}=v(),W=B({name:""}),X=B({page:1,pageSize:10}),A=async()=>{try{N(!0);const{message:e}=await c(T(W));h.data=i(e)?e:[]}finally{N(!1)}};return L((()=>d.isRefresh),(e=>{e&&(d.setRefresh(!1),A())})),A(),(e,a)=>{const t=H,o=F,n=u,i=K,d=k,s=m,c=r;return b(),C(R,null,[I(s,null,{toolsLeft:z((()=>[$("div",Z,[I(t,{value:D(W).name,"onUpdate:value":a[0]||(a[0]=e=>D(W).name=e),placeholder:e.$t("Docker.CloudImage.index_1"),onKeyup:O(p,["enter"])},null,8,["value","placeholder"])]),I(o,{type:"primary",onClick:p},{default:z((()=>[P(U(e.$t("Public.Btn.Search")),1)])),_:1}),I(i,null,{trigger:z((()=>[I(o,{onClick:g},{default:z((()=>[I(n,{name:"soft-docker",size:"16"}),$("span",ee,U(e.$t("Public.Btn.Search")),1)])),_:1})])),default:z((()=>[$("span",null,U(e.$t("Docker.CloudImage.index_3")),1)])),_:1})])),table:z((()=>[I(d,{page:D(X),"onUpdate:page":a[1]||(a[1]=e=>S(X)?X.value=e:null),"row-key":"name",loading:D(M),data:D(h).data,columns:D(j),"is-page":!0},null,8,["page","loading","data","columns"])])),_:1}),I(D(l),{show:D(w).show,"onUpdate:show":a[2]||(a[2]=e=>D(w).show=e),image:D(w).image},null,8,["show","image"]),I(c,{show:D(V).show,"onUpdate:show":a[3]||(a[3]=e=>D(V).show=e),title:D(V).title,data:D(V).data,width:540,component:Y},null,8,["show","title","data"])],64)}}}))}}}));
