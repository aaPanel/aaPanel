System.register(["./page_layout-legacy.js?v=1769066082311","./index-legacy.js?v=1769066082311","./index.vue_vue_type_script_setup_true_lang-legacy5.js?v=1769066082311","./public-legacy.js?v=1769066082311","./vue-legacy.js?v=1769066082311","./index-legacy109.js?v=1769066082311","./naive-legacy.js?v=1769066082311"],function(e,a){"use strict";var l,t,o,n,i,s,d,c,u,r,m,p,g,f,_,x,v,k,w,y,h,b,C,I,D,$,j,U,S,z,P,R,B,E,L,O,W,F,T,q,H,K;return{setters:[e=>{l=e.aE,t=e.bt,o=e.m,n=e.d,i=e.x,s=e.p,d=e._,c=e.a,u=e.bF},e=>{r=e._},e=>{m=e._},e=>{p=e.C,g=e.u,f=e.c,_=e.f,x=e.e,v=e.d,k=e.h},e=>{w=e.k,y=e.P,h=e.r,b=e.R,C=e.V,I=e.W,D=e.U,$=e.c,j=e.S,U=e.a4,S=e.ak,z=e.a3,P=e.j,R=e.F,B=e.e,E=e.w,L=e.aj,O=e._,W=e.N},e=>{F=e._},e=>{T=e.dW,q=e.aC,H=e.au,K=e.di}],execute:function(){var M=document.createElement("style");M.textContent=".info[data-v-c5b9ee13]{margin-bottom:16px;padding:20px;border-radius:8px;background-color:#f7f7f7}.info .info-title[data-v-c5b9ee13]{margin-bottom:10px;font-size:16px;font-weight:700;color:#606266}.info ul[data-v-c5b9ee13]{display:flex;flex-direction:column;gap:8px}.info ul li[data-v-c5b9ee13]{display:flex;align-items:center;justify-content:space-between;font-size:14px;color:#606266}\n/*$vite$:1*/",document.head.appendChild(M);const N={class:"h-400px bg-#282c34 rounded-b-4px"},V=w({__name:"index",props:{name:{type:String,default:""}},emits:["close"],setup(e,{emit:a}){const l=a,{t:n}=y(),i=t(),s=h(n("Docker.CloudImage.index_9")+"\n"),{send:d,close:c}=p("/ws_model",{onMessage:(e,a)=>{const{data:t}=a;s.value+=t,t.includes("successful")?(o.success(n("Docker.CloudImage.pull.success")),i.setRefresh(!0),setTimeout(()=>{l("close")},1500),c()):t.includes("failed")&&(o.error(n("Docker.CloudImage.pull.failed")),c())}});return d({model_index:"btdocker",mod_name:"image",def_name:"pull_from_some_registry",ws_callback:111,name:"Docker public repository",image:e.name}),(e,a)=>{const l=F;return C(),b("div",N,[I(l,{log:D(s)},null,8,["log"])])}}}),A={class:"p-20px"},G={class:"info"},J={class:"info-title"},Q={class:"flex gap-8px"},X={class:"flex-1"},Y=s(w({__name:"image",props:{row:{type:Object,default:()=>({})}},setup(e){const{t:a}=y(),t=h({}),s=h(null),d=$(()=>"library"===t.value.namespace?a("Docker.CloudImage.detail.yes"):a("Docker.CloudImage.detail.no")),c=$(()=>{const e=t.value.pull_count;return e?e.toLocaleString():"--"}),u=h(!1),r=h([]),m=({option:e})=>I(R,null,[e.label]),p=e=>{const l=e.data;return I("div",{class:"flex items-center justify-between py-10px"},[I("div",{class:"max-w-250px flex-1 w-0"},[I("div",{class:"leading-[1.4] text-14px text-font2 truncate"},[l.tag_name]),I("div",{class:"mt-10px leading-[1.2] text-font3 truncate"},[l.digest])]),I("div",{class:"text-14px text-font2"},[l.last_updated,P(" "),a("Docker.CloudImage.detail.updated")])])},f=()=>{if(!s.value)return void o.error(a("Docker.CloudImage.detail.selectImageError"));const l=`${e.row.name}:${s.value}`;g({title:a("Docker.CloudImage.detail.pullImageTitle"),width:660,data:{name:l},component:V})},_=async()=>{const{message:a}=await(o={image:e.row.name},l.post("/btdocker/image/get_image_detail",o));var o;n(a)&&(t.value=a)},x=async()=>{const{message:a}=await(o={image:e.row.name,id:t.value?.id||0,search:""},l.post("/btdocker/image/get_image_tags",o));var o;i(a)&&(r.value=a.map(e=>({label:e.tag_name,value:e.tag_name,data:e})))};return(async()=>{try{u.value=!0,await _(),await x()}finally{u.value=!1}})(),(a,l)=>{const o=T,n=q;return C(),b("div",A,[j("div",G,[j("div",J,U(e.row.name),1),j("ul",null,[j("li",null,[j("span",null,U(a.$t("Docker.CloudImage.detail.lastUpdated")),1),j("span",null,U(D(t).last_updated),1)]),j("li",null,[j("span",null,U(a.$t("Docker.CloudImage.detail.isOfficial")),1),j("span",null,U(D(d)),1)]),j("li",null,[j("span",null,U(a.$t("Docker.CloudImage.detail.source")),1),j("span",null,U(a.$t("Docker.CloudImage.detail.dockerHub")),1)]),j("li",null,[j("span",null,U(a.$t("Docker.CloudImage.detail.pullsCount")),1),j("span",null,U(D(c)),1)])])]),j("div",Q,[j("div",X,[I(o,{value:D(s),"onUpdate:value":l[0]||(l[0]=e=>S(s)?s.value=e:null),options:D(r),loading:D(u),filterable:!0,"render-tag":m,"render-label":p,placeholder:a.$t("Docker.CloudImage.detail.selectPlaceholder")},null,8,["value","options","loading","placeholder"])]),I(n,{type:"primary",onClick:f},{default:z(()=>[P(U(a.$t("Docker.CloudImage.detail.pullButton")),1)]),_:1})])])}}}),[["__scopeId","data-v-c5b9ee13"]]),Z={class:"w-510px"},ee={class:"ml-4px"};e("_",w({__name:"table",setup(e){const l=O(()=>c(()=>a.import("./index-legacy172.js?v=1769066082311"),void 0)),{t:n}=y(),s=t(),p=()=>{A.page=1,G()},g=()=>{""!==V.name?window.open("https://hub.docker.com/search?type=image&q="+V.name):o.error(n("Docker.CloudImage.index_1"))},w=B({show:!1,image:""}),{table:h,columns:$}=f([{key:"name",title:n("Docker.CloudImage.index_5"),width:200},{key:"star_count",title:n("Docker.CloudImage.index_6"),width:70},{key:"is_official",title:n("Docker.CloudImage.index_7"),width:100,render:e=>e.is_official?"Official":"Unofficial"},{key:"description",title:n("Docker.CloudImage.index_8"),minWidth:130,ellipsis:{tooltip:!0}},_({width:230,options:e=>[{label:n("Docker.CloudImage.index_11"),onClick:()=>{w.show=!0,w.image=e.name}},{label:n("Docker.CloudImage.index_10"),onClick:()=>{T(e)}}]})]),F=x(n("Docker.CloudImage.index_4"),{row:void 0}),T=e=>{F.data.row=e,F.show=!0},{loading:M,setLoading:N}=v(),V=B({name:""}),A=B({page:1,pageSize:10}),G=async()=>{try{N(!0);const{message:e}=await u(W(V));h.data=i(e)?e:[]}finally{N(!1)}};return E(()=>s.isRefresh,e=>{e&&(s.setRefresh(!1),G())}),G(),(e,a)=>{const t=H,o=q,n=d,i=K,s=k,c=m,u=r;return C(),b(R,null,[I(c,null,{toolsLeft:z(()=>[j("div",Z,[I(t,{value:D(V).name,"onUpdate:value":a[0]||(a[0]=e=>D(V).name=e),placeholder:e.$t("Docker.CloudImage.index_1"),onKeyup:L(p,["enter"])},null,8,["value","placeholder"])]),I(o,{type:"primary",onClick:p},{default:z(()=>[P(U(e.$t("Public.Btn.Search")),1)]),_:1}),I(i,null,{trigger:z(()=>[I(o,{onClick:g},{default:z(()=>[I(n,{name:"soft-docker",size:"16"}),j("span",ee,U(e.$t("Public.Btn.Search")),1)]),_:1})]),default:z(()=>[j("span",null,U(e.$t("Docker.CloudImage.index_3")),1)]),_:1})]),table:z(()=>[I(s,{page:D(A),"onUpdate:page":a[1]||(a[1]=e=>S(A)?A.value=e:null),"row-key":"name",loading:D(M),data:D(h).data,columns:D($),"is-page":!0},null,8,["page","loading","data","columns"])]),_:1}),I(D(l),{show:D(w).show,"onUpdate:show":a[2]||(a[2]=e=>D(w).show=e),image:D(w).image},null,8,["show","image"]),I(u,{show:D(F).show,"onUpdate:show":a[3]||(a[3]=e=>D(F).show=e),title:D(F).title,data:D(F).data,width:540,component:Y},null,8,["show","title","data"])],64)}}}))}}});
