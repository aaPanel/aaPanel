System.register(["./xterm-legacy.js?v=1762424784323","./xterm-addon-canvas-legacy.js?v=1762424784323","./vue-legacy.js?v=1762424784323","./page_layout-legacy.js?v=1762424784323","./public-legacy.js?v=1762424784323"],function(e,t){"use strict";var o,n,a,d,s,i,l,r,c,u,v,p,f,m,h,x,g,w,y,A,b,S,O;return{setters:[e=>{o=e.x,n=e.a,a=e.b,d=e.c},e=>{s=e.x},e=>{i=e._,l=e.k,r=e.P,c=e.af,u=e.a0,v=e.r,p=e.w,f=e.ap,m=e.o,h=e.b,x=e.R,g=e.V,w=e.n},e=>{y=e.a,A=e.d6,b=e.p},e=>{S=e.u,O=e.D}],execute:function(){var _=document.createElement("style");_.textContent="[data-v-12768f9a] .xterm{padding:12px!important}.box[data-v-12768f9a]{height:calc(100vh - 160px)}\n/*$vite$:1*/",document.head.appendChild(_);const C=e("o",e=>{S({title:e.title,width:600,footer:!0,data:e.data,component:i(()=>y(()=>t.import("./form-legacy9.js?v=1762424784323"),void 0))})}),j=l({__name:"terminal",props:{data:{},active:{type:Boolean}},emits:["updateState","connectSuccess"],setup(e,{expose:t,emit:i}){const{t:l}=r(),y=e,{data:b}=y,{active:S}=c(y),_=i,j=A(),{isFull:k}=u(j),{ws:T,status:D,send:E,open:R,close:$}=O("/webssh",{verifyData:{host:b.host,port:b.port,id:b.id,ps:b.ps,sort:0},onMessage:(e,t)=>{const o=t.data;return o.indexOf("Authentication timeout.")>-1&&(B.value=!0),-1==o.indexOf("@127.0.0.1:")&&-1==o.indexOf("@localhost:")||-1==o.indexOf("Authentication failed")?-1==o.indexOf("127.0.0.1:")&&-1==o.indexOf("localhost:")||-1==o.indexOf("Password or private key cannot both be empty")?"\\r\\nlogout\\r\\n"==o||"logout\\r\\n"==o||"\r\nlogout\r\n"==o||"logout\r\n"==o||o.search(/logout[\r\n]+$/)>-1?(_("updateState",b.id,!1),F.write("\r"+l("Component.Terminal.index_1")+"\r"),N(),void $()):void _("connectSuccess",o):(_("updateState",b.id,!1),$(),N(),void z()):(_("updateState",b.id,!1),$(),void N())}}),z=()=>{C({title:"Edit server",data:{isEdit:!0,tips:!0,localhost:!0,onRefresh:()=>{q()}}})};let F,M;const B=v(!1),L=v(null),P=()=>{const e=T.value;e&&(F.loadAddon(M),F.loadAddon(new s.CanvasAddon),F.loadAddon(new a.WebLinksAddon),F.loadAddon(new d.AttachAddon(e)),setTimeout(()=>{M.fit();const e=L.value;e&&(V.value=`${e.clientHeight}px`)},100))},H=()=>{L.value&&F.open(L.value)};let I=!1;const N=()=>{I=!1},V=v(""),W=()=>{F.focus(),F.onData(e=>{const t=T.value;"\r"===e&&B.value&&(B.value=!1,F.write("\r\n"),q()),void 0!==t||"\r"!==e||I||(I=!0,F.write("\r\n"+l("Component.Terminal.index_2")+"\r\n"),q())})},q=()=>{R(),W();const e=T.value;e&&(F.loadAddon(new d.AttachAddon(e)),_("updateState",b.id,!0))},G=()=>{w(()=>{if(M.fit(),"CLOSED"!==D.value){_("updateState",b.id,!0);const{cols:e,rows:t}=F;E({cols:e,rows:t,resize:1})}})};p(()=>k.value,e=>{const t=L.value;t&&!e&&(t.style.height=V.value)});let J=!0;const K=new ResizeObserver(()=>{S.value&&f(()=>{J?J=!1:G()},200)()});return t({send:E}),m(()=>{F=new o.Terminal({cursorBlink:!0,fontSize:14,fontFamily:"Monaco, Menlo, Consolas, 'Courier New', monospace",theme:{background:"#333",foreground:"#ececec"}}),M=new n.FitAddon,P(),H(),W(),G(),(()=>{const e=L.value;e&&K.observe(e)})()}),h(()=>{K?.disconnect()}),(e,t)=>(g(),x("div",{ref_key:"terminalRef",ref:L,class:"w-full box"},null,512))}});e("T",b(j,[["__scopeId","data-v-12768f9a"]]))}}});
