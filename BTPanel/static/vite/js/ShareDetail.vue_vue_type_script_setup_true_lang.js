import{_ as a}from"./index.js?v=1769066082311";import{_ as e}from"./index.vue_vue_type_script_setup_true_lang.js?v=1769066082311";import{i as l,aa as o,_ as s,aE as i}from"./page_layout.js?v=1769066082311";import{i as t,a as n}from"./public.js?v=1769066082311";import{w as r}from"./CalcSize.vue_vue_type_script_setup_true_lang.js?v=1769066082311";import{dS as d,au as p,aC as u}from"./naive.js?v=1769066082311";import{k as c,i as f,r as m,c as _,a2 as h,V as v,a3 as w,S as x,W as y,an as k,U as M,j as b,a4 as g,ak as C}from"./vue.js?v=1769066082311";const S={class:"p-20px"},j=c({__name:"ShareDetail",setup(c,{expose:j}){const{t:D}=l.global,U="".concat(window.location.origin,"/down/"),z=f("fileStore"),A=m(!1),q=m({filename:"",ps:"",token:"",expire:"",total:0,password:"",addtime:0,id:0});async function E(){return n({title:D("file.shareModal.cancelSharing"),content:D("file.shareModal.confirmStopSharing",{filename:q.value.filename}),async onConfirm(){await i.post("/files?action=remove_download_url",{id:q.value.id},{requestOptions:{loading:D("file.shareModal.deletingShare"),successMessage:!0}}),A.value=!1,r(z)}}),!1}j({open(a){q.value={filename:a.filename,ps:a.ps,token:a.token,expire:o(a.expire),total:a.total,password:a.password,addtime:a.addtime,id:a.id},A.value=!0},close(){A.value=!1}});const L=_(()=>"".concat(U).concat(q.value.token));function N(){t(L.value)}function O(){t(D("file.shareModal.linkAndCode",{link:L.value,code:q.value.password}))}return(l,o)=>{const i=p,t=d,n=s,r=u,c=e,f=a;return v(),h(f,{show:M(A),"onUpdate:show":o[1]||(o[1]=a=>C(A)?A.value=a:null),title:M(D)("file.shareModal.shareDetails",{name:M(q).ps}),width:560,footer:!0,"confirm-type":"error","confirm-text":M(D)("file.shareModal.closeSharingChain"),onConfirm:E},{default:w(()=>[x("div",S,[y(c,null,{default:w(()=>[y(t,{label:M(D)("file.shareModal.shareName")},{default:w(()=>[y(i,{value:M(q).ps,"onUpdate:value":o[0]||(o[0]=a=>M(q).ps=a)},null,8,["value"])]),_:1},8,["label"]),y(t,{label:M(D)("file.shareModal.shareChain")},{default:w(()=>[y(i,{class:"mr-10px",readonly:!0,value:M(L)},null,8,["value"]),y(r,{type:"primary",onClick:N},{icon:w(()=>[y(n,{name:"common-copy",size:"16"})]),_:1})]),_:1},8,["label"]),M(q).password?(v(),h(t,{key:0,label:M(D)("file.shareModal.extractionCode")},{default:w(()=>[y(i,{class:"mr-10px",value:"".concat(M(q).password),readonly:""},null,8,["value"]),y(r,{type:"primary",onClick:O},{default:w(()=>[b(g(M(D)("file.shareModal.copyLinkAndCode")),1)]),_:1})]),_:1},8,["label"])):k("",!0),y(t,{label:M(D)("file.shareModal.expirationDate"),"show-feedback":!1},{default:w(()=>[b(g(M(q).expire),1)]),_:1},8,["label"])]),_:1})])]),_:1},8,["show","title","confirm-text"])}}});export{j as _};
