import{_ as a}from"./index.js?v=1767769852656";import{_ as e}from"./index.vue_vue_type_script_setup_true_lang.js?v=1767769852656";import{i as l,aa as o,_ as s,aE as i}from"./page_layout.js?v=1767769852656";import{i as n,a as t}from"./public.js?v=1767769852656";import{g as r}from"./index38.js?v=1767769852656";import{dR as d,au as p,aC as u}from"./naive.js?v=1767769852656";import{k as c,i as f,r as m,c as h,a2 as v,V as _,a3 as w,S as x,W as y,an as k,U as M,j as b,a4 as g,ak as C}from"./vue.js?v=1767769852656";const j={class:"p-20px"},S=c({__name:"ShareDetail",setup(c,{expose:S}){const{t:D}=l.global,U="".concat(window.location.origin,"/down/"),A=f("fileStore"),q=m(!1),z=m({filename:"",ps:"",token:"",expire:"",total:0,password:"",addtime:0,id:0});async function E(){return t({title:D("file.shareModal.cancelSharing"),content:D("file.shareModal.confirmStopSharing",{filename:z.value.filename}),async onConfirm(){await i.post("/files?action=remove_download_url",{id:z.value.id},{requestOptions:{loading:D("file.shareModal.deletingShare"),successMessage:!0}}),q.value=!1,r(A)}}),!1}S({open(a){z.value={filename:a.filename,ps:a.ps,token:a.token,expire:o(a.expire),total:a.total,password:a.password,addtime:a.addtime,id:a.id},q.value=!0},close(){q.value=!1}});const L=h(()=>"".concat(U).concat(z.value.token));function N(){n(L.value)}function O(){n(D("file.shareModal.linkAndCode",{link:L.value,code:z.value.password}))}return(l,o)=>{const i=p,n=d,t=s,r=u,c=e,f=a;return _(),v(f,{show:M(q),"onUpdate:show":o[1]||(o[1]=a=>C(q)?q.value=a:null),title:M(D)("file.shareModal.shareDetails",{name:M(z).ps}),width:560,footer:!0,"confirm-type":"error","confirm-text":M(D)("file.shareModal.closeSharingChain"),onConfirm:E},{default:w(()=>[x("div",j,[y(c,null,{default:w(()=>[y(n,{label:M(D)("file.shareModal.shareName")},{default:w(()=>[y(i,{value:M(z).ps,"onUpdate:value":o[0]||(o[0]=a=>M(z).ps=a)},null,8,["value"])]),_:1},8,["label"]),y(n,{label:M(D)("file.shareModal.shareChain")},{default:w(()=>[y(i,{class:"mr-10px",readonly:!0,value:M(L)},null,8,["value"]),y(r,{type:"primary",onClick:N},{icon:w(()=>[y(t,{name:"common-copy",size:"16"})]),_:1})]),_:1},8,["label"]),M(z).password?(_(),v(n,{key:0,label:M(D)("file.shareModal.extractionCode")},{default:w(()=>[y(i,{class:"mr-10px",value:"".concat(M(z).password),readonly:""},null,8,["value"]),y(r,{type:"primary",onClick:O},{default:w(()=>[b(g(M(D)("file.shareModal.copyLinkAndCode")),1)]),_:1})]),_:1},8,["label"])):k("",!0),y(n,{label:M(D)("file.shareModal.expirationDate"),"show-feedback":!1},{default:w(()=>[b(g(M(z).expire),1)]),_:1},8,["label"])]),_:1})])]),_:1},8,["show","title","confirm-text"])}}});export{S as _};
