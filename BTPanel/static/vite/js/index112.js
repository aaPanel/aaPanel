import{d as e,_ as a,a as t,c as l,h as n,u as s}from"./public.js?v=1769066082311";import{_ as i}from"./index.vue_vue_type_script_setup_true_lang.js?v=1769066082311";import{_ as o}from"./index104.js?v=1769066082311";import{Z as r,r as u,a0 as d,k as p,P as c,e as f,a2 as m,V as _,a3 as v,W as x,U as g,l as w,S as b,j as h,a4 as C,v as y,F as k,ae as S,R as P,q as $,I as U,ap as I,av as L,au as A,ak as j,a5 as E,c as R,an as q,H as B,N as T}from"./vue.js?v=1769066082311";import{az as M,d as z,bb as D,bc as O,bd as H,be as N,x as V,T as K,a5 as W,m as F,bf as Z,ap as G,p as J,_ as Q,aD as X,b6 as Y,bg as ee,N as ae,O as te,P as le,bh as ne,k as se,bi as ie,bj as oe,bk as re,bl as ue,S as de,bm as pe,bn as ce,b5 as fe,bo as me,aB as _e,bp as ve,an as xe,bq as ge,i as we}from"./page_layout.js?v=1769066082311";import{dS as be,dk as he,au as Ce,aC as ye,dU as ke,e2 as Se,_ as Pe,di as $e,dg as Ue,dW as Ie,dl as Le,dV as Ae,db as je}from"./naive.js?v=1769066082311";import{_ as Ee}from"./index.vue_vue_type_script_setup_true_lang2.js?v=1769066082311";import{_ as Re}from"./index114.js?v=1769066082311";import{s as qe,a as Be,g as Te}from"./ssl-lets-progress.js?v=1769066082311";const Me=r("settings-all",()=>{const e=u({listenIpv6:!1,offlineMode:!1,debugMode:!1,apiInterface:!1,api_token:"",cdn_status:!1,lang:null,langList:[],webname:"",session_timeout:"",session_timeout_source:0,sites_path:"",backup_path:"",serverIp:"",systemDate:"",username:"",account:"",isBindAccount:!1,icon_status:!1,backup_info:{auto_backup:0,backup_number:0,total_size:0}}),a=u({panelSSL:!1,basicAuth:!1,dynamicPwd:!1,pwdComplexity:!1,domain:"",limitIp:"",port:"7800",adminPath:"/",statusCode:404,pwdSetDay:0,pwdExpireDay:0,pwdExpireTime:0,uaAstrict:!1}),t=a=>{e.value.listenIpv6="checked"===a.ipv6,e.value.offlineMode="checked"===a.is_local,e.value.debugMode="checked"===a.debug,e.value.apiInterface="checked"===a.api,e.value.cdn_status=a.cdn_status,e.value.api_token=a.api_token,e.value.lang=a.language,e.value.langList=a.language_list.map(e=>({label:e.title,value:e.name})),e.value.webname=a.webname||"",e.value.session_timeout=a.session_timeout||"",e.value.session_timeout_source=a.session_timeout_source||86400,e.value.sites_path=a.sites_path||"",e.value.backup_path=a.backup_path||"",e.value.systemDate=a.systemdate||"",e.value.username=a.username||"",e.value.icon_status=a.icon_status;const{panel:t,user_info:l}=a;z(t)&&(e.value.serverIp=t.address||"",e.value.backup_info=t.backup_info),z(l)&&(e.value.account=l.data.username,e.value.isBindAccount=!0===l.status)},l=e=>{var t;const{panel:l,SSL:n}=e;a.value.panelSSL=n||location.protocol.indexOf("https:")>-1,a.value.basicAuth=(null==(t=e.basic_auth)?void 0:t.open)||!1,a.value.statusCode=e.status_code||404,z(l)&&(a.value.domain=l.domain||"",a.value.limitIp=l.limitip||"",a.value.port=l.listen_port||"7800",a.value.adminPath=l.admin_path||"/")},n=u([]);return{panelConfig:e,safeConfig:a,menuList:n,getConfig:async()=>{const{message:e}=await M();z(e)&&(t(e),l(e))},getMenus:async()=>{const{message:e}=await N();n.value=V(e)?e:[]},getDynamicPwd:async()=>{const{message:e}=await D();z(e)&&(a.value.dynamicPwd=e.result)},getPasswordStatus:async()=>{const{message:e}=await O();z(e)&&(a.value.pwdSetDay=e.expire,a.value.pwdExpireDay=e.expire_day,a.value.pwdExpireTime=e.expire_time,a.value.pwdComplexity=e.password_safe)},getLimitUaInfo:async()=>{const{message:e}=await H();z(e)&&(a.value.uaAstrict="0"!==e.status)}}}),ze=()=>{const e=Me(),{panelConfig:a}=d(e);return{panelConfig:a,getConfig:e.getConfig}},De={class:"w-320px"},Oe=["innerHTML"],He={class:"inline-block text-center leading-[1.4]"},Ne={class:"w-320px"},Ve=p({__name:"set",setup(l){const{t:n}=c(),{panelConfig:s}=ze(),r=f({token:"",limit_addr:"",ip_type:"custom"}),u=async e=>{await W({t_type:2}),s.value.apiInterface=e},d=()=>{t({title:n("Config.Panel.index_33"),content:()=>x(k,null,[x("div",{class:"mb-8px"},[n("Config.Panel.index_86")]),x("div",{class:"text-error"},[n("Config.Panel.index_87")])]),onConfirm:async()=>{const{message:e}=await W({t_type:1},!1);F.success({content:n("Config.Panel.index_34"),close:!0}),z(e)&&(r.token=e.result)}})},p=()=>{switch(r.ip_type){case"all":return"0.0.0.0/0\n::/0";case"ipv4":return"0.0.0.0/0";case"ipv6":return"::/0";case"custom":return r.limit_addr}},S=()=>{switch(r.ip_type){case"all":return n("Allow all IPs");case"ipv4":return n("Only allow IPv4 type");case"ipv6":return n("Only allow IPv6 type");case"custom":return n("Only allow custom IP")}},P=async()=>{await W({t_type:3,limit_addr:p(),ip_type:r.ip_type}),I()},{loading:$,setLoading:U}=e(),I=async()=>{try{U(!0);const{message:e}=await Z();z(e)&&(r.token=e.token,r.limit_addr=e.limit_addr,r.ip_type=e.ip_type)}finally{U(!1)}};return I(),(e,t)=>{const l=he,n=be,p=ye,c=Ce,f=Se,k=ke,U=o,I=i,L=a,A=K;return _(),m(A,{show:g($),class:"w-540px p-20px"},{default:v(()=>[x(I,{model:g(r)},{default:v(()=>[x(n,{label:e.$t("Config.Panel.index_19")},{default:v(()=>[x(l,{value:g(s).apiInterface,"onUpdate:value":u},null,8,["value"])]),_:1},8,["label"]),x(n,{label:e.$t("Config.Panel.index_26")},{default:v(()=>[b("div",De,[x(c,{value:g(r).token,"onUpdate:value":t[0]||(t[0]=e=>g(r).token=e),readonly:!0},{suffix:v(()=>[x(p,{class:"h-22px px-5px",type:"primary",size:"small",onClick:d},{default:v(()=>[h(C(e.$t("Public.Btn.Reset")),1)]),_:1})]),_:1},8,["value"])])]),_:1},8,["label"]),x(n,{label:e.$t("IP Type"),"show-feedback":!1},{default:v(()=>[x(k,{value:g(r).ip_type,"onUpdate:value":t[1]||(t[1]=e=>g(r).ip_type=e)},{default:v(()=>[x(f,{value:"all"},{default:v(()=>[h(C(e.$t("Public.All")),1)]),_:1}),x(f,{value:"ipv4"},{default:v(()=>t[3]||(t[3]=[h(" IPV4 ",-1)])),_:1,__:[3]}),x(f,{value:"ipv6"},{default:v(()=>t[4]||(t[4]=[h(" IPV6 ",-1)])),_:1,__:[4]}),x(f,{value:"custom"},{default:v(()=>[h(C(e.$t("Public.Search.Custom")),1)]),_:1})]),_:1},8,["value"])]),_:1},8,["label"]),x(n,{label:" "},{default:v(()=>[b("div",{innerHTML:S()},null,8,Oe)]),_:1}),w(x(n,{class:"form-item"},{label:v(()=>[b("div",He,[h(C(e.$t("Config.Panel.index_27")),1),t[5]||(t[5]=b("br",null,null,-1)),h(" "+C(e.$t("Config.Panel.index_28")),1)])]),default:v(()=>[b("div",Ne,[x(U,{value:g(r).limit_addr,"onUpdate:value":t[2]||(t[2]=e=>g(r).limit_addr=e),rows:4},null,8,["value"])])]),_:1},512),[[y,"custom"===g(r).ip_type]]),x(n,{label:" ","show-feedback":!1},{default:v(()=>[x(p,{type:"primary",onClick:P},{default:v(()=>[h(C(e.$t("Public.Btn.Save")),1)]),_:1})]),_:1})]),_:1},8,["model"]),x(L,{class:"mt-20px"},{default:v(()=>[b("li",null,C(e.$t("Config.Panel.index_29")),1),b("li",null,C(e.$t("Config.Panel.index_30")),1),b("li",null,C(e.$t("Config.Panel.index_31")),1),b("li",null,[h(C(e.$t("Config.Panel.index_32"))+" ",1),t[6]||(t[6]=b("a",{class:"bt-link",href:"https://www.aapanel.com/forum/d/482-api-interface-tutorial",target:"_blank"}," https://www.aapanel.com/forum/d/482-api-interface-tutorial ",-1))])]),_:1})]),_:1},8,["show"])}}}),Ke=p({__name:"risk",props:{checked:{type:[String,Number,Boolean]},checkedModifiers:{}},emits:["update:checked"],setup(e,{expose:a}){const t=S(e,"checked"),l=G(),n=u(0),s=u(0),i=u(!1),o=u(),r=()=>{const e=o.value.$el.getClientRects(),{x:a,y:t}=e[0];n.value=a-5,s.value=t-3,i.value=!0,d()},d=I(()=>{i.value=!1},2500);return a({validate:()=>new Promise((e,a)=>{t.value?e(!0):(r(),a(!1))}),showTips:r}),(e,a)=>{const r=Pe,u=$e;return _(),P(k,null,[x(r,{ref_key:"checkboxRef",ref:o,checked:t.value,"onUpdate:checked":a[0]||(a[0]=e=>t.value=e)},{default:v(()=>[$(e.$slots,"default")]),_:3},8,["checked"]),x(u,{show:g(i),x:g(n),y:g(s),trigger:"manual",placement:"top-start",style:U({backgroundColor:g(l).errorColor,color:"#fff"}),"arrow-style":{backgroundColor:g(l).errorColor}},{default:v(()=>[b("span",null,C(e.$t("Config.Safe.index_169")),1)]),_:1},8,["show","x","y","style","arrow-style"])],64)}}}),We={class:"confirm-tips"};const Fe=J({},[["render",function(e,a){return _(),P("ul",We,[$(e.$slots,"default",{},void 0,!0)])}],["__scopeId","data-v-32627769"]]),Ze={class:"flex items-center"},Ge={class:"min-w-32px"},Je={class:"ml-12px text-21px"},Qe=p({__name:"title",setup(e){const a=G();return(e,t)=>{const l=Q;return _(),P("div",Ze,[b("div",Ge,[x(l,{name:"base-warning",size:"32",color:g(a).warningColor},null,8,["color"])]),b("div",Je,[$(e.$slots,"default")])])}}}),Xe={class:"w-440px p-20px"},Ye={class:"text-error"},ea=p({__name:"confirm",setup(e,{expose:a}){const{panelConfig:t}=ze(),l=L("riskRef");return a({onConfirm:async()=>{var e;await(null==(e=l.value)?void 0:e.validate()),await X(),t.value.debugMode=!0}}),(e,a)=>(_(),P("div",Xe,[x(Qe,{class:"mb-20px"},{default:v(()=>[h(C(e.$t("Config.Panel.index_14")),1)]),_:1}),x(Fe,{class:"mb-20px"},{default:v(()=>[b("li",Ye,C(e.$t("Config.Panel.index_15")),1),b("li",null,C(e.$t("Config.Panel.index_16")),1),b("li",null,C(e.$t("Config.Panel.index_17")),1)]),_:1}),x(Ke,{ref_key:"riskRef",ref:l},{default:v(()=>[h(C(e.$t("Config.Panel.index_18")),1)]),_:1},512)]))}}),aa={class:"w-360px p-20px"},ta=p({__name:"set",props:{menuList:{type:Array,default:()=>[]}},setup(e){const{t:a}=c(),t=Y(),s=["memuA","memuAsoft","memuAconfig","dologin"],{columns:i}=l([{key:"title",title:a("Config.Panel.index_80")},{key:"show",title:a("Config.Panel.index_81"),align:"right",width:100,render:e=>s.includes(e.id)?a("Config.Panel.index_82"):x(he,{value:e.show,size:"small",onUpdateValue:a=>{o(a,e)}},null)}]),o=async(a,l)=>{const n=e.menuList.filter(e=>!e.show).map(e=>e);a?n.splice(n.map(e=>e.id).indexOf(l.id),1):n.push(l),await ee({hide_list:n.map(e=>e.id)}),t.setHideMenu(n.map(e=>e.title)),l.show=a};return(a,t)=>{const l=n;return _(),P("div",aa,[x(l,{data:e.menuList,columns:g(i)},null,8,["data","columns"])])}}}),la={class:"w-420px px-20px pt-28px pb-8px"},na={class:"w-210px"},sa={class:"w-210px"},ia={class:"w-210px"},oa=p({__name:"set",setup(e,{expose:a}){const{t:t}=c(),l=u(null),n=f({password1:"",password2:"",userpassword:""}),s={password1:{trigger:["blur","input"],validator:()=>""===n.password1.trim()?new Error(t("Config.Panel.index_67")):!(n.password1.trim().length<6)||new Error(t("Config.Panel.index_68"))},password2:{trigger:["blur","input"],validator:()=>""===n.password2.trim()?new Error(t("Config.Panel.index_69")):n.password2===n.password1||new Error(t("Config.Panel.index_70"))},userpassword:{trigger:["blur","input"],required:!0,message:t("Config.Panel.index_67")}};return a({onConfirm:async()=>{var e;await(null==(e=l.value)?void 0:e.validate()),await ae({password1:te(n.password1),password2:te(n.password2),userpassword:te(n.userpassword)}),le("/login?dologin=True",1500)}}),(e,a)=>{const t=Ce,o=be,r=Ee,u=i;return _(),P("div",la,[x(u,{ref_key:"formRef",ref:l,model:g(n),rules:s,"require-mark-placement":"left"},{default:v(()=>[x(o,{label:e.$t("Old Password"),path:"userpassword","show-require-mark":!0},{default:v(()=>[b("div",na,[x(t,{value:g(n).userpassword,"onUpdate:value":a[0]||(a[0]=e=>g(n).userpassword=e),placeholder:""},null,8,["value"])])]),_:1},8,["label"]),x(o,{label:e.$t("New Password"),path:"password1","show-require-mark":!0},{default:v(()=>[b("div",sa,[x(r,{value:g(n).password1,"onUpdate:value":a[1]||(a[1]=e=>g(n).password1=e),length:10,placeholder:""},null,8,["value"])])]),_:1},8,["label"]),x(o,{label:e.$t("Config.Panel.index_59"),path:"password2","show-require-mark":!0},{default:v(()=>[b("div",ia,[x(t,{value:g(n).password2,"onUpdate:value":a[2]||(a[2]=e=>g(n).password2=e),placeholder:""},null,8,["value"])])]),_:1},8,["label"])]),_:1},8,["model"])])}}});function ra(){const e=Me(),{safeConfig:a}=d(e);return{safeConfig:a,getPasswordStatus:e.getPasswordStatus}}const ua=()=>{const e=Me(),{panelConfig:a,safeConfig:t}=d(e);return{saveConfig:async(e={})=>{await ne({webname:a.value.webname||"",session_timeout:a.value.session_timeout_source||86400,domain:t.value.domain,limitip:t.value.limitIp,sites_path:a.value.sites_path,backup_path:a.value.backup_path,address:a.value.serverIp,systemdate:a.value.systemDate,port:t.value.port,backup_number:a.value.backup_info.backup_number,auto_backup:a.value.backup_info.auto_backup,...e})},getConfig:e.getConfig}},da={class:"w-400px p-20px"},pa={class:"text-error"},ca={class:"text-error"},fa={class:"w-210px"},ma=p({__name:"set",setup(e,{expose:a}){const{t:t}=c(),l=u(),n=u(null),{safeConfig:s}=ra(),{saveConfig:o}=ua(),r=f({port:se(s.value.port)}),d={port:{trigger:["blur","input"],validator:()=>!!ie(r.port)||new Error(t("Config.Safe.index_104"))}};return a({onConfirm:async()=>{var e;await l.value.validate(),await(null==(e=n.value)?void 0:e.validate()),await o({port:"".concat(r.port)}),le("".concat(location.protocol,"//").concat(location.hostname,":").concat(r.port).concat(location.pathname))}}),(e,a)=>{const t=Ue,s=be,o=i;return _(),P("div",da,[x(Fe,{class:"mb-20px"},{default:v(()=>[b("li",pa,C(e.$t("Config.Safe.index_100")),1),b("li",ca,C(e.$t("Config.Safe.index_101")),1)]),_:1}),x(o,{ref_key:"formRef",ref:n,model:g(r),rules:d},{default:v(()=>[x(s,{label:e.$t("Config.Safe.index_96"),path:"port","label-width":"auto","label-style":{paddingLeft:"24px"}},{default:v(()=>[b("div",fa,[x(t,{value:g(r).port,"onUpdate:value":a[0]||(a[0]=e=>g(r).port=e),min:1,max:65535,"show-button":!1,placeholder:""},null,8,["value"])])]),_:1},8,["label"])]),_:1},8,["model"]),x(Ke,{ref_key:"riskRef",ref:l},{default:v(()=>[h(C(e.$t("Config.Safe.index_102"))+" ",1),b("a",{class:"bt-link",href:"https://www.aapanel.com/forum/d/599-how-to-release-the-aapanel-port",target:"_blank",onClick:A(()=>!1,["stop"])},C(e.$t("Config.Safe.index_103")),1)]),_:1},512)])}}}),_a={class:"w-440px px-20px pt-28px pb-8px"},va={class:"w-240px"},xa=p({__name:"set",setup(e,{expose:a}){const{t:t}=c(),{safeConfig:l}=ra(),n=u(null),s=f({adminPath:l.value.adminPath}),o={adminPath:{trigger:["blur","input"],validator:()=>""!==s.adminPath.trim()||new Error(t("Config.Safe.index_108"))}};return a({onConfirm:async()=>{var e;await(null==(e=n.value)?void 0:e.validate()),await oe({admin_path:te(s.adminPath)}),l.value.adminPath=s.adminPath}}),(e,a)=>{const t=Ce,l=be,r=i;return _(),P("div",_a,[x(r,{ref_key:"formRef",ref:n,model:g(s),rules:o},{default:v(()=>[x(l,{label:e.$t("Config.Safe.index_105"),path:"adminPath"},{default:v(()=>[b("div",va,[x(t,{value:g(s).adminPath,"onUpdate:value":a[0]||(a[0]=e=>g(s).adminPath=e),placeholder:""},null,8,["value"])])]),_:1},8,["label"])]),_:1},8,["model"])])}}}),ga={class:"w-400px flex p-20px"},wa={class:"min-w-32px"},ba={class:"flex-1 ml-10px text-14px leading-22px"},ha={class:"flex items-center min-h-30px mb-12px text-error"},Ca=p({__name:"close",emits:["setConfirm"],setup(e,{expose:a,emit:t}){const l=t,{t:n}=c(),{safeConfig:s}=ra(),i=G(),o=u(!1),r=()=>{d>0||l("setConfirm",{disabled:!o.value})};let d=5;return(()=>{l("setConfirm",{text:n("Config.Safe.index_16",[d]),disabled:!0});const e=setInterval(()=>{d--,l("setConfirm",{text:n("Config.Safe.index_16",[d])}),d<=0&&(clearInterval(e),l("setConfirm",{text:n("Config.Safe.index_17"),disabled:!o.value}))},1e3)})(),a({onConfirm:async()=>(await re(),await ue(),setTimeout(()=>{{const e="http:"===location.protocol?"https":"http";window.location.href="".concat(e,"://").concat(window.location.host).concat(s.value.adminPath)}},1500),!1)}),(e,a)=>{const t=Q,l=Pe;return _(),P("div",ga,[b("div",wa,[x(t,{name:"base-warning",color:g(i).warningColor,size:"32"},null,8,["color"])]),b("div",ba,[b("div",ha,C(e.$t("Config.Safe.index_14")),1),x(l,{checked:g(o),"onUpdate:checked":[a[0]||(a[0]=e=>j(o)?o.value=e:null),r]},{default:v(()=>[h(C(e.$t("Config.Safe.index_15")),1)]),_:1},8,["checked"])])])}}}),ya={class:"w-640px px-40px py-24px"},ka={class:"flex-center mb-20px"},Sa={class:"min-w-32px"},Pa={class:"ml-4px text-21px"},$a={class:"text-error"},Ua={class:"bt-link",href:"https://www.aapanel.com/forum/d/167-common-problems-after-opening-the-panel-certificate",target:"_blank"},Ia={class:"flex"},La={class:"form-label"},Aa={class:"w-280px"},ja={class:"flex mt-16px"},Ea={class:"form-label"},Ra={class:"w-280px"},qa={class:"flex mt-16px"},Ba={class:"form-label"},Ta={class:"w-280px"},Ma={class:"flex mt-16px"},za={class:"form-label"},Da={class:"w-280px"},Oa={class:"flex justify-between mt-24px"},Ha={class:"bt-link",href:"https://www.aapanel.com/forum/d/167-common-problems-after-opening-the-panel-certificate",target:"_blank"},Na=J(p({__name:"open",setup(e,{expose:a}){const{t:t}=c(),{safeConfig:l}=ra(),n=L("riskRef"),s=u(1),i=u(""),r=u(""),d=u(""),p=[{label:t("Config.Safe.index_30"),value:1},{label:"Let's Encrypt",value:2},{label:t("Config.Safe.index_31"),value:3}],f=async()=>{const{message:e}=await me();z(e)&&(s.value=e.cert_type?Number(e.cert_type):1,i.value=e.email||"")},m=async()=>{const{message:e}=await _e();z(e)&&(r.value=e.privateKey||"",d.value=e.certPem||"")};return(async()=>{const e=F.loading(t("Config.Safe.index_32"));try{await Promise.all([f(),m()])}finally{e.close()}})(),a({onConfirm:async()=>{var e;if(await(null==(e=n.value)?void 0:e.validate()),2===s.value&&""===i.value.trim())return F.error(t("Config.Safe.index_33")),!1;if(2===s.value&&!de(i.value))return F.error(t("Config.Safe.index_34")),!1;if(3===s.value&&(""===r.value.trim()||""===d.value.trim()))return F.error(t("Config.Safe.index_35")),!1;const a=F.loading(t("Config.Safe.index_36"));try{3===s.value&&await pe({privateKey:r.value,certPem:d.value}),await ce((()=>{const e=2===s.value?{email:i.value}:{};return{cert_type:s.value,...e}})(),!1),await ue(),setTimeout(()=>{if(fe){const e="http:"===location.protocol?"https":"http";window.location.href="".concat(e,"://").concat(window.location.host).concat(l.value.adminPath)}},1500)}finally{a.close()}return!1}}),(e,a)=>{const t=Q,l=E("i18n-t"),u=Ie,c=Ce,f=o;return _(),P("div",ya,[b("div",ka,[b("div",Sa,[x(t,{name:"scan-success",size:"32"})]),b("span",Pa,C(e.$t("Config.Safe.index_18")),1)]),x(Fe,{class:"mb-20px"},{default:v(()=>[b("li",$a,C(e.$t("Config.Safe.index_19")),1),b("li",null,C(e.$t("Config.Safe.index_20")),1),x(l,{tag:"li",scope:"global",keypath:"Config.Safe.index_21"},{link_:v(()=>[b("a",Ua,C(e.$t("Config.Safe.index_22")),1)]),_:1})]),_:1}),b("div",Ia,[b("span",La,C(e.$t("Config.Safe.index_24")),1),b("div",Aa,[x(u,{value:g(s),"onUpdate:value":a[0]||(a[0]=e=>j(s)?s.value=e:null),options:p},null,8,["value"])])]),w(b("div",ja,[b("span",Ea,C(e.$t("Config.Safe.index_25")),1),b("div",Ra,[x(c,{value:g(i),"onUpdate:value":a[1]||(a[1]=e=>j(i)?i.value=e:null),placeholder:e.$t("Config.Safe.index_26")},null,8,["value","placeholder"])])],512),[[y,2===g(s)]]),w(b("div",qa,[b("span",Ba,C(e.$t("Config.Safe.index_27")),1),b("div",Ta,[x(f,{value:g(r),"onUpdate:value":a[2]||(a[2]=e=>j(r)?r.value=e:null),rows:4,placeholder:""},null,8,["value"])])],512),[[y,3===g(s)]]),w(b("div",Ma,[b("span",za,C(e.$t("Config.Safe.index_28")),1),b("div",Da,[x(f,{value:g(d),"onUpdate:value":a[3]||(a[3]=e=>j(d)?d.value=e:null),rows:4,placeholder:""},null,8,["value"])])],512),[[y,3===g(s)]]),b("div",Oa,[x(Ke,{ref_key:"riskRef",ref:n},{default:v(()=>[h(C(e.$t("Config.Safe.index_29")),1)]),_:1},512),b("a",Ha,C(e.$t("Config.Safe.index_167")),1)])])}}}),[["__scopeId","data-v-d5782944"]]),Va={class:"flex gap-20px mt-16px"},Ka={class:"flex-1"},Wa={class:"mb-8px"},Fa={class:"flex-1"},Za={class:"mb-8px"},Ga={class:"mt-10px"},Ja={class:"bt-link",href:"http://www.bt.cn/bbs/thread-704-1-1.html",target:"_blank"},Qa=p({__name:"custom",setup(t){const{loading:l,setLoading:n}=e(),s=u(""),i=u(""),r=f({dns:[""],issuer:"--",notBefore:"--",notAfter:"--",endtime:0}),d=R(()=>r.endtime<=0),p=async()=>{try{n(!0);const{message:e}=await _e();z(e)&&(s.value=e.privateKey||"",i.value=e.certPem||"",r.dns=e.info.dns||[],r.issuer=e.info.issuer||"",r.notBefore=e.info.notBefore||"",r.notAfter=e.info.notAfter||"",r.endtime=e.info.endtime||0)}finally{n(!1)}};p();const c=async()=>{await pe({privateKey:s.value,certPem:i.value},!0),p()};return(e,t)=>{const n=Le,u=o,p=ye,f=a,w=K;return _(),m(w,{show:g(l)},{default:v(()=>[g(i)?(_(),m(n,{key:0,type:g(d)?"error":"success","show-icon":!1},{default:v(()=>[b("div",{class:B(["flex flex-wrap gap-x-24px py-2px text-12px",g(d)?"text-error":"text-primary"])},[b("div",null,[h(C(e.$t("Config.Safe.index_37")),1),b("b",null,C(g(r).dns.join(",")||"--"),1)]),b("div",null,[h(C(e.$t("Config.Safe.index_38")),1),b("b",null,C(g(r).issuer),1)]),b("div",null,[h(C(e.$t("Config.Safe.index_39")),1),b("b",null,C(g(d)?"已过期":g(r).notAfter),1)])],2)]),_:1},8,["type"])):q("",!0),b("div",Va,[b("div",Ka,[b("div",Wa,C(e.$t("Config.Safe.index_27")),1),x(u,{value:g(s),"onUpdate:value":t[0]||(t[0]=e=>j(s)?s.value=e:null),rows:14,placeholder:""},null,8,["value"])]),b("div",Fa,[b("div",Za,C(e.$t("Config.Safe.index_28")),1),x(u,{value:g(i),"onUpdate:value":t[1]||(t[1]=e=>j(i)?i.value=e:null),rows:14,placeholder:""},null,8,["value"])])]),b("div",Ga,[x(p,{type:"primary",onClick:c},{default:v(()=>[h(C(e.$t("Public.Btn.Save")),1)]),_:1})]),x(f,{class:"mt-12px"},{default:v(()=>[b("li",null,[h(C(e.$t("Config.Safe.index_40"))+" ",1),b("a",Ja," ["+C(e.$t("Public.Btn.Help"))+"] ",1)]),b("li",null,C(e.$t("Config.Safe.index_42")),1),b("li",null,C(e.$t("Config.Safe.index_43")),1)]),_:1})]),_:1},8,["show"])}}}),Xa={class:"h-400px"},Ya={class:"flex items-center"},et={class:"min-w-18px mr-8px"},at={class:"leading-18px"},tt={class:"w-400px mr-10px"},lt={class:"text-primary font-bold"},nt={class:"text-warning font-bold"},st={class:"text-error"},it=p({__name:"lets",setup(e){const{t:t}=c(),l=u(null),n=f({domain:"",hash:"",auth_type:"http",support:[]}),o={domain:{required:!0,trigger:"blur",message:t("Config.Safe.Ssl.index_10")}},r=u(!1),d=u(!1),p=u(!1),w=()=>{U()},y=()=>{p.value=!1,d.value=!1,n.hash="",n.support=[]},k=()=>{window.open("/ssl_domain/domain")},S=async()=>{var e;await(null==(e=l.value)?void 0:e.validate());const{message:a}=await qe({domain:T(n)});z(a)&&(a.task_id?$(a.task_id):F.success(a.result))},$=e=>{s({hideClose:!0,data:{task_id:e},component:Be})},U=async()=>{if(n.domain)try{r.value=!0;const{message:e}=await xe({domain:n.domain});z(e)&&(d.value=!0,p.value=!!e.hash,n.hash=e.hash,n.support=e.support)}finally{r.value=!1}};return(async()=>{const{message:e}=await Te();z(e)&&(n.domain=e.domain)})(),(e,t)=>{const s=Q,u=Le,c=Ae,f=ve,$=ke,I=be,L=Ce,A=ye,j=je,E=i,R=a;return _(),P("div",Xa,[x(u,{"show-icon":!1,class:"mb-20px"},{default:v(()=>[b("div",Ya,[b("div",et,[x(s,{name:"base-info",size:17})]),b("span",at,C(e.$t("Config.Safe.Ssl.index_1")),1)])]),_:1}),x(E,{ref_key:"formRef",ref:l,model:g(n),rules:o,"label-width":"140"},{default:v(()=>[x(I,{label:e.$t("Config.Safe.Ssl.index_2")},{default:v(()=>[x($,{value:g(n).auth_type,"onUpdate:value":t[0]||(t[0]=e=>g(n).auth_type=e)},{default:v(()=>[x(f,null,{default:v(()=>[x(c,{value:"http"},{default:v(()=>[h(C(e.$t("SSL.SiteSSL.index_17")),1)]),_:1}),x(c,{value:"dns"},{default:v(()=>[h(C(e.$t("SSL.index_12")),1)]),_:1})]),_:1})]),_:1},8,["value"])]),_:1},8,["label"]),"dns"===g(n).auth_type?(_(),m(I,{key:0,label:e.$t("Config.Safe.Ssl.index_4"),prop:"domain"},{default:v(()=>[b("div",tt,[x(L,{value:g(n).domain,"onUpdate:value":t[1]||(t[1]=e=>g(n).domain=e),loading:g(r),"input-props":{spellcheck:!1},placeholder:e.$t("Config.Safe.Ssl.index_5"),clearable:"",onBlur:w,onInput:y},null,8,["value","loading","placeholder"])]),x(A,{onClick:U},{default:v(()=>[h(C(e.$t("Config.Safe.Ssl.index_12")),1)]),_:1})]),_:1},8,["label"])):q("",!0),"http"===g(n).auth_type?(_(),m(I,{key:1,label:e.$t("Config.Safe.Ssl.index_4")},{default:v(()=>[x(L,{class:"w-400px!",value:g(n).domain,"onUpdate:value":t[2]||(t[2]=e=>g(n).domain=e),placeholder:e.$t("Config.Safe.Ssl.index_5")},null,8,["value","placeholder"])]),_:1},8,["label"])):q("",!0),g(d)&&"dns"===g(n).auth_type?(_(),m(I,{key:2,label:" "},{default:v(()=>[g(p)?(_(),m(u,{key:0,type:"success",class:"min-w-500px"},{default:v(()=>[b("span",lt,C(e.$t("Config.Safe.Ssl.index_6",[g(n).domain])),1)]),_:1})):(_(),m(u,{key:1,type:"warning",class:"min-w-500px"},{default:v(()=>[x(j,{class:"items-center"},{default:v(()=>[b("span",nt,C(e.$t("Config.Safe.Ssl.index_7",[g(n).domain])),1),x(A,{type:"primary",ghost:"",size:"small",onClick:k},{default:v(()=>[h(C(e.$t("Config.Safe.Ssl.index_8")),1)]),_:1})]),_:1})]),_:1}))]),_:1})):q("",!0),x(I,{label:" "},{default:v(()=>[x(A,{type:"primary",disabled:!g(p)&&"dns"===g(n).auth_type,onClick:S},{default:v(()=>[h(C(e.$t("Config.Safe.Ssl.index_9")),1)]),_:1},8,["disabled"])]),_:1})]),_:1},8,["model"]),"http"===g(n).auth_type?(_(),m(R,{key:0},{default:v(()=>[b("li",st,C(e.$t("SSL.SiteSSL.index_15")),1),b("li",null,C(e.$t("Site.Cert.index_21")),1),b("li",null,C(e.$t("Site.Cert.index_23")),1),b("li",null,C(e.$t("Site.Cert.index_24")),1)]),_:1})):q("",!0)])}}}),ot={class:"w-740px p-16px"},rt=p({__name:"index",setup(e){const a=u("custom"),t=[{key:"custom",label:"Custom SSL",component:Qa},{key:"lets",label:"Lets Encrypt",component:it}];return(e,l)=>{const n=Re;return _(),P("div",ot,[x(n,{value:g(a),"onUpdate:value":l[0]||(l[0]=e=>j(a)?a.value=e:null),options:t},null,8,["value"])])}}}),ut={class:"w-420px px-20px pt-28px pb-8px"},dt={class:"w-210px"},pt={class:"w-210px"},ct={class:"w-210px"},ft=p({__name:"set",setup(e,{expose:a}){const{t:t}=c(),{panelConfig:l}=ze(),n=L("formRef"),s=f({username1:l.value.username,username2:"",userpassword:""}),o={username1:{trigger:["blur","input"],validator:()=>""!==s.username1.trim()||new Error(t("Config.Panel.index_60"))},username2:{trigger:["blur","input"],validator:()=>""===s.username2.trim()?new Error(t("Config.Panel.index_61")):s.username2===s.username1||new Error(t("Config.Panel.index_62"))},userpassword:{trigger:["blur","input"],required:!0,message:t("Config.Panel.index_67")}};return a({onConfirm:async()=>{var e;await(null==(e=n.value)?void 0:e.validate()),await ge({username1:te(s.username1),username2:te(s.username2),userpassword:te(s.userpassword)}),le("/login?dologin=True",1500)}}),(e,a)=>{const t=Ce,l=be,r=i;return _(),P("div",ut,[x(r,{ref_key:"formRef",ref:n,model:g(s),rules:o,"require-mark-placement":"left"},{default:v(()=>[x(l,{label:e.$t("Config.Panel.index_58"),path:"username1","show-require-mark":!0},{default:v(()=>[b("div",dt,[x(t,{value:g(s).username1,"onUpdate:value":a[0]||(a[0]=e=>g(s).username1=e),placeholder:""},null,8,["value"])])]),_:1},8,["label"]),x(l,{label:e.$t("Config.Panel.index_59"),path:"username2","show-require-mark":!0},{default:v(()=>[b("div",pt,[x(t,{value:g(s).username2,"onUpdate:value":a[1]||(a[1]=e=>g(s).username2=e),placeholder:""},null,8,["value"])])]),_:1},8,["label"]),x(l,{label:e.$t("Config.Panel.index_66"),path:"userpassword","show-require-mark":!0},{default:v(()=>[b("div",ct,[x(t,{value:g(s).userpassword,"onUpdate:value":a[2]||(a[2]=e=>g(s).userpassword=e),placeholder:""},null,8,["value"])])]),_:1},8,["label"])]),_:1},8,["model"])])}}}),mt=Object.assign({"./api/set.vue":Ve,"./debug-mode/confirm.vue":ea,"./menu-hide/set.vue":ta,"./password/set.vue":oa,"./port/set.vue":ma,"./safe-entry/set.vue":xa,"./ssl/close.vue":Ca,"./ssl/open.vue":Na,"./ssl/set/custom.vue":Qa,"./ssl/set/index.vue":rt,"./ssl/set/lets.vue":it,"./username/set.vue":ft}),{t:_t}=we.global,vt=()=>{s({title:_t("Config.Panel.index_57"),footer:!0,component:mt["./username/set.vue"]})},xt=()=>{s({title:_t("Config.Panel.index_65"),footer:!0,component:mt["./password/set.vue"]})},gt=e=>{s({title:_t("Config.Panel.index_79"),component:mt["./menu-hide/set.vue"],data:{menuList:e}})},wt=()=>{s({title:_t("Config.Safe.index_99"),footer:!0,component:mt["./port/set.vue"]})},bt=()=>{s({title:_t("Config.Safe.index_107"),footer:!0,component:mt["./safe-entry/set.vue"]})},ht=()=>{s({title:_t("Config.Safe.index_13"),component:mt["./ssl/set/index.vue"]})},Ct=()=>{s({title:_t("Config.Safe.index_12"),footer:!0,confirmType:"error",component:mt["./ssl/close.vue"]})},yt=()=>{s({title:_t("Config.Safe.index_11"),footer:!0,component:mt["./ssl/open.vue"]})},kt=()=>{s({title:_t("Config.Panel.index_11"),footer:!0,component:mt["./debug-mode/confirm.vue"]})},St=()=>{s({title:_t("Config.Panel.index_25"),component:mt["./api/set.vue"]})};export{Fe as C,Qe as _,xt as a,ra as b,ua as c,wt as d,bt as e,yt as f,Ct as g,ht as h,Me as i,gt as j,kt as k,St as l,Ke as m,vt as o,ze as u};
