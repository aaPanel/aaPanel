System.register(["./index-legacy107.js?v=1764830988434","./page_layout-legacy.js?v=1764830988434","./ssl-legacy.js?v=1764830988434","./cert-legacy.js?v=1764830988434","./index-legacy83.js?v=1764830988434","./public-legacy.js?v=1764830988434","./index-legacy97.js?v=1764830988434","./ssl-lets-progress-legacy.js?v=1764830988434","./naive-legacy.js?v=1764830988434","./vue-legacy.js?v=1764830988434","./index-legacy133.js?v=1764830988434","./index-legacy.js?v=1764830988434","./index.vue_vue_type_script_setup_true_lang-legacy5.js?v=1764830988434","./utils-legacy3.js?v=1764830988434","./index-legacy218.js?v=1764830988434","./index.vue_vue_type_script_setup_true_lang-legacy.js?v=1764830988434","./site-legacy.js?v=1764830988434","./common-legacy.js?v=1764830988434","./__commonjsHelpers__-legacy.js?v=1764830988434","./index.vue_vue_type_script_setup_true_lang-legacy7.js?v=1764830988434","./index.vue_vue_type_script_setup_true_lang-legacy9.js?v=1764830988434","./index.vue_vue_type_script_setup_true_lang-legacy8.js?v=1764830988434","./site-legacy4.js?v=1764830988434","./index-legacy246.js?v=1764830988434","./index.vue_vue_type_script_setup_true_lang-legacy10.js?v=1764830988434","./index-legacy96.js?v=1764830988434","./index-legacy98.js?v=1764830988434","./theme-monokai-legacy.js?v=1764830988434","./file-legacy.js?v=1764830988434","./index-legacy102.js?v=1764830988434","./soft-legacy.js?v=1764830988434","./useOperate-legacy.js?v=1764830988434","./useModal-legacy2.js?v=1764830988434","./index.vue_vue_type_script_setup_true_lang-legacy6.js?v=1764830988434","./paypal-js-legacy.js?v=1764830988434"],function(e,t){"use strict";var a,n,l,s,i,d,o,u,r,c,_,p,S,m,y,h,v,f,x,g,w,b,C,L,k,$,j,P,B,E,D,R,N,U,O,z,A,I,M,T,F,J,H,G,q,W,X,V,Y,K,Q,Z,ee,te,ae,ne,le,se,ie,de,oe,ue,re,ce,_e,pe,Se,me,ye,he,ve,fe,xe,ge,we,be,Ce,Le,ke,$e,je,Pe,Be,Ee,De,Re,Ne,Ue,Oe,ze,Ae,Ie,Me,Te;return{setters:[e=>{a=e._},e=>{n=e.dx,l=e.az,s=e.o,i=e.T,d=e.m,o=e.dB,u=e.d,r=e.dC,c=e.dD,_=e.p,p=e._,S=e.u,m=e.c_,y=e.c$,h=e.d0,v=e.a,f=e.bm,x=e.dF,g=e.dG,w=e.x,b=e.am,C=e.d3},e=>{L=e.c,k=e.s,$=e.a,j=e.g,P=e.b},e=>{B=e.C},e=>{E=e.u},e=>{D=e._,R=e.a,N=e.u,U=e.e,O=e.c,z=e.f,A=e.h,I=e.l,M=e.d,T=e.V,F=e.W,J=e.X,H=e.p},e=>{G=e._},e=>{q=e.a},e=>{W=e.dk,X=e.dY,V=e.dc,Y=e.dj,K=e.da,Q=e.aC,Z=e.dR,ee=e.dT,te=e.dU,ae=e._,ne=e.eg,le=e.G,se=e.d5},e=>{ie=e.k,de=e.P,oe=e.r,ue=e.c,re=e.y,ce=e.a2,_e=e.V,pe=e.a3,Se=e.an,me=e.W,ye=e.U,he=e.S,ve=e.a4,fe=e.j,xe=e.R,ge=e.ak,we=e.F,be=e.O,Ce=e.H,Le=e.a0,ke=e.e,$e=e._,je=e.am,Pe=e.w,Be=e.o,Ee=e.l,De=e.v,Re=e.m,Ne=e.x},e=>{Ue=e._},e=>{Oe=e._},e=>{ze=e._},e=>{Ae=e.u},e=>{Ie=e.A},e=>{Me=e._},e=>{Te=e.a3},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){var Fe=document.createElement("style");Fe.textContent=".n-alert[data-v-d003ad66]{--n-font-size: 12px}.cert-info[data-v-d003ad66]{display:flex;align-items:center;height:24px}.cert-info .cert-label[data-v-d003ad66]{color:var(--site-config-ssl-label);font-weight:700}.cert-info .cert-value[data-v-d003ad66]{flex:1;width:0;margin-left:4px}.business-top-tips[data-v-da25cdef]{background:var(--site-config-business-tips)}.n-alert[data-v-bc2b39ec]{--n-font-size: 12px}.cert-info[data-v-bc2b39ec]{display:flex;align-items:center;height:24px}.cert-info .cert-label[data-v-bc2b39ec]{color:var(--site-config-ssl-label);font-weight:700}.cert-info .cert-value[data-v-bc2b39ec]{flex:1;width:0;margin-left:4px}\n/*$vite$:1*/",document.head.appendChild(Fe);const Je={class:"cert-info"},He={class:"cert-label"},Ge={class:"cert-value"},qe={class:"cert-info"},We={class:"cert-label"},Xe={class:"cert-value"},Ve={class:"cert-info"},Ye={class:"cert-label"},Ke={class:"cert-value"},Qe={class:"cert-info"},Ze={class:"cert-label"},et={class:"cert-value"},tt={key:0,class:"text-primary"},at={key:1,class:"text-error"},nt={class:"cert-info"},lt={class:"cert-label"},st={class:"cert-value"},it={class:"w-48%"},dt={class:"mb-8px"},ot={class:"w-48%"},ut={class:"mb-8px"},rt=ie({__name:"index",props:{info:{default:null},isRenew:{type:Boolean,default:!1},loading:{type:Boolean,default:!1}},emits:["refresh"],setup(e,{expose:t,emit:a}){const _=e,p=a,{t:S}=de(),{data:m}=E(),y=n(),h=oe(-1),v=oe(!1),f=oe(!1),x=oe(""),g=oe("");let w="";const b=oe("");let C="";const j=oe({issuer:"",notAfter:"",notBefore:"",dns:[],subject:"",endtime:0}),P=ue(()=>h.value===B.LetsEncryptDeploy?S("Site.Cert.index_65"):h.value===B.BusinessDeploy?S("Site.Cert.index_64"):h.value===B.TestDeploy?S("Site.Cert.index_38"):S("Site.Cert.index_37")),U=ue(()=>!!b.value),O=ue(()=>_.isRenew||h.value===B.LetsEncryptDeploy),z=ue(()=>!1),A=ue(()=>v.value),I=async e=>{e?(await k({siteName:m.name}),p("refresh")):R({title:S("Site.Cert.index_12"),content:S("Site.Cert.index_13"),onConfirm:async()=>{await L({siteName:m.name}),p("refresh")},onPublicClose:()=>{f.value=!0}})},M=()=>{""!==g.value.trim()&&""!==b.value.trim()?g.value!==w&&w||b.value!==C&&C?R({title:S("Site.Cert.index_10"),content:S("Site.Cert.index_11"),onConfirm:async()=>{await T()}}):T():d.error(S("Site.Cert.index_9"))},T=async()=>{const{message:e}=await o({key:g.value,cert:b.value});u(e)&&e.hash&&(await r({hash:e.hash,domains:JSON.stringify([m.name]),append:1}),d.success(S("SSL.index_32"))),H()},F=async()=>{const{message:e}=await c({hash:_.info?.hash||""});u(e)&&N({hideClose:!0,data:{isJump:!1,task_id:e.task_id,onFinish:()=>{p("refresh")}},component:q})},J=async()=>{await $({updateOf:1,siteName:m.name}),H()},H=()=>{p("refresh"),y.setRefresh(!0)};return re(()=>{const{info:e}=_;e&&(h.value=e.type,v.value=e.status,f.value=e.httpTohttps,g.value=e.key||"",w=e.key||"",b.value=e.csr||"",C=e.csr||"",j.value=e.cert_data,x.value=e.index)}),t({init:p("refresh")}),(e,t)=>{const a=s,n=X,d=V,o=Y,u=l,r=W,c=G,_=K,p=Q,S=D,m=i;return _e(),ce(m,{show:e.loading},{default:pe(()=>[ye(U)?(_e(),ce(r,{key:0,class:"mb-16px",type:"success","show-icon":!1},{default:pe(()=>[me(u,{"x-gap":12,cols:"15"},{default:pe(()=>[me(n,{span:"8"},{default:pe(()=>[he("div",Je,[he("div",He,ve(e.$t("Site.Cert.index_44"))+ve(e.$t("Public.Punctuation.Colon")),1),he("div",Ge,[me(a,null,{default:pe(()=>[fe(ve(ye(P)),1)]),_:1})])])]),_:1}),me(n,{span:"7"},{default:pe(()=>[he("div",qe,[he("div",We,ve(e.$t("Site.Cert.index_45"))+ve(e.$t("Public.Punctuation.Colon")),1),he("div",Xe,[me(d,null,{default:pe(()=>[fe(ve(ye(j).issuer||"other"),1)]),_:1})])])]),_:1}),me(n,{span:"8"},{default:pe(()=>[he("div",Ve,[he("div",Ye,ve(e.$t("Site.Cert.index_46"))+ve(e.$t("Public.Punctuation.Colon")),1),he("div",Ke,[me(d,null,{default:pe(()=>[fe(ve(ye(j).dns.join(e.$t("Public.Punctuation.Comma"))),1)]),_:1})])])]),_:1}),me(n,{span:"7"},{default:pe(()=>[he("div",Qe,[he("div",Ze,ve(e.$t("Site.Cert.index_47"))+ve(e.$t("Public.Punctuation.Colon")),1),he("div",et,[ye(j).endtime>0?(_e(),xe("span",tt,ve(e.$t("Site.Cert.index_48",{date:ye(j).notAfter,days:ye(j).endtime})),1)):(_e(),xe("span",at,ve(e.$t("Site.Cert.index_47")),1))])])]),_:1}),me(n,{span:"8"},{default:pe(()=>[he("div",nt,[he("div",lt,ve(e.$t("Site.Cert.index_49"))+ve(e.$t("Public.Punctuation.Colon")),1),he("div",st,[me(o,{value:ye(f),"onUpdate:value":[t[0]||(t[0]=e=>ge(f)?f.value=e:null),I],size:"small"},null,8,["value"])])])]),_:1})]),_:1})]),_:1})):Se("",!0),me(_,{class:"mb-16px",size:10,justify:"space-between"},{default:pe(()=>[he("div",it,[he("div",dt,ve(e.$t("Site.Cert.index_50")),1),me(c,{value:ye(g),"onUpdate:value":t[1]||(t[1]=e=>ge(g)?g.value=e:null),rows:10},null,8,["value"])]),he("div",ot,[he("div",ut,ve(e.$t("Site.Cert.index_51")),1),me(c,{value:ye(b),"onUpdate:value":t[2]||(t[2]=e=>ge(b)?b.value=e:null),rows:10},null,8,["value"])])]),_:1}),me(_,{class:"mb-12px"},{default:pe(()=>[me(p,{type:"primary",onClick:M},{default:pe(()=>[fe(ve(ye(v)?e.$t("Public.Btn.Save"):e.$t("Site.Cert.index_52")),1)]),_:1}),ye(O)?(_e(),ce(p,{key:0,type:"primary",onClick:F},{default:pe(()=>[fe(ve(e.$t("Site.Cert.index_53")),1)]),_:1})):Se("",!0),ye(z)?(_e(),ce(p,{key:1},{default:pe(()=>[fe(ve(e.$t("Site.Cert.index_54")),1)]),_:1})):Se("",!0),ye(A)?(_e(),ce(p,{key:2,onClick:J},{default:pe(()=>[fe(ve(e.$t("Site.Cert.index_55")),1)]),_:1})):Se("",!0)]),_:1}),me(S,null,{default:pe(()=>[he("li",null,ve(e.$t("Site.Cert.index_33")),1),he("li",null,ve(e.$t("Site.Cert.index_34")),1),he("li",null,ve(e.$t("Site.Cert.index_35")),1),he("li",null,ve(e.$t("Site.Cert.index_36")),1)]),_:1})]),_:1},8,["show"])}}}),ct=_(rt,[["__scopeId","data-v-d003ad66"]]),_t={class:"business-top-tips flex flex-wrap border-#d6e9c6 border-1px rounded-5px p-12px"},pt={class:"text-#3c763d w-100%"},St=_(ie({__name:"top-tips",setup(e){const{t:t}=de(),a=[t("SSL.SiteSSL.index_5"),t("SSL.SiteSSL.index_6"),t("SSL.SiteSSL.index_7"),t("SSL.SiteSSL.index_8"),t("SSL.SiteSSL.index_9"),t("SSL.SiteSSL.index_10"),t("SSL.SiteSSL.index_11")];return(e,t)=>{const n=p,l=K;return _e(),xe("div",_t,[(_e(),xe(we,null,be(a,(e,t)=>me(l,{size:5,key:e,class:Ce(["flex-nowrap! leading-20px",{"w-33%":t!==a.length-1}])},{default:pe(()=>[me(n,{name:"base-tick",size:16,color:"#ff8d00"}),he("span",pt,ve(e),1)]),_:2},1032,["class"])),64))])}}}),[["__scopeId","data-v-da25cdef"]]),mt={class:"my-10px"},yt=ie({__name:"table",setup(e){const a=$e(()=>v(()=>t.import("./index-legacy213.js?v=1764830988434"),void 0)),l=$e(()=>v(()=>t.import("./index-legacy214.js?v=1764830988434"),void 0)),s=$e(()=>v(()=>t.import("./domain-verification-legacy.js?v=1764830988434"),void 0)),i=S(),{userInfo:d}=Le(i),o=n(),{t:r}=de(),c=ke({p:1,limit:9999}),_=U(r("SSL.Business.index_41"),{onRefresh:(e,t)=>{x.data.request=!0,x.data.uc_id=t,x.data.verify=e,x.show=!0,C()}}),p=U(r("SSL.index_44")),f=U(r("SSL.index_49"),{onRefresh:()=>{C(),o.setRefresh(!0)}}),x=U(r("SSL.Business.index_42"),{onRefresh:()=>{C()}}),{table:g,columns:w}=O([{key:"verify_domains",title:r("Layout.Sider.mail_3"),render:e=>me("span",{innerHTML:e.verify_domains&&e.verify_domains.length>0?e.verify_domains.join("<br/>"):"--"},null)},{key:"title",title:r("Site.Cert.index_44"),render:e=>e.order_info.title,ellipsis:{tooltip:!0}},Ae({title:r("SSL.index_54")}),{key:"order_status",title:r("SSL.Business.index_43"),render:e=>{const t=e.order_info;return t.certId||t.domains.length?!t.certId&&t.domains.length?me("span",{class:"color-warning"},[fe(" "),r("SSL.Business.index_45"),fe(" ")]):"PENDING"===t.order_status&&1===t.status?me("span",{class:"color-warning"},[fe(" "),r("SSL.Business.index_46"),fe(" ")]):"COMPLETE"===t.order_status&&1===t.status?me("span",{class:"color-#20a53a"},[fe(" "),r("SSL.Business.index_47"),fe(" ")]):"CANCELLED"===t.order_status&&1===t.status||-1===t.status?me("span",{class:"color-warning"},[fe(" "),r("SSL.Business.index_48"),fe(" ")]):"FAILED"===t.order_status&&1===t.status?me("span",{class:"color-error"},[fe(" "),r("SSL.Business.index_49"),fe(" ")]):"EXPIRED"===t.order_status&&1===t.status?me("span",{class:"color-warning"},[fe(" "),r("SSL.Business.index_50"),fe(" ")]):1!==t.status||["PENDING","COMPLETE","CANCELLED","FAILED","EXPIRED"].includes(t.order_status)?0===t.status?me("span",{class:"color-warning"},[fe(" "),r("SSL.Business.index_52"),fe(" ")]):void 0:me("span",{class:"color-warning"},[fe(" "),r("SSL.Business.index_51"),fe(" ")]):me("span",{class:"color-warning cursor-pointer",onClick:()=>b(e)},[" ",r("SSL.Business.index_44")," "])}},z({width:140,options:e=>[{show:!e.order_info.certId&&!e.order_info.domains.length,label:r("SSL.Business.index_53"),onClick:()=>{b(e)}},{show:"PENDING"===e.order_info.order_status&&1===e.order_info.status,label:r("SSL.Business.index_54"),onClick:async()=>{const{message:t}=await m({uc_id:e.order_info.uc_id});u(t)&&(x.data.uc_id=e.order_info.uc_id,x.data.verify=t.data,x.data.paths=t.paths,x.show=!0)}},{show:"COMPLETE"===e.order_info.order_status&&1===e.order_info.status,label:r("SSL.index_58"),onClick:async()=>{f.data.row=e,f.show=!0}},{show:"COMPLETE"===e.order_info.order_status&&1===e.order_info.status,label:r("Ftp.Label.index_11"),onClick:async()=>{const t=window.location.origin+"/v2/business_ssl?action=download_cert&uc_id="+e.order_info.uc_id;window.open(t)}},{show:!1,label:r("Public.Btn.Del"),onClick:()=>{R({title:r("SSL.index_59"),content:r("SSL.index_60"),onConfirm:async()=>{await y({hash:e.hash}),C()}})}}]})]),b=e=>{_.data.row=e,_.show=!0},C=async()=>{try{g.loading=!0;const{message:e}=await h(c);u(e)&&(g.data=e.data,g.total=e.total)}finally{g.loading=!1}};return d.value.status&&C(),(e,t)=>{const n=Q,i=A,o=ze,u=Oe,c=Ue;return _e(),xe("div",mt,[me(c,{install:ye(d).status},{desc:pe(()=>[t[5]||(t[5]=he("span",{class:"mr-10px"},"Business certificates require login panel to start using them",-1)),me(n,{type:"primary",onClick:ye(I)},{default:pe(()=>[fe(ve(e.$t("Login.index_3")),1)]),_:1},8,["onClick"])]),default:pe(()=>[me(o,null,{toolsLeft:pe(()=>[me(n,{type:"primary",onClick:t[0]||(t[0]=e=>ye(p).show=!0)},{default:pe(()=>[fe(ve(ye(r)("SSL.index_44")),1)]),_:1})]),table:pe(()=>[me(i,{loading:ye(g).loading,data:ye(g).data,columns:ye(w),"max-height":220},null,8,["loading","data","columns"])]),_:1}),me(u,{show:ye(p).show,"onUpdate:show":t[1]||(t[1]=e=>ye(p).show=e),title:ye(p).title,data:ye(p).data,"min-height":250,component:Ie},null,8,["show","title","data"]),me(u,{show:ye(_).show,"onUpdate:show":t[2]||(t[2]=e=>ye(_).show=e),title:ye(_).title,data:ye(_).data,width:650,"min-height":450,component:ye(a)},null,8,["show","title","data","component"]),me(u,{show:ye(f).show,"onUpdate:show":t[3]||(t[3]=e=>ye(f).show=e),title:ye(f).title,data:ye(f).data,width:720,height:530,component:ye(l)},null,8,["show","title","data","component"]),me(u,{show:ye(x).show,"onUpdate:show":t[4]||(t[4]=e=>ye(x).show=e),title:ye(x).title,data:ye(x).data,width:650,"min-height":450,component:ye(s)},null,8,["show","title","data","component"])]),_:1},8,["install"])])}}}),ht={class:"text-error"},vt=_({},[["render",function(e,t){const a=s,n=D;return _e(),ce(n,null,{default:pe(()=>[he("li",ht,ve(e.$t("SSL.SiteSSL.index_1")),1),he("li",null,ve(e.$t("SSL.SiteSSL.index_2")),1),he("li",null,ve(e.$t("SSL.SiteSSL.index_3")),1),he("li",null,[fe(ve(e.$t("SSL.SiteSSL.index_4"))+" ",1),me(a,{href:"https://www.aapanel.com/docs/Function/BusinessCertificate.html",target:"_blank"},{default:pe(()=>[fe(ve(e.$t("SSL.Business.index_20")),1)]),_:1})])]),_:1})}]]),ft=ie({__name:"index",setup:e=>(e,t)=>(_e(),xe("div",null,[me(St),me(yt),me(vt)]))}),xt={class:"cert-info"},gt={class:"cert-label"},wt={class:"cert-value"},bt={class:"cert-info"},Ct={class:"cert-label"},Lt={class:"cert-value"},kt={class:"cert-info"},$t={class:"cert-label"},jt={class:"cert-value"},Pt={class:"cert-info"},Bt={class:"cert-label"},Et={class:"cert-value"},Dt={key:0,class:"text-primary"},Rt={key:1,class:"text-error"},Nt={class:"w-48%"},Ut={class:"mb-8px"},Ot={class:"w-48%"},zt={class:"mb-8px"},At=ie({__name:"cert",emits:["update"],setup(e,{emit:t}){const a=t,{t:s}=de(),{data:d}=E(),o=n(),r=oe(!1),_=oe(1),p=oe(""),S=oe(""),m=ke({hash:"",issuer:"",notAfter:"",notBefore:"",dns:[],subject:"",endtime:0}),y=async()=>{const{message:e}=await c({hash:m.hash});u(e)&&N({hideClose:!0,data:{isJump:!1,task_id:e.task_id,onFinish:()=>{x()}},component:q})},h=async()=>{await $({updateOf:1,siteName:d.name}),a("update"),o.setRefresh(!0)},{loading:v,setLoading:f}=M(),x=async()=>{try{f(!0);const{message:e}=await j({siteName:d.name});u(e)&&(r.value=e.status,m.hash=e.hash,m.issuer=e.cert_data.issuer,m.notAfter=e.cert_data.notAfter,m.notBefore=e.cert_data.notBefore,m.dns=e.cert_data.dns,m.subject=e.cert_data.subject,m.endtime=e.cert_data.endtime,p.value=e.key,S.value=e.csr,_.value=e.auto_renew)}finally{f(!1)}};return x(),(e,t)=>{const a=X,n=V,s=l,d=W,o=G,u=K,r=Q,c=D,f=i;return _e(),ce(f,{show:ye(v)},{default:pe(()=>[me(d,{class:"mb-16px",type:"success","show-icon":!1},{default:pe(()=>[me(s,{"x-gap":12,cols:"15"},{default:pe(()=>[ye(_)?(_e(),ce(a,{key:0,span:"16"},{default:pe(()=>[he("div",xt,[he("div",gt,ve(e.$t("SSL.SiteSSL.index_22"))+"：",1),he("div",wt,ve(e.$t("SSL.SiteSSL.index_23")),1)])]),_:1})):Se("",!0),me(a,{span:"7"},{default:pe(()=>[he("div",bt,[he("div",Ct,ve(e.$t("Site.Cert.index_45"))+"：",1),he("div",Lt,[me(n,null,{default:pe(()=>[fe(ve(ye(m).issuer),1)]),_:1})])])]),_:1}),me(a,{span:"8"},{default:pe(()=>[he("div",kt,[he("div",$t,ve(e.$t("Site.Cert.index_46"))+"：",1),he("div",jt,[me(n,null,{default:pe(()=>[fe(ve(ye(m).dns.join(e.$t("Public.Punctuation.Comma"))),1)]),_:1})])])]),_:1}),me(a,{span:"7"},{default:pe(()=>[he("div",Pt,[he("div",Bt,ve(e.$t("Site.Cert.index_47"))+ve(e.$t("Public.Punctuation.Colon")),1),he("div",Et,[ye(m).endtime>0?(_e(),xe("span",Dt,ve(e.$t("Site.Cert.index_48",{date:ye(m).notAfter,days:ye(m).endtime})),1)):(_e(),xe("span",Rt,ve(e.$t("Site.Cert.index_47")),1))])])]),_:1})]),_:1})]),_:1}),me(u,{class:"mb-16px",size:10,justify:"space-between"},{default:pe(()=>[he("div",Nt,[he("div",Ut,ve(e.$t("Site.Cert.index_50")),1),me(o,{readonly:"",value:ye(p),"onUpdate:value":t[0]||(t[0]=e=>ge(p)?p.value=e:null),rows:14},null,8,["value"])]),he("div",Ot,[he("div",zt,ve(e.$t("Site.Cert.index_51")),1),me(o,{readonly:"",value:ye(S),"onUpdate:value":t[1]||(t[1]=e=>ge(S)?S.value=e:null),rows:14},null,8,["value"])])]),_:1}),me(u,{class:"mb-12px"},{default:pe(()=>[me(r,{type:"primary",onClick:y},{default:pe(()=>[fe(ve(e.$t("Site.Cert.index_53")),1)]),_:1}),me(r,{onClick:h},{default:pe(()=>[fe(ve(e.$t("Site.Cert.index_55")),1)]),_:1})]),_:1}),me(c,null,{default:pe(()=>[he("li",null,ve(e.$t("SSL.SiteSSL.index_24")),1),he("li",null,ve(e.$t("SSL.SiteSSL.index_25")),1)]),_:1})]),_:1},8,["show"])}}}),It=_(At,[["__scopeId","data-v-bc2b39ec"]]),Mt={class:"flex items-center"},Tt={class:"leading-17px"},Ft={class:"w-full"},Jt={class:"w-full"},Ht={class:"text-error"},Gt=ie({__name:"apply",emits:["update"],setup(e,{emit:t}){const a=je(),{t:l}=de(),{data:s}=E(),o=n(),r=t,c=ke({auth_type:"http",dns_manual:0,auto_wildcard:0,domains:[],all:!1}),_={domains:{required:!0,trigger:"change",type:"array",message:l("SSL.SiteSSL.index_16")}},S=oe(null),m=oe([]),y=e=>m.value.find(t=>t.name===e)?.auto,h=()=>{a.push("/ssl_domain/domain")},v=ue(()=>c.domains.length>0&&c.domains.length<m.value.length);Pe(()=>c.domains,e=>{e.length===m.value.length?c.all=!0:e.length||(c.all=!1)}),Pe(()=>c.all,e=>{e?(c.domains=m.value.map(e=>e.name),S.value?.validate()):c.domains=[]}),Pe(()=>c.auth_type,e=>{"dns"===e?(c.domains=m.value.filter(e=>e.auto).map(e=>e.name),S.value?.validate()):c.domains=[]});const C=ue(()=>c.domains.filter(e=>!y(e))),L=async()=>{if(await(S.value?.validate()),"dns"===c.auth_type&&C.value.length&&!c.dns_manual)return void d.error({content:()=>Re("span",{innerHTML:`${C.value.join("<br/>")}${l("SSL.SiteSSL.index_14")}`})});let e={auth_type:c.dns_manual?"dns_manual":c.auth_type,auto_wildcard:c.auto_wildcard,domains:JSON.stringify(c.domains),site_id:c.dns_manual?s.id:void 0,deploy:c.dns_manual?0:1};if(c.dns_manual&&"dns"===c.auth_type){const{message:t}=await x({site_id:s.id,domains:JSON.stringify(c.domains)});if(u(t)&&Object.keys(t).length)return void T(t.auths,s.id,c.domains,()=>{r("update"),o.setRefresh(!0)},!0);const n=N({width:500,height:300,hideClose:!0,component:F});try{const{message:t}=await g(e,!1);u(t)&&(t.deploy?(d.success(t.result||l("SSL.index_32")),r("update"),o.setRefresh(!0)):Array.isArray(t.auths)&&t.auths.length&&T(t.auths,s.id,c.domains,()=>{r("update"),o.setRefresh(!0)}))}catch(a){J(se(a,"message",""))}finally{n.hide()}return}const{message:t}=await g(e);u(t)&&N({hideClose:!0,data:{isJump:!1,task_id:t.task_id,onFinish:()=>{r("update"),o.setRefresh(!0)}},component:q})},{loading:k,setLoading:$}=M();return Be(()=>{(async()=>{try{$(!0);const{message:e}=await Te({id:s.id});if(w(e)){const t=e.map(async e=>{const{message:t}=await b({domain:e.name});u(t)&&m.value.push({name:e.name,auto:t.support.includes("auto")})});await Promise.all(t)}}finally{$(!1)}})()}),(e,t)=>{const a=p,n=W,l=te,s=f,d=ee,o=Z,u=ae,r=K,x=ne,g=le,w=i,b=Q,$=Me,j=D;return _e(),xe("div",null,[Ee(me(n,{"show-icon":!1,class:"mb-10px"},{default:pe(()=>[he("div",Mt,[me(a,{name:"base-info",size:"17",class:"mr-8px"}),he("span",Tt,ve(e.$t("SSL.SiteSSL.index_12")),1)])]),_:1},512),[[De,"dns"===ye(c).auth_type]]),me($,{ref_key:"formRef",ref:S,model:ye(c),rules:_,"label-width":"140"},{default:pe(()=>[me(o,{label:e.$t("Config.Safe.Ssl.index_2")},{default:pe(()=>[me(d,{value:ye(c).auth_type,"onUpdate:value":t[0]||(t[0]=e=>ye(c).auth_type=e)},{default:pe(()=>[me(s,null,{default:pe(()=>[me(l,{value:"http"},{default:pe(()=>[fe(ve(e.$t("SSL.SiteSSL.index_17")),1)]),_:1}),me(l,{value:"dns"},{default:pe(()=>[fe(ve(e.$t("SSL.index_12"))+" (Wildcard support) ",1)]),_:1})]),_:1})]),_:1},8,["value"])]),_:1},8,["label"]),Ee(me(o,{label:" ","show-feedback":!1},{default:pe(()=>[me(u,{checked:ye(c).dns_manual,"onUpdate:checked":t[1]||(t[1]=e=>ye(c).dns_manual=e),"checked-value":1,"unchecked-value":0},{default:pe(()=>[fe(ve(e.$t("SSL.index_2")),1)]),_:1},8,["checked"])]),_:1},512),[[De,"dns"===ye(c).auth_type]]),Ee(me(o,{label:" "},{default:pe(()=>[me(u,{checked:ye(c).auto_wildcard,"onUpdate:checked":t[2]||(t[2]=e=>ye(c).auto_wildcard=e),"checked-value":1,"unchecked-value":0},{default:pe(()=>[fe(ve(e.$t("SSL.SiteSSL.index_20")),1)]),_:1},8,["checked"])]),_:1},512),[[De,"dns"===ye(c).auth_type]]),me(o,{label:e.$t("Mail.Domain.index_3"),path:"domains"},{default:pe(()=>[me(w,{show:ye(k),class:"p-12px w-300px max-h-300px min-h-100px overflow-auto border border-solid border-#ccc"},{default:pe(()=>[me(u,{class:"mb-12px",checked:ye(c).all,"onUpdate:checked":t[3]||(t[3]=e=>ye(c).all=e),label:e.$t("Public.SelectAll"),indeterminate:ye(v)},null,8,["checked","label","indeterminate"]),ye(m).length?(_e(),ce(x,{key:0,value:ye(c).domains,"onUpdate:value":t[4]||(t[4]=e=>ye(c).domains=e)},{default:pe(()=>[me(r,{class:"flex-col!",size:12},{default:pe(()=>[(_e(!0),xe(we,null,be(ye(m),e=>(_e(),ce(u,{key:e.name,value:e.name,label:e.name},null,8,["value","label"]))),128))]),_:1})]),_:1},8,["value"])):(_e(),ce(g,{key:1,description:"No domain name"}))]),_:1},8,["show"])]),_:1},8,["label"]),Ee(me(o,{label:" "},{default:pe(()=>[me(n,{"show-icon":!1,type:ye(C).length?"warning":"success"},{default:pe(()=>[(_e(!0),xe(we,null,be(ye(c).domains,t=>(_e(),ce(r,{key:t},{default:pe(()=>[y(t)?(_e(),ce(r,{key:0,class:"flex-nowrap! py-3px"},{default:pe(()=>[me(a,{name:"base-success",size:"17",color:"#20a53a"}),he("span",Ft,"["+ve(t)+"] "+ve(e.$t("SSL.SiteSSL.index_13")),1)]),_:2},1024)):(_e(),ce(r,{key:1,class:"flex-nowrap! py-3px items-center!"},{default:pe(()=>[me(a,{name:"base-error",size:"17",color:"#E85445"}),he("span",Jt,"["+ve(t)+"] "+ve(e.$t("SSL.SiteSSL.index_14")),1),me(b,{type:"primary",size:"tiny",onClick:h},{default:pe(()=>[fe(ve(e.$t("SSL.SiteSSL.index_21")),1)]),_:1})]),_:2},1024))]),_:2},1024))),128))]),_:1},8,["type"])]),_:1},512),[[De,"dns"===ye(c).auth_type&&ye(c).domains.length&&!ye(c).dns_manual]]),me(o,{label:" "},{default:pe(()=>[me(b,{type:"primary",onClick:L},{default:pe(()=>[fe(ve(e.$t("Public.Btn.Apply")),1)]),_:1})]),_:1})]),_:1},8,["model"]),Ee(me(j,{class:"mt-16px"},{default:pe(()=>[he("li",Ht,ve(e.$t("SSL.SiteSSL.index_15")),1),he("li",null,ve(e.$t("Site.Cert.index_21")),1),he("li",null,ve(e.$t("Site.Cert.index_23")),1),he("li",null,ve(e.$t("Site.Cert.index_24")),1)]),_:1},512),[[De,"http"===ye(c).auth_type]]),Ee(me(j,{class:"mt-24px"},{default:pe(()=>[t[5]||(t[5]=he("li",null,"Manually resolved certificates do not support auto-renewal",-1)),he("li",null,ve(e.$t("Site.Cert.index_25")),1),he("li",null,ve(e.$t("Site.Cert.index_26")),1),he("li",null,ve(e.$t("Site.Cert.index_27")),1),he("li",null,ve(e.$t("Site.Cert.index_28")),1)]),_:1,__:[5]},512),[[De,"dns"===ye(c).auth_type]])])}}}),qt=ie({__name:"index",props:{isOpen:{type:Boolean},type:{},onRefresh:{type:Function}},setup(e){const t=e,a=()=>{t.onRefresh()};return(e,n)=>(_e(),xe("div",null,[t.isOpen&&"Let's Encrypt"===t.type?(_e(),ce(It,{key:0,onUpdate:a})):(_e(),ce(Gt,{key:1,onUpdate:a}))]))}}),Wt=ie({__name:"index",props:{onMenuChange:{type:Function}},setup(e,{expose:t}){const{data:a}=E(),{t:n}=de(),l=ke({p:1,limit:99999}),{columns:s,table:i}=O([{key:"domain",title:n("Site.Cert.index_29"),render:e=>me("span",{innerHTML:e.verify_domains.length>0?e.verify_domains.join("<br/>"):"--"},null)},Ae({title:n("SSL.index_54"),width:140}),{key:"issuer",title:n("Site.Cert.index_30"),ellipsis:{tooltip:!0}},z({width:150,options:t=>[{label:n("Public.Btn.Deploy"),onClick:async()=>{try{await r({hash:t.hash,domains:JSON.stringify([a.name]),append:1}),d.success(n("SSL.index_32")),setTimeout(()=>{e.onMenuChange()},500)}catch(l){console.log(l)}}},{show:"Let's Encrypt"===t.provider,label:n("Public.Btn.Del"),onClick:()=>{(e=>{H({title:n("Site.Cert.index_31"),content:n("Site.Cert.index_32"),onConfirm:async()=>{await y({hash:e.hash}),_()}})})(t)}}]})]),{loading:o,setLoading:c}=M(!0),_=async()=>{try{c(!0);const{message:e}=await C(l);u(e)&&(i.data=e.data)}finally{c(!1)}};return _(),t({init:_}),(e,t)=>{const a=A;return _e(),xe("div",null,[me(a,{loading:ye(o),columns:ye(s),data:ye(i).data,"max-height":510},null,8,["loading","columns","data"])])}}}),Xt={class:"mr-12px"},Vt={key:0,class:"mr-12px"},Yt={key:1,class:"mr-12px"};e("default",ie({__name:"index",setup(e,{expose:t}){const l=n(),{data:s}=E(),{t:i}=de(),d=oe("current"),o=oe(""),r=oe(B.NotDeploy),_=oe(""),p=oe(!1),S=oe(0),m=oe(!1),y=oe(""),h=async()=>{const{message:e}=await c({hash:o.value});u(e)&&N({hideClose:!0,data:{isJump:!1,task_id:e.task_id,onFinish:()=>{f()}},component:q})},v=e=>{x.value[0].data&&(x.value[0].data.loading=e)},f=async()=>{try{v(!0);const{message:a}=await P({siteName:s.name});u(a)&&(r.value=a.type,p.value=a.status,S.value=se(a,"cert_data.endtime",0),y.value=a.cert_data.issuer_O||"",m.value=(()=>{let e=!1;return S.value<=30&&(e=!0),r.value===B.TestDeploy&&S.value<0&&(e=!0),r.value!==B.SaveOrHolderDeploy&&r.value!==B.NotDeploy||(e=!1),e})(),_.value=a.cert_data.dns.join(","),o.value=a.hash,t=a,x.value[0].data&&(x.value[0].data.info=t),e=m.value,x.value[0].data&&(x.value[0].data.isRenew=e))}catch{p.value=!1,m.value=!1}finally{v(!1)}var e,t},x=oe([{key:"current",label:()=>me("div",null,[me("span",null,[fe("Current Certs - ")]),me("span",{class:p.value?"text-#1d9534":"text-red-500"},[fe("["),p.value?"Deployed":"Not Deployed",fe("]")])]),data:{info:null,isRenew:!1,loading:!0,onRefresh:f},component:Ne(ct)},{key:"business",label:i("Site.Cert.index_64"),component:Ne(ft)},{key:"let",label:i("Site.Cert.index_65"),data:{isOpen:ue(()=>p.value),type:ue(()=>y.value),onRefresh:f},component:Ne(qt)},{key:"holder",label:i("Site.Cert.index_66"),component:Ne(Wt),data:{onMenuChange:()=>{d.value="current",f(),l.setRefresh(!0)}}}]);return t({init:()=>{f()}}),(e,t)=>{const n=Q,l=W,s=a;return _e(),xe("div",null,[ye(p)?Se("",!0):(_e(),ce(l,{key:0,class:"mb-12px",type:"error","show-icon":!1,style:{"--n-padding":"9px 16px"}},{default:pe(()=>[he("span",Xt,ve(e.$t("Site.Cert.index_41")),1),me(n,{size:"tiny",type:"primary",onClick:t[0]||(t[0]=e=>d.value="business")},{default:pe(()=>[fe(ve(e.$t("Site.Cert.index_43")),1)]),_:1})]),_:1})),ye(p)&&ye(m)?(_e(),ce(l,{key:1,class:"mb-12px",type:"error","show-icon":!1,style:{"--n-padding":"9px 16px"}},{default:pe(()=>[ye(S)>0?(_e(),xe("span",Vt,ve(e.$t("SSL.SiteSSL.index_26",[ye(_),ye(S)])),1)):(_e(),xe("span",Yt,ve(e.$t("SSL.SiteSSL.index_19",[ye(_)])),1)),me(n,{size:"tiny",type:"primary",onClick:h},{default:pe(()=>[fe(ve(e.$t("Site.Cert.index_53")),1)]),_:1})]),_:1})):Se("",!0),me(s,{value:ye(d),"onUpdate:value":t[1]||(t[1]=e=>ge(d)?d.value=e:null),options:ye(x)},null,8,["value","options"])])}}}))}}});
