import{s as e,o as s,u as a,a as t,b as n,c as i,d as o,_ as l,R as r}from"./tableColumns.js?v=1763625242172";import{d0 as p,p as u,u as c,X as m,m as d,d1 as _,d2 as f,c as v,y as g,o as x}from"./page_layout.js?v=1763625242172";import{b as y,c as h,f as k,J as b,K as S,L as w,M as j,N as C,m as R,a as $,d as H,O as L,h as P}from"./public.js?v=1763625242172";import{k as U,r as z,R as I,a2 as N,a3 as B,U as M,a4 as O,S as X,O as A,H as E,V as F,F as J,a0 as K,X as T,j as V,an as Y,P as q,w as D,N as G}from"./vue.js?v=1763625242172";import{d9 as Q,aC as W,dS as Z}from"./naive.js?v=1763625242172";import{_ as ee}from"./index.vue_vue_type_script_setup_true_lang5.js?v=1763625242172";import{_ as se}from"./index.vue_vue_type_script_setup_true_lang7.js?v=1763625242172";import{a as ae}from"./soft.js?v=1763625242172";import"./index.vue_vue_type_script_setup_true_lang8.js?v=1763625242172";import"./soft2.js?v=1763625242172";import"./index.js?v=1763625242172";import"./common.js?v=1763625242172";import"./__commonjsHelpers__.js?v=1763625242172";import"./index.vue_vue_type_script_setup_true_lang6.js?v=1763625242172";import"./site.js?v=1763625242172";const te={class:"w-80px inline-block"},ne=["onClick"],ie=u(U({__name:"app-sort",setup(a){const t=p(),n=z(e.type);return(()=>{const s=Number(localStorage.getItem("soft-app"));s&&(n.value=s,e.type=s)})(),(a,i)=>{const o=Q;return I(),N(o,{class:"py-16px items-center"},{default:B((()=>[M("span",te,O(a.$t("Soft.index_7")),1),(I(!0),X(J,null,A(F(s),(s=>(I(),X("div",{class:E(["list",{active:F(n)===s.value}]),key:s.value,onClick:a=>{return i=s.value,n.value=i,e.p=1,e.type=i,localStorage.setItem("soft-app",i.toString()),void t.setRefresh(!0);var i}},O(s.label),11,ne)))),128))])),_:1})}}}),[["__scopeId","data-v-f20307d1"]]),oe={key:0,class:"box appStore-pro-tips"},le={key:0,class:"mr-15px"},re={key:1,class:"mr-10px"},pe=u(U({__name:"index",setup(e){const s=c(),{isPro:a,authExpired:t}=K(s);return(e,s)=>{const n=W;return"Lifetime"!==F(t)?(I(),X("div",oe,[F(a)?(I(),X("span",le,O(e.$t("Soft.index_16",[F(t)])),1)):(I(),X("span",re,O(e.$t("Soft.index_17")),1)),T(n,{type:"primary",size:"small",onClick:s[0]||(s[0]=e=>{y({source:a.value?30:29})})},{default:B((()=>[V(O(F(a)?e.$t("Soft.index_18"):e.$t("Home.index_22")),1)])),_:1})])):Y("",!0)}}}),[["__scopeId","data-v-c3090a2b"]]),ue=U({__name:"index",setup(s){const{t:l}=q(),r=p(),u=c(),{multiService:U}=K(u),{keys:z,table:M,columns:X}=h([a(),{key:"name",title:l("Soft.index_9"),width:"100",ellipsis:{tooltip:{width:"trigger"}},render:e=>e.author?e.author:l("Soft.index_11")},{key:"name",title:l("Soft.index_10"),ellipsis:{tooltip:{width:"trigger"}},render:e=>T("span",{innerHTML:e.ps},null)},{key:"name",title:l("Soft.index_12"),width:"60",render:e=>"0.00"===e.price||0===e.price?T("span",null,[l("Soft.index_13")]):T("span",{class:"color-#fc6d26"},["$".concat(e.price)])},t(),n(),i(),o(),k({width:180,align:"right",options:e=>[{label:l("Home.index_5"),show:b(e),onClick:()=>{const s=S(e),a={name:e.name,title:e.title,m_version:e.versions[s].m_version,version:e.versions[s].version,update_msg:e.versions[s].update_msg};w(a,(()=>{J()}))}},{label:l("Layout.Sider.mail_12"),show:e.setup&&!j(e),onClick:()=>{ae(e)}},{label:-1===e.endtime?l("Component.Auth.index_3"):l("Soft.index_18"),show:j(e),onClick:()=>{const s={source:-1===e.endtime?31:32,plugin:{name:e.title,pid:e.pid,type:e.type,plugin:!0,renew:e.endtime,ps:e.ps}};y(s)}},{label:C(e),show:!e.setup&&!j(e),onClick:()=>{"1"===e.task?R(e.name,(()=>{J()})):m()}},{label:l("Public.Btn.Uninstall"),show:e.setup,onClick:()=>{U.value&&["nginx","apache","openlitespeed"].includes(e.name)?d.error("You cannot uninstall if multiple services are enabled. Please disable multiple services before uninstalling."):$({title:l("Public.Btn.Uninstall"),content:l("Soft.index_15",[e.title,e.version]),onConfirm:async()=>{const s=e.name.includes("nginx");e.version=e.name.includes("php-")?e.versions[0].m_version:e.version,await _({sName:e.name,version:s?"":e.version}),J()}})}}]})]),{loading:A,setLoading:E}=H();D((()=>r.isRefresh),(e=>{e&&(r.setRefresh(!1),J())})),D((()=>u.taskCount),(e=>{e&&console.log(e),J()}));const J=async()=>{try{E(!0);const{message:s}=await f(G(e),!!e.force);v(s)&&(M.data=s.list.data,M.total=g(s.list.page))}finally{z.value=[],e.force=0,E(!1)}};return J(),(s,a)=>{const t=x,n=P,i=se,o=ee;return I(),N(o,{class:"py-16px"},{table:B((()=>[T(n,{"row-key":"name",loading:F(A),data:F(M).data,columns:F(X)},{empty:B((()=>[T(t,{onClick:F(L)},{default:B((()=>[V(O(s.$t("Soft.index_26")),1)])),_:1},8,["onClick"])])),_:1},8,["loading","data","columns"])])),pageRight:B((()=>[T(i,{page:F(e).p,"onUpdate:page":a[0]||(a[0]=s=>F(e).p=s),"page-size":F(e).row,"onUpdate:pageSize":a[1]||(a[1]=s=>F(e).row=s),"item-count":F(M).total,onRefresh:J},null,8,["page","page-size","item-count"])])),_:1})}}}),ce=U({__name:"index",setup:e=>(e,s)=>{const a=Z;return I(),N(a,{class:"p-16px"},{default:B((()=>[T(l),T(r),T(ie),T(pe),T(ue)])),_:1})}});export{ce as default};
