import{_ as e}from"./index246.js?v=1764830988434";import{_ as a}from"./index107.js?v=1764830988434";import{u as l}from"./index239.js?v=1764830988434";import t from"./index98.js?v=1764830988434";import{aC as n,dR as i,dV as s,dj as o,da as r,au as d}from"./naive.js?v=1764830988434";import{k as p,P as u,r as _,o as c,R as v,V as m,W as f,S as P,U as h,ak as b,a3 as x,j as w,a4 as g,n as y,e as C,N as S,a2 as I,an as H,F as k}from"./vue.js?v=1764830988434";import{d as $,_ as j}from"./public.js?v=1764830988434";import{_ as F}from"./index.vue_vue_type_script_setup_true_lang.js?v=1764830988434";import{d as R,x as U,h as X,m as D,_ as L,T as E}from"./page_layout.js?v=1764830988434";import{b8 as N,b9 as q,c as B,ba as T}from"./site.js?v=1764830988434";import{E as V,F as W,G as z,H as A,I as G}from"./php.js?v=1764830988434";import"./theme-monokai.js?v=1764830988434";import"./__commonjsHelpers__.js?v=1764830988434";import"./file.js?v=1764830988434";import"./common.js?v=1764830988434";const M={class:"mt-12px"},O=p({__name:"DefaultPage",setup(e){const{t:i}=u(),s=l(),o=_(null),r=_("index"),d=new Map([["index",{label:i("Site.PHP.index_51"),path:"/www/server/panel/data/defaultDoc.html"}],["404",{label:i("Site.PHP.index_52"),path:"/www/server/panel/data/404.html"}],["blank",{label:i("Site.PHP.index_53"),path:"nginx"===s.web.type?"/www/server/nginx/html/index.html":"/www/server/apache/htdocs/index.html"}],["stop",{label:i("Site.PHP.index_54"),path:"/www/server/stop/index.html"}]]),p=(()=>{const e=[];return d.forEach((a,l)=>{e.push({key:l,label:a.label})}),e})(),C=()=>{var e;return(null==(e=d.get(r.value))?void 0:e.path)||""},S=_(C()),I=()=>{S.value=C()},H=()=>{y(()=>{var e;null==(e=o.value)||e.getContent()})},k=async()=>{var e;null==(e=o.value)||e.saveFile()};return c(()=>{var e;null==(e=o.value)||e.getContent()}),(e,l)=>{const i=a,s=n;return m(),v("div",null,[f(i,{value:h(r),"onUpdate:value":[l[0]||(l[0]=e=>b(r)?r.value=e:null),I],options:h(p),onClick:H},null,8,["value","options"]),f(t,{ref_key:"configRef",ref:o,path:h(S),"onUpdate:path":l[1]||(l[1]=e=>b(S)?S.value=e:null),height:440,"show-encoding":!0},null,8,["path"]),P("div",M,[f(s,{type:"primary",onClick:k},{default:x(()=>[w(g(e.$t("Site.Cert.index_60")),1)]),_:1})])])}}}),J={class:"w-300px"},K=p({__name:"DefaultSite",setup(e,{expose:a}){const{t:l}=u(),t=_(null),{loading:o,setLoading:r}=$(),d=C({name:"0"}),p=_([]),c=async()=>{try{r(!0);const{message:e}=await N();if(R(e)){const{sites:a,defaultSite:l}=e;p.value=U(a)?a.map(e=>({label:e.name,value:e.name})):[],b(),d.name=X(l)?l:"0"}}finally{r(!1)}},b=()=>{p.value.unshift({label:l("Site.PHP.index_58"),value:"0"})},y=async()=>{var e;await(null==(e=t.value)?void 0:e.validate()),await q(S(d))};return b(),c(),a({init:c}),(e,a)=>{const l=s,r=i,u=n,_=F,c=j;return m(),v("div",null,[f(_,{ref_key:"formRef",ref:t,model:h(d)},{default:x(()=>[f(r,{label:e.$t("Site.PHP.index_11")},{default:x(()=>[P("div",J,[f(l,{value:h(d).name,"onUpdate:value":a[0]||(a[0]=e=>h(d).name=e),class:"name-select",loading:h(o),options:h(p)},null,8,["value","loading","options"])])]),_:1},8,["label"]),f(r,{label:" "},{default:x(()=>[f(u,{type:"primary",onClick:y},{default:x(()=>[w(g(e.$t("Public.Btn.Save")),1)]),_:1})]),_:1})]),_:1},8,["model"]),f(c,{class:"mt-20px"},{default:x(()=>[P("li",null,g(e.$t("Site.PHP.index_56")),1),P("li",null,g(e.$t("Site.PHP.index_57")),1)]),_:1})])}}}),Q={class:"w-300px"},Y=p({__name:"PhpVersion",setup(e,{expose:a}){const{t:l}=u(),t=_(null),{loading:o,setLoading:r}=$(),d=C({php_version:null}),p={php_version:{required:!0,message:l("Site.PHP.index_67"),trigger:"change"}},c=_([]),b=async()=>{try{r(!0);const{message:e}=await B();if(R(e)){const a=U(e.versions)?e.versions:[];c.value=a.map(e=>({label:e.name,value:e.version})),R(e.select)&&(d.php_version="".concat(e.select.version))}}finally{r(!1)}},y=async()=>{var e;await(null==(e=t.value)?void 0:e.validate());const a=(()=>{const e=d.php_version;if(null===e)throw D.error(l("Site.PHP.index_67")),new Error(l("Site.PHP.index_67"));return{php_version:e}})();await T(a)};return b(),a({init:b}),(e,a)=>{const l=s,r=i,u=n,_=F,b=j;return m(),v("div",null,[f(_,{ref_key:"formRef",ref:t,model:h(d),rules:p},{default:x(()=>[f(r,{label:e.$t("Site.PHP.index_55"),path:"php_version"},{default:x(()=>[P("div",Q,[f(l,{value:h(d).php_version,"onUpdate:value":a[0]||(a[0]=e=>h(d).php_version=e),class:"php-version-select",loading:h(o),options:h(c)},null,8,["value","loading","options"])])]),_:1},8,["label"]),f(r,{label:" "},{default:x(()=>[f(u,{type:"primary",onClick:y},{default:x(()=>[w(g(e.$t("Public.Btn.Save")),1)]),_:1})]),_:1})]),_:1},8,["model"]),f(b,{class:"mt-20px"},{default:x(()=>[P("li",null,g(e.$t("Site.PHP.index_68")),1),P("li",null,g(e.$t("Site.PHP.index_69")),1)]),_:1})])}}}),Z={class:"w-300px"},ee=p({__name:"Https",setup(e,{expose:a}){const{loading:l,setLoading:t}=$(),n=C({value:!1}),s=async()=>{try{t(!0),await V()}catch(e){n.value=!n.value}finally{t(!1)}},r=async()=>{try{t(!0);const{message:e}=await W();R(e)&&(n.value=e.result)}finally{t(!1)}};return r(),a({init:r}),(e,a)=>{const t=o,r=i,d=F,p=j;return m(),v("div",null,[f(d,{model:h(n)},{default:x(()=>[f(r,{label:e.$t("Site.PHP.index_86")},{default:x(()=>[P("div",Z,[f(t,{value:h(n).value,"onUpdate:value":[a[0]||(a[0]=e=>h(n).value=e),s],loading:h(l)},null,8,["value","loading"])])]),_:1},8,["label"])]),_:1},8,["model"]),f(p,{class:"mt-8px"},{default:x(()=>[P("li",null,g(e.$t("Site.PHP.index_87")),1),P("li",null,g(e.$t("Site.PHP.index_88")),1)]),_:1})])}}}),ae={class:"text-font2"},le={class:"text-#6c7688 p-10px rounded-10px border-solid border-2px border-[var(--site-global-ip-white-ips-border)]"},te=["textContent"],ne=p({__name:"global",setup(e,{expose:a}){const{loading:l,setLoading:t}=$(),{loading:p,setLoading:u}=$(),_=C({cdn_ip_parse:!1,cdn_ip_parse_header:null,cdn_ip_white_ips:"Cf-Connecting-IP"}),c=[{value:"X-Forwarded-For",label:"X-Forwarded-For"},{value:"X-Real-IP",label:"X-Real-IP"},{value:"X-Forwarded",label:"X-Forwarded"},{value:"Forwarded-For",label:"Forwarded-For"},{value:"Forwarded",label:"Forwarded"},{value:"True-Client-IP",label:"True-Client-IP"},{value:"Client-IP",label:"Client-IP"},{value:"Ali-Cdn-Real-IP",label:"Ali-Cdn-Real-IP"},{value:"Cdn-Src-IP",label:"Cdn-Src-IP"},{value:"Cdn-Real-IP",label:"Cdn-Real-IP"},{value:"Cf-Connecting-IP",label:"Cf-Connecting-IP"},{value:"X-Cluster-Client-IP",label:"X-Cluster-Client-IP"},{value:"Wl-Proxy-Client-IP",label:"Wl-Proxy-Client-IP"},{value:"Proxy-Client-IP",label:"Proxy-Client-IP"}],b=async()=>{try{u(!0);const{message:e}=await z({header_cdn:_.cdn_ip_parse_header});R(e)&&(_.cdn_ip_white_ips=e.result)}finally{u(!1)}},y=async()=>{const e={cdn_switch:_.cdn_ip_parse?1:0,header_cdn:_.cdn_ip_parse_header,white_ips:_.cdn_ip_white_ips};A(e)},S=async()=>{try{t(!0);const{message:e}=await G();R(e)&&(_.cdn_ip_parse=e.cdn_status,_.cdn_ip_parse_header=e.header_cdn||"Cf-Connecting-IP",_.cdn_ip_white_ips=e.white_ips,_.cdn_ip_parse||b())}finally{t(!1)}};return S(),a({init:S}),(e,a)=>{const t=o,u=r,C=i,S=s,$=L,j=d,R=n,U=F,X=E;return m(),I(X,{show:h(l)},{default:x(()=>[f(U,{model:h(_)},{default:x(()=>[f(C,{label:e.$t("CDN Resolution")},{default:x(()=>[f(u,{class:"items-center"},{default:x(()=>[f(t,{value:h(_).cdn_ip_parse,"onUpdate:value":a[0]||(a[0]=e=>h(_).cdn_ip_parse=e)},null,8,["value"]),P("span",ae,"*"+g(e.$t("Only Nginx service is supported")),1)]),_:1})]),_:1},8,["label"]),h(_).cdn_ip_parse?(m(),v(k,{key:0},[f(C,{label:e.$t("Request header")},{default:x(()=>[f(u,{class:"items-center"},{default:x(()=>[f(S,{filterable:"",class:"w-400px",value:h(_).cdn_ip_parse_header,"onUpdate:value":[a[1]||(a[1]=e=>h(_).cdn_ip_parse_header=e),b],options:c},null,8,["value"])]),_:1})]),_:1},8,["label"]),f(C,{label:e.$t("CDN IP whitelist")},{default:x(()=>[f(u,{class:"flex-col! bg-[var(--site-global-ip-white-ips-bg)] p-12px rounded-10px border-solid border-2px border-[var(--site-global-ip-white-ips-border)] w-500px"},{default:x(()=>[P("div",le,[f($,{name:"base-info",size:"17",color:"#ffae45"}),P("span",{textContent:g(e.$t("Each line contains one IP address; nginx will only replace the IP addresses in the request header from the following IP ranges."))},null,8,te)]),f(j,{loading:h(p),value:h(_).cdn_ip_white_ips,"onUpdate:value":a[2]||(a[2]=e=>h(_).cdn_ip_white_ips=e),placeholder:e.$t("Ftp.Placeholder.Index_3"),type:"textarea",autosize:{minRows:6,maxRows:12},"input-props":{spellcheck:!1}},null,8,["loading","value","placeholder"])]),_:1})]),_:1},8,["label"])],64)):H("",!0),f(C,{label:" "},{default:x(()=>[f(R,{type:"primary",onClick:y},{default:x(()=>[w(g(e.$t("Public.Btn.Save")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["show"])}}}),ie={class:"h-full"},se=p({__name:"index",props:{menu:{type:String,default:"default-page"}},setup(a){const{t:l}=u(),t=_(a.menu),n=[{key:"default-page",label:l("Site.PHP.index_5"),component:O},{key:"default-site",label:l("Site.PHP.index_6"),component:K},{key:"php-version",label:l("Site.PHP.index_7"),component:Y},{key:"https",label:l("Site.PHP.index_86"),component:ee},{key:"global",label:"Global Settings",component:ne}];return(a,l)=>{const i=e;return m(),v("div",ie,[f(i,{value:h(t),"onUpdate:value":l[0]||(l[0]=e=>b(t)?t.value=e:null),data:n},null,8,["value"])])}}});export{se as default};
