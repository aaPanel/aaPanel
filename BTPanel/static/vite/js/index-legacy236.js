System.register(["./page_layout-legacy.js?v=1758789124250","./index-legacy245.js?v=1758789124250","./vue-legacy.js?v=1758789124250","./index-legacy84.js?v=1758789124250","./index.vue_vue_type_script_setup_true_lang-legacy5.js?v=1758789124250","./index.vue_vue_type_script_setup_true_lang-legacy12.js?v=1758789124250","./public-legacy.js?v=1758789124250","./index-legacy99.js?v=1758789124250","./site-legacy.js?v=1758789124250","./naive-legacy.js?v=1758789124250","./index-legacy.js?v=1758789124250","./index.vue_vue_type_script_setup_true_lang-legacy.js?v=1758789124250","./index.vue_vue_type_script_setup_true_lang-legacy10.js?v=1758789124250","./index-legacy108.js?v=1758789124250","./php-legacy.js?v=1758789124250","./index-legacy100.js?v=1758789124250","./index-legacy133.js?v=1758789124250","./refersh-legacy.js?v=1758789124250","./form.vue_vue_type_script_setup_true_lang-legacy2.js?v=1758789124250","./index-legacy105.js?v=1758789124250","./logs.vue_vue_type_script_setup_true_lang-legacy.js?v=1758789124250","./ssl-legacy.js?v=1758789124250","./cert-legacy.js?v=1758789124250","./utils-legacy3.js?v=1758789124250","./index-legacy218.js?v=1758789124250","./ssl-lets-progress-legacy.js?v=1758789124250","./upload-legacy.js?v=1758789124250","./soft-legacy.js?v=1758789124250"],function(e,t){"use strict";var a,l,i,n,s,o,d,r,u,c,p,_,m,v,h,f,x,y,w,b,g,S,k,C,$,L,P,U,R,E,T,B,j,N,D,I,O,A,M,H,z,q,W,F,K,J,V,X,G,Y,Z,Q,ee,te,ae,le,ie,ne,se,oe,de,re,ue,ce,pe,_e,me,ve,he,fe,xe,ye,we,be,ge,Se,ke,Ce,$e,Le,Pe,Ue,Re,Ee,Te,Be,je,Ne,De,Ie,Oe,Ae,Me,He,ze,qe,We,Fe,Ke,Je,Ve,Xe,Ge,Ye,Ze,Qe,et,tt,at,lt,it,nt,st,ot,dt,rt,ut,ct,pt,_t,mt,vt,ht,ft,xt,yt,wt,bt,gt,St,kt,Ct,$t,Lt,Pt,Ut,Rt,Et,Tt,Bt,jt,Nt,Dt,It,Ot,At,Mt,Ht,zt,qt,Wt,Ft,Kt,Jt,Vt,Xt,Gt,Yt,Zt,Qt,ea,ta,aa,la,ia,na,sa,oa,da,ra,ua,ca,pa,_a,ma,va,ha,fa,xa,ya,wa,ba,ga,Sa,ka,Ca,$a,La,Pa,Ua,Ra,Ea,Ta,Ba,ja,Na,Da,Ia,Oa;return{setters:[e=>{a=e.i,l=e.o,i=e.w,n=e.m,s=e.a,o=e.d,d=e.q,r=e.be,u=e.h,c=e.u,p=e.aU,_=e.p,m=e.ds,v=e.g,h=e.dr,f=e.S,x=e.cs,y=e._,w=e.a5},e=>{b=e._},e=>{g=e.i,S=e.p,k=e.W,C=e.k,$=e.P,L=e.r,P=e.R,U=e.V,R=e.S,E=e.a3,T=e.a4,B=e.ak,j=e.U,N=e.j,D=e.e,I=e._,O=e.an,A=e.F,M=e.N,H=e.a2,z=e.a0,q=e.o,W=e.ay,F=e.l,K=e.v,J=e.O,V=e.c,X=e.n,G=e.y,Y=e.H,Z=e.am,Q=e.w,ee=e.m,te=e.x},e=>{ae=e.u},e=>{le=e._},e=>{ie=e._},e=>{ne=e.a,se=e.$,oe=e.c,de=e.d,re=e.h,ue=e.e,ce=e.f,pe=e._,_e=e.b,me=e.s,ve=e.u,he=e.ac,fe=e.ad,xe=e.a6,ye=e.a0,we=e.a1,be=e.a2,ge=e.n,Se=e.ae,ke=e.af,Ce=e.ag,$e=e.ah,Le=e.ai,Pe=e.j,Ue=e.q,Re=e.a5},e=>{Ee=e._},e=>{Te=e.a2,Be=e.a3,je=e.a4,Ne=e.aU,De=e.aV,Ie=e.aW,Oe=e.aX,Ae=e.aY,Me=e.a5,He=e.a6,ze=e.a7,qe=e.a8,We=e.a9,Fe=e.aa,Ke=e.ab,Je=e.ac,Ve=e.ay,Xe=e.az,Ge=e.aA,Ye=e.aB,Ze=e.aC,Qe=e.aD,et=e.aE,tt=e.aF,at=e.aq,lt=e.ar,it=e.as,nt=e.aZ,st=e.a_,ot=e.at,dt=e.au,rt=e.av,ut=e.g,ct=e.aw,pt=e.ax,_t=e.a1,mt=e.a0,vt=e.a$,ht=e.b0,ft=e.b1,xt=e.b2,yt=e.b3,wt=e.b4,bt=e.b5,gt=e.ad,St=e.ae,kt=e.af,Ct=e.ag,$t=e.ah,Lt=e.ai,Pt=e.aj,Ut=e.ak,Rt=e.al,Et=e.am,Tt=e.an,Bt=e.ao,jt=e.ap,Nt=e.aH,Dt=e.aI,It=e.aJ,Ot=e.a,At=e.aK},e=>{Mt=e.aC,Ht=e.da,zt=e.au,qt=e.dV,Wt=e.d5,Ft=e.dR,Kt=e.dj,Jt=e._,Vt=e.df,Xt=e.dk,Gt=e.eg,Yt=e.av,Zt=e.dY,Qt=e.bH,ea=e.e2,ta=e.dc,aa=e.dT,la=e.dU,ia=e.G,na=e.dZ,sa=e.aX,oa=e.dS,da=e.dh},e=>{ra=e._},e=>{ua=e._},e=>{ca=e._},e=>{pa=e._},e=>{_a=e.d,ma=e.e,va=e.f,ha=e.l,fa=e.m,xa=e.h,ya=e.i},e=>{wa=e.default},e=>{ba=e._},e=>{ga=e._,Sa=e.a,ka=e.b},e=>{Ca=e._},e=>{$a=e._},e=>{La=e._},e=>{Pa=e.c,Ua=e.s,Ra=e.a,Ea=e.g,Ta=e.b},e=>{Ba=e.C},e=>{ja=e.u},e=>{Na=e.A},e=>{Da=e.a},e=>{Ia=e.o},e=>{Oa=e.a}],execute:function(){var Aa=document.createElement("style");Aa.textContent=".warning[data-v-d159b1c0]{padding:8px;border-radius:4px;background-color:#fdf6ec;color:#e6a23c}.n-alert[data-v-092276eb]{--n-font-size: 12px}.cert-info[data-v-092276eb]{display:flex;align-items:center;height:24px}.cert-info .cert-label[data-v-092276eb]{color:var(--site-config-ssl-label);font-weight:700}.cert-info .cert-value[data-v-092276eb]{flex:1;width:0;margin-left:4px}.business-top-tips[data-v-77483f61]{background:var(--site-config-business-tips)}.n-alert[data-v-3a30f84f]{--n-font-size: 12px}.cert-info[data-v-3a30f84f]{display:flex;align-items:center;height:24px}.cert-info .cert-label[data-v-3a30f84f]{color:var(--site-config-ssl-label);font-weight:700}.cert-info .cert-value[data-v-3a30f84f]{flex:1;width:0;margin-left:4px}.tips[data-v-150ccdef]{margin-left:10px;--un-text-opacity:1;color:rgb(102 102 102 / var(--un-text-opacity))}[data-v-9ed176f3] .n-alert .n-alert-body{--n-padding: 5px 8px}\n/*$vite$:1*/",document.head.appendChild(Aa),e("u",Ha);const Ma=Symbol("site-config");function Ha(){return g(Ma)}const{t:za}=a.global;function qa(){return{key:"name",title:za("Site.TableRow.index_19"),render:e=>k(l,{href:`http://${e.name}:${e.port}`,target:"_blank"},{default:()=>[e.name]})}}function Wa(){return{key:"port",title:za("Site.TableRow.index_16"),width:100}}function Fa(){return{key:"action",title:za("Public.Table.Action"),width:80,align:"right",render:()=>k("span",{class:"text-default"},[za("Config.Panel.index_82")])}}function Ka({delDomain:e}){return{key:"action",title:za("Public.Table.Action"),width:80,align:"right",render:t=>k(se,{options:[{label:za("Public.Btn.Del"),class:"delete-btn",onClick:()=>{ne({title:`${za("Site.Batch.index_12")}[${t.name}]`,content:za("Site.Batch.index_13"),onConfirm:async({hide:a})=>{await e(t),a()}})}}]},null)}}const Ja={class:"flex justify-between items-center mb-24px"},Va={class:"w-400px"},Xa={class:"pr-40px"},Ga=C({__name:"index",setup(e,{expose:t}){const{t:a}=$(),{data:l}=Ha(),s=L(""),o=async()=>{""!==s.value.trim()?(await je({id:l.id,webname:l.name,domain:s.value.trim().split("\n").join(",")}),s.value="",v()):n.error(a("Site.RulesError.index_31"))},d=async e=>{await Te({id:l.id,webname:l.name,domain:e.name,port:e.port}),v()},{keys:r,table:u,columns:c}=oe([{type:"selection",width:40},qa(),Wa(),Ka({delDomain:d})]),p=[{key:"del",type:"confirm",label:a("Site.Batch.index_20"),confirm:{title:a("Site.Batch.index_21"),desc:a("Site.Batch.index_11"),api:e=>Te({id:l.id,webname:l.name,domain:e.name,port:e.port},!1),done:()=>{v()},columns:[{key:"name",title:a("Site.Cert.index_29"),ellipsis:{tooltip:{width:"trigger"}}}]}}],{loading:_,setLoading:m}=de(),v=async()=>{try{m(!0);const e={id:l.id},{message:t}=await Be(e);u.data=i(t)?t:[],u.data.length>1?c.value[c.value.length-1]=Ka({delDomain:d}):c.value[c.value.length-1]=Fa()}finally{r.value=[],m(!1)}};return v(),t({init:v}),(e,t)=>{const a=Ee,l=Mt,i=re,n=ie,d=le;return U(),P("div",null,[R("div",Ja,[R("div",Va,[k(a,{value:j(s),"onUpdate:value":t[0]||(t[0]=e=>B(s)?s.value=e:null),name:"domain"},{default:E(()=>[R("p",null,T(e.$t("Site.Config.index_30")),1),R("p",null,T(e.$t("Site.Config.index_31")),1),R("p",null,T(e.$t("Site.Config.index_32")),1)]),_:1},8,["value"])]),R("div",Xa,[k(l,{class:"add-domain-btn",type:"primary",onClick:o},{default:E(()=>[N(T(e.$t("Site.Cert.index_62")),1)]),_:1})])]),k(d,null,{table:E(()=>[k(i,{"checked-row-keys":j(r),"onUpdate:checkedRowKeys":t[1]||(t[1]=e=>B(r)?r.value=e:null),loading:j(_),"max-height":400,data:j(u).data,columns:j(c)},null,8,["checked-row-keys","loading","data","columns"])]),pageLeft:E(()=>[k(n,{"checked-row-keys":j(r),"onUpdate:checkedRowKeys":t[2]||(t[2]=e=>B(r)?r.value=e:null),data:j(u).data,options:p},null,8,["checked-row-keys","data"])]),_:1})])}}}),Ya={class:"w-140px"},Za={class:"w-120px"},Qa=C({__name:"index",setup(e,{expose:a}){const l=I(()=>s(()=>t.import("./rewrite-legacy.js?v=1758789124250"),void 0)),{t:d}=$(),{data:r}=Ha(),u=D({domain:"",dirName:null}),c=L([]),p=async()=>{const e=u.dirName;""!==u.domain.trim()?null!==e?(await De({id:r.id,domain:u.domain,dirName:e}),b()):n.error(d("Site.RulesError.index_32")):n.error(d("Site.RulesError.index_31"))},_=ue(d("Site.PHP.index_81"),{data:"",filename:"",rlist:[]}),m=e=>{_.data.filename=e.filename,_.data.fileContent=e.data,_.data.rlist=e.rlist,_.show=!0},{keys:v,table:h,columns:f}=oe([{type:"selection",width:40},{key:"domain",title:d("Site.TableRow.index_19"),ellipsis:{tooltip:{width:"trigger"}}},{key:"port",title:d("Site.TableRow.index_16"),width:80},{key:"path",title:d("Site.Config.index_33"),width:120,ellipsis:{tooltip:{width:"trigger"}}},ce({width:130,options:e=>[{label:d("Site.TableOP.index_10"),onClick:()=>{(async e=>{try{const{message:t}=await Ie({id:e.id});o(t)&&m(t)}catch(t){const a=Wt(t,"meesage.result","");a?n.error(a):ne({title:d("Site.Cert.index_40"),content:d("Site.PHP.index_80"),onConfirm:async({hide:t})=>{const{message:a}=await Oe({id:e.id});o(a)&&m(a),t()}})}})(e)}},{label:d("Public.Btn.Del"),onClick:()=>{ne({title:`${d("Ftp.Table.index_10")} ${e.path}`,content:d("Site.Config.index_34"),onConfirm:async({hide:t})=>{await Ne({id:e.id}),b(),t()}})}}]})]),x=[{key:"del",type:"confirm",label:d("Site.Batch.index_20"),confirm:{title:d("Site.Batch.index_21"),desc:d("Site.Batch.index_11"),api:e=>Ne({id:e.id},!1),done:()=>{b()},columns:[{key:"domain",title:d("Site.TableRow.index_19"),ellipsis:{tooltip:{width:"trigger"}}}]}}],{loading:y,setLoading:w}=de(),b=()=>{u.domain="",u.dirName=null,(async()=>{try{w(!0);const{message:e}=await Ae({id:r.id});if(o(e)){const{dirs:t,binding:a}=e;i(t)&&t.length>0?(c.value=t.map(e=>({label:e,value:e})),u.dirName=t[0]):(c.value=[],u.dirName=null),h.data=i(a)?a:[]}}finally{v.value=[],w(!1)}})()};return b(),a({init:b}),(e,t)=>{const a=zt,i=Ht,n=qt,s=Mt,o=re,d=ie,r=le,m=ra;return U(),P("div",null,[k(i,{class:"items-center",size:16},{default:E(()=>[k(i,{class:"items-center"},{default:E(()=>[R("div",null,T(e.$t("Site.TableRow.index_19")),1),R("div",Ya,[k(a,{value:j(u).domain,"onUpdate:value":t[0]||(t[0]=e=>j(u).domain=e),placeholder:"","input-props":{name:"domain"}},null,8,["value"])])]),_:1}),k(i,{class:"items-center"},{default:E(()=>[R("div",null,T(e.$t("Site.Config.index_33")),1),R("div",Za,[k(n,{value:j(u).dirName,"onUpdate:value":t[1]||(t[1]=e=>j(u).dirName=e),options:j(c)},null,8,["value","options"])])]),_:1}),k(s,{class:"add-domain-btn",type:"primary",onClick:p},{default:E(()=>[N(T(e.$t("Site.Cert.index_62")),1)]),_:1})]),_:1}),k(r,{class:"mt-16px"},{table:E(()=>[k(o,{"checked-row-keys":j(v),"onUpdate:checkedRowKeys":t[2]||(t[2]=e=>B(v)?v.value=e:null),loading:j(y),"max-height":440,data:j(h).data,columns:j(f)},null,8,["checked-row-keys","loading","data","columns"])]),pageLeft:E(()=>[k(d,{"checked-row-keys":j(v),"onUpdate:checkedRowKeys":t[3]||(t[3]=e=>B(v)?v.value=e:null),data:j(h).data,options:x},null,8,["checked-row-keys","data"])]),_:1}),k(m,{show:j(_).show,"onUpdate:show":t[4]||(t[4]=e=>j(_).show=e),title:j(_).title,data:j(_).data,width:600,"min-height":488,component:j(l)},null,8,["show","title","data","component"])])}}}),el={class:"pt-16px"},tl={class:"flex-1"},al={class:"w-240px"},ll={class:"mt-8px text-desc"},il={class:"flex-1"},nl={class:"w-240px"},sl={class:"mt-12px text-desc"},ol={class:"my-16px"},dl={class:"text-desc"},rl={class:"my-20px"},ul={class:"w-240px"},cl={class:"w-240px"},pl={class:"w-240px"},_l=C({__name:"index",setup(e,{expose:t}){const{t:a}=$(),{data:l}=Ha(),i=L(""),s=async()=>{if(""!==i.value.trim())try{await Me({id:l.id,name:l.name,path:i.value}),w()}catch(e){console.warn(e)}else n.error(a("Site.RulesError.index_13"))},r=L(null),u=L([]),c=async()=>{null!==r.value?(await He({id:l.id,runPath:r.value}),w()):n.error(a("Site.RulesError.index_15"))},p=L(!1),_=async()=>{await ze({id:l.id,path:l.path}),w()},m=L(!1),v=async()=>{await qe({id:l.id}),w()},h=L(!1),f=D({username_get:"",password_get_1:"",password_get_2:""}),x=async e=>{e||(await We({id:l.id}),w())},y=async()=>{""!==f.username_get.trim()?""!==f.password_get_1.trim()?""!==f.password_get_2.trim()?f.username_get.trim().length<3||f.password_get_1.trim().length<3?n.error(a("Site.RulesError.index_35")):f.password_get_1.trim()===f.password_get_2.trim()?(await Fe({id:l.id,username:f.username_get,password:f.password_get_1}),f.username_get="",f.password_get_1="",f.password_get_2="",w()):n.error(a("Site.RulesError.index_38")):n.error(a("Site.RulesError.index_37")):n.error(a("Site.RulesError.index_36")):n.error(a("Site.RulesError.index_34"))},w=()=>{(async()=>{const{message:e}=await Ke({id:l.id});o(e)&&(i.value=e.result||"/www")})(),(async()=>{const{message:e}=await Je({id:l.id,path:l.path});if(o(e)){r.value=Wt(e,"runPath.runPath",null),p.value=Wt(e,"userini",!1),m.value=Wt(e,"logs.result",!1),h.value=Wt(e,"pass.result",!1);const t=Wt(e,"runPath.dirs",[]);u.value=t.map(e=>({label:e,value:e}))}})()};return w(),t({init:w}),(e,t)=>{const a=ca,l=Mt,n=Ht,o=Ft,w=qt,b=d,g=Kt,S=zt,C=ua;return U(),P("div",el,[k(C,{"label-width":"140"},{default:E(()=>[k(o,{label:e.$t("Site.Lable.index_2"),"show-feedback":!1},{default:E(()=>[R("div",tl,[k(n,null,{default:E(()=>[R("div",al,[k(a,{value:j(i),"onUpdate:value":t[0]||(t[0]=e=>B(i)?i.value=e:null),"input-props":{name:"directory"}},null,8,["value"])]),k(l,{class:"save-dir-btn",type:"primary",onClick:s},{default:E(()=>[N(T(e.$t("Site.Cert.index_60")),1)]),_:1})]),_:1}),R("div",ll,T(e.$t("Site.Config.index_35")),1)])]),_:1},8,["label"]),k(o,{class:"mt-16px",label:e.$t("Site.Lable.index_3"),"show-feedback":!1},{default:E(()=>[R("div",il,[k(n,null,{default:E(()=>[R("div",nl,[k(w,{value:j(r),"onUpdate:value":t[1]||(t[1]=e=>B(r)?r.value=e:null),class:"run-select",options:j(u)},null,8,["value","options"])]),k(l,{class:"save-run-btn",type:"primary",onClick:c},{default:E(()=>[N(T(e.$t("Site.Cert.index_60")),1)]),_:1})]),_:1}),R("div",sl,T(e.$t("Site.Config.index_36")),1)])]),_:1},8,["label"]),R("div",ol,[k(b,{dashed:""})]),k(o,{label:e.$t("Site.Lable.index_4"),"show-feedback":!1},{default:E(()=>[k(n,{class:"items-center"},{default:E(()=>[k(g,{value:j(p),"onUpdate:value":[t[2]||(t[2]=e=>B(p)?p.value=e:null),_]},null,8,["value"]),R("div",dl,T(e.$t("Site.Config.index_37")),1)]),_:1})]),_:1},8,["label"]),k(o,{class:"mt-16px",label:e.$t("Site.Lable.index_5"),"show-feedback":!1},{default:E(()=>[k(n,{class:"items-center"},{default:E(()=>[k(g,{value:j(m),"onUpdate:value":[t[3]||(t[3]=e=>B(m)?m.value=e:null),v]},null,8,["value"]),t[8]||(t[8]=R("div",{class:"text-desc"},null,-1))]),_:1,__:[8]})]),_:1},8,["label"]),R("div",rl,[k(b,{dashed:""})]),k(o,{label:e.$t("Site.Lable.index_14"),"show-feedback":!1},{default:E(()=>[k(n,{class:"items-center"},{default:E(()=>[k(g,{value:j(h),"onUpdate:value":[t[4]||(t[4]=e=>B(h)?h.value=e:null),x]},null,8,["value"]),t[9]||(t[9]=R("div",{class:"text-desc"},null,-1))]),_:1,__:[9]})]),_:1},8,["label"]),j(h)?(U(),P(A,{key:0},[k(o,{class:"mt-16px",label:e.$t("Site.Lable.index_17"),"show-feedback":!1},{default:E(()=>[R("div",ul,[k(S,{value:j(f).username_get,"onUpdate:value":t[5]||(t[5]=e=>j(f).username_get=e),placeholder:e.$t("Site.Placeholder.Index_7")},null,8,["value","placeholder"])])]),_:1},8,["label"]),k(o,{class:"mt-16px",label:e.$t("Site.Lable.index_14"),"show-feedback":!1},{default:E(()=>[R("div",cl,[k(S,{value:j(f).password_get_1,"onUpdate:value":t[6]||(t[6]=e=>j(f).password_get_1=e),type:"password",placeholder:e.$t("Site.Placeholder.Index_7")},null,8,["value","placeholder"])])]),_:1},8,["label"]),k(o,{class:"mt-16px",label:e.$t("Site.Lable.index_18"),"show-feedback":!1},{default:E(()=>[R("div",pl,[k(S,{value:j(f).password_get_2,"onUpdate:value":t[7]||(t[7]=e=>j(f).password_get_2=e),type:"password",placeholder:e.$t("Site.Placeholder.Index_7")},null,8,["value","placeholder"])])]),_:1},8,["label"]),k(o,{class:"mt-16px",label:" ","show-feedback":!1},{default:E(()=>[k(l,{type:"primary",onClick:y},{default:E(()=>[N(T(e.$t("Site.Cert.index_60")),1)]),_:1})]),_:1})],64)):O("",!0)]),_:1})])}}}),ml={class:"p-20px"},vl={class:"w-280px"},hl={class:"w-280px"},fl={class:"w-280px"},xl={class:"w-280px"},yl=C({__name:"form",props:{data:{}},setup(e,{expose:t}){const a=e,{t:l}=$(),{isEdit:i,siteId:n,row:s,getList:o}=a.data,d=L(null),r=D({name:"",site_dir:"",username:"",password:""}),u={name:{required:!0,message:l("Site.RulesError.index_16"),trigger:["blur","input"]},site_dir:{required:!0,message:l("Site.RulesError.index_17"),trigger:["blur","input"]},username:{required:!0,message:l("Site.Placeholder.Index_6"),trigger:["blur","input"]},password:{required:!0,message:l("Site.Placeholder.Index_8"),trigger:["blur","input"]}};return i&&s&&(r.name=s.name,r.site_dir=s.site_dir),t({onConfirm:async({hide:e})=>{await(d.value?.validate()),i?await Ve({id:n,name:r.name,username:r.username,password:r.password}):await Xe({...M(r),id:n}),o?.(),e()}}),(e,t)=>{const a=zt,l=Ft,n=ua,s=pe;return U(),P("div",ml,[k(n,{ref_key:"formRef",ref:d,model:j(r),rules:u},{default:E(()=>[k(l,{label:e.$t("Site.TableRow.index_2"),path:"name"},{default:E(()=>[R("div",vl,[k(a,{value:j(r).name,"onUpdate:value":t[0]||(t[0]=e=>j(r).name=e),disabled:j(i),placeholder:"","input-props":{name:"name"}},null,8,["value","disabled"])])]),_:1},8,["label"]),k(l,{label:e.$t("Site.TableRow.index_15"),path:"site_dir"},{default:E(()=>[R("div",hl,[k(a,{value:j(r).site_dir,"onUpdate:value":t[1]||(t[1]=e=>j(r).site_dir=e),disabled:j(i),placeholder:e.$t("Site.Config.Limit.index_5"),"input-props":{name:"site_dir"}},null,8,["value","disabled","placeholder"])])]),_:1},8,["label"]),k(l,{label:e.$t("Site.Lable.index_24"),path:"username"},{default:E(()=>[R("div",fl,[k(a,{value:j(r).username,"onUpdate:value":t[2]||(t[2]=e=>j(r).username=e),placeholder:"","input-props":{name:"username"}},null,8,["value"])])]),_:1},8,["label"]),k(l,{label:e.$t("Site.Lable.index_27"),path:"password"},{default:E(()=>[R("div",xl,[k(a,{value:j(r).password,"onUpdate:value":t[3]||(t[3]=e=>j(r).password=e),placeholder:"","input-props":{name:"password"}},null,8,["value"])])]),_:1},8,["label"])]),_:1},8,["model"]),k(s,{class:"mt-4px"},{default:E(()=>[R("li",null,T(e.$t("Site.Config.index_40")),1),R("li",null,T(e.$t("Site.Config.index_41")),1)]),_:1})])}}}),wl=C({__name:"index",setup(e,{expose:t}){const{t:a}=$(),{data:l}=Ha(),{keys:i,table:n,columns:s}=oe([{type:"selection",width:40},{key:"name",title:a("Site.TableRow.index_2"),ellipsis:{tooltip:{width:"trigger"}}},{key:"site_dir",title:a("Site.TableRow.index_15"),ellipsis:{tooltip:{width:"trigger"}}},ce({width:130,options:e=>[{label:a("Site.TableOP.index_7"),class:"edit-btn",onClick:()=>{m(e)}},{label:a("Public.Btn.Del"),class:"delete-btn",onClick:()=>{ne({title:`${a("Site.Config.Limit.index_1",[e.name])}`,content:a("Site.Config.Limit.index_2"),onConfirm:async({hide:t})=>{await Ge({id:l.id,name:e.name}),c(),t()}})}}]})]),d=[{key:"del",type:"confirm",label:a("Site.Batch.index_20"),confirm:{title:a("Site.Batch.index_21"),desc:a("Site.Batch.index_11"),columns:[s.value[1]],api:e=>Ge({id:l.id,name:e.name},!1),done:()=>{c()}}}],{loading:r,setLoading:u}=de(),c=async()=>{try{u(!0);const{message:e}=await Ye({id:l.id});if(o(e)){n.data=[];for(const[t,a]of Object.entries(e))if(l.name===t){n.data=a;break}}}finally{i.value=[],u(!1)}},p=ue(a("Site.Config.index_38"),{row:void 0,siteId:l.id,isEdit:!1,getList:c}),_=()=>{p.data.isEdit=!1,p.title=a("Site.Config.index_38"),p.show=!0},m=e=>{p.data.row=e,p.data.isEdit=!0,p.title=a("Site.Config.index_39"),p.show=!0};return c(),t({init:c}),(e,t)=>{const a=Mt,l=re,o=ie,u=le,c=pe,m=ra;return U(),P("div",null,[k(u,null,{toolsLeft:E(()=>[k(a,{class:"add-limit-btn",type:"primary",onClick:_},{default:E(()=>[N(T(e.$t("Site.Config.index_38")),1)]),_:1})]),table:E(()=>[k(l,{"checked-row-keys":j(i),"onUpdate:checkedRowKeys":t[0]||(t[0]=e=>B(i)?i.value=e:null),"row-key":"name",loading:j(r),"max-height":440,data:j(n).data,columns:j(s)},null,8,["checked-row-keys","loading","data","columns"])]),pageLeft:E(()=>[k(o,{"checked-row-keys":j(i),"onUpdate:checkedRowKeys":t[1]||(t[1]=e=>B(i)?i.value=e:null),"row-key":"name",data:j(n).data,options:d},null,8,["checked-row-keys","data"])]),_:1}),k(c,{class:"mt-16px"},{default:E(()=>[R("li",null,T(e.$t("Site.Config.index_40")),1),R("li",null,T(e.$t("Site.Config.index_41")),1)]),_:1}),k(m,{show:j(p).show,"onUpdate:show":t[2]||(t[2]=e=>j(p).show=e),title:j(p).title,data:j(p).data,width:480,footer:!0,component:yl},null,8,["show","title","data"])])}}}),bl={class:"p-20px"},gl={class:"w-280px"},Sl={class:"w-280px"},kl={class:"w-280px"},Cl=C({__name:"form",props:{data:{}},setup(e,{expose:t}){const a=e,{isEdit:l,siteName:i,row:n,getList:s}=a.data,{t:o}=$(),d=L(null),r=D({deny_name:"",suffix:"php|jsp",dir:""}),u={deny_name:{required:!0,message:o("Site.Placeholder.Index_4"),trigger:["blur","input"]},suffix:{required:!0,message:o("Site.Placeholder.Index_5"),trigger:["blur","input"]},dir:{required:!0,message:o("Site.Placeholder.Index_6"),trigger:["blur","input"]}},c=()=>({...M(r),dir:r.dir.replace(/\/$/,"")+"/",website:i});return l&&n&&(r.deny_name=n.name,r.suffix=n.suffix,r.dir=n.dir),t({onConfirm:async({hide:e})=>{await(d.value?.validate()),l?await Ze(c()):await Qe(c()),s?.(),e()}}),(e,t)=>{const a=zt,i=Ft,n=ua,s=pe;return U(),P("div",bl,[k(n,{ref_key:"formRef",ref:d,model:j(r),rules:u},{default:E(()=>[k(i,{label:e.$t("Site.TableRow.index_2"),path:"deny_name"},{default:E(()=>[R("div",gl,[k(a,{value:j(r).deny_name,"onUpdate:value":t[0]||(t[0]=e=>j(r).deny_name=e),disabled:j(l),placeholder:e.$t("Site.Placeholder.Index_1"),"input-props":{name:"name"}},null,8,["value","disabled","placeholder"])])]),_:1},8,["label"]),k(i,{label:e.$t("Site.TableRow.index_18"),path:"suffix"},{default:E(()=>[R("div",Sl,[k(a,{value:j(r).suffix,"onUpdate:value":t[1]||(t[1]=e=>j(r).suffix=e),placeholder:e.$t("Site.Placeholder.Index_2"),"input-props":{name:"suffix"}},null,8,["value","placeholder"])])]),_:1},8,["label"]),k(i,{label:e.$t("Site.TableRow.index_15"),path:"dir"},{default:E(()=>[R("div",kl,[k(a,{value:j(r).dir,"onUpdate:value":t[2]||(t[2]=e=>j(r).dir=e),placeholder:e.$t("Site.Placeholder.Index_3"),"input-props":{name:"dir"}},null,8,["value","placeholder"])])]),_:1},8,["label"])]),_:1},8,["model"]),k(s,{class:"mt-4px"},{default:E(()=>[R("li",null,T(e.$t("Site.PHP.index_72")),1),R("li",null,T(e.$t("Site.PHP.index_73")),1),R("li",null,T(e.$t("Site.PHP.index_74")),1),R("li",null,T(e.$t("Site.PHP.index_75")),1),R("li",null,T(e.$t("Site.PHP.index_76")),1)]),_:1})])}}}),$l=C({__name:"index",setup(e,{expose:t}){const{t:a}=$(),{data:l}=Ha(),{keys:n,table:s,columns:o}=oe([{type:"selection",width:40},{key:"name",title:a("Site.TableRow.index_2"),ellipsis:{tooltip:{width:"trigger"}}},{key:"dir",title:a("Site.TableRow.index_15"),ellipsis:{tooltip:{width:"trigger"}}},{key:"suffix",title:a("Site.TableRow.index_18"),ellipsis:{tooltip:{width:"trigger"}}},ce({width:130,options:e=>[{label:a("Site.TableOP.index_7"),class:"edit-btn",onClick:()=>{m(e)}},{label:a("Public.Btn.Del"),class:"delete-btn",onClick:()=>{ne({title:`${a("Site.TableOP.index_6")} [${e.name}]`,content:a("Site.Batch.index_13"),onConfirm:async({hide:t})=>{await et({website:l.name,deny_name:e.name}),c(),t()}})}}]})]),d=[{key:"del",type:"confirm",label:a("Site.Batch.index_20"),confirm:{title:a("Site.Batch.index_21"),desc:a("Site.Batch.index_11"),columns:[o.value[1]],api:e=>et({website:l.name,deny_name:e.name},!1),done:()=>{c()}}}],{loading:r,setLoading:u}=de(),c=async()=>{try{u(!0);const{message:e}=await tt({website:l.name});s.data=i(e)?e:[]}finally{n.value=[],u(!1)}},p=ue(a("Site.Config.index_38"),{row:void 0,siteName:l.name,isEdit:!1,getList:c}),_=()=>{p.data.row=void 0,p.data.isEdit=!1,p.title=a("Site.Config.index_38"),p.show=!0},m=e=>{p.data.row=e,p.data.isEdit=!0,p.title=a("Site.Config.index_39"),p.show=!0};return c(),t({init:c}),(e,t)=>{const a=Mt,l=re,i=ie,u=le,c=pe,m=ra;return U(),P("div",null,[k(u,null,{toolsLeft:E(()=>[k(a,{class:"add-deny-btn",type:"primary",onClick:_},{default:E(()=>[N(T(e.$t("Site.Config.index_38")),1)]),_:1})]),table:E(()=>[k(l,{"checked-row-keys":j(n),"onUpdate:checkedRowKeys":t[0]||(t[0]=e=>B(n)?n.value=e:null),"row-key":"name",loading:j(r),"max-height":440,data:j(s).data,columns:j(o)},null,8,["checked-row-keys","loading","data","columns"])]),pageLeft:E(()=>[k(i,{"checked-row-keys":j(n),"onUpdate:checkedRowKeys":t[1]||(t[1]=e=>B(n)?n.value=e:null),"row-key":"name",data:j(s).data,options:d},null,8,["checked-row-keys","data"])]),_:1}),k(c,{class:"mt-16px"},{default:E(()=>[R("li",null,T(e.$t("Site.Config.index_42"))+" |",1),R("li",null,T(e.$t("Site.Config.index_43")),1),R("li",null,T(e.$t("Site.Config.index_44")),1),R("li",null,T(e.$t("Site.Config.index_45")),1)]),_:1}),k(m,{show:j(p).show,"onUpdate:show":t[2]||(t[2]=e=>j(p).show=e),title:j(p).title,data:j(p).data,width:480,footer:!0,component:Cl},null,8,["show","title","data"])])}}}),Ll=C({__name:"index",setup(e){const{t:t}=$(),a=L("limit"),l=[{key:"limit",label:t("Site.Config.index_5"),component:wl},{key:"deny",label:t("Site.Config.index_14"),component:$l}];return(e,t)=>{const i=pa;return U(),H(i,{value:j(a),"onUpdate:value":t[0]||(t[0]=e=>B(a)?a.value=e:null),options:l},null,8,["value"])}}}),Pl={class:"pt-8px"},Ul={class:"w-200px"},Rl={class:"flex flex-col"},El={class:"w-200px"},Tl={class:"mt-8px text-desc"},Bl={class:"flex flex-col"},jl={class:"w-200px"},Nl={class:"mt-8px text-desc"},Dl={class:"flex flex-col"},Il={class:"w-200px"},Ol={class:"mt-8px text-desc"},Al=C({__name:"index",setup(e,{expose:t}){const{t:a}=$(),{data:l}=Ha(),i=L(null),n=D({status:!1,type:0,perserver:300,perip:25,limit_rate:512}),s={perserver:{trigger:["blur","change"],validator:()=>!!n.perserver||new Error(a("Site.RulesError.index_318"))},perip:{trigger:["blur","change"],validator:()=>!!n.perip||new Error(a("Site.RulesError.index_319"))},limit_rate:{trigger:["blur","change"],validator:()=>!!n.limit_rate||new Error(a("Site.RulesError.index_320"))}},d=L([{label:"BBS/Blog",value:0,items:{perserver:300,perip:25,limit_rate:512}},{label:"Photofolio",value:1,items:{perserver:200,perip:10,limit_rate:1024}},{label:"Download",value:2,items:{perserver:50,perip:3,limit_rate:2048}},{label:"Mall",value:3,items:{perserver:500,perip:10,limit_rate:2048}},{label:"Portal",value:4,items:{perserver:400,perip:15,limit_rate:1024}},{label:"Corporate",value:5,items:{perserver:60,perip:10,limit_rate:512}},{label:"Video",value:6,items:{perserver:150,perip:4,limit_rate:1024}},{label:"Customize",value:7,items:{perserver:0,perip:0,limit_rate:0}}]),u=async e=>{e?_():(await at({id:l.id}),m())},c=(e,t)=>{const{items:a}=t;o(a)&&p(a)},p=e=>{n.perserver=e.perserver,n.perip=e.perip,n.limit_rate=e.limit_rate},_=async()=>{await(i.value?.validate()),await lt({id:l.id,perserver:n.perserver,perip:n.perip,limit_rate:n.limit_rate}),m()},m=async()=>{const{message:e}=await it({id:l.id});o(e)&&(n.status=0!=e.perserver,p(d.value[0].items),r(e.perserver)&&0!=e.perserver&&(n.perserver=e.perserver),r(e.perip)&&0!=e.perip&&(n.perip=e.perip),r(e.limit_rate)&&0!=e.limit_rate&&(n.limit_rate=e.limit_rate))};return m(),t({init:m}),(e,t)=>{const a=Jt,l=Ft,o=qt,r=Vt,p=Mt,m=ua;return U(),P("div",Pl,[k(m,{ref_key:"formRef",ref:i,"label-width":"150",class:"px-8px",model:j(n),rules:s},{default:E(()=>[k(l,{label:" "},{default:E(()=>[k(a,{checked:j(n).status,"onUpdate:checked":[t[0]||(t[0]=e=>j(n).status=e),u]},{default:E(()=>[N(T(e.$t("Site.PHP.index_82")),1)]),_:1},8,["checked"])]),_:1}),k(l,{label:e.$t("Site.Lable.index_40"),path:"type"},{default:E(()=>[R("div",Ul,[k(o,{value:j(n).type,"onUpdate:value":[t[1]||(t[1]=e=>j(n).type=e),c],options:j(d)},null,8,["value","options"])])]),_:1},8,["label"]),k(l,{label:e.$t("Site.Lable.index_41"),path:"perserver"},{default:E(()=>[R("div",Rl,[R("div",El,[k(r,{value:j(n).perserver,"onUpdate:value":t[2]||(t[2]=e=>j(n).perserver=e),"show-button":!1,min:0},null,8,["value"])]),R("div",Tl,T(e.$t("Site.PHP.index_83")),1)])]),_:1},8,["label"]),k(l,{label:e.$t("Site.Lable.index_45"),path:"perip"},{default:E(()=>[R("div",Bl,[R("div",jl,[k(r,{value:j(n).perip,"onUpdate:value":t[3]||(t[3]=e=>j(n).perip=e),"show-button":!1,min:0},null,8,["value"])]),R("div",Nl,T(e.$t("Site.PHP.index_84")),1)])]),_:1},8,["label"]),k(l,{label:e.$t("Site.Config.index_6"),path:"limit_rate"},{default:E(()=>[R("div",Dl,[R("div",Il,[k(r,{value:j(n).limit_rate,"onUpdate:value":t[4]||(t[4]=e=>j(n).limit_rate=e),"show-button":!1,min:0},null,8,["value"])]),R("div",Ol,T(e.$t("Site.PHP.index_85")),1)])]),_:1},8,["label"]),k(l,{label:" "},{default:E(()=>[k(p,{type:"primary",onClick:_},{default:E(()=>[N(T(e.$t("Site.Cert.index_60")),1)]),_:1})]),_:1})]),_:1},8,["model"])])}}}),Ml={class:"w-420px"},Hl={class:"mt-8px"},zl=C({__name:"index",setup(e,{expose:t}){const{data:a}=Ha(),l=L(""),i=async()=>{const{message:e}=await nt({id:a.id});o(e)&&(l.value=u(e.result)?e.result.split(",").join("\n"):"")},n=async()=>{await st({id:a.id,Index:l.value.trim().split("\n").join(",")}),i()};return i(),t({init:i}),(e,t)=>{const a=Ee,i=Mt,s=pe;return U(),P("div",null,[R("div",Ml,[k(a,{value:j(l),"onUpdate:value":t[0]||(t[0]=e=>B(l)?l.value=e:null),rows:12,name:"content",placeholder:""},null,8,["value"])]),R("div",Hl,[k(i,{class:"save-btn",type:"primary",onClick:n},{default:E(()=>[N(T(e.$t("Public.Btn.Save")),1)]),_:1})]),k(s,{class:"mt-16px"},{default:E(()=>[R("li",null,T(e.$t("Site.PHP.index_79")),1)]),_:1})])}}}),ql={class:"mt-8px"},Wl=C({__name:"index",setup(e,{expose:t}){const{multiService:a}=z(c()),{data:l}=Ha(),i=ae(),n=L(null),s=L(),d=L(""),r=async()=>{await(async()=>{const{message:e}=await _a({site_id:l.id});o(e)&&(s.value=e.result)})(),d.value=await(async()=>{const e=a.value?s.value:i.webserver;return`/www/server/panel/vhost/${"openlitespeed"===e?`${e}/detail`:e}/${l.name}.conf`})(),n.value?.getContent()},u=()=>{n.value?.saveFile()};return q(()=>{r()}),t({init:r}),(e,t)=>{const l=Xt,i=Mt,s=pe;return U(),P("div",null,[j(a)?(U(),H(l,{key:0,type:"warning",class:"mb-16px"},{default:E(()=>t[1]||(t[1]=[R("span",{class:"font-bold"},"Multi-WebServer Hosting Do not modify the port, otherwise the website will not be accessible normally",-1)])),_:1,__:[1]})):O("",!0),k(wa,{ref_key:"configRef",ref:n,path:j(d),"onUpdate:path":t[0]||(t[0]=e=>B(d)?d.value=e:null),height:"500","show-tips":!j(a)},null,8,["path","show-tips"]),R("div",ql,[k(i,{type:"primary",onClick:u},{default:E(()=>[N(T(e.$t("Site.Cert.index_60")),1)]),_:1})]),k(s,{class:"mt-16px"},{default:E(()=>[R("li",null,T(e.$t("Site.Config.index_59")),1),R("li",null,T(e.$t("Site.Config.index_60")),1)]),_:1})])}}}),Fl={class:"p-8"},Kl=C({__name:"form",setup(e,{expose:t}){const a=L(null),l=L(!1),i={path:{required:!0,message:"Please select the file directory",trigger:["blur","change"]},operation:{type:"array",required:!0,trigger:"change",message:"please select"}},n=D({path:"",operation:[]}),s=(e,t)=>{"dir"===t.type?(l.value=!0,n.operation=[0]):(l.value=!1,n.operation=[0,1,2])};return t({onConfirm:async()=>{await(a.value?.validate())}}),(e,t)=>{const o=ca,d=Ft,r=Jt,u=p,c=Gt,_=ua,m=Ht,v=pe;return U(),P("div",Fl,[k(m,null,{default:E(()=>[k(_,{ref_key:"formRef",ref:a,model:j(n),rules:i},{default:E(()=>[k(d,{label:"Detection path",path:"path"},{default:E(()=>[k(o,{disabled:"",value:j(n).path,"onUpdate:value":t[0]||(t[0]=e=>j(n).path=e),"checked-type":["dir","file"],placeholder:"Please select the file directory",onChange:s},null,8,["value"])]),_:1}),k(d,{label:"Alert operation",path:"operation"},{default:E(()=>[k(c,{value:j(n).operation,"onUpdate:value":t[1]||(t[1]=e=>j(n).operation=e)},{default:E(()=>[k(u,null,{default:E(()=>[k(r,{value:0},{default:E(()=>t[2]||(t[2]=[N(" Read ",-1)])),_:1,__:[2]}),k(r,{value:1,disabled:j(l)},{default:E(()=>t[3]||(t[3]=[N(" delete ",-1)])),_:1,__:[3]},8,["disabled"]),k(r,{value:2,disabled:j(l)},{default:E(()=>t[4]||(t[4]=[N(" Modify/increase ",-1)])),_:1,__:[4]},8,["disabled"])]),_:1})]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])]),_:1}),k(v,{class:"mt-16px"},{default:E(()=>t[5]||(t[5]=[R("li",null,"Directory temporarily only supports reading alarm operation",-1)])),_:1,__:[5]})])}}}),Jl={class:"p-5"},Vl={class:"mt-16px"},Xl=C({__name:"monitor",setup(e){const t=L(!1),a=L(!1),l=L([{key:"path",title:"path",ellipsis:{tooltip:{width:"trigger"}}},{key:"type",title:"type",ellipsis:{tooltip:{width:"trigger"}}},{key:"operation",title:"Alert operation",ellipsis:{tooltip:{width:"trigger"}}},{key:"name",title:"operate",ellipsis:{tooltip:{width:"trigger"}}}]),i=L([]);return(e,n)=>{const s=Mt,o=Ht,d=re,r=pe,u=ra;return U(),P("div",Jl,[R("div",null,[k(o,{justify:"space-between"},{default:E(()=>[k(s,{type:"primary",onClick:n[0]||(n[0]=e=>t.value=!0)},{default:E(()=>n[2]||(n[2]=[N(" Add monitor ",-1)])),_:1,__:[2]}),k(s,null,{icon:E(()=>n[3]||(n[3]=[R("img",{src:ga,class:"w-5"},null,-1)])),_:1})]),_:1})]),R("div",Vl,[k(d,{loading:j(a),"loading-num":6,data:j(i),columns:j(l)},null,8,["loading","data","columns"])]),R("div",null,[k(r,{class:"mt-16px"},{default:E(()=>[n[5]||(n[5]=R("li",null," The security alarm will monitor the behavior of the current website access to the non -current website file (for example: your site a.COM visited the file or directory of the site B.COM). ",-1)),n[6]||(n[6]=R("li",null,"Police frequency: 60 seconds of alarm behavior will only send an alarm once",-1)),R("li",null,[k(s,{text:"",class:"color-#20a53a"},{default:E(()=>n[4]||(n[4]=[N("Tutorial",-1)])),_:1,__:[4]})])]),_:1,__:[5,6]})]),k(u,{show:j(t),"onUpdate:show":n[1]||(n[1]=e=>B(t)?t.value=e:null),title:"Add file monitor",width:500,"min-height":148,footer:!0,component:Kl},null,8,["show"])])}}}),Gl=_({},[["render",function(e,t){return U(),P("div",null,"555")}]]),Yl={class:"box mt-16px"},Zl={key:0,class:"items-center warning"},Ql={class:"warning"},ei={class:"color-#f23836"},ti=C({__name:"index",props:{isInstall:{type:Boolean,default:!1},phpVersion:{default:"PHP"}},setup(e){const t=ae(),a=L(!1),i=L(!1),n=L(!1),s=e,o=c(),d=()=>{_e({source:114})},r=()=>{const e=a.value?"Open the site security alarm":"Close the site security alarm",t=a.value?"After opening, the alarm notice will be sent when the safety problem is detected. Do you continue?":"After closing, the website will no longer receive a security alarm. Do you continue?";ne({title:e,content:t,onConfirm:async()=>{const e=ma(a.value);console.log(e,"result")},onPublicClose:()=>{a.value=!a.value}})};return(e,u)=>{const c=Kt,p=Ht,_=Mt,m=pe,v=l,h=ba,f=ra;return U(),P(A,null,[R("div",Yl,[k(h,{install:j(o).isPro,class:"install"},W({default:E(()=>[k(p,{class:"items-center color-#666"},{default:E(()=>[u[8]||(u[8]=R("div",null,"Site protection",-1)),R("div",null,[k(c,{value:j(a),"onUpdate:value":[u[0]||(u[0]=e=>B(a)?a.value=e:null),r]},null,8,["value"])]),u[9]||(u[9]=R("div",null,"today: 0",-1)),u[10]||(u[10]=R("div",null,"Total alarm: 0",-1)),j(a)?O("",!0):(U(),P("div",Zl,[u[7]||(u[7]=R("img",{src:ka,class:"h-8"},null,-1)),R("span",Ql,[u[5]||(u[5]=N(" Please open ",-1)),R("span",ei,"PHP-"+T(s.phpVersion),1),u[6]||(u[6]=N(" protection first ",-1))])]))]),_:1,__:[8,9,10]}),k(p,{class:"mt-16px"},{default:E(()=>[k(_,{onClick:u[1]||(u[1]=e=>i.value=!0)},{default:E(()=>u[11]||(u[11]=[N("Monitor",-1)])),_:1,__:[11]}),k(_,{onClick:u[2]||(u[2]=e=>n.value=!0)},{default:E(()=>u[12]||(u[12]=[N("Trigger log",-1)])),_:1,__:[12]})]),_:1}),k(m,{class:"mt-16px"},{default:E(()=>u[13]||(u[13]=[R("li",null," Based on the PHP kernel monitoring tools, real -time monitoring of other invasive behaviors such as Trojan horses and vulnerabilities, I found that Trojan supports automatic isolation ",-1),R("li",null," The security alarm will monitor the behavior of the current website access to the non -current website file (for example: your site a.COM visited the file or directory of the site B.COM). When you wait for a cache, please do not turn on this option ",-1)])),_:1,__:[13]})]),_:2},[s.isInstall?{name:"desc",fn:E(()=>[k(p,{class:"items-center"},{default:E(()=>[u[16]||(u[16]=R("img",{src:Sa,class:"h-10"},null,-1)),R("span",null,[u[15]||(u[15]=N("If you need to use the [PHP website security alarm] function, please buy first ",-1)),k(v,{onClick:d},{default:E(()=>u[14]||(u[14]=[N("click to buy",-1)])),_:1,__:[14]})])]),_:1,__:[16]})]),key:"0"}:{name:"desc",fn:E(()=>[k(p,{class:"items-center"},{default:E(()=>[u[19]||(u[19]=R("img",{src:Sa,class:"h-10"},null,-1)),R("span",null,[u[18]||(u[18]=N("Currently not installed [PHP website security alarm], ",-1)),k(v,null,{default:E(()=>u[17]||(u[17]=[N("Click to install",-1)])),_:1,__:[17]})])]),_:1,__:[19]})]),key:"1"}]),1032,["install"])]),k(f,{show:j(i),"onUpdate:show":u[3]||(u[3]=e=>B(i)?i.value=e:null),title:"XXXXmonitor",width:1e3,"min-height":148,footer:!1,component:Xl},null,8,["show"]),k(f,{show:j(n),"onUpdate:show":u[4]||(u[4]=e=>B(n)?n.value=e:null),title:`[${j(t).siteName}] Site security log`,width:1e3,"min-height":148,footer:!1,component:Gl},null,8,["show","title"])],64)}}}),ai=_(ti,[["__scopeId","data-v-d159b1c0"]]),li={class:"w-140px"},ii={class:"my-16px"},ni={key:0,class:"my-16px"},si=C({__name:"index",setup(e,{expose:t}){const{data:a}=Ha(),l=ae(),s=L(null),r=L(!1),u=L(!1);let c="";const p=L([]),_=async()=>{null!==s.value?(await ot({siteName:a.name,version:s.value,other:c}),l.setRefresh(!0),f()):n.error("Please select a PHP version")},v=async()=>{const{message:e}=await ct({id:a.id});o(e)&&(r.value=e.result)},h=async e=>{await dt({id:a.id,act:e?1:0}),v()},f=()=>{(async()=>{const{message:e}=await va();o(e)&&(u.value=e.php_status)})(),v(),(async()=>{const{message:e}=await ut();i(e)&&(p.value=e.reverse().map(e=>({label:e.name,value:e.version})))})(),(async()=>{const{message:e}=await rt({siteName:a.name});o(e)&&(s.value=e.phpversion,c=e.php_other||"")})()};return f(),t({init:f}),(e,t)=>{const a=qt,l=Mt,i=Ht,n=pe,o=d,c=Kt;return U(),P("div",null,[k(i,{class:"items-center"},{default:E(()=>[R("div",null,T(e.$t("Site.Lable.index_22")),1),R("div",li,[k(a,{value:j(s),"onUpdate:value":t[0]||(t[0]=e=>B(s)?s.value=e:null),options:j(p)},null,8,["value","options"])]),R("div",null,[k(l,{type:"primary",onClick:_},{default:E(()=>[N(T(e.$t("Site.Cert.index_61")),1)]),_:1})])]),_:1}),k(n,{class:"mt-16px"},{default:E(()=>[R("li",null,T(e.$t("Site.Config.index_65")),1),R("li",null,T(e.$t("Site.Config.index_66")),1),R("li",null,T(e.$t("Site.Config.index_67")),1),R("li",null,T(e.$t("Site.Config.index_68")),1),R("li",null,T(e.$t("Site.Config.index_69")),1),R("li",null,T(e.$t("Site.Config.index_70")),1)]),_:1}),R("div",ii,[k(o,{dashed:""})]),k(i,{class:"items-center"},{default:E(()=>[R("div",null,T(e.$t("Site.Config.index_64")),1),R("div",null,[k(c,{value:j(r),"onUpdate:value":[t[1]||(t[1]=e=>B(r)?r.value=e:null),h]},null,8,["value"])])]),_:1}),k(n,{class:"mt-16px"},{default:E(()=>[R("li",null,T(e.$t("Site.Config.index_71")),1),R("li",null,T(e.$t("Site.Config.index_72")),1)]),_:1}),j(m)?(U(),P("div",ni,[k(o,{dashed:""}),k(ai,{isInstall:j(u),phpVersion:j(s)},null,8,["isInstall","phpVersion"])])):O("",!0)])}}}),oi={class:"mr-16px text-#777"},di={key:1,class:"text-#777"},ri={class:"w-200px mr-8px"},ui={class:"w-200px mr-8px"},ci=C({__name:"index",setup(e,{expose:t}){const{data:a}=Ha(),l=ae(),s=L(!1),d=L("--"),r=L("--"),u=L(a.cache_status),c=L(null),p=L([]),_=L(""),m=async()=>{await pt({s_id:a.id,version:r.value}),x()},v=async e=>{await _t({version:a.php_version,sitename:a.name,act:e}),a.cache_status=e,l.setRefresh(!0)},h=async()=>{await mt({s_id:a.id})},f=async()=>{c.value?""!==_.value.trim()?await vt({s_id:a.id,user:c.value,new_pass:_.value}):n.error("Please enter new password"):n.error("Please select user")},x=async()=>{const e=n.loading("Getting Wordpress information, please wait...");try{await(async()=>{const{message:e}=await ht({s_id:a.id});o(e)&&(d.value=e.local_v,r.value=e.online_v,s.value=e.update)})(),await(async()=>{const{message:e}=await ft({s_id:a.id});i(e)&&e.length>0?(p.value=e.map(e=>({label:e,value:e})),c.value=e[0]):(p.value=[],c.value=null)})()}finally{e.close()}};return x(),t({init:x}),(e,t)=>{const a=Mt,l=Ft,i=Jt,n=qt,o=zt,x=ua;return U(),P("div",null,[k(x,null,{default:E(()=>[k(l,{label:"WP Version"},{default:E(()=>[j(s)?(U(),P(A,{key:0},[R("div",oi,"The current version is: "+T(j(d)),1),k(a,{type:"primary",onClick:m},{default:E(()=>[N("Upgrade to "+T(j(r)),1)]),_:1})],64)):(U(),P("span",di,"The latest version"))]),_:1}),k(l,{label:"Cache"},{default:E(()=>[k(i,{checked:j(u),"onUpdate:checked":[t[0]||(t[0]=e=>B(u)?u.value=e:null),v],class:"mr-16px"},{default:E(()=>t[3]||(t[3]=[N(" Open cache ",-1)])),_:1,__:[3]},8,["checked"]),k(a,{type:"primary",onClick:h},{default:E(()=>t[4]||(t[4]=[N("Purge all cache",-1)])),_:1,__:[4]})]),_:1}),k(l,{label:"Reset password"},{default:E(()=>[R("div",ri,[k(n,{value:j(c),"onUpdate:value":t[1]||(t[1]=e=>B(c)?c.value=e:null),options:j(p)},null,8,["value","options"])]),R("div",ui,[k(o,{value:j(_),"onUpdate:value":t[2]||(t[2]=e=>B(_)?_.value=e:null),placeholder:"Please enter a new password"},null,8,["value"])]),k(a,{type:"primary",onClick:f},{default:E(()=>t[5]||(t[5]=[N("Save password",-1)])),_:1,__:[5]})]),_:1})]),_:1})])}}}),pi={class:"pt-8px"},_i={class:"w-180px mr-8px"},mi={class:"w-180px"},vi={class:"w-180px"},hi={class:"w-280px"},fi={class:"w-180px"},xi={class:"w-180px"},yi={class:"w-280px"},wi={class:"flex-1"},bi={key:0,class:"mb-16px text-error"},gi={key:1,class:"mb-16px text-error"},Si=C({__name:"index",setup(e,{expose:t}){const{t:a}=$(),{data:i}=Ha(),n=D({composer_version:"",php_version:"auto",composer_args:"install",composer_cmd:"",repo:"repos.packagist",composer_user:"www",composer_path:i.path}),s=L([]),d=[{label:a("Docker.App.index_4"),value:"install"},{label:a("Docker.App.index_3"),value:"update"}],r=[{label:a("Site.Lable.index_8"),value:"repos.packagist"}],c=[{label:a("Site.Lable.index_9"),value:"www"},{label:a("Site.Lable.index_10"),value:"root"}],p=L(""),_=L(""),m=async()=>{await xt({repo:n.repo}),x()},v=async()=>{await yt({path:i.path}),x()},h=()=>{ne({title:a("Site.PHP.index_77"),content:a("Site.PHP.index_78"),onConfirm:async()=>{await wt({php_version:n.php_version,composer_args:n.composer_args,composer_cmd:n.composer_cmd,repo:n.repo,path:n.composer_path,user:n.composer_user}),x()}})},f=()=>{s.value.unshift({label:a("Site.Lable.index_12"),value:"auto"})},x=async()=>{const{message:e}=await bt({path:i.path});o(e)&&(n.composer_version=e.result,e.comp_json&&(p.value=e.comp_json),u(e.comp_lock)&&(_.value=e.comp_lock),s.value=e.php_versions.filter(e=>"00"!==e.version).map(e=>({label:e.name,value:e.version})),f())};return f(),x(),t({init:x}),(e,t)=>{const a=zt,i=Mt,o=Ft,u=qt,f=ca,x=l,y=ua;return U(),P("div",pi,[k(y,{class:"px-8px"},{default:E(()=>[k(o,{label:e.$t("Site.TableRow.index_3"),path:"composer_version"},{default:E(()=>[R("div",_i,[k(a,{value:j(n).composer_version,"onUpdate:value":t[0]||(t[0]=e=>j(n).composer_version=e),disabled:!0,placeholder:""},null,8,["value"])]),k(i,{onClick:m},{default:E(()=>[N(T(e.$t("Docker.App.index_3")),1)]),_:1})]),_:1},8,["label"]),k(o,{label:e.$t("Site.TableRow.index_27"),path:"php_version"},{default:E(()=>[R("div",mi,[k(u,{value:j(n).php_version,"onUpdate:value":t[1]||(t[1]=e=>j(n).php_version=e),options:j(s)},null,8,["value","options"])])]),_:1},8,["label"]),k(o,{label:e.$t("Site.TableRow.index_28"),path:"composer_args"},{default:E(()=>[R("div",vi,[k(u,{value:j(n).composer_args,"onUpdate:value":t[2]||(t[2]=e=>j(n).composer_args=e),options:d},null,8,["value"])])]),_:1},8,["label"]),k(o,{label:e.$t("Site.TableRow.index_29"),path:"composer_cmd"},{default:E(()=>[R("div",hi,[k(a,{value:j(n).composer_cmd,"onUpdate:value":t[3]||(t[3]=e=>j(n).composer_cmd=e),placeholder:e.$t("Site.Cert.index_67")},null,8,["value","placeholder"])])]),_:1},8,["label"]),k(o,{label:e.$t("Site.Lable.index_32"),path:"repo"},{default:E(()=>[R("div",fi,[k(u,{value:j(n).repo,"onUpdate:value":t[4]||(t[4]=e=>j(n).repo=e),options:r},null,8,["value"])])]),_:1},8,["label"]),k(o,{label:e.$t("Ftp.Analysis.Index_27"),path:"composer_user"},{default:E(()=>[R("div",xi,[k(u,{value:j(n).composer_user,"onUpdate:value":t[5]||(t[5]=e=>j(n).composer_user=e),options:c},null,8,["value"])])]),_:1},8,["label"]),k(o,{label:e.$t("Site.Lable.index_26"),path:"composer_path"},{default:E(()=>[R("div",yi,[k(f,{value:j(n).composer_path,"onUpdate:value":t[6]||(t[6]=e=>j(n).composer_path=e)},null,8,["value"])])]),_:1},8,["label"]),k(o,{label:" ","show-feedback":!1},{default:E(()=>[R("div",wi,[j(p)?(U(),P("div",bi,T(j(p)),1)):O("",!0),j(_)?(U(),P("div",gi,[R("span",null,T(j(_)),1),k(x,{onClick:v},{default:E(()=>[N("["+T(e.$t("Site.TableOP.index_6"))+"]",1)]),_:1})])):O("",!0),k(i,{type:"primary",onClick:h},{default:E(()=>[N(T(e.$t("Site.Lable.index_11")),1)]),_:1})])]),_:1})]),_:1})])}}}),ki={class:"px-20px py-24px"},Ci={class:"w-120px"},$i={class:"w-120px"},Li={class:"w-200px"},Pi={class:"w-200px"},Ui={class:"w-200px"},Ri=C({__name:"form",props:{data:{}},setup(e,{expose:t}){const{t:a}=$(),l=e,{isEdit:n,siteId:s,siteName:o,row:d,getList:r}=l.data,u=L(null),c=D({redirectname:`${(new Date).valueOf()}`,type:1,holdpath:1,domainorpath:"domain",redirecttype:"301",redirectpath:"",redirectdomain:[],tourl:"http://"}),p={redirectdomain:{trigger:["change"],validator:()=>0!==c.redirectdomain.length||new Error(a("Site.RulesError.index_23"))},redirectpath:{trigger:["blur","input"],validator:()=>""!==c.redirectpath.trim()||new Error(a("Site.RulesError.index_24"))},tourl:{trigger:["blur","input"],validator:()=>""!==c.tourl.trim()||new Error(a("Site.RulesError.index_25"))}},_=[{label:"Domain name",value:"domain"},{label:"Path",value:"path"}],m=[{label:"301",value:"301"},{label:"302",value:"302"}],v=L([]),h=()=>{c.redirectdomain=[],c.redirectpath=""},{loading:f,setLoading:x}=de();return n&&d&&(c.redirectname=d.redirectname,c.type=d.type,c.holdpath=d.holdpath,c.redirecttype=d.redirecttype,c.redirectpath=d.redirectpath,c.domainorpath=d.domainorpath,c.redirectdomain=d.redirectdomain,c.tourl=d.tourl),(async()=>{try{x(!0);const{message:e}=await Be({id:s});v.value=i(e)?e.map(e=>({label:e.name,value:e.name})):[]}finally{x(!1)}})(),t({onConfirm:async({hide:e})=>{await(u.value?.validate());const t={...M(c),sitename:o};n?await St(t):await gt(t),r?.(),e()}}),(e,t)=>{const a=Kt,l=Ft,i=Ht,n=qt,s=zt,o=ua,d=pe;return U(),P("div",ki,[k(o,{ref_key:"formRef",ref:u,model:j(c),rules:p},{default:E(()=>[k(i,{size:60},{default:E(()=>[k(l,{label:e.$t("Site.Lable.index_34")},{default:E(()=>[k(a,{value:j(c).type,"onUpdate:value":t[0]||(t[0]=e=>j(c).type=e),"checked-value":1,"unchecked-value":0},null,8,["value"])]),_:1},8,["label"]),k(l,{label:e.$t("Site.TableRow.index_13"),"label-width":"120"},{default:E(()=>[k(a,{value:j(c).holdpath,"onUpdate:value":t[1]||(t[1]=e=>j(c).holdpath=e),"checked-value":1,"unchecked-value":0},null,8,["value"])]),_:1},8,["label"])]),_:1}),k(i,{size:30},{default:E(()=>[k(l,{label:e.$t("Site.TableRow.index_11")},{default:E(()=>[R("div",Ci,[k(n,{value:j(c).domainorpath,"onUpdate:value":[t[2]||(t[2]=e=>j(c).domainorpath=e),h],class:"type-select",options:_},null,8,["value"])])]),_:1},8,["label"]),k(l,{label:e.$t("Site.TableRow.index_12"),"label-width":"70"},{default:E(()=>[R("div",$i,[k(n,{value:j(c).redirecttype,"onUpdate:value":t[3]||(t[3]=e=>j(c).redirecttype=e),class:"mode-select",options:m},null,8,["value"])])]),_:1},8,["label"])]),_:1}),"domain"===j(c).domainorpath?(U(),H(l,{key:0,label:e.$t("Site.Lable.index_32"),path:"redirectdomain"},{default:E(()=>[R("div",Li,[k(n,{value:j(c).redirectdomain,"onUpdate:value":t[4]||(t[4]=e=>j(c).redirectdomain=e),class:"domain-select",multiple:!0,loading:j(f),options:j(v),"max-tag-count":"responsive",placeholder:"Select domain"},null,8,["value","loading","options"])])]),_:1},8,["label"])):O("",!0),"path"===j(c).domainorpath?(U(),H(l,{key:1,label:e.$t("Site.Lable.index_30"),path:"redirectpath"},{default:E(()=>[R("div",Pi,[k(s,{value:j(c).redirectpath,"onUpdate:value":t[5]||(t[5]=e=>j(c).redirectpath=e),placeholder:"","input-props":{name:"path"}},null,8,["value"])])]),_:1},8,["label"])):O("",!0),k(l,{label:e.$t("Site.Lable.index_33"),path:"tourl"},{default:E(()=>[R("div",Ui,[k(s,{value:j(c).tourl,"onUpdate:value":t[6]||(t[6]=e=>j(c).tourl=e),placeholder:"","input-props":{name:"url"}},null,8,["value"])])]),_:1},8,["label"])]),_:1},8,["model"]),k(d,{class:"mt-12px"},{default:E(()=>[R("li",null,T(e.$t("Site.Config.index_77")),1),R("li",null,T(e.$t("Site.Config.index_78")),1),R("li",null,T(e.$t("Site.Config.index_79")),1),R("li",null,T(e.$t("Site.Config.index_80")),1),R("li",null,T(e.$t("Site.Config.index_81")),1),R("li",null,T(e.$t("Site.Config.index_82")),1)]),_:1})])}}}),Ei={class:"p-20px"},Ti={class:"mt-12px"},Bi=C({__name:"config",props:{data:{}},emits:["close"],setup(e,{emit:t}){const a=e,{row:l,siteName:i,getList:s}=a.data,d=t,r=ae(),u=L(""),c=L(""),p=L(""),_=async()=>{const{message:e}=await Ct({path:p.value,data:u.value,encoding:c.value});o(e)&&n.success(e.msg),s?.(),d("close")};return(async()=>{const{message:e}=await kt({sitename:i,redirectname:l.redirectname,webserver:r.webserver});o(e)&&(p.value=e.file,u.value=e.data,c.value=e.encoding)})(),(e,t)=>{const a=Mt,l=pe;return U(),P("div",Ei,[k(wa,{value:j(u),"onUpdate:value":t[0]||(t[0]=e=>B(u)?u.value=e:null),height:350,"show-tips":!1},null,8,["value"]),R("div",Ti,[k(a,{type:"primary",onClick:_},{default:E(()=>[N(T(e.$t("Site.Cert.index_60")),1)]),_:1})]),k(l,{class:"mt-24px"},{default:E(()=>[R("li",null,T(e.$t("Site.Config.index_83")),1)]),_:1})])}}}),ji=C({__name:"index",setup(e,{expose:t}){const{t:a}=$(),{data:n}=Ha(),s=e=>({sitename:e.sitename,redirectname:e.redirectname,tourl:e.tourl,redirectdomain:e.redirectdomain,redirectpath:e.redirectpath,redirecttype:e.redirecttype,domainorpath:e.domainorpath}),{keys:o,table:d,columns:r}=oe([{type:"selection",width:40},{key:"sitename",title:a("Site.TableRow.index_11"),ellipsis:{tooltip:{width:"trigger"}},render:e=>"path"===e.domainorpath?e.redirectpath:e.sitename},{key:"redirecttype",title:a("Site.TableRow.index_12"),width:90},{key:"holdpath",title:a("Site.TableRow.index_13"),width:140,render:e=>k(l,{type:1===e.holdpath?"primary":"error",onClick:async()=>{await Pt({...s(e),type:e.type,holdpath:1===e.holdpath?0:1,status:e.type}),e.holdpath=1===e.holdpath?0:1}},{default:()=>[1===e.holdpath?a("Config.Alarm.index_18"):a("Public.Status.TurnOff")]})},{key:"type",title:a("Config.Safe.index_156"),width:100,render:e=>k(me,{value:e.type,"checked-value":1,"unchecked-value":0,"checked-title":a("Public.Status.Running"),"unchecked-title":a("Public.Status.Paused"),onClick:async t=>{await Pt({...s(e),type:t,holdpath:e.holdpath,status:e.type}),e.type=t}},null)},ce({width:140,options:e=>[{label:a("Site.TableOP.index_2"),class:"config-btn",onClick:()=>{x(e)}},{label:a("Site.TableOP.index_7"),class:"edit-btn",onClick:()=>{h(e)}},{label:a("Public.Btn.Del"),class:"delete-btn",onClick:()=>{ne({title:a("Site.Config.Redirect.index_1",[e.redirectname]),content:a("Site.Config.Redirect.index_2"),onConfirm:async()=>{await $t({sitename:n.name,redirectname:e.redirectname}),_()}})}}]})]),u=[{key:"del",type:"confirm",label:a("Site.Batch.index_20"),confirm:{title:a("Site.Batch.index_21"),desc:a("Site.Batch.index_11"),columns:[r.value[1]],api:e=>$t({sitename:n.name,redirectname:e.redirectname},!1),done:()=>{_()}}}],{loading:c,setLoading:p}=de(),_=async()=>{try{p(!0);const{message:e}=await Lt({sitename:n.name});d.data=i(e)?e:[]}finally{o.value=[],p(!1)}},m=ue(a("Site.Config.index_74"),{row:void 0,siteId:n.id,siteName:n.name,isEdit:!1,getList:_}),v=()=>{m.data.row=void 0,m.data.isEdit=!1,m.title=a("Site.Config.index_74"),m.show=!0},h=e=>{m.data.row=e,m.data.isEdit=!0,m.title=`${a("Site.Config.index_75")} [${e.redirectname}]`,m.show=!0},f=ue("",{row:void 0,siteName:n.name,getList:_}),x=e=>{f.data.row=e,f.title=`${a("Site.Config.index_76")} [${e.redirectname}]`,f.show=!0};return _(),t({init:_}),(e,t)=>{const a=Mt,l=re,i=ie,n=le,s=ra;return U(),P("div",null,[k(n,null,{toolsLeft:E(()=>[k(a,{class:"add-btn",type:"primary",onClick:v},{default:E(()=>[N(T(e.$t("Site.Config.index_73")),1)]),_:1})]),table:E(()=>[k(l,{"checked-row-keys":j(o),"onUpdate:checkedRowKeys":t[0]||(t[0]=e=>B(o)?o.value=e:null),"row-key":"redirectname",loading:j(c),"max-height":440,data:j(d).data,columns:j(r)},null,8,["checked-row-keys","loading","data","columns"])]),pageLeft:E(()=>[k(i,{"checked-row-keys":j(o),"onUpdate:checkedRowKeys":t[1]||(t[1]=e=>B(o)?o.value=e:null),"row-key":"redirectname",data:j(d).data,options:u},null,8,["checked-row-keys","data"])]),_:1}),k(s,{show:j(m).show,"onUpdate:show":t[2]||(t[2]=e=>j(m).show=e),title:j(m).title,data:j(m).data,width:660,footer:!0,component:Ri},null,8,["show","title","data"]),k(s,{show:j(f).show,"onUpdate:show":t[3]||(t[3]=e=>j(f).show=e),title:j(f).title,data:j(f).data,width:580,component:Bi},null,8,["show","title","data"])])}}}),Ni={class:"px-20px py-24px"},Di={class:"w-220px"},Ii={class:"w-220px"},Oi={class:"w-220px"},Ai={class:"w-220px"},Mi={class:"w-220px"},Hi={class:"w-220px"},zi={class:"w-220px"},qi=C({__name:"form",props:{data:{}},setup(e,{expose:t}){const{t:a}=$(),i=e,{isEdit:n,siteName:s,row:o,getList:d}=i.data,r=L(null),u=D({type:1,keepuri:1,proxyname:`proxy_${v(5)}`,cachetime:1,proxydir:"/",proxysite:"http://",todomain:"$host",cache:0,advancedfeature:0,sitename:s}),c=L([{key:"",value:""}]),p={proxyname:{trigger:["blur","input"],validator:()=>""!==u.proxyname.trim()||new Error(a("Site.RulesError.index_26"))},cachetime:{trigger:["blur","input"],validator:()=>!(1===u.cache&&!u.cachetime)||new Error(a("Site.RulesError.index_27"))},proxydir:{trigger:["blur","input"],validator:()=>""!==u.proxydir.trim()||new Error(a("Site.RulesError.index_28"))},proxysite:{trigger:["blur","input"],validator:()=>""!==u.proxysite.trim()||new Error(a("Site.RulesError.index_25"))},todomain:{trigger:["blur","input"],validator:()=>""!==u.todomain.trim()||new Error(a("Site.RulesError.index_29"))}},_=e=>{const t=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;e=(e=e.replace(/^http[s]?:\/\//,"")).replace(/(:|\?|\/|\\)(.*)$/,""),m.value||(t.test(e)?u.todomain="$host":u.todomain=e)},m=L(!1),f=()=>{u.todomain&&"$host"!==u.todomain&&(m.value=!0)},x=L([]),y=()=>{x.value.length>=3||x.value.push({sub1:"",sub2:""})};return y(),(()=>{if(n&&o){u.type=o.type,u.keepuri=o.keepuri,u.cache=o.cache,u.advancedfeature=o.advancedfeature,u.proxyname=o.proxyname,u.cachetime=o.cachetime,u.proxydir=o.proxydir,u.proxysite=o.proxysite,u.todomain=o.todomain,u.sitename=o.sitename,c.value=o.rewritedir.length?o.rewritedir.map(e=>({key:e.dir1,value:e.dir2})):[{key:"",value:""}];const e=o.subfilter.filter(e=>""!==e.sub1||""!==e.sub2);e.length>0&&(x.value=e)}})(),t({onConfirm:async({hide:e})=>{await(r.value?.validate());const t=(()=>{const e=[{sub1:"",sub2:""},{sub1:"",sub2:""},{sub1:"",sub2:""}];e.forEach((e,t)=>{x.value.length-1<t||(e.sub1=x.value[t].sub1,e.sub2=x.value[t].sub2)});const t=c.value.filter(e=>""!==e.key||""!==e.value).map(e=>({dir1:e.key,dir2:e.value}));return{...M(u),advanced:u.advancedfeature,subfilter:e,rewritedir:JSON.stringify(t)}})();n?await Rt(t):await Ut(t),d?.(),e()}}),(e,t)=>{const a=Kt,i=Ft,s=Ht,o=zt,d=Vt,m=Zt,v=Yt,w=h,b=l,g=Mt,S=ua,C=pe;return U(),P("div",Ni,[k(S,{ref_key:"formRef",ref:r,model:j(u),rules:p},{default:E(()=>[k(s,null,{default:E(()=>[k(i,{label:"Show Proxy Path"},{default:E(()=>[k(a,{value:j(u).keepuri,"onUpdate:value":t[0]||(t[0]=e=>j(u).keepuri=e),"checked-value":1,"unchecked-value":0},null,8,["value"])]),_:1}),k(i,{label:e.$t("Site.Lable.index_47")},{default:E(()=>[k(a,{value:j(u).cache,"onUpdate:value":t[1]||(t[1]=e=>j(u).cache=e),"checked-value":1,"unchecked-value":0},null,8,["value"])]),_:1},8,["label"]),k(i,{label:e.$t("Site.Lable.index_35")},{default:E(()=>[k(a,{value:j(u).advancedfeature,"onUpdate:value":t[2]||(t[2]=e=>j(u).advancedfeature=e),"checked-value":1,"unchecked-value":0},null,8,["value"])]),_:1},8,["label"])]),_:1}),k(i,{label:e.$t("Site.Lable.index_38"),path:"proxyname"},{default:E(()=>[R("div",Di,[k(o,{value:j(u).proxyname,"onUpdate:value":t[3]||(t[3]=e=>j(u).proxyname=e),disabled:j(n),placeholder:"","input-props":{name:"name"}},null,8,["value","disabled"])])]),_:1},8,["label"]),1===j(u).cache?(U(),H(i,{key:0,label:e.$t("Site.Lable.index_39"),path:"cachetime"},{default:E(()=>[R("div",Ii,[k(v,null,{default:E(()=>[k(d,{value:j(u).cachetime,"onUpdate:value":t[4]||(t[4]=e=>j(u).cachetime=e),min:1,"show-button":!1,placeholder:"","input-props":{name:"time"}},null,8,["value"]),k(m,{class:"w-70px text-center"},{default:E(()=>[N(T(j(u).cachetime>1?"Minutes":"Minute"),1)]),_:1})]),_:1})])]),_:1},8,["label"])):O("",!0),k(i,{label:e.$t("Site.TableRow.index_17"),path:"proxydir"},{default:E(()=>[R("div",Oi,[k(o,{value:j(u).proxydir,"onUpdate:value":t[5]||(t[5]=e=>j(u).proxydir=e),placeholder:"","input-props":{name:"dir"}},null,8,["value"])])]),_:1},8,["label"]),k(i,{label:e.$t("Site.Lable.index_33")},{default:E(()=>[R("div",Ai,[k(o,{value:j(u).proxysite,"onUpdate:value":[t[6]||(t[6]=e=>j(u).proxysite=e),_],placeholder:"","input-props":{name:"url"}},null,8,["value"])])]),_:1},8,["label"]),k(i,{label:e.$t("Site.Lable.index_36")},{default:E(()=>[R("div",Mi,[k(o,{value:j(u).todomain,"onUpdate:value":t[7]||(t[7]=e=>j(u).todomain=e),placeholder:"","input-props":{name:"domain"},onBlur:f},null,8,["value"])])]),_:1},8,["label"]),F(k(i,{label:"URL Rewrite"},{default:E(()=>[k(w,{class:"w-450px!",min:1,value:j(c),"onUpdate:value":t[8]||(t[8]=e=>B(c)?c.value=e:null),preset:"pair","key-placeholder":"/aaa","value-placeholder":"/bbb"},null,8,["value"])]),_:1},512),[[K,1===j(u).advancedfeature]]),F(k(i,{label:e.$t("Site.Lable.index_37")},{default:E(()=>[k(s,{class:"flex-1",vertical:""},{default:E(()=>[(U(!0),P(A,null,J(j(x),(t,a)=>(U(),H(s,{key:`${a+1}`,class:"sub-rows items-center"},{default:E(()=>[R("div",Hi,[k(o,{value:t.sub1,"onUpdate:value":e=>t.sub1=e,placeholder:e.$t("Site.Placeholder.index_20"),"input-props":{name:"sub1"}},null,8,["value","onUpdate:value","placeholder"])]),R("div",zi,[k(o,{value:t.sub2,"onUpdate:value":e=>t.sub2=e,placeholder:e.$t("Site.Placeholder.index_21"),"input-props":{name:"sub2"}},null,8,["value","onUpdate:value","placeholder"])]),R("div",null,[k(b,{type:"error",disabled:0===a&&1===j(x).length,onClick:e=>(e=>{x.value.length<=1||x.value.splice(e,1)})(a)},{default:E(()=>[N(T(e.$t("Public.Btn.Del")),1)]),_:2},1032,["disabled","onClick"])])]),_:2},1024))),128)),R("div",null,[k(g,{type:"primary",disabled:j(x).length>=3,onClick:y},{default:E(()=>[R("span",null,T(e.$t("Site.Config.index_87")),1)]),_:1},8,["disabled"])])]),_:1})]),_:1},8,["label"]),[[K,1===j(u).advancedfeature]])]),_:1},8,["model"]),k(C,{class:"mt-12px"},{default:E(()=>[R("li",null,T(e.$t("Site.Config.index_88")),1),R("li",null,T(e.$t("Site.Config.index_89")),1),R("li",null,T(e.$t("Site.Config.index_90")),1),R("li",null,T(e.$t("Site.Config.index_91")),1)]),_:1})])}}}),Wi={class:"p-20px"},Fi={class:"mt-12px"},Ki=C({__name:"config",props:{data:{}},emits:["close"],setup(e,{emit:t}){const{multiService:a}=z(c()),l=e,{row:i,siteName:s,getList:d}=l.data,{data:r}=Ha(),u=t,p=ae(),_=L(""),m=L(""),v=L(""),h=L(),f=async()=>{const{message:e}=await Et({path:v.value,data:_.value,encoding:m.value});o(e)&&n.success(e.msg),d?.(),u("close")};return(async()=>{await(async()=>{const{message:e}=await _a({site_id:r.id});o(e)&&(h.value=e.result)})(),(async()=>{const{message:e}=await Tt({sitename:s,proxyname:i.proxyname,webserver:a.value?h.value:p.webserver});o(e)&&(v.value=e.file,_.value=e.data,m.value=e.encoding)})()})(),(e,t)=>{const a=Mt,l=pe;return U(),P("div",Wi,[k(wa,{value:j(_),"onUpdate:value":t[0]||(t[0]=e=>B(_)?_.value=e:null),height:350,"show-tips":!1},null,8,["value"]),R("div",Fi,[k(a,{type:"primary",onClick:f},{default:E(()=>[N(T(e.$t("Site.Cert.index_60")),1)]),_:1})]),k(l,{class:"mt-24px"},{default:E(()=>[R("li",null,T(e.$t("Site.Config.index_83")),1)]),_:1})])}}}),Ji=C({__name:"index",setup(e,{expose:t}){const{t:a}=$(),{data:n}=Ha(),s=e=>({proxyname:e.proxyname,sitename:e.sitename,proxydir:e.proxydir,proxysite:e.proxysite,todomain:e.todomain,subfilter:e.subfilter,advanced:e.advanced,cachetime:e.cachetime,keepuri:e.keepuri,rewritedir:JSON.stringify(e.rewritedir),advancedfeature:e.advancedfeature}),{keys:o,table:d,columns:r}=oe([{type:"selection",width:40},{key:"proxyname",title:a("Site.TableRow.index_2"),width:80,ellipsis:{tooltip:{width:"trigger"}}},{key:"proxydir",title:a("Site.TableRow.index_17"),width:90,ellipsis:{tooltip:{width:"trigger"}}},{key:"proxysite",title:a("Site.Lable.index_33"),ellipsis:{tooltip:{width:"trigger"}},render:e=>k("a",{class:"text-primary text-primary-hover",href:e.proxysite,target:"_blank"},[e.proxysite])},{key:"cache",title:a("Site.Lable.index_31"),width:90,render:e=>k(l,{type:1===e.cache?"primary":"error",onClick:async()=>{await Rt({...s(e),type:e.type,cache:1===e.cache?0:1}),e.cache=1===e.cache?0:1}},{default:()=>[1===e.cache?"Enabled":"Disabled"]})},{key:"type",title:a("Site.TableRow.index_14"),width:90,render:e=>k(me,{value:e.type,"checked-value":1,"unchecked-value":0,"checked-title":"Running","unchecked-title":"Paused",onClick:async t=>{await Rt({...s(e),type:t,cache:e.cache}),e.type=t}},null)},ce({width:140,options:e=>[{label:a("Site.TableOP.index_2"),onClick:()=>{x(e)}},{label:a("Site.TableOP.index_7"),class:"edit-btn",onClick:()=>{h(e)}},{label:a("Public.Btn.Del"),class:"delete-btn",onClick:()=>{ne({title:a("Site.Config.Proxy.index_1",[e.proxyname]),content:a("Site.Config.Proxy.index_2"),onConfirm:async()=>{await Bt({sitename:n.name,proxyname:e.proxyname}),_()}})}}]})]),u=[{key:"del",type:"confirm",label:a("Site.Batch.index_20"),confirm:{title:a("Site.Batch.index_21"),desc:a("Site.Batch.index_11"),api:e=>Bt({sitename:n.name,proxyname:e.proxyname},!1),done:()=>{_()},columns:[{key:"proxyname",title:a("Site.TableRow.index_2"),ellipsis:{tooltip:{width:"trigger"}}}]}}],{loading:c,setLoading:p}=de(),_=async()=>{try{p(!0);const{message:e}=await jt({sitename:n.name});d.data=i(e)?e:[]}finally{o.value=[],p(!1)}},m=ue(a("Site.Config.index_86"),{row:void 0,siteName:n.name,isEdit:!1,getList:_}),v=()=>{m.data.row=void 0,m.data.isEdit=!1,m.title=a("Site.Config.index_86"),m.show=!0},h=e=>{m.data.row=e,m.data.isEdit=!0,m.title=`${a("Site.Config.index_75")} [${e.proxyname}]`,m.show=!0},f=ue("",{row:void 0,siteName:n.name,getList:_}),x=e=>{f.data.row=e,f.title=`${a("Site.Config.index_76")} [${e.proxyname}]`,f.show=!0};return _(),t({init:_}),(e,t)=>{const a=Mt,l=re,i=ie,n=le,s=ra;return U(),P("div",null,[k(n,null,{toolsLeft:E(()=>[k(a,{class:"add-btn",type:"primary",onClick:v},{default:E(()=>[N(T(e.$t("Site.Config.index_85")),1)]),_:1})]),table:E(()=>[k(l,{"checked-row-keys":j(o),"onUpdate:checkedRowKeys":t[0]||(t[0]=e=>B(o)?o.value=e:null),"row-key":"proxyname",loading:j(c),"max-height":440,data:j(d).data,columns:j(r)},null,8,["checked-row-keys","loading","data","columns"])]),pageLeft:E(()=>[k(i,{"checked-row-keys":j(o),"onUpdate:checkedRowKeys":t[1]||(t[1]=e=>B(o)?o.value=e:null),"row-key":"proxyname",data:j(d).data,options:u},null,8,["checked-row-keys","data"])]),_:1}),k(s,{show:j(m).show,"onUpdate:show":t[2]||(t[2]=e=>j(m).show=e),title:j(m).title,data:j(m).data,width:660,footer:!0,component:qi},null,8,["show","title","data"]),k(s,{show:j(f).show,"onUpdate:show":t[3]||(t[3]=e=>j(f).show=e),title:j(f).title,data:j(f).data,width:580,component:Ki},null,8,["show","title","data"])])}}}),Vi={class:"pt-8px"},Xi=C({__name:"index",setup(e,{expose:t}){const{data:a}=Ha(),l=L();return t({init:()=>{l.value.init()}}),(e,t)=>(U(),P("div",Vi,[k(Ca,{ref_key:"formRef",ref:l,site:j(a)},null,8,["site"])]))}}),Gi=C({__name:"index",setup(e,{expose:t}){const{data:a}=Ha(),l=L("None"),{loading:i,setLoading:n}=de(),s=async()=>{try{n(!0);const{message:e}=await Nt({siteName:a.name});o(e)&&(l.value=u(e.result)?e.result:"None")}finally{n(!1)}};return s(),t({init:s}),(e,t)=>{const a=$a,n=f;return U(),H(n,{class:"h-560px",show:j(i)},{default:E(()=>[k(a,{log:j(l)},null,8,["log"])]),_:1},8,["show"])}}}),Yi=C({__name:"index",setup(e,{expose:t}){const{data:a}=Ha(),l=L("None"),{loading:i,setLoading:n}=de(),s=async()=>{try{n(!0);const{message:e}=await Dt({siteName:a.name});o(e)&&(l.value=u(e.result)?e.result:"None")}finally{n(!1)}};return s(),t({init:s}),(e,t)=>{const a=$a,n=f;return U(),H(n,{class:"h-560px",show:j(i)},{default:E(()=>[k(a,{log:j(l)},null,8,["log"])]),_:1},8,["show"])}}}),Zi={class:"text-error"},Qi={class:"w-400px p-20px"},en={class:"mb-16px"},tn=C({__name:"index",setup(e,{expose:t}){const{t:a}=$(),i=ae(),{data:s}=Ha(),d=V(()=>{let e="";switch(i.webserver){case"nginx":e=".log";break;case"apache":e="-access_log";break;default:e="_ols.access_log"}return`/www/wwwlogs/${s.name}${e}`}),r=V(()=>{const e=d.value.split("/");return e[e.length-1]}),u=()=>{ne({title:a("Site.Config.index_104"),content:`${a("Site.Config.index_105")} [${r.value}] ${a("Site.Config.index_106")}`,onConfirm:async({hide:e})=>{await It({path:d.value}),e(),_()}})},c=L(!1),p=L(0),_=async()=>{c.value=!0,m()},m=(e=0)=>{let t=setTimeout(async()=>{const{message:e}=await Ot({path:d.value});o(e)&&(p.value=e.result,p.value>=100?(n.success(a("Site.Config.index_107")),c.value=!1,p.value=0,w(),clearTimeout(t)):m(1e3))},e)},v=e=>{ve({title:`[${e}] ${a("Site.Config.index_103")}`,data:{type:e,path:d.value},component:La})},{table:h,columns:f}=oe([{key:"start_time",title:a("Site.Cert.index_68")},{key:"time",title:a("Site.DelSite.index_6"),render:e=>`${e.time.substring(0,4)} s`},{key:"xss",title:a("Site.TableRow.index_4"),render:e=>e.xss>0?k("span",{class:"text-error"},[e.xss]):e.xss},{key:"sql",title:a("Site.TableRow.index_5"),render:e=>e.sql>0?k("span",{class:"text-error"},[e.sql]):e.sql},{key:"san",title:a("Site.TableRow.index_6"),render:e=>e.san>0?k("span",{class:"text-error"},[e.san]):e.san},{key:"php",title:a("Site.TableRow.index_27"),render:e=>e.php>0?k("span",{class:"text-error"},[e.php]):e.php},{key:"ip",title:a("Site.TableRow.index_7"),render:e=>e.ip>0?k(l,{onClick:()=>{v("ip")}},{default:()=>[e.ip]}):e.ip},{key:"url",title:a("Site.TableRow.index_8"),render:e=>e.url>0?k(l,{onClick:()=>{v("url")}},{default:()=>[e.url]}):e.url}]),{loading:x,setLoading:y}=de(),w=async()=>{try{y(!0);const{message:e}=await At({path:d.value});o(e)&&(h.data=[e])}finally{y(!1)}},b=()=>{w()};return b(),t({init:b}),(e,t)=>{const a=Mt,i=re,n=le,s=pe,o=Qt,d=ra;return U(),P("div",null,[k(n,null,{toolsLeft:E(()=>[k(a,{type:"primary",onClick:u},{default:E(()=>[N(T(e.$t("Site.Config.index_104")),1)]),_:1})]),table:E(()=>[k(i,{loading:j(x),"loading-num":1,data:j(h).data,columns:j(f)},null,8,["loading","data","columns"])]),_:1}),k(s,{class:"mt-16px"},{default:E(()=>[R("li",null,[N(T(e.$t("Site.Config.index_108"))+" ",1),R("span",Zi,T(e.$t("Site.Config.index_109")),1)]),R("li",null,T(e.$t("Site.Config.index_110")),1),R("li",null,T(e.$t("Site.Config.index_111")),1),R("li",null,T(e.$t("Site.Config.index_112")),1),R("li",null,[k(l,{href:"https://www.aapanel.com/forum/d/3351-nginx-waf-instructions",target:"_blank"},{default:E(()=>[N(T(e.$t("Site.Config.index_113")),1)]),_:1}),N(" "+T(e.$t("Site.Config.index_114")),1)])]),_:1}),k(d,{show:j(c),"onUpdate:show":t[0]||(t[0]=e=>B(c)?c.value=e:null)},{default:E(()=>[R("div",Qi,[R("div",en,T(e.$t("Site.Config.index_115")),1),k(o,{type:"line",status:"success",height:24,percentage:j(p),"border-radius":4,"indicator-placement":"inside"},null,8,["percentage"])])]),_:1},8,["show"])])}}}),an=C({__name:"index",setup(e,{expose:t}){const{t:a}=$(),{config:l}=Ha(),i=L("access"),n=L(),s=[{key:"access",label:a("Site.Config.index_100"),component:Gi},{key:"error",label:a("Site.Config.index_101"),component:Yi},{key:"security",label:a("Site.Config.index_102"),component:tn}];return i.value=l.subMenu||"access",l.subMenu="",t({init:()=>{i.value="access",X(()=>{n.value?.init()})}}),(e,t)=>{const a=pa;return U(),H(a,{value:j(i),"onUpdate:value":t[0]||(t[0]=e=>B(i)?i.value=e:null),ref_key:"tabsRef",ref:n,options:s},null,8,["value"])}}}),ln={class:"cert-info"},nn={class:"cert-label"},sn={class:"cert-value"},on={class:"cert-info"},dn={class:"cert-label"},rn={class:"cert-value"},un={class:"cert-info"},cn={class:"cert-label"},pn={class:"cert-value"},_n={class:"cert-info"},mn={class:"cert-label"},vn={class:"cert-value"},hn={key:0,class:"text-primary"},fn={key:1,class:"text-error"},xn={class:"cert-info"},yn={class:"cert-label"},wn={class:"cert-value"},bn={class:"w-48%"},gn={class:"mb-8px"},Sn={class:"w-48%"},kn={class:"mb-8px"},Cn=C({__name:"index",props:{info:{default:null},isRenew:{type:Boolean,default:!1},loading:{type:Boolean,default:!1}},emits:["refresh"],setup(e,{expose:a,emit:i}){const d=I(()=>s(()=>t.import("./ssl-log-legacy.js?v=1758789124250"),void 0)),r=e,u=i,{t:c}=$(),{data:p}=Ha(),_=ue(c("SSL.index_43")),m=ae(),v=L(-1),h=L(!1),y=L(!1),w=L(""),b=L("");let g="";const S=L("");let C="";const D=L({issuer:"",notAfter:"",notBefore:"",dns:[],subject:"",endtime:0}),A=V(()=>v.value===Ba.LetsEncryptDeploy?c("Site.Cert.index_65"):v.value===Ba.BusinessDeploy?c("Site.Cert.index_64"):v.value===Ba.TestDeploy?c("Site.Cert.index_38"):c("Site.Cert.index_37")),M=V(()=>!!S.value),z=V(()=>r.isRenew||v.value===Ba.LetsEncryptDeploy),q=V(()=>!1),W=V(()=>h.value),F=async e=>{e?(await Ua({siteName:p.name}),u("refresh")):ne({title:c("Site.Cert.index_12"),content:c("Site.Cert.index_13"),onConfirm:async()=>{await Pa({siteName:p.name}),u("refresh")},onPublicClose:()=>{y.value=!0}})},K=()=>{""!==b.value.trim()&&""!==S.value.trim()?b.value!==g&&g||S.value!==C&&C?ne({title:c("Site.Cert.index_10"),content:c("Site.Cert.index_11"),onConfirm:async()=>{await J()}}):J():n.error(c("Site.Cert.index_9"))},J=async()=>{const{message:e}=await he({key:b.value,cert:S.value});o(e)&&e.hash&&(await fe({hash:e.hash,domains:JSON.stringify([p.name]),append:1}),n.success(c("SSL.index_32"))),Z()},X=async()=>{const{message:e}=await xe({hash:r.info?.hash||""});o(e)&&(_.data.path=e.result,_.show=!0)},Y=async()=>{await Ra({updateOf:1,siteName:p.name}),Z()},Z=()=>{u("refresh"),m.setRefresh(!0)};return G(()=>{const{info:e}=r;e&&(v.value=e.type,h.value=e.status,y.value=e.httpTohttps,b.value=e.key||"",g=e.key||"",S.value=e.csr||"",C=e.csr||"",D.value=e.cert_data,w.value=e.index)}),a({init:u("refresh")}),(e,t)=>{const a=l,i=ea,n=ta,s=Kt,o=x,r=Xt,u=Ee,c=Ht,p=Mt,m=pe,v=ra,w=f;return U(),H(w,{show:e.loading},{default:E(()=>[j(M)?(U(),H(r,{key:0,class:"mb-16px",type:"success","show-icon":!1},{default:E(()=>[k(o,{"x-gap":12,cols:"15"},{default:E(()=>[k(i,{span:"8"},{default:E(()=>[R("div",ln,[R("div",nn,T(e.$t("Site.Cert.index_44"))+T(e.$t("Public.Punctuation.Colon")),1),R("div",sn,[k(a,null,{default:E(()=>[N(T(j(A)),1)]),_:1})])])]),_:1}),k(i,{span:"7"},{default:E(()=>[R("div",on,[R("div",dn,T(e.$t("Site.Cert.index_45"))+T(e.$t("Public.Punctuation.Colon")),1),R("div",rn,[k(n,null,{default:E(()=>[N(T(j(D).issuer||"other"),1)]),_:1})])])]),_:1}),k(i,{span:"8"},{default:E(()=>[R("div",un,[R("div",cn,T(e.$t("Site.Cert.index_46"))+T(e.$t("Public.Punctuation.Colon")),1),R("div",pn,[k(n,null,{default:E(()=>[N(T(j(D).dns.join(e.$t("Public.Punctuation.Comma"))),1)]),_:1})])])]),_:1}),k(i,{span:"7"},{default:E(()=>[R("div",_n,[R("div",mn,T(e.$t("Site.Cert.index_47"))+T(e.$t("Public.Punctuation.Colon")),1),R("div",vn,[j(D).endtime>0?(U(),P("span",hn,T(e.$t("Site.Cert.index_48",{date:j(D).notAfter,days:j(D).endtime})),1)):(U(),P("span",fn,T(e.$t("Site.Cert.index_47")),1))])])]),_:1}),k(i,{span:"8"},{default:E(()=>[R("div",xn,[R("div",yn,T(e.$t("Site.Cert.index_49"))+T(e.$t("Public.Punctuation.Colon")),1),R("div",wn,[k(s,{value:j(y),"onUpdate:value":[t[0]||(t[0]=e=>B(y)?y.value=e:null),F],size:"small"},null,8,["value"])])])]),_:1})]),_:1})]),_:1})):O("",!0),k(c,{class:"mb-16px",size:10,justify:"space-between"},{default:E(()=>[R("div",bn,[R("div",gn,T(e.$t("Site.Cert.index_50")),1),k(u,{value:j(b),"onUpdate:value":t[1]||(t[1]=e=>B(b)?b.value=e:null),rows:10},null,8,["value"])]),R("div",Sn,[R("div",kn,T(e.$t("Site.Cert.index_51")),1),k(u,{value:j(S),"onUpdate:value":t[2]||(t[2]=e=>B(S)?S.value=e:null),rows:10},null,8,["value"])])]),_:1}),k(c,{class:"mb-12px"},{default:E(()=>[k(p,{type:"primary",onClick:K},{default:E(()=>[N(T(j(h)?e.$t("Public.Btn.Save"):e.$t("Site.Cert.index_52")),1)]),_:1}),j(z)?(U(),H(p,{key:0,type:"primary",onClick:X},{default:E(()=>[N(T(e.$t("Site.Cert.index_53")),1)]),_:1})):O("",!0),j(q)?(U(),H(p,{key:1},{default:E(()=>[N(T(e.$t("Site.Cert.index_54")),1)]),_:1})):O("",!0),j(W)?(U(),H(p,{key:2,onClick:Y},{default:E(()=>[N(T(e.$t("Site.Cert.index_55")),1)]),_:1})):O("",!0)]),_:1}),k(m,null,{default:E(()=>[R("li",null,T(e.$t("Site.Cert.index_33")),1),R("li",null,T(e.$t("Site.Cert.index_34")),1),R("li",null,T(e.$t("Site.Cert.index_35")),1),R("li",null,T(e.$t("Site.Cert.index_36")),1)]),_:1}),k(v,{show:j(_).show,"onUpdate:show":t[3]||(t[3]=e=>j(_).show=e),title:j(_).title,data:j(_).data,width:650,"min-height":450,component:j(d)},null,8,["show","title","data","component"])]),_:1},8,["show"])}}}),$n=_(Cn,[["__scopeId","data-v-092276eb"]]),Ln={class:"business-top-tips flex flex-wrap border-#d6e9c6 border-1px rounded-5px p-12px"},Pn={class:"text-#3c763d w-100%"},Un=C({__name:"top-tips",setup(e){const{t:t}=$(),a=[t("SSL.SiteSSL.index_5"),t("SSL.SiteSSL.index_6"),t("SSL.SiteSSL.index_7"),t("SSL.SiteSSL.index_8"),t("SSL.SiteSSL.index_9"),t("SSL.SiteSSL.index_10"),t("SSL.SiteSSL.index_11")];return(e,t)=>{const l=y,i=Ht;return U(),P("div",Ln,[(U(),P(A,null,J(a,(e,t)=>k(i,{size:5,key:e,class:Y(["flex-nowrap! leading-20px",{"w-33%":t!==a.length-1}])},{default:E(()=>[k(l,{name:"base-tick",size:16,color:"#ff8d00"}),R("span",Pn,T(e),1)]),_:2},1032,["class"])),64))])}}}),Rn=_(Un,[["__scopeId","data-v-77483f61"]]),En={class:"my-10px"},Tn=C({__name:"table",setup(e){const a=I(()=>s(()=>t.import("./index-legacy213.js?v=1758789124250"),void 0)),l=I(()=>s(()=>t.import("./index-legacy214.js?v=1758789124250"),void 0)),i=I(()=>s(()=>t.import("./domain-verification-legacy.js?v=1758789124250"),void 0)),n=ae(),d=c(),{userInfo:r}=z(d),{t:u}=$(),p=D({p:1,limit:9999}),_=ue(u("SSL.Business.index_41"),{onRefresh:(e,t)=>{h.data.request=!0,h.data.uc_id=t,h.data.verify=e,h.show=!0,w()}}),m=ue(u("SSL.index_44")),v=ue(u("SSL.index_49"),{onRefresh:()=>{w(),n.setRefresh(!0)}}),h=ue(u("SSL.Business.index_42"),{onRefresh:()=>{w()}}),{table:f,columns:x}=oe([{key:"verify_domains",title:u("Layout.Sider.mail_3"),render:e=>k("span",{innerHTML:e.verify_domains&&e.verify_domains.length>0?e.verify_domains.join("<br/>"):"--"},null)},{key:"title",title:u("Site.Cert.index_44"),render:e=>e.order_info.title,ellipsis:{tooltip:!0}},ja({title:u("SSL.index_54")}),{key:"order_status",title:u("SSL.Business.index_43"),render:e=>{const t=e.order_info;return t.certId||t.domains.length?!t.certId&&t.domains.length?k("span",{class:"color-warning"},[N(" "),u("SSL.Business.index_45"),N(" ")]):"PENDING"===t.order_status&&1===t.status?k("span",{class:"color-warning"},[N(" "),u("SSL.Business.index_46"),N(" ")]):"COMPLETE"===t.order_status&&1===t.status?k("span",{class:"color-#20a53a"},[N(" "),u("SSL.Business.index_47"),N(" ")]):"CANCELLED"===t.order_status&&1===t.status||-1===t.status?k("span",{class:"color-warning"},[N(" "),u("SSL.Business.index_48"),N(" ")]):"FAILED"===t.order_status&&1===t.status?k("span",{class:"color-error"},[N(" "),u("SSL.Business.index_49"),N(" ")]):"EXPIRED"===t.order_status&&1===t.status?k("span",{class:"color-warning"},[N(" "),u("SSL.Business.index_50"),N(" ")]):1!==t.status||["PENDING","COMPLETE","CANCELLED","FAILED","EXPIRED"].includes(t.order_status)?0===t.status?k("span",{class:"color-warning"},[N(" "),u("SSL.Business.index_52"),N(" ")]):void 0:k("span",{class:"color-warning"},[N(" "),u("SSL.Business.index_51"),N(" ")]):k("span",{class:"color-warning cursor-pointer",onClick:()=>y(e)},[" ",u("SSL.Business.index_44")," "])}},ce({width:140,options:e=>[{show:!e.order_info.certId&&!e.order_info.domains.length,label:u("SSL.Business.index_53"),onClick:()=>{y(e)}},{show:"PENDING"===e.order_info.order_status&&1===e.order_info.status,label:u("SSL.Business.index_54"),onClick:async()=>{const{message:t}=await ye({uc_id:e.order_info.uc_id});o(t)&&(h.data.uc_id=e.order_info.uc_id,h.data.verify=t.data,h.data.paths=t.paths,h.show=!0)}},{show:"COMPLETE"===e.order_info.order_status&&1===e.order_info.status,label:u("SSL.index_58"),onClick:async()=>{v.data.row=e,v.show=!0}},{show:"COMPLETE"===e.order_info.order_status&&1===e.order_info.status,label:u("Ftp.Label.index_11"),onClick:async()=>{const t=window.location.origin+"/v2/business_ssl?action=download_cert&uc_id="+e.order_info.uc_id;window.open(t)}},{show:!1,label:u("Public.Btn.Del"),onClick:()=>{ne({title:u("SSL.index_59"),content:u("SSL.index_60"),onConfirm:async()=>{await we({hash:e.hash}),w()}})}}]})]),y=e=>{_.data.row=e,_.show=!0},w=async()=>{try{f.loading=!0;const{message:e}=await be(p);o(e)&&(f.data=e.data,f.total=e.total)}finally{f.loading=!1}};return r.value.status&&w(),(e,t)=>{const n=Mt,s=re,o=le,d=ra,c=ba;return U(),P("div",En,[k(c,{install:j(r).status},{desc:E(()=>[t[6]||(t[6]=R("span",{class:"mr-10px"},"Business certificates require login panel to start using them",-1)),k(n,{type:"primary",onClick:t[0]||(t[0]=()=>j(ge)())},{default:E(()=>[N(T(e.$t("Login.index_3")),1)]),_:1})]),default:E(()=>[k(o,null,{toolsLeft:E(()=>[k(n,{type:"primary",onClick:t[1]||(t[1]=e=>j(m).show=!0)},{default:E(()=>[N(T(j(u)("SSL.index_44")),1)]),_:1})]),table:E(()=>[k(s,{loading:j(f).loading,data:j(f).data,columns:j(x),"max-height":220},null,8,["loading","data","columns"])]),_:1}),k(d,{show:j(m).show,"onUpdate:show":t[2]||(t[2]=e=>j(m).show=e),title:j(m).title,data:j(m).data,"min-height":250,component:Na},null,8,["show","title","data"]),k(d,{show:j(_).show,"onUpdate:show":t[3]||(t[3]=e=>j(_).show=e),title:j(_).title,data:j(_).data,width:650,"min-height":450,component:j(a)},null,8,["show","title","data","component"]),k(d,{show:j(v).show,"onUpdate:show":t[4]||(t[4]=e=>j(v).show=e),title:j(v).title,data:j(v).data,width:720,height:530,component:j(l)},null,8,["show","title","data","component"]),k(d,{show:j(h).show,"onUpdate:show":t[5]||(t[5]=e=>j(h).show=e),title:j(h).title,data:j(h).data,width:650,"min-height":450,component:j(i)},null,8,["show","title","data","component"])]),_:1},8,["install"])])}}}),Bn={class:"text-error"},jn=_({},[["render",function(e,t){const a=l,i=pe;return U(),H(i,null,{default:E(()=>[R("li",Bn,T(e.$t("SSL.SiteSSL.index_1")),1),R("li",null,T(e.$t("SSL.SiteSSL.index_2")),1),R("li",null,T(e.$t("SSL.SiteSSL.index_3")),1),R("li",null,[N(T(e.$t("SSL.SiteSSL.index_4"))+" ",1),k(a,{href:"https://www.aapanel.com/docs/Function/BusinessCertificate.html",target:"_blank"},{default:E(()=>[N(T(e.$t("SSL.Business.index_20")),1)]),_:1})])]),_:1})}]]),Nn=C({__name:"index",setup:e=>(e,t)=>(U(),P("div",null,[k(Rn),k(Tn),k(jn)]))}),Dn={class:"cert-info"},In={class:"cert-label"},On={class:"cert-value"},An={class:"cert-info"},Mn={class:"cert-label"},Hn={class:"cert-value"},zn={class:"cert-info"},qn={class:"cert-label"},Wn={class:"cert-value"},Fn={class:"cert-info"},Kn={class:"cert-label"},Jn={class:"cert-value"},Vn={key:0,class:"text-primary"},Xn={key:1,class:"text-error"},Gn={class:"w-48%"},Yn={class:"mb-8px"},Zn={class:"w-48%"},Qn={class:"mb-8px"},es=C({__name:"cert",emits:["update"],setup(e,{emit:a}){const l=I(()=>s(()=>t.import("./ssl-log-legacy.js?v=1758789124250"),void 0)),i=a,{t:n}=$(),{data:d}=Ha(),r=ue(n("SSL.index_43")),u=ae(),c=L(!1),p=L(1),_=L(""),m=L(""),v=D({hash:"",issuer:"",notAfter:"",notBefore:"",dns:[],subject:"",endtime:0}),h=async()=>{const{message:e}=await xe({hash:v.hash});o(e)&&(r.data.path=e.result,r.show=!0)},y=async()=>{await Ra({updateOf:1,siteName:d.name}),i("update"),u.setRefresh(!0)},{loading:w,setLoading:b}=de();return(async()=>{try{b(!0);const{message:e}=await Ea({siteName:d.name});o(e)&&(c.value=e.status,v.hash=e.hash,v.issuer=e.cert_data.issuer,v.notAfter=e.cert_data.notAfter,v.notBefore=e.cert_data.notBefore,v.dns=e.cert_data.dns,v.subject=e.cert_data.subject,v.endtime=e.cert_data.endtime,_.value=e.key,m.value=e.csr,p.value=e.auto_renew)}finally{b(!1)}})(),(e,t)=>{const a=ea,i=ta,n=x,s=Xt,o=Ee,d=Ht,u=Mt,c=pe,b=ra,g=f;return U(),H(g,{show:j(w)},{default:E(()=>[k(s,{class:"mb-16px",type:"success","show-icon":!1},{default:E(()=>[k(n,{"x-gap":12,cols:"15"},{default:E(()=>[j(p)?(U(),H(a,{key:0,span:"16"},{default:E(()=>[R("div",Dn,[R("div",In,T(e.$t("SSL.SiteSSL.index_22"))+"",1),R("div",On,T(e.$t("SSL.SiteSSL.index_23")),1)])]),_:1})):O("",!0),k(a,{span:"7"},{default:E(()=>[R("div",An,[R("div",Mn,T(e.$t("Site.Cert.index_45"))+"",1),R("div",Hn,[k(i,null,{default:E(()=>[N(T(j(v).issuer),1)]),_:1})])])]),_:1}),k(a,{span:"8"},{default:E(()=>[R("div",zn,[R("div",qn,T(e.$t("Site.Cert.index_46"))+"",1),R("div",Wn,[k(i,null,{default:E(()=>[N(T(j(v).dns.join(e.$t("Public.Punctuation.Comma"))),1)]),_:1})])])]),_:1}),k(a,{span:"7"},{default:E(()=>[R("div",Fn,[R("div",Kn,T(e.$t("Site.Cert.index_47"))+T(e.$t("Public.Punctuation.Colon")),1),R("div",Jn,[j(v).endtime>0?(U(),P("span",Vn,T(e.$t("Site.Cert.index_48",{date:j(v).notAfter,days:j(v).endtime})),1)):(U(),P("span",Xn,T(e.$t("Site.Cert.index_47")),1))])])]),_:1})]),_:1})]),_:1}),k(d,{class:"mb-16px",size:10,justify:"space-between"},{default:E(()=>[R("div",Gn,[R("div",Yn,T(e.$t("Site.Cert.index_50")),1),k(o,{readonly:"",value:j(_),"onUpdate:value":t[0]||(t[0]=e=>B(_)?_.value=e:null),rows:14},null,8,["value"])]),R("div",Zn,[R("div",Qn,T(e.$t("Site.Cert.index_51")),1),k(o,{readonly:"",value:j(m),"onUpdate:value":t[1]||(t[1]=e=>B(m)?m.value=e:null),rows:14},null,8,["value"])])]),_:1}),k(d,{class:"mb-12px"},{default:E(()=>[k(u,{type:"primary",onClick:h},{default:E(()=>[N(T(e.$t("Site.Cert.index_53")),1)]),_:1}),k(u,{onClick:y},{default:E(()=>[N(T(e.$t("Site.Cert.index_55")),1)]),_:1})]),_:1}),k(c,null,{default:E(()=>[R("li",null,T(e.$t("SSL.SiteSSL.index_24")),1),R("li",null,T(e.$t("SSL.SiteSSL.index_25")),1)]),_:1}),k(b,{show:j(r).show,"onUpdate:show":t[2]||(t[2]=e=>j(r).show=e),title:j(r).title,data:j(r).data,width:650,"min-height":450,component:j(l)},null,8,["show","title","data","component"])]),_:1},8,["show"])}}}),ts=_(es,[["__scopeId","data-v-3a30f84f"]]),as={class:"flex items-center"},ls={class:"leading-17px"},is={class:"w-full"},ns={class:"w-full"},ss={class:"text-error"},os=C({__name:"apply",emits:["update"],setup(e,{emit:t}){const a=Z(),{t:l}=$(),{data:s}=Ha(),d=ae(),r=t,u=D({auth_type:"http",dns_manual:0,auto_wildcard:0,domains:[],all:!1}),c={domains:{required:!0,trigger:"change",type:"array",message:l("SSL.SiteSSL.index_16")}},_=L(null),m=L([]),v=e=>m.value.find(t=>t.name===e)?.auto,h=()=>{a.push("/ssl_domain/domain")},x=V(()=>u.domains.length>0&&u.domains.length<m.value.length);Q(()=>u.domains,e=>{e.length===m.value.length?u.all=!0:e.length||(u.all=!1)}),Q(()=>u.all,e=>{e?(u.domains=m.value.map(e=>e.name),_.value?.validate()):u.domains=[]}),Q(()=>u.auth_type,e=>{"dns"===e?(u.domains=m.value.filter(e=>e.auto).map(e=>e.name),_.value?.validate()):u.domains=[]});const w=V(()=>u.domains.filter(e=>!v(e))),b=async()=>{if(await(_.value?.validate()),"dns"===u.auth_type&&w.value.length&&!u.dns_manual)return void n.error({content:()=>ee("span",{innerHTML:`${w.value.join("<br/>")}${l("SSL.SiteSSL.index_14")}`})});let e={auth_type:u.dns_manual?"dns_manual":u.auth_type,auto_wildcard:u.auto_wildcard,domains:JSON.stringify(u.domains),site_id:u.dns_manual?s.id:void 0,deploy:u.dns_manual?0:1};if(u.dns_manual&&"dns"===u.auth_type){const{message:t}=await Se({site_id:s.id,domains:JSON.stringify(u.domains)});if(o(t)&&Object.keys(t).length)return void ke(t.auths,s.id,u.domains,()=>{r("update"),d.setRefresh(!0)},!0);const i=ve({width:500,height:300,hideClose:!0,component:Ce});try{const{message:t}=await $e(e,!1);o(t)&&(t.deploy?(n.success(t.result||l("SSL.index_32")),r("update"),d.setRefresh(!0)):Array.isArray(t.auths)&&t.auths.length&&ke(t.auths,s.id,u.domains,()=>{r("update"),d.setRefresh(!0)}))}catch(a){Le(Wt(a,"message",""))}finally{i.hide()}return}const{message:t}=await $e(e);o(t)&&ve({hideClose:!0,data:{isJump:!1,task_id:t.task_id,onFinish:()=>{r("update"),d.setRefresh(!0)}},component:Da})},{loading:g,setLoading:S}=de();return q(()=>{(async()=>{try{S(!0);const{message:e}=await Be({id:s.id});if(i(e)){const t=e.map(async e=>{const{message:t}=await Pe({domain:e.name});o(t)&&m.value.push({name:e.name,auto:!!t.hash})});await Promise.all(t)}}finally{S(!1)}})()}),(e,t)=>{const a=y,l=Xt,i=la,n=p,s=aa,o=Ft,d=Jt,r=Ht,S=Gt,C=ia,$=f,L=Mt,B=ua,D=pe;return U(),P("div",null,[F(k(l,{"show-icon":!1,class:"mb-10px"},{default:E(()=>[R("div",as,[k(a,{name:"base-info",size:"17",class:"mr-8px"}),R("span",ls,T(e.$t("SSL.SiteSSL.index_12")),1)])]),_:1},512),[[K,"dns"===j(u).auth_type]]),k(B,{ref_key:"formRef",ref:_,model:j(u),rules:c,"label-width":"140"},{default:E(()=>[k(o,{label:e.$t("Config.Safe.Ssl.index_2")},{default:E(()=>[k(s,{value:j(u).auth_type,"onUpdate:value":t[0]||(t[0]=e=>j(u).auth_type=e)},{default:E(()=>[k(n,null,{default:E(()=>[k(i,{value:"http"},{default:E(()=>[N(T(e.$t("SSL.SiteSSL.index_17")),1)]),_:1}),k(i,{value:"dns"},{default:E(()=>[N(T(e.$t("SSL.index_12"))+" (Wildcard support) ",1)]),_:1})]),_:1})]),_:1},8,["value"])]),_:1},8,["label"]),F(k(o,{label:" ","show-feedback":!1},{default:E(()=>[k(d,{checked:j(u).dns_manual,"onUpdate:checked":t[1]||(t[1]=e=>j(u).dns_manual=e),"checked-value":1,"unchecked-value":0},{default:E(()=>[N(T(e.$t("SSL.index_2")),1)]),_:1},8,["checked"])]),_:1},512),[[K,"dns"===j(u).auth_type]]),F(k(o,{label:" "},{default:E(()=>[k(d,{checked:j(u).auto_wildcard,"onUpdate:checked":t[2]||(t[2]=e=>j(u).auto_wildcard=e),"checked-value":1,"unchecked-value":0},{default:E(()=>[N(T(e.$t("SSL.SiteSSL.index_20")),1)]),_:1},8,["checked"])]),_:1},512),[[K,"dns"===j(u).auth_type]]),k(o,{label:e.$t("Mail.Domain.index_3"),path:"domains"},{default:E(()=>[k($,{show:j(g),class:"p-12px w-300px max-h-300px min-h-100px overflow-auto border border-solid border-#ccc"},{default:E(()=>[k(d,{class:"mb-12px",checked:j(u).all,"onUpdate:checked":t[3]||(t[3]=e=>j(u).all=e),label:e.$t("Public.SelectAll"),indeterminate:j(x)},null,8,["checked","label","indeterminate"]),j(m).length?(U(),H(S,{key:0,value:j(u).domains,"onUpdate:value":t[4]||(t[4]=e=>j(u).domains=e)},{default:E(()=>[k(r,{class:"flex-col!",size:12},{default:E(()=>[(U(!0),P(A,null,J(j(m),e=>(U(),H(d,{key:e.name,value:e.name,label:e.name},null,8,["value","label"]))),128))]),_:1})]),_:1},8,["value"])):(U(),H(C,{key:1,description:"No domain name"}))]),_:1},8,["show"])]),_:1},8,["label"]),F(k(o,{label:" "},{default:E(()=>[k(l,{"show-icon":!1,type:j(w).length?"warning":"success"},{default:E(()=>[(U(!0),P(A,null,J(j(u).domains,t=>(U(),H(r,{key:t},{default:E(()=>[v(t)?(U(),H(r,{key:0,class:"flex-nowrap! py-3px"},{default:E(()=>[k(a,{name:"base-success",size:"17",color:"#20a53a"}),R("span",is,"["+T(t)+"] "+T(e.$t("SSL.SiteSSL.index_13")),1)]),_:2},1024)):(U(),H(r,{key:1,class:"flex-nowrap! py-3px"},{default:E(()=>[k(a,{name:"base-error",size:"17",color:"#E85445"}),R("span",ns,"["+T(t)+"] "+T(e.$t("SSL.SiteSSL.index_14")),1),k(L,{type:"primary",size:"tiny",onClick:h},{default:E(()=>[N(T(e.$t("SSL.SiteSSL.index_21")),1)]),_:1})]),_:2},1024))]),_:2},1024))),128))]),_:1},8,["type"])]),_:1},512),[[K,"dns"===j(u).auth_type&&j(u).domains.length&&!j(u).dns_manual]]),k(o,{label:" "},{default:E(()=>[k(L,{type:"primary",onClick:b},{default:E(()=>[N(T(e.$t("Public.Btn.Apply")),1)]),_:1})]),_:1})]),_:1},8,["model"]),F(k(D,{class:"mt-16px"},{default:E(()=>[R("li",ss,T(e.$t("SSL.SiteSSL.index_15")),1),R("li",null,T(e.$t("Site.Cert.index_21")),1),R("li",null,T(e.$t("Site.Cert.index_23")),1),R("li",null,T(e.$t("Site.Cert.index_24")),1)]),_:1},512),[[K,"http"===j(u).auth_type]]),F(k(D,{class:"mt-24px"},{default:E(()=>[t[5]||(t[5]=R("li",null,"Manually resolved certificates do not support auto-renewal",-1)),R("li",null,T(e.$t("Site.Cert.index_25")),1),R("li",null,T(e.$t("Site.Cert.index_26")),1),R("li",null,T(e.$t("Site.Cert.index_27")),1),R("li",null,T(e.$t("Site.Cert.index_28")),1)]),_:1,__:[5]},512),[[K,"dns"===j(u).auth_type]])])}}}),ds=C({__name:"index",props:{isOpen:{type:Boolean},type:{},onRefresh:{type:Function}},setup(e){const t=e,a=()=>{t.onRefresh()};return(e,l)=>(U(),P("div",null,[t.isOpen&&"Let's Encrypt"===t.type?(U(),H(ts,{key:0,onUpdate:a})):(U(),H(os,{key:1,onUpdate:a}))]))}}),rs=C({__name:"index",props:{onMenuChange:{type:Function}},setup(e,{expose:t}){const{data:a}=Ha(),{t:l}=$(),i=D({p:1,limit:99999}),{columns:s,table:d}=oe([{key:"domain",title:l("Site.Cert.index_29"),render:e=>k("span",{innerHTML:e.verify_domains.length>0?e.verify_domains.join("<br/>"):"--"},null)},ja({title:l("SSL.index_54"),width:140}),{key:"issuer",title:l("Site.Cert.index_30"),ellipsis:{tooltip:!0}},ce({width:150,options:t=>[{label:l("Public.Btn.Deploy"),onClick:async()=>{try{await fe({hash:t.hash,domains:JSON.stringify([a.name]),append:1}),n.success(l("SSL.index_32")),setTimeout(()=>{e.onMenuChange()},500)}catch(i){console.log(i)}}},{show:"Let's Encrypt"===t.provider,label:l("Public.Btn.Del"),onClick:()=>{(e=>{Ue({title:l("Site.Cert.index_31"),content:l("Site.Cert.index_32"),onConfirm:async()=>{await we({hash:e.hash}),c()}})})(t)}}]})]),{loading:r,setLoading:u}=de(!0),c=async()=>{try{u(!0);const{message:e}=await Re(i);o(e)&&(d.data=e.data)}finally{u(!1)}};return c(),t({init:c}),(e,t)=>{const a=re;return U(),P("div",null,[k(a,{loading:j(r),columns:j(s),data:j(d).data,"max-height":510},null,8,["loading","columns","data"])])}}}),us={class:"mr-12px"},cs={key:0,class:"mr-12px"},ps={key:1,class:"mr-12px"},_s=C({__name:"index",setup(e,{expose:a}){const l=I(()=>s(()=>t.import("./ssl-log-legacy.js?v=1758789124250"),void 0)),i=ae(),{data:n}=Ha(),{t:d}=$(),r=L("current"),u=L(""),c=ue(d("SSL.index_43")),p=L(Ba.NotDeploy),_=L(""),m=L(!1),v=L(0),h=L(""),f=L(!1),x=async()=>{const{message:e}=await xe({hash:u.value});o(e)&&(c.data.path=e.result,c.show=!0)},y=e=>{b.value[0].data&&(b.value[0].data.loading=e)},w=async()=>{try{y(!0);const{message:a}=await Ta({siteName:n.name});o(a)&&(p.value=a.type,m.value=a.status,v.value=Wt(a,"cert_data.endtime",0),h.value=a.cert_data.issuer_O||"",f.value=(()=>{let e=!1;return v.value<=30&&(e=!0),p.value===Ba.TestDeploy&&v.value<0&&(e=!0),p.value!==Ba.SaveOrHolderDeploy&&p.value!==Ba.NotDeploy||(e=!1),e})(),_.value=a.cert_data.dns.join(","),u.value=a.hash,t=a,b.value[0].data&&(b.value[0].data.info=t),e=f.value,b.value[0].data&&(b.value[0].data.isRenew=e))}catch{m.value=!1,f.value=!1}finally{y(!1)}var e,t},b=L([{key:"current",label:()=>k("div",null,[k("span",null,[N("Current Certs - ")]),k("span",{class:m.value?"text-#1d9534":"text-red-500"},[N("["),m.value?"Deployed":"Not Deployed",N("]")])]),data:{info:null,isRenew:!1,loading:!0,onRefresh:w},component:te($n)},{key:"business",label:d("Site.Cert.index_64"),component:te(Nn)},{key:"let",label:d("Site.Cert.index_65"),data:{isOpen:V(()=>m.value),type:V(()=>h.value),onRefresh:w},component:te(ds)},{key:"holder",label:d("Site.Cert.index_66"),component:te(rs),data:{onMenuChange:()=>{r.value="current",w(),i.setRefresh(!0)}}}]);return a({init:()=>{w()}}),(e,t)=>{const a=Mt,i=Xt,n=pa,s=ra;return U(),P("div",null,[j(m)?O("",!0):(U(),H(i,{key:0,class:"mb-12px",type:"error","show-icon":!1,style:{"--n-padding":"9px 16px"}},{default:E(()=>[R("span",us,T(e.$t("Site.Cert.index_41")),1),k(a,{size:"tiny",type:"primary",onClick:t[0]||(t[0]=e=>r.value="business")},{default:E(()=>[N(T(e.$t("Site.Cert.index_43")),1)]),_:1})]),_:1})),j(m)&&j(f)?(U(),H(i,{key:1,class:"mb-12px",type:"error","show-icon":!1,style:{"--n-padding":"9px 16px"}},{default:E(()=>[j(v)>0?(U(),P("span",cs,T(e.$t("SSL.SiteSSL.index_26",[j(_),j(v)])),1)):(U(),P("span",ps,T(e.$t("SSL.SiteSSL.index_19",[j(_)])),1)),k(a,{size:"tiny",type:"primary",onClick:x},{default:E(()=>[N(T(e.$t("Site.Cert.index_53")),1)]),_:1})]),_:1})):O("",!0),k(n,{value:j(r),"onUpdate:value":t[1]||(t[1]=e=>B(r)?r.value=e:null),options:j(b)},null,8,["value","options"]),k(s,{show:j(c).show,"onUpdate:show":t[2]||(t[2]=e=>j(c).show=e),title:j(c).title,data:j(c).data,width:650,"min-height":450,component:j(l)},null,8,["show","title","data","component"])])}}}),ms={class:"w-full ml-12px"},vs={class:"w-full ml-12px"},hs=C({__name:"index",setup(e){const t=c(),{isPro:a}=z(t),{data:l}=Ha(),i=D({maintenance:!1,type:"default",maintenance_title:"",maintenance_big_text:"",maintenance_small_text:"",social_network_links:[],times:null,template_upload:"",background_upload:""}),n=()=>{i.social_network_links.push({title:"",value:""})},s=e=>{const t=l.path;Ia({path:t,uploadData:{multiple:!1,accept:"bg"===e?".jpg,.jpeg,.png,.gif,.svg,.webp":".html,.phtml,.php"},size:10,onUploadSuccess:a=>{"bg"===e?i.background_upload=`${t}/${a[0].name}`:i.template_upload=`${t}/${a[0].name}`}})},d=()=>{_e({source:371})},r=e=>e<Date.now()-864e5,u=async()=>{const e={set_id:l.id,...i,social_network_links:JSON.stringify(i.social_network_links),template_upload:"custom"===i.type?i.template_upload:""};await ha(e),m()},{loading:p,setLoading:_}=de(),m=async()=>{try{_(!0);const{message:e}=await fa({set_id:l.id});o(e)&&(i.maintenance="true"===e.maintenance,i.maintenance_title=e.maintenance_title,i.maintenance_big_text=e.maintenance_big_text,i.maintenance_small_text=e.maintenance_small_text,i.social_network_links=e.social_network_links.length?e.social_network_links:[{title:"",value:""}],i.times=Number(e.times)||null,i.template_upload=e.template_upload,i.background_upload=e.background_upload,i.type=e.template_upload?"custom":"default")}finally{_(!1)}};return a.value&&m(),(e,t)=>{const l=Mt,o=Kt,c=Ft,_=na,m=aa,v=zt,h=sa,x=Ht,y=w,b=ca,g=ua,S=pe,C=f,$=ba;return U(),H($,{install:j(a)},{desc:E(()=>[t[11]||(t[11]=R("span",null,"This feature is only available for Pro",-1)),k(l,{class:"ml-8px",onClick:d,type:"primary",size:"small"},{default:E(()=>t[10]||(t[10]=[N("Buy",-1)])),_:1,__:[10]})]),default:E(()=>[k(C,{show:j(p),class:"pr-16px"},{default:E(()=>[k(g,{model:j(i),"label-width":"150"},{default:E(()=>[k(c,{label:"Maintenance Mode"},{default:E(()=>[k(o,{value:j(i).maintenance,"onUpdate:value":t[0]||(t[0]=e=>j(i).maintenance=e)},null,8,["value"]),t[12]||(t[12]=R("span",{class:"tips"},"Enable maintenance mode to prevent users from accessing your website while it is being updated or when you are performing maintenance tasks.",-1))]),_:1,__:[12]}),k(c,{label:"Template"},{default:E(()=>[k(m,{value:j(i).type,"onUpdate:value":t[1]||(t[1]=e=>j(i).type=e)},{default:E(()=>[k(_,{label:"Default",value:"default"}),k(_,{label:"Custom",value:"custom"})]),_:1},8,["value"])]),_:1}),"default"===j(i).type?(U(),P(A,{key:0},[k(c,{label:"Browser Page Title"},{default:E(()=>[k(v,{value:j(i).maintenance_title,"onUpdate:value":t[2]||(t[2]=e=>j(i).maintenance_title=e)},null,8,["value"])]),_:1}),k(c,{label:"Text Block 1 (Larger)"},{default:E(()=>[k(v,{value:j(i).maintenance_big_text,"onUpdate:value":t[3]||(t[3]=e=>j(i).maintenance_big_text=e),maxlength:200},null,8,["value"])]),_:1}),k(c,{label:"Text Block 2 (Smaller)"},{default:E(()=>[k(v,{type:"textarea",value:j(i).maintenance_small_text,"onUpdate:value":t[4]||(t[4]=e=>j(i).maintenance_small_text=e),maxlength:300},null,8,["value"])]),_:1}),k(c,{label:"Social Network Links"},{default:E(()=>[k(x,null,{default:E(()=>[(U(!0),P(A,null,J(j(i).social_network_links,(e,a)=>(U(),H(x,{class:"flex-nowrap!",key:a},{default:E(()=>[k(v,{class:"w-150px!",value:e.title,"onUpdate:value":t=>e.title=t,placeholder:"Title"},null,8,["value","onUpdate:value"]),k(v,{class:"w-200px!",value:e.value,"onUpdate:value":t=>e.value=t,placeholder:"https://www.aapanel.com/"},null,8,["value","onUpdate:value"]),k(h,null,{default:E(()=>[k(l,{onClick:t=>(e=>{i.social_network_links=i.social_network_links.filter(t=>t!==e)})(e),disabled:1===j(i).social_network_links.length},{default:E(()=>t[13]||(t[13]=[N("-",-1)])),_:2,__:[13]},1032,["onClick","disabled"]),k(l,{onClick:n,disabled:j(i).social_network_links.length>=5},{default:E(()=>t[14]||(t[14]=[N("+",-1)])),_:1,__:[14]},8,["disabled"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),k(c,{label:"Auto-recovery Time"},{default:E(()=>[k(y,{value:j(i).times,"onUpdate:value":t[5]||(t[5]=e=>j(i).times=e),type:"datetime",clearable:"","is-date-disabled":r},null,8,["value"])]),_:1}),k(c,{ref:"dbBakFileRef",label:"Background Image",path:"db_bak_file"},{default:E(()=>[k(l,{onClick:t[6]||(t[6]=e=>s("bg"))},{default:E(()=>[N(T(e.$t("Docker.App.Backup.index_3")),1)]),_:1}),R("div",ms,[k(b,{value:j(i).background_upload,"onUpdate:value":t[7]||(t[7]=e=>j(i).background_upload=e),"default-path":"/www/wwwroot","checked-type":["file"]},null,8,["value"])])]),_:1},512)],64)):O("",!0),"custom"===j(i).type?(U(),H(c,{key:1,label:"Template Upload"},{default:E(()=>[k(l,{onClick:t[8]||(t[8]=e=>s("template"))},{default:E(()=>[N(T(e.$t("Docker.App.Backup.index_3")),1)]),_:1}),R("div",vs,[k(b,{value:j(i).template_upload,"onUpdate:value":t[9]||(t[9]=e=>j(i).template_upload=e),"default-path":"/www/wwwroot","checked-type":["file"]},null,8,["value"])])]),_:1})):O("",!0),k(c,{label:" "},{default:E(()=>[k(l,{type:"primary",onClick:u},{default:E(()=>[N(T(e.$t("Public.Btn.Save")),1)]),_:1})]),_:1})]),_:1},8,["model"]),k(S,null,{default:E(()=>[t[15]||(t[15]=R("li",{class:"text-warning font-bold"}," Please close and clear the cache before turning on maintenance mode. ",-1)),t[16]||(t[16]=R("li",null," Note: To avoid your website being downgraded by indexing engines, please do not enable maintenance mode for a long time. ",-1)),F(R("li",null," Recommend uploading HTML files for templates, and use data URLs for static files of templates. ",512),[[K,"custom"===j(i).type]])]),_:1,__:[15,16]})]),_:1},8,["show"])]),_:1},8,["install"])}}}),fs=_(hs,[["__scopeId","data-v-150ccdef"]]),xs=C({__name:"index",setup(e,{expose:t}){const a=ae(),{data:l}=Ha(),{multiService:i,isWebServerJump:n}=z(c()),s=D({webServer:"apache",ico:""}),d=L(""),r=async()=>{n.value=!0,await Oa({name:"nginx",title:"Nginx",admin:!1})},u=L([{label:"Apache",value:"apache"},{label:"Nginx",value:"nginx"},{label:"Openlitespeed",value:"openlitespeed"}]),p=()=>{ne({title:"Switching Services",width:500,content:()=>k(A,null,[k("span",null,[N("Please ensure that your website supports ["),s.webServer,N("], otherwise it may cause the website to stop running!")]),k("div",{class:"mt-12px"},[N("Please check:")]),k(pe,{class:"text-12px"},{default:()=>[k("li",{class:"text-warning font-bold"},[N("Switching to Multi-WebEngine Hosting may result in the loss of the original configuration. It is recommended to back up the website configuration data in advance.")]),k("li",{class:"text-warning font-bold"},[N("After switching services, you need to re-bind the subdirectory. Please back up key data.")]),k("li",null,[N("Whether the virtual host has custom configurations.")]),k("li",null,[N("Whether the website rewrite rules are supported.")])]})]),onConfirm:async()=>{await xa({site_id:l.id,service_type:s.webServer}),m(),a.setRefresh(!0)}})},_=()=>{ne({title:"Rollback",content:"Are you sure you want to rollback to the previous service?",onConfirm:async()=>{await ya({site_id:l.id}),m(),a.setRefresh(!0)}})},m=async()=>{const{message:e}=await _a({site_id:l.id});o(e)&&(s.webServer=e.result,d.value=e.result.charAt(0).toUpperCase()+e.result.slice(1))};return m(),t({init:m}),(e,t)=>{const a=Mt,l=Ht,n=pe,o=oa,c=y,m=Xt,v=da,h=Ft,f=qt,x=ua,w=ba;return U(),H(w,{install:j(i)},{desc:E(()=>[k(l,{class:"items-center"},{default:E(()=>[t[2]||(t[2]=R("span",null,"You have not enabled the multi-service function",-1)),k(a,{size:"small",onClick:r,type:"primary"},{default:E(()=>t[1]||(t[1]=[N("Open",-1)])),_:1,__:[1]})]),_:1,__:[2]})]),default:E(()=>[k(o,{class:"p-16px"},{default:E(()=>[k(l,{class:"mb-20px flex-nowrap!"},{default:E(()=>[t[5]||(t[5]=R("i",{class:"i-material-symbols:network-node color-#20a53a text-24px"},null,-1)),R("div",null,[t[4]||(t[4]=R("div",{class:"font-bold line-height-24px mb-8px"},"Multi-WebServer Hosting",-1)),k(n,null,{default:E(()=>t[3]||(t[3]=[R("li",null,"After switching to Multi-WebServer Hosting service architecture, you can specify its WebEngine for each website",-1)])),_:1,__:[3]})])]),_:1,__:[5]}),k(l,{class:"flex-nowrap!"},{default:E(()=>[t[8]||(t[8]=R("i",{class:"i-ic:outline-arrow-circle-right color-#20a53a text-24px"},null,-1)),R("div",null,[t[7]||(t[7]=R("div",{class:"font-bold line-height-24px mb-8px"},"Advantages",-1)),k(n,null,{default:E(()=>t[6]||(t[6]=[R("li",null,"Flexible: Switch your website's web server at will",-1),R("li",null,"Efficient: Accelerate website access with Nginx static and dynamic caching",-1),R("li",null,"Secure: Regardless of your chosen web server, your website is protected by the Nginx firewall",-1)])),_:1,__:[6]})])]),_:1,__:[8]})]),_:1}),k(x,{class:"my-16px",model:j(s)},{default:E(()=>[k(h,{label:"Current"},{default:E(()=>[k(m,{"show-icon":!1},{default:E(()=>[k(l,{class:"items-center!",size:2},{default:E(()=>[k(c,{name:`soft-${j(d).toLowerCase()}`,size:"24"},null,8,["name"]),R("span",null,T(j(d)),1)]),_:1})]),_:1}),k(a,{class:"ml-12px",onClick:_},{default:E(()=>t[9]||(t[9]=[N("Rollback",-1)])),_:1,__:[9]}),k(v,{trigger:"hover",style:{"--n-color":"var(--site-multi-service-rollback-bg)"}},{trigger:E(()=>[k(c,{class:"ml-5px",name:"base-problem",size:"20"})]),default:E(()=>[t[10]||(t[10]=R("div",{class:"p-16px rounded-8px"},"If the website is unavailable after switching services, please click Rollback to the last service.",-1))]),_:1,__:[10]})]),_:1}),k(h,{label:"Web Server"},{default:E(()=>[k(f,{class:"w-300px!",value:j(s).webServer,"onUpdate:value":t[0]||(t[0]=e=>j(s).webServer=e),options:j(u)},null,8,["value","options"])]),_:1}),k(h,{label:" "},{default:E(()=>[k(a,{type:"primary",onClick:p},{default:E(()=>[N(T(e.$t("Public.Btn.Save")),1)]),_:1})]),_:1})]),_:1},8,["model"]),k(n,null,{default:E(()=>t[11]||(t[11]=[R("li",null,"If you are not familiar with Multi-WebServer Hosting configuration, please do not manually modify the website independent configuration.",-1)])),_:1,__:[11]})]),_:1},8,["install"])}}}),ys=_(xs,[["__scopeId","data-v-9ed176f3"]]),ws={class:"h-full"},bs=C({__name:"index",props:{siteInfo:{},config:{}},setup(e){const{t:a}=$(),l=ae(),{siteName:i}=z(l),n=I(()=>s(()=>t.import("./index-legacy268.js?v=1758789124250"),void 0)),o=e,{siteInfo:d,config:r}=o;i.value=o.siteInfo.name;const u=L();d&&S(Ma,{data:d,config:r});const c=L("domain"),p=[{key:"domain",label:a("Site.Config.index_1"),component:Ga},{key:"subdirectory",label:a("Site.Config.index_3"),component:Qa},{key:"directory",label:a("Site.Config.index_4"),component:_l},{key:"access",label:a("Site.Config.index_5"),component:Ll},{key:"traffic",label:a("Site.Config.index_6"),component:Al},{key:"rewrite",label:a("Site.Config.index_7"),component:n},{key:"document",label:a("Site.Config.index_9"),component:zl},{key:"config",label:a("Site.Config.index_10"),component:Wl},{key:"ssl",label:()=>k(A,null,[a("Site.Config.index_11")]),component:_s},{key:"php",label:a("Site.Config.index_12"),component:si},{key:"webserver",label:"Web Server",component:ys},{key:"wordpress",label:"Wordpress Setting",show:"WP"===d?.project_type,component:ci},{key:"composer",label:a("Site.Config.index_20"),component:Si},{key:"redirect",label:a("Site.Config.index_21"),component:ji},{key:"proxy",label:a("Site.Config.index_23"),component:Ji},{key:"hotlink",label:a("Site.Config.index_24"),component:Xi},{key:"maintenance",label:"Maintenance Mode",component:fs},{key:"logs",label:a("Site.Config.index_25"),component:an}];return c.value=r.menu||"domain",r.menu="",q(()=>{window.siteConfigInit=u.value.init}),(e,t)=>{const a=b;return U(),P("div",ws,[k(a,{value:j(c),"onUpdate:value":t[0]||(t[0]=e=>B(c)?c.value=e:null),ref_key:"tabsRef",ref:u,data:p},null,8,["value"])])}}}),gs=Object.freeze(Object.defineProperty({__proto__:null,default:bs},Symbol.toStringTag,{value:"Module"}));e("i",gs)}}});
