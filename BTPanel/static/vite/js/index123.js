import{_ as a}from"./index109.js?v=1769066082311";import{_ as e}from"./index.vue_vue_type_script_setup_true_lang.js?v=1769066082311";import{_ as t,m as s,d as l,p as n}from"./page_layout.js?v=1769066082311";import{n as i,b as o,m as r}from"./planned.js?v=1769066082311";import{d,a as u}from"./public.js?v=1769066082311";import{aX as c,aC as m,bJ as p,di as _,dS as v,dk as f,av as g,dg as b,d_ as x,db as C}from"./naive.js?v=1769066082311";import{k as y,P as j,e as k,r as w,n as P,G as S,R as I,V as h,W as $,a3 as N,a2 as J,an as L,j as O,U,S as R,a4 as W}from"./vue.js?v=1769066082311";import"./common.js?v=1769066082311";import"./__commonjsHelpers__.js?v=1769066082311";const A={class:"p-20px h-500px"},D={class:"color-#20a53a"},E=n(y({__name:"index",props:{data:{}},setup(n){const{t:y}=j(),E=k({active:!1,time:3}),F=n,{id:G,getList:H}=F.data,T={time:{trigger:["blur","input"],validator:(a,e)=>e<3?(M(),new Error(y("Crontab.Planned.index_91"))):(q&&(B.value=e,z.value=100,M()),K(),!0)}},V=()=>{u({title:y("Public.Confirm.Title"),content:y("Crontab.Planned.index_26"),onConfirm:async()=>{await i({id:G}),ea()}})},X=a=>{a?(q&&M(),K(),s.success(y("Crontab.Planned.index_92"))):(M(),sessionStorage.setItem("timer".concat(G),JSON.stringify({...E,id:G})),s.success(y("Crontab.Planned.index_93")))};let q;const z=w(100),B=w(E.time),K=()=>{q=setInterval(()=>{z.value-=100/E.time,B.value-=1,z.value<=0&&(z.value=100,B.value=E.time,ea())},1e3),sessionStorage.setItem("timer".concat(G),JSON.stringify({...E,id:G}))},M=()=>{clearInterval(q),q=void 0},Q=async()=>{await o({id:G}),null==H||H()},{loading:Y,setLoading:Z}=d(),aa=w("None"),ea=async()=>{Z(!0);const{message:a}=await r({id:G});l(a)&&(aa.value=a.result?a.result:"None"),Z(!1)};return ea(),P(()=>{const a=sessionStorage.getItem("timer".concat(G));if(a){const e=JSON.parse(a);E.time=e.time,B.value=e.time,E.active=e.active,K()}}),S(()=>{M()}),(s,l)=>{const n=p,i=m,o=t,r=f,d=v,u=b,y=x,j=g,k=e,w=_,P=c,S=C,F=a;return h(),I("div",A,[$(S,{class:"mb-10px"},{default:N(()=>[$(P,null,{default:N(()=>[$(i,{class:"refresh-logs-btn",onClick:ea},{default:N(()=>[U(E).active?(h(),J(n,{key:0,type:"circle",percentage:U(z),unit:""},{default:N(()=>[R("span",D,W(U(B)),1)]),_:1},8,["percentage"])):L("",!0),O(" "+W(s.$t("Ftp.Analysis.Index_32")),1)]),_:1}),$(w,{trigger:"click",placement:"bottom",class:"min-w-250px"},{trigger:N(()=>[$(i,null,{default:N(()=>[$(o,{name:"down"})]),_:1})]),default:N(()=>[$(k,{ref:"formRef",model:U(E),rules:T,"label-width":"120px"},{default:N(()=>[$(d,{label:s.$t("Crontab.Planned.index_89")},{default:N(()=>[$(r,{value:U(E).active,"onUpdate:value":[l[0]||(l[0]=a=>U(E).active=a),X]},null,8,["value"])]),_:1},8,["label"]),U(E).active?(h(),J(d,{key:0,label:s.$t("Crontab.Planned.index_90"),path:"time"},{default:N(()=>[$(j,null,{default:N(()=>[$(u,{class:"w-50px!",value:U(E).time,"onUpdate:value":l[1]||(l[1]=a=>U(E).time=a),"show-button":!1,placeholder:""},null,8,["value"]),$(y,null,{default:N(()=>[O(W(s.$t("Waf.Setting.config_53")),1)]),_:1})]),_:1})]),_:1},8,["label"])):L("",!0)]),_:1},8,["model"])]),_:1})]),_:1}),$(i,{class:"empty-logs-btn",onClick:V},{default:N(()=>[O(W(s.$t("Crontab.Planned.index_25")),1)]),_:1}),$(i,{onClick:Q},{default:N(()=>[O(W(s.$t("Docker.LocalImage.pull.index_12")),1)]),_:1})]),_:1}),$(F,{loading:U(Y),log:U(aa)},null,8,["loading","log"])])}}}),[["__scopeId","data-v-a8de5712"]]);export{E as default};
