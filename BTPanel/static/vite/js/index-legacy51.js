System.register(["./page_layout-legacy.js?v=1763625242172","./index-legacy.js?v=1763625242172","./index.vue_vue_type_script_setup_true_lang-legacy5.js?v=1763625242172","./index.vue_vue_type_script_setup_true_lang-legacy7.js?v=1763625242172","./public-legacy.js?v=1763625242172","./mail-legacy.js?v=1763625242172","./vue-legacy.js?v=1763625242172","./naive-legacy.js?v=1763625242172"],(function(e,t){"use strict";var a,i,n,o,l,s,d,c,r,m,u,_,h,p,g,w,y,x,f,b,k,M,v,D,j,C,S,z,U,W,P,R,q,O,$,E,I,N,L,B,F,H,T,V,A,X,G,J,K,Q,Y,Z,ee;return{setters:[e=>{a=e.c,i=e.bf,n=e.i,o=e.u,l=e._,s=e.cC,d=e.n,c=e.o,r=e.x,m=e.y,u=e.a},e=>{_=e._},e=>{h=e._},e=>{p=e._},e=>{g=e.e,w=e.c,y=e.f,x=e.a,f=e.b,b=e.h},e=>{k=e.j,M=e.k,v=e.l,D=e.m,j=e.n,C=e.o,S=e.p},e=>{z=e.k,U=e.r,W=e.V,P=e.R,R=e.a2,q=e.a3,O=e.an,$=e.j,E=e.a4,I=e.X,N=e.P,L=e.a0,B=e.e,F=e.F,H=e.N,T=e.S,V=e.u,A=e._},e=>{X=e.dk,G=e.aC,J=e.dh,K=e.d9,Q=e.dj,Y=e.dd,Z=e._,ee=e.dS}],execute:function(){const te=z({__name:"index",setup(e){const t=U(),i=U(0),n=async e=>{await M({operation:e}),o()},o=async()=>{const{message:e}=await k();a(e)&&(t.value=e.status,i.value=e.count)};return o(),(e,a)=>{const o=G,l=X;return 0===W(t)&&W(i)?(P(),R(l,{key:0,type:"warning",class:"mb-16px"},{default:q((()=>[$(E(e.$t("Mail.Domain.index_55"))+" ",1),I(o,{type:"primary",class:"mx-16px",onClick:a[0]||(a[0]=e=>n(1))},{default:q((()=>[$(E(e.$t("Mail.Domain.index_56")),1)])),_:1}),I(o,{type:"primary",text:"",onClick:a[1]||(a[1]=e=>n(-1))},{default:q((()=>[$(E(e.$t("Ftp.Table.index_8")),1)])),_:1})])),_:1})):O("",!0)}}});e("i",(e=>i.post("/plugin?action=a&name=mail_sys&s=deploy_roundcube",e,{requestOptions:{loading:"Installing, please wait..."}}))),e("s",(e=>i.post("/plugin?action=a&name=mail_sys&s=open_domain_ssl_alarm",e,{requestOptions:{loading:n.global.t("Crontab.Api.index_2"),successMessage:!0}}))),e("g",(e=>i.post("/ssl_domain?action=mail_record_check",e)));const ae=z({__name:"index",setup(e){const n=A((()=>u((()=>t.import("./index-legacy200.js?v=1763625242172")),void 0))),k=A((()=>u((()=>t.import("./index-legacy201.js?v=1763625242172")),void 0))),M=A((()=>u((()=>t.import("./index-legacy202.js?v=1763625242172")),void 0))),z=A((()=>u((()=>t.import("./index-legacy203.js?v=1763625242172")),void 0))),R=A((()=>u((()=>t.import("./index-legacy204.js?v=1763625242172")),void 0))),O=A((()=>u((()=>t.import("./index-legacy205.js?v=1763625242172")),void 0))),X=A((()=>u((()=>t.import("./install-legacy.js?v=1763625242172")),void 0))),{t:ae}=N(),ie=o(),{isPro:ne}=L(ie),oe=B({p:1,size:10}),le=g("",{isEdit:!1,onRefresh:()=>{Ce()}}),se=()=>{le.data.isEdit=!1,le.title=ae("Mail.Domain.index_1"),le.show=!0},{table:de,columns:ce}=w([{key:"domain",title:ae("Mail.Domain.index_3"),minWidth:130,ellipsis:{tooltip:!0}},{key:"domain",width:"18%",minWidth:210,title:ae("Mail.Domain.index_51"),render:e=>{const{blacklisted:t}=e.domain_black_count,a=t?"base-error":"base-success",i=t?"#E85445":"#20a53a";return I(K,{class:"items-center! cursor-pointer",size:5},{default:()=>[I("span",{class:"flex items-center",onClick:()=>be(e.domain_black_count),title:ae("Mail.Mass.index_61")},[I(l,{class:"mr-3px",name:a,size:"18",color:i},null),I("span",null,[s(e.domain_black_count.time)])]),I(J,{trigger:"hover"},{trigger:()=>I(l,{"aria-hidden":!1,name:"search",size:"18",color:"#20a53a",onClick:()=>ve(e.a_record)},null),default:()=>ae("Mail.Domain.index_52")}),I(J,{trigger:"hover"},{trigger:()=>I(l,{"aria-hidden":!1,name:"base-left-logs",size:"18",onClick:()=>{De(e.domain_check_log)}},null),default:()=>ae("Docker.Container.index_14")})]})}},{key:"quota",title:ae("Mail.Domain.index_4"),width:"8%",minWidth:70,render:e=>`${d(e.current_usage)}/${d(e.quota)}`},{key:"mailboxes",width:"8%",minWidth:80,title:ae("Mail.Domain.index_5")},{key:"mailbox_quota",title:ae("Mail.Domain.index_6"),width:"12%",minWidth:120,render:e=>d(e.mailbox_quota)},{key:"domain",title:ae("Mail.Domain.index_7"),width:"7%",minWidth:70,render:e=>I(Q,{size:"small",value:e.catch_all,onUpdateValue:t=>{t?he(e):pe(e)}},null)},{key:"domain",title:"SSL",width:"9%",minWidth:90,render:e=>{let t;if(e.ssl_status){const t=e.ssl_info;return I(c,{type:t.endtime<0?"error":"primary",onClick:()=>{we(e)}},{default:()=>[t.endtime<0?ae("Site.PHP.index_28"):ae("Site.PHP.index_29",[t.endtime])]})}return I(c,{type:"warning",onClick:()=>{we(e)}},"function"==typeof(a=t=ae("Mail.Domain.index_9"))||"[object Object]"===Object.prototype.toString.call(a)&&!V(a)?t:{default:()=>[t]});var a}},{key:"roundcube_config",title:"WebMail",width:"10%",minWidth:140,render:e=>{const t=e.roundcube_config&&e.roundcube_config.status;return I("div",{onClick:()=>{e.roundcube_config&&e.roundcube_config.status?ue(e.roundcube_config):me(e)}},[I(Y,{class:"cursor-pointer",bordered:!1,size:"small",type:t?"success":"default"},{default:()=>[t?"Installed":"Not Installed"]})])}},y({width:170,options:e=>[{label:ae("Mail.Domain.index_10",["DNS"]),onClick:()=>{ke(e)}},{label:ae("Public.Btn.Edit"),onClick:()=>{Me(e)}},{label:ae("Public.Btn.Del"),onClick:()=>{je(e)}}]})]),re=g("Install WebMail",{domain:null,onRefresh:()=>{Ce()}}),me=e=>{re.data.domain=e,re.show=!0},ue=e=>{const t=U(!0);x({title:ae("Mail.Setting.index_15"),width:420,content:()=>I(F,null,[I("div",{class:"mb-16px"},[ae("Mail.Setting.index_16",[e.site_name])]),I(Z,{checked:t.value,onUpdateChecked:e=>{t.value=e}},{default:()=>[I("div",{class:"text-desc leading-[1.4]"},[ae("Mail.Setting.index_17")])]})]),onConfirm:async()=>{var a;await(a={id:e.id,site_name:e.site_name,force:t.value?1:0},i.post("/plugin?action=a&name=mail_sys&s=uninstall_roundcube",a,{requestOptions:{loading:"Uninstalling, please wait...",successMessage:!0}})),Ce()}})},_e=g(ae("Mail.Domain.index_11"),{onRefresh:()=>{Ce()}}),he=e=>{_e.data.row=e,_e.show=!0},pe=e=>{x({title:ae("Mail.Domain.index_11"),content:ae("Mail.Domain.index_12"),onConfirm:async()=>{await v({domain:e.domain,email:""}),Ce()}})},ge=g(ae("Mail.Domain.index_13",["SSL"]),{onRefresh:()=>{Ce()}}),we=e=>{ge.data.row=e,ge.show=!0},ye=g("",{onRefresh:async()=>{await Ce(),ke(ye.data.row)}}),xe=g(ae("Mail.Domain.index_53")),fe=g(ae("Mail.Domain.index_54")),be=e=>{xe.data.row=e,xe.show=!0},ke=async e=>{ye.data.row=e,ye.title=ae("Mail.Domain.index_14",["DNS",e.domain]),ye.show=!0},Me=e=>{le.data.row=e,le.data.isEdit=!0,le.title=ae("Mail.Domain.index_15",[e.domain]),le.show=!0},ve=async e=>{ne.value?await D({a_record:e}):f({source:320})},De=async e=>{fe.data.log=e,fe.show=!0},je=async e=>{x({title:ae("Mail.Domain.index_16"),content:ae("Mail.Domain.index_17",[e.domain]),onConfirm:async()=>{await C({domain:e.domain}),Ce()}})},Ce=async()=>{try{de.loading=!0;const{message:e}=await j(H(oe));a(e)&&(de.data=r(e.data)?e.data:[],de.total=m(e.page))}finally{de.loading=!1}},Se=async()=>{try{de.loading=!0,await S({domain:"all"}),oe.p=1,Ce()}finally{de.loading=!1}};return Ce(),(e,t)=>{const a=b,i=p,o=h,l=_,s=ee;return P(),T(F,null,[I(te),I(s,{class:"p-16px"},{default:q((()=>[I(o,{feedback:!0},{toolsLeft:q((()=>[I(W(G),{type:"primary",onClick:se},{default:q((()=>[$(E(e.$t("Mail.Domain.index_1")),1)])),_:1})])),toolsRight:q((()=>[I(W(G),{onClick:Se},{default:q((()=>[$(E(e.$t("Mail.Domain.index_2")),1)])),_:1})])),table:q((()=>[I(a,{loading:W(de).loading,data:W(de).data,columns:W(ce)},null,8,["loading","data","columns"])])),pageRight:q((()=>[I(i,{page:W(oe).p,"onUpdate:page":t[0]||(t[0]=e=>W(oe).p=e),"page-size":W(oe).size,"onUpdate:pageSize":t[1]||(t[1]=e=>W(oe).size=e),"item-count":W(de).total,onRefresh:Ce},null,8,["page","page-size","item-count"])])),_:1}),I(l,{show:W(le).show,"onUpdate:show":t[2]||(t[2]=e=>W(le).show=e),title:W(le).title,data:W(le).data,width:750,height:450,footer:!0,component:W(n)},null,8,["show","title","data","component"]),I(l,{show:W(_e).show,"onUpdate:show":t[3]||(t[3]=e=>W(_e).show=e),title:W(_e).title,data:W(_e).data,width:480,"min-height":72,footer:!0,component:W(k)},null,8,["show","title","data","component"]),I(l,{show:W(ge).show,"onUpdate:show":t[4]||(t[4]=e=>W(ge).show=e),title:W(ge).title,data:W(ge).data,width:650,"min-height":500,component:W(M)},null,8,["show","title","data","component"]),I(l,{show:W(ye).show,"onUpdate:show":t[5]||(t[5]=e=>W(ye).show=e),title:W(ye).title,data:W(ye).data,width:750,"min-height":652,component:W(z)},null,8,["show","title","data","component"]),I(l,{show:W(xe).show,"onUpdate:show":t[6]||(t[6]=e=>W(xe).show=e),title:W(xe).title,data:W(xe).data,width:650,"min-height":250,component:W(R)},null,8,["show","title","data","component"]),I(l,{show:W(fe).show,"onUpdate:show":t[7]||(t[7]=e=>W(fe).show=e),title:W(fe).title,data:W(fe).data,width:650,"min-height":350,component:W(O)},null,8,["show","title","data","component"]),I(l,{show:W(re).show,"onUpdate:show":t[8]||(t[8]=e=>W(re).show=e),title:W(re).title,data:W(re).data,width:440,"min-height":136,footer:!0,component:W(X)},null,8,["show","title","data","component"])])),_:1})],64)}}}),ie=Object.freeze(Object.defineProperty({__proto__:null,default:ae},Symbol.toStringTag,{value:"Module"}));e("a",ie)}}}));
