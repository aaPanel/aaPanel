System.register(["./page_layout-legacy.js?v=1762424784323","./index-legacy.js?v=1762424784323","./index.vue_vue_type_script_setup_true_lang-legacy5.js?v=1762424784323","./index.vue_vue_type_script_setup_true_lang-legacy7.js?v=1762424784323","./public-legacy.js?v=1762424784323","./mail-legacy.js?v=1762424784323","./vue-legacy.js?v=1762424784323","./naive-legacy.js?v=1762424784323"],function(e,t){"use strict";var a,i,n,o,l,s,d,c,r,m,u,_,p,h,g,w,y,x,f,b,k,M,v,D,j,C,S,z,U,W,P,R,q,O,$,E,I,N,L,B,F,H,T,V,A,G,J,K,Q,X,Y,Z,ee;return{setters:[e=>{a=e.d,i=e.t,n=e.i,o=e.u,l=e.n,s=e.o,d=e.w,c=e.x,r=e.a,m=e._,u=e.cy},e=>{_=e._},e=>{p=e._},e=>{h=e._},e=>{g=e.e,w=e.c,y=e.f,x=e.a,f=e.h,b=e.b},e=>{k=e.j,M=e.k,v=e.l,D=e.m,j=e.n,C=e.o,S=e.p},e=>{z=e.k,U=e.r,W=e.a2,P=e.an,R=e.U,q=e.V,O=e.a3,$=e.j,E=e.W,I=e.a4,N=e.P,L=e.a0,B=e.e,F=e.N,H=e.R,T=e._,V=e.F,A=e.u},e=>{G=e.aC,J=e.dk,K=e.da,Q=e.dj,X=e.dd,Y=e.dS,Z=e.dh,ee=e._}],execute:function(){const te=z({__name:"index",setup(e){const t=U(),i=U(0),n=async e=>{await k({operation:e}),o()},o=async()=>{const{message:e}=await M();a(e)&&(t.value=e.status,i.value=e.count)};return o(),(e,a)=>{const o=G,l=J;return 0===R(t)&&R(i)?(q(),W(l,{key:0,type:"warning",class:"mb-16px"},{default:O(()=>[$(I(e.$t("Mail.Domain.index_55"))+" ",1),E(o,{type:"primary",class:"mx-16px",onClick:a[0]||(a[0]=e=>n(1))},{default:O(()=>[$(I(e.$t("Mail.Domain.index_56")),1)]),_:1}),E(o,{type:"primary",text:"",onClick:a[1]||(a[1]=e=>n(-1))},{default:O(()=>[$(I(e.$t("Ftp.Table.index_8")),1)]),_:1})]),_:1})):P("",!0)}}});e("i",e=>i.post("/plugin?action=a&name=mail_sys&s=deploy_roundcube",e,{requestOptions:{loading:"Installing, please wait..."}})),e("s",e=>i.post("/plugin?action=a&name=mail_sys&s=open_domain_ssl_alarm",e,{requestOptions:{loading:n.global.t("Crontab.Api.index_2"),successMessage:!0}})),e("g",e=>i.post("/plugin?action=a&name=mail_sys&s=get_domain_record",e));const ae=z({__name:"index",setup(e){const n=T(()=>r(()=>t.import("./index-legacy199.js?v=1762424784323"),void 0)),k=T(()=>r(()=>t.import("./index-legacy200.js?v=1762424784323"),void 0)),M=T(()=>r(()=>t.import("./index-legacy201.js?v=1762424784323"),void 0)),z=T(()=>r(()=>t.import("./index-legacy202.js?v=1762424784323"),void 0)),W=T(()=>r(()=>t.import("./index-legacy203.js?v=1762424784323"),void 0)),P=T(()=>r(()=>t.import("./index-legacy204.js?v=1762424784323"),void 0)),J=T(()=>r(()=>t.import("./install-legacy.js?v=1762424784323"),void 0)),{t:ae}=N(),ie=o(),{isPro:ne}=L(ie),oe=B({p:1,size:10}),le=g("",{isEdit:!1,onRefresh:()=>{Ce()}}),se=()=>{le.data.isEdit=!1,le.title=ae("Mail.Domain.index_1"),le.show=!0},{table:de,columns:ce}=w([{key:"domain",title:ae("Mail.Domain.index_3"),minWidth:130,ellipsis:{tooltip:!0}},{key:"domain",width:"18%",minWidth:210,title:ae("Mail.Domain.index_51"),render:e=>{const{blacklisted:t}=e.domain_black_count,a=t?"base-error":"base-success",i=t?"#E85445":"#20a53a";return E(K,{class:"items-center! cursor-pointer",size:5},{default:()=>[E("span",{class:"flex items-center",onClick:()=>be(e.domain_black_count),title:ae("Mail.Mass.index_61")},[E(m,{class:"mr-3px",name:a,size:"18",color:i},null),E("span",null,[u(e.domain_black_count.time)])]),E(Z,{trigger:"hover"},{trigger:()=>E(m,{"aria-hidden":!1,name:"search",size:"18",color:"#20a53a",onClick:()=>ve(e.a_record)},null),default:()=>ae("Mail.Domain.index_52")}),E(Z,{trigger:"hover"},{trigger:()=>E(m,{"aria-hidden":!1,name:"base-left-logs",size:"18",onClick:()=>{De(e.domain_check_log)}},null),default:()=>ae("Docker.Container.index_14")})]})}},{key:"quota",title:ae("Mail.Domain.index_4"),width:"8%",minWidth:70,render:e=>`${l(e.current_usage)}/${l(e.quota)}`},{key:"mailboxes",width:"8%",minWidth:80,title:ae("Mail.Domain.index_5")},{key:"mailbox_quota",title:ae("Mail.Domain.index_6"),width:"12%",minWidth:120,render:e=>l(e.mailbox_quota)},{key:"domain",title:ae("Mail.Domain.index_7"),width:"7%",minWidth:70,render:e=>E(Q,{size:"small",value:e.catch_all,onUpdateValue:t=>{t?pe(e):he(e)}},null)},{key:"domain",title:"SSL",width:"9%",minWidth:90,render:e=>{let t;if(e.ssl_status){const t=e.ssl_info;return E(s,{type:t.endtime<0?"error":"primary",onClick:()=>{we(e)}},{default:()=>[t.endtime<0?ae("Site.PHP.index_28"):ae("Site.PHP.index_29",[t.endtime])]})}return E(s,{type:"warning",onClick:()=>{we(e)}},"function"==typeof(a=t=ae("Mail.Domain.index_9"))||"[object Object]"===Object.prototype.toString.call(a)&&!A(a)?t:{default:()=>[t]});var a}},{key:"roundcube_config",title:"WebMail",width:"10%",minWidth:140,render:e=>{const t=e.roundcube_config&&e.roundcube_config.status;return E("div",{onClick:()=>{e.roundcube_config&&e.roundcube_config.status?ue(e.roundcube_config):me(e)}},[E(X,{class:"cursor-pointer",bordered:!1,size:"small",type:t?"success":"default"},{default:()=>[t?"Installed":"Not Installed"]})])}},y({width:170,options:e=>[{label:ae("Mail.Domain.index_10",["DNS"]),onClick:()=>{ke(e)}},{label:ae("Public.Btn.Edit"),onClick:()=>{Me(e)}},{label:ae("Public.Btn.Del"),onClick:()=>{je(e)}}]})]),re=g("Install WebMail",{domain:null,onRefresh:()=>{Ce()}}),me=e=>{re.data.domain=e,re.show=!0},ue=e=>{const t=U(!0);x({title:ae("Mail.Setting.index_15"),width:420,content:()=>E(V,null,[E("div",{class:"mb-16px"},[ae("Mail.Setting.index_16",[e.site_name])]),E(ee,{checked:t.value,onUpdateChecked:e=>{t.value=e}},{default:()=>[E("div",{class:"text-desc leading-[1.4]"},[ae("Mail.Setting.index_17")])]})]),onConfirm:async()=>{var a;await(a={id:e.id,site_name:e.site_name,force:t.value?1:0},i.post("/plugin?action=a&name=mail_sys&s=uninstall_roundcube",a,{requestOptions:{loading:"Uninstalling, please wait...",successMessage:!0}})),Ce()}})},_e=g(ae("Mail.Domain.index_11"),{onRefresh:()=>{Ce()}}),pe=e=>{_e.data.row=e,_e.show=!0},he=e=>{x({title:ae("Mail.Domain.index_11"),content:ae("Mail.Domain.index_12"),onConfirm:async()=>{await C({domain:e.domain,email:""}),Ce()}})},ge=g(ae("Mail.Domain.index_13",["SSL"]),{onRefresh:()=>{Ce()}}),we=e=>{ge.data.row=e,ge.show=!0},ye=g("",{onRefresh:async()=>{await Ce(),ke(ye.data.row)}}),xe=g(ae("Mail.Domain.index_53")),fe=g(ae("Mail.Domain.index_54")),be=e=>{xe.data.row=e,xe.show=!0},ke=async e=>{ye.data.row=e,ye.title=ae("Mail.Domain.index_14",["DNS",e.domain]),ye.show=!0},Me=e=>{le.data.row=e,le.data.isEdit=!0,le.title=ae("Mail.Domain.index_15",[e.domain]),le.show=!0},ve=async e=>{ne.value?await S({a_record:e}):b({source:320})},De=async e=>{fe.data.log=e,fe.show=!0},je=async e=>{x({title:ae("Mail.Domain.index_16"),content:ae("Mail.Domain.index_17",[e.domain]),onConfirm:async()=>{await v({domain:e.domain}),Ce()}})},Ce=async()=>{try{de.loading=!0;const{message:e}=await D(F(oe));a(e)&&(de.data=d(e.data)?e.data:[],de.total=c(e.page))}finally{de.loading=!1}},Se=async()=>{try{de.loading=!0,await j({domain:"all"}),oe.p=1,Ce()}finally{de.loading=!1}};return Ce(),(e,t)=>{const a=f,i=h,o=p,l=_,s=Y;return q(),H(V,null,[E(te),E(s,{class:"p-16px"},{default:O(()=>[E(o,{feedback:!0},{toolsLeft:O(()=>[E(R(G),{type:"primary",onClick:se},{default:O(()=>[$(I(e.$t("Mail.Domain.index_1")),1)]),_:1})]),toolsRight:O(()=>[E(R(G),{onClick:Se},{default:O(()=>[$(I(e.$t("Mail.Domain.index_2")),1)]),_:1})]),table:O(()=>[E(a,{loading:R(de).loading,data:R(de).data,columns:R(ce)},null,8,["loading","data","columns"])]),pageRight:O(()=>[E(i,{page:R(oe).p,"onUpdate:page":t[0]||(t[0]=e=>R(oe).p=e),"page-size":R(oe).size,"onUpdate:pageSize":t[1]||(t[1]=e=>R(oe).size=e),"item-count":R(de).total,onRefresh:Ce},null,8,["page","page-size","item-count"])]),_:1}),E(l,{show:R(le).show,"onUpdate:show":t[2]||(t[2]=e=>R(le).show=e),title:R(le).title,data:R(le).data,width:750,height:450,footer:!0,component:R(n)},null,8,["show","title","data","component"]),E(l,{show:R(_e).show,"onUpdate:show":t[3]||(t[3]=e=>R(_e).show=e),title:R(_e).title,data:R(_e).data,width:480,"min-height":72,footer:!0,component:R(k)},null,8,["show","title","data","component"]),E(l,{show:R(ge).show,"onUpdate:show":t[4]||(t[4]=e=>R(ge).show=e),title:R(ge).title,data:R(ge).data,width:650,"min-height":500,component:R(M)},null,8,["show","title","data","component"]),E(l,{show:R(ye).show,"onUpdate:show":t[5]||(t[5]=e=>R(ye).show=e),title:R(ye).title,data:R(ye).data,width:750,"min-height":652,component:R(z)},null,8,["show","title","data","component"]),E(l,{show:R(xe).show,"onUpdate:show":t[6]||(t[6]=e=>R(xe).show=e),title:R(xe).title,data:R(xe).data,width:650,"min-height":250,component:R(W)},null,8,["show","title","data","component"]),E(l,{show:R(fe).show,"onUpdate:show":t[7]||(t[7]=e=>R(fe).show=e),title:R(fe).title,data:R(fe).data,width:650,"min-height":350,component:R(P)},null,8,["show","title","data","component"]),E(l,{show:R(re).show,"onUpdate:show":t[8]||(t[8]=e=>R(re).show=e),title:R(re).title,data:R(re).data,width:440,"min-height":136,footer:!0,component:R(J)},null,8,["show","title","data","component"])]),_:1})],64)}}}),ie=Object.freeze(Object.defineProperty({__proto__:null,default:ae},Symbol.toStringTag,{value:"Module"}));e("a",ie)}}});
