System.register(["./index-legacy.js?v=1763625242172","./page_layout-legacy.js?v=1763625242172","./vue-legacy.js?v=1763625242172","./index-legacy39.js?v=1763625242172","./ResourceManagerWindow-legacy.js?v=1763625242172","./naive-legacy.js?v=1763625242172","./common-legacy.js?v=1763625242172","./__commonjsHelpers__-legacy.js?v=1763625242172","./public-legacy.js?v=1763625242172","./soft-legacy2.js?v=1763625242172","./soft-legacy.js?v=1763625242172","./site-legacy.js?v=1763625242172","./file-legacy2.js?v=1763625242172","./index.vue_vue_type_script_setup_true_lang-legacy7.js?v=1763625242172"],(function(e,l){"use strict";var t,a,n,s,c,i,o,r,d,u,f,p,h,v,m,g,y,x,_,b,C,j,k,w,F,$,M,U,O,R,P,S,T,W,D,H;return{setters:[e=>{t=e._},e=>{a=e.m,n=e.bf,s=e._,c=e.q,i=e.bO,o=e.bP,r=e.p},e=>{d=e.k,u=e.P,f=e.i,p=e.r,h=e.R,v=e.S,m=e.X,g=e.a3,y=e.U,x=e.V,_=e.j,b=e.a4,C=e.a2,j=e.an,k=e.F,w=e.O,F=e.au,$=e.aj},e=>{M=e.o},e=>{U=e.R},e=>{O=e.au,R=e.aC,P=e.az,S=e.dP,T=e._,W=e.dU,D=e.dT,H=e.dW},null,null,null,null,null,null,null,null],execute:function(){var l=document.createElement("style");l.textContent='@charset "UTF-8";.modal-footer-btns[data-v-17c24141]{display:flex;align-items:center;flex-direction:row;justify-content:end;gap:10px;padding:10px}.single-line-ellipsis[data-v-17c24141]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.search-wrapper[data-v-17c24141]{padding:20px}.search-wrapper .search-res .top-desc[data-v-17c24141]{display:flex;justify-content:start;align-content:center;margin-bottom:5px}.search-wrapper .search-res .match-list .match-list-item[data-v-17c24141]{display:flex;align-items:center;flex-direction:row;justify-content:start;gap:5px;padding:0 10px 10px}[data-v-17c24141] .n-collapse{border:1px solid var(--color-border)}[data-v-17c24141] .n-collapse .n-collapse-item:first-child>.n-collapse-item__header{padding:10px 15px 10px 5px;background:var(--color-bg-2)}\n',document.head.appendChild(l);const q={class:"search-wrapper"},z={class:"w-100% flex justify-start gap-6 items-center"},E={class:"w-100% flex justify-between"},I={class:"search-res"},L={class:"top-desc"},V={class:"mr-5px"},X={class:"match-list"},A={class:"text-font1 fw-bold"},B=["innerHTML"];e("default",r(d({__name:"SearchFileContent",props:{currentPath:{type:String,default:"/"}},setup(e,{expose:l}){const r=e,{t:d}=u(),G=f("fileStore"),{currentPath:J,resetSearchFileContentFormData:K}=G;function N(){K()}l({open:function(){te.value=!0,Z.value.path=J.value},close:N});const{searchStatistics:Q,searchRes:Y,searchFileContentFormData:Z}=G,ee=p(),le=p(r.currentPath),te=p(!1);function ae(){!async function(){const e=a.loading(d("file.searchFileContentModal.searching"));try{const e=await n.post("/files?action=files_search",Z.value,{requestOptions:{isOriginalResult:!0}});Y.value=e.message,Object.keys(Y.value).length&&(Q.value.files=Object.keys(Y.value).length,Q.value.times=Object.values(Y.value).flat().reduce(((e,l)=>e+Object.values(l).length),0))}catch(l){console.warn(l)}finally{e.close()}}()}function ne(e,l){const t=new RegExp(l,"g");return e.replace(t,`<span style="color:#ff3300">${l}</span>`)}function se(){ee.value.open()}function ce(e){Z.value.path=e}return(e,l)=>{const a=O,n=R,r=P,d=S,u=T,f=s,p=W,G=D,K=H,ie=c,oe=i,re=o,de=t;return h(),v(k,null,[m(de,{show:x(te),"onUpdate:show":l[7]||(l[7]=e=>$(te)?te.value=e:null),title:e.$t("file.searchFileContentModal.title"),width:720,onPublicClose:N},{default:g((()=>[y("div",q,[m(K,{"label-placement":"left","label-width":60,"label-align":"left"},{default:g((()=>[m(d,{label:e.$t("file.searchFileContentModal.search")},{default:g((()=>[m(r,null,{default:g((()=>[m(a,{value:x(Z).text,"onUpdate:value":l[0]||(l[0]=e=>x(Z).text=e)},null,8,["value"]),m(n,{type:"primary",onClick:ae},{default:g((()=>[_(b(e.$t("file.searchFileContentModal.search")),1)])),_:1})])),_:1})])),_:1},8,["label"]),m(d,{label:e.$t("file.searchFileContentModal.suffix")},{default:g((()=>[m(a,{value:x(Z).exts,"onUpdate:value":l[1]||(l[1]=e=>x(Z).exts=e)},null,8,["value"])])),_:1},8,["label"]),m(d,{label:e.$t("file.searchFileContentModal.folder")},{default:g((()=>[y("div",z,[m(a,{value:x(Z).path,"onUpdate:value":l[3]||(l[3]=e=>x(Z).path=e)},{suffix:g((()=>[m(u,{checked:x(Z).is_subdir,"onUpdate:checked":l[2]||(l[2]=e=>x(Z).is_subdir=e),"checked-value":1,"unchecked-value":0},{default:g((()=>[_(b(e.$t("file.searchFileContentModal.subdir")),1)])),_:1},8,["checked"])])),_:1},8,["value"]),m(f,{name:"file-dir",color:"#000",size:"24",style:{cursor:"pointer"},onClick:se})])])),_:1},8,["label"]),m(d,{label:e.$t("file.searchFileContentModal.mode")},{default:g((()=>[y("div",E,[m(G,{value:x(Z).mode,"onUpdate:value":l[4]||(l[4]=e=>x(Z).mode=e)},{default:g((()=>[m(p,{value:0},{default:g((()=>[_(b(e.$t("file.searchFileContentModal.words")),1)])),_:1}),m(p,{value:1},{default:g((()=>[_(b(e.$t("file.searchFileContentModal.regex")),1)])),_:1})])),_:1},8,["value"]),y("div",null,[0==x(Z).mode?(h(),C(u,{key:0,checked:x(Z).isword,"onUpdate:checked":l[5]||(l[5]=e=>x(Z).isword=e),label:e.$t("file.searchFileContentModal.matchWholeWord"),class:"mr-5","checked-value":1,"unchecked-value":0},null,8,["checked","label"])):j("",!0),m(u,{checked:x(Z).iscase,"onUpdate:checked":l[6]||(l[6]=e=>x(Z).iscase=e),label:e.$t("file.searchFileContentModal.matchCase"),"checked-value":1,"unchecked-value":0},null,8,["checked","label"])])])])),_:1},8,["label"])])),_:1}),y("div",I,[y("div",L,[y("span",V,b(e.$t("file.searchFileContentModal.searchResult")),1),y("span",null,b(x(Q).times)+" "+b(e.$t("file.searchFileContentModal.matchesIn"))+" "+b(x(Q).files)+" "+b(e.$t("file.searchFileContentModal.files")),1)]),m(ie,{style:{"margin-bottom":"20px"}}),(h(!0),v(k,null,w(x(Y),((l,t)=>(h(),C(re,{key:t,class:"mb-10px"},{default:g((()=>[m(oe,{title:`${t} (${e.$t("file.searchFileContentModal.match")} ${Object.values(l).length} ${e.$t("file.searchFileContentModal.times")})`,name:"1"},{"header-extra":g((()=>[m(n,{text:"",type:"primary",onClick:F((e=>async function(e){M(0,e,J.value)}(t)),["stop"])},{default:g((()=>[_(b(e.$t("file.searchFileContentModal.edit")),1)])),_:2},1032,["onClick"])])),default:g((()=>[y("div",X,[(h(!0),v(k,null,w(l,((l,t)=>(h(),v("div",{class:"match-list-item",key:t},[y("div",A,b(e.$t("file.searchFileContentModal.line"))+" "+b(t)+": ",1),y("div",{innerHTML:ne(l,x(Z).text)},null,8,B)])))),128))])])),_:2},1032,["title"])])),_:2},1024)))),128))])])])),_:1},8,["show","title"]),m(U,{"current-path":x(le),ref_key:"resourceRef",ref:ee,onChooseDir:ce},null,8,["current-path"])],64)}}}),[["__scopeId","data-v-17c24141"]]))}}}));
