System.register(["./index-legacy.js?v=1769066082311","./page_layout-legacy.js?v=1769066082311","./vue-legacy.js?v=1769066082311","./CalcSize.vue_vue_type_script_setup_true_lang-legacy.js?v=1769066082311","./ResourceManagerWindow-legacy.js?v=1769066082311","./naive-legacy.js?v=1769066082311","./common-legacy.js?v=1769066082311","./__commonjsHelpers__-legacy.js?v=1769066082311","./public-legacy.js?v=1769066082311","./soft-legacy2.js?v=1769066082311","./soft-legacy.js?v=1769066082311","./site-legacy.js?v=1769066082311","./index-legacy38.js?v=1769066082311","./file-legacy2.js?v=1769066082311","./index.vue_vue_type_script_setup_true_lang-legacy7.js?v=1769066082311"],function(e,l){"use strict";var t,a,n,s,c,i,o,r,d,u,p,f,h,v,g,m,y,_,x,b,C,k,j,w,F,$,M,U,S,O,R,P,W,D,E,H;return{setters:[e=>{t=e._},e=>{a=e._,n=e.q,s=e.bs,c=e.br,i=e.m,o=e.aE,r=e.p},e=>{d=e.k,u=e.P,p=e.i,f=e.r,h=e.R,v=e.V,g=e.W,m=e.a3,y=e.S,_=e.U,x=e.j,b=e.a4,C=e.a2,k=e.an,j=e.F,w=e.O,F=e.au,$=e.ak},e=>{M=e.W},e=>{U=e.R},e=>{S=e.dX,O=e.dS,R=e.av,P=e.au,W=e.aC,D=e._,E=e.dU,H=e.dV},null,null,null,null,null,null,null,null,null],execute:function(){var l=document.createElement("style");l.textContent='@charset "UTF-8";.modal-footer-btns[data-v-17c24141]{display:flex;align-items:center;flex-direction:row;justify-content:end;gap:10px;padding:10px}.single-line-ellipsis[data-v-17c24141]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.search-wrapper[data-v-17c24141]{padding:20px}.search-wrapper .search-res .top-desc[data-v-17c24141]{display:flex;justify-content:start;align-content:center;margin-bottom:5px}.search-wrapper .search-res .match-list .match-list-item[data-v-17c24141]{display:flex;align-items:center;flex-direction:row;justify-content:start;gap:5px;padding:0 10px 10px}[data-v-17c24141] .n-collapse{border:1px solid var(--color-border)}[data-v-17c24141] .n-collapse .n-collapse-item:first-child>.n-collapse-item__header{padding:10px 15px 10px 5px;background:var(--color-bg-2)}\n/*$vite$:1*/',document.head.appendChild(l);const T={class:"search-wrapper"},q={class:"w-100% flex justify-start gap-6 items-center"},z={class:"w-100% flex justify-between"},I={class:"search-res"},L={class:"top-desc"},V={class:"mr-5px"},X={class:"match-list"},A={class:"text-font1 fw-bold"},B=["innerHTML"];e("default",r(d({__name:"SearchFileContent",props:{currentPath:{type:String,default:"/"}},setup(e,{expose:l}){const r=e,{t:d}=u(),G=p("fileStore"),{currentPath:J,resetSearchFileContentFormData:K}=G;function N(){K()}l({open:function(){te.value=!0,Z.value.path=J.value},close:N});const{searchStatistics:Q,searchRes:Y,searchFileContentFormData:Z}=G,ee=f(),le=f(r.currentPath),te=f(!1);function ae(){!async function(){const e=i.loading(d("file.searchFileContentModal.searching"));try{const e=await o.post("/files?action=files_search",Z.value,{requestOptions:{isOriginalResult:!0}});Y.value=e.message,Object.keys(Y.value).length&&(Q.value.files=Object.keys(Y.value).length,Q.value.times=Object.values(Y.value).flat().reduce((e,l)=>e+Object.values(l).length,0))}catch(l){console.warn(l)}finally{e.close()}}()}function ne(e,l){const t=new RegExp(l,"g");return e.replace(t,`<span style="color:#ff3300">${l}</span>`)}function se(){ee.value.open()}function ce(e){Z.value.path=e}return(e,l)=>{const i=P,o=W,r=R,d=O,u=D,p=a,f=H,G=E,K=S,ie=n,oe=c,re=s,de=t;return v(),h(j,null,[g(de,{show:_(te),"onUpdate:show":l[7]||(l[7]=e=>$(te)?te.value=e:null),title:e.$t("file.searchFileContentModal.title"),width:720,onPublicClose:N},{default:m(()=>[y("div",T,[g(K,{"label-placement":"left","label-width":60,"label-align":"left"},{default:m(()=>[g(d,{label:e.$t("file.searchFileContentModal.search")},{default:m(()=>[g(r,null,{default:m(()=>[g(i,{value:_(Z).text,"onUpdate:value":l[0]||(l[0]=e=>_(Z).text=e)},null,8,["value"]),g(o,{type:"primary",onClick:ae},{default:m(()=>[x(b(e.$t("file.searchFileContentModal.search")),1)]),_:1})]),_:1})]),_:1},8,["label"]),g(d,{label:e.$t("file.searchFileContentModal.suffix")},{default:m(()=>[g(i,{value:_(Z).exts,"onUpdate:value":l[1]||(l[1]=e=>_(Z).exts=e)},null,8,["value"])]),_:1},8,["label"]),g(d,{label:e.$t("file.searchFileContentModal.folder")},{default:m(()=>[y("div",q,[g(i,{value:_(Z).path,"onUpdate:value":l[3]||(l[3]=e=>_(Z).path=e)},{suffix:m(()=>[g(u,{checked:_(Z).is_subdir,"onUpdate:checked":l[2]||(l[2]=e=>_(Z).is_subdir=e),"checked-value":1,"unchecked-value":0},{default:m(()=>[x(b(e.$t("file.searchFileContentModal.subdir")),1)]),_:1},8,["checked"])]),_:1},8,["value"]),g(p,{name:"file-dir",color:"#000",size:"24",style:{cursor:"pointer"},onClick:se})])]),_:1},8,["label"]),g(d,{label:e.$t("file.searchFileContentModal.mode")},{default:m(()=>[y("div",z,[g(G,{value:_(Z).mode,"onUpdate:value":l[4]||(l[4]=e=>_(Z).mode=e)},{default:m(()=>[g(f,{value:0},{default:m(()=>[x(b(e.$t("file.searchFileContentModal.words")),1)]),_:1}),g(f,{value:1},{default:m(()=>[x(b(e.$t("file.searchFileContentModal.regex")),1)]),_:1})]),_:1},8,["value"]),y("div",null,[0==_(Z).mode?(v(),C(u,{key:0,checked:_(Z).isword,"onUpdate:checked":l[5]||(l[5]=e=>_(Z).isword=e),label:e.$t("file.searchFileContentModal.matchWholeWord"),class:"mr-5","checked-value":1,"unchecked-value":0},null,8,["checked","label"])):k("",!0),g(u,{checked:_(Z).iscase,"onUpdate:checked":l[6]||(l[6]=e=>_(Z).iscase=e),label:e.$t("file.searchFileContentModal.matchCase"),"checked-value":1,"unchecked-value":0},null,8,["checked","label"])])])]),_:1},8,["label"])]),_:1}),y("div",I,[y("div",L,[y("span",V,b(e.$t("file.searchFileContentModal.searchResult")),1),y("span",null,b(_(Q).times)+" "+b(e.$t("file.searchFileContentModal.matchesIn"))+" "+b(_(Q).files)+" "+b(e.$t("file.searchFileContentModal.files")),1)]),g(ie,{style:{"margin-bottom":"20px"}}),(v(!0),h(j,null,w(_(Y),(l,t)=>(v(),C(re,{key:t,class:"mb-10px"},{default:m(()=>[g(oe,{title:`${t} (${e.$t("file.searchFileContentModal.match")} ${Object.values(l).length} ${e.$t("file.searchFileContentModal.times")})`,name:"1"},{"header-extra":m(()=>[g(o,{text:"",type:"primary",onClick:F(e=>async function(e){M(0,e,J.value)}(t),["stop"])},{default:m(()=>[x(b(e.$t("file.searchFileContentModal.edit")),1)]),_:2},1032,["onClick"])]),default:m(()=>[y("div",X,[(v(!0),h(j,null,w(l,(l,t)=>(v(),h("div",{class:"match-list-item",key:t},[y("div",A,b(e.$t("file.searchFileContentModal.line"))+" "+b(t)+": ",1),y("div",{innerHTML:ne(l,_(Z).text)},null,8,B)]))),128))])]),_:2},1032,["title"])]),_:2},1024))),128))])])]),_:1},8,["show","title"]),g(U,{"current-path":_(le),ref_key:"resourceRef",ref:ee,onChooseDir:ce},null,8,["current-path"])],64)}}}),[["__scopeId","data-v-17c24141"]]))}}});
