import{_ as e}from"./index135.js?v=1767769852656";import{d as t,_ as a}from"./public.js?v=1767769852656";import{u as s,T as r,_ as o,q as i,o as l,n as p,d as n,p as u}from"./page_layout.js?v=1767769852656";import{_ as c}from"./logo.js?v=1767769852656";import{u as _,J as d}from"./index87.js?v=1767769852656";import{J as y,K as f}from"./php.js?v=1767769852656";import{k as m,ad as v,ae as x,R as b,V as j,a2 as h,an as g,W as T,a3 as k,j as w,a4 as S,P as A,a0 as $,c as q,r as C,e as L,aG as P,o as U,a5 as V,U as R,F as W,O as I,S as M}from"./vue.js?v=1767769852656";import{_ as z}from"./index.vue_vue_type_script_setup_true_lang14.js?v=1767769852656";import{dT as B,e1 as D,da as G,aC as O,G as F}from"./naive.js?v=1767769852656";import"./common.js?v=1767769852656";import"./__commonjsHelpers__.js?v=1767769852656";import"./index.js?v=1767769852656";import"./index.vue_vue_type_script_setup_true_lang5.js?v=1767769852656";import"./index.vue_vue_type_script_setup_true_lang6.js?v=1767769852656";import"./index.vue_vue_type_script_setup_true_lang7.js?v=1767769852656";import"./index.vue_vue_type_script_setup_true_lang9.js?v=1767769852656";import"./index.vue_vue_type_script_setup_true_lang8.js?v=1767769852656";import"./index133.js?v=1767769852656";import"./soft.js?v=1767769852656";import"./site.js?v=1767769852656";import"./site3.js?v=1767769852656";import"./index251.js?v=1767769852656";import"./index99.js?v=1767769852656";import"./index109.js?v=1767769852656";import"./index.vue_vue_type_script_setup_true_lang.js?v=1767769852656";import"./index.vue_vue_type_script_setup_true_lang11.js?v=1767769852656";import"./index98.js?v=1767769852656";import"./index100.js?v=1767769852656";import"./theme-monokai.js?v=1767769852656";import"./file.js?v=1767769852656";import"./refersh.js?v=1767769852656";import"./index.vue_vue_type_script_setup_true_lang17.js?v=1767769852656";import"./index104.js?v=1767769852656";import"./ssl.js?v=1767769852656";import"./cert.js?v=1767769852656";import"./ssl-lets-progress.js?v=1767769852656";import"./utils3.js?v=1767769852656";import"./index222.js?v=1767769852656";import"./paypal-js.js?v=1767769852656";import"./upload.js?v=1767769852656";const H={class:"flex gap-4"},J=m({__name:"tren-type",props:v({showSort:{type:Boolean,default:!0}},{sort:{default:"desc"},sortModifiers:{},type:{default:"traffic"},typeModifiers:{}}),emits:["update:sort","update:type"],setup(e){const t=x(e,"sort"),a=x(e,"type");return(s,r)=>{const o=D,i=B;return j(),b("div",H,[e.showSort?(j(),h(i,{key:0,value:t.value,"onUpdate:value":r[0]||(r[0]=e=>t.value=e),size:"small"},{default:k(()=>[T(o,{value:"desc"},{default:k(()=>[w(S(s.$t("Desc")),1)]),_:1}),T(o,{value:"asc"},{default:k(()=>[w(S(s.$t("Asc")),1)]),_:1})]),_:1},8,["value"])):g("",!0),T(i,{value:a.value,"onUpdate:value":r[1]||(r[1]=e=>a.value=e),size:"small"},{default:k(()=>[T(o,{value:"traffic"},{default:k(()=>[w(S(s.$t("Traffic")),1)]),_:1}),T(o,{value:"req_count"},{default:k(()=>[w(S(s.$t("Requests")),1)]),_:1}),T(o,{value:"ip_count"},{default:k(()=>r[2]||(r[2]=[w("IP",-1)])),_:1,__:[2]}),T(o,{value:"uv"},{default:k(()=>r[3]||(r[3]=[w("UV",-1)])),_:1,__:[3]}),T(o,{value:"pv"},{default:k(()=>r[4]||(r[4]=[w("PV",-1)])),_:1,__:[4]})]),_:1},8,["value"])])}}}),K=["textContent"],Y={key:1},E={class:"font-bold text-16px text-font2"},N={class:"text-font2"},Q={class:"text-font2"},X={class:"font-bold text-16px text-font2"},Z={class:"font-bold text-16px text-font2"},ee=u(m({__name:"index",props:{name:{type:String,default:""},showTops5:{type:Boolean,default:!0}},setup(u){const{t:m}=A(),{siteMonitorStatus:v}=$(s()),{webserver:x,isMonitorInstall:B}=$(_()),D=q(()=>"openlitespeed"!==x.value&&(B.value||v.value)),H=C(!1),ee=u,te=L({sort:"desc",top5Type:"traffic",trenType:"traffic"}),ae={traffic:m("Traffic"),req_count:m("Requests"),ip_count:"IP",uv:"UV",pv:"PV"},se=C([]),re=q(()=>ae[te.trenType]),oe=e=>"traffic"===e?"traffic_bytes":e,ie=(e,t)=>"traffic"===t?p(e):e,le=L({today:{traffic_human:"-",req_count:"-",ip_count:"-",uv:"-",pv:"-"},yesterday:{traffic_human:"-",req_count:"-",ip_count:"-",uv:"-",pv:"-"},day_before:{traffic_human:"-",req_count:"-",ip_count:"-",uv:"-",pv:"-"}}),pe=[{key:"traffic_human",label:m("Traffic")},{key:"req_count",label:m("Requests")},{key:"ip_count",label:"IP"},{key:"uv",label:"UV"},{key:"pv",label:"PV"}],ne=P({grid:{left:150,right:50,top:20,bottom:20},tooltip:{trigger:"axis",backgroundColor:"var(--chart-tooltip-bg-color)",textStyle:{color:"var(--chart-tooltip-text-color)"},formatter:e=>{const t=Array.isArray(e)?e[0]:e,a=t.name||t.axisValueLabel||"",s=Array.isArray(t.value)?t.value[0]:t.value;return"".concat(a,"<br/>").concat(ae[te.top5Type],": ").concat(ie(s,te.top5Type))}},xAxis:{type:"value",axisLabel:{formatter:e=>ie(e,te.top5Type)}},yAxis:{type:"category",data:[],axisTick:{show:!1},axisLine:{show:!1},axisLabel:{width:130,overflow:"truncate",ellipsis:"...",lineHeight:18,margin:4,align:"right"}},series:[{type:"bar",data:[],barWidth:14,label:{show:!0,position:"right",color:"#666",formatter:e=>ie(e.value,te.top5Type)},itemStyle:{color:"#20a53a",borderRadius:[0,6,6,0]}}]}),ue=P({grid:{left:80,right:30,top:20,bottom:20},tooltip:{trigger:"axis",backgroundColor:"var(--chart-tooltip-bg-color)",textStyle:{color:"var(--chart-tooltip-text-color)"},formatter:e=>{var t;const a=Array.isArray(e)?e[0]:e,s=a.name||a.axisValueLabel||"",r=Array.isArray(a.value)?null!=(t=a.value[1])?t:a.value[0]:a.value;return"".concat(s,"<br/>").concat(re.value,": ").concat(ie(r,te.trenType))}},xAxis:{type:"category",boundaryGap:!1,data:[]},yAxis:{type:"value",axisLabel:{formatter:e=>ie(e,te.trenType)}},series:[{type:"line",data:[],smooth:!0,symbol:"circle",symbolSize:6,itemStyle:{color:"#fff",borderColor:"#20a53a",borderWidth:2},lineStyle:{color:"#20a53a",width:2},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(32,165,58,0.35)"},{offset:1,color:"rgba(32,165,58,0.05)"}]}}}]}),ce=()=>{var e;const t=oe(te.trenType);ue.xAxis={...ue.xAxis,data:se.value.map(e=>e.date.substring(5))},ue.series=[{...null==(e=ue.series)?void 0:e[0],data:se.value.map(e=>e[t]||0)}]},{loading:_e,setLoading:de}=t(),ye=async()=>{try{let e;if(de(!0),ee.name){e=(await y({site_name:ee.name})).message}else{e=(await f({metric:te.top5Type,order:te.sort})).message}n(e)&&(se.value=e.trend_7days.points,Object.assign(le,e.overview_three_days),ce(),ee.name||(e=>{var t;H.value=0===e.top5_sites.items.length;const a=oe(te.top5Type);ne.yAxis={...ne.yAxis,data:e.top5_sites.items.map(e=>e.site).reverse()},ne.series=[{...null==(t=ne.series)?void 0:t[0],data:e.top5_sites.items.map(e=>e[a]||0).reverse()}]})(e))}finally{de(!1)}};return U(()=>{"openlitespeed"!==x.value&&(B.value||v.value)&&ye()}),(t,s)=>{const p=l,n=V("i18n-t"),u=G,_=o,y=O,f=F,m=i,v=a,A=r,$=e;return j(),h($,{install:R(D)},{desc:k(()=>["openlitespeed"==R(x)?(j(),b("span",{key:0,textContent:S(t.$t("This feature is not currently supported by the OpenLiteSpeed service"))},null,8,K)):(j(),b("span",Y,[T(n,{keypath:"Please use {a} or enable Site Monitor in the Settings"},{a:k(()=>[T(p,{class:"font-bold",onClick:s[0]||(s[0]=e=>R(d)(ee.name))},{default:k(()=>s[5]||(s[5]=[w("Website statistics-v2",-1)])),_:1,__:[5]})]),_:1})]))]),default:k(()=>[T(A,{class:"py-16px px-30px",show:R(_e)},{default:k(()=>[T(u,{class:"justify-between!"},{default:k(()=>[(j(),b(W,null,I(pe,e=>T(u,{class:"flex-col! items-center",key:e.key},{default:k(()=>[M("span",null,[s[6]||(s[6]=M("span",{class:"circle"},null,-1)),M("span",null,S(e.label),1)]),M("span",E,S(R(le).today[e.key]),1),M("span",N,S(t.$t("Public.Search.Yesterday"))+" "+S(R(le).yesterday[e.key]),1),M("span",Q,S(t.$t("Day Before"))+" "+S(R(le).day_before[e.key]),1)]),_:2},1024)),64)),T(u,{class:"flex-col! items-center justify-center! cursor-pointer",onClick:ye},{default:k(()=>[T(u,{class:"items-center",size:5},{default:k(()=>[T(_,{name:"base-refresh",color:"#20a53a"}),T(y,{type:"primary",text:""},{default:k(()=>[w(S(t.$t("Refresh")),1)]),_:1})]),_:1}),s[7]||(s[7]=M("img",{src:c,class:"w-40px h-40px"},null,-1))]),_:1,__:[7]})]),_:1}),ee.showTops5?(j(),b(W,{key:0},[T(u,{class:"my-25px justify-between! items-center"},{default:k(()=>[M("div",X,S(t.$t("Today Top 5 Websites")),1),T(J,{sort:R(te).sort,"onUpdate:sort":[s[1]||(s[1]=e=>R(te).sort=e),ye],type:R(te).top5Type,"onUpdate:type":[s[2]||(s[2]=e=>R(te).top5Type=e),ye]},null,8,["sort","type"])]),_:1}),R(H)?(j(),h(f,{key:0,class:"h-200px justify-center"})):(j(),h(z,{key:1,type:"bar",height:"200px",option:R(ne)},null,8,["option"]))],64)):g("",!0),T(u,{class:"my-25px justify-between! items-center"},{default:k(()=>[M("div",Z,S(t.$t("Last 7 Days Statistics")),1),T(J,{showSort:!1,type:R(te).trenType,"onUpdate:type":[s[3]||(s[3]=e=>R(te).trenType=e),ce]},null,8,["type"])]),_:1}),T(z,{type:"line",height:"260px",option:R(ue)},null,8,["option"]),T(m),T(v,{class:"mt-10px"},{default:k(()=>[M("li",null,[w(S(t.$t("This is a simplified website statistics report. For more detailed data, please use"))+" ",1),T(y,{type:"primary",text:"",onClick:s[4]||(s[4]=e=>R(d)(ee.name))},{default:k(()=>s[8]||(s[8]=[w("Website statistics-v2",-1)])),_:1,__:[8]})])]),_:1})]),_:1},8,["show"])]),_:1},8,["install"])}}}),[["__scopeId","data-v-5da8f277"]]);export{ee as default};
