import{_ as e}from"./index.js?v=1767769852656";import{_ as a}from"./index.vue_vue_type_script_setup_true_lang5.js?v=1767769852656";import{c as t,f as s,a as n,d as l,e as i,h as o}from"./public.js?v=1767769852656";import{Y as r,Z as d,$ as p,a0 as u,d as _,n as c,T as m,a1 as g}from"./page_layout.js?v=1767769852656";import{_ as f}from"./index.vue_vue_type_script_setup_true_lang.js?v=1767769852656";import w from"./index100.js?v=1767769852656";import{k as v,P as x,r as h,e as y,R as b,V as S,W as j,U as k,a3 as $,N as C,j as U,a4 as R,c as D,o as T,G as I,a2 as L,S as P}from"./vue.js?v=1767769852656";import{dR as z,au as q,dj as W,aC as B,da as G,bH as H}from"./naive.js?v=1767769852656";const N={class:"p-20px"},O=v({__name:"form",props:{data:{}},setup(e,{expose:a}){const{t:t}=x(),s=e,{getList:n,name:l}=s.data,i=h(null),o=y({name:l,args_name:"",ps:"",args:"",init:t("Soft.index_48")}),d={args_name:{required:!0,message:t("Soft.index_43"),trigger:["blur","input"]},args:{required:!0,message:t("Soft.index_46"),trigger:["blur","input"]}};return a({onConfirm:async({hide:e})=>{var a;await(null==(a=i.value)?void 0:a.validate()),await r(C(o)),null==n||n(),e()}}),(e,a)=>{const t=q,s=z,n=f;return S(),b("div",N,[j(n,{ref_key:"formRef",ref:i,model:k(o),rules:d},{default:$(()=>[j(s,{label:e.$t("Site.TableRow.index_2"),path:"args_name"},{default:$(()=>[j(t,{class:"w-280px!",value:k(o).args_name,"onUpdate:value":a[0]||(a[0]=e=>k(o).args_name=e),placeholder:e.$t("Soft.index_43")},null,8,["value","placeholder"])]),_:1},8,["label"]),j(s,{label:e.$t("Docker.Container.config.image.index_11"),path:"ps"},{default:$(()=>[j(t,{class:"w-280px!",maxlength:"30","show-count":"",value:k(o).ps,"onUpdate:value":a[1]||(a[1]=e=>k(o).ps=e),placeholder:e.$t("Soft.index_44")},null,8,["value","placeholder"])]),_:1},8,["label"]),j(s,{label:e.$t("Soft.index_45"),path:"args"},{default:$(()=>[j(t,{class:"w-280px!",value:k(o).args,"onUpdate:value":a[2]||(a[2]=e=>k(o).args=e),placeholder:e.$t("Soft.index_46")},null,8,["value","placeholder"])]),_:1},8,["label"]),j(s,{label:e.$t("Soft.index_47"),path:"init"},{default:$(()=>[j(w,{value:k(o).init,"onUpdate:value":a[3]||(a[3]=e=>k(o).init=e),height:300,"show-tips":!1,class:"w-350px"},null,8,["value"])]),_:1},8,["label"])]),_:1},8,["model"])])}}}),V={class:"p-20px"},Y=v({__name:"index",props:{data:{}},setup(r,{expose:c}){const{t:m}=x(),g=r,{name:f,callback:w}=g.data,v=()=>{H.show=!0},h=y({args_names:""}),{keys:C,table:D,columns:T}=t([{key:"name",title:m("Site.TableRow.index_2"),ellipsis:{tooltip:{width:"trigger"}}},{key:"name",title:m("Docker.Container.config.image.index_11"),ellipsis:{tooltip:{width:"trigger"}}},{key:"name",title:m("WP.TableRow.index_8"),render:e=>j(W,{value:I(e.name),"onUpdate:value":a=>L(e.name,a)},null)},s({width:100,align:"center",options:e=>[{label:m("Public.Btn.Del"),onClick:()=>{n({title:"".concat(m("Site.TableOP.index_6")," [").concat(e.name,"]"),content:m("Soft.index_50",[e.name]),onConfirm:async({hide:a})=>{await d({name:f,args_name:e.name}),G(),a()}})}}]})]),I=e=>h.args_names.split("\n").includes(e),L=async(e,a)=>{let t;t=a?h.args_names.trim().length>0?h.args_names+"\n"+e:e:P(e),await p({name:f,args_names:t}),G()},P=e=>h.args_names.split("\n").filter(a=>a!==e).join("\n"),{loading:z,setLoading:q}=l(),G=async()=>{try{q(!0);const{message:e}=await u({name:f});_(e)&&(D.data=e.args,h.args_names=e.config)}finally{C.value=[],q(!1)}},H=i(m("Soft.index_49"),{getList:G,name:f});G();return c({onConfirm:async()=>{null==w||w()}}),(t,s)=>{const n=B,l=o,i=a,r=e;return S(),b("div",V,[j(i,null,{toolsLeft:$(()=>[j(n,{type:"primary",onClick:v},{default:$(()=>[U(R(t.$t("Soft.index_49")),1)]),_:1})]),table:$(()=>[j(l,{"max-height":250,loading:k(z),data:k(D).data,columns:k(T)},null,8,["loading","data","columns"])]),_:1}),j(r,{show:k(H).show,"onUpdate:show":s[0]||(s[0]=e=>k(H).show=e),title:k(H).title,data:k(H).data,width:550,footer:!0,component:O},null,8,["show","title","data"])])}}}),Z={class:"pl-20px"},A=v({__name:"index",props:{plugin_name:{type:String,default:""},plugin_title:{type:String,default:""}},emits:["close"],setup(e,{emit:a}){const{t:t}=x(),s=h({}),n=h(!1),l=D(()=>0===s.value.down_pre?t("Connecting to download from the cloud, please wait"):100===s.value.down_pre?t("Download completed, please wait"):t("Downloading")+" "+e.plugin_title);let i=null;return T(()=>{i=setInterval(()=>{(async()=>{const{message:a}=await g({plugin_name:e.plugin_name});try{_(a)&&(s.value=a,100===a.down_pre&&i&&clearInterval(i))}catch(t){i&&clearInterval(i)}})()},1e3)}),I(()=>{i&&clearInterval(i)}),(e,a)=>{const t=G,i=H,o=m;return S(),L(o,{class:"p-20px",show:k(n)},{default:$(()=>[j(t,{class:"flex-col"},{default:$(()=>[j(t,{class:"items-end!",size:3},{default:$(()=>[P("span",null,R(k(l)),1),a[0]||(a[0]=P("i",{class:"i-svg-spinners:3-dots-fade"},null,-1))]),_:1,__:[0]}),j(i,{percentage:k(s).down_pre,type:"line",status:"success",processing:k(s).down_pre<100,"indicator-placement":"inside"},null,8,["percentage","processing"]),j(t,{class:"justify-between! w-full"},{default:$(()=>[P("div",null,[P("span",null,R(k(c)(k(s).down_size))+"/"+R(k(c)(k(s).total_size)),1),P("span",Z,R(e.$t("Still need"))+": "+R(k(s).need_time||"0")+"s",1)]),P("div",null,R(k(c)(k(s).sec_speed))+"/s",1)]),_:1})]),_:1})]),_:1},8,["show"])}}});export{Y as _,A as a};
