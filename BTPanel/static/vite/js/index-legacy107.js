System.register(["./page_layout-legacy.js?v=1752142539265","./index-legacy.js?v=1752142539265","./index-legacy101.js?v=1752142539265","./utils-legacy.js?v=1752142539265","./public-legacy.js?v=1752142539265","./vue-legacy.js?v=1752142539265","./naive-legacy.js?v=1752142539265","./common-legacy.js?v=1752142539265","./__commonjsHelpers__-legacy.js?v=1752142539265","./soft-legacy.js?v=1752142539265"],(function(e,t){"use strict";var a,s,n,o,i,c,l,r,p,u,_,g,f,d,k,m,y,h,b,w,x,v,j,C,B,I;return{setters:[e=>{a=e._,s=e.a,n=e.d,o=e.n},e=>{i=e._},e=>{c=e._},e=>{l=e.J,r=e.K},e=>{p=e.e,u=e.d},e=>{_=e.k,g=e.P,f=e.e,d=e.o,k=e.b,m=e.U,y=e.X,h=e.an,b=e.Q,w=e.V,x=e.a2,v=e.a1,j=e.W,C=e._},e=>{B=e.by,I=e.bX},null,null,null],execute:function(){const z={class:"p-16px"},R={class:"h-250px"};e("default",_({__name:"index",props:{onRefresh:{},type:{default:"backup"}},emits:["close"],setup(e,{emit:_}){const{t:U}=g(),X=C((()=>s((()=>t.import("./backup-success-legacy.js?v=1752142539265")),void 0))),D=C((()=>s((()=>t.import("./backup-error-legacy.js?v=1752142539265")),void 0))),H=_,J=e,K=p("backup"===J.type?U("Config.Backup.index_80"):U("Config.Backup.index_81")),N=p("backup"===J.type?U("Config.Backup.index_82"):U("Config.Backup.index_83")),P=f({}),Q=()=>{const e="backup"===J.type?U("Config.Backup.index_78"):U("Config.Backup.index_79");u({title:U("Config.Backup.index_14"),content:e,onConfirm:async()=>{V&&clearInterval(V),await l({timestamp:void 0}),S()}})},S=()=>{V&&clearInterval(V),H("close"),J.onRefresh()};let V=null;const W=async()=>{const{message:e}=await r({type:J.type});if(n(e)){if(P.task_msg=e.task_msg,P.exec_log=e.exec_log,P.progress=e.progress,100!==e.progress&&2!==e.task_status&&3!==e.task_status||V&&clearInterval(V),2===e.task_status||3===e.task_status)return J.onRefresh(),K.data.type=J.type,K.data.backup_file_info={name:e.backup_file_info.backup_name,files_size:o(Number(e.backup_file_info.backup_file_size)),end_time:e.backup_file_info.done_time,time_count:"backup"===J.type?e.backup_file_info.total_time:e.backup_file_info.restore_total_time,backup_file_sha256:e.backup_file_info.backup_file_sha256},K.show=!0,void(V&&clearInterval(V));3===e.task_status&&(J.onRefresh(),N.data.errData=e.err_info,N.show=!0,V&&clearInterval(V))}};return d((()=>{W(),V=window.setInterval((()=>{W()}),2e3)})),k((()=>{V&&clearInterval(V)})),(e,t)=>{const s=B,n=a,o=I,l=c,r=i;return y(),m("div",z,[h("",!0),b(o,{class:"flex-nowrap! items-center my-10px",size:5},{default:x((()=>[b(s,{height:24,percentage:j(P).progress,"indicator-placement":"inside",processing:j(P).progress<100,status:"success"},null,8,["percentage","processing"]),j(P).progress<100?(y(),v(n,{key:0,name:"base-error",class:"text-error",size:20,onClick:Q})):h("",!0)])),_:1}),w("div",R,[b(l,{log:j(P).exec_log},null,8,["log"])]),b(r,{show:j(K).show,"onUpdate:show":t[0]||(t[0]=e=>j(K).show=e),title:j(K).title,data:j(K).data,width:"600","min-height":350,component:j(X),onClose:S},null,8,["show","title","data","component"]),b(r,{show:j(N).show,"onUpdate:show":t[1]||(t[1]=e=>j(N).show=e),title:j(N).title,data:j(N).data,width:"600","min-height":350,component:j(D),onClose:S},null,8,["show","title","data","component"])])}}}))}}}));
