System.register(["./public-legacy.js?v=1767769852656","./index.vue_vue_type_script_setup_true_lang-legacy.js?v=1767769852656","./index-legacy99.js?v=1767769852656","./vue-legacy.js?v=1767769852656","./page_layout-legacy.js?v=1767769852656","./naive-legacy.js?v=1767769852656","./index.vue_vue_type_script_setup_true_lang-legacy2.js?v=1767769852656","./index-legacy109.js?v=1767769852656","./ssl-lets-progress-legacy.js?v=1767769852656"],function(e,a){"use strict";var t,l,n,s,i,o,r,u,d,p,c,f,m,_,v,x,g,w,h,b,y,C,k,S,$,P,U,I,L,j,A,E,R,q,T,B,M,z,D,O,H,N,V,K,F,W,Z,G,J,Q,X,Y,ee,ae,te,le,ne,se,ie,oe,re,ue,de,pe,ce,fe,me,_e,ve,xe,ge,we,he,be,ye,Ce,ke,Se,$e,Pe,Ue,Ie,Le,je,Ae,Ee,Re,qe,Te,Be,Me,ze;return{setters:[e=>{t=e.d,l=e._,n=e.a,s=e.c,i=e.h,o=e.u},e=>{r=e._},e=>{u=e._},e=>{d=e.Z,p=e.r,c=e.a0,f=e.k,m=e.P,_=e.e,v=e.a2,x=e.V,g=e.a3,w=e.W,h=e.U,b=e.l,y=e.S,C=e.j,k=e.a4,S=e.v,$=e.F,P=e.ae,U=e.R,I=e.q,L=e.I,j=e.ap,A=e.av,E=e.au,R=e.ak,q=e.a5,T=e.c,B=e.an,M=e.H,z=e.N},e=>{D=e.az,O=e.d,H=e.bb,N=e.bc,V=e.bd,K=e.be,F=e.x,W=e.T,Z=e.a5,G=e.m,J=e.bf,Q=e.ap,X=e.p,Y=e._,ee=e.aD,ae=e.b6,te=e.bg,le=e.N,ne=e.O,se=e.P,ie=e.bh,oe=e.k,re=e.bi,ue=e.bj,de=e.bk,pe=e.bl,ce=e.S,fe=e.bm,me=e.bn,_e=e.b5,ve=e.bo,xe=e.aB,ge=e.bp,we=e.an,he=e.bq,be=e.i},e=>{ye=e.dR,Ce=e.dj,ke=e.au,Se=e.aC,$e=e.dT,Pe=e.e1,Ue=e._,Ie=e.dh,Le=e.df,je=e.dV,Ae=e.dk,Ee=e.dU,Re=e.da},e=>{qe=e._},e=>{Te=e._},e=>{Be=e.s,Me=e.a,ze=e.g}],execute:function(){var a=document.createElement("style");a.textContent=".confirm-tips[data-v-32627769]{padding:16px 20px;background-color:var(--setting-security-panel-port-tips);border:1px solid #ececec;border-radius:6px;color:#777;list-style:disc}.confirm-tips[data-v-32627769] li{margin-left:1.5em;line-height:16px;list-style:disc}.confirm-tips[data-v-32627769] li+li{margin-top:8px}.form-label[data-v-d5782944]{display:flex;align-items:center;justify-content:flex-end;min-width:100px;height:32px;padding-right:20px;text-align:right}\n/*$vite$:1*/",document.head.appendChild(a),e("b",da);const De=e("i",d("settings-all",()=>{const e=p({listenIpv6:!1,offlineMode:!1,debugMode:!1,apiInterface:!1,api_token:"",cdn_status:!1,lang:null,langList:[],webname:"",session_timeout:"",session_timeout_source:0,sites_path:"",backup_path:"",serverIp:"",systemDate:"",username:"",account:"",isBindAccount:!1,icon_status:!1,backup_info:{auto_backup:0,backup_number:0,total_size:0}}),a=p({panelSSL:!1,basicAuth:!1,dynamicPwd:!1,pwdComplexity:!1,domain:"",limitIp:"",port:"7800",adminPath:"/",statusCode:404,pwdSetDay:0,pwdExpireDay:0,pwdExpireTime:0,uaAstrict:!1}),t=a=>{e.value.listenIpv6="checked"===a.ipv6,e.value.offlineMode="checked"===a.is_local,e.value.debugMode="checked"===a.debug,e.value.apiInterface="checked"===a.api,e.value.cdn_status=a.cdn_status,e.value.api_token=a.api_token,e.value.lang=a.language,e.value.langList=a.language_list.map(e=>({label:e.title,value:e.name})),e.value.webname=a.webname||"",e.value.session_timeout=a.session_timeout||"",e.value.session_timeout_source=a.session_timeout_source||86400,e.value.sites_path=a.sites_path||"",e.value.backup_path=a.backup_path||"",e.value.systemDate=a.systemdate||"",e.value.username=a.username||"",e.value.icon_status=a.icon_status;const{panel:t,user_info:l}=a;O(t)&&(e.value.serverIp=t.address||"",e.value.backup_info=t.backup_info),O(l)&&(e.value.account=l.data.username,e.value.isBindAccount=!0===l.status)},l=e=>{const{panel:t,SSL:l}=e;a.value.panelSSL=l||location.protocol.indexOf("https:")>-1,a.value.basicAuth=e.basic_auth?.open||!1,a.value.statusCode=e.status_code||404,O(t)&&(a.value.domain=t.domain||"",a.value.limitIp=t.limitip||"",a.value.port=t.listen_port||"7800",a.value.adminPath=t.admin_path||"/")},n=p([]);return{panelConfig:e,safeConfig:a,menuList:n,getConfig:async()=>{const{message:e}=await D();O(e)&&(t(e),l(e))},getMenus:async()=>{const{message:e}=await K();n.value=F(e)?e:[]},getDynamicPwd:async()=>{const{message:e}=await H();O(e)&&(a.value.dynamicPwd=e.result)},getPasswordStatus:async()=>{const{message:e}=await N();O(e)&&(a.value.pwdSetDay=e.expire,a.value.pwdExpireDay=e.expire_day,a.value.pwdExpireTime=e.expire_time,a.value.pwdComplexity=e.password_safe)},getLimitUaInfo:async()=>{const{message:e}=await V();O(e)&&(a.value.uaAstrict="0"!==e.status)}}})),Oe=e("u",()=>{const e=De(),{panelConfig:a}=c(e);return{panelConfig:a,getConfig:e.getConfig}}),He={class:"w-320px"},Ne=["innerHTML"],Ve={class:"inline-block text-center leading-[1.4]"},Ke={class:"w-320px"},Fe=f({__name:"set",setup(e){const{t:a}=m(),{panelConfig:s}=Oe(),i=_({token:"",limit_addr:"",ip_type:"custom"}),o=async e=>{await Z({t_type:2}),s.value.apiInterface=e},d=()=>{n({title:a("Config.Panel.index_33"),content:()=>w($,null,[w("div",{class:"mb-8px"},[a("Config.Panel.index_86")]),w("div",{class:"text-error"},[a("Config.Panel.index_87")])]),onConfirm:async()=>{const{message:e}=await Z({t_type:1},!1);G.success({content:a("Config.Panel.index_34"),close:!0}),O(e)&&(i.token=e.result)}})},p=()=>{switch(i.ip_type){case"all":return"0.0.0.0/0\n::/0";case"ipv4":return"0.0.0.0/0";case"ipv6":return"::/0";case"custom":return i.limit_addr}},c=()=>{switch(i.ip_type){case"all":return a("Allow all IPs");case"ipv4":return a("Only allow IPv4 type");case"ipv6":return a("Only allow IPv6 type");case"custom":return a("Only allow custom IP")}},f=async()=>{await Z({t_type:3,limit_addr:p(),ip_type:i.ip_type}),I()},{loading:P,setLoading:U}=t(),I=async()=>{try{U(!0);const{message:e}=await J();O(e)&&(i.token=e.token,i.limit_addr=e.limit_addr,i.ip_type=e.ip_type)}finally{U(!1)}};return I(),(e,a)=>{const t=Ce,n=ye,p=Se,m=ke,_=Pe,$=$e,U=u,I=r,L=l,j=W;return x(),v(j,{show:h(P),class:"w-540px p-20px"},{default:g(()=>[w(I,{model:h(i)},{default:g(()=>[w(n,{label:e.$t("Config.Panel.index_19")},{default:g(()=>[w(t,{value:h(s).apiInterface,"onUpdate:value":o},null,8,["value"])]),_:1},8,["label"]),w(n,{label:e.$t("Config.Panel.index_26")},{default:g(()=>[y("div",He,[w(m,{value:h(i).token,"onUpdate:value":a[0]||(a[0]=e=>h(i).token=e),readonly:!0},{suffix:g(()=>[w(p,{class:"h-22px px-5px",type:"primary",size:"small",onClick:d},{default:g(()=>[C(k(e.$t("Public.Btn.Reset")),1)]),_:1})]),_:1},8,["value"])])]),_:1},8,["label"]),w(n,{label:e.$t("IP Type"),"show-feedback":!1},{default:g(()=>[w($,{value:h(i).ip_type,"onUpdate:value":a[1]||(a[1]=e=>h(i).ip_type=e)},{default:g(()=>[w(_,{value:"all"},{default:g(()=>[C(k(e.$t("Public.All")),1)]),_:1}),w(_,{value:"ipv4"},{default:g(()=>a[3]||(a[3]=[C(" IPV4 ",-1)])),_:1,__:[3]}),w(_,{value:"ipv6"},{default:g(()=>a[4]||(a[4]=[C(" IPV6 ",-1)])),_:1,__:[4]}),w(_,{value:"custom"},{default:g(()=>[C(k(e.$t("Public.Search.Custom")),1)]),_:1})]),_:1},8,["value"])]),_:1},8,["label"]),w(n,{label:" "},{default:g(()=>[y("div",{innerHTML:c()},null,8,Ne)]),_:1}),b(w(n,{class:"form-item"},{label:g(()=>[y("div",Ve,[C(k(e.$t("Config.Panel.index_27")),1),a[5]||(a[5]=y("br",null,null,-1)),C(" "+k(e.$t("Config.Panel.index_28")),1)])]),default:g(()=>[y("div",Ke,[w(U,{value:h(i).limit_addr,"onUpdate:value":a[2]||(a[2]=e=>h(i).limit_addr=e),rows:4},null,8,["value"])])]),_:1},512),[[S,"custom"===h(i).ip_type]]),w(n,{label:" ","show-feedback":!1},{default:g(()=>[w(p,{type:"primary",onClick:f},{default:g(()=>[C(k(e.$t("Public.Btn.Save")),1)]),_:1})]),_:1})]),_:1},8,["model"]),w(L,{class:"mt-20px"},{default:g(()=>[y("li",null,k(e.$t("Config.Panel.index_29")),1),y("li",null,k(e.$t("Config.Panel.index_30")),1),y("li",null,k(e.$t("Config.Panel.index_31")),1),y("li",null,[C(k(e.$t("Config.Panel.index_32"))+" ",1),a[6]||(a[6]=y("a",{class:"bt-link",href:"https://www.aapanel.com/forum/d/482-api-interface-tutorial",target:"_blank"}," https://www.aapanel.com/forum/d/482-api-interface-tutorial ",-1))])]),_:1})]),_:1},8,["show"])}}}),We=e("m",f({__name:"risk",props:{checked:{type:[String,Number,Boolean]},checkedModifiers:{}},emits:["update:checked"],setup(e,{expose:a}){const t=P(e,"checked"),l=Q(),n=p(0),s=p(0),i=p(!1),o=p(),r=()=>{const e=o.value.$el.getClientRects(),{x:a,y:t}=e[0];n.value=a-5,s.value=t-3,i.value=!0,u()},u=j(()=>{i.value=!1},2500);return a({validate:()=>new Promise((e,a)=>{t.value?e(!0):(r(),a(!1))}),showTips:r}),(e,a)=>{const r=Ue,u=Ie;return x(),U($,null,[w(r,{ref_key:"checkboxRef",ref:o,checked:t.value,"onUpdate:checked":a[0]||(a[0]=e=>t.value=e)},{default:g(()=>[I(e.$slots,"default")]),_:3},8,["checked"]),w(u,{show:h(i),x:h(n),y:h(s),trigger:"manual",placement:"top-start",style:L({backgroundColor:h(l).errorColor,color:"#fff"}),"arrow-style":{backgroundColor:h(l).errorColor}},{default:g(()=>[y("span",null,k(e.$t("Config.Safe.index_169")),1)]),_:1},8,["show","x","y","style","arrow-style"])],64)}}})),Ze={class:"confirm-tips"},Ge=e("C",X({},[["render",function(e,a){return x(),U("ul",Ze,[I(e.$slots,"default",{},void 0,!0)])}],["__scopeId","data-v-32627769"]])),Je={class:"flex items-center"},Qe={class:"min-w-32px"},Xe={class:"ml-12px text-21px"},Ye=e("_",f({__name:"title",setup(e){const a=Q();return(e,t)=>{const l=Y;return x(),U("div",Je,[y("div",Qe,[w(l,{name:"base-warning",size:"32",color:h(a).warningColor},null,8,["color"])]),y("div",Xe,[I(e.$slots,"default")])])}}})),ea={class:"w-440px p-20px"},aa={class:"text-error"},ta=f({__name:"confirm",setup(e,{expose:a}){const{panelConfig:t}=Oe(),l=A("riskRef");return a({onConfirm:async()=>{await(l.value?.validate()),await ee(),t.value.debugMode=!0}}),(e,a)=>(x(),U("div",ea,[w(Ye,{class:"mb-20px"},{default:g(()=>[C(k(e.$t("Config.Panel.index_14")),1)]),_:1}),w(Ge,{class:"mb-20px"},{default:g(()=>[y("li",aa,k(e.$t("Config.Panel.index_15")),1),y("li",null,k(e.$t("Config.Panel.index_16")),1),y("li",null,k(e.$t("Config.Panel.index_17")),1)]),_:1}),w(We,{ref_key:"riskRef",ref:l},{default:g(()=>[C(k(e.$t("Config.Panel.index_18")),1)]),_:1},512)]))}}),la={class:"w-360px p-20px"},na=f({__name:"set",props:{menuList:{type:Array,default:()=>[]}},setup(e){const{t:a}=m(),t=ae(),l=["memuA","memuAsoft","memuAconfig","dologin"],{columns:n}=s([{key:"title",title:a("Config.Panel.index_80")},{key:"show",title:a("Config.Panel.index_81"),align:"right",width:100,render:e=>l.includes(e.id)?a("Config.Panel.index_82"):w(Ce,{value:e.show,size:"small",onUpdateValue:a=>{o(a,e)}},null)}]),o=async(a,l)=>{const n=e.menuList.filter(e=>!e.show).map(e=>e);a?n.splice(n.map(e=>e.id).indexOf(l.id),1):n.push(l),await te({hide_list:n.map(e=>e.id)}),t.setHideMenu(n.map(e=>e.title)),l.show=a};return(a,t)=>{const l=i;return x(),U("div",la,[w(l,{data:e.menuList,columns:h(n)},null,8,["data","columns"])])}}}),sa={class:"w-420px px-20px pt-28px pb-8px"},ia={class:"w-210px"},oa={class:"w-210px"},ra={class:"w-210px"},ua=f({__name:"set",setup(e,{expose:a}){const{t:t}=m(),l=p(null),n=_({password1:"",password2:"",userpassword:""}),s={password1:{trigger:["blur","input"],validator:()=>""===n.password1.trim()?new Error(t("Config.Panel.index_67")):!(n.password1.trim().length<6)||new Error(t("Config.Panel.index_68"))},password2:{trigger:["blur","input"],validator:()=>""===n.password2.trim()?new Error(t("Config.Panel.index_69")):n.password2===n.password1||new Error(t("Config.Panel.index_70"))},userpassword:{trigger:["blur","input"],required:!0,message:t("Config.Panel.index_67")}};return a({onConfirm:async()=>{await(l.value?.validate()),await le({password1:ne(n.password1),password2:ne(n.password2),userpassword:ne(n.userpassword)}),se("/login?dologin=True",1500)}}),(e,a)=>{const t=ke,i=ye,o=qe,u=r;return x(),U("div",sa,[w(u,{ref_key:"formRef",ref:l,model:h(n),rules:s,"require-mark-placement":"left"},{default:g(()=>[w(i,{label:e.$t("Old Password"),path:"userpassword","show-require-mark":!0},{default:g(()=>[y("div",ia,[w(t,{value:h(n).userpassword,"onUpdate:value":a[0]||(a[0]=e=>h(n).userpassword=e),placeholder:""},null,8,["value"])])]),_:1},8,["label"]),w(i,{label:e.$t("New Password"),path:"password1","show-require-mark":!0},{default:g(()=>[y("div",oa,[w(o,{value:h(n).password1,"onUpdate:value":a[1]||(a[1]=e=>h(n).password1=e),length:10,placeholder:""},null,8,["value"])])]),_:1},8,["label"]),w(i,{label:e.$t("Config.Panel.index_59"),path:"password2","show-require-mark":!0},{default:g(()=>[y("div",ra,[w(t,{value:h(n).password2,"onUpdate:value":a[2]||(a[2]=e=>h(n).password2=e),placeholder:""},null,8,["value"])])]),_:1},8,["label"])]),_:1},8,["model"])])}}});function da(){const e=De(),{safeConfig:a}=c(e);return{safeConfig:a,getPasswordStatus:e.getPasswordStatus}}const pa=e("c",()=>{const e=De(),{panelConfig:a,safeConfig:t}=c(e);return{saveConfig:async(e={})=>{await ie({webname:a.value.webname||"",session_timeout:a.value.session_timeout_source||86400,domain:t.value.domain,limitip:t.value.limitIp,sites_path:a.value.sites_path,backup_path:a.value.backup_path,address:a.value.serverIp,systemdate:a.value.systemDate,port:t.value.port,backup_number:a.value.backup_info.backup_number,auto_backup:a.value.backup_info.auto_backup,...e})},getConfig:e.getConfig}}),ca={class:"w-400px p-20px"},fa={class:"text-error"},ma={class:"text-error"},_a={class:"w-210px"},va=f({__name:"set",setup(e,{expose:a}){const{t:t}=m(),l=p(),n=p(null),{safeConfig:s}=da(),{saveConfig:i}=pa(),o=_({port:oe(s.value.port)}),u={port:{trigger:["blur","input"],validator:()=>!!re(o.port)||new Error(t("Config.Safe.index_104"))}};return a({onConfirm:async()=>{await l.value.validate(),await(n.value?.validate()),await i({port:`${o.port}`}),se(`${location.protocol}//${location.hostname}:${o.port}${location.pathname}`)}}),(e,a)=>{const t=Le,s=ye,i=r;return x(),U("div",ca,[w(Ge,{class:"mb-20px"},{default:g(()=>[y("li",fa,k(e.$t("Config.Safe.index_100")),1),y("li",ma,k(e.$t("Config.Safe.index_101")),1)]),_:1}),w(i,{ref_key:"formRef",ref:n,model:h(o),rules:u},{default:g(()=>[w(s,{label:e.$t("Config.Safe.index_96"),path:"port","label-width":"auto","label-style":{paddingLeft:"24px"}},{default:g(()=>[y("div",_a,[w(t,{value:h(o).port,"onUpdate:value":a[0]||(a[0]=e=>h(o).port=e),min:1,max:65535,"show-button":!1,placeholder:""},null,8,["value"])])]),_:1},8,["label"])]),_:1},8,["model"]),w(We,{ref_key:"riskRef",ref:l},{default:g(()=>[C(k(e.$t("Config.Safe.index_102"))+" ",1),y("a",{class:"bt-link",href:"https://www.aapanel.com/forum/d/599-how-to-release-the-aapanel-port",target:"_blank",onClick:E(()=>!1,["stop"])},k(e.$t("Config.Safe.index_103")),1)]),_:1},512)])}}}),xa={class:"w-440px px-20px pt-28px pb-8px"},ga={class:"w-240px"},wa=f({__name:"set",setup(e,{expose:a}){const{t:t}=m(),{safeConfig:l}=da(),n=p(null),s=_({adminPath:l.value.adminPath}),i={adminPath:{trigger:["blur","input"],validator:()=>""!==s.adminPath.trim()||new Error(t("Config.Safe.index_108"))}};return a({onConfirm:async()=>{await(n.value?.validate()),await ue({admin_path:ne(s.adminPath)}),l.value.adminPath=s.adminPath}}),(e,a)=>{const t=ke,l=ye,o=r;return x(),U("div",xa,[w(o,{ref_key:"formRef",ref:n,model:h(s),rules:i},{default:g(()=>[w(l,{label:e.$t("Config.Safe.index_105"),path:"adminPath"},{default:g(()=>[y("div",ga,[w(t,{value:h(s).adminPath,"onUpdate:value":a[0]||(a[0]=e=>h(s).adminPath=e),placeholder:""},null,8,["value"])])]),_:1},8,["label"])]),_:1},8,["model"])])}}}),ha={class:"w-400px flex p-20px"},ba={class:"min-w-32px"},ya={class:"flex-1 ml-10px text-14px leading-22px"},Ca={class:"flex items-center min-h-30px mb-12px text-error"},ka=f({__name:"close",emits:["setConfirm"],setup(e,{expose:a,emit:t}){const l=t,{t:n}=m(),{safeConfig:s}=da(),i=Q(),o=p(!1),r=()=>{u>0||l("setConfirm",{disabled:!o.value})};let u=5;return(()=>{l("setConfirm",{text:n("Config.Safe.index_16",[u]),disabled:!0});const e=setInterval(()=>{u--,l("setConfirm",{text:n("Config.Safe.index_16",[u])}),u<=0&&(clearInterval(e),l("setConfirm",{text:n("Config.Safe.index_17"),disabled:!o.value}))},1e3)})(),a({onConfirm:async()=>(await de(),await pe(),setTimeout(()=>{{const e="http:"===location.protocol?"https":"http";window.location.href=`${e}://${window.location.host}${s.value.adminPath}`}},1500),!1)}),(e,a)=>{const t=Y,l=Ue;return x(),U("div",ha,[y("div",ba,[w(t,{name:"base-warning",color:h(i).warningColor,size:"32"},null,8,["color"])]),y("div",ya,[y("div",Ca,k(e.$t("Config.Safe.index_14")),1),w(l,{checked:h(o),"onUpdate:checked":[a[0]||(a[0]=e=>R(o)?o.value=e:null),r]},{default:g(()=>[C(k(e.$t("Config.Safe.index_15")),1)]),_:1},8,["checked"])])])}}}),Sa={class:"w-640px px-40px py-24px"},$a={class:"flex-center mb-20px"},Pa={class:"min-w-32px"},Ua={class:"ml-4px text-21px"},Ia={class:"text-error"},La={class:"bt-link",href:"https://www.aapanel.com/forum/d/167-common-problems-after-opening-the-panel-certificate",target:"_blank"},ja={class:"flex"},Aa={class:"form-label"},Ea={class:"w-280px"},Ra={class:"flex mt-16px"},qa={class:"form-label"},Ta={class:"w-280px"},Ba={class:"flex mt-16px"},Ma={class:"form-label"},za={class:"w-280px"},Da={class:"flex mt-16px"},Oa={class:"form-label"},Ha={class:"w-280px"},Na={class:"flex justify-between mt-24px"},Va={class:"bt-link",href:"https://www.aapanel.com/forum/d/167-common-problems-after-opening-the-panel-certificate",target:"_blank"},Ka=f({__name:"open",setup(e,{expose:a}){const{t:t}=m(),{safeConfig:l}=da(),n=A("riskRef"),s=p(1),i=p(""),o=p(""),r=p(""),d=[{label:t("Config.Safe.index_30"),value:1},{label:"Let's Encrypt",value:2},{label:t("Config.Safe.index_31"),value:3}],c=async()=>{const{message:e}=await ve();O(e)&&(s.value=e.cert_type?Number(e.cert_type):1,i.value=e.email||"")},f=async()=>{const{message:e}=await xe();O(e)&&(o.value=e.privateKey||"",r.value=e.certPem||"")};return(async()=>{const e=G.loading(t("Config.Safe.index_32"));try{await Promise.all([c(),f()])}finally{e.close()}})(),a({onConfirm:async()=>{if(await(n.value?.validate()),2===s.value&&""===i.value.trim())return G.error(t("Config.Safe.index_33")),!1;if(2===s.value&&!ce(i.value))return G.error(t("Config.Safe.index_34")),!1;if(3===s.value&&(""===o.value.trim()||""===r.value.trim()))return G.error(t("Config.Safe.index_35")),!1;const e=G.loading(t("Config.Safe.index_36"));try{3===s.value&&await fe({privateKey:o.value,certPem:r.value}),await me((()=>{const e=2===s.value?{email:i.value}:{};return{cert_type:s.value,...e}})(),!1),await pe(),setTimeout(()=>{if(_e){const e="http:"===location.protocol?"https":"http";window.location.href=`${e}://${window.location.host}${l.value.adminPath}`}},1500)}finally{e.close()}return!1}}),(e,a)=>{const t=Y,l=q("i18n-t"),p=je,c=ke,f=u;return x(),U("div",Sa,[y("div",$a,[y("div",Pa,[w(t,{name:"scan-success",size:"32"})]),y("span",Ua,k(e.$t("Config.Safe.index_18")),1)]),w(Ge,{class:"mb-20px"},{default:g(()=>[y("li",Ia,k(e.$t("Config.Safe.index_19")),1),y("li",null,k(e.$t("Config.Safe.index_20")),1),w(l,{tag:"li",scope:"global",keypath:"Config.Safe.index_21"},{link_:g(()=>[y("a",La,k(e.$t("Config.Safe.index_22")),1)]),_:1})]),_:1}),y("div",ja,[y("span",Aa,k(e.$t("Config.Safe.index_24")),1),y("div",Ea,[w(p,{value:h(s),"onUpdate:value":a[0]||(a[0]=e=>R(s)?s.value=e:null),options:d},null,8,["value"])])]),b(y("div",Ra,[y("span",qa,k(e.$t("Config.Safe.index_25")),1),y("div",Ta,[w(c,{value:h(i),"onUpdate:value":a[1]||(a[1]=e=>R(i)?i.value=e:null),placeholder:e.$t("Config.Safe.index_26")},null,8,["value","placeholder"])])],512),[[S,2===h(s)]]),b(y("div",Ba,[y("span",Ma,k(e.$t("Config.Safe.index_27")),1),y("div",za,[w(f,{value:h(o),"onUpdate:value":a[2]||(a[2]=e=>R(o)?o.value=e:null),rows:4,placeholder:""},null,8,["value"])])],512),[[S,3===h(s)]]),b(y("div",Da,[y("span",Oa,k(e.$t("Config.Safe.index_28")),1),y("div",Ha,[w(f,{value:h(r),"onUpdate:value":a[3]||(a[3]=e=>R(r)?r.value=e:null),rows:4,placeholder:""},null,8,["value"])])],512),[[S,3===h(s)]]),y("div",Na,[w(We,{ref_key:"riskRef",ref:n},{default:g(()=>[C(k(e.$t("Config.Safe.index_29")),1)]),_:1},512),y("a",Va,k(e.$t("Config.Safe.index_167")),1)])])}}}),Fa=X(Ka,[["__scopeId","data-v-d5782944"]]),Wa={class:"flex gap-20px mt-16px"},Za={class:"flex-1"},Ga={class:"mb-8px"},Ja={class:"flex-1"},Qa={class:"mb-8px"},Xa={class:"mt-10px"},Ya={class:"bt-link",href:"http://www.bt.cn/bbs/thread-704-1-1.html",target:"_blank"},et=f({__name:"custom",setup(e){const{loading:a,setLoading:n}=t(),s=p(""),i=p(""),o=_({dns:[""],issuer:"--",notBefore:"--",notAfter:"--",endtime:0}),r=T(()=>o.endtime<=0),d=async()=>{try{n(!0);const{message:e}=await xe();O(e)&&(s.value=e.privateKey||"",i.value=e.certPem||"",o.dns=e.info.dns||[],o.issuer=e.info.issuer||"",o.notBefore=e.info.notBefore||"",o.notAfter=e.info.notAfter||"",o.endtime=e.info.endtime||0)}finally{n(!1)}};d();const c=async()=>{await fe({privateKey:s.value,certPem:i.value},!0),d()};return(e,t)=>{const n=Ae,d=u,p=Se,f=l,m=W;return x(),v(m,{show:h(a)},{default:g(()=>[h(i)?(x(),v(n,{key:0,type:h(r)?"error":"success","show-icon":!1},{default:g(()=>[y("div",{class:M(["flex flex-wrap gap-x-24px py-2px text-12px",h(r)?"text-error":"text-primary"])},[y("div",null,[C(k(e.$t("Config.Safe.index_37")),1),y("b",null,k(h(o).dns.join(",")||"--"),1)]),y("div",null,[C(k(e.$t("Config.Safe.index_38")),1),y("b",null,k(h(o).issuer),1)]),y("div",null,[C(k(e.$t("Config.Safe.index_39")),1),y("b",null,k(h(r)?"已过期":h(o).notAfter),1)])],2)]),_:1},8,["type"])):B("",!0),y("div",Wa,[y("div",Za,[y("div",Ga,k(e.$t("Config.Safe.index_27")),1),w(d,{value:h(s),"onUpdate:value":t[0]||(t[0]=e=>R(s)?s.value=e:null),rows:14,placeholder:""},null,8,["value"])]),y("div",Ja,[y("div",Qa,k(e.$t("Config.Safe.index_28")),1),w(d,{value:h(i),"onUpdate:value":t[1]||(t[1]=e=>R(i)?i.value=e:null),rows:14,placeholder:""},null,8,["value"])])]),y("div",Xa,[w(p,{type:"primary",onClick:c},{default:g(()=>[C(k(e.$t("Public.Btn.Save")),1)]),_:1})]),w(f,{class:"mt-12px"},{default:g(()=>[y("li",null,[C(k(e.$t("Config.Safe.index_40"))+" ",1),y("a",Ya," ["+k(e.$t("Public.Btn.Help"))+"] ",1)]),y("li",null,k(e.$t("Config.Safe.index_42")),1),y("li",null,k(e.$t("Config.Safe.index_43")),1)]),_:1})]),_:1},8,["show"])}}}),at={class:"h-400px"},tt={class:"flex items-center"},lt={class:"min-w-18px mr-8px"},nt={class:"leading-18px"},st={class:"w-400px mr-10px"},it={class:"text-primary font-bold"},ot={class:"text-warning font-bold"},rt={class:"text-error"},ut=f({__name:"lets",setup(e){const{t:a}=m(),t=p(null),n=_({domain:"",hash:"",auth_type:"http",support:[]}),s={domain:{required:!0,trigger:"blur",message:a("Config.Safe.Ssl.index_10")}},i=p(!1),u=p(!1),d=p(!1),c=()=>{P()},f=()=>{d.value=!1,u.value=!1,n.hash="",n.support=[]},b=()=>{window.open("/ssl_domain/domain")},S=async()=>{await(t.value?.validate());const{message:e}=await Be({domain:z(n)});O(e)&&(e.task_id?$(e.task_id):G.success(e.result))},$=e=>{o({hideClose:!0,data:{task_id:e},component:Me})},P=async()=>{if(n.domain)try{i.value=!0;const{message:e}=await we({domain:n.domain});O(e)&&(u.value=!0,d.value=!!e.hash,n.hash=e.hash,n.support=e.support)}finally{i.value=!1}};return(async()=>{const{message:e}=await ze();O(e)&&(n.domain=e.domain)})(),(e,a)=>{const o=Y,p=Ae,m=Ee,_=ge,$=$e,I=ye,L=ke,j=Se,A=Re,E=r,R=l;return x(),U("div",at,[w(p,{"show-icon":!1,class:"mb-20px"},{default:g(()=>[y("div",tt,[y("div",lt,[w(o,{name:"base-info",size:17})]),y("span",nt,k(e.$t("Config.Safe.Ssl.index_1")),1)])]),_:1}),w(E,{ref_key:"formRef",ref:t,model:h(n),rules:s,"label-width":"140"},{default:g(()=>[w(I,{label:e.$t("Config.Safe.Ssl.index_2")},{default:g(()=>[w($,{value:h(n).auth_type,"onUpdate:value":a[0]||(a[0]=e=>h(n).auth_type=e)},{default:g(()=>[w(_,null,{default:g(()=>[w(m,{value:"http"},{default:g(()=>[C(k(e.$t("SSL.SiteSSL.index_17")),1)]),_:1}),w(m,{value:"dns"},{default:g(()=>[C(k(e.$t("SSL.index_12")),1)]),_:1})]),_:1})]),_:1},8,["value"])]),_:1},8,["label"]),"dns"===h(n).auth_type?(x(),v(I,{key:0,label:e.$t("Config.Safe.Ssl.index_4"),prop:"domain"},{default:g(()=>[y("div",st,[w(L,{value:h(n).domain,"onUpdate:value":a[1]||(a[1]=e=>h(n).domain=e),loading:h(i),"input-props":{spellcheck:!1},placeholder:e.$t("Config.Safe.Ssl.index_5"),clearable:"",onBlur:c,onInput:f},null,8,["value","loading","placeholder"])]),w(j,{onClick:P},{default:g(()=>[C(k(e.$t("Config.Safe.Ssl.index_12")),1)]),_:1})]),_:1},8,["label"])):B("",!0),"http"===h(n).auth_type?(x(),v(I,{key:1,label:e.$t("Config.Safe.Ssl.index_4")},{default:g(()=>[w(L,{class:"w-400px!",value:h(n).domain,"onUpdate:value":a[2]||(a[2]=e=>h(n).domain=e),placeholder:e.$t("Config.Safe.Ssl.index_5")},null,8,["value","placeholder"])]),_:1},8,["label"])):B("",!0),h(u)&&"dns"===h(n).auth_type?(x(),v(I,{key:2,label:" "},{default:g(()=>[h(d)?(x(),v(p,{key:0,type:"success",class:"min-w-500px"},{default:g(()=>[y("span",it,k(e.$t("Config.Safe.Ssl.index_6",[h(n).domain])),1)]),_:1})):(x(),v(p,{key:1,type:"warning",class:"min-w-500px"},{default:g(()=>[w(A,{class:"items-center"},{default:g(()=>[y("span",ot,k(e.$t("Config.Safe.Ssl.index_7",[h(n).domain])),1),w(j,{type:"primary",ghost:"",size:"small",onClick:b},{default:g(()=>[C(k(e.$t("Config.Safe.Ssl.index_8")),1)]),_:1})]),_:1})]),_:1}))]),_:1})):B("",!0),w(I,{label:" "},{default:g(()=>[w(j,{type:"primary",disabled:!h(d)&&"dns"===h(n).auth_type,onClick:S},{default:g(()=>[C(k(e.$t("Config.Safe.Ssl.index_9")),1)]),_:1},8,["disabled"])]),_:1})]),_:1},8,["model"]),"http"===h(n).auth_type?(x(),v(R,{key:0},{default:g(()=>[y("li",rt,k(e.$t("SSL.SiteSSL.index_15")),1),y("li",null,k(e.$t("Site.Cert.index_21")),1),y("li",null,k(e.$t("Site.Cert.index_23")),1),y("li",null,k(e.$t("Site.Cert.index_24")),1)]),_:1})):B("",!0)])}}}),dt={class:"w-740px p-16px"},pt=f({__name:"index",setup(e){const a=p("custom"),t=[{key:"custom",label:"Custom SSL",component:et},{key:"lets",label:"Lets Encrypt",component:ut}];return(e,l)=>{const n=Te;return x(),U("div",dt,[w(n,{value:h(a),"onUpdate:value":l[0]||(l[0]=e=>R(a)?a.value=e:null),options:t},null,8,["value"])])}}}),ct={class:"w-420px px-20px pt-28px pb-8px"},ft={class:"w-210px"},mt={class:"w-210px"},_t={class:"w-210px"},vt=f({__name:"set",setup(e,{expose:a}){const{t:t}=m(),{panelConfig:l}=Oe(),n=A("formRef"),s=_({username1:l.value.username,username2:"",userpassword:""}),i={username1:{trigger:["blur","input"],validator:()=>""!==s.username1.trim()||new Error(t("Config.Panel.index_60"))},username2:{trigger:["blur","input"],validator:()=>""===s.username2.trim()?new Error(t("Config.Panel.index_61")):s.username2===s.username1||new Error(t("Config.Panel.index_62"))},userpassword:{trigger:["blur","input"],required:!0,message:t("Config.Panel.index_67")}};return a({onConfirm:async()=>{await(n.value?.validate()),await he({username1:ne(s.username1),username2:ne(s.username2),userpassword:ne(s.userpassword)}),se("/login?dologin=True",1500)}}),(e,a)=>{const t=ke,l=ye,o=r;return x(),U("div",ct,[w(o,{ref_key:"formRef",ref:n,model:h(s),rules:i,"require-mark-placement":"left"},{default:g(()=>[w(l,{label:e.$t("Config.Panel.index_58"),path:"username1","show-require-mark":!0},{default:g(()=>[y("div",ft,[w(t,{value:h(s).username1,"onUpdate:value":a[0]||(a[0]=e=>h(s).username1=e),placeholder:""},null,8,["value"])])]),_:1},8,["label"]),w(l,{label:e.$t("Config.Panel.index_59"),path:"username2","show-require-mark":!0},{default:g(()=>[y("div",mt,[w(t,{value:h(s).username2,"onUpdate:value":a[1]||(a[1]=e=>h(s).username2=e),placeholder:""},null,8,["value"])])]),_:1},8,["label"]),w(l,{label:e.$t("Config.Panel.index_66"),path:"userpassword","show-require-mark":!0},{default:g(()=>[y("div",_t,[w(t,{value:h(s).userpassword,"onUpdate:value":a[2]||(a[2]=e=>h(s).userpassword=e),placeholder:""},null,8,["value"])])]),_:1},8,["label"])]),_:1},8,["model"])])}}}),xt=Object.assign({"./api/set.vue":Fe,"./debug-mode/confirm.vue":ta,"./menu-hide/set.vue":na,"./password/set.vue":ua,"./port/set.vue":va,"./safe-entry/set.vue":wa,"./ssl/close.vue":ka,"./ssl/open.vue":Fa,"./ssl/set/custom.vue":et,"./ssl/set/index.vue":pt,"./ssl/set/lets.vue":ut,"./username/set.vue":vt}),{t:gt}=be.global;e("o",()=>{o({title:gt("Config.Panel.index_57"),footer:!0,component:xt["./username/set.vue"]})}),e("a",()=>{o({title:gt("Config.Panel.index_65"),footer:!0,component:xt["./password/set.vue"]})}),e("j",e=>{o({title:gt("Config.Panel.index_79"),component:xt["./menu-hide/set.vue"],data:{menuList:e}})}),e("d",()=>{o({title:gt("Config.Safe.index_99"),footer:!0,component:xt["./port/set.vue"]})}),e("e",()=>{o({title:gt("Config.Safe.index_107"),footer:!0,component:xt["./safe-entry/set.vue"]})}),e("h",()=>{o({title:gt("Config.Safe.index_13"),component:xt["./ssl/set/index.vue"]})}),e("g",()=>{o({title:gt("Config.Safe.index_12"),footer:!0,confirmType:"error",component:xt["./ssl/close.vue"]})}),e("f",()=>{o({title:gt("Config.Safe.index_11"),footer:!0,component:xt["./ssl/open.vue"]})}),e("k",()=>{o({title:gt("Config.Panel.index_11"),footer:!0,component:xt["./debug-mode/confirm.vue"]})}),e("l",()=>{o({title:gt("Config.Panel.index_25"),component:xt["./api/set.vue"]})})}}});
