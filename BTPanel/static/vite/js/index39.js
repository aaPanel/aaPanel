const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/FileTask.js?v=1763625242172","js/page_layout.js?v=1763625242172","js/vue.js?v=1763625242172","js/__commonjsHelpers__.js?v=1763625242172","js/naive.js?v=1763625242172","js/common.js?v=1763625242172","js/public.js?v=1763625242172","css/public.css?v=1763625242172","css/page_layout.css?v=1763625242172","js/index.js?v=1763625242172","css/index110.css?v=1763625242172","js/soft2.js?v=1763625242172","js/soft.js?v=1763625242172","js/site.js?v=1763625242172","js/file2.js?v=1763625242172","js/index.vue_vue_type_script_setup_true_lang7.js?v=1763625242172","css/FileTask.css?v=1763625242172","js/PasteConfirm.js?v=1763625242172","js/CalcVerify.js?v=1763625242172","css/CalcVerify.css?v=1763625242172","js/PasteSingleConfirm.js?v=1763625242172","js/index.vue_vue_type_script_setup_true_lang.js?v=1763625242172","js/UploadFile.js?v=1763625242172","css/UploadFile.css?v=1763625242172","js/RemoteDownload.js?v=1763625242172","js/SearchFileContent.js?v=1763625242172","js/ResourceManagerWindow.js?v=1763625242172","css/ResourceManagerWindow.css?v=1763625242172","css/SearchFileContent.css?v=1763625242172","js/FavoriteList.js?v=1763625242172","js/ShareList.js?v=1763625242172","js/ShareDetail.vue_vue_type_script_setup_true_lang.js?v=1763625242172","js/Backup.js?v=1763625242172","js/Recycle.js?v=1763625242172","js/index.vue_vue_type_script_setup_true_lang12.js?v=1763625242172","js/index245.js?v=1763625242172","css/index59.css?v=1763625242172","css/Recycle.css?v=1763625242172","js/Terminal.js?v=1763625242172","js/terminal2.js?v=1763625242172","js/xterm.js?v=1763625242172","js/xterm-addon-canvas.js?v=1763625242172","css/xterm-addon-canvas.css?v=1763625242172","css/terminal.css?v=1763625242172","js/SoftLink.js?v=1763625242172","js/Share.js?v=1763625242172","js/index199.js?v=1763625242172","js/Permission.js?v=1763625242172","css/Permission.css?v=1763625242172","js/Properties.js?v=1763625242172","js/index107.js?v=1763625242172","css/index21.css?v=1763625242172","css/Properties.css?v=1763625242172","js/Del.js?v=1763625242172","css/Del.css?v=1763625242172","js/Compression.js?v=1763625242172","js/Decompress.js?v=1763625242172","js/index183.js?v=1763625242172","css/index84.css?v=1763625242172"])))=>i.map(i=>d[i]);
import{w as t,r as e,i as a,bf as n,y as i,m as l,c as s,x as o,a as r,bk as c,p as u,cr as p,_ as d,n as f,a9 as m,h as v,T as h,q as y,u as g,cs as w,ct as _,cu as b}from"./page_layout.js?v=1763625242172";import{r as k,aj as x,aB as C,aC as P,n as S,ap as z,X as R,F as O,_ as F,k as D,c as L,R as T,S as j,H as M,V as E,i as N,a2 as I,a3 as V,U,O as q,j as A,a4 as K,I as B,x as G,P as W,f as H,ad as Y,ae as J,o as X,an as Z,av as Q,G as tt,l as et,v as at,ak as nt,au as it,w as lt,u as st,b as ot,$ as rt,p as ct,h as ut,a7 as pt,a0 as dt,aD as ft,a6 as mt}from"./vue.js?v=1763625242172";import{b as vt,a as ht,u as yt,p as gt,i as wt}from"./public.js?v=1763625242172";import{_ as _t}from"./index.js?v=1763625242172";import"./common.js?v=1763625242172";import{c as bt}from"./soft2.js?v=1763625242172";import{_ as kt,dc as xt,dm as Ct,aC as Pt,di as St,aZ as zt,au as Rt,az as Ot,dg as Ft,dh as Dt,de as Lt,dS as Tt}from"./naive.js?v=1763625242172";import{a as jt}from"./soft.js?v=1763625242172";import{i as Mt}from"./file2.js?v=1763625242172";import{_ as Et}from"./index.vue_vue_type_script_setup_true_lang7.js?v=1763625242172";function Nt(t,a,n){e("FileEditorPath",n),openEditorView(t,a)}async function It(){await async function(){await t("/static/vite/oldjs/jquery-2.2.4.min.js?v=1763625242172"),await t("/static/layer/layer.js?v=1763625242172"),await t("/static/vite/oldjs/jsencrypt.min.js?v=1763625242172"),await t("/static/language/English/lan.js?v=1763625242172"),await t("/static/ace/ace.js?v=1763625242172"),await t("/static/ace/ext-language_tools.js?v=1763625242172"),await t("/static/vite/oldjs/polyfill.min.js?v=1763625242172"),await t("/static/vite/oldjs/public.js?v=1763625242172"),await t("/static/vite/oldjs/public_backup.js?v=1763625242172")}(),window.usePay=vt,$("#file-main").append('\n\t\t<script type="text/template" id="aceTmplate">\n\t\t\t\t<div id="ace_conter">\n\t\t\t\t\t\t<div class="ace_header" style="top: 0">\n\t\t\t\t\t\t\t\t<span class="saveFile"><i class="glyphicon glyphicon-floppy-disk" aria-hidden="true"></i><span>Save</span></span>\n\t\t\t\t\t\t\t\t<span class="saveFileAll"><i class="glyphicon glyphicon-duplicate" aria-hidden="true"></i><span>Save All</span></span>\n\t\t\t\t\t\t\t\t<span class="refreshs"><i class="glyphicon glyphicon-refresh" aria-hidden="true"></i><span>Refresh</span></span>\n\t\t\t\t\t\t\t\t<span class="searchs"><i class="glyphicon glyphicon-search" aria-hidden="true"></i><span>Search</span></span>\n\t\t\t\t\t\t\t\t<span class="replaces"><i class="glyphicon glyphicon-retweet" aria-hidden="true"></i><span>Replace</span></span>\n\t\t\t\t\t\t\t\t<span class="jumpLine"><i class="glyphicon glyphicon-pushpin" aria-hidden="true"></i><span>JumpLine</span></span>\n\t\t\t\t\t\t\t\t<span class="fontSize"><i class="glyphicon glyphicon-text-width" aria-hidden="true"></i><span>Font</span></span>\n\t\t\t\t\t\t\t\t<span class="themes"><i class="glyphicon glyphicon-magnet" aria-hidden="true"></i><span>Theme</span></span>\n\t\t\t\t\t\t\t\t<span class="setUp"><i class="glyphicon glyphicon-cog" aria-hidden="true"></i><span>Set</span></span>\n\t\t\t\t\t\t\t\t<span class="helps"><i class="glyphicon glyphicon-question-sign" aria-hidden="true"></i><span>Help</span></span>\n\t\t\t\t\t\t\t\t<div class="pull-down" title="Hide toolbar" style="top: 0"><i class="glyphicon glyphicon-menu-down" aria-hidden="true"></i></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="ace_overall" style="top: 35px;">\n\t\t\t\t\t\t\t\t\x3c!-- 编辑器目录 --\x3e\n\t\t\t\t\t\t\t\t<div class="ace_catalogue" style="left:0px">\n\t\t\t\t\t\t\t\t\t\t<div class="ace_catalogue_title">Directory<div class="dir-menu-right"><span class="glyphicon glyphicon-minus" aria-hidden="true"></span></div></div>\n\t\t\t\t\t\t\t\t\t<div class="ace_dir_tools">\n\t\t\t\t\t\t\t\t\t\t<div class="upper_level"  title="Return to parent directory">\n\t\t\t\t\t\t\t\t\t\t\t<i class="glyphicon glyphicon-share-alt" aria-hidden="true"></i>\n\t\t\t\t\t\t\t\t\t\t\t<span>Back</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="search_file" title="Search File">\n\t\t\t\t\t\t\t\t\t\t\t<i class="glyphicon glyphicon-search" aria-hidden="true"></i>\n\t\t\t\t\t\t\t\t\t\t\t<span>Search</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="new_folder" title="File/Folder">\n\t\t\t\t\t\t\t\t\t\t\t<i class="glyphicon glyphicon-plus"  aria-hidden="true"></i>\n\t\t\t\t\t\t\t\t\t\t\t<span>New</span>\n\t\t\t\t\t\t\t\t\t\t\t<ul class="folder_down_up">\n\t\t\t\t\t\t\t\t\t\t\t\t<li data-type="2"><i class="folder-icon"></i>Folder</li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li data-type="3"><i class="text-icon"></i>File</li>\n\t\t\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="refresh_dir" title="Refresh list">\n\t\t\t\t\t\t\t\t\t\t\t<span class="glyphicon glyphicon-refresh" aria-hidden="true"></span>\n\t\t\t\t\t\t\t\t\t\t\t<span>Refresh</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<span class="ace_editor_main_storey"></span>\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t<div class="ace_catalogue_list">\n\t\t\t\t\t\t\t\t\t\t\t\t<ul class="cd-accordion-menu"></ul>\n\t\t\t\t\t\t\t\t\t\t\t\t<ul class="ace_catalogue_menu">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<li data-type="0"><i class="glyphicon glyphicon-refresh" aria-hidden="true"></i><span>Refresh</span></li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<li data-type="1"><i class="glyphicon glyphicon-folder-open" aria-hidden="true"></i><span>Subdirectory</span></li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<li data-type="2"><i class="folder-icon"></i><span>New Folder</span></li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<li data-type="3"><i class="text-icon"></i><span>New File</span></li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<li data-type="4"><i class="rename-icon img-icon"></i><span>Rename</span></li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<li data-type="5"><i class="down-icon img-icon"></i><span>Download</span></li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<li data-type="6"><i class="del-icon img-icon"></i><span>Delete</span></li>\n\t\t\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="ace_catalogue_drag_icon">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="drag_icon_conter"></div>\n\t\t\t\t\t\t\t\t\t\t\t\t<span class="fold_icon_conter" title="Hide file directory"></span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\x3c!-- 编辑内容 --\x3e\n\t\t\t\t\t\t\t\t<div class="ace_editor_main">\n\t\t\t\t\t\t\t\t\t\t<ul class="ace_conter_menu"></ul>\n\t\t\t\t\t\t\t\t\t\t<div class="ace_conter_tips"><div class="tips"></div></div>\n\t\t\t\t\t\t\t\t\t\t<div class="ace_editor_main_storey"></div>\n\t\t\t\t\t\t\t\t\t\t<div class="ace_conter_editor"></div>\n\t\t\t\t\t\t\t\t\t\t<div class="ace_conter_toolbar">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="pull-left size_ellipsis">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span data-type="path" class="size_ellipsis"></span>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="pull-right">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span data-type="cursor"></span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span data-type="history"></span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span data-type="tab"></span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span data-type="encoding"></span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span data-type="lang"></span>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="ace_toolbar_menu" style="display: none;">\n\t\t\t\t\t\t\t\t\t\t<div class="menu-item menu-tabs" style="display: none;">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="menu-title">Set tabs</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<ul class="tabsType">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li data-value="nbsp">Indent using spaces</li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li data-value="tabs">Indent using "Tab"</li>\n\t\t\t\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="menu-title" style="margin-top:15px">Set the tab length</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<ul class="tabsSize">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li data-value="1">1</li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li data-value="2">2</li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li data-value="3">3</li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li data-value="4">4</li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li data-value="5">5</li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li data-value="6">6</li>\n\t\t\t\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="menu-item menu-encoding" style="display: none;">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="menu-title">Set file save encoding format</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<ul></ul>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="menu-item menu-files" style="display: none;">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="menu-conter">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<input type="text" class="menu-input" placeholder="Input language mode">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<i class="fa fa-close" aria-hidden="true"></i>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="menu-title">Set file language association</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<ul></ul>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="menu-item menu-fontSize" style="display: none;">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="menu-title">Set editor font size</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="menu-conter">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="set_font_size">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type="number" min="12" max="45"/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="tips error">Font setting range 12-45</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button class="btn-save">Save</button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="menu-item menu-jumpLine" style="display: none;">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="menu-title">Jump to specified line</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="menu-conter">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="set_jump_line">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type="number" min="0"/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button class="btn-save">Jump</button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="menu-item menu-themes" style="display: none;">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="menu-title">Set editor theme</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<ul></ul>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="menu-item menu-history" style="display: none;">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="menu-title">History version</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<ul></ul>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="menu-item menu-setUp"  style="display: none;">\n\t\t\t\t\t\t\t\t\t\t\t<div class="menu-title">Editor setting [ Some settings need to be restart editor ]</div>\n\t\t\t\t\t\t\t\t\t\t\t<ul class="editor_menu">\n\t\t\t\t\t\t\t\t\t\t\t\t<li data-type="wrap">Auto wrap</li>\n\t\t\t\t\t\t\t\t\t\t\t\t<li data-type="enableLiveAutocompletion">Code autocomplete</li>\n\t\t\t\t\t\t\t\t\t\t\t\t<li data-type="enableSnippets">Enable snippets</li>\n\t\t\t\t\t\t\t\t\t\t\t\t<li data-type="showInvisibles">Show hidden characters</li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li data-type="showLineNumbers">Show line numbers</li>\n\n\t\t\t\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t<\/script>\n\t')}function Vt(t,e,a){const n=k(!0),i=k(0),l=k(0),s=k(0),o=k(0),r=k(0),c=k(0),u=k(0),p=k(0);let d;x(t)?d=t.value:"string"==typeof t?d=document.querySelector(t):t instanceof Element&&(d=t);const f=function(){let t=null;return!!e&&(()=>{t||(t=setTimeout((()=>{e({m_flag:n,m_left:i,m_right:l,m_bottom:o,m_top:s,m_x:u,m_y:p,m_height:r,m_width:c}),clearTimeout(t),t=null}),10))})}();function m(t){const{left:e,right:a,top:n,bottom:d,height:f,width:m,x:v,y:h}=t.getBoundingClientRect();i.value=e,l.value=a,s.value=n,o.value=d,r.value=f,c.value=m,u.value=v,p.value=h}const v=t=>{if(a&&a(t,{m_flag:n,m_left:i,m_right:l,m_bottom:o,m_top:s,m_x:u,m_y:p,m_height:r,m_width:c}),!n.value)return;const{left:e,right:v,top:h,bottom:y}=d.getBoundingClientRect(),g=document.createElement("div"),w=t.clientX,_=t.clientY;g.style.position="absolute",g.style.left=w-e+"px",g.style.top=_-h+"px",g.style.width="0px",g.style.height="0px",g.style.backgroundColor="rgba(135, 182, 130, 0.1)",g.classList.add("district-wrapper"),d.appendChild(g),t.preventDefault();const{pause:b,resume:k,isActive:x}=C((()=>{R.scrollTop>=R.scrollHeight-R.clientHeight?b():(g.style.height=g.offsetHeight+10+"px",g.style.marginTop=parseInt(getComputedStyle(g).marginTop)-10+"px",R.scrollTop+=10,O=R.scrollTop,m(g),f&&f())}),{immediate:!1}),{pause:P,resume:S,isActive:z}=C((()=>{R.scrollTop<=0?P():(g.style.height=g.offsetHeight+10+"px",R.scrollTop-=10,F+=10,m(g),f&&f())}),{immediate:!1}),R=d.querySelector(".n-scrollbar-container");let O=0,F=0;document.onmousemove=t=>{t.preventDefault(),x.value||z.value||(w<=t.clientX?g.style.width=t.clientX-w+"px":(g.style.width=w-t.clientX+"px",g.style.marginLeft=-(w-t.clientX)+"px"),_<=t.clientY?(g.style.height=t.clientY-_+O+"px",g.style.marginTop=-O+"px"):(g.style.height=_-t.clientY+F+"px",g.style.marginTop=-(_-t.clientY)+"px"),t.clientX<e&&(g.style.width=w-e+"px",g.style.marginLeft=-(w-e)+"px"),t.clientX>v&&(g.style.width=v-w+"px")),t.clientY>y&&k(),t.clientY<h&&S(),m(g),f&&f()},document.onmouseup=()=>{document.onmousemove=null,d.contains(g)&&d.removeChild(g)}};return d&&(d.onmousedown=v),{m_flag:n,m_x:u,m_y:p,m_left:i,m_right:l,m_top:s,m_bottom:o,m_height:r,m_width:c}}function Ut(t,e){const a=P(t.m_left),n=P(t.m_right),i=P(t.m_top),l=P(t.m_bottom),s=P(e.left),o=P(e.right),r=P(e.top),c=P(e.bottom);return!(o<a||s>n||c<i||r>l)}function qt(t){t.card_hover=!0}function At(t){t.card_hover=!1}const{t:Kt}=a.global;async function Bt(t){const{shareList:e,shareListPage:a,shareListTotal:l}=t;try{const t=await n.post("/files?action=get_download_url_list",{p:a.value,row:12});return e.value=t.message.data,l.value=i(t.message.page),e.value}catch(s){return console.warn(s),[]}}async function Gt(t,e){try{await n.post("/files?action=remove_download_url",{id:e},{requestOptions:{loading:Kt("file.shareListModal.deletingShare"),successMessage:!0}}),Ht(t)}catch(a){console.warn(a)}}const $t=z((t=>ce(t)),100),{t:Wt}=a.global;async function Ht(t,e){var a;const{tableLoading:n,currentPath:l,favoriteList:s,fileRecycle:o,fileList:r,filesView:c,dirNums:u,fileNums:p,total:d,page:f,size:m,sort:v,reverse:h,diskMountPoint:y,currentFile:g,currentDirSize:w,uploadFileList:_,dragUploadRef:b}=t;n.value=!0;try{const n=await sa(l.value,(t=>{s.value=t.store,o.value=t.file_recycle,u.value=t.dir.length,p.value=t.files.length,d.value=i(t.page),y.value=t.disk,l.value=t.path}),{p:f.value,showRow:m.value,...v.value?{sort:v.value,reverse:h.value}:{},disk:!0,...e});g.value=null,w.value=-1;const k=await Jt(t);let x=[];k.length&&(x=k.map((t=>t.key)));const C=await Bt(t);let P=[];C.length&&(P=C.map((t=>t.filename))),r.value=n.map((t=>(t.remarks_hover=!1,t.isEditRemarks=!1,t.isCreate=!1,t.card_hover=!1,t.card_choosed=!1,t.isRenameForCard=!1,t.operation_show=!1,x.includes(t.path)?t.isFavorite=!0:t.isFavorite=!1,P.includes(t.path)&&(t.isShare=!0),t))),_.value=[],null==(a=b.value)||a.listenDragEvent(),S((()=>{"list"==c.value&&(Yt(t),function(t){const{tableRef:e,choosePathRef:a}=t;let n=0;const i=setInterval((()=>{if(n<10?n++:clearInterval(i),e.value){const n=e.value;n.querySelector(".n-data-table-base-table-body")&&Yt(t),n.oncontextmenu=e=>{e.preventDefault(),Zt(e,t)},n.onclick=e=>{"INPUT"!=e.target.nodeName&&($t(t),a.value.handleEnterDown())},clearInterval(i)}}),1e3)}(t))})),function(t){const{choosedKeys:e,waitForPaste:a}=t;e.value=[]}(t)}catch(k){console.warn(k)}finally{n.value=!1}}function Yt(t){const{tableRef:e}=t;e.value&&Vt(e.value.querySelector(".n-data-table-base-table-body"),(e=>function(t,e){const{trRectArr:a,choosedKeys:n}=t,i=[];for(let l=0;l<a.value.length;l++){const[[t,n]]=Object.entries(a.value[l]);Ut(e,n.getClientRects()[0])&&i.push(t)}n.value=[...new Set(i)]}(t,e)),((e,a)=>function(t,e,a){const{choosedKeys:n}=a;if(t.target.closest(".n-checkbox-box"))return;if(t.target.classList.contains("file-checkbox")){const e=t.target.closest("tr").dataset.key;return void(n.value.includes(e)?n.value=n.value.filter((t=>t!==e)):n.value.push(e))}if(function(t){const{normalTrList:e,trRectArr:a}=t;e.value=document.querySelectorAll('[class*="normal-tr"]');const n=[];for(let i=0;i<e.value.length;i++){const t=e.value[i].dataset.key;n.push({[t]:e.value[i]})}a.value=n}(a),t.target.closest("tr")){const e=t.target.closest("tr").dataset.key;if(0==t.button&&(n.value=[e]),2==t.button){if(n.value.includes(e))return;n.value=[e]}}"INPUT"==t.target.nodeName?e.m_flag.value=!1:e.m_flag.value=!0}(e,a,t)))}async function Jt(t){const{resetFavoriteOptions:e,favoriteOptions:a}=t;try{const t=(await n.post("/files?action=get_files_store",{},{requestOptions:{isOriginalResult:!0}})).message.map((t=>({type:t.type,icon:t.type,label:t.name,key:t.path})));return e(),a.value=[...t,...a.value],a.value}catch(i){return console.warn(i),[]}}function Xt(t,e,a){const{currentPath:n}=t,{type:i,name:l}=a,s=ta(l,i);"dir"==i?(n.value=e,Ht(t)):!function(t){return"file-img"===aa(t)}(s)?la(s)?ca(t,"Decompress",(t=>t.value.open(e,s))):na(s)?le(t,{path:e,nm:a.name}):Be(t):ie(t,e)}function Zt(t,e){const{choosedKeys:a,contextRef:n}=e;let i="empty";t.target.closest("tr")&&(i=a.value.length>1?"multiple":1==a.value.length?"single":"empty"),n.value.filesOperation(t,i)}function Qt(){var t;const e=null==(t=document.querySelector("#createInput"))?void 0:t.querySelector("input");null==e||e.focus(),null==e||e.select()}const te=z(((t,e)=>{const{choosedKeys:a}=t;"dir"==e.type&&(a.value=[e.nm],Ge(t))}),200);async function ee(t,e){const{close:a}=l.loading("Processing, please wait...");try{await bt("tamper_core",71);const{message:a}=await n.post("/tamper_core/get_effective_path.json",{path:e.path},{requestOptions:{isOriginalResult:!0}});if(s(a)&&a.status){const{data:n}=a;"dir"===e.type?function(t,e,a){const{pid:n,lock:i,action:l}=a,s=(i?"Turning off protection ":"Turning on protection ")+"[".concat(e.path,"]"),o=Wt(i?"file.tableController.afterTurningOffProtectionDir":"file.tableController.afterTurningOnProtectionDir");ht({width:480,title:s,content:o,onConfirm:async()=>{if("create"===l[0]&&0===n)return await ae(e.path,[]),void Ht(t);const a=[];i?a.push({key:-1!=e.path.indexOf("/www/server/panel/class")?"add_wd":l[0],values:[e.path]}):a.push({key:l[0],values:[e.path]}),await ne(n,a),Ht(t)}})}(t,e,n):function(t,e,a){const{pid:n,lock:i,action:l}=a,s=Wt(i?"file.tableController.turningOffProtection":"file.tableController.turningOnProtection",{path:e.path}),o=Wt(i?"file.tableController.afterTurningOffProtectionFile":"file.tableController.afterTurningOnProtectionFile"),r=k(!1),c=k(!0);ht({title:s,width:480,content:()=>R(O,null,[R("div",null,[o]),R("div",{class:"mt-8px"},[R(kt,{checked:c.value,"onUpdate:checked":t=>c.value=t},{default:()=>[R("span",null,[Wt(i?"file.tableController.turningOffProtectionFile":"file.tableController.turningOnProtectionFile",{path:e.nm})])]})]),R("div",{class:"mt-8px"},[R(kt,{checked:r.value,"onUpdate:checked":t=>r.value=t},{default:()=>[R("span",null,[Wt(i?"file.tableController.turningOffProtectionSuffix":"file.tableController.turningOnProtectionSuffix",{suffix:e.ext})])]})])]),onConfirm:async()=>{if("create"===l[0]&&0===n){const a=e.path.substring(0,e.path.lastIndexOf("/")),n=[];if(c.value){const t=e.path.split("/"),a=t.length>=2?t[t.length-2]:"";n.push("".concat(a,"/").concat(e.nm))}return r.value&&n.push("."+e.ext),await ae(a,n),void Ht(t)}const a=[];i?(c.value&&(a.push({key:"remove_bf",values:[e.path]}),a.push({key:"add_wf",values:[e.path]})),r.value&&a.push({key:"remove_bf",values:["."+e.ext]})):(c.value&&(a.push({key:"add_bf",values:[e.path]}),a.push({key:"remove_wf",values:[e.path]})),r.value&&a.push({key:"add_bf",values:["."+e.ext]})),await ne(n,a),Ht(t)}})}(t,e,n)}}finally{a()}}async function ae(t,e){const{message:a}=await n.post("/tamper_core/create_path.json",{path:t,exts:JSON.stringify(e)},{requestOptions:{loading:Wt("file.tableController.creatingDirectoryProtection"),isOriginalResult:!0}});if(s(a)){if(!a.status)return l.error(a.msg),Promise.reject();l.success(a.msg)}}async function ne(t,e){const{message:a}=await n.post("/tamper_core/batch_setting.json",{pid:t,settings:JSON.stringify(e)},{requestOptions:{loading:Wt("file.tableController.executing"),isOriginalResult:!0}});if(s(a)){if(!a.status)return l.error(a.msg),Promise.reject();l.success(a.msg)}}function ie(t,e){const{currentPreviewImg:a,previewShow:n}=t;a.value=e,n.value=!0}function le(t,e){const{currentPreviewVideo:a,previewVideoShow:n}=t;a.value={path:e.path,name:e.nm},n.value=!0}async function se(t){const{currentFile:e,currentPath:a}=t;if(e.value&&(e.value.isCreate&&e.value.isRename||e.value.isRenameForCard)&&(e.value.editName||(e.value.isCreate=!1),e.value.editName==e.value.nm&&(e.value.isCreate=!1),e.value.isCreate&&e.value.isRename||e.value.isRenameForCard)){if(e.value.editName!==e.value.nm){try{await(n=e.value.path,i=a.value+"/"+e.value.editName,Ue(n,i,{rename:!0})),Ht(t)}catch(l){console.log(l)}finally{e.value.isCreate=!1,e.value.isRenameForCard=!1,e.value.isRename=!1}return!0}e.value.isCreate=!1,e.value.isRenameForCard=!1,e.value.isRename=!1}var n,i}async function oe(t){const{currentFile:e,currentPath:a,fileList:i}=t;if(e.value&&e.value.isCreate&&!e.value.isRename)if(""==e.value.editName)i.value.shift();else try{return"dir"==e.value.type?await me(a.value+"/"+e.value.editName):await async function(t){try{await n.post("/files?action=CreateFile",{path:t},{requestOptions:{loading:fe("file.buttonGroup.loading.creatingFile"),successMessage:!0}})}catch(e){console.warn(e)}}(a.value+"/"+e.value.editName),await Ht(t),!0}catch(l){i.value.shift(),console.warn(l)}}async function re(t){const{currentFile:e}=t;if(e.value&&e.value.isEditRemarks)return e.value.editRemarks!=e.value.rmk?(await async function(t){await n.post("/files?action=set_file_ps",t,{requestOptions:{successMessage:!0}})}({filename:e.value.path,ps_type:0,ps_body:e.value.editRemarks}),await Ht(t),!0):(e.value.isEditRemarks=!1,e.value.remarks_hover=!1,!1)}async function ce(t){if(await re(t))return;if(await se(t))return;await oe(t)}async function ue(){return n.post("/task?action=get_task_lists",{status:-3})}async function pe(t){if(document.querySelector(".file-task-modal"))return;const{message:e}=await ue();o(e)&&e.length>0&&yt({title:Wt("file.tableController.realtimeTaskQueue"),width:510,class:"file-task-modal",unstableShowMask:!1,data:{store:t,taskList:e},component:F((()=>r((()=>import("./FileTask.js?v=1763625242172")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]))))})}async function de(t){return n.post("/task?action=remove_task",{id:t},{requestOptions:{loading:Wt("file.tableController.deletingTask"),successMessage:!0}})}const{t:fe}=a.global;async function me(t){try{await n.post("/files?action=CreateDir",{path:t},{requestOptions:{loading:fe("file.buttonGroup.loading.creatingDirectory"),successMessage:!0}})}catch(e){console.warn(e)}}async function ve(t,e){try{await n.post("/files?action=CreateLink",{sfile:t,dfile:e},{requestOptions:{loading:fe("file.buttonGroup.loading.creatingSoftlink"),successMessage:!0}})}catch(a){console.warn(a)}}function he(t){ca(t,"UploadFile",(t=>{t.value.open()}))}function ye(t){ca(t,"RemoteDownload",(t=>{t.value.open()}))}function ge(t){ca(t,"SearchFileContent",(t=>{t.value.open()}))}const we=t=>{ca(t,"FavoriteList",(t=>{t.value.open()}))};function _e(t,e,a){"management"==e?we(t):Xt(t,e,a)}function be(t){ca(t,"ShareList",(t=>{t.value.open()}))}function ke(t){const{currentPath:e}=t;e.value="/",Ht(t)}function xe(t){ca(t,"Backup",(t=>{t.value.open()}))}function Ce(t){ca(t,"Recycle",(t=>{t.value.open()}))}function Pe(t){ca(t,"Terminal",(t=>{t.value.open()}))}function Se(t,e,a,n){const{fileList:i,currentFile:l}=t,s={nm:e,isCreate:!0,type:a,ext:n,path:"",editName:e};l.value=s,l.value.editName=l.value.nm,i.value.unshift(l.value),S(Qt)}function ze(t,e){switch(e){case"dir":Se(t,fe("file.buttonGroup.defaultNames.untitledDirectory"),"dir","folder");break;case"file":Se(t,fe("file.buttonGroup.defaultNames.untitledFile"),"file","unknown");break;case"softlink":ca(t,"Softlink",(t=>{t.value.open()}))}}function Re(t){const{optionToolsRef:e,isMiniScreen:a}=t;e.value.offsetWidth<1560?a.value=!0:a.value=!1}async function Oe(t,e){try{await n.post("/files?action=del_files_store",{path:e},{requestOptions:{loading:fe("file.buttonGroup.loading.deletingFavorite"),successMessage:!0}}),Ht(t)}catch(a){console.warn(a)}}const{t:Fe}=a.global,De=t=>{const{fileRecycle:e}=t;e.value?Le(t):Te(t)},Le=t=>{const{currentPath:e,choosedKeys:a,fileList:n}=t,i=n.value.filter((t=>a.value.includes(t.nm)));ht({title:1===i.length?Fe("file.deleteController.deleteSingleFileTitle",{name:i[0].nm}):Fe("file.deleteController.batchDeleteTitle"),content:Fe("file.deleteController.recycleBinMessage"),width:400,onConfirm:async()=>{1===i.length?await je(i[0].path,i[0].type):await Me(i.map((t=>t.nm)),e.value),Ht(t)}})},Te=t=>{const{currentPath:e,choosedKeys:a,fileList:n}=t,i=n.value.filter((t=>a.value.includes(t.nm)));gt({title:1===i.length?Fe("file.deleteController.deleteSingleFileTitle",{name:i[0].nm}):Fe("file.deleteController.batchDeleteTitle"),content:()=>R("span",{class:"text-error"},[Fe("file.deleteController.permanentDeleteMessage")]),width:400,onConfirm:async()=>{1===i.length?await je(i[0].path,i[0].type):await Me(i.map((t=>t.nm)),e.value),Ht(t)}})};async function je(t,e){await n.post("/files?action=".concat("dir"===e?"DeleteDir":"DeleteFile"),{path:t},{requestOptions:{loading:Fe("file.deleteController.deletingSingle"),successMessage:!0}})}async function Me(t,e){await n.post("/files?action=SetBatchData",{data:JSON.stringify(t),type:4,path:e},{requestOptions:{loading:Fe("file.deleteController.deletingBatch"),successMessage:!0}})}const{t:Ee}=a.global;async function Ne(t,e){return(await n.post("/files?action=CheckExistsFiles",{dfile:t,filename:e},{requestOptions:{isOriginalResult:!0}})).message.length>0}async function Ie(t,e){return await n.post("/files?action=CopyFile",{sfile:t,dfile:e},{requestOptions:{loading:Ee("file.contextMenu.loading.copying"),successMessage:!0}})}async function Ve(t,e){return await n.post("/files?action=BatchPaste",{type:t,path:e},{requestOptions:{loading:Ee("file.contextMenu.loading.pasting"),successMessage:!0}})}async function Ue(t,e,a){return await n.post("/files?action=MvFile",{sfile:t,dfile:e,...a},{requestOptions:{loading:Ee("file.contextMenu.loading.moving"),successMessage:!0}})}async function qe(t,e,a,i){try{await n.post("/files?action=Zip",{sfile:t,dfile:e,z_type:a,path:i},{requestOptions:{loading:Ee("file.contextMenu.loading.compressing"),successMessage:!0}})}catch(l){console.warn(l)}}async function Ae(t){await n.post("/files?action=UnZip",t,{requestOptions:{loading:Ee("file.contextMenu.loading.decompressing"),successMessage:!0}})}function Ke(t,e){return e.map((e=>t[e]))}function Be(t){const{choosedKeys:e,currentPath:a,fileList:n}=t,i=n.value.find((t=>t.nm==e.value[0]));i&&Nt(0,i.path,a.value)}function Ge(t){const{choosedKeys:e,currentPath:a,fileList:n}=t,i=n.value.find((t=>t.nm==e.value[0]));t.page.value=1,a.value=i.path,Ht(t)}async function $e(t,e,a){const{choosedKeys:i,fileList:s,fileCopyCache:o,waitForPaste:r,copiedFile:c,currentPath:u}=t;if(1==i.value.length)l.success(e),o.value=JSON.parse(JSON.stringify(i.value)),c.value=ra(s.value,o.value)[0],r.value=!0;else try{const t=await async function(t,e,a){return await n.post("/files?action=SetBatchData",{data:JSON.stringify(t),type:e,path:a},{requestOptions:{loading:Ee("file.contextMenu.loading.batchSetting"),successMessage:!0}})}(i.value,a,u.value);0==t.status&&(o.value=JSON.parse(JSON.stringify(i.value)),r.value=!0)}catch(p){console.warn(p)}}async function We(t){const{fileOperationFlag:e,waitForPaste:a}=t;e.value=1,await $e(t,Ee("file.contextMenu.messages.copySuccess"),1),a.value=!0}async function He(t){const{fileOperationFlag:e,waitForPaste:a}=t;e.value=2,await $e(t,Ee("file.contextMenu.messages.cutSuccess"),2),a.value=!0}async function Ye(t){const{fileCopyCache:e,currentPath:a,waitForPaste:n}=t;if(!n.value)return;let i=!1;1==e.value.length?i=await Ne(a.value,e.value[0]):e.value.length>1&&(i=await Ne(a.value)),i?1==e.value.length?ca(t,"PasteSingleConfirm",(t=>t.value.open())):e.value.length>1&&ca(t,"PasteConfirm",(t=>t.value.open())):async function(t){const{fileCopyCache:e,fileOperationFlag:a,currentPath:n,copiedFile:i,waitForPaste:l}=t;e.value.length>1?await Ve(a.value,n.value):1==e.value.length&&(1==a.value?await Ie(i.value.path,n.value+"/"+i.value.nm):2==a.value&&await Ue(i.value.path,n.value+"/"+i.value.nm)),Ht(t),l.value=!1}(t)}function Je(t){ca(t,"Compression",(t=>t.value.open()))}function Xe(t,e){const{menuShow:a}=e;switch(t){case"edit":Be(e);break;case"copy":We(e);break;case"copyPath":!async function(t){const{choosedKeys:e,fileList:a}=t,n=ra(a.value,e.value)[0];n&&wt(n.path)}(e);break;case"cut":He(e);break;case"paste":Ye(e);break;case"permission":ca(e,"Permission",(t=>t.value.open()));break;case"compression":Je(e);break;case"decompress":ca(e,"Decompress",(t=>t.value.open()));break;case"conversion":console.log("conversion");break;case"del":De(e);break;case"refresh":Ht(e);break;case"upload":ca(e,"UploadFile",(t=>t.value.open()));break;case"createFile":Se(e,Ee("file.contextMenu.defaultNames.untitledFile"),"file","file");break;case"createDir":Se(e,Ee("file.contextMenu.defaultNames.untitledDirectory"),"dir","folder");break;case"download":!async function(t){const{currentPath:e,choosedKeys:a}=t;c("".concat("/"===e.value?"":e.value,"/").concat(a.value[0]))}(e);break;case"terminal":ca(e,"Terminal",(t=>t.value.open()));break;case"open":Ge(e);break;case"share":ca(e,"Share",(t=>t.value.open()));break;case"unShare":!function(t){const{choosedKeys:e,fileList:a,shareList:n}=t,i=ra(a.value,e.value)[0],l=n.value.find((t=>t.filename.includes(i.nm)));Gt(t,null==l?void 0:l.id)}(e);break;case"favorite":!async function(t){const{choosedKeys:e,fileList:a}=t,i=a.value.find((t=>t.nm==e.value[0]));try{await n.post("/files?action=add_files_store",{path:i.path},{requestOptions:{loading:Ee("file.contextMenu.loading.addingToFavorites"),successMessage:!0}}),Jt(t),Ht(t)}catch(l){console.warn(l)}}(e);break;case"unfavorite":!async function(t){const{choosedKeys:e,fileList:a}=t;Oe(t,ra(a.value,e.value)[0].path)}(e);break;case"rename":!async function(t){const{choosedKeys:e,fileList:a,currentFile:n,filesView:i}=t,l=ra(a.value,e.value)[0];n.value=l,"card"===i.value?(n.value.isRenameForCard=!0,n.value.editName=n.value.nm):(l.isCreate=!0,l.isRename=!0,l.editName=l.nm,S(Qt))}(e);break;case"attrs":ca(e,"Properties",(t=>t.value.open()));break;case"preview":!function(t){const{choosedKeys:e,fileList:a}=t;ie(t,ra(a.value,e.value)[0].path)}(e);break;case"playVideo":!function(t){const{choosedKeys:e,fileList:a}=t;le(t,ra(a.value,e.value)[0])}(e)}a.value=!1}function Ze(t){const{type:e,list:a,path:n}=t,i=[];for(const l of a)i.push(Qe({type:e,item:l,path:n}));return i}function Qe(t){const{type:e,item:a,path:n}=t,{nm:i,sz:l,is_link:s,lnk:o,mt:r,ctime:c,atime:u,gid:p,uid:d,group:f,user:m,acc:v,rmk:h,durl:y,cmp:g,fav:w,top:_,sn:b}=a;return{ext:ta(a.nm,e),nm:i,sz:l,mt:r,acc:v,user:m,is_link:s?o:"",lnk:o,durl:y,cmp:g,fav:w,rmk:h,top:_,sn:b,path:ea(n,i),ctime:c,atime:u,gid:p,uid:d,group:f,type:e}}function ta(t,e){if("dir"===e)return"folder";const a=["tar.gz"],n=t.toLowerCase();for(const l of a)if(n.endsWith(l))return l;const i=n.lastIndexOf(".");return-1!==i?n.substring(i+1):"file"}function ea(t,e){return function(t){return t.replace(/\/\//g,"/")}("".concat(t,"/").concat(e))}function aa(t){return["folder"].includes(t)?"file-dir":["txt","rtf","md","log","conf"].includes(t)?"file-txt":["json"].includes(t)?"file-json":["htm","html","xhtml"].includes(t)?"file-html":["css","less","scss"].includes(t)?"file-css":["js","ts"].includes(t)?"file-js":["php"].includes(t)?"file-php":["doc","docx","docm","dot","dotx","dotm"].includes(t)?"file-doc":["pdf","pdfa","pdfx","pdfu"].includes(t)?"file-pdf":["xlsx","xlsm","xltx","xltm"].includes(t)?"file-excel":["jpg","jpeg","png","gif","bmp","webp","tiff","tif","psd","ai","eps","cr2","cr3","nef","nrw","dng","svg","cdr","wmf","emf","apng","heic","ico","xbm","xpm","xcf","iff","pnm"].includes(t)?"file-img":["py","java","js","ts","c","cpp","cs","php","rb","go","swift","kt","html","css","jsx","vue","scss","less","tsx","json","xml","yaml","yml","ini","properties","env","sql","pl","sh","bat","ps1","m","swift","kt","gradle","makefile","cmake","jar","war","exe","md","gitignore","dockerfile","yml","ipynb","asm","lua","rs","hs"].includes(t)?"file-sh":["zip","rar","7z","tar","tar.gz","gz","tgz","tar.bz2","tar.xz","cab","iso","msi","rpm","deb","xz","zipx","lz4","zst","rar5","part1.rar","rar.part1","z01","z02"].includes(t)?"file-compression":"file-unknown-file"}function na(t){return["mp3","mp4","avi","mov","mkv","wmv","flv","3gp","3g2","vob","webm","ogv"].includes(t)}function ia(t){return"file-img"===aa(t.ext)}function la(t){return"file-compression"===aa(t)}async function sa(t,e,a){try{const{message:i}=await n.post("/files?action=GetDirNew",{path:t,is_operating:!0,...a});e&&e(i);let l=Ze({type:"dir",list:i.dir,path:i.path}),s=Ze({type:"file",list:i.files,path:i.path});return l=l.map(((t,e)=>({...t,protected:i.tamper_data.dirs&&i.tamper_data.dirs[e]?Number(i.tamper_data.dirs[e].split(";")[0]):0,protected_rule:i.tamper_data.dirs&&i.tamper_data.dirs[e]?Number(i.tamper_data.dirs[e].split(";")[1]):0}))),s=s.map(((t,e)=>({...t,protected:i.tamper_data.files&&i.tamper_data.files[e]?Number(i.tamper_data.files[e].split(";")[0]):0,protected_rule:i.tamper_data.files&&i.tamper_data.files[e]?Number(i.tamper_data.files[e].split(";")[1]):0}))),[...l,...s]}catch(i){return console.warn(i),[]}}async function oa(t,e,a,i,l,s,o=!1,r){const c=[],u=Math.ceil(t.size/a);for(let n=0;n<u;n++){const e=n*a,l=Math.min(e+a,t.size),s=t.slice(e,l),o=new FormData;o.append("f_path",i),o.append("f_name",t.name),o.append("f_size","".concat(t.size)),o.append("f_start","".concat(e)),o.append("blob",s),c.push(o)}try{for(let t=0;t<c.length;t++){const a=await n.post(e,c[t],{headers:{"Content-Type":"multipart/form-data"},requestOptions:{isOriginalResult:!0}});"number"==typeof a.message&&s&&s(a);l(Math.round(t/c.length*100),a)}l(100,null)}catch(p){return console.log(p),Promise.reject({msg:p.message})}}function ra(t,e){return t.filter((t=>e.includes(t.nm)))}async function ca(t,e,a){const{dynamicCmptObj:n,dynamicCmpt:i,dynamicCmptRef:l}=t,s=n[e]();await s.__asyncLoader(),i.value=s,S((()=>{a&&a(l)}))}const ua=u(D({__name:"FileIcon",props:{ext:{type:String,default:""},size:{type:String,default:"medium"}},setup(t){const e=L((()=>la(t.ext)?"compress":"Dir"===t.ext?"folder":t.ext));return(a,n)=>(T(),j("div",{class:M(["files-icon",["".concat(E(e),"-icon"),"".concat(t.size,"-icon")]])},null,2))}}),[["__scopeId","data-v-51faac5f"]]),pa={class:"video-container"},da=["src"],fa={class:"video-list"},ma=["onClick"],va=u(D({__name:"VideoPlayer",setup(t){const e=N("fileStore"),{videoWaitPreview:a,previewVideoShow:n,currentPreviewVideo:i}=e,l=k(),s=k(0),o=L((()=>"/download?filename=".concat(i.value.path)));function r(){s.value=l.value.offsetHeight}return(t,e)=>{const c=p,u=_t;return T(),I(u,{show:E(n),"onUpdate:show":e[0]||(e[0]=t=>x(n)?n.value=t:null),width:"70%",title:t.$t("file.videoPlayerModal.title"),onAfterEnter:r},{default:V((()=>[U("div",pa,[U("video",{src:E(o),controls:"true",preload:"auto",width:"100%",ref_key:"videoRef",ref:l},null,8,da),U("div",fa,[R(c,{style:B({height:E(s)+"px"})},{default:V((()=>[(T(!0),j(O,null,q(E(a),(t=>(T(),j("div",{class:M(["video-item",{active:t.path==E(i).path}]),key:t.path,onClick:e=>i.value=t},[R(ua,{ext:"mp4"}),R(E(xt),null,{default:V((()=>[A(K(t.name),1)])),_:2},1024)],10,ma)))),128))])),_:1},8,["style"])])])])),_:1},8,["show","title"])}}}),[["__scopeId","data-v-6be9ab69"]]),ha=k([]),ya=k(!1),ga=k(null),wa=k(1),{t:_a}=a.global;const ba={class:"drag-upload"},ka={class:"upload-area"},xa={class:"tip"},Ca=u(D({__name:"DragUpload",setup(t,{expose:e}){const{t:a}=W(),n=N("fileStore"),{uploadFileList:i,uploadShow:s,uploadComplete:o,startUpload:r}=n,c=k(!1),u=k(0);function p(t){const e=t.dataTransfer;return!!e&&e.types.some((t=>"Files"===t||"application/x-moz-file"===t))}function d(t){t.preventDefault(),p(t)&&(u.value++,c.value=!0)}function f(t){t.preventDefault(),p(t)&&(u.value--,u.value<=0&&(c.value=!1,u.value=0))}function m(t){t.preventDefault(),p(t)&&(t.dataTransfer.dropEffect="copy")}async function v(t){const e=[];for(let a=0;a<t.length;a++){const n=t[a].webkitGetAsEntry();n&&e.push(n)}await h(e)&&l.error(a("file.uploadModal.fileAlreadyExists"),{close:!0})}async function h(t,e=""){o.value&&(i.value=[],r.value=!1,o.value=!1);let a=!1;for(const n of t)if(n.isDirectory){const t=n.createReader(),i=await new Promise((e=>{t.readEntries(e)}));await h(i,e?"".concat(e,"/").concat(n.name):n.name)&&(a=!0)}else if(n.isFile){if(-1!=i.value.findIndex((t=>g("".concat(t.relativePath,"/").concat(t.file.name))==g(n.fullPath)))){a=!0;continue}const t=await new Promise((t=>{n.file(t)}));i.value.push({file:t,status:0,progress:0,relativePath:e?"".concat(e):""})}return a}async function y(t){var e;t.preventDefault(),p(t)&&(u.value=0,c.value=!1,(null==(e=t.dataTransfer)?void 0:e.items)&&(await v(t.dataTransfer.items),ca(n,"UploadFile"),s.value=!0))}function g(t){return t.startsWith("/")?t.slice(1):t}function w(){document.ondragenter=d,document.ondragleave=f,document.ondragover=m,document.ondrop=y}return ca(n,"UploadFile"),e({listenDragEvent:w}),H((()=>{w()})),(t,e)=>{const a=Ct;return T(),j("div",ba,[R(a,{show:E(c),"onUpdate:show":e[0]||(e[0]=t=>x(c)?c.value=t:null)},{default:V((()=>[U("div",ka,[U("span",xa,K(t.$t("file.uploadModal.dragFilesHere")),1)])])),_:1},8,["show"])])}}}),[["__scopeId","data-v-90e8c7cf"]]),Pa={class:"img-wrapper"},Sa=["src"],za=u(D({__name:"ImagePreview",setup(t){const e=N("fileStore"),{imgWaitPreview:a,currentPreviewImg:n,previewShow:i}=e,l=k(.5),s=L((()=>"/download?filename=".concat(a.value[o.value]))),o=k(0);function r(){o.value=a.value.findIndex((t=>t===n.value))}function c(){o.value>0&&o.value--}function u(){o.value<a.value.length-1&&o.value++}function p(){l.value>2||(l.value+=.1)}function d(){l.value<.2||(l.value-=.1)}function f(){i.value=!1}function m(t){l.value-t.deltaY/1e3<.2||l.value-t.deltaY/1e3>2||(l.value-=t.deltaY/1e3)}return(t,e)=>{const a=Ct;return T(),I(a,{show:E(i),"onUpdate:show":e[0]||(e[0]=t=>x(i)?i.value=t:null),"close-on-esc":!1,"mask-closable":!1,"on-after-enter":r},{default:V((()=>[U("div",Pa,[U("img",{src:E(s),style:B({transform:"translate(-50%, -50%) scale(".concat(E(l),")")}),onWheel:m},null,44,Sa),U("div",{class:"tools"},[U("i",{class:"i-ic:outline-arrow-circle-left text-16 text-[#fff] cursor-pointer",onClick:c}),U("i",{class:"i-ic:baseline-zoom-in text-16 text-[#fff] cursor-pointer",onClick:p}),U("i",{class:"i-ic:baseline-zoom-out text-16 text-[#fff] cursor-pointer",onClick:d}),U("i",{class:"i-ic:outline-arrow-circle-right text-16 text-[#fff] cursor-pointer",onClick:u})]),U("i",{class:"i-iconoir:xmark-circle text-16 text-[#fff] cursor-pointer close-icon",onClick:f})])])),_:1},8,["show"])}}}),[["__scopeId","data-v-7045f818"]]),Ra={key:0,class:"group-left"},Oa={key:1,class:"group-left"},Fa={class:"group-right"},Da={class:"view-change"},La=u(D({__name:"ButtonGroup",props:{filesView:{type:String,default:"list"},filesViewModifiers:{}},emits:Y(["viewChange"],["update:filesView"]),setup(t,{emit:e}){const a=e,{t:n}=W(),i=N("fileStore"),{favoriteOptions:l,choosedKeys:o,waitForPaste:r,optionToolsRef:c,isMiniScreen:u}=i,p=J(t,"filesView"),f=L((()=>[{label:n("file.buttonGroup.createOptions.newDirectory"),key:"dir",icon:()=>R(d,{name:"file-dir",size:"16"},null)},{label:n("file.buttonGroup.createOptions.newFile"),key:"file",icon:()=>R(d,{name:"base-file",size:"16"},null)},{label:n("file.buttonGroup.createOptions.softLink"),key:"softlink",icon:()=>R(d,{name:"file-soft-link",size:"15"},null)}])),m=L((()=>[{label:n("file.buttonGroup.miniScreenOptions.upload"),key:"Upload",icon:()=>R(d,{name:"file-upload",size:"14"},null)},{label:n("file.buttonGroup.miniScreenOptions.remoteDownload"),key:"Remote Download",icon:()=>R(d,{name:"file-download",size:"16"},null)},{label:n("file.buttonGroup.miniScreenOptions.new"),key:"create",icon:()=>R(d,{name:"base-dir",size:"14",class:"mr-5px"},null),children:[{label:n("file.buttonGroup.createOptions.newDirectory"),key:"dir",icon:()=>R(d,{name:"file-dir",size:"16"},null)},{label:n("file.buttonGroup.createOptions.newFile"),key:"file",icon:()=>R(d,{name:"base-file",size:"16"},null)},{label:n("file.buttonGroup.createOptions.softLink"),key:"softlink",icon:()=>R(d,{name:"file-soft-link",size:"15"},null)}]},{label:n("file.buttonGroup.miniScreenOptions.searchFileContent"),key:"Search File Content",icon:()=>R(d,{name:"search",size:"14"},null)},{label:n("file.buttonGroup.miniScreenOptions.favorite"),key:"Favorite",icon:()=>R(d,{name:"file-favorite",size:"14",class:"mr-5px"},null),children:h.value},{label:n("file.buttonGroup.miniScreenOptions.shareList"),key:"Share List",icon:()=>R(d,{name:"file-share",size:"14"},null)},{label:n("file.buttonGroup.miniScreenOptions.terminal"),key:"Terminal",icon:()=>R(d,{name:"file-terminal",size:"14"},null)},{label:n("file.buttonGroup.miniScreenOptions.rootDirectory"),key:"Root Directory",icon:()=>R(d,{name:"file-disk",size:"14"},null)},{label:n("file.buttonGroup.miniScreenOptions.fileProtection"),key:"File/Dir protection",icon:()=>R(d,{name:"file-protect",size:"14"},null)}]));function v(t,e){switch(t){case"Upload":he(i);break;case"Remote Download":ye(i);break;case"dir":ze(i,"dir");break;case"file":ze(i,"file");break;case"softlink":ze(i,"softlink");break;case"Search File Content":ge(i);break;case"Share List":be(i);break;case"Terminal":Pe(i);break;case"Root Directory":ke(i);break;case"File/Dir protection":y();break;default:!function(t,e){_e(i,t,e.meta)}(t,e)}}const h=L((()=>l.value.map((t=>({key:t.key,icon:()=>{return R(d,{name:(e=t.icon,"dir"==e?"file-dir":"settings"==e?"flow-action":"file-record"),size:"16"},null);var e},label:()=>R("div",{class:"flex"},[R("div",{class:"max-w-300px"},[R(xt,null,{default:()=>[t.label]})])]),meta:{type:t.icon,name:t.label}}))))),y=async()=>{const t=await bt("tamper_core",75);s(t)&&jt(t)};function g(){ca(i,"Permission",(t=>t.value.open()))}function w(){De(i)}function _(t){!function(t,e){const{filesView:a}=t;a.value=e}(i,t),a("viewChange",t)}return X((()=>{Re(i),window.addEventListener("resize",(()=>Re(i)))})),(t,e)=>{const a=d,n=Pt,l=St,s=zt;return T(),j("div",{class:"button-group",ref_key:"optionToolsRef",ref:c},[!E(u)&&E(o).length<=1?(T(),j("div",Ra,[R(n,{onClick:e[0]||(e[0]=t=>E(he)(E(i)))},{icon:V((()=>[R(a,{name:"file-upload",size:"14"})])),default:V((()=>[A(" "+K(t.$t("file.upload")),1)])),_:1}),R(n,{onClick:e[1]||(e[1]=t=>E(ye)(E(i)))},{icon:V((()=>[R(a,{name:"file-download",size:"16"})])),default:V((()=>[A(" "+K(t.$t("file.remoteDownload")),1)])),_:1}),R(l,{trigger:"hover",options:E(f),placement:"bottom-start","on-select":t=>E(ze)(E(i),t)},{default:V((()=>[R(n,{"icon-placement":"right",class:"btn-behavior"},{default:V((()=>[R(a,{name:"base-dir",size:"14",class:"mr-5px"}),A(" "+K(t.$t("file.create"))+" ",1),R(a,{name:"base-arrow-right",size:"14"})])),_:1})])),_:1},8,["options","on-select"]),R(n,{onClick:e[2]||(e[2]=t=>E(ge)(E(i)))},{icon:V((()=>[R(a,{name:"search",size:"14"})])),default:V((()=>[A(" "+K(t.$t("file.searchContent")),1)])),_:1}),R(l,{placement:"bottom-start",scrollable:!0,style:{maxHeight:"480px"},options:E(h),onSelect:e[4]||(e[4]=(t,e)=>E(_e)(E(i),t,e.meta))},{default:V((()=>[R(n,{"icon-placement":"right",class:"btn-behavior",onClick:e[3]||(e[3]=t=>E(we)(E(i)))},{default:V((()=>[R(a,{name:"file-favorite",size:"14",class:"mr-5px"}),A(" "+K(t.$t("file.favorite"))+" ",1),R(a,{name:"base-arrow-right",size:"14"})])),_:1})])),_:1},8,["options"]),R(n,{onClick:e[5]||(e[5]=t=>E(be)(E(i)))},{icon:V((()=>[R(a,{name:"file-share",size:"14"})])),default:V((()=>[A(" "+K(t.$t("file.shareList")),1)])),_:1}),R(n,{onClick:e[6]||(e[6]=t=>E(Pe)(E(i)))},{icon:V((()=>[R(a,{name:"file-terminal",size:"14"})])),default:V((()=>[A(" "+K(t.$t("file.terminal")),1)])),_:1}),e[16]||(e[16]=U("div",{class:"divider"},null,-1)),R(n,{onClick:e[7]||(e[7]=t=>E(ke)(E(i)))},{icon:V((()=>[R(a,{name:"file-disk",size:"14"})])),default:V((()=>[A(" "+K(t.$t("file.rootDirectory")),1)])),_:1}),e[17]||(e[17]=U("div",{class:"divider"},null,-1)),R(n,{onClick:y},{icon:V((()=>[R(a,{name:"file-protect",size:"14"})])),default:V((()=>[A(" "+K(t.$t("file.protection")),1)])),_:1})])):E(u)||E(o).length>1?(T(),j("div",Oa,[R(l,{placement:"bottom-start",scrollable:!0,"menu-props":()=>({style:"max-height: 480px"}),options:E(m),"on-select":v},{default:V((()=>[R(n,{"icon-placement":"right",class:"btn-behavior"},{default:V((()=>[R(a,{name:"base-dir",size:"14",class:"mr-5px"}),A(" "+K(t.$t("file.buttonGroup.fileOperations"))+" ",1),R(a,{name:"base-arrow-right",size:"14"})])),_:1})])),_:1},8,["options"])])):Z("",!0),U("div",Fa,[E(o).length>1?(T(),I(s,{key:0},{default:V((()=>[R(n,{onClick:e[8]||(e[8]=t=>E(We)(E(i)))},{icon:V((()=>[R(a,{name:"common-copy",size:"16"})])),default:V((()=>[A(" "+K(t.$t("file.copy")),1)])),_:1}),R(n,{onClick:e[9]||(e[9]=t=>E(He)(E(i)))},{icon:V((()=>[R(a,{name:"file-cut",size:"16"})])),default:V((()=>[A(" "+K(t.$t("file.cut")),1)])),_:1}),R(n,{onClick:e[10]||(e[10]=t=>E(Je)(E(i)))},{icon:V((()=>[R(a,{name:"file-compression",size:"16"})])),default:V((()=>[A(" "+K(t.$t("file.compress")),1)])),_:1}),R(n,{onClick:g},{icon:V((()=>[R(a,{name:"file-dir-permission",size:"16"})])),default:V((()=>[A(" "+K(t.$t("file.buttonGroup.permissions")),1)])),_:1}),R(n,{onClick:w},{icon:V((()=>[R(a,{name:"file-recycling-bin",size:"16"})])),default:V((()=>[A(" "+K(t.$t("file.delete")),1)])),_:1})])),_:1})):Z("",!0),E(r)?(T(),I(n,{key:1,onClick:e[11]||(e[11]=()=>E(Ye)(E(i)))},{icon:V((()=>[R(a,{name:"file-paste",size:"20"})])),default:V((()=>[A(" "+K(t.$t("file.paste")),1)])),_:1})):Z("",!0),R(n,{onClick:e[12]||(e[12]=t=>E(xe)(E(i)))},{default:V((()=>[A(K(t.$t("file.backup")),1)])),_:1}),R(n,{onClick:e[13]||(e[13]=t=>E(Ce)(E(i)))},{icon:V((()=>[R(a,{name:"file-recycling-bin",size:"14"})])),default:V((()=>[A(" "+K(t.$t("file.recycleBin")),1)])),_:1}),U("div",Da,[U("div",{class:M(["card",{active:"card"==p.value}]),onClick:e[14]||(e[14]=t=>_("card"))},[R(a,{name:"file-card-view",size:"14"})],2),U("div",{class:M(["list",{active:"list"==p.value}]),onClick:e[15]||(e[15]=t=>_("list"))},[R(a,{name:"file-list-view",size:"16"})],2)])])],512)}}}),[["__scopeId","data-v-c747adc9"]]),Ta={class:"path-dir"},ja={class:"path-arrow reversal"},Ma={class:"path-dir"},Ea={class:"path-arrow"},Na=["onClick"],Ia={class:"path-dir"},Va={class:"path-arrow"},Ua=u(D({__name:"ChoosePath",props:{currentPath:{type:String,default:"/"}},emits:["pathChange"],setup(t,{expose:e,emit:a}){const i=t,l=a,{t:o}=W(),r=N("fileStore"),c=k(""),u=Q("pathListRef"),p=k(0),f=L((()=>i.currentPath.split("/").filter((t=>""!==t)).map(((t,e)=>({name:t,originalIndex:e}))))),m=L((()=>{if(!p.value||0===f.value.length)return f.value;let t=p.value-80;const e=[...f.value].reverse(),a=[];for(const n of e){const e=Math.min(8*n.name.length,150)+20+12;if(!(t>=e))break;a.unshift(n),t-=e}return a})),v=L((()=>m.value.length<f.value.length)),h=L((()=>{const t=f.value.length-m.value.length;return f.value.slice(0,t)})),y=L((()=>{const t=h.value.map((t=>({key:t.originalIndex,label:t.name,icon:()=>R(d,{name:"file-dir",size:"16"},null)})));return t.unshift({key:"/",label:o("file.rootDirectory"),icon:()=>R(d,{name:"file-dir",size:"16"},null)}),t})),g=t=>{F(t)},w=k(!0),_=Q("inputRef");let b=null;function C(){u.value&&(p.value=u.value.offsetWidth)}function P(t){w.value=t,w.value?(c.value="",S((()=>{C()}))):c.value=i.currentPath}X((()=>{u.value&&(C(),b=new ResizeObserver((()=>{C()})),b.observe(u.value))})),tt((()=>{b&&b.disconnect()}));const z=()=>{P(!1),S((()=>{var t;null==(t=_.value)||t.focus()}))};function F(t,e){const a=i.currentPath.split("/").filter((t=>""!==t));let n="";"number"==typeof t&&(a.splice(t+1),n="/"+a.join("/")),"/"==t&&(n="/"),l("pathChange",n),null==e||e.stopPropagation()}async function D(){var t;if(c.value==i.currentPath||""==c.value)null==(t=_.value)||t.blur(),P(!0);else if(Mt(c.value))try{const{message:t}=await n.post("/files?action=test_path",{path:c.value});if(s(t)&&t.exists)l("pathChange",t.path),P(!0);else{let t=c.value;ht({title:o("file.pathNotExists"),content:o("file.pathNotExistsConfirm",{path:t}),onPublicClose:()=>P(!1),onConfirm:async()=>{await me(t),l("pathChange",t)},onCancel(){var t;null==(t=_.value)||t.blur(),P(!0)}})}}catch(e){console.warn(e)}else P(!1)}function M(){const t=i.currentPath.split("/").filter((t=>""!==t));if(0!=t.length){t.pop();let e="/"+t.join("/");l("pathChange",e)}}function B(){Ht(r)}return e({handleEnterDown:D}),(t,e)=>{const a=Pt,n=St,i=xt,l=Rt,s=Ot;return T(),I(s,null,{default:V((()=>[R(a,{onClick:M},{default:V((()=>[R(d,{name:"file-back",size:"16"})])),_:1}),E(w)?(T(),j("div",{key:0,ref_key:"pathListRef",ref:u,class:"path-list",onClick:z},[R(n,{trigger:"click",placement:"bottom-start",options:E(y),onSelect:g},{default:V((()=>[et(U("div",{class:"path-item",onClick:e[0]||(e[0]=t=>t.stopPropagation())},[U("div",Ta,[R(d,{name:"file-dir",size:"16"})]),U("div",ja,[R(d,{name:"base-arrow-right"})])],512),[[at,E(v)]])])),_:1},8,["options"]),et(U("div",{class:"path-item",onClick:e[1]||(e[1]=t=>F("/",t))},[U("div",Ma,K(t.$t("file.rootDirectory")),1),U("div",Ea,[R(d,{name:"base-arrow-right"})])],512),[[at,!E(v)]]),(T(!0),j(O,null,q(E(m),((t,e)=>(T(),j("div",{class:"path-item",key:"".concat(t,"_").concat(e),onClick:e=>F(t.originalIndex,e)},[U("div",Ia,[R(i,{class:"max-w-150px!"},{default:V((()=>[A(K(t.name),1)])),_:2},1024)]),U("div",Va,[R(d,{name:"base-arrow-right"})])],8,Na)))),128))],512)):(T(),I(l,{key:1,ref_key:"inputRef",ref:_,value:E(c),"onUpdate:value":e[2]||(e[2]=t=>x(c)?c.value=t:null),class:"flex-1",placeholder:" ",onFocus:e[3]||(e[3]=t=>P(!1)),onBlur:e[4]||(e[4]=t=>P(!0)),onKeydown:nt(D,["enter"])},null,8,["value"])),R(a,{onClick:B},{default:V((()=>[R(d,{name:"base-refresh",size:"16"})])),_:1})])),_:1})}}}),[["__scopeId","data-v-ca757f3c"]]),qa={class:"filter-tools"},Aa=u(D({__name:"SearchTools",setup(t){const e=N("fileStore"),{currentPath:a}=e,n=k(""),i=k(void 0),{choosePathRef:l}=e;async function s(){const t={search:n.value};e.page.value=1,i.value&&(t.all="True"),Ht(e,t)}function o(t){a.value=t,e.page.value=1,Ht(e)}return(t,e)=>{const r=kt,c=Rt,u=d,p=Pt,f=Ot;return T(),j("div",qa,[R(Ua,{ref_key:"choosePathRef",ref:l,class:"w-50%","current-path":E(a),onPathChange:o},null,8,["current-path"]),R(f,{class:"dir-search"},{default:V((()=>[R(c,{placeholder:t.$t("file.search"),status:"success",value:E(n),"onUpdate:value":e[1]||(e[1]=t=>x(n)?n.value=t:null),onKeyup:nt(s,["enter"])},{suffix:V((()=>[R(r,{checked:E(i),"onUpdate:checked":e[0]||(e[0]=t=>x(i)?i.value=t:null)},{default:V((()=>[A(K(t.$t("file.includeSubdir")),1)])),_:1},8,["checked"])])),_:1},8,["placeholder","value"]),R(p,{type:"primary",onClick:s},{icon:V((()=>[R(u,{name:"search",size:"16"})])),_:1})])),_:1})])}}}),[["__scopeId","data-v-7bef8870"]]),Ka=D({__name:"ContextMenu",setup(t,{expose:e}){const{t:a}=W(),{addTab:n}=N("file-provide"),i=N("fileStore"),{waitForPaste:l}=i,s=k(!1),o=k("empty"),r=k(0),c=k(1),u=L((()=>{switch(o.value){case"single":return function(t,e){const{fileList:a,choosedKeys:n}=t,i=ra(a.value,n.value)[0];let l=["share","favorite","permission","copy","copyPath","cut","rename","del","compression","attrs"];if(!i)return Ke(e.value,["refresh","upload","create","terminal"]);if("dir"==i.type?l.unshift("open","openNewWindow"):l.unshift("edit","download"),ia(i)&&(l.unshift("preview"),l=l.filter((t=>"edit"!==t))),na(i.ext)&&(l.unshift("playVideo"),l=l.filter((t=>"edit"!==t))),i.isFavorite){const t=l.findIndex((t=>"favorite"==t));l[t]="unfavorite"}if(i.isShare){const t=l.findIndex((t=>"share"==t));l[t]="unShare"}return la(i.ext)&&(l.unshift("decompress"),l=l.filter((t=>"edit"!==t))),Ke(e.value,l)}(i,f);case"multiple":return Ke(f.value,["copy","cut","permission","compression","del"]);default:return l.value?Ke(f.value,["refresh","upload","create","terminal","paste"]):Ke(f.value,["refresh","upload","create","terminal"])}}));function p(t){if("openNewWindow"===t)!function(){const{choosedKeys:t,fileList:e}=i,a=ra(e.value,t.value)[0];a&&n(a.path,a.nm)}();Xe(t,i),s.value=!1}const f=k({edit:{label:a("Public.Btn.Edit"),key:"edit",icon:()=>R(d,{name:"common-copy",size:"14"},null)},copy:{label:a("Public.Btn.Copy"),key:"copy",icon:()=>R(d,{name:"common-copy",size:"14"},null)},copyPath:{label:"Copy Path",key:"copyPath",icon:()=>R(d,{name:"common-copy",size:"14"},null)},cut:{label:a("file.fileOperation.cut"),key:"cut",icon:()=>R(d,{name:"file-cut",size:"16"},null)},permission:{label:a("file.fileOperation.permission"),key:"permission",icon:()=>R(d,{name:"file-dir-permission",size:"14"},null)},compression:{label:a("file.contextMenu.createCompression"),key:"compression",icon:()=>R(d,{name:"file-compression",size:"16"},null)},decompress:{label:a("file.fileOperation.decompress"),key:"decompress",icon:()=>R(d,{name:"file-compression",size:"16"},null)},conversion:{label:a("file.contextMenu.formatConversion"),key:"conversion",icon:()=>R(d,{name:"file-conversion",size:"16"},null)},del:{label:a("Public.Btn.Delete"),key:"del",icon:()=>R(d,{name:"file-recycling-bin",size:"16"},null)},refresh:{label:a("Public.Btn.Refresh"),key:"refresh",icon:()=>R(d,{name:"base-refresh",size:"14"},null)},upload:{label:a("Public.Btn.Upload"),key:"upload",icon:()=>R(d,{name:"file-upload",size:"16"},null)},create:{label:a("file.contextMenu.newFolderFile"),key:"create",icon:()=>R(d,{name:"base-dir",size:"14"},null),children:[{label:a("file.contextMenu.newFolder"),key:"createDir",icon:()=>R(d,{name:"base-dir",size:"14"},null)},{label:a("file.contextMenu.newFile"),key:"createFile",icon:()=>R(d,{name:"base-file",size:"14"},null)}]},download:{label:a("Public.Btn.Download"),key:"download",icon:()=>R(d,{name:"file-download",size:"16"},null)},terminal:{label:a("file.contextMenu.terminal"),key:"terminal",icon:()=>R(d,{name:"file-terminal",size:"16"},null)},paste:{label:a("file.contextMenu.paste"),key:"paste",icon:()=>R(d,{name:"file-paste",size:"16"},null)},open:{label:a("file.fileOperation.open"),key:"open",icon:()=>R(d,{name:"file-open",size:"16"},null)},openNewWindow:{label:a("file.contextMenu.openInNewWindow"),key:"openNewWindow",icon:()=>R(d,{name:"file-new-window",size:"14"},null)},share:{label:a("file.contextMenu.externalShare"),key:"share",icon:()=>R(d,{name:"file-share",size:"16"},null)},unShare:{label:a("file.contextMenu.cancelShare"),key:"unShare",icon:()=>R(d,{name:"file-share",size:"16"},null)},favorite:{label:a("file.contextMenu.addToFavorites"),key:"favorite",icon:()=>R(d,{name:"file-favorite",size:"14"},null)},unfavorite:{label:a("file.contextMenu.removeFromFavorites"),key:"unfavorite",icon:()=>R(d,{name:"file-favorite",size:"14"},null)},rename:{label:a("file.fileOperation.rename"),key:"rename",icon:()=>R(d,{name:"file-rename",size:"16"},null)},attrs:{label:a("file.contextMenu.properties"),key:"attrs",icon:()=>R(d,{name:"file-attrs",size:"16"},null)},"new-window":{label:a("file.contextMenu.openInNewWindow"),key:"new-window",icon:()=>R(d,{name:"file-new-window",size:"14"},null)},top:{label:a("file.contextMenu.pinToTop"),key:"top",icon:()=>R(d,{name:"file-top",size:"18"},null)},"file-sync":{label:a("file.contextMenu.fileSync"),key:"file-sync",icon:()=>R(d,{name:"common-copy",size:"16"},null)},scan:{label:a("file.contextMenu.malwareScan"),key:"scan",icon:()=>R(d,{name:"file-scan",size:"16"},null)},duplicate:{label:a("file.contextMenu.createCopy"),key:"duplicate",icon:()=>R(d,{name:"common-copy",size:"16"},null)},preview:{label:a("Public.Btn.Preview"),key:"preview",icon:()=>R(d,{name:"drag-preview",size:"14"},null)},playVideo:{label:a("Public.Btn.Play"),key:"playVideo",icon:()=>R(d,{name:"file-play-video",size:"16"},null)}});function m(){s.value=!1}return e({filesOperation:function(t,e){t.preventDefault(),s.value=!1,o.value=e,S().then((()=>{s.value=!0,r.value=t.clientX,c.value=t.clientY}))}}),(t,e)=>{const a=St;return T(),I(a,{placement:"bottom-start",trigger:"manual",x:E(r),y:E(c),options:E(u),show:E(s),"on-clickoutside":m,onSelect:p},null,8,["x","y","options","show"])}}}),Ba={key:0,class:"operation-wrapper"},Ga={class:"mr-4px"},$a={class:"mr-4px"},Wa=u(D({__name:"FileOperation",props:{file:{}},setup(t){const e=t,a=k(),n=N("fileStore"),{isMiniScreen:i}=n,{t:l}=W(),s=k([{label:l("Public.Btn.Download"),value:"download",handle:()=>Xe("download",n)},{label:l("Public.Btn.Copy"),value:"copy",handle:()=>Xe("copy",n)},{label:l("file.fileOperation.cut"),value:"cut",handle:()=>Xe("cut",n)},{label:l("file.fileOperation.rename"),value:"rename",handle:()=>Xe("rename",n)},{label:l("file.fileOperation.PMSN"),value:"permission",handle:()=>Xe("permission",n)},{label:l("file.fileOperation.compress"),value:"compress",handle:()=>Xe("compression",n)},{label:l("Public.Btn.Delete"),value:"delete",handle:()=>Xe("del",n)}]);L((()=>s.value.map((t=>({label:t.label,key:t.value,handle:t.handle})))));const o=L((()=>{if(ia(e.file))return[{label:l("Public.Btn.Preview"),value:"preview",handle:()=>ie(n,e.file.path)},...s.value];if("dir"===e.file.type){const t=[...s.value],e=t.findIndex((t=>"download"==t.value));return t.splice(e,1),[{label:l("file.fileOperation.open"),value:"open",handle:()=>Xe("open",n)},...t]}if(t=e.file,["file-txt","file-json","file-html","file-css","file-js","file-php","file-doc","file-sh"].includes(aa(t.ext)))return[{label:l("Public.Btn.Edit"),value:"edit",handle:()=>Xe("edit",n)},...s.value];var t;if(la(e.file.ext)){const t=[...s.value];return t.splice(-2,0,{label:l("file.fileOperation.decompress"),value:"decompress",handle:()=>Xe("decompress",n)}),t}return s.value}));function r(t){!function(t,e){const{choosedKeys:n}=e;let i="empty";t.target.closest("tr")&&(i=n.value.length>1?"multiple":1==n.value.length?"single":"empty"),S((()=>a.value.filesOperation(t,i)))}(t,n)}return(t,e)=>{const n=Pt,l=d;return T(),j(O,null,[E(i)?(T(),I(n,{key:1,text:"","icon-placement":"right",onClick:r},{default:V((()=>[U("span",$a,K(t.$t("Public.Table.Action")),1),R(l,{name:"down",size:"14"})])),_:1})):(T(),j("div",Ba,[(T(!0),j(O,null,q(E(o),(t=>(T(),I(n,{key:t.value,text:"",type:"primary",onClick:it(t.handle,["stop"])},{default:V((()=>[A(K(t.label),1)])),_:2},1032,["onClick"])))),128)),R(n,{text:"","icon-placement":"right",onClick:r},{default:V((()=>[U("span",Ga,K(t.$t("Public.Btn.More")),1),R(l,{name:"down",size:"14"})])),_:1})])),R(Ka,{ref_key:"fileOperationContextRef",ref:a},null,512)],64)}}}),[["__scopeId","data-v-8101ae96"]]),Ha={key:1,class:"i-svg-spinners:90-ring-with-bg text-[#36ad6a] text-7"},Ya=D({__name:"CalcSize",props:{path:{}},setup(t){const{t:e}=W(),a=t,i=k(-1),l=k(!1);async function s(){-1==i.value&&(l.value=!0,i.value=await async function(t){try{return(await n.post("/files?action=GetDirSize",{path:t},{requestOptions:{isOriginalResult:!0}})).message}catch(e){return console.warn(e),"计算失败"}}(a.path),l.value=!1)}return(t,a)=>{const n=Pt;return E(l)?(T(),j("i",Ha)):(T(),I(n,{key:0,text:"",type:"primary",onClick:s},{default:V((()=>[A(K(-1!==E(i)?E(i):E(e)("file.tableFooter.calculate")),1)])),_:1}))}}});const Ja=u(D({__name:"FileTable",setup(t){const e=N("fileStore"),{sort:a,reverse:n,tableRef:i,fileList:l,choosedKeys:s,tableLoading:o,contextRef:r,currentFile:c,dataTableRef:u}=e,p=k({}),h=t=>t.nm,y=t=>({"data-key":t.nm,onContextmenu(t){t.preventDefault(),Zt(t,e)},onDblclick(){!function(t,e){const{currentPath:a}=t;"dir"==e.type?(a.value="/"==a.value?"/".concat(e.nm):a.value+"/"+e.nm,Ht(t)):ia(e)?ie(t,e.path):la(e.ext)?ca(t,"Decompress",(t=>t.value.open())):na(e.ext)?le(t,e):Be(t)}(e,t)},onMouseenter(){t.operation_show=!0},onMouseleave(){t.operation_show=!1}}),g=t=>s.value.includes(t.nm)?"active-row normal-tr-".concat(t.nm):"normal-tr-".concat(t.nm),{t:w}=W(),_=k([{type:"selection",width:40,className:"file-checkbox",cellProps:()=>({style:{cursor:"pointer"}})},{title:()=>w("file.fileName"),key:"name",width:"22%",minWidth:164,sorter:!0,sortOrder:!1,render:t=>t.isCreate?R("div",{class:"flex justify-between items-center gap-2.5 w-100%"},[R("div",{class:"flex justify-start items-center"},[R(ua,{ext:t.ext},null),R(Rt,{"input-props":{autocomplete:"on",name:"filename"},value:t.editName,"onUpdate:value":e=>t.editName=e,autofocus:!0,id:"createInput",onKeydown:t=>{"Enter"===t.key&&(t.preventDefault(),ce(e))},onBlur:()=>{ce(e)}},null)])]):R("div",{class:"flex cursor-pointer",onClick:()=>te(e,t)},[R("div",{class:"flex-1 flex items-center w-0 gap-4px"},[R("div",{class:"flex-1 w-0 flex items-center"},[R("div",{class:"flex items-center"},[R(ua,{ext:t.ext},null)]),R("div",{class:"min-w-0"},[R(xt,null,{default:()=>[R("span",{class:"hover:text-primary cursor-pointer"},[t.lnk?t.nm+t.lnk:t.nm])]})])]),R("div",{class:"flex items-center gap-4px"},[t.isShare?R(d,{name:"file-share",size:"16"},null):null,t.isFavorite?R(d,{name:"file-favorite",size:"16"},null):null])])])},{title:()=>w("file.protected"),key:"protection",width:"8%",minWidth:114,render:t=>R("div",{class:"flex justify-start gap-4px items-center cursor-pointer",onClick:()=>ee(e,t)},[R("span",{class:1===t.protected?"text-primary":""},[1==t.protected?w("file.protectedStatus"):w("file.unprotectedStatus")]),R(d,{size:"14",name:1==t.protected?"file-lock":"file-unlock",class:1===t.protected?"text-primary":"text-weak"},null)])},{title:"PMSN/Owner",key:"accept",width:"8%",minWidth:108,sorter:!0,sortOrder:!1,render:t=>"".concat(t.acc," / ").concat(t.user)},{title:()=>w("file.size"),key:"size",width:"7%",minWidth:90,sorter:!0,sortOrder:!1,render(t){if("dir"===t.type)return R(Ya,{path:t.path},null);{let a;return R(Pt,{type:"primary",text:!0},"function"==typeof(e=a=f(t.sz))||"[object Object]"===Object.prototype.toString.call(e)&&!st(e)?a:{default:()=>[a]})}var e}},{title:()=>w("file.modifyTime"),key:"mtime",width:"10%",minWidth:140,sorter:!0,sortOrder:!1,render:t=>m(t.mt)},{title:()=>w("file.remarks"),key:"rmk",minWidth:164,render:t=>R("div",{class:"min-w-134px min-h-26px",onMouseenter:()=>{return(e=t).remarks_hover=!0,void(e.editRemarks=e.rmk);var e},onMouseleave:()=>{var e;(e=t).isEditRemarks||(e.remarks_hover=!1)}},[t.remarks_hover?R(Rt,{value:t.editRemarks,"onUpdate:value":e=>t.editRemarks=e,size:"small",onClick:e=>{e.preventDefault(),t.isEditRemarks=!0,p.value=t,c.value=t,c.value.editRemarks=t.rmk,c.value.isEditRemarks=!0},onBlur:()=>{ce(e)},onKeydown:t=>{"Enter"===t.key&&(t.preventDefault(),ce(e))}},null):R("span",{title:t.rmk},[t.rmk])])},{title:()=>w("file.operation"),key:"operation",width:"22%",maxWidth:340,align:"right",render(t){if(t.operation_show||s.value.includes(t.nm))return R(Wa,{file:t},null)}}]),b=t=>{_.value.forEach((e=>{const a=e;a.key===t.columnKey?a.sortOrder=t.order:a.sortOrder=!1})),v(t.order)?(n.value="ascend"===t.order?"False":"True",a.value="".concat(t.columnKey)):(a.value="",n.value="False"),Ht(e)};function x(t){s.value=t}return lt(s,(()=>Re(e))),X((()=>{Yt(e),i.value.oncontextmenu=t=>{t.preventDefault(),t.target.closest("tr")||(s.value.length,r.value.filesOperation(t))}})),(t,e)=>{const a=Ft;return T(),j(O,null,[U("div",{ref_key:"tableRef",ref:i,class:"h-full relative"},[R(a,{class:"h-full",ref_key:"dataTableRef",ref:u,"flex-height":"",columns:E(_),"row-key":h,data:E(l),"row-class-name":g,"on-update:checked-row-keys":x,"row-props":y,"checked-row-keys":E(s),loading:E(o),"scrollbar-props":{trigger:"none"},"onUpdate:sorter":b},null,8,["columns","data","checked-row-keys","loading"])],512),R(Ka,{ref_key:"contextRef",ref:r},null,512)],64)}}}),[["__scopeId","data-v-14098e72"]]),Xa={class:"h-full overflow-auto"},Za=["onMouseenter","onMouseleave","onClick","data-key","onContextmenu","onDblclick"],Qa={class:"single-line-ellipsis"},tn=["onMouseenter","onMouseleave","onClick","data-key","onContextmenu"],en=u(D({__name:"CardList",setup(t){const e=N("fileStore"),{normalCardList:a,cardRectArr:n,fileList:i,choosedKeys:l,tableLoading:s,currentFile:o}=e,r=k(),c=k(),u=k();lt(o,(t=>{(null==t?void 0:t.isCreate)&&S((()=>{const t=c.value.querySelector("input");t&&(t.focus(),t.select())}))}));const p=L((()=>i.value.map((t=>(l.value.includes(t.nm)?t.card_choosed=!0:t.card_choosed=!1,t)))));async function d(t){t.isRenameForCard||(l.value=[t.nm],"dir"===t.type&&await Ge(e))}function f(t){const e=[];for(let a=0;a<n.value.length;a++){const[[i,l]]=Object.entries(n.value[a]);Ut(t,l.getClientRects()[0])&&e.push(i)}l.value=e}function m(t,i){!function(){a.value=document.querySelectorAll(".file-item");const t=[];for(let e=0;e<a.value.length;e++){const n=a.value[e].dataset.key;t.push({[n]:a.value[e]})}n.value=t}(),"INPUT"==t.target.nodeName?i.m_flag.value=!1:(i.m_flag.value=!0,ce(e))}function v(t){if(t.target.closest("div.file-item")){const e=t.target.closest("div.file-item").dataset.key;if(l.value.includes(e))return;l.value=[e]}else l.value=[]}function y(t,e){l.value.length>1?r.value.filesOperation(t,"multiple"):(1==l.value.length||(l.value=[e.nm]),r.value.filesOperation(t,"single"))}return X((()=>{u.value=Vt(c,f,m),c.value.oncontextmenu=t=>{t.preventDefault(),t.target.closest("div.file-item")||(l.value.length,r.value.filesOperation(t))}})),ot((()=>{c.value.oncontextmenu=null})),(t,a)=>{const n=Dt,i=Rt,o=h;return T(),j("div",Xa,[R(o,{show:E(s),class:"h-full"},{default:V((()=>[U("div",{class:"card-list",ref_key:"cardListRef",ref:c,onContextmenu:v},[(T(!0),j(O,null,q(E(p),(t=>(T(),j(O,{key:t.nm},[t.isRenameForCard||t.isCreate?t.isRenameForCard||t.isCreate?(T(),j("div",{key:1,class:M(["file-item",{active:t.card_hover||t.card_choosed}]),onMouseenter:e=>E(qt)(t),onMouseleave:e=>E(At)(t),onClick:e=>d(t),"data-key":t.nm,onContextmenu:e=>y(e,t)},[R(ua,{ext:t.ext,size:"large"},null,8,["ext"]),R(i,{value:t.editName,"onUpdate:value":e=>t.editName=e,size:"small",autofocus:"",autoselect:"",onClick:it((()=>!1),["stop"]),onKeydown:a[0]||(a[0]=nt((()=>E(ce)(E(e))),["enter"]))},null,8,["value","onUpdate:value"])],42,tn)):Z("",!0):(T(),I(n,{key:0,trigger:"hover",placement:"bottom"},{trigger:V((()=>[U("div",{class:M(["file-item",{active:t.card_hover||t.card_choosed}]),onMouseenter:e=>E(qt)(t),onMouseleave:e=>E(At)(t),onClick:e=>d(t),"data-key":t.nm,onContextmenu:e=>y(e,t),onDblclick:a=>function(t){t.isRenameForCard||"dir"!==t.type&&(l.value=[t.nm],Be(e))}(t)},[R(ua,{ext:t.ext,size:"large"},null,8,["ext"]),U("span",Qa,K(t.nm),1)],42,Za)])),default:V((()=>[A(" "+K(t.nm),1)])),_:2},1024))],64)))),128))],544)])),_:1},8,["show"]),R(Ka,{ref_key:"contextRef",ref:r},null,512)])}}}),[["__scopeId","data-v-ae5d241c"]]),an={class:"flex items-center justify-between"},nn={class:"flex justify-start items-center whitespace-pre"},ln={key:1,class:"i-svg-spinners:90-ring-with-bg text-7 text-primary"},sn=D({__name:"FileTableFooter",setup(t){const{t:e}=W(),a=N("fileStore"),{dirNums:i,fileNums:l,page:s,size:o,total:r,currentPath:c,currentDirSize:u}=a,p=k(!1),d=[100,500,1e3,1500,2e3];async function f(){try{p.value=!0;const t=await n.post("/files?action=GetDirSize",{path:c.value},{requestOptions:{isOriginalResult:!0}});u.value=t.message}catch(t){console.warn(t)}finally{p.value=!1}}return(t,n)=>{const c=Pt,m=Et;return T(),j("div",an,[U("div",nn,[A(K(E(e)("file.tableFooter.summary",{dirNum:E(i),fileNum:E(l)}))+" ",1),E(p)?(T(),j("i",ln)):(T(),j(O,{key:0},[-1===E(u)?(T(),I(c,{key:0,type:"primary",text:"",onClick:f},{default:V((()=>[A(K(E(e)("file.tableFooter.calculate")),1)])),_:1})):(T(),I(c,{key:1,text:"",type:"primary"},{default:V((()=>[A(K(E(u)),1)])),_:1}))],64))]),R(m,{page:E(s),"onUpdate:page":n[0]||(n[0]=t=>x(s)?s.value=t:null),"page-size":E(o),"onUpdate:pageSize":n[1]||(n[1]=t=>x(o)?o.value=t:null),"item-count":E(r),"page-sizes":d,onRefresh:n[2]||(n[2]=()=>E(Ht)(E(a)))},null,8,["page","page-size","item-count"])])}}}),on={class:"flex flex-col gap-16px h-full p-16px overflow-hidden"},rn=D({__name:"main",props:{path:{default:"/"},view:{default:"list"}},emits:["currentPathChange","viewChange","rendered"],setup(t,{emit:e}){const a=t,n=k(),i=function(){const t=k(),e=k("list"),a=k("/www"),n=k([]),i=k(!1),l=k([]),s=k([]),o=k([]),c=k(),u=k(),p=k(),d=k([]),f=k([]),m=k({url:"http://",path:a.value,filename:""}),v=k({reference:"",per:0,speed:"0",used:"0",except:"--",total:0}),h=k(!1),y=k([]),g=k({text:"",exts:"html,php",path:a.value,is_subdir:0,mode:0,isword:0,iscase:1,noword:0}),w=k({}),_=k({files:0,times:0}),b=k([]),x=k([{label:_a("file.favoriteListModal.management"),key:"management",icon:"settings"}]),C=k([]),P=k([]),S=k({back_sub_dir:1,path:"",remark:""}),z=wa,R=ha,O=ya,D=ga,T={PasteConfirm:()=>F((()=>r((()=>import("./PasteConfirm.js?v=1763625242172")),__vite__mapDeps([17,9,2,3,5,6,1,4,8,7,10,18,19,11,12,13,14,15])))),PasteSingleConfirm:()=>F((()=>r((()=>import("./PasteSingleConfirm.js?v=1763625242172")),__vite__mapDeps([20,9,2,3,5,6,1,4,8,7,10,21,11,12,13,14,15])))),UploadFile:()=>F((()=>r((()=>import("./UploadFile.js?v=1763625242172")),__vite__mapDeps([22,9,2,3,5,6,1,4,8,7,10,11,12,13,14,15,23])))),RemoteDownload:()=>F((()=>r((()=>import("./RemoteDownload.js?v=1763625242172")),__vite__mapDeps([24,9,2,3,5,6,1,4,8,7,10,21,11,12,13,14,15])))),SearchFileContent:()=>F((()=>r((()=>import("./SearchFileContent.js?v=1763625242172")),__vite__mapDeps([25,9,2,3,5,6,1,4,8,7,10,26,27,11,12,13,14,15,28])))),FavoriteList:()=>F((()=>r((()=>import("./FavoriteList.js?v=1763625242172")),__vite__mapDeps([29,9,2,3,5,6,1,4,8,7,10,11,12,13,14,15])))),ShareList:()=>F((()=>r((()=>import("./ShareList.js?v=1763625242172")),__vite__mapDeps([30,9,2,3,5,6,1,4,8,7,10,31,21,11,12,13,14,15])))),Backup:()=>F((()=>r((()=>import("./Backup.js?v=1763625242172")),__vite__mapDeps([32,9,2,3,5,6,1,4,8,7,10,26,27,11,12,13,14,15])))),Recycle:()=>F((()=>r((()=>import("./Recycle.js?v=1763625242172")),__vite__mapDeps([33,9,2,3,5,6,1,4,8,7,10,34,35,36,11,12,13,14,15,37])))),Terminal:()=>F((()=>r((()=>import("./Terminal.js?v=1763625242172")),__vite__mapDeps([38,9,2,3,5,6,1,4,8,7,10,39,40,41,42,43])))),Softlink:()=>F((()=>r((()=>import("./SoftLink.js?v=1763625242172")),__vite__mapDeps([44,9,2,3,5,6,1,4,8,7,10,21,26,27,11,12,13,14,15])))),Share:()=>F((()=>r((()=>import("./Share.js?v=1763625242172")),__vite__mapDeps([45,9,2,3,5,6,1,4,8,7,10,21,46,31,11,12,13,14,15])))),Permission:()=>F((()=>r((()=>import("./Permission.js?v=1763625242172")),__vite__mapDeps([47,9,2,3,5,6,1,4,8,7,10,11,12,13,14,15,48])))),Properties:()=>F((()=>r((()=>import("./Properties.js?v=1763625242172")),__vite__mapDeps([49,9,2,3,5,6,1,4,8,7,10,50,51,11,12,13,14,15,52])))),Del:()=>F((()=>r((()=>import("./Del.js?v=1763625242172")),__vite__mapDeps([53,18,1,2,3,4,5,6,7,8,19,9,10,11,12,13,14,15,54])))),Compression:()=>F((()=>r((()=>import("./Compression.js?v=1763625242172")),__vite__mapDeps([55,9,2,3,5,6,1,4,8,7,10,21,26,27,11,12,13,14,15])))),Decompress:()=>F((()=>r((()=>import("./Decompress.js?v=1763625242172")),__vite__mapDeps([56,9,2,3,5,6,1,4,8,7,10,21,11,12,13,14,15])))),AceEditor:()=>F((()=>r((()=>import("./index183.js?v=1763625242172")),__vite__mapDeps([57,2,3,1,4,5,6,7,8,58]))))},j=G(null),M=k(),E=k(!1),N=k(!1),I=k([]),V=k(!1),U=k(!1),q=k(!1),A=k(!1),K=k(),B=k(!1),$=L((()=>n.value.filter((t=>ia(t))).map((t=>t.path)))),W=L((()=>n.value.filter((t=>na(t.ext))).map((t=>({path:t.path,name:t.nm}))))),H=k(""),Y=k({path:"",name:""}),J=k(!1),X=k(!1),Z=k(1),Q=k(0),tt=k(0),et=k(1),at=k(100),nt=k(""),it=k("False"),lt=k(0),st=k(null),ot=k(),rt=k([]),ct=k(1),ut=k(0),pt=k(-1),dt=k();return{mainRef:t,filesView:e,currentPath:a,fileList:n,tableLoading:i,normalTrList:l,trRectArr:s,choosedKeys:o,tableRef:c,dataTableRef:u,contextRef:p,normalCardList:d,cardRectArr:f,downloadFileFormData:m,downloadProgressData:v,downloadProgressShow:h,resourceManagerWindow:y,searchFileContentFormData:g,resetSearchFileContentFormData:function(){g.value={text:"",exts:"html,php",path:a.value,is_subdir:0,mode:0,isword:0,iscase:1,noword:0}},searchRes:w,searchStatistics:_,favoriteList:b,favoriteOptions:x,resetFavoriteOptions:function(){x.value=[{label:_a("file.favoriteListModal.management"),key:"management",icon:"settings"}]},shareList:C,backupList:P,backupForm:S,fileOperationFlag:z,fileCopyCache:R,waitForPaste:O,copiedFile:D,dynamicCmptObj:T,dynamicCmpt:j,dynamicCmptRef:M,fileRecycle:E,menuShow:N,uploadFileList:I,uploadShow:V,uploadComplete:U,startUpload:q,fileConflictShow:A,optionToolsRef:K,isMiniScreen:B,imgWaitPreview:$,videoWaitPreview:W,currentPreviewImg:H,currentPreviewVideo:Y,previewShow:J,previewVideoShow:X,operationType:Z,dirNums:Q,fileNums:tt,page:et,size:at,sort:nt,reverse:it,total:lt,currentFile:st,choosePathRef:ot,diskMountPoint:rt,shareListPage:ct,shareListTotal:ut,currentDirSize:pt,dragUploadRef:dt}}(),l=rt();ct("fileStore",i);const{dynamicCmpt:s,dynamicCmptRef:o,currentPath:c,filesView:u,choosedKeys:p,mainRef:d,currentFile:f,dragUploadRef:m}=i;c.value=a.path,u.value=a.view;const v=e;function h(t){v("viewChange",{view:t,currentPath:c.value})}return lt(c,(t=>{sessionStorage.setItem("currentPath",t),v("currentPathChange",t)})),H((()=>{Ht(i),document.onkeydown=async t=>{var e,a,n;const s=t.target;if("INPUT"===s.tagName||"TEXTAREA"===s.tagName)return;if("/files"!=l.path)return;if((null==(e=f.value)?void 0:e.isCreate)||(null==(a=f.value)?void 0:a.isEditRemarks)||(null==(n=f.value)?void 0:n.isRename))return;if(!document.querySelector(".aceEditors")){if(t.ctrlKey&&"c"===t.key){if(0==p.value.length)return;await We(i)}if(t.ctrlKey&&"v"===t.key&&Ye(i),t.ctrlKey&&"x"===t.key){if(0==p.value.length)return;He(i)}}}})),ut((()=>{Ht(i)})),pe(i),X((()=>v("rendered",c.value))),(t,e)=>{const a=y;return T(),j("div",{ref_key:"mainRef",ref:d,class:"flex-1 overflow-hidden"},[U("div",on,[U("div",null,[R(Aa)]),R(a),U("div",null,[R(La,{"files-view":E(u),"onUpdate:filesView":e[0]||(e[0]=t=>x(u)?u.value=t:null),onViewChange:h},null,8,["files-view"])]),U("div",{ref_key:"listRef",ref:n,class:"flex-1 overflow-hidden",tabindex:"0"},["list"==E(u)?(T(),I(Ja,{key:0})):"card"==E(u)?(T(),I(en,{key:1})):Z("",!0)],512),R(sn)]),(T(),I(pt(E(s)),{ref_key:"dynamicCmptRef",ref:o},null,512)),R(Ca,{ref_key:"dragUploadRef",ref:m},null,512),R(za),R(va)],512)}}}),cn={class:"tabs"},un=["onClick"],pn={class:"flex justify-start gap-5"},dn={class:"tab-tit"},fn={class:"tab-tit"},mn=u(D({__name:"index",setup(t){const e=k(null),{mainHeight:a}=dt(g()),n=L((()=>a.value-16-16)),i=k(),s=k(),o=k(),r=k(!1),c={id:"tab-0",title:"www",path:"/www",view:"list"},u=ft("file-tabs",[Lt(c)]),p=ft("file-tabs-active","tab-0"),f=ft("file-tabs-view","list");lt(p,(t=>{const e=u.value.find((e=>e.id==t));e&&(f.value=e.view)}),{immediate:!0});const m=L((()=>{const t=u.value.find((t=>t.id==p.value));return t?t.path:"tab-0"}));function v(t="",e=""){if(u.value.length>=14)return void l.warning("Only 14 tags can be opened at most");const a="tab-".concat((new Date).getTime()),n=Lt(c);n.id=a,t&&(n.path=t),e&&(n.title=e),u.value.push(n),p.value=a}function h(t){const e=t.split("/").slice(-1)[0];u.value.forEach((a=>{a.id==p.value&&(a.path=t,a.title=""==e?"/":e)}))}function y({view:t,path:e}){f.value=t,u.value.forEach((a=>{a.id==p.value&&(a.path=e,a.view=t)}))}function x(t){"left"==t?o.value.scrollLeft-=100:"right"==t&&(o.value.scrollLeft+=100)}return ct("file-provide",{addTab:v}),X((()=>{o.value.addEventListener("mousewheel",(t=>{t.preventDefault(),o.value.scrollLeft+=t.deltaY}))})),function(){const t=_("Path");if(t){const e="tab-".concat((new Date).getTime());u.value.push({id:e,title:t,path:t,view:"list"});const a=u.value.find((e=>e.path==t));a&&(p.value=a.id)}b("Path")}(),X((async()=>{await w("/static/ace/styles/icons.css?v=1763625242172",e.value),It()})),(t,a)=>{const l=d,c=Dt,g=Tt;return T(),j("div",{ref_key:"fileRef",ref:e,id:"file-main",class:"p-16px"},[R(g,{style:B({height:E(n)+"px"}),"content-style":{display:"flex",flexDirection:"column",overflow:"hidden"}},{default:V((()=>[U("div",cn,[U("div",{class:M(["tabs-scroll",{"has-scroll":E(r)}]),ref_key:"tabScrollRef",ref:i},[E(r)?(T(),j("div",{key:0,class:"left",onClick:a[0]||(a[0]=t=>x("left"))},a[3]||(a[3]=[U("i",{class:"i-tdesign:caret-left text-7"},null,-1)]))):Z("",!0),E(r)?(T(),j("div",{key:1,class:"right",onClick:a[1]||(a[1]=t=>x("right"))},a[4]||(a[4]=[U("i",{class:"i-tdesign:caret-right text-7"},null,-1)]))):Z("",!0),U("div",{class:"scroll-container",ref_key:"tabScrollContainerRef",ref:o},[U("div",{class:"tabs-wrapper",ref_key:"tabWrapperRef",ref:s},[(T(!0),j(O,null,q(E(u),(t=>(T(),I(c,{placement:"bottom",key:t.id},{trigger:V((()=>[U("div",{class:M(["tab-item",{active:t.id==E(p)}]),onClick:e=>{return a=t.id,void(p.value=a);var a}},[U("div",pn,[R(l,{name:"file-dir",size:"18"}),U("span",dn,K(t.title),1)]),t.id==E(p)&&E(u).length>1?(T(),I(l,{key:0,name:"base-error",size:"18",color:"#bbb",onClick:e=>function(t){if(1==u.value.length)return void(p.value=u.value[0].id);const e=u.value.findIndex((e=>e.id==t));u.value.splice(e,1),setTimeout((()=>p.value=u.value[u.value.length-1].id),50)}(t.id)},null,8,["onClick"])):Z("",!0)],10,un)])),default:V((()=>[U("span",fn,K(t.title),1)])),_:2},1024)))),128)),U("div",{class:"tab-item add",onClick:a[2]||(a[2]=t=>v())},[R(l,{name:"base-add",size:"18",color:"#ccc"})])],512)],512)],2)]),(T(),I(mt,null,[(T(),I(pt(rn),{key:E(p),onCurrentPathChange:h,path:E(m),view:E(f),onViewChange:y},null,40,["path","view"]))],1024))])),_:1},8,["style"])],512)}}}),[["__scopeId","data-v-dbb99f65"]]),vn=Object.freeze(Object.defineProperty({__proto__:null,default:mn},Symbol.toStringTag,{value:"Module"}));export{Ve as B,Ua as C,ua as F,Ie as a,pe as b,Ne as c,aa as d,Oe as e,ra as f,Ht as g,Gt as h,Bt as i,ve as j,qe as k,Ae as l,ue as m,de as n,Nt as o,vn as p,sa as r,oa as u};
