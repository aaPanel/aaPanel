System.register(["./page_layout-legacy.js?v=1764830988434","./index-legacy.js?v=1764830988434","./index.vue_vue_type_script_setup_true_lang-legacy5.js?v=1764830988434","./index.vue_vue_type_script_setup_true_lang-legacy7.js?v=1764830988434","./index.vue_vue_type_script_setup_true_lang-legacy9.js?v=1764830988434","./public-legacy.js?v=1764830988434","./index.vue_vue_type_script_setup_true_lang-legacy8.js?v=1764830988434","./index-legacy107.js?v=1764830988434","./index.vue_vue_type_script_setup_true_lang-legacy.js?v=1764830988434","./theme-monokai-legacy.js?v=1764830988434","./vue-legacy.js?v=1764830988434","./naive-legacy.js?v=1764830988434","./organization-legacy.js?v=1764830988434"],function(e,t){"use strict";var a,n,l,i,r,o,s,d,p,c,u,_,g,b,m,x,y,h,v,w,C,f,k,S,T,j,U,$,P,O,E,R,q,D,L,N,z,A,I,J,M,F,V,K,W,B,G,H;return{setters:[e=>{a=e.aD,n=e.i,l=e.A,i=e.a9,r=e.d,o=e.y,s=e.a,d=e.x},e=>{p=e._},e=>{c=e._},e=>{u=e._},e=>{_=e._},e=>{g=e._,b=e.c,m=e.f,x=e.e,y=e.a,h=e.d,v=e.h},e=>{w=e._},e=>{C=e._},e=>{f=e._},e=>{k=e.V},e=>{S=e.k,T=e.a0,j=e.P,U=e.r,$=e.e,P=e.R,O=e.V,E=e.W,R=e.a3,q=e.U,D=e.a2,L=e.an,N=e.S,z=e.a4,A=e.N,I=e.ak,J=e.j,M=e._},e=>{F=e.dR,V=e.au,K=e.dV,W=e.da,B=e.aC,G=e.dS},e=>{H=e.g}],execute:function(){const{t:Q}=n.global,X=e=>a.post("/crontab/script/create_script",{data:JSON.stringify(e)},{requestOptions:{loading:Q("Security.Api.Index_4"),successMessage:!0}}),Y=e=>a.post("/crontab/script/modify_script",{data:JSON.stringify(e)},{requestOptions:{loading:Q("Crontab.Api.index_5"),successMessage:!0}}),Z=(e("e",e=>a.post("/crontab/script/test_script",{data:JSON.stringify(e)},{requestOptions:{loading:Q("Crontab.Api.index_4"),errorMessage:!1}})),e("g",e=>a.post("/crontab/script/get_script_logs",{data:JSON.stringify(e)})),(e,t=!0)=>a.post("/crontab/script/remove_script",e,{requestOptions:{loading:t?Q("Security.Api.Index_3"):"",successMessage:t}})),ee={class:"p-20px"},te=S({__name:"index",props:{data:{}},setup(e,{expose:t}){const a=l(),{theme:n}=T(a),{t:i}=j(),r=e,{isEdit:o,row:s,id:d,getList:p}=r.data,c=U(null),u=[{value:"string",label:i("Crontab.Script.index_9")},{value:"int",label:i("Crontab.Script.index_10")},{value:"float",label:i("Crontab.Script.index_11")}],_=[{value:"1",label:i("Crontab.Script.index_12")},{value:"0",label:i("Crontab.Script.index_13")}],b={name:{required:!0,trigger:["blur","change"],message:i("Crontab.Planned.index_49")},custom:{required:!0,trigger:["blur","change"],message:i("Crontab.arrange.index_28")},argsTitle:{required:!0,trigger:["blur","change"],message:i("Security.Conf.Index_28")},argsExplain:{required:!0,trigger:["blur","change"],message:i("Security.Conf.Index_28")}},m=$({name:"",type:"string",argsType:"0",argsTitle:"",argsExplain:"",custom:"",remark:""}),x=()=>({name:m.name,return_type:m.type,is_args:m.argsType,ps:m.remark,script:m.custom,type_id:d,args_title:m.argsTitle,args_ps:m.argsExplain,...o?{script_id:s?.script_id}:null});return t({onConfirm:async()=>{await(c.value?.validate()),o?await Y(x()):await X(x()),p?.()}}),o&&s&&(m.name=s.name,m.type=s.return_type,m.argsType=s.is_args.toString(),m.argsTitle=s.args_title,m.argsExplain=s.args_ps,m.custom=s.script,m.remark=s.ps),(e,t)=>{const a=V,l=F,i=K,r=W,o=f,s=g;return O(),P("div",ee,[E(o,{ref_key:"formRef",ref:c,model:q(m),rules:b},{default:R(()=>[E(l,{label:e.$t("Docker.Compose.form.index_3"),path:"name"},{default:R(()=>[E(a,{class:"w-360px!",value:q(m).name,"onUpdate:value":t[0]||(t[0]=e=>q(m).name=e),placeholder:e.$t("Crontab.Planned.index_49")},null,8,["value","placeholder"])]),_:1},8,["label"]),E(l,{label:e.$t("Crontab.Script.index_2")},{default:R(()=>[E(i,{class:"w-150px!",value:q(m).type,"onUpdate:value":t[1]||(t[1]=e=>q(m).type=e),options:u},null,8,["value"])]),_:1},8,["label"]),E(r,null,{default:R(()=>[E(l,{label:e.$t("Crontab.Script.index_5")},{default:R(()=>[E(i,{class:"w-80px!",value:q(m).argsType,"onUpdate:value":t[2]||(t[2]=e=>q(m).argsType=e),options:_},null,8,["value"])]),_:1},8,["label"]),"1"==q(m).argsType?(O(),D(l,{key:0,path:"argsTitle"},{default:R(()=>[E(a,{class:"w-110px!",value:q(m).argsTitle,"onUpdate:value":t[3]||(t[3]=e=>q(m).argsTitle=e),placeholder:e.$t("Crontab.Script.index_51")},null,8,["value","placeholder"])]),_:1})):L("",!0),"1"==q(m).argsType?(O(),D(l,{key:1,path:"argsExplain"},{default:R(()=>[E(a,{class:"w-145px!",value:q(m).argsExplain,"onUpdate:value":t[4]||(t[4]=e=>q(m).argsExplain=e),placeholder:e.$t("Crontab.Script.index_52")},null,8,["value","placeholder"])]),_:1})):L("",!0)]),_:1}),E(l,{label:" ",path:"custom"},{default:R(()=>[E(q(k),{theme:"dark"===q(n)?"monokai":"chrome",value:q(m).custom,"onUpdate:value":t[5]||(t[5]=e=>q(m).custom=e),class:"w-360px border-solid h-150px border-1px border-#ccc rounded-4px leading-[1.4]"},null,8,["theme","value"])]),_:1}),E(l,{label:e.$t("Docker.Template.add.index_3")},{default:R(()=>[E(a,{class:"w-360px!",value:q(m).remark,"onUpdate:value":t[6]||(t[6]=e=>q(m).remark=e),placeholder:e.$t("Crontab.arrange.index_27")},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"]),E(s,null,{default:R(()=>[N("li",null,z(e.$t("Crontab.Script.index_6")),1),N("li",null,z(e.$t("Crontab.Script.index_7")),1),N("li",null,z(e.$t("Crontab.Script.index_8")),1)]),_:1})])}}}),ae=S({__name:"index",setup(e){const n=M(()=>s(()=>t.import("./index-legacy124.js?v=1764830988434"),void 0)),l=M(()=>s(()=>t.import("./index-legacy125.js?v=1764830988434"),void 0)),g=M(()=>s(()=>t.import("./custom-legacy.js?v=1764830988434"),void 0)),f=U("1"),k=U([]),{t:S}=j(),T=()=>{Y.data.isEdit=!1,Y.data.id=f.value,Y.show=!0},{keys:P,table:L,columns:N}=b([{type:"selection",width:40},{key:"name",title:S("Site.TableRow.index_2")},{key:"script_type",title:S("Ftp.Table.index_3")},{key:"return_type",title:S("Crontab.Script.index_2")},{key:"ps",title:S("Docker.Template.add.index_3")},{key:"name",title:S("Docker.Container.index_9"),render:e=>i(e.create_time)},{key:"name",title:S("Crontab.Planned.index_12"),render:e=>i(e.last_exec_time)},m({title:S("Public.Table.Operation"),width:240,options:e=>[{label:S("Docker.LocalImage.pull.index_12"),onClick:()=>{if(e.is_args)return ne.show=!0,void(ne.data.row=e);X("",e)}},{label:S("Site.TableOP.index_7"),onClick:()=>{Y.title=S("Crontab.arrange.index_38"),Y.data.isEdit=!0,Y.data.row=e,Y.data.id=f.value,Y.show=!0}},{label:S("Ftp.Table.index_15"),onClick:()=>{ee.title=S("Crontab.Planned.index_6",[e.name]),ee.data.id=e.script_id,ee.show=!0}},{label:S("Public.Btn.Del"),onClick:()=>{y({title:`${S("Ftp.Table.index_10")} ${e.name} ${S("Crontab.Script.index_3")}`,content:S("Crontab.Script.index_4"),onConfirm:async()=>{await Z({script_id:e.script_id}),Q()}})}}]})]),F=[{key:"delete",type:"confirm",label:S("Crontab.Script.index_42"),confirm:{title:S("Crontab.Planned.index_16",[S("Crontab.Script.index_42")]),desc:S("Crontab.Planned.index_17",[S("Crontab.Script.index_42")]),columns:[N.value[1]],api:e=>Z({script_id:e.script_id},!1),done:()=>{Q()}}}],V=$({p:1,rows:10,search:""}),{loading:K,setLoading:W}=h(!0);(async()=>{const{message:e}=await H();d(e)&&(k.value=e.map(e=>({label:e.name,key:e.type_id.toString()})))})();const Q=async()=>{try{W(!0);const{message:t}=await(e=A({...V,type_id:f.value}),a.post("/crontab/script/get_script_list",{data:JSON.stringify(e)}));r(t)?(L.data=t.data.map(e=>({...e,id:e.script_id})),L.total=o(t.page)):(L.data=[],L.total=0)}finally{P.value=[],W(!1)}var e};Q();const X=(e,t)=>{y({title:S("Crontab.Planned.index_13"),content:S("Crontab.arrange.index_1",[t.name]),onConfirm:()=>{ae.data.row=t,ae.data.args=e,ae.show=!0}})},Y=x(S("Crontab.Script.index_1"),{getList:Q}),ee=x(),ae=x(S("Crontab.Planned.index_23"),{getList:Q}),ne=x(S("Crontab.Script.index_44"),{callback:X});return(e,t)=>{const a=C,i=B,r=w,o=v,s=_,d=u,b=c,m=p,x=G;return O(),D(x,{class:"p-16px"},{default:R(()=>[E(a,{value:q(f),"onUpdate:value":[t[0]||(t[0]=e=>I(f)?f.value=e:null),Q],options:q(k)},null,8,["value","options"]),E(b,{feedback:!0},{toolsLeft:R(()=>[E(i,{type:"primary",onClick:T},{default:R(()=>[J(z(e.$t("Crontab.Script.index_1")),1)]),_:1})]),toolsRight:R(()=>[E(r,{value:q(V).search,"onUpdate:value":t[1]||(t[1]=e=>q(V).search=e),placeholder:e.$t("WP.Sets.index_15"),onSearch:Q},null,8,["value","placeholder"])]),table:R(()=>[E(o,{"checked-row-keys":q(P),"onUpdate:checkedRowKeys":t[2]||(t[2]=e=>I(P)?P.value=e:null),loading:q(K),data:q(L).data,columns:q(N)},null,8,["checked-row-keys","loading","data","columns"])]),pageLeft:R(()=>[E(s,{"checked-row-keys":q(P),"onUpdate:checkedRowKeys":t[3]||(t[3]=e=>I(P)?P.value=e:null),data:q(L).data,options:F},null,8,["checked-row-keys","data"])]),pageRight:R(()=>[E(d,{page:q(V).p,"onUpdate:page":t[4]||(t[4]=e=>q(V).p=e),"page-size":q(V).rows,"onUpdate:pageSize":t[5]||(t[5]=e=>q(V).rows=e),"item-count":q(L).total,onRefresh:Q},null,8,["page","page-size","item-count"])]),_:1}),E(m,{show:q(Y).show,"onUpdate:show":t[6]||(t[6]=e=>q(Y).show=e),title:q(Y).title,data:q(Y).data,width:600,footer:!0,component:te},null,8,["show","title","data"]),E(m,{show:q(ae).show,"onUpdate:show":t[7]||(t[7]=e=>q(ae).show=e),title:q(ae).title,data:q(ae).data,width:400,"min-height":200,component:q(l)},null,8,["show","title","data","component"]),E(m,{show:q(ne).show,"onUpdate:show":t[8]||(t[8]=e=>q(ne).show=e),title:q(ne).title,data:q(ne).data,width:400,footer:!0,component:q(g)},null,8,["show","title","data","component"]),E(m,{show:q(ee).show,"onUpdate:show":t[9]||(t[9]=e=>q(ee).show=e),title:q(ee).title,data:q(ee).data,width:800,"min-height":550,footer:!1,component:q(n)},null,8,["show","title","data","component"])]),_:1})}}}),ne=Object.freeze(Object.defineProperty({__proto__:null,default:ae},Symbol.toStringTag,{value:"Module"}));e("i",ne)}}});
