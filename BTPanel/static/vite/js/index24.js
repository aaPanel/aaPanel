const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/index142.js?v=1769066082311","js/index.vue_vue_type_script_setup_true_lang.js?v=1769066082311","js/vue.js?v=1769066082311","js/__commonjsHelpers__.js?v=1769066082311","js/naive.js?v=1769066082311","js/common.js?v=1769066082311","js/page_layout.js?v=1769066082311","js/public.js?v=1769066082311","css/public.css?v=1769066082311","css/page_layout.css?v=1769066082311","js/index.vue_vue_type_script_setup_true_lang2.js?v=1769066082311","js/index103.js?v=1769066082311","css/index15.css?v=1769066082311","js/index139.js?v=1769066082311","js/index140.js?v=1769066082311","css/index26.css?v=1769066082311","js/soft.js?v=1769066082311","js/site.js?v=1769066082311"])))=>i.map(i=>d[i]);
import{i as a,o as e,aW as t,aX as s,d as o,h as n,aY as i,aO as l,aR as d,aS as r,aV as p,x as u,y as _,q as c,a as m,m as h,aU as b}from"./page_layout.js?v=1769066082311";import{_ as g}from"./index.js?v=1769066082311";import{_ as x}from"./index.vue_vue_type_script_setup_true_lang5.js?v=1769066082311";import{_ as w}from"./index.vue_vue_type_script_setup_true_lang7.js?v=1769066082311";import{_ as f}from"./index.vue_vue_type_script_setup_true_lang9.js?v=1769066082311";import{s as y,d as k,_ as v,e as D,c as j,v as C,f as R,a as U,h as $,w as z}from"./public.js?v=1769066082311";import{_ as B}from"./index.vue_vue_type_script_setup_true_lang8.js?v=1769066082311";import{_ as I}from"./index138.js?v=1769066082311";import{u as S,a as W,b as L,c as P,_ as O,d as A,e as V,g as q,h as E}from"./index139.js?v=1769066082311";import{g as H}from"./hooks.js?v=1769066082311";import{W as K,j as T,u as M,k as N,P as X,r as Y,e as F,R as G,V as J,a3 as Q,S as Z,U as aa,N as ea,a4 as ta,w as sa,a2 as oa,ak as na,an as ia,_ as la}from"./vue.js?v=1769066082311";import{_ as da}from"./index.vue_vue_type_script_setup_true_lang.js?v=1769066082311";import{_ as ra}from"./index.vue_vue_type_script_setup_true_lang2.js?v=1769066082311";import{dS as pa,dk as ua,dT as _a,aC as ca}from"./naive.js?v=1769066082311";import"./common.js?v=1769066082311";import"./__commonjsHelpers__.js?v=1769066082311";import"./index.vue_vue_type_script_setup_true_lang6.js?v=1769066082311";import"./php.js?v=1769066082311";import"./soft.js?v=1769066082311";import"./site.js?v=1769066082311";import"./index140.js?v=1769066082311";import"./index103.js?v=1769066082311";const{t:ma}=a.global;const ha={class:"px-20px pt-24px pb-8px"},ba={class:"w-320px"},ga=N({__name:"index",setup(a,{expose:e}){const{t:i}=X(),l=Y(null),d=F({password:""}),r={password:{required:!0,message:i("Database.tools.index_65"),trigger:"blur"}},{loading:p,setLoading:u}=k();return(async()=>{try{u(!0);const{message:a}=await s();o(a)&&(d.password=n(a.root)?a.root:"")}finally{u(!1)}})(),e({onConfirm:async({hide:a})=>{var e;try{await(null==(e=l.value)?void 0:e.validate()),await t(ea(d)),a()}catch(s){console.error(s)}}}),(a,e)=>{const t=ra,s=pa,o=da;return J(),G("div",ha,[K(o,{ref_key:"formRef",ref:l,model:aa(d),rules:r},{default:Q(()=>[K(s,{label:a.$t("Database.index_2"),path:"password"},{default:Q(()=>[Z("div",ba,[K(t,{value:aa(d).password,"onUpdate:value":e[0]||(e[0]=a=>aa(d).password=a),loading:aa(p),default:!1},null,8,["value","loading"])])]),_:1},8,["label"])]),_:1},8,["model"])])}}}),xa={class:"px-20px py-24px"},wa=N({__name:"index",props:{data:{}},setup(a){const e=a,{status:t,getInfo:s}=e.data,o=F({status:t}),n=async()=>{await i(ea(o)),null==s||s()};return(a,e)=>{const t=ua,s=pa,i=da,l=v;return J(),G("div",xa,[K(i,{"label-width":"160"},{default:Q(()=>[K(s,{label:a.$t("Database.mongo.index_1"),"show-feedback":!1},{default:Q(()=>[K(t,{value:aa(o).status,"onUpdate:value":[e[0]||(e[0]=a=>aa(o).status=a),n],"checked-value":1},null,8,["value"])]),_:1},8,["label"])]),_:1}),K(l,{class:"mt-16px"},{default:Q(()=>[Z("li",null,ta(a.$t("Database.mongo.index_2")),1)]),_:1})])}}}),fa={class:"p-16px"},ya=N({__name:"index",setup(a){const{t:t}=X(),n=la(()=>m(()=>import("./index142.js?v=1769066082311"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]))),i=l(),v=D(t("Database.mongo.index_4"),{status:!1}),N=()=>{v.data.status="enabled"===va.authorization,v.show=!0},Y=D(t("Database.tools.index_70")),G=()=>{"enabled"===va.authorization?Y.show=!0:(ra(),h.warning(t("Database.mongo.index_5")))},da=D(t("Database.mongo.index_1"),{status:0}),ra=()=>{da.data.status="enabled"===va.authorization?1:0,da.data.getInfo=Da,da.show=!0},pa=()=>{q()},ua=a=>{E(a?{type:"mongo",username:a.username,password:a.password,db:a.name}:{type:"mongo"})},ha=async()=>{await r(i.type,{ids:[]}),Ua()},{keys:ba,table:xa,columns:ya}=j([{type:"selection",width:40},{key:"name",title:ma("Database.index_12"),width:"12%",minWidth:120},{key:"username",title:ma("Database.form.index_3"),width:"12%",minWidth:120},{key:"password",title:ma("Database.index_14"),minWidth:150,render:a=>K(y,{value:a.password},null)},{key:"backup_count",title:ma("Database.index_16"),width:"12%",render:a=>{let t;return K("div",{class:"flex items-center"},[K(e,{type:a.backup_count>0?"primary":"warning",onClick:()=>{S(a)}},{default:()=>[a.backup_count>0?"".concat(ma("Database.mongo.index_7"),"(").concat(a.backup_count,")"):ma("Database.index_18")]}),K("span",{class:"mx-4px"},[T("|")]),K(e,{onClick:()=>{W(a,"mongodb")}},(s=t=ma("Public.Btn.Import"),"function"==typeof s||"[object Object]"===Object.prototype.toString.call(s)&&!M(s)?t:{default:()=>[t]}))]);var s}},{key:"sid",title:ma("Database.mongo.index_8"),width:"12%",minWidth:120,render:a=>H(a)},C({onBlur:async(a,e)=>{await b({id:e.id,ps:a})}}),R({width:200,options:a=>[{label:"Adminer",show:0===a.db_type,onClick:()=>{ua(a)}},{label:"Password",onClick:()=>{L(a)}},{label:t("Public.Btn.Del"),onClick:()=>{P([a])}}]})]),ka=[{key:"sync",label:t("Database.index_24"),onBatch:a=>{U({title:t("Database.index_25"),content:t("Database.index_26"),onConfirm:async({hide:e})=>{await r(i.type,{ids:a.map(a=>a.id)}),e()}})}},{key:"backup",type:"confirm",label:t("Database.index_27"),confirm:{title:t("Database.index_28"),desc:t("Database.index_29"),api:a=>d(i.type,{id:a.id},!1),done:()=>{Ua()},columns:[{key:"name",title:t("Database.index_12")}]}},{key:"delete",label:t("Database.index_30"),onBatch:a=>{P(a)}}],va=F({authorization:"",msg:"",port:"",root:""}),Da=async()=>{const{message:a}=await s();o(a)&&(va.authorization=a.authorization,va.msg=a.msg,va.port=a.port,va.root=a.root)},{loading:ja,setLoading:Ca}=k(),Ra=F({p:1,limit:10,sid:-1,search:""}),Ua=async()=>{try{Ca(!0);const{message:a}=await p(i.type,(()=>{const a={...ea(Ra)};return-1===a.sid&&delete a.sid,a})());o(a)?(xa.data=u(a.data)?a.data:[],xa.total=_(a.page)):(xa.data=[],xa.total=0)}finally{ba.value=[],Ca(!1)}};sa(()=>i.isRefresh,a=>{a&&(i.setRefresh(!1),i.delRemoteId===Ra.sid&&(Ra.sid=-1),Ua())});return(async()=>{await i.getRemote(),i.install?(Ua(),Da()):z()})(),(a,e)=>{const t=ca,s=c,o=I,l=B,d=$,r=f,p=w,u=x,_=g,m=_a;return J(),oa(aa(V),null,{default:Q(()=>[K(m,null,{default:Q(()=>[Z("div",fa,[K(u,{feedback:!0},{toolsLeft:Q(()=>[K(t,{type:"primary",onClick:N},{default:Q(()=>[T(ta(a.$t("Database.index_1")),1)]),_:1}),K(t,{onClick:G},{default:Q(()=>[T(ta(a.$t("Database.index_2")),1)]),_:1}),K(t,{onClick:ra},{default:Q(()=>[T(ta(a.$t("Database.mongo.index_1")),1)]),_:1}),K(t,{onClick:e[0]||(e[0]=a=>ua())},{default:Q(()=>e[10]||(e[10]=[T(" Adminer ",-1)])),_:1,__:[10]}),K(t,{onClick:pa},{default:Q(()=>[T(ta(a.$t("Database.index_4")),1)]),_:1}),K(s,{class:"mx-0!",vertical:""}),K(t,{onClick:ha},{default:Q(()=>[T(ta(a.$t("Database.index_5")),1)]),_:1}),K(t,{onClick:aa(A)},{default:Q(()=>[T(ta(a.$t("Database.index_6")),1)]),_:1},8,["onClick"]),aa(i).isInstallMongoDB?(J(),oa(o,{key:0,"soft-name":"mongodb"})):ia("",!0)]),toolsRight:Q(()=>[K(aa(O),{value:aa(Ra).sid,"onUpdate:value":e[1]||(e[1]=a=>aa(Ra).sid=a),"store-key":"database-mongo-page",onChange:Ua},null,8,["value"]),K(l,{value:aa(Ra).search,"onUpdate:value":e[2]||(e[2]=a=>aa(Ra).search=a),placeholder:a.$t("Database.mongo.index_3"),onSearch:Ua},null,8,["value","placeholder"])]),table:Q(()=>[K(d,{"checked-row-keys":aa(ba),"onUpdate:checkedRowKeys":e[3]||(e[3]=a=>na(ba)?ba.value=a:null),loading:aa(ja),data:aa(xa).data,columns:aa(ya)},null,8,["checked-row-keys","loading","data","columns"])]),pageLeft:Q(()=>[K(r,{"checked-row-keys":aa(ba),"onUpdate:checkedRowKeys":e[4]||(e[4]=a=>na(ba)?ba.value=a:null),data:aa(xa).data,options:ka},null,8,["checked-row-keys","data"])]),pageRight:Q(()=>[K(p,{page:aa(Ra).p,"onUpdate:page":e[5]||(e[5]=a=>aa(Ra).p=a),"page-size":aa(Ra).limit,"onUpdate:pageSize":e[6]||(e[6]=a=>aa(Ra).limit=a),"store-key":"database-mongo-page","item-count":aa(xa).total,onRefresh:Ua},null,8,["page","page-size","item-count"])]),_:1}),K(_,{show:aa(v).show,"onUpdate:show":e[7]||(e[7]=a=>aa(v).show=a),title:aa(v).title,width:540,minHeight:176,footer:!0,data:aa(v).data,component:aa(n)},null,8,["show","title","data","component"]),K(_,{show:aa(Y).show,"onUpdate:show":e[8]||(e[8]=a=>aa(Y).show=a),title:aa(Y).title,width:520,footer:!0,component:ga},null,8,["show","title"]),K(_,{show:aa(da).show,"onUpdate:show":e[9]||(e[9]=a=>aa(da).show=a),title:aa(da).title,width:400,data:aa(da).data,component:wa},null,8,["show","title","data"])])]),_:1})]),_:1})}}});export{ya as default};
