System.register(["./public-legacy.js?v=1769066082311","./index.vue_vue_type_script_setup_true_lang-legacy.js?v=1769066082311","./index-legacy57.js?v=1769066082311","./vue-legacy.js?v=1769066082311","./index-legacy222.js?v=1769066082311","./naive-legacy.js?v=1769066082311","./page_layout-legacy.js?v=1769066082311","./common-legacy.js?v=1769066082311","./__commonjsHelpers__-legacy.js?v=1769066082311","./index-legacy.js?v=1769066082311","./index.vue_vue_type_script_setup_true_lang-legacy5.js?v=1769066082311","./index.vue_vue_type_script_setup_true_lang-legacy6.js?v=1769066082311","./index.vue_vue_type_script_setup_true_lang-legacy7.js?v=1769066082311","./index.vue_vue_type_script_setup_true_lang-legacy9.js?v=1769066082311","./index.vue_vue_type_script_setup_true_lang-legacy8.js?v=1769066082311","./index-legacy223.js?v=1769066082311","./xterm-legacy.js?v=1769066082311","./xterm-addon-canvas-legacy.js?v=1769066082311"],function(e,a){"use strict";var t,l,s,r,o,p,n,u,d,i,_,y,c,f,h,v,w,g,k,m,b,x,S,A,$,j,F,P,E,I,U,C,H;return{setters:[e=>{t=e.d,l=e._},e=>{s=e._},e=>{r=e.u,o=e.v},e=>{p=e.k,n=e.a0,u=e.c,d=e.P,i=e.r,_=e.e,y=e.R,c=e.V,f=e.W,h=e.a3,v=e.an,w=e.U,g=e.j,k=e.a4,m=e.F,b=e.a2,x=e.S},e=>{S=e.t,A=e.h,$=e.j},e=>{j=e.dS,F=e.au,P=e.dU,E=e.e2,I=e.db,U=e.dg,C=e.aC,H=e.dW},null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){const a={class:"p-20px"},q=["textContent"];e("default",p({__name:"index",props:{row:{type:Object,default:()=>({})},onRefresh:{type:Function,default:()=>{}}},setup(e,{expose:p}){const K=r(),{categoryList:R}=n(K),N=u(()=>R.value.filter(e=>""!==e.value)),{t:O}=d(),L=e,T=i(null),W=_({name:"",type:"api",group_id:0,url:"",key:"",host:"",port:22,ssh_type:"password",password:"",private_key:"",private_key_password:""}),J={name:{required:!0,message:O("Enter node name"),trigger:"blur"},url:[{required:!0,message:O("Panel address cannot be empty"),trigger:["blur","input"]},{validator:(e,a)=>{if(!a)return!0;if(W.url=W.url.trim(),/^(https?):\/\/(?:(?:[\w-]+\.)+[a-zA-Z]{2,}|(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)|(?:\[(?:[0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|(?:[0-9a-fA-F]{1,4}:){1,7}:|(?:[0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|(?:[0-9a-fA-F]{1,4}:){1,5}(?::[0-9a-fA-F]{1,4}){1,2}|(?:[0-9a-fA-F]{1,4}:){1,4}(?::[0-9a-fA-F]{1,4}){1,3}|(?:[0-9a-fA-F]{1,4}:){1,3}(?::[0-9a-fA-F]{1,4}){1,4}|(?:[0-9a-fA-F]{1,4}:){1,2}(?::[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:(?::[0-9a-fA-F]{1,4}){1,6}|:(?::[0-9a-fA-F]{1,4}){1,7}|:(?::[0-9a-fA-F]{1,4}){1,6}:|(?:[0-9a-fA-F]{1,4}:){1,6}:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?))\])(?::\d{1,5})?(?:\/.*)?$/.test(W.url)){const e=new URL(W.url);return W.url=e.origin,!0}return new Error(O("Invalid panel address format"))},trigger:"blur"}],key:{required:!0,message:O("Enter API key"),trigger:"blur"},host:{required:!0,trigger:"blur",validator:(e,a)=>!a||!!o(a)||new Error(O("Invalid IP address format"))},port:{required:!0,message:O("Enter SSH port"),trigger:"blur",type:"number"},password:{required:!0,message:O("Enter SSH password"),trigger:"blur"},private_key:{required:!0,message:O("Enter SSH key"),trigger:"blur"}},{loading:V,setLoading:z}=t(),B=async()=>{try{z(!0),await(T.value?.validate()),await S({host:W.host,port:W.port,test_case:1,pkey:"key"===W.ssh_type?W.private_key:"",pkey_passwd:"key"===W.ssh_type?W.private_key_password:"",password:"password"===W.ssh_type?W.password:""})}finally{z(!1)}},Z=()=>"api"===W.type?{remarks:W.name,address:W.url,api_key:W.key,category_id:W.group_id||0}:{remarks:W.name,ssh_conf:"password"===W.ssh_type?JSON.stringify({host:W.host,port:W.port,password:W.password}):JSON.stringify({host:W.host,port:W.port,pkey:W.private_key,pkey_passwd:W.private_key_password}),category_id:W.group_id||0};return p({onConfirm:async()=>{await(T.value?.validate()),L.row&&L.row.id?await A({id:L.row.id,...Z()}):await $(Z()),L.onRefresh()}}),L.row&&L.row.id&&(W.name=L.row.remarks,W.type=Object.keys(L.row.ssh_conf).length>0?"ssh":"api",W.group_id=L.row.category_id,W.url=L.row.address,W.key=L.row.api_key,W.host=L.row.ssh_conf.host,W.port=L.row.ssh_conf.port,W.ssh_type=L.row.ssh_conf.password?"password":"key",W.password=L.row.ssh_conf.password,W.private_key=L.row.ssh_conf.pkey,W.private_key_password=L.row.ssh_conf.pkey_passwd),(e,t)=>{const r=F,o=j,p=E,n=P,u=U,d=I,i=C,_=H,S=s,A=l;return c(),y("div",a,[f(S,{ref_key:"formRef",ref:T,model:w(W),rules:J},{default:h(()=>[f(o,{label:e.$t("Node Name"),path:"name"},{default:h(()=>[f(r,{class:"w-350px!",value:w(W).name,"onUpdate:value":t[0]||(t[0]=e=>w(W).name=e),placeholder:e.$t("Enter node name")},null,8,["value","placeholder"])]),_:1},8,["label"]),f(o,{label:e.$t("Verification Type"),path:"type"},{default:h(()=>[f(n,{value:w(W).type,"onUpdate:value":t[1]||(t[1]=e=>w(W).type=e),type:"button"},{default:h(()=>[f(p,{value:"api"},{default:h(()=>[g(k(e.$t("API Key")),1)]),_:1}),f(p,{value:"ssh"},{default:h(()=>t[11]||(t[11]=[g("SSH",-1)])),_:1,__:[11]})]),_:1},8,["value"])]),_:1},8,["label"]),"api"===w(W).type?(c(),y(m,{key:0},[f(o,{label:e.$t("Panel Address"),path:"url"},{default:h(()=>[f(r,{class:"w-350px!",value:w(W).url,"onUpdate:value":t[2]||(t[2]=e=>w(W).url=e),placeholder:"Example: http://192.168.1.1:88 or https://domain.com:88"},null,8,["value"])]),_:1},8,["label"]),f(o,{label:e.$t("API Key"),path:"key"},{default:h(()=>[f(r,{class:"w-350px!",value:w(W).key,"onUpdate:value":t[3]||(t[3]=e=>w(W).key=e),placeholder:e.$t("Enter API key")},null,8,["value","placeholder"])]),_:1},8,["label"])],64)):v("",!0),"ssh"===w(W).type?(c(),y(m,{key:1},[f(d,{class:"flex-nowrap!"},{default:h(()=>[f(o,{label:e.$t("Node IP"),path:"host"},{default:h(()=>[f(r,{class:"w-240px!",value:w(W).host,"onUpdate:value":t[4]||(t[4]=e=>w(W).host=e),placeholder:e.$t("Example:192.168.1.1")},null,8,["value","placeholder"])]),_:1},8,["label"]),f(o,{label:e.$t("SSH port"),path:"port"},{default:h(()=>[f(u,{class:"w-98px!",value:w(W).port,"onUpdate:value":t[5]||(t[5]=e=>w(W).port=e),"show-button":!1,placeholder:e.$t("SSH port")},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),f(o,{label:e.$t("Authentication"),path:"ssh_type"},{default:h(()=>[f(n,{value:w(W).ssh_type,"onUpdate:value":t[6]||(t[6]=e=>w(W).ssh_type=e),type:"button"},{default:h(()=>[f(p,{value:"password"},{default:h(()=>[g(k(e.$t("Password")),1)]),_:1}),f(p,{value:"key"},{default:h(()=>[g(k(e.$t("Key")),1)]),_:1})]),_:1},8,["value"])]),_:1},8,["label"]),"password"===w(W).ssh_type?(c(),b(o,{key:0,label:e.$t("SSH Password"),path:"password"},{default:h(()=>[f(d,{class:"flex-nowrap! items-center"},{default:h(()=>[f(r,{class:"w-220px!",value:w(W).password,"onUpdate:value":t[7]||(t[7]=e=>w(W).password=e),type:"password","show-password-on":"click",placeholder:e.$t("Example:123456")},null,8,["value","placeholder"]),f(i,{onClick:B,loading:w(V)},{default:h(()=>[g(k(e.$t("Test connection")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["label"])):v("",!0),"key"===w(W).ssh_type?(c(),y(m,{key:1},[f(o,{label:e.$t("SSH Key"),path:"private_key"},{default:h(()=>[f(d,{class:"flex-nowrap! items-center"},{default:h(()=>[f(r,{class:"w-220px!",value:w(W).private_key,"onUpdate:value":t[8]||(t[8]=e=>w(W).private_key=e),type:"textarea",placeholder:e.$t("Enter private key content")},null,8,["value","placeholder"]),f(i,{onClick:B,loading:w(V)},{default:h(()=>[g(k(e.$t("Test connection")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["label"]),f(o,{label:e.$t("SSH Key Password")},{default:h(()=>[f(d,{class:"flex-nowrap! items-center"},{default:h(()=>[f(r,{class:"w-350px!",value:w(W).private_key_password,"onUpdate:value":t[9]||(t[9]=e=>w(W).private_key_password=e),type:"password","show-password-on":"click",placeholder:e.$t("Please leave blank if no password is provided")},null,8,["value","placeholder"])]),_:1})]),_:1},8,["label"])],64)):v("",!0)],64)):v("",!0),f(o,{label:e.$t("Category"),path:"group_id"},{default:h(()=>[f(_,{class:"w-350px!",value:w(W).group_id,"onUpdate:value":t[10]||(t[10]=e=>w(W).group_id=e),options:w(N),placeholder:e.$t("Select Category")},null,8,["value","options","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"]),f(A,null,{default:h(()=>["api"===w(W).type?(c(),y(m,{key:0},[t[12]||(t[12]=x("li",null,"Step 1: Fill in the panel URL address, example: https://192.168.1.2:8888",-1)),t[13]||(t[13]=x("li",null,"Step 2: Open the panel, go to the [Panel Settings] page, click [Advanced Features]",-1)),t[14]||(t[14]=x("li",{class:"color-error"},"Step 3: Configure the [IP Whitelist]. Enter your computer's public fixed IP. If you don't have a fixed IP, please fill in an asterisk (*) ",-1)),x("li",null,k(e.$t("Step 4: Copy [API secret key] in the [API Configuration] window")),1),x("li",null,k(e.$t("Step 5: Back to the node management window, paste it into the [API Key] input box")),1)],64)):v("",!0),"ssh"===w(W).type?(c(),y(m,{key:1},[x("li",null,k(e.$t("Enter root account information")),1),x("li",{class:"color-warning",textContent:k(e.$t("The current authentication method does not support file transfer functionality"))},null,8,q)],64)):v("",!0)]),_:1})])}}}))}}});
