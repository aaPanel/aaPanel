import{C as e}from"./CalcVerify.js?v=1769066082311";import{m as a,aE as s,p as t}from"./page_layout.js?v=1769066082311";import{w as l}from"./CalcSize.vue_vue_type_script_setup_true_lang.js?v=1769066082311";import{aC as i,dm as o}from"./naive.js?v=1769066082311";import{k as n,i as c,r,a2 as u,V as f,a3 as p,R as d,U as m,S as v,W as y,j as _,a4 as h,ak as g}from"./vue.js?v=1769066082311";import"./common.js?v=1769066082311";import"./__commonjsHelpers__.js?v=1769066082311";import"./public.js?v=1769066082311";import"./soft2.js?v=1769066082311";import"./soft.js?v=1769066082311";import"./site.js?v=1769066082311";const w={class:"header-tit single-line-ellipsis"},j={key:0,class:"del-modal-wrapper"},b={key:1,class:"del-modal-wrapper"},k={class:"text-[#f0a020]"},x={class:"modal-footer-btns"},C=t(n({__name:"Del",setup(t,{expose:n}){const C=c("fileStore"),{choosedKeys:D,fileList:R,fileRecycle:S,currentPath:F}=C,O=r(!1),P=r({}),V=r([]),q=r("Delete file"),U=r();async function z(){if(1==D.value.length){const e=R.value.find(e=>e.nm==D.value[0]);await async function(e){const t=a.loading("Files are being deleted. Please wait");try{O.value=!1,0==(await s.post("/files?action=DeleteFile",{path:e},{requestOptions:{isOriginalResult:!0}})).message.status?a.success("Files deleted successfully"):a.error("Files failed to delete")}catch(l){console.warn(l)}finally{t.close()}}(e.path)}D.value.length>1&&await async function(e,a){await s.post("/files?action=SetBatchData",{data:JSON.stringify(e),type:4,path:a},{requestOptions:{loading:"正在批量删除中，请稍候...",successMessage:!0}}),O.value=!1}(D.value,F.value)}async function B(){S.value||U.value.validate()?(await z(),l(C)):a.warning("Please enter the correct verification number")}return n({open(){if(O.value=!0,1==D.value.length){const e=R.value.find(e=>e.nm==D.value[0]);P.value=e,q.value="Delete file [".concat(P.value.nm,"]")}else V.value=R.value.filter(e=>D.value.includes(e.nm))},close(){O.value=!1}}),(a,s)=>{const t=i,l=o;return f(),u(l,{preset:"card",draggable:"","close-on-esc":!1,"mask-closable":!1,class:"w-170",segmented:"",show:m(O),"onUpdate:show":s[1]||(s[1]=e=>g(O)?O.value=e:null)},{header:p(()=>[v("div",w,h(m(q)),1)]),footer:p(()=>[v("div",x,[y(t,{onClick:s[0]||(s[0]=e=>O.value=!1)},{default:p(()=>s[5]||(s[5]=[_("cancel",-1)])),_:1,__:[5]}),y(t,{type:"primary",onClick:B},{default:p(()=>s[6]||(s[6]=[_("confirm",-1)])),_:1,__:[6]})])]),default:p(()=>[m(S)?(f(),d("div",b,[s[3]||(s[3]=_(" Confirm delete folder ",-1)),v("span",k,h(m(P).path?"[".concat(m(P).path,"]"):""),1),s[4]||(s[4]=_(" ,it will move to recycle bin after delete, continue? ",-1))])):(f(),d("div",j,[s[2]||(s[2]=v("div",{class:"text-red-5 mb-15px text-14px"}," Recycle bin is not currently open, delete file cannot be restored after, continue? ",-1)),y(e,{ref_key:"calcVertifyRef",ref:U},null,512)]))]),_:1},8,["show"])}}}),[["__scopeId","data-v-9d32222b"]]);export{C as default};
