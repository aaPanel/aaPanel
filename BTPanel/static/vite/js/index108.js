import{_ as a,q as e}from"./public.js?v=1762424784323";import{a5 as s,_ as t,n as l,S as n}from"./page_layout.js?v=1762424784323";import{_ as o}from"./index.vue_vue_type_script_setup_true_lang.js?v=1762424784323";import{u as i,B as p,C as r,D as u,E as m,F as _}from"./utils.js?v=1762424784323";import c from"./backup-info.js?v=1762424784323";import{k as d,P as f,a0 as g,r as x,e as k,a2 as b,V as v,a3 as y,W as C,U as w,an as j,j as B,a4 as h,S as D}from"./vue.js?v=1762424784323";import{dR as R,au as U,dV as $,_ as q,dk as F}from"./naive.js?v=1762424784323";import"./common.js?v=1762424784323";import"./__commonjsHelpers__.js?v=1762424784323";import"./soft.js?v=1762424784323";import"./site.js?v=1762424784323";const P=d({__name:"index",props:{onRefresh:{type:Function}},setup(d,{expose:q}){const{t:P}=f(),S=i(),{loading:V,backupData:z}=g(S),E=d,H=x(null),W=k({back_name:p(Date.now()),storage_type:"local",timestamp:null,auto_exit:!1}),A={back_name:{required:!0,trigger:"input",message:P("Config.Backup.index_49")}},G=()=>{S.getData()};return S.getData(),q({onConfirm:async()=>{var a;return await(null==(a=H.value)?void 0:a.validate()),new Promise(a=>{e({title:P("Config.Backup.index_57"),content:()=>C(F,{type:"warning"},{default:()=>[C("span",{class:"color-warning font-bold"},[B(" "),P("Config.Backup.index_58"),B(" ")])]}),onConfirm:async()=>{await _({backup_name:W.back_name,auto_exit:W.auto_exit?1:0,storage_type:W.storage_type,timestamp:W.timestamp?W.timestamp/1e3:0}),E.onRefresh(W.timestamp),a(!0)}})})}}),(e,i)=>{const p=U,_=R,d=$,f=s,g=o,x=t,k=a,B=n;return v(),b(B,{show:w(V),class:"p-16px",description:w(P)("Config.Backup.index_56")},{default:y(()=>[C(g,{ref_key:"formRef",ref:H,model:w(W),rules:A},{default:y(()=>[C(_,{label:e.$t("Config.Backup.index_3"),path:"back_name"},{default:y(()=>[C(p,{class:"w-600px!",value:w(W).back_name,"onUpdate:value":i[0]||(i[0]=a=>w(W).back_name=a),placeholder:w(P)("Config.Backup.index_49"),clearable:""},null,8,["value","placeholder"])]),_:1},8,["label"]),C(_,{label:e.$t("Config.Backup.index_50"),path:"type"},{default:y(()=>[C(d,{class:"w-600px",value:w(W).storage_type,"onUpdate:value":i[1]||(i[1]=a=>w(W).storage_type=a),options:w(u),"render-label":w(r)},null,8,["value","options","render-label"])]),_:1},8,["label"]),C(_,{label:e.$t("Config.Backup.index_51")},{default:y(()=>[C(f,{class:"w-600px",value:w(W).timestamp,"onUpdate:value":i[2]||(i[2]=a=>w(W).timestamp=a),type:"datetime",clearable:"","is-date-disabled":w(m),placeholder:w(P)("Config.Backup.index_52")},null,8,["value","is-date-disabled","placeholder"])]),_:1},8,["label"]),C(_,{label:"Backup Data"},{default:y(()=>[C(c,{class:"w-600px"})]),_:1}),j("",!0)]),_:1},8,["model"]),C(k,{class:"mt-16px"},{default:y(()=>[D("li",null,[C(x,{name:"base-warning",class:"text-warning mr-4px",size:"16"}),D("span",null,h(w(P)("Config.Backup.index_54"))+" "+h(w(l)(w(z).disk_use))+" "+h(w(P)("Config.Backup.index_55"))+" "+h(w(l)(w(z).disk_free)),1),C(x,{name:"base-refresh",class:"text-primary ml-4px",onClick:G})])]),_:1})]),_:1},8,["show","description"])}}});export{P as default};
