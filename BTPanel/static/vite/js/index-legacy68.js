System.register(["./index-legacy107.js?v=1763625242172","./utils-legacy3.js?v=1763625242172","./vue-legacy.js?v=1763625242172","./page_layout-legacy.js?v=1763625242172","./index-legacy.js?v=1763625242172","./index.vue_vue_type_script_setup_true_lang-legacy5.js?v=1763625242172","./index.vue_vue_type_script_setup_true_lang-legacy7.js?v=1763625242172","./public-legacy.js?v=1763625242172","./utils-legacy4.js?v=1763625242172","./naive-legacy.js?v=1763625242172","./index.vue_vue_type_script_setup_true_lang-legacy8.js?v=1763625242172","./index.vue_vue_type_script_setup_true_lang-legacy.js?v=1763625242172","./transition-legacy.js?v=1763625242172","./__commonjsHelpers__-legacy.js?v=1763625242172","./common-legacy.js?v=1763625242172","./index.vue_vue_type_script_setup_true_lang-legacy6.js?v=1763625242172","./soft-legacy.js?v=1763625242172","./site-legacy.js?v=1763625242172"],(function(e,a){"use strict";var t,l,n,i,o,s,r,d,u,m,c,p,_,h,g,y,v,f,w,b,x,k,S,D,C,P,R,L,j,U,z,E,$,T,N,M,O,A,I,B,V,F,q,H,W,Y,G,K,X,J,Q,Z,ee,ae,te,le,ne,ie,oe,se,re,de,ue,me,ce,pe,_e,he,ge,ye,ve,fe,we,be,xe,ke,Se,De,Ce,Pe,Re,Le,je,Ue,ze,Ee,$e,Te,Ne,Me,Oe,Ae,Ie,Be,Ve,Fe,qe,He,We;return{setters:[e=>{t=e._},e=>{l=e.h,n=e.a,i=e.m,o=e.r,s=e.b,r=e.c,d=e.d,u=e.l,m=e.e,c=e.f,p=e.g,_=e.i,h=e.u,g=e.j},e=>{y=e.k,v=e.P,f=e.e,w=e.r,b=e.X,x=e.b,k=e.R,S=e.S,D=e.a3,C=e.V,P=e.U,R=e.j,L=e.a4,j=e._,U=e.ad,z=e.ae,E=e.a2,$=e.s,T=e.u,N=e.G,M=e.aj,O=e.an,A=e.O,I=e.F,B=e.a0,V=e.o,F=e.N},e=>{q=e.d7,H=e.d8,W=e.d9,Y=e.c,G=e.a,K=e._,X=e.m,J=e.da,Q=e.db,Z=e.dc,ee=e.dd,ae=e.p,te=e.u,le=e.de,ne=e.df,ie=e.o,oe=e.dg,se=e.dh,re=e.T,de=e.di,ue=e.dj,me=e.dk,ce=e.dl,pe=e.dm,_e=e.dn},e=>{he=e._},e=>{ge=e._},e=>{ye=e._},e=>{ve=e.e,fe=e.c,we=e.f,be=e.a,xe=e.h,ke=e.m,Se=e._,De=e.d},e=>{Ce=e.o,Pe=e.c,Re=e.a,Le=e.b,je=e.d,Ue=e.e},e=>{ze=e.dj,Ee=e.dk,$e=e.aC,Te=e.d9,Ne=e.dV,Me=e.dd,Oe=e.dh,Ae=e.au,Ie=e.dP,Be=e.df,Ve=e.d8,Fe=e.dS},e=>{qe=e._},e=>{He=e._},e=>{We=e.T},null,null,null,null,null],execute:function(){var Ye=document.createElement("style");Ye.textContent=".select-box[data-v-8dac0587]{margin-bottom:16px;padding:8px;flex-direction:column!important;border-radius:4px;border:1px solid #dddddd}\n",document.head.appendChild(Ye);const Ge={class:"flex items-center"},Ke=y({__name:"index",setup(e){const t=j((()=>G((()=>a.import("./form-legacy8.js?v=1763625242172")),void 0))),s=j((()=>G((()=>a.import("./ssl-log-legacy.js?v=1763625242172")),void 0))),{t:r}=v(),d=f({p:1,limit:10}),u=ve("",{isEdit:!1,onRefresh:()=>{U()}}),m=ve(r("SSL.Domain.index_5")),c=()=>{u.data.isEdit=!1,u.title=r("SSL.Domain.index_4"),u.show=!0},p=w(!1),{table:_,columns:h}=fe([{key:"alias",title:r("Config.Panel.index_36"),render:e=>e.alias?b("span",{class:"bt-link",onClick:()=>{l.value=e.id,n.value=e.name,i.value="manage"}},[e.alias]):"--"},{key:"api_user",title:r("Home.index_2"),render:e=>e.api_user?e.api_user:"--"},o((e=>{m.data.path=e,m.show=!0})),{key:"status",title:r("Public.Table.Status"),render:e=>b(ze,{uncheckedValue:0,checkedValue:1,value:e.status,"onUpdate:value":[a=>e.status=a,async a=>{try{await q({id:e.id,status:a})}catch{e.status=1===a?0:1}}]},null)},{key:"permission",title:r("Database.index_21"),align:"center",render:e=>e.permission?e.permission:"--"},{key:"domains",title:r("Layout.Sider.domain_1"),align:"center",render:e=>e.domains.length},we({width:250,options:e=>[{label:r("SSL.Domain.index_7"),onClick:()=>{l.value=e.id,n.value=e.name,i.value="manage"}},{label:r("Public.Btn.Edit"),onClick:()=>{"aaPanelDns"!==e.name?g(e):Ce()}},{label:r("Public.Btn.Del"),show:"aaPanelDns"!==e.name,onClick:()=>{be({title:r("SSL.Domain.index_8"),content:r("SSL.Domain.index_9"),onConfirm:async()=>{await H({id:e.id}),U()}})}}]})]),g=e=>{u.data.isEdit=!0,u.data.row=e,u.title=r("SSL.Domain.index_10"),u.show=!0};let y=null;const U=async()=>{try{p.value||(_.loading=!0);const{message:e}=await W(d);Y(e)&&(p.value=e.data.some((e=>e.task.some((e=>100!==e.task_status)))),p.value?z():y&&clearTimeout(y),_.data=e.data,_.total=e.total)}finally{_.loading=!1}},z=async()=>{y=window.setTimeout((()=>{U()}),5e3)};return U(),x((()=>{y&&clearTimeout(y)})),(e,a)=>{const l=K,n=Ee,i=$e,o=xe,r=ye,p=ge,g=he;return k(),S("div",null,[b(n,{"show-icon":!1,class:"mb-10px"},{default:D((()=>[P("div",Ge,[b(l,{name:"base-info",size:17,class:"mr-8px"}),a[4]||(a[4]=P("span",{class:"leading-17px"},"aaPanel Domain Name Management Center, allowing you to unify accounts across multiple domain providers without switching DNS platforms",-1))])])),_:1}),b(p,{feedback:!0},{toolsLeft:D((()=>[b(i,{type:"primary",onClick:c},{default:D((()=>[R(L(e.$t("SSL.Domain.index_4")),1)])),_:1})])),table:D((()=>[b(o,{loading:C(_).loading,data:C(_).data,columns:C(h)},null,8,["loading","data","columns"])])),pageRight:D((()=>[b(r,{page:C(d).p,"onUpdate:page":a[0]||(a[0]=e=>C(d).p=e),"page-size":C(d).limit,"onUpdate:pageSize":a[1]||(a[1]=e=>C(d).limit=e),"store-key":"ssl-host-page","item-count":C(_).total,onRefresh:U},null,8,["page","page-size","item-count"])])),_:1}),b(g,{show:C(u).show,"onUpdate:show":a[2]||(a[2]=e=>C(u).show=e),title:C(u).title,data:C(u).data,width:540,"min-height":300,footer:!0,component:C(t)},null,8,["show","title","data","component"]),b(g,{show:C(m).show,"onUpdate:show":a[3]||(a[3]=e=>C(m).show=e),title:C(m).title,data:C(m).data,width:700,height:450,footer:!1,component:C(s)},null,8,["show","title","data","component"])])}}}),Xe=y({__name:"host-select",props:{value:{},valueModifiers:{}},emits:U(["change"],["update:value"]),setup(e,{emit:a}){const{t:t}=v(),l=z(e,"value"),n=a,i=(e,a)=>{n("change",e,a.label)},o=e=>{if(e.disabled){let a;return b(Te,{class:"items-center"},{default:()=>{return[b("span",null,[e.label]),b($e,{type:"primary",size:"tiny",onClick:()=>{ke(e.alias)}},(l=a=t("Public.Btn.Install"),"function"==typeof l||"[object Object]"===Object.prototype.toString.call(l)&&!T(l)?a:{default:()=>[a]}))];var l}})}return e.label+" ("+e.alias+")"};return(e,a)=>{const t=Ne;return k(),E(t,$({loading:C(r),class:"w-300px"},e.$attrs,{filterable:"",value:l.value,"onUpdate:value":[a[0]||(a[0]=e=>l.value=e),i],options:C(s),"consistent-menu-width":!1,"render-label":o}),null,16,["loading","value","options"])}}});function Je(){const e=w(!1);let a=null;const t=()=>{a&&(clearInterval(a),a=null)},l=()=>{t(),a=setInterval((async()=>{await Re(),Pe.value&&(t(),e.value=!1,X.success("DNS check completed."))}),1e3)};return N((()=>{t()})),{canRefreshDns:Pe,refreshLoading:e,startDnsPolling:l,stopPolling:t,onRefreshDns:async()=>{t(),e.value=!0,await J({act:"start"}),l()}}}const Qe=y({__name:"domain-select",props:{value:{},valueModifiers:{}},emits:["update:value"],setup(e){const a=z(e,"value"),{t:t}=v(),l=e=>b(Te,{class:"items-center justify-between!"},{default:()=>[b("span",{class:"w-225px truncate"},[t("Mail.Mass.index_45"),R("ï¼š"),e.label]),e.ssl_info&&-1!==e.ssl_info?b(Me,{type:e.ssl_info>30?"success":e.ssl_info>0?"warning":"error",class:"px-10px"},{default:()=>[e.ssl_info?e.ssl_info+" "+t("Crontab.arrange.index_41"):t("Config.Safe.index_166")]}):""]});return(e,t)=>{const n=Ne;return k(),E(n,$(e.$attrs,{class:"w-350px",size:"large",filterable:"",value:a.value,"onUpdate:value":t[0]||(t[0]=e=>a.value=e),options:C(d),"consistent-menu-width":!1,loading:C(u),disabled:!C(d).length,"render-label":l}),null,16,["value","options","loading","disabled"])}}}),Ze=y({__name:"domain",emits:["change"],setup(e,{emit:t}){const i=j((()=>G((()=>a.import("./domain-form-legacy.js?v=1763625242172")),void 0))),o=t,{t:s}=v(),r=f({p:1,limit:10,domain:m,search:""}),d=ve("",{isEdit:!1,onRefresh:()=>{B()}}),u=()=>{d.data.isEdit=!1,d.title=s("SSL.Domain.index_17"),d.show=!0},h=()=>{o("change"),p.value=!1},g=()=>{r.p=1,B()},y=async()=>{B()},w=async(e,a)=>{n.value=a,l.value=e,m.value="",r.p=1,await _(),B()},{table:x,columns:U}=fe([{key:"record",title:s("SSL.Domain.index_11"),width:"20%"},{key:"record_type",title:s("Ftp.Table.index_3"),width:"10%"},{key:"record_value",title:s("SSL.Domain.index_13"),width:"20%",ellipsis:{tooltip:!0}},{key:"ttl",title:"TTL",width:100,render:e=>1===e.ttl?s("Mail.Mass.index_34"):e.ttl},{key:"priority",title:"Priority",width:100,render:e=>-1===e.priority?"--":e.priority},{key:"proxy",title:s("SSL.Domain.index_16"),render:e=>-1===e.proxy?"--":b(ze,{"checked-value":1,"unchecked-value":0,value:e.proxy,"onUpdate:value":[a=>e.proxy=a,async a=>{const t={id:e.id,pid:l.value,domain:m.value,record:e.record,record_type:e.record_type,record_value:e.record_value,ttl:e.ttl,priority:e.priority,proxy:a,ps:e.ps};try{await Q(t)}catch{e.proxy=1===a?0:1}}]},null)},{key:"ps",title:s("Public.Table.Ps")},we({width:150,options:e=>[{label:s("Public.Btn.Edit"),onClick:()=>{I(e)}},{label:s("Public.Btn.Del"),onClick:()=>{be({title:s("SSL.Domain.index_19"),content:s("SSL.Domain.index_20"),onConfirm:async()=>{await Z({id:e.id}),B(),o("change")}})}}]})]),z=()=>{window.open("https://www.aaPanel.com/docs/Function/Tutorial/build_dns_server.html")},{canRefreshDns:$,refreshLoading:T,startDnsPolling:N,onRefreshDns:A}=Je(),I=e=>{d.data.isEdit=!0,d.data.row=e,d.title=s("SSL.Domain.index_21"),d.show=!0},B=async()=>{try{if(""===m.value)return void(x.data=[]);x.loading=!0;const{message:e}=await ee({...r,search_pid:l.value});Y(e)&&(x.data=e.data,x.total=e.total)}finally{x.loading=!1}};return(async()=>{await _(),await B(),c.value&&(await Re(),$.value||(T.value=!0,N()))})(),(e,a)=>{const t=K,n=$e,o=Oe,s=Te,m=Ee,p=qe,_=xe,v=ye,f=ge,j=he;return k(),S("div",null,[b(s,{class:"select-box"},{default:D((()=>[b(Xe,{value:C(l),"onUpdate:value":a[0]||(a[0]=e=>M(l)?l.value=e:null),onChange:w},null,8,["value"]),b(s,null,{default:D((()=>[b(Qe,{value:C(r).domain,"onUpdate:value":[a[1]||(a[1]=e=>C(r).domain=e),g]},null,8,["value"]),b(o,{trigger:"hover"},{trigger:D((()=>[b(n,{onClick:y,class:"h-40px w-40px"},{default:D((()=>[b(t,{name:"base-refresh"})])),_:1})])),default:D((()=>[P("span",null,L(e.$t("SSL.Domain.index_22")),1)])),_:1})])),_:1})])),_:1}),b(f,null,{toolsLeft:D((()=>[b(n,{type:"primary",onClick:u},{default:D((()=>[R(L(e.$t("SSL.Domain.index_17")),1)])),_:1}),b(n,{onClick:h},{default:D((()=>[R(L(e.$t("SSL.Domain.index_18")),1)])),_:1}),C(c)?(k(),E(m,{key:0,type:"warning"},{default:D((()=>[b(s,{class:"items-center"},{default:D((()=>[P("span",null,L(C(c)),1),b(n,{type:"primary",size:"small",onClick:z},{default:D((()=>a[6]||(a[6]=[R("View tutorial")]))),_:1,__:[6]}),b(n,{loading:C(T),type:"primary",ghost:"",size:"small",onClick:C(A),disabled:!C($)},{default:D((()=>[R(L(e.$t("Public.Btn.Refresh")),1)])),_:1},8,["loading","onClick","disabled"])])),_:1})])),_:1})):O("",!0)])),toolsRight:D((()=>[b(p,{value:C(r).search,"onUpdate:value":a[2]||(a[2]=e=>C(r).search=e),onSearch:g},null,8,["value"])])),table:D((()=>[b(_,{loading:C(x).loading,data:C(x).data,columns:C(U),"store-key":"ssl-domain-page"},null,8,["loading","data","columns"])])),pageRight:D((()=>[b(v,{page:C(r).p,"onUpdate:page":a[3]||(a[3]=e=>C(r).p=e),"page-size":C(r).limit,"onUpdate:pageSize":a[4]||(a[4]=e=>C(r).limit=e),"item-count":C(x).total,onRefresh:B},null,8,["page","page-size","item-count"])])),_:1}),b(j,{show:C(d).show,"onUpdate:show":a[5]||(a[5]=e=>C(d).show=e),title:C(d).title,data:C(d).data,width:540,"min-height":300,footer:!0,component:C(i)},null,8,["show","title","data","component"])])}}}),ea=ae(Ze,[["__scopeId","data-v-8dac0587"]]),aa={class:"p-20px"},ta=y({__name:"add-form",props:{onRefresh:{}},setup(e,{expose:a}){const{t:t}=v(),l=te(),n=e,{onRefresh:i}=n,o=w(!1),s=w(null),r=f({domain_name:"",domain_ip:"",soa:"",nameserver1:"",nameserver2:""}),d={domain_name:{required:!0,trigger:["blur","change"],message:t("Please enter your domain name")},domain_ip:{required:!0,trigger:["blur","change"],message:t("Please enter your domain IP")},soa:{required:!0,trigger:["blur","change"],message:t("Please enter SOA")}},u=()=>{if(!r.domain_name)return r.soa="",r.nameserver1="",void(r.nameserver2="");r.soa="ns1."+r.domain_name,o.value||(r.nameserver1="ns1."+r.domain_name,r.nameserver2="ns2."+r.domain_name)},m=()=>{r.domain_ip=l.address};return(async()=>{const{message:e}=await le();Y(e)&&(r.nameserver1=e.NS1,r.nameserver2=e.NS2,Object.keys(e).length?o.value=!0:o.value=!1)})(),a({onConfirm:async()=>{await(s.value?.validate()),await ne({domain:r.domain_name,domain_ip:r.domain_ip,soa:r.soa,ns1domain:r.nameserver1,ns2domain:r.nameserver2}),i()}}),(e,a)=>{const t=Ae,l=Ie,n=$e,i=Te,o=ie,c=Oe,p=He,_=Se;return k(),S("div",aa,[b(p,{ref_key:"formRef",ref:s,model:C(r),rules:d},{default:D((()=>[b(l,{label:e.$t("Mail.Domain.index_3"),path:"domain_name"},{default:D((()=>[b(t,{class:"w-320px!",value:C(r).domain_name,"onUpdate:value":a[0]||(a[0]=e=>C(r).domain_name=e),placeholder:"Enter your domain name,eg: aapanel.com",onInput:u},null,8,["value"])])),_:1},8,["label"]),b(l,{label:"Domain IP",path:"domain_ip"},{default:D((()=>[b(i,{class:"flex-nowrap!",size:5},{default:D((()=>[b(t,{class:"w-320px!",value:C(r).domain_ip,"onUpdate:value":a[1]||(a[1]=e=>C(r).domain_ip=e),placeholder:"Enter your domain IP,eg: 1.2.3.4"},null,8,["value"]),b(n,{onClick:m},{default:D((()=>a[5]||(a[5]=[R(" USE IP ")]))),_:1,__:[5]})])),_:1})])),_:1}),b(l,{label:"SOA",path:"soa"},{default:D((()=>[b(i,{class:"items-center"},{default:D((()=>[b(t,{class:"w-320px!",value:C(r).soa,"onUpdate:value":a[2]||(a[2]=e=>C(r).soa=e),placeholder:"ns1.domain.com"},null,8,["value"]),b(c,null,{trigger:D((()=>a[6]||(a[6]=[P("i",{class:"i-uiw:question-circle-o text-16px text-#9DA1A6 cursor-pointer"},null,-1)]))),default:D((()=>[P("div",null,[a[8]||(a[8]=R(" What is SOA record in DNS? ")),b(o,{href:"https://www.aaPanel.com/docs/Function/Domains-basics.html#_4-what-is-the-soa-record",target:"_blank"},{default:D((()=>a[7]||(a[7]=[R(" View ")]))),_:1,__:[7]})])])),_:1})])),_:1})])),_:1}),b(l,{label:"NameServer 1",path:"nameserver1"},{default:D((()=>[b(t,{class:"w-320px!",value:C(r).nameserver1,"onUpdate:value":a[3]||(a[3]=e=>C(r).nameserver1=e),placeholder:"Your Name Server,eg: ns1.aapanel.com,Option"},null,8,["value"])])),_:1}),b(l,{label:"NameServer 2",path:"nameserver2"},{default:D((()=>[b(t,{class:"w-320px!",value:C(r).nameserver2,"onUpdate:value":a[4]||(a[4]=e=>C(r).nameserver2=e),placeholder:"Your Name Server,eg: ns2.aapanel.com,Option"},null,8,["value"])])),_:1})])),_:1},8,["model"]),b(_,null,{default:D((()=>[P("li",null,[a[10]||(a[10]=R(" How to add domain name using self-built DNS? ")),b(o,{href:"https://www.aaPanel.com/docs/Function/Tutorial/build_dns_server.html",target:"_blank"},{default:D((()=>a[9]||(a[9]=[R(" View tutorial ")]))),_:1,__:[9]})])])),_:1})])}}}),la=y({__name:"index",props:{data:{},onRefresh:{}},setup(e,{expose:a}){const{t:t}=v(),l=e,{onRefresh:n,data:i}=l,o=w(null),s=f({name_server:"",admin_email:"",serial_number:0,refresh:0,retry:0,expire:0,minimum:0}),r=[{key:"name_server",label:t("Nameserver"),placeholder:t("Enter your nameserver,eg: ns1.domain.com"),tooltip:t("name server")},{key:"admin_email",label:t("Admin Email"),placeholder:"Enter your admin email,eg: admin@domain.com",tooltip:t("model admin email")},{key:"serial_number",label:t("Serial Number"),placeholder:t("Enter your serial number,eg: 2023080101"),tooltip:t("zone file version,Modification is prohibited.")},{key:"refresh",label:t("Refresh"),placeholder:t("Enter your refresh,eg: 3600"),tooltip:t("How often to check the serial number on the master server")},{key:"retry",label:t("Retry"),placeholder:t("Enter your retry,eg: 3600"),tooltip:t("The interval time when the slaveserver reconnects to the masterserver")},{key:"expire",label:t("Expire"),placeholder:t("Enter your expire,eg: 604800"),tooltip:t("When the time exceeds the number of seconds set by Expire and the slave server cannot get in touch with the master, the slave will delete its copy")},{key:"minimum",label:t("Minimum"),placeholder:t("Enter your minimum,eg: 3600"),tooltip:t("Represents the default TTL value of all records in this zone file")}],d=["serial_number","refresh","retry","expire","minimum"],u=Object.fromEntries(r.map((e=>[e.key,{required:!0,...d.includes(e.key)?{type:"number"}:{},trigger:["blur","change"],message:`Please enter your ${e.label.toLowerCase()}`}]))),{loading:m,setLoading:c}=De();return(async()=>{try{c(!0);const{message:e}=await oe({domain:i.domain});Y(e)&&(s.name_server=e.nameserver,s.admin_email=e.admin_mail,s.serial_number=e.serial,s.refresh=e.refresh,s.retry=e.retry,s.expire=e.expire,s.minimum=e.minimum)}finally{c(!1)}})(),a({onConfirm:async()=>{await(o.value?.validate()),await se({domain:i.domain,nameserver:s.name_server,admin_mail:s.admin_email,serial:s.serial_number,refresh:s.refresh,retry:s.retry,expire:s.expire,minimum:s.minimum}),n()}}),(e,a)=>{const t=Ae,l=Be,n=K,i=Ve,c=Ie,p=He,_=re;return k(),E(_,{show:C(m)},{default:D((()=>[b(p,{class:"p-20px",ref_key:"formRef",ref:o,model:C(s),rules:C(u)},{default:D((()=>[(k(),S(I,null,A(r,(e=>b(c,{key:e.key,label:e.label,path:e.key},{default:D((()=>[d.includes(e.key)?(k(),E(l,{key:1,readonly:"serial_number"===e.key,class:"w-350px! mr-8px",value:C(s)[e.key],"onUpdate:value":a=>C(s)[e.key]=a,placeholder:e.placeholder},null,8,["readonly","value","onUpdate:value","placeholder"])):(k(),E(t,{key:0,class:"w-350px! mr-8px",value:C(s)[e.key],"onUpdate:value":a=>C(s)[e.key]=a,placeholder:e.placeholder},null,8,["value","onUpdate:value","placeholder"])),b(i,{trigger:"hover",placement:"top-start"},{trigger:D((()=>[b(n,{name:"common-ask",class:"color-#fc7938",size:"16"})])),default:D((()=>[R(" "+L(e.tooltip),1)])),_:2},1024)])),_:2},1032,["label","path"]))),64))])),_:1},8,["model","rules"])])),_:1},8,["show"])}}}),na={class:"leading-17px"},ia={class:"leading-17px"},oa=y({__name:"index",setup(e){const t=j((()=>G((()=>a.import("./ssl-log-legacy.js?v=1763625242172")),void 0))),{t:i}=v(),o=de(),{dnsStatus:s,dnsInstall:r}=B(o),{canRefreshDns:d,refreshLoading:u,onRefreshDns:_}=Je(),y=f({p:1,limit:10,domain:"",id:l}),w=async()=>{await ce({id:y.id}),H(),x.show=!0},x=ve(i("SSL.Domain.index_23"),{path:"/www/server/panel/logs/dns_sync.log"}),U=ve("Add Domain",{onRefresh:()=>{H()}}),z=ve("SOA Record",{onRefresh:()=>{H()}}),$=e=>{c.value=e.dns_resolve?.ns_resolve||e.dns_resolve?.a_resolve||"aaPanelDns"!==n.value?"":e.dns_resolve?.tips,m.value=e.name,p.value=!0},N=async()=>{await Ue("install",(async()=>{await g(),await o.getDNSStatus(),H()}))},M=(e,a)=>{n.value=a,l.value=e,y.p=1,H()},A=()=>{y.p=1,H()},{table:F,columns:q}=fe([{key:"name",title:i("Mail.Mass.index_45"),render:e=>b(Te,{class:"items-center"},{default:()=>[b(ie,{onClick:()=>$(e)},{default:()=>[e.name]}),e.dns_resolve?.ns_resolve||e.dns_resolve?.a_resolve||"aaPanelDns"!==n.value?"":b(Oe,{trigger:"focus",placement:"top-start"},{trigger:()=>b(K,{color:"#f08a00",name:"base-info",size:16},null),default:()=>{let a;return b(Te,{class:"items-center"},{default:()=>{return[b("span",null,[e.dns_resolve.tips]),b($e,{type:"primary",size:"small",onClick:()=>window.open("https://www.aaPanel.com/docs/Function/Tutorial/build_dns_server.html")},{default:()=>[R("View tutorial")]}),b($e,{type:"primary",ghost:!0,size:"small",disabled:!d.value,loading:u.value,onClick:()=>_()},(t=a=i("Refresh"),"function"==typeof t||"[object Object]"===Object.prototype.toString.call(t)&&!T(t)?a:{default:()=>[a]}))];var t}})}}),""]})},h({key:"ssl_info.end_time",title:"SSL Days"}),{key:"ssl_info.end_date",title:"SSL Expiration Time",render:e=>e.ssl_info.end_date?e.ssl_info.end_date:"--"},{key:"records",title:i("SSL.Domain.index_24"),align:"center"},we({width:300,options:e=>[{label:"SOA Record",show:"aaPanelDns"===n.value,onClick:()=>{z.data.domain=e.name,z.show=!0}},{label:"Restore",show:!1,onClick:()=>{be({title:"Restore domain name resolution",content:`Restore the default resolution of the domain name [${e.name}],still continue?`,onConfirm:async()=>{}})}},{label:i("SSL.index_58"),onClick:()=>{$(e)}},{label:i("Public.Btn.Delete"),show:"aaPanelDns"===n.value,onClick:()=>{be({title:"Delete domain name resolution",content:`Delete the domain name resolution of the domain name [${e.name}],still continue?`,onConfirm:async()=>{await ue({domain:e.name}),H()}})}}]})]),H=async()=>{if(l.value)try{F.loading=!0;const{message:e}=await me(y);Y(e)&&(e.data.length>0?(F.data=e.data,F.total=e.total):(F.data=[],F.total=0))}finally{F.loading=!1}};return V((async()=>{(async()=>{await g(),await o.getDNSStatus(),H()})()})),(e,a)=>{const l=K,i=$e,o=Ee,d=qe,u=xe,m=ye,c=ge,_=he;return k(),S("div",null,[C(r)?O("",!0):(k(),E(o,{key:0,class:"mb-10px","show-icon":!1,type:"default"},{default:D((()=>[b(C(Te),{class:"items-center"},{default:D((()=>[b(l,{name:"base-info",size:"17"}),P("div",na,L(e.$t("Build your own dns server based on pdns")),1),b(i,{type:"primary",size:"small",onClick:N},{default:D((()=>[R(L(e.$t("Install Self-built DNS")),1)])),_:1})])),_:1})])),_:1})),!C(s)&&C(r)?(k(),E(o,{key:1,class:"mb-10px",type:"warning"},{default:D((()=>[b(C(Te),{class:"items-center"},{default:D((()=>[P("div",ia,L(e.$t("The dns server is stopped, please start it first")),1),b(i,{type:"primary",size:"small",onClick:C(Ce)},{default:D((()=>[R(L(e.$t("Set & Manage")),1)])),_:1},8,["onClick"])])),_:1})])),_:1})):O("",!0),C(p)?O("",!0):(k(),E(c,{key:2},{toolsLeft:D((()=>[b(Xe,{value:C(y).id,"onUpdate:value":a[0]||(a[0]=e=>C(y).id=e),onChange:M},null,8,["value"]),"aaPanelDns"!==C(n)?(k(),S(I,{key:0},[b(i,{onClick:w,type:"primary",ghost:""},{default:D((()=>[R(L(e.$t("SSL.Domain.index_22")),1)])),_:1}),b(i,{onClick:a[1]||(a[1]=e=>C(x).show=!0)},{default:D((()=>[R(L(e.$t("SSL.Domain.index_23")),1)])),_:1})],64)):O("",!0),C(r)&&"aaPanelDns"===C(n)?(k(),S(I,{key:1},[C(s)?(k(),S(I,{key:0},[b(i,{type:"primary",onClick:a[2]||(a[2]=e=>C(U).show=!0)},{default:D((()=>[R(L(e.$t("Add Domain")),1)])),_:1}),b(i,{onClick:C(Le)},{default:D((()=>[R(L(e.$t("Apply DMARC Policy")),1)])),_:1},8,["onClick"]),b(i,{onClick:C(je)},{default:D((()=>[R(L(e.$t("Enable DKIM/SPF")),1)])),_:1},8,["onClick"])],64)):O("",!0),b(i,{onClick:C(Ce)},{default:D((()=>[a[9]||(a[9]=P("i",{class:"i-domain:setting text-16px mr-1"},null,-1)),R(" "+L(e.$t("Set & Manage")),1)])),_:1,__:[9]},8,["onClick"])],64)):O("",!0)])),toolsRight:D((()=>[b(d,{value:C(y).domain,"onUpdate:value":a[3]||(a[3]=e=>C(y).domain=e),onSearch:A,placeholder:e.$t("WP.index_4")},null,8,["value","placeholder"])])),table:D((()=>[b(u,{loading:C(F).loading,data:C(F).data,columns:C(q)},null,8,["loading","data","columns"])])),pageRight:D((()=>[b(m,{page:C(y).p,"onUpdate:page":a[4]||(a[4]=e=>C(y).p=e),"page-size":C(y).limit,"onUpdate:pageSize":a[5]||(a[5]=e=>C(y).limit=e),"store-key":"ssl-domain-page","item-count":C(F).total,onRefresh:H},null,8,["page","page-size","item-count"])])),_:1})),C(p)?(k(),E(ea,{key:3,onChange:H})):O("",!0),b(_,{show:C(x).show,"onUpdate:show":a[6]||(a[6]=e=>C(x).show=e),title:C(x).title,data:C(x).data,width:650,"min-height":450,component:C(t)},null,8,["show","title","data","component"]),b(_,{show:C(U).show,"onUpdate:show":a[7]||(a[7]=e=>C(U).show=e),title:C(U).title,data:C(U).data,width:550,component:ta,footer:!0},null,8,["show","title","data"]),b(_,{show:C(z).show,"onUpdate:show":a[8]||(a[8]=e=>C(z).show=e),title:C(z).title,data:C(z).data,width:600,"min-height":400,component:la,footer:!0},null,8,["show","title","data"])])}}}),sa=y({__name:"index",setup(e,{expose:a}){const{t:t}=v(),l=f({p:1,limit:10,search:""}),n=()=>{be({title:"Clean up logs",content:"Are you sure you want to clean up logs?",onConfirm:async()=>{await _e(),s()}})},{table:i,columns:o}=fe([{title:t("Config.Backup.index_11"),key:"log",ellipsis:{tooltip:{placement:"top",width:1e3}}},{align:"right",title:t("Logs.Panel.index_7"),width:180,key:"addtime"}]),s=async()=>{try{i.loading=!0;const{message:e}=await pe(F(l));Y(e)&&(i.data=e.data||[],i.total=e.count||0)}finally{i.loading=!1}};return s(),a({init:s}),(e,a)=>{const t=$e,r=qe,d=xe,u=ye,m=ge;return k(),E(m,null,{toolsLeft:D((()=>[b(t,{type:"primary",onClick:s},{default:D((()=>[R(L(e.$t("Public.Btn.Refresh")),1)])),_:1})])),toolsRight:D((()=>[b(r,{value:C(l).search,"onUpdate:value":a[0]||(a[0]=e=>C(l).search=e),placeholder:"Please enter keywords",onSearch:s},null,8,["value"]),b(t,{onClick:n},{default:D((()=>a[3]||(a[3]=[R("Clean up logs")]))),_:1,__:[3]})])),table:D((()=>[b(d,{loading:C(i).loading,data:C(i).data,columns:C(o)},null,8,["loading","data","columns"])])),pageRight:D((()=>[b(u,{page:C(l).p,"onUpdate:page":a[1]||(a[1]=e=>C(l).p=e),"page-size":C(l).limit,"onUpdate:pageSize":a[2]||(a[2]=e=>C(l).limit=e),"item-count":C(i).total,onRefresh:s},null,8,["page","page-size","item-count"])])),_:1})}}});e("default",y({__name:"index",setup(e){const a=te(),{userInfo:l}=B(a),{t:n}=v(),o=[{key:"manage",label:n("SSL.Domain.index_7"),component:oa},{key:"host",label:n("SSL.Domain.index_27"),component:Ke},{key:"logs",label:n("Config.Safe.index_153"),component:sa}],s=e=>{"host"===e&&(p.value=!1)};return(e,a)=>{const n=t,r=Fe;return C(l).status?(k(),E(r,{key:0,class:"p-16px"},{default:D((()=>[b(n,{value:C(i),"onUpdate:value":[a[0]||(a[0]=e=>M(i)?i.value=e:null),s],options:o},null,8,["value"])])),_:1})):(k(),E(We,{key:1}))}}}))}}}));
