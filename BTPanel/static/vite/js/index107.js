const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/backup-success.js?v=1752142539265","js/public.js?v=1752142539265","js/page_layout.js?v=1752142539265","js/vue.js?v=1752142539265","js/__commonjsHelpers__.js?v=1752142539265","js/naive.js?v=1752142539265","js/common.js?v=1752142539265","css/page_layout.css?v=1752142539265","css/public.css?v=1752142539265","js/backup-error.js?v=1752142539265"])))=>i.map(i=>d[i]);
import{_ as e,a as s,d as a,n as t}from"./page_layout.js?v=1752142539265";import{_ as o}from"./index.js?v=1752142539265";import{_ as i}from"./index101.js?v=1752142539265";import{J as n,K as r}from"./utils.js?v=1752142539265";import{e as p,d as c}from"./public.js?v=1752142539265";import{k as _,P as l,e as u,o as m,b as f,U as d,X as k,an as g,Q as h,V as b,a2 as w,a1 as x,W as y,_ as j}from"./vue.js?v=1752142539265";import{by as v,bX as C}from"./naive.js?v=1752142539265";import"./common.js?v=1752142539265";import"./__commonjsHelpers__.js?v=1752142539265";import"./soft.js?v=1752142539265";const I={class:"p-16px"},B={class:"h-250px"},R=_({__name:"index",props:{onRefresh:{},type:{default:"backup"}},emits:["close"],setup(_,{emit:R}){const{t:z}=l(),E=j((()=>s((()=>import("./backup-success.js?v=1752142539265")),__vite__mapDeps([0,1,2,3,4,5,6,7,8])))),D=j((()=>s((()=>import("./backup-error.js?v=1752142539265")),__vite__mapDeps([9,1,2,3,4,5,6,7,8])))),P=R,U=_,V=p("backup"===U.type?z("Config.Backup.index_80"):z("Config.Backup.index_81")),A=p("backup"===U.type?z("Config.Backup.index_82"):z("Config.Backup.index_83")),L=u({}),O=()=>{const e="backup"===U.type?z("Config.Backup.index_78"):z("Config.Backup.index_79");c({title:z("Config.Backup.index_14"),content:e,onConfirm:async()=>{X&&clearInterval(X),await n({timestamp:void 0}),T()}})},T=()=>{X&&clearInterval(X),P("close"),U.onRefresh()};let X=null;const H=async()=>{const{message:e}=await r({type:U.type});if(a(e)){if(L.task_msg=e.task_msg,L.exec_log=e.exec_log,L.progress=e.progress,100!==e.progress&&2!==e.task_status&&3!==e.task_status||X&&clearInterval(X),2===e.task_status||3===e.task_status)return U.onRefresh(),V.data.type=U.type,V.data.backup_file_info={name:e.backup_file_info.backup_name,files_size:t(Number(e.backup_file_info.backup_file_size)),end_time:e.backup_file_info.done_time,time_count:"backup"===U.type?e.backup_file_info.total_time:e.backup_file_info.restore_total_time,backup_file_sha256:e.backup_file_info.backup_file_sha256},V.show=!0,void(X&&clearInterval(X));3===e.task_status&&(U.onRefresh(),A.data.errData=e.err_info,A.show=!0,X&&clearInterval(X))}};return m((()=>{H(),X=window.setInterval((()=>{H()}),2e3)})),f((()=>{X&&clearInterval(X)})),(s,a)=>{const t=v,n=e,r=C,p=i,c=o;return k(),d("div",I,[g("",!0),h(r,{class:"flex-nowrap! items-center my-10px",size:5},{default:w((()=>[h(t,{height:24,percentage:y(L).progress,"indicator-placement":"inside",processing:y(L).progress<100,status:"success"},null,8,["percentage","processing"]),y(L).progress<100?(k(),x(n,{key:0,name:"base-error",class:"text-error",size:20,onClick:O})):g("",!0)])),_:1}),b("div",B,[h(p,{log:y(L).exec_log},null,8,["log"])]),h(c,{show:y(V).show,"onUpdate:show":a[0]||(a[0]=e=>y(V).show=e),title:y(V).title,data:y(V).data,width:"600","min-height":350,component:y(E),onClose:T},null,8,["show","title","data","component"]),h(c,{show:y(A).show,"onUpdate:show":a[1]||(a[1]=e=>y(A).show=e),title:y(A).title,data:y(A).data,width:"600","min-height":350,component:y(D),onClose:T},null,8,["show","title","data","component"])])}}});export{R as default};
