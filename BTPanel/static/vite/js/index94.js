import{_ as e}from"./index.js?v=1767769852656";import{e as a,_ as t}from"./public.js?v=1767769852656";import{u as s,q as l,W as n,d as i,m as o,X as p,c as u,p as r}from"./page_layout.js?v=1767769852656";import{u as m}from"./soft.js?v=1767769852656";import{g as _}from"./soft2.js?v=1767769852656";import{_ as c,a as d}from"./index.vue_vue_type_script_setup_true_lang4.js?v=1767769852656";import{da as v,dV as f,aC as x,dh as h}from"./naive.js?v=1767769852656";import{k as w,P as j,r as y,R as g,an as k,U as b,V as H,W as $,S,a3 as C,H as I,a4 as P,a2 as U,ak as W,j as T,m as q}from"./vue.js?v=1767769852656";import"./common.js?v=1767769852656";import"./__commonjsHelpers__.js?v=1767769852656";import"./site.js?v=1767769852656";import"./index.vue_vue_type_script_setup_true_lang5.js?v=1767769852656";import"./index.vue_vue_type_script_setup_true_lang6.js?v=1767769852656";import"./index.vue_vue_type_script_setup_true_lang.js?v=1767769852656";import"./index100.js?v=1767769852656";import"./theme-monokai.js?v=1767769852656";import"./file.js?v=1767769852656";const L={key:0,class:"p-30px"},M=["src"],N=["title"],R={class:"font-600 mt-30px"},V=["innerHTML"],O=r(w({__name:"index",props:{name:{},callback:{},hide:{}},setup(r){const{t:w}=j(),O=s(),X=r,z=["nginx","apache","mysql","php"],A=e=>z.includes(e)||e.startsWith("php-"),B=y(),D=y(""),E=y(),F=(e,a)=>{D.value=a.ps},G=y(5),J=e=>q(h,{trigger:"hover",placement:"top-start"},{trigger:()=>q("span",e.label),default:()=>q("span",e.label)}),K=y(),Q=async(e=1)=>{var a;try{if(K.value){5!==G.value&&(ee.data={plugin_title:K.value.title,plugin_name:K.value.name},ee.show=!0);const{message:t}=await n({sName:K.value.name,version:B.value,type:e},5===G.value);if(i(t)){if(t.result)return o.success(t.result),O.taskCount+=1,null==(a=X.callback)||a.call(X),X.hide(),void p();await m({name:t.name,tmp_path:t.tmp_path,title:w("Soft.index_21")},()=>{var e;null==(e=X.callback)||e.call(X)})}X.hide()}}catch(t){X.hide()}},Y=()=>{Z.show=!0},Z=a(w("Home.Install.index_7"),{name:X.name,callback:()=>{Q(0)}}),ee=a("");return(async()=>{const{message:e}=await u({sName:X.name},!0);i(e)&&(K.value=e,E.value=e.versions.map(a=>{const t=a.m_version+"."+a.version;return{label:5===e.type?a.m_version:t||a.m_version,value:5===e.type?a.m_version:t||a.m_version,ps:a.update_msg}}),B.value=E.value[0].value,D.value=E.value[0].ps,G.value=e.type)})(),(a,s)=>{const n=v,i=f,o=x,p=l,u=t,r=e;return b(K)?(H(),g("div",L,[$(n,{class:"justify-between! items-center"},{default:C(()=>[$(n,{class:"items-center"},{default:C(()=>[S("img",{class:"w-40px",src:b(_)(b(K).name)},null,8,M),S("div",null,[S("p",{class:I(["font-600 text-18px max-w-290px",{"max-w-190px!":A(b(K).name)}]),title:"".concat(b(K).title," ").concat(b(B))},P(b(K).title)+" "+P(b(K).title.indexOf("PHP-")>-1?"":b(B)),11,N)])]),_:1}),$(n,null,{default:C(()=>[$(i,{class:"w-100px!",value:b(B),"onUpdate:value":[s[0]||(s[0]=e=>W(B)?B.value=e:null),F],options:b(E),"consistent-menu-width":!1,"render-label":J},null,8,["value","options"]),A(b(K).name)?(H(),U(o,{key:0,onClick:Y},{default:C(()=>[T(P(a.$t("Home.Install.index_7")),1)]),_:1})):k("",!0),$(o,{type:"primary",onClick:s[1]||(s[1]=e=>Q(1))},{default:C(()=>[T(P(A(b(K).name)?a.$t("Home.Install.index_5"):a.$t("Soft.index_34")),1)]),_:1})]),_:1}),$(p)]),_:1}),S("div",R,P(a.$t("Soft.index_39"))+"ï¼š",1),S("span",{class:"py-10px inline-block leading-20px text-font2",innerHTML:b(D)},null,8,V),$(u,null,{default:C(()=>[S("li",null,P(a.$t("Soft.index_35")),1),S("li",null,P(a.$t("Soft.index_36")),1),S("li",null,P(a.$t("Soft.index_37")),1)]),_:1}),$(r,{show:b(Z).show,"onUpdate:show":s[2]||(s[2]=e=>b(Z).show=e),title:b(Z).title,data:b(Z).data,width:480,footer:!0,"confirm-text":a.$t("WP.TableRow.index_13"),component:c},null,8,["show","title","data","confirm-text"]),$(r,{show:b(ee).show,"onUpdate:show":s[3]||(s[3]=e=>b(ee).show=e),title:b(ee).title,data:b(ee).data,width:480,component:d},null,8,["show","title","data"])])):k("",!0)}}}),[["__scopeId","data-v-fafc5002"]]);export{O as default};
