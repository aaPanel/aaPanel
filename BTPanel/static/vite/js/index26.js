const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/index167.js?v=1769066082311","js/index.vue_vue_type_script_setup_true_lang.js?v=1769066082311","js/vue.js?v=1769066082311","js/__commonjsHelpers__.js?v=1769066082311","js/naive.js?v=1769066082311","js/common.js?v=1769066082311","js/page_layout.js?v=1769066082311","js/public.js?v=1769066082311","css/public.css?v=1769066082311","css/page_layout.css?v=1769066082311","js/index.vue_vue_type_script_setup_true_lang2.js?v=1769066082311","js/index103.js?v=1769066082311","css/index15.css?v=1769066082311","js/index139.js?v=1769066082311","js/index140.js?v=1769066082311","css/index26.css?v=1769066082311","js/soft.js?v=1769066082311","js/site.js?v=1769066082311"])))=>i.map(i=>d[i]);
import{i as a,o as e,aO as t,aR as s,aS as i,aV as n,d as o,x as l,y as d,q as p,a as r,aU as c}from"./page_layout.js?v=1769066082311";import{_}from"./index.js?v=1769066082311";import{_ as u}from"./index.vue_vue_type_script_setup_true_lang5.js?v=1769066082311";import{_ as m}from"./index.vue_vue_type_script_setup_true_lang7.js?v=1769066082311";import{_ as y}from"./index.vue_vue_type_script_setup_true_lang9.js?v=1769066082311";import{s as b,e as g,c as h,v as k,f,a as x,d as w,h as v}from"./public.js?v=1769066082311";import{_ as j}from"./index.vue_vue_type_script_setup_true_lang8.js?v=1769066082311";import{_ as D}from"./index138.js?v=1769066082311";import{u as C,a as R,b as q,c as U,h as P,_ as $,d as B,e as I,f as S,g as W}from"./index139.js?v=1769066082311";import{g as L}from"./hooks.js?v=1769066082311";import{W as O,j as z,u as A,k as V,P as E,e as K,w as T,a2 as H,V as N,a3 as F,S as G,U as J,ak as M,an as Q,a4 as X,_ as Y,N as Z}from"./vue.js?v=1769066082311";import{dT as aa,aC as ea}from"./naive.js?v=1769066082311";import"./common.js?v=1769066082311";import"./__commonjsHelpers__.js?v=1769066082311";import"./index.vue_vue_type_script_setup_true_lang6.js?v=1769066082311";import"./php.js?v=1769066082311";import"./soft.js?v=1769066082311";import"./site.js?v=1769066082311";import"./index140.js?v=1769066082311";const{t:ta}=a.global;const sa={class:"p-16px"},ia=V({__name:"index",setup(a){const V=Y(()=>r(()=>import("./index167.js?v=1769066082311"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]))),{t:ia}=E(),na=t(),oa=g(),la=()=>{oa.show=!0},da=()=>{S()},pa=()=>{W()},ra=async()=>{await i(na.type,{ids:[]}),ha()},ca=K({p:1,limit:10,sid:-1,search:""}),{keys:_a,table:ua,columns:ma}=h([{type:"selection",width:40},{key:"name",title:ia("Database.index_12"),width:"12%",minWidth:120},{key:"username",title:ia("Database.index_13"),width:"12%",minWidth:120},{key:"password",title:ta("Database.index_14"),minWidth:150,render:a=>O(b,{value:a.password},null)},{key:"backup_count",title:ta("Database.index_16"),width:"12%",render:a=>{let t;return O("div",{class:"flex items-center"},[O(e,{type:a.backup_count>0?"primary":"warning",onClick:()=>{C(a)}},{default:()=>[a.backup_count>0?"".concat(ta("Database.mongo.index_7"),"(").concat(a.backup_count,")"):ta("Database.index_18")]}),O("span",{class:"mx-4px"},[z("|")]),O(e,{onClick:()=>{R(a,"pgsql")}},(s=t=ta("Public.Btn.Import"),"function"==typeof s||"[object Object]"===Object.prototype.toString.call(s)&&!A(s)?t:{default:()=>[t]}))]);var s}},{key:"sid",title:ta("Database.mongo.index_8"),width:"12%",minWidth:120,render:a=>L(a)},k({onBlur:async(a,e)=>{await c({id:e.id,ps:a})}}),f({width:220,options:a=>[{label:"Adminer",show:0===a.db_type,onClick:()=>{ka(a)}},{label:"Password",onClick:()=>{q(a)}},{label:ia("Public.Btn.Del"),onClick:()=>{U([a])}}]})]),ya=[{key:"sync",label:ia("Database.index_24"),onBatch:a=>{x({title:ia("Database.index_25"),content:ia("Database.index_26"),onConfirm:async({hide:e})=>{await i(na.type,{ids:a.map(a=>a.id)}),e()}})}},{key:"backup",type:"confirm",label:ia("Database.index_27"),confirm:{title:ia("Database.index_28"),desc:ia("Database.index_29"),api:a=>s(na.type,{id:a.id},!1),done:()=>{ha()},columns:[{key:"name",title:ia("Database.index_12")}]}},{key:"delete",label:ia("Database.index_30"),onBatch:a=>{U(a)}}],{loading:ba,setLoading:ga}=w(),ha=async()=>{try{ga(!0);const{message:a}=await n(na.type,(()=>{const a={...Z(ca)};return-1===a.sid&&delete a.sid,a})());o(a)?(ua.data=l(a.data)?a.data:[],ua.total=d(a.page)):(ua.data=[],ua.total=0)}finally{_a.value=[],ga(!1)}};T(()=>na.isRefresh,a=>{a&&(na.setRefresh(!1),na.delRemoteId===ca.sid&&(ca.sid=-1),ha())});const ka=a=>{P(a?{type:"pgsql",username:a.username,password:a.password,db:a.name}:{type:"pgsql"})};return(async()=>{await na.getConfig(),await na.getRemote(),na.isInstallPgsql&&ha()})(),(a,e)=>{const t=ea,s=p,i=D,n=j,o=v,l=y,d=m,r=u,c=_,b=aa;return N(),H(J(I),null,{default:F(()=>[O(b,null,{default:F(()=>[G("div",sa,[O(r,{feedback:!0},{toolsLeft:F(()=>[O(t,{type:"primary",onClick:la},{default:F(()=>[z(X(a.$t("Database.index_1")),1)]),_:1}),O(t,{onClick:da},{default:F(()=>[z(X(a.$t("Database.index_2")),1)]),_:1}),O(t,{onClick:e[0]||(e[0]=a=>ka())},{default:F(()=>e[8]||(e[8]=[z(" Adminer ",-1)])),_:1,__:[8]}),O(t,{onClick:pa},{default:F(()=>[z(X(a.$t("Database.index_4")),1)]),_:1}),O(s,{class:"mx-0!",vertical:""}),O(t,{onClick:ra},{default:F(()=>[z(X(a.$t("Database.index_5")),1)]),_:1}),O(t,{onClick:J(B)},{default:F(()=>[z(X(a.$t("Database.index_6")),1)]),_:1},8,["onClick"]),J(na).isInstallPgsql?(N(),H(i,{key:0,"soft-name":"pgsql","open-soft":"pgsql_manager"})):Q("",!0)]),toolsRight:F(()=>[O(J($),{value:J(ca).sid,"onUpdate:value":e[1]||(e[1]=a=>J(ca).sid=a),"store-key":"database-pgsql-page",onChange:ha},null,8,["value"]),O(n,{value:J(ca).search,"onUpdate:value":e[2]||(e[2]=a=>J(ca).search=a),placeholder:"Database search",onSearch:ha},null,8,["value"])]),table:F(()=>[O(o,{"checked-row-keys":J(_a),"onUpdate:checkedRowKeys":e[3]||(e[3]=a=>M(_a)?_a.value=a:null),loading:J(ba),data:J(ua).data,columns:J(ma)},null,8,["checked-row-keys","loading","data","columns"])]),pageLeft:F(()=>[O(l,{"checked-row-keys":J(_a),"onUpdate:checkedRowKeys":e[4]||(e[4]=a=>M(_a)?_a.value=a:null),data:J(ua).data,options:ya},null,8,["checked-row-keys","data"])]),pageRight:F(()=>[O(d,{page:J(ca).p,"onUpdate:page":e[5]||(e[5]=a=>J(ca).p=a),"page-size":J(ca).limit,"onUpdate:pageSize":e[6]||(e[6]=a=>J(ca).limit=a),"store-key":"database-pgsql-page","item-count":J(ua).total,onRefresh:ha},null,8,["page","page-size","item-count"])]),_:1}),O(c,{show:J(oa).show,"onUpdate:show":e[7]||(e[7]=a=>J(oa).show=a),title:a.$t("Database.mongo.index_4"),width:540,"min-height":280,footer:!0,component:J(V)},null,8,["show","title","component"])])]),_:1})]),_:1})}}});export{ia as default};
