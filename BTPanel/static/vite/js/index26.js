const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/index156.js?v=1763625242172","js/public.js?v=1763625242172","js/page_layout.js?v=1763625242172","js/vue.js?v=1763625242172","js/__commonjsHelpers__.js?v=1763625242172","js/naive.js?v=1763625242172","js/common.js?v=1763625242172","css/page_layout.css?v=1763625242172","css/public.css?v=1763625242172","js/index.vue_vue_type_script_setup_true_lang.js?v=1763625242172","js/index157.js?v=1763625242172","js/index.vue_vue_type_script_setup_true_lang5.js?v=1763625242172","js/index.vue_vue_type_script_setup_true_lang6.js?v=1763625242172","css/index15.css?v=1763625242172","js/index158.js?v=1763625242172","css/index79.css?v=1763625242172"])))=>i.map(i=>d[i]);
import{_ as e,bn as a,bQ as t,bR as s,bS as i,x as d,bT as l,c as n,y as o,a as r,q as u}from"./page_layout.js?v=1763625242172";import{_}from"./index.js?v=1763625242172";import{_ as c}from"./index.vue_vue_type_script_setup_true_lang5.js?v=1763625242172";import{_ as p}from"./index.vue_vue_type_script_setup_true_lang7.js?v=1763625242172";import{_ as m}from"./index.vue_vue_type_script_setup_true_lang12.js?v=1763625242172";import{i as x,e as h,c as b,f as w,d as v,a as f,w as y,h as g}from"./public.js?v=1763625242172";import{_ as k}from"./index.vue_vue_type_script_setup_true_lang8.js?v=1763625242172";import{_ as j}from"./index107.js?v=1763625242172";import{_ as D}from"./index130.js?v=1763625242172";import{g as R,_ as C,e as I}from"./index131.js?v=1763625242172";import{k as U,R as E,S as L,U as P,X as $,a3 as S,j as W,a4 as z,P as A,r as B,x as O,e as T,w as V,a2 as H,V as K,N as Q,an as q,aj as F,O as N,F as X,_ as G}from"./vue.js?v=1763625242172";import{dc as J,e0 as M,aC as Y,d9 as Z,dQ as ee,dS as ae}from"./naive.js?v=1763625242172";import"./common.js?v=1763625242172";import"./__commonjsHelpers__.js?v=1763625242172";import"./index.vue_vue_type_script_setup_true_lang6.js?v=1763625242172";import"./php.js?v=1763625242172";import"./soft.js?v=1763625242172";import"./site.js?v=1763625242172";import"./index132.js?v=1763625242172";const te={class:"flex"},se={class:"w-0 flex-1 flex items-center"},ie={style:{minWidth:0}},de=["title"],le=U({__name:"index",props:{value:{default:""}},setup(a){const t=a,s=async()=>{x("".concat(t.value))};return(a,t)=>{const i=J,d=e;return E(),L("div",te,[P("div",se,[P("div",ie,[$(i,{class:"max-w-full",tooltip:{width:"trigger",scrollable:!0,contentStyle:{maxHeight:"360px",overflow:"auto"}}},{default:S((()=>[W(z(a.value),1)])),_:1})]),P("button",{class:"reset mx-8px text-15px cursor-pointer text-#333",title:a.$t("Public.Btn.Copy"),onClick:s},[$(d,{name:"common-copy"})],8,de)])])}}});function ne(){const{t:e}=A();return{key:"val",title:e("Database.redis.index_3"),render:e=>$(le,{value:e.val},null)}}const oe={class:"p-16px"},re={class:"flex flex-wrap justify-between mb-12px"},ue={class:"flex items-center text-warning"},_e={class:"ml-4px"},ce=U({__name:"index",setup(x){const{t:U}=A(),J=G((()=>r((()=>import("./index156.js?v=1763625242172")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9])))),te=G((()=>r((()=>import("./index157.js?v=1763625242172")),__vite__mapDeps([10,11,12,2,3,4,5,6,1,8,7,13])))),se=G((()=>r((()=>import("./index158.js?v=1763625242172")),__vite__mapDeps([14,9,3,4,5,6,2,1,8,7,15])))),ie=a(),de=B(null),le=O([]),ce=h("",{row:void 0,sid:null,dbIdx:0,isEdit:!1}),pe=()=>{ce.data.dbIdx=we.db_idx,ce.data.row=void 0,ce.data.sid=de.value,ce.data.isEdit=!1,ce.title=U("Database.redis.index_20"),ce.show=!0},me=h(U("Database.redis.index_26"),{sid:null}),xe=()=>{me.data.sid=de.value,me.show=!0},he=h(U("Database.redis.index_27"),{sid:null,databaseList:[]}),be=()=>{he.data.sid=de.value,he.data.databaseList=le.value,he.show=!0},we=T({db_idx:-1,db_type:0,p:1,limit:20,search:""}),{keys:ve,table:fe,columns:ye}=b([{type:"selection",width:40},{key:"name",title:U("Database.redis.index_2"),width:"20%",minWidth:120,ellipsis:{tooltip:{width:"trigger"}}},ne(),{key:"type",title:U("Database.redis.index_28"),width:"10%",minWidth:100,render:e=>M(e.type)},{key:"len",title:U("Database.redis.index_29"),width:"10%",minWidth:100},{key:"endtime",title:U("Database.redis.index_5"),width:"10%",minWidth:100,render:e=>0===e.endtime?U("Database.redis.index_30"):t(e.endtime)},w({width:100,options:e=>[{label:U("Public.Btn.Edit"),onClick:()=>{(e=>{ce.data.dbIdx=we.db_idx,ce.data.row=e,ce.data.sid=de.value,ce.data.isEdit=!0,ce.title="".concat(U("Database.redis.index_25")," [").concat(e.name,"]"),ce.show=!0})(e)}},{label:U("Public.Btn.Del"),onClick:()=>{f({title:U("Database.redis.index_31"),content:U("Database.redis.index_31",[e.name]),onConfirm:async({hide:a})=>{null!==de.value&&-1!==we.db_idx&&(await s({sid:de.value,key:e.name,db_idx:we.db_idx}),1===fe.data.length&&(we.db_idx=-1),Ce(),a())}})}}]})]),ge=[{key:"del",type:"confirm",label:U("Public.Batch.ChooseDel"),confirm:{title:U("Database.redis.index_33"),desc:U("Database.redis.index_34"),columns:[{key:"name",title:U("Database.redis.index_2"),ellipsis:{tooltip:{width:"trigger"}}}],api:async e=>{null!==de.value&&-1!==we.db_idx&&await s({sid:de.value,key:e.name,db_idx:we.db_idx},!1)},done:e=>{fe.total===e.length&&(we.db_idx=-1),Ce()}}}],ke=async()=>{if(null===de.value)return;const{message:e}=await i({sid:de.value});d(e)&&e.length>0?(le.value=e,-1===we.db_idx&&(we.db_idx=e[0].id)):(le.value=[],fe.data=[],fe.total=0,we.db_idx=-1)},{loading:je,setLoading:De}=v(),Re=async()=>{try{De(!0);const e=de.value;if(null===e)return;if(le.value.length<=0)return;if(-1===we.db_idx)return;const{message:a}=await l({sid:e,...Q(we)});n(a)?(fe.data=d(a.data)?a.data:[],fe.total=o(a.page)):(fe.data=[],fe.total=0)}finally{ve.value=[],De(!1)}},Ce=async()=>{await ke(),await Re()};V((()=>ie.isRefresh),(e=>{e&&(ie.setRefresh(!1),-1!==ie.addRedisId&&ie.addRedisId!==we.db_idx&&(we.db_idx=ie.addRedisId,ie.setAddRedisId(-1)),Ce())}));return(async()=>{await ie.getRemote(),ie.install?(ie.remoteList.length>0&&(de.value=ie.remoteList[0].id),await ke(),await Re()):y()})(),(a,t)=>{const s=Y,i=u,d=D,l=Z,n=e,o=ee,r=j,x=k,h=g,b=m,w=p,v=c,f=_,y=ae;return E(),H(K(I),null,{default:S((()=>[$(y,null,{default:S((()=>[P("div",oe,[P("div",re,[$(l,{class:"items-center"},{default:S((()=>[$(s,{type:"primary",onClick:pe},{default:S((()=>[W(z(a.$t("Database.redis.index_20")),1)])),_:1}),$(s,{onClick:K(R)},{default:S((()=>[W(z(a.$t("Database.index_4")),1)])),_:1},8,["onClick"]),$(s,{onClick:xe},{default:S((()=>[W(z(a.$t("Database.redis.index_21")),1)])),_:1}),$(i,{class:"mx-0!",vertical:""}),$(s,{onClick:be},{default:S((()=>[W(z(a.$t("Database.redis.index_22")),1)])),_:1}),K(ie).isInstallRedis?(E(),H(d,{key:0,"soft-name":"redis"})):q("",!0)])),_:1}),$(l,{class:"items-center"},{default:S((()=>[P("div",ue,[$(n,{name:"base-info",size:"14"}),P("span",_e,z(a.$t("Database.redis.index_23")),1)]),$(K(C),{value:K(de),"onUpdate:value":t[0]||(t[0]=e=>F(de)?de.value=e:null),all:!1,"store-key":"database-redis-page",onChange:ke},null,8,["value"])])),_:1})]),K(le).length>0?(E(),H(r,{key:0,value:K(we).db_idx,"onUpdate:value":[t[1]||(t[1]=e=>K(we).db_idx=e),Re]},{default:S((()=>[(E(!0),L(X,null,N(K(le),(e=>(E(),H(o,{key:e.id,name:e.id,tab:"".concat(e.name,"(").concat(e.keynum,")")},null,8,["name","tab"])))),128))])),_:1},8,["value"])):q("",!0),$(v,{feedback:!0},{toolsLeft:S((()=>t[10]||(t[10]=[P("div",null,null,-1)]))),toolsRight:S((()=>[$(x,{value:K(we).search,"onUpdate:value":t[2]||(t[2]=e=>K(we).search=e),placeholder:a.$t("Database.redis.index_24"),onSearch:Re},null,8,["value","placeholder"])])),table:S((()=>[$(h,{"checked-row-keys":K(ve),"onUpdate:checkedRowKeys":t[3]||(t[3]=e=>F(ve)?ve.value=e:null),"row-key":"name",loading:K(je),data:K(fe).data,columns:K(ye)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:S((()=>[$(b,{"checked-row-keys":K(ve),"onUpdate:checkedRowKeys":t[4]||(t[4]=e=>F(ve)?ve.value=e:null),"row-key":"name",data:K(fe).data,options:ge},null,8,["checked-row-keys","data"])])),pageRight:S((()=>[$(w,{page:K(we).p,"onUpdate:page":t[5]||(t[5]=e=>K(we).p=e),"page-size":K(we).limit,"onUpdate:pageSize":t[6]||(t[6]=e=>K(we).limit=e),"store-key":"database-redis-page","item-count":K(fe).total,onRefresh:Re},null,8,["page","page-size","item-count"])])),_:1}),$(f,{show:K(ce).show,"onUpdate:show":t[7]||(t[7]=e=>K(ce).show=e),title:K(ce).title,width:420,"min-height":340,footer:!0,data:K(ce).data,component:K(J)},null,8,["show","title","data","component"]),$(f,{show:K(me).show,"onUpdate:show":t[8]||(t[8]=e=>K(me).show=e),title:K(me).title,width:920,"min-height":156,footer:!1,data:K(me).data,component:K(te)},null,8,["show","title","data","component"]),$(f,{show:K(he).show,"onUpdate:show":t[9]||(t[9]=e=>K(he).show=e),title:K(he).title,width:420,"min-height":240,footer:!0,data:K(he).data,component:K(se)},null,8,["show","title","data","component"])])])),_:1})])),_:1})}}});export{ce as default};
