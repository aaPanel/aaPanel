const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/index242.js?v=1763625242172","js/index107.js?v=1763625242172","js/vue.js?v=1763625242172","js/__commonjsHelpers__.js?v=1763625242172","js/naive.js?v=1763625242172","js/common.js?v=1763625242172","js/page_layout.js?v=1763625242172","js/public.js?v=1763625242172","css/public.css?v=1763625242172","css/page_layout.css?v=1763625242172","css/index21.css?v=1763625242172","js/ssl.js?v=1763625242172","js/cert.js?v=1763625242172","js/index99.js?v=1763625242172","css/index14.css?v=1763625242172","js/ssl-lets-progress.js?v=1763625242172","js/index.js?v=1763625242172","css/index110.css?v=1763625242172","css/ssl-lets-progress.css?v=1763625242172","js/index132.js?v=1763625242172","css/index23.css?v=1763625242172","js/index.vue_vue_type_script_setup_true_lang5.js?v=1763625242172","js/index.vue_vue_type_script_setup_true_lang6.js?v=1763625242172","css/index15.css?v=1763625242172","js/utils3.js?v=1763625242172","js/index217.js?v=1763625242172","js/index.vue_vue_type_script_setup_true_lang.js?v=1763625242172","js/paypal-js.js?v=1763625242172","css/index48.css?v=1763625242172","js/site.js?v=1763625242172","js/index.vue_vue_type_script_setup_true_lang7.js?v=1763625242172","js/index.vue_vue_type_script_setup_true_lang12.js?v=1763625242172","js/index.vue_vue_type_script_setup_true_lang8.js?v=1763625242172","js/site4.js?v=1763625242172","js/index245.js?v=1763625242172","css/index59.css?v=1763625242172","js/index.vue_vue_type_script_setup_true_lang10.js?v=1763625242172","js/index98.js?v=1763625242172","css/index13.css?v=1763625242172","js/index100.js?v=1763625242172","js/theme-monokai.js?v=1763625242172","js/file.js?v=1763625242172","css/index16.css?v=1763625242172","js/index104.js?v=1763625242172","css/index19.css?v=1763625242172","js/soft.js?v=1763625242172","js/useOperate.js?v=1763625242172","js/useModal2.js?v=1763625242172","css/index102.css?v=1763625242172","js/index243.js?v=1763625242172","js/index244.js?v=1763625242172"])))=>i.map(i=>d[i]);
import{c as e,i as t,o as a,x as l,m as n,d_ as i,by as o,q as r,d$ as u,aY as s,T as d,a as c,bm as p,u as _,y as x}from"./page_layout.js?v=1763625242172";import{_ as y}from"./index132.js?v=1763625242172";import{_ as m}from"./index.js?v=1763625242172";import{_ as h}from"./index.vue_vue_type_script_setup_true_lang5.js?v=1763625242172";import{_ as v}from"./index.vue_vue_type_script_setup_true_lang7.js?v=1763625242172";import{_ as f}from"./index.vue_vue_type_script_setup_true_lang12.js?v=1763625242172";import{a as b,R as w,c as g,d as S,h as k,_ as P,f as $,e as C,r as L,v as U,F as T,q as V,u as R,m as j}from"./public.js?v=1763625242172";import{_ as E}from"./index.vue_vue_type_script_setup_true_lang8.js?v=1763625242172";import{p as z,i as N,X as B,k as O,P as q,r as I,R as A,S as D,U as H,a3 as M,a4 as K,V as W,aj as F,j as Y,a0 as J,e as X,N as G,an as Q,F as Z,a2 as ee,o as te,s as ae,n as le,_ as ne,u as ie,w as oe}from"./vue.js?v=1763625242172";import{l as re}from"./site4.js?v=1763625242172";import{m as ue,n as se,o as de,p as ce,q as pe,r as _e,t as xe,u as ye,v as me,w as he,x as ve,y as fe,z as be,A as we,B as ge,C as Se,D as ke,E as Pe,F as $e,G as Ce,H as Le,I as Ue,J as Te,K as Ve,L as Re,M as je,N as Ee,O as ze,P as Ne,Q as Be,R as Oe,S as qe,T as Ie,U as Ae,V as De,W as He,X as Me,Y as Ke,Z as We,_ as Fe,$ as Ye}from"./site.js?v=1763625242172";import{_ as Je}from"./index245.js?v=1763625242172";import{_ as Xe}from"./index99.js?v=1763625242172";import{aC as Ge,au as Qe,dP as Ze,dj as et,df as tt,dV as at,d9 as lt,dW as nt,d8 as it,_ as ot,eg as rt,dS as ut}from"./naive.js?v=1763625242172";import{_ as st}from"./index107.js?v=1763625242172";import{_ as dt}from"./index.vue_vue_type_script_setup_true_lang.js?v=1763625242172";import{_ as ct}from"./index.vue_vue_type_script_setup_true_lang10.js?v=1763625242172";import pt from"./index100.js?v=1763625242172";import{c as _t,g as xt}from"./__commonjsHelpers__.js?v=1763625242172";import{_ as yt}from"./index98.js?v=1763625242172";import{_ as mt}from"./index104.js?v=1763625242172";import{a as ht}from"./soft.js?v=1763625242172";import{u as vt}from"./useOperate.js?v=1763625242172";const ft=Symbol("server-list");async function bt(t){const{message:a}=await ue({site_name:t});if(e(a))return a}async function wt(t,a){const{message:l}=await se({site_name:t,proxy_path:a});if(e(l))return l}function gt(){return N(ft)}const{t:St}=t.global;function kt({delDomain:e}){return{key:"action",title:St("Public.Table.Action"),width:80,align:"right",render:t=>B(w,{options:[{label:St("Public.Btn.Del"),onClick:()=>{b({title:"".concat(St("Site.Batch.index_12")," [").concat(t.name,"]"),content:St("Site.Batch.index_13"),onConfirm:async({hide:a})=>{await e(t),a()}})}}]},null)}}const Pt={class:"flex justify-between items-center mb-24px"},$t={class:"w-400px"},Ct={class:"pr-40px"},Lt=O({__name:"index",setup(t,{expose:i}){const{t:o}=q(),{data:r}=gt(),u=I(""),s=async()=>{""!==u.value.trim()?(await pe({id:r.id,site_name:r.name,domains:u.value.trim().split("\n").join(",")}),u.value="",b()):n.error(o("Site.Proxy.index_59"))},d=async e=>{await de({id:r.id,site_name:r.name,domain:e.name,port:e.port}),b()},{keys:c,table:p,columns:_}=g([{type:"selection",width:40},{key:"name",title:St("Site.TableRow.index_19"),render:e=>B(a,{href:"http://".concat(e.name,":").concat(e.port),target:"_blank"},{default:()=>[e.name]})},{key:"port",title:St("Site.TableRow.index_16"),width:100},kt({delDomain:d})]),x=()=>{p.data.length>1?_.value[_.value.length-1]=kt({delDomain:d}):_.value[_.value.length-1]={key:"action",title:St("Public.Table.Action"),width:80,align:"right",render:()=>B("span",{class:"text-default"},[St("Site.TableOP.index_9")])}},y=[{key:"del",type:"confirm",label:o("Site.Batch.index_20"),confirm:{title:o("Site.Batch.index_21"),desc:o("Site.Batch.index_11"),api:e=>de({id:r.id,site_name:r.name,domain:e.name,port:e.port},!1),done:()=>{b()},columns:[{key:"name",title:o("Site.TableRow.index_19"),ellipsis:{tooltip:{width:"trigger"}}}]}}],{loading:m,setLoading:v}=S(),b=async()=>{try{v(!0);const t={id:r.id,site_name:r.name},{message:a}=await ce(t);e(a)&&(p.data=l(a.domain_list)?a.domain_list:[],x())}catch(t){n.error(o("Site.Proxy.index_60")),console.error(t)}finally{c.value=[],v(!1)}};return b(),i({init:b}),(e,t)=>{const a=Xe,l=Ge,n=k,i=f,o=h;return A(),D("div",null,[H("div",Pt,[H("div",$t,[B(a,{value:W(u),"onUpdate:value":t[0]||(t[0]=e=>F(u)?u.value=e:null)},{default:M((()=>[H("p",null,K(e.$t("Site.PHP.add_site_5")),1),H("p",null,K(e.$t("Site.PHP.add_site_6")),1),H("p",null,K(e.$t("Site.PHP.add_site_7")),1)])),_:1},8,["value"])]),H("div",Ct,[B(l,{type:"primary",onClick:s},{default:M((()=>[Y(K(e.$t("Site.Cert.index_62")),1)])),_:1})])]),B(o,null,{table:M((()=>[B(n,{"checked-row-keys":W(c),"onUpdate:checkedRowKeys":t[1]||(t[1]=e=>F(c)?c.value=e:null),loading:W(m),"max-height":400,data:W(p).data,columns:W(_)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:M((()=>[B(i,{"checked-row-keys":W(c),"onUpdate:checkedRowKeys":t[2]||(t[2]=e=>F(c)?c.value=e:null),data:W(p).data,options:y},null,8,["checked-row-keys","data"])])),_:1})])}}}),Ut={class:"p-20px"},Tt={class:"w-280px"},Vt=O({__name:"form",props:{data:{}},setup(e,{expose:t}){const{t:a}=q(),l=i(),{siteName:n}=J(l),o=e,{getList:r}=o.data,u=I(null),s=X({name:""}),d={name:{required:!0,message:a("Site.Proxy.index_20"),trigger:["blur","input"]}};return t({onConfirm:async({hide:e})=>{var t;await(null==(t=u.value)?void 0:t.validate()),await _e({site_name:n.value,ip_type:"white",ips:s.name}),null==r||r(),e()}}),(e,t)=>{const a=Qe,l=Ze,n=dt,i=P;return A(),D("div",Ut,[B(n,{ref_key:"formRef",ref:u,model:W(s),rules:d},{default:M((()=>[B(l,{label:e.$t("Site.Proxy.index_18"),path:"name"},{default:M((()=>[H("div",Tt,[B(a,{type:"textarea",value:W(s).name,"onUpdate:value":t[0]||(t[0]=e=>W(s).name=e),placeholder:e.$t("Site.Proxy.index_20")},null,8,["value","placeholder"])])])),_:1},8,["label"])])),_:1},8,["model"]),B(i,{class:"mt-4px"},{default:M((()=>[H("li",null,K(e.$t("Site.Proxy.index_19")),1)])),_:1})])}}}),Rt=O({__name:"index",setup(t,{expose:a}){const{t:l}=q(),{loading:n,setLoading:o}=S(),r=i(),{siteName:u}=J(r),s=async()=>{try{o(!0);const t=await bt(u.value);e(t)&&(c.data=t.ip_limit.ip_white.map((e=>({ip:e}))))}finally{d.value=[],o(!1)}};s(),a({init:s});const{keys:d,table:c,columns:p}=g([{type:"selection",width:40},{key:"ip",title:l("Site.Proxy.index_18"),ellipsis:{tooltip:{width:"trigger"}}},$({width:130,options:e=>[{label:l("Public.Btn.Del"),onClick:()=>{b({title:"".concat(l("Site.TableOP.index_6")," [").concat(e.ip,"]"),content:l("Site.Proxy.index_23"),onConfirm:async({hide:t})=>{await xe({site_name:u.value,ip_type:"white",ip:e.ip}),s(),t()}})}}]})]),_=[{key:"del",label:l("Site.Batch.index_20"),onBatch:e=>{b({title:l("Site.Batch.index_21"),content:l("Site.Batch.index_11"),onConfirm:async()=>{await ye({site_name:u.value,ip_type:"white",ips:e.map((e=>e.ip)).join("\n")}),s()}})}}],x=()=>{y.title=l("Site.Proxy.index_22"),y.show=!0},y=C(l("Site.Proxy.index_22"),{getList:s});return(e,t)=>{const a=Ge,l=k,i=f,o=h,r=m;return A(),D("div",null,[B(o,null,{toolsLeft:M((()=>[B(a,{type:"primary",onClick:x},{default:M((()=>[Y(K(e.$t("Site.Proxy.index_22")),1)])),_:1})])),table:M((()=>[B(l,{"checked-row-keys":W(d),"onUpdate:checkedRowKeys":t[0]||(t[0]=e=>F(d)?d.value=e:null),"row-key":"ip",loading:W(n),"max-height":440,data:W(c).data,columns:W(p)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:M((()=>[B(i,{"checked-row-keys":W(d),"onUpdate:checkedRowKeys":t[1]||(t[1]=e=>F(d)?d.value=e:null),"row-key":"ip",data:W(c).data,options:_},null,8,["checked-row-keys","data"])])),_:1}),B(r,{show:W(y).show,"onUpdate:show":t[2]||(t[2]=e=>W(y).show=e),title:W(y).title,data:W(y).data,width:480,footer:!0,component:Vt},null,8,["show","title","data"])])}}}),jt={class:"p-20px"},Et={class:"w-280px"},zt=O({__name:"form",props:{data:{}},setup(e,{expose:t}){const{t:a}=q(),l=i(),{siteName:n}=J(l),o=e,{getList:r}=o.data,u=I(null),s=X({name:""}),d={name:{required:!0,message:a("Site.Proxy.index_20"),trigger:["blur","input"]}};return t({onConfirm:async({hide:e})=>{var t;await(null==(t=u.value)?void 0:t.validate()),await _e({site_name:n.value,ip_type:"black",ips:s.name}),null==r||r(),e()}}),(e,t)=>{const a=Qe,l=Ze,n=dt,i=P;return A(),D("div",jt,[B(n,{ref_key:"formRef",ref:u,model:W(s),rules:d},{default:M((()=>[B(l,{label:e.$t("Site.Proxy.index_18"),path:"name"},{default:M((()=>[H("div",Et,[B(a,{type:"textarea",value:W(s).name,"onUpdate:value":t[0]||(t[0]=e=>W(s).name=e),placeholder:e.$t("Site.Proxy.index_20")},null,8,["value","placeholder"])])])),_:1},8,["label"])])),_:1},8,["model"]),B(i,{class:"mt-4px"},{default:M((()=>[H("li",null,K(e.$t("Site.Proxy.index_19")),1)])),_:1})])}}}),Nt=O({__name:"index",setup(t,{expose:a}){const{t:l}=q(),{loading:n,setLoading:o}=S(),r=i(),{siteName:u}=J(r),s=async()=>{try{o(!0);const t=await bt(u.value);e(t)&&(c.data=t.ip_limit.ip_black.map((e=>({ip:e}))))}finally{d.value=[],o(!1)}};s(),a({init:s});const{keys:d,table:c,columns:p}=g([{type:"selection",width:40},{key:"ip",title:l("Site.Proxy.index_18"),ellipsis:{tooltip:{width:"trigger"}}},$({width:130,options:e=>[{label:l("Public.Btn.Del"),onClick:()=>{b({title:"".concat(l("Site.TableOP.index_6")," [").concat(e.ip,"]"),content:l("Site.Proxy.index_23"),onConfirm:async({hide:t})=>{await xe({site_name:u.value,ip_type:"black",ip:e.ip}),s(),t()}})}}]})]),_=[{key:"del",label:l("Site.Batch.index_20"),onBatch:e=>{b({title:l("Site.Batch.index_21"),content:l("Site.Batch.index_11"),onConfirm:async()=>{await ye({site_name:u.value,ip_type:"black",ips:e.map((e=>e.ip)).join("\n")}),s()}})}}],x=()=>{y.title=l("Site.Proxy.index_21"),y.show=!0},y=C(l("Site.Proxy.index_21"),{getList:s});return(e,t)=>{const a=Ge,l=k,i=f,o=h,r=m;return A(),D("div",null,[B(o,null,{toolsLeft:M((()=>[B(a,{type:"primary",onClick:x},{default:M((()=>[Y(K(e.$t("Site.Proxy.index_21")),1)])),_:1})])),table:M((()=>[B(l,{"checked-row-keys":W(d),"onUpdate:checkedRowKeys":t[0]||(t[0]=e=>F(d)?d.value=e:null),"row-key":"ip",loading:W(n),"max-height":440,data:W(c).data,columns:W(p)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:M((()=>[B(i,{"checked-row-keys":W(d),"onUpdate:checkedRowKeys":t[1]||(t[1]=e=>F(d)?d.value=e:null),"row-key":"ip",data:W(c).data,options:_},null,8,["checked-row-keys","data"])])),_:1}),B(r,{show:W(y).show,"onUpdate:show":t[2]||(t[2]=e=>W(y).show=e),title:W(y).title,data:W(y).data,width:480,footer:!0,component:zt},null,8,["show","title","data"])])}}}),Bt={class:"p-20px"},Ot={class:"w-280px"},qt={class:"w-280px"},It={class:"w-280px"},At={class:"w-280px"},Dt=O({__name:"form",props:{data:{}},setup(e,{expose:t}){const{t:a}=q(),l=i(),{siteName:n}=J(l),r=e,{isEdit:u,row:s,getList:d}=r.data,c=I(null),p=X({name:o(5),auth_path:"",username:"",password:""}),_={name:{required:!0,message:a("Site.Placeholder.Index_4"),trigger:["blur","input"]},auth_path:{required:!0,message:a("Site.Placeholder.Index_5"),trigger:["blur","input"]},username:{required:!0,message:a("Site.Placeholder.Index_6"),trigger:["blur","input"]},password:{required:!0,message:a("Site.Placeholder.Index_8"),trigger:["blur","input"]}};return u&&s&&(p.name=s.auth_name,p.auth_path=s.auth_path),t({onConfirm:async({hide:e})=>{var t;await(null==(t=c.value)?void 0:t.validate()),u?await me({...G(p),site_name:n.value}):await he({...G(p),site_name:n.value}),null==d||d(),e()}}),(e,t)=>{const a=Qe,l=Ze,n=dt,i=P;return A(),D("div",Bt,[B(n,{ref_key:"formRef",ref:c,model:W(p),rules:_},{default:M((()=>[B(l,{label:e.$t("Site.TableRow.index_2"),path:"name"},{default:M((()=>[H("div",Ot,[B(a,{value:W(p).name,"onUpdate:value":t[0]||(t[0]=e=>W(p).name=e),disabled:W(u),placeholder:""},null,8,["value","disabled"])])])),_:1},8,["label"]),B(l,{label:e.$t("Site.TableRow.index_15"),path:"auth_path"},{default:M((()=>[H("div",qt,[B(a,{value:W(p).auth_path,"onUpdate:value":t[1]||(t[1]=e=>W(p).auth_path=e),disabled:W(u),placeholder:e.$t("Site.Proxy.index_42")},null,8,["value","disabled","placeholder"])])])),_:1},8,["label"]),B(l,{label:e.$t("Public.Table.Username"),path:"username"},{default:M((()=>[H("div",It,[B(a,{value:W(p).username,"onUpdate:value":t[2]||(t[2]=e=>W(p).username=e)},null,8,["value"])])])),_:1},8,["label"]),B(l,{label:e.$t("Public.Table.Password"),path:"password"},{default:M((()=>[H("div",At,[B(a,{value:W(p).password,"onUpdate:value":t[3]||(t[3]=e=>W(p).password=e)},null,8,["value"])])])),_:1},8,["label"])])),_:1},8,["model"]),B(i,{class:"mt-4px"},{default:M((()=>[H("li",null,K(e.$t("Site.Proxy.index_43")),1),H("li",null,K(e.$t("Site.Proxy.index_44")),1)])),_:1})])}}}),Ht=O({__name:"index",setup(t,{expose:a}){const{t:l}=q(),{loading:n,setLoading:o}=S(),r=i(),{siteName:u}=J(r),s=async()=>{try{o(!0);const t=await bt(u.value);e(t)&&(c.data=t.basic_auth)}finally{o(!1)}};s(),a({init:s});const{keys:d,table:c,columns:p}=g([{key:"auth_name",title:l("Site.TableRow.index_2"),ellipsis:{tooltip:{width:"trigger"}}},{key:"auth_path",title:l("Site.TableRow.index_15"),ellipsis:{tooltip:{width:"trigger"}}},$({width:130,options:e=>[{label:l("Site.TableOP.index_7"),onClick:()=>{y(e)}},{label:l("Public.Btn.Del"),onClick:()=>{b({title:"".concat(l("Site.Proxy.index_48")," [").concat(e.auth_name,"]"),content:l("Site.Proxy.index_49"),onConfirm:async({hide:t})=>{await ve({site_name:u.value,auth_path:e.auth_path,name:e.auth_name}),s(),t()}})}}]})]),_=C(l("Site.Proxy.index_45"),{isEdit:!1,getList:s}),x=()=>{_.data.isEdit=!1,_.title=l("Site.Proxy.index_45"),_.show=!0},y=e=>{_.data.row=e,_.data.isEdit=!0,_.title=l("Site.Proxy.index_50"),_.show=!0};return(e,t)=>{const a=Ge,l=k,i=h,o=P,r=m;return A(),D("div",null,[B(i,null,{toolsLeft:M((()=>[B(a,{type:"primary",onClick:x},{default:M((()=>[Y(K(e.$t("Site.Proxy.index_45")),1)])),_:1})])),table:M((()=>[B(l,{"checked-row-keys":W(d),"onUpdate:checkedRowKeys":t[0]||(t[0]=e=>F(d)?d.value=e:null),"row-key":"name",loading:W(n),"max-height":440,data:W(c).data,columns:W(p)},null,8,["checked-row-keys","loading","data","columns"])])),_:1}),B(o,{class:"mt-16px"},{default:M((()=>[H("li",null,K(e.$t("Site.Proxy.index_46")),1),H("li",null,K(e.$t("Site.Proxy.index_47")),1)])),_:1}),B(r,{show:W(_).show,"onUpdate:show":t[1]||(t[1]=e=>W(_).show=e),title:W(_).title,data:W(_).data,width:480,footer:!0,component:Dt},null,8,["show","title","data"])])}}}),Mt={class:"p-20px"},Kt={key:0},Wt=O({__name:"index",setup(t,{expose:a}){const{t:l}=q(),n=i(),{siteName:o}=J(n),u=I(null),s=X({switchValue:!1,inputValue:1,selectValue:"m"}),d=async()=>{const t=await bt(o.value);e(t)&&(s.switchValue=t.proxy_cache.cache_status,t.proxy_cache.expires.length>1&&(s.inputValue=Number(t.proxy_cache.expires.slice(0,-1)),s.selectValue=t.proxy_cache.expires.slice(-1)))};d(),a({init:d});const c={inputValue:{required:!0,validator(e,t){if(!t)return new Error(l("Site.Proxy.index_26"))},trigger:["input","blur"]}},p=[{label:l("Public.Unit.Minute"),value:"m"},{label:l("Public.Unit.Hour"),value:"h"},{label:l("Public.Unit.Day"),value:"d"}],_=async()=>{var e;await(null==(e=u.value)?void 0:e.validate());let t={site_name:o.value,cache_status:s.switchValue?1:0,expires:"".concat(s.inputValue).concat(s.selectValue)};await fe(t),d()},x=()=>{const e="".concat(l("Site.Proxy.index_27")," [").concat(o.value,"]");b({title:e,content:l("Site.Proxy.index_28"),onConfirm:async()=>{await be({site_name:o.value})}})};return(e,t)=>{const a=et,l=Ze,n=tt,i=at,o=lt,d=Ge,y=nt,m=r,h=P;return A(),D(Z,null,[H("div",Mt,[B(y,{ref_key:"formRef",ref:u,"label-width":100,model:W(s),rules:c,"label-placement":"left"},{default:M((()=>[B(l,{label:e.$t("Site.Proxy.index_24")},{default:M((()=>[B(a,{value:W(s).switchValue,"onUpdate:value":[t[0]||(t[0]=e=>W(s).switchValue=e),_]},null,8,["value"])])),_:1},8,["label"]),W(s).switchValue?(A(),D("div",Kt,[B(o,null,{default:M((()=>[B(l,{label:e.$t("Site.Proxy.index_25"),path:"inputValue"},{default:M((()=>[B(n,{"show-button":!1,value:W(s).inputValue,"onUpdate:value":t[1]||(t[1]=e=>W(s).inputValue=e)},null,8,["value"])])),_:1},8,["label"]),B(l,null,{default:M((()=>[B(i,{class:"w-90px",value:W(s).selectValue,"onUpdate:value":t[2]||(t[2]=e=>W(s).selectValue=e),placeholder:e.$t("Site.Proxy.index_26"),options:p},null,8,["value","placeholder"])])),_:1})])),_:1}),B(l,{label:" "},{default:M((()=>[B(d,{type:"primary",onClick:_},{default:M((()=>[Y(K(e.$t("Site.Cert.index_60")),1)])),_:1})])),_:1})])):Q("",!0)])),_:1},8,["model"]),B(m),B(d,{class:"mt-20px",onClick:x},{default:M((()=>[Y(K(e.$t("Site.Proxy.index_27")),1)])),_:1})]),B(h,null,{default:M((()=>[H("li",null,K(e.$t("Site.Proxy.index_28")),1),H("li",null,K(e.$t("Site.Proxy.index_29")),1),H("li",null,K(e.$t("Site.Proxy.index_30")),1),H("li",null,K(e.$t("Site.Proxy.index_31")),1),H("li",null,K(e.$t("Site.Proxy.index_32"))+" css|js|jpg|jpeg|gif|png|webp|woff|eot|ttf|svg|ico|css.map|js.map ",1)])),_:1})],64)}}}),Ft={class:"p-20px"},Yt={key:0},Jt=O({__name:"index",setup(t,{expose:a}){const{t:l}=q(),n=i(),{siteName:o}=J(n),r=async()=>{const t=await bt(o.value);if(e(t)){s.switchValue=t.gzip.gzip_status,s.inputType=t.gzip.gzip_types,s.selectLevel=Number(t.gzip.gzip_comp_level);let e="",a="m";t.gzip.gzip_min_length&&t.gzip.gzip_min_length.length>1&&(e=t.gzip.gzip_min_length.slice(0,-1),a=t.gzip.gzip_min_length.slice(-1)),s.inputValue=Number(e),s.selectLength=a}};r(),a({init:r});const u=I(null),s=X({switchValue:!0,inputType:"",selectLevel:1,selectLength:"m",inputValue:1}),d={inputType:{required:!0,message:l("Site.Proxy.index_41"),trigger:"blur"},inputValue:{required:!0,trigger:"blur",validator:(e,t)=>{if(!t)return new Error(l("Site.Proxy.index_41"))}}},c=[{label:"k",value:"k"},{label:"m",value:"m"}],p=[{label:"1",value:1},{label:"2",value:2},{label:"3",value:3},{label:"4",value:4},{label:"5",value:5},{label:"6",value:6},{label:"7",value:7},{label:"8",value:8},{label:"9",value:9}],_=async()=>{var e;await(null==(e=u.value)?void 0:e.validate());let t={site_name:o.value,gzip_status:s.switchValue?1:0,gzip_min_length:"".concat(s.inputValue).concat(s.selectLength),gzip_comp_level:s.selectLevel,gzip_types:s.inputType};await we(t),r()};return(e,t)=>{const a=et,l=Ze,n=Qe,i=at,o=tt,r=lt,x=Ge,y=nt,m=P;return A(),D("div",Ft,[B(y,{ref_key:"formRef",ref:u,"label-width":150,model:W(s),rules:d,"label-placement":"left"},{default:M((()=>[B(l,{label:e.$t("Site.Proxy.index_34")},{default:M((()=>[B(a,{value:W(s).switchValue,"onUpdate:value":[t[0]||(t[0]=e=>W(s).switchValue=e),_]},null,8,["value"])])),_:1},8,["label"]),W(s).switchValue?(A(),D("div",Yt,[B(l,{label:e.$t("Site.Proxy.index_35"),path:"inputType"},{default:M((()=>[B(n,{value:W(s).inputType,"onUpdate:value":t[1]||(t[1]=e=>W(s).inputType=e),type:"textarea",placeholder:"Please input"},null,8,["value"])])),_:1},8,["label"]),B(l,{label:e.$t("Site.Proxy.index_36")},{default:M((()=>[B(i,{value:W(s).selectLevel,"onUpdate:value":t[2]||(t[2]=e=>W(s).selectLevel=e),options:p},null,8,["value"])])),_:1},8,["label"]),B(r,null,{default:M((()=>[B(l,{label:e.$t("Site.Proxy.index_37"),path:"inputValue"},{default:M((()=>[B(o,{"show-button":!1,value:W(s).inputValue,"onUpdate:value":t[3]||(t[3]=e=>W(s).inputValue=e)},null,8,["value"])])),_:1},8,["label"]),B(l,null,{default:M((()=>[B(i,{class:"w-90px",value:W(s).selectLength,"onUpdate:value":t[4]||(t[4]=e=>W(s).selectLength=e),options:c},null,8,["value"])])),_:1})])),_:1}),B(l,{label:" "},{default:M((()=>[B(x,{type:"primary",onClick:_},{default:M((()=>[Y(K(e.$t("Site.Cert.index_60")),1)])),_:1})])),_:1})])):Q("",!0)])),_:1},8,["model"]),B(m,null,{default:M((()=>[H("li",null,K(e.$t("Site.Proxy.index_38")),1),H("li",null,K(e.$t("Site.Proxy.index_39")),1),H("li",null,K(e.$t("Site.Proxy.index_40")),1)])),_:1})])}}}),Xt={class:"p-20px"},Gt=O({__name:"index",setup(t,{expose:a}){const{t:l}=q(),n=i(),{siteName:o}=J(n),r=async()=>{const t=await bt(o.value);e(t)&&(s.selectValue=t.proxy_log.log_type,s.inputValue=t.proxy_log.rsyslog_host,s.unx=t.proxy_log.log_path)};r(),a({init:r});const u=I(null),s=X({inputValue:"",selectValue:"default",unx:""}),d={inputValue:{required:!0,message:l("Site.Proxy.index_41"),trigger:"blur"},unx:{required:!0,message:l("Site.Proxy.index_41"),trigger:["blur","input"]}},c=[{label:l("Site.Proxy.index_54"),value:"default"},{label:l("Site.Proxy.index_55"),value:"off"},{label:l("Site.Proxy.index_56"),value:"file"},{label:l("Site.Proxy.index_57"),value:"rsyslog"}],p=async()=>{var e;await(null==(e=u.value)?void 0:e.validate());let t={site_name:o.value,log_type:s.selectValue,log_path:"file"===s.selectValue?s.unx:"rsyslog"===s.selectValue?s.inputValue:""};await ge(t),r()};return(e,t)=>{const a=at,l=Ze,n=ct,i=Qe,o=Ge,r=nt;return A(),D("div",Xt,[B(r,{ref_key:"formRef",ref:u,"label-width":150,model:W(s),rules:d,"label-placement":"left"},{default:M((()=>[B(l,{label:e.$t("Site.Proxy.index_51")},{default:M((()=>[B(a,{class:"w-300px",value:W(s).selectValue,"onUpdate:value":t[0]||(t[0]=e=>W(s).selectValue=e),options:c},null,8,["value"])])),_:1},8,["label"]),"file"==W(s).selectValue?(A(),ee(l,{key:0,label:e.$t("Site.Proxy.index_52"),path:"unx"},{default:M((()=>[B(n,{class:"w-400px","checked-type":["dir"],value:W(s).unx,"onUpdate:value":t[1]||(t[1]=e=>W(s).unx=e)},null,8,["value"])])),_:1},8,["label"])):Q("",!0),"rsyslog"==W(s).selectValue?(A(),ee(l,{key:1,label:e.$t("Site.Proxy.index_53"),path:"inputValue"},{default:M((()=>[B(i,{class:"w-300px!",value:W(s).inputValue,"onUpdate:value":t[2]||(t[2]=e=>W(s).inputValue=e),placeholder:e.$t("Site.Proxy.index_41")},null,8,["value","placeholder"])])),_:1},8,["label"])):Q("",!0),B(l,{label:" "},{default:M((()=>[B(o,{type:"primary",onClick:p},{default:M((()=>[Y(K(e.$t("Site.Cert.index_60")),1)])),_:1})])),_:1})])),_:1},8,["model"])])}}}),Qt={class:"p-20px"},Zt=O({__name:"index",setup(t,{expose:a}){const l=i(),{siteName:n}=J(l),o=async()=>{const t=await bt(n.value);e(t)&&(u.switchValue=t.websocket.websocket_status)};o(),a({init:o});const r=I(null),u=X({switchValue:!1}),s=async()=>{var e;await(null==(e=r.value)?void 0:e.validate()),Se({site_name:n.value,websocket_status:u.switchValue?1:0})};return(e,t)=>{const a=et,l=Ze,n=nt;return A(),D("div",Qt,[B(n,{ref_key:"formRef",ref:r,"label-width":150,model:W(u),"label-placement":"left"},{default:M((()=>[B(l,{label:e.$t("Site.Proxy.index_58")},{default:M((()=>[B(a,{value:W(u).switchValue,"onUpdate:value":[t[0]||(t[0]=e=>W(u).switchValue=e),s]},null,8,["value"])])),_:1},8,["label"])])),_:1},8,["model"])])}}}),ea=O({__name:"index",setup(e){const{t:t}=q(),a=I("cache"),l=[{key:"cache",label:t("Site.Lable.index_31"),component:Wt},{key:"compressed",label:t("Site.Proxy.index_61"),component:Jt},{key:"black",label:t("Site.Proxy.index_62"),component:Nt},{key:"white",label:t("Site.Proxy.index_63"),component:Rt},{key:"http",label:t("Site.Proxy.index_64"),component:Ht},{key:"log",label:t("Site.Proxy.index_51"),component:Gt},{key:"websocket",label:t("Site.Proxy.index_65"),component:Zt}];return(e,t)=>{const n=st;return A(),ee(n,{value:W(a),"onUpdate:value":t[0]||(t[0]=e=>F(a)?a.value=e:null),options:l},null,8,["value"])}}});var ta={exports:{}};
/*!
 * clipboard.js v2.0.11
 * https://clipboardjs.com/
 *
 * Licensed MIT © Zeno Rocha
 */const aa=xt(ta.exports=function(){return function(){var e={686:function(e,t,a){a.d(t,{default:function(){return g}});var l=a(279),n=a.n(l),i=a(370),o=a.n(i),r=a(817),u=a.n(r);function s(e){try{return document.execCommand(e)}catch(t){return!1}}var d=function(e){var t=u()(e);return s("cut"),t},c=function(e,t){var a=function(e){var t="rtl"===document.documentElement.getAttribute("dir"),a=document.createElement("textarea");a.style.fontSize="12pt",a.style.border="0",a.style.padding="0",a.style.margin="0",a.style.position="absolute",a.style[t?"right":"left"]="-9999px";var l=window.pageYOffset||document.documentElement.scrollTop;return a.style.top="".concat(l,"px"),a.setAttribute("readonly",""),a.value=e,a}(e);t.container.appendChild(a);var l=u()(a);return s("copy"),a.remove(),l},p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{container:document.body},a="";return"string"==typeof e?a=c(e,t):e instanceof HTMLInputElement&&!["text","search","url","tel","password"].includes(null==e?void 0:e.type)?a=c(e.value,t):(a=u()(e),s("copy")),a};function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.action,a=void 0===t?"copy":t,l=e.container,n=e.target,i=e.text;if("copy"!==a&&"cut"!==a)throw new Error('Invalid "action" value, use either "copy" or "cut"');if(void 0!==n){if(!n||"object"!==_(n)||1!==n.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===a&&n.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===a&&(n.hasAttribute("readonly")||n.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes')}return i?p(i,{container:l}):n?"cut"===a?d(n):p(n,{container:l}):void 0};function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var a=0;a<t.length;a++){var l=t[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,l,n,i=f(e);if(t){var o=f(this).constructor;a=Reflect.construct(i,arguments,o)}else a=i.apply(this,arguments);return l=this,!(n=a)||"object"!==y(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(l):n}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){var a="data-clipboard-".concat(e);if(t.hasAttribute(a))return t.getAttribute(a)}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(i,e);var t,a,l,n=v(i);function i(e,t){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(a=n.call(this)).resolveOptions(t),a.listenClick(e),a}return t=i,a=[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof e.action?e.action:this.defaultAction,this.target="function"==typeof e.target?e.target:this.defaultTarget,this.text="function"==typeof e.text?e.text:this.defaultText,this.container="object"===y(e.container)?e.container:document.body}},{key:"listenClick",value:function(e){var t=this;this.listener=o()(e,"click",(function(e){return t.onClick(e)}))}},{key:"onClick",value:function(e){var t=e.delegateTarget||e.currentTarget,a=this.action(t)||"copy",l=x({action:a,container:this.container,target:this.target(t),text:this.text(t)});this.emit(l?"success":"error",{action:a,text:l,trigger:t,clearSelection:function(){t&&t.focus(),window.getSelection().removeAllRanges()}})}},{key:"defaultAction",value:function(e){return b("action",e)}},{key:"defaultTarget",value:function(e){var t=b("target",e);if(t)return document.querySelector(t)}},{key:"defaultText",value:function(e){return b("text",e)}},{key:"destroy",value:function(){this.listener.destroy()}}],l=[{key:"copy",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{container:document.body};return p(e,t)}},{key:"cut",value:function(e){return d(e)}},{key:"isSupported",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],t="string"==typeof e?[e]:e,a=!!document.queryCommandSupported;return t.forEach((function(e){a=a&&!!document.queryCommandSupported(e)})),a}}],a&&m(t.prototype,a),l&&m(t,l),i}(n()),g=w},828:function(e){if("undefined"!=typeof Element&&!Element.prototype.matches){var t=Element.prototype;t.matches=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector}e.exports=function(e,t){for(;e&&9!==e.nodeType;){if("function"==typeof e.matches&&e.matches(t))return e;e=e.parentNode}}},438:function(e,t,a){var l=a(828);function n(e,t,a,l,n){var o=i.apply(this,arguments);return e.addEventListener(a,o,n),{destroy:function(){e.removeEventListener(a,o,n)}}}function i(e,t,a,n){return function(a){a.delegateTarget=l(a.target,t),a.delegateTarget&&n.call(e,a)}}e.exports=function(e,t,a,l,i){return"function"==typeof e.addEventListener?n.apply(null,arguments):"function"==typeof a?n.bind(null,document).apply(null,arguments):("string"==typeof e&&(e=document.querySelectorAll(e)),Array.prototype.map.call(e,(function(e){return n(e,t,a,l,i)})))}},879:function(e,t){t.node=function(e){return void 0!==e&&e instanceof HTMLElement&&1===e.nodeType},t.nodeList=function(e){var a=Object.prototype.toString.call(e);return void 0!==e&&("[object NodeList]"===a||"[object HTMLCollection]"===a)&&"length"in e&&(0===e.length||t.node(e[0]))},t.string=function(e){return"string"==typeof e||e instanceof String},t.fn=function(e){return"[object Function]"===Object.prototype.toString.call(e)}},370:function(e,t,a){var l=a(879),n=a(438);e.exports=function(e,t,a){if(!e&&!t&&!a)throw new Error("Missing required arguments");if(!l.string(t))throw new TypeError("Second argument must be a String");if(!l.fn(a))throw new TypeError("Third argument must be a Function");if(l.node(e))return function(e,t,a){return e.addEventListener(t,a),{destroy:function(){e.removeEventListener(t,a)}}}(e,t,a);if(l.nodeList(e))return function(e,t,a){return Array.prototype.forEach.call(e,(function(e){e.addEventListener(t,a)})),{destroy:function(){Array.prototype.forEach.call(e,(function(e){e.removeEventListener(t,a)}))}}}(e,t,a);if(l.string(e))return function(e,t,a){return n(document.body,e,t,a)}(e,t,a);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}},817:function(e){e.exports=function(e){var t;if("SELECT"===e.nodeName)e.focus(),t=e.value;else if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName){var a=e.hasAttribute("readonly");a||e.setAttribute("readonly",""),e.select(),e.setSelectionRange(0,e.value.length),a||e.removeAttribute("readonly"),t=e.value}else{e.hasAttribute("contenteditable")&&e.focus();var l=window.getSelection(),n=document.createRange();n.selectNodeContents(e),l.removeAllRanges(),l.addRange(n),t=l.toString()}return t}},279:function(e){function t(){}t.prototype={on:function(e,t,a){var l=this.e||(this.e={});return(l[e]||(l[e]=[])).push({fn:t,ctx:a}),this},once:function(e,t,a){var l=this;function n(){l.off(e,n),t.apply(a,arguments)}return n._=t,this.on(e,n,a)},emit:function(e){for(var t=[].slice.call(arguments,1),a=((this.e||(this.e={}))[e]||[]).slice(),l=0,n=a.length;l<n;l++)a[l].fn.apply(a[l].ctx,t);return this},off:function(e,t){var a=this.e||(this.e={}),l=a[e],n=[];if(l&&t)for(var i=0,o=l.length;i<o;i++)l[i].fn!==t&&l[i].fn._!==t&&n.push(l[i]);return n.length?a[e]=n:delete a[e],this}},e.exports=t,e.exports.TinyEmitter=t}},t={};function a(l){if(t[l])return t[l].exports;var n=t[l]={exports:{}};return e[l](n,n.exports,a),n.exports}return a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,{a:t}),t},a.d=function(e,t){for(var l in t)a.o(t,l)&&!a.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a(686)}().default}()),la=e=>({toClipboard:(e,t)=>new Promise(((a,l)=>{const n=document.createElement("button"),i=new aa(n,{text:()=>e,action:()=>"copy",container:void 0!==t?t:document.body});i.on("success",(e=>{i.destroy(),a(e)})),i.on("error",(e=>{i.destroy(),l(e)})),document.body.appendChild(n),n.click(),document.body.removeChild(n)}))}),na={class:"mb-10px"},ia=O({__name:"index",setup(t,{expose:a}){const{t:l}=q(),{data:i}=gt(),o=I(""),r=I(""),u=I({readOnly:!0}),{toClipboard:s}=la();let d=I();const c=async()=>{(async()=>{const{message:t}=await ke({site_name:i.name});e(t)&&(r.value=t.site_conf)})()};return te((()=>{c()})),a({init:c}),(e,t)=>{const a=Ge;return A(),D(Z,null,[H("div",na,K(e.$t("Site.Proxy.index_73")),1),B(pt,{path:W(o),"onUpdate:path":t[0]||(t[0]=e=>F(o)?o.value=e:null),value:W(r),"onUpdate:value":t[1]||(t[1]=e=>F(r)?r.value=e:null),config:W(u),height:530,readOnly:!0,"show-tips":!1},null,8,["path","value","config"]),B(a,{class:"mt-10px",ref_key:"copyBtn",ref:d,onClick:t[2]||(t[2]=e=>(async e=>{try{await s(e,d.value.$el),n.success(l("Site.Cert.index_1"))}catch(t){console.error(t),n.success(l("Site.Cert.index_2"))}})(W(r)))},{default:M((()=>[Y(K(e.$t("Public.Btn.Copy")),1)])),_:1},512)],64)}}}),oa={key:0},ra={href:"https://nginx.org/en/docs/http/ngx_http_core_module.html#server",target:"_blank",class:"text-#20a53a"},ua={key:1},sa={href:"https://nginx.org/en/docs/http/ngx_http_core_module.html#http",target:"_blank",class:"text-#20a53a"},da=O({__name:"index",setup(t,{expose:a}){const{t:l}=q(),{data:i}=gt(),o=I(""),r=I(""),u=I("server_block"),s=[{value:"server_block",label:"server"},{value:"http_block",label:"http"}],d=async()=>{await Pe({site_name:i.name,conf_type:u.value,body:r.value}),_()},{toClipboard:c}=la();let p=I();const _=async()=>{(async()=>{const{message:t}=await ke({site_name:i.name});e(t)&&(r.value=t[u.value])})()};return te((()=>{_()})),a({init:_}),(e,t)=>{const a=at,i=lt,x=Ge,y=P;return A(),D(Z,null,[B(i,{class:"items-center mb-10px"},{default:M((()=>[Y(K(e.$t("Site.Proxy.index_68"))+" ",1),B(a,{class:"w-200px",value:W(u),"onUpdate:value":[t[0]||(t[0]=e=>F(u)?u.value=e:null),_],options:s},null,8,["value"])])),_:1}),B(pt,{path:W(o),"onUpdate:path":t[1]||(t[1]=e=>F(o)?o.value=e:null),value:W(r),"onUpdate:value":t[2]||(t[2]=e=>F(r)?r.value=e:null),config:s,height:400,"show-tips":!1},null,8,["path","value"]),B(i,{class:"mt-10px mb-10px"},{default:M((()=>[B(x,{type:"primary",onClick:d},{default:M((()=>[Y(K(e.$t("Site.Cert.index_60")),1)])),_:1}),B(x,{ref_key:"copyBtn",ref:p,onClick:t[3]||(t[3]=e=>(async e=>{try{await c(e,p.value.$el),n.success(l("Site.Cert.index_1"))}catch(t){console.error(t),n.success(l("Site.Cert.index_2"))}})(W(r)))},{default:M((()=>[Y(K(e.$t("Public.Btn.Copy")),1)])),_:1},512)])),_:1}),B(y,null,{default:M((()=>[H("li",null,K(e.$t("Site.Proxy.index_69")),1),H("li",null,K(e.$t("Site.Proxy.index_70")),1),"server_block"==W(u)?(A(),D("li",oa,[Y(K(e.$t("Site.Proxy.index_71"))+" ",1),H("a",ra,K(e.$t("Site.Proxy.index_72")),1)])):(A(),D("li",ua,[Y(K(e.$t("Site.Proxy.index_71"))+" ",1),H("a",sa,K(e.$t("Site.Proxy.index_72")),1)]))])),_:1})],64)}}}),ca=O({__name:"index",setup(e){const{t:t}=q(),a=I("main"),l=[{key:"main",label:t("Site.Proxy.index_66"),component:ia},{key:"customize",label:t("Site.Proxy.index_67"),component:da}];return(e,t)=>{const n=st;return A(),ee(n,{value:W(a),"onUpdate:value":t[0]||(t[0]=e=>F(a)?a.value=e:null),options:l},null,8,["value"])}}}),pa={class:"px-20px py-24px"},_a={class:"w-120px"},xa={class:"w-120px"},ya={class:"w-200px"},ma={class:"w-200px"},ha={class:"w-200px"},va=O({__name:"form",props:{data:{}},setup(t,{expose:a}){const{t:n}=q(),i=t,{isEdit:o,siteId:r,siteName:u,row:s,getList:d}=i.data,c=I(null),p=X({redirectname:"".concat((new Date).valueOf()),type:1,holdpath:1,domainorpath:"domain",redirecttype:"301",redirectpath:"",redirectdomain:[],tourl:"http://"}),_={redirectdomain:{trigger:["change"],validator:()=>0!==p.redirectdomain.length||new Error(n("Site.RulesError.index_23"))},redirectpath:{trigger:["blur","input"],validator:()=>""!==p.redirectpath.trim()||new Error(n("Site.RulesError.index_24"))},tourl:{trigger:["blur","input"],validator:()=>""!==p.tourl.trim()||new Error("Site.RulesError.index_25")}},x=[{label:"Domain name",value:"domain"},{label:"Path",value:"path"}],y=[{label:"301",value:"301"},{label:"302",value:"302"}],m=I([]),h=()=>{p.redirectdomain=[],p.redirectpath=""},{loading:v,setLoading:f}=S();return o&&s&&(p.redirectname=s.redirectname,p.type=s.type,p.holdpath=s.holdpath,p.redirecttype=s.redirecttype,p.redirectpath=s.redirectpath,p.domainorpath=s.domainorpath,p.redirectdomain=s.redirectdomain,p.tourl=s.tourl),(async()=>{try{f(!0);const{message:t}=await ce({site_name:u,id:r});e(t)&&(m.value=l(t.domain_list)?t.domain_list.map((e=>({label:e.name,value:e.name}))):[])}finally{f(!1)}})(),a({onConfirm:async({hide:e})=>{var t;await(null==(t=c.value)?void 0:t.validate());const a={...G(p),site_name:u};o?await Ce(a):await $e(a),null==d||d(),e()}}),(e,t)=>{const a=et,l=Ze,n=lt,i=at,o=Qe,r=dt,u=P;return A(),D("div",pa,[B(r,{ref_key:"formRef",ref:c,model:W(p),rules:_},{default:M((()=>[B(n,{size:60},{default:M((()=>[B(l,{label:e.$t("Site.Lable.index_34")},{default:M((()=>[B(a,{value:W(p).type,"onUpdate:value":t[0]||(t[0]=e=>W(p).type=e),"checked-value":1,"unchecked-value":0},null,8,["value"])])),_:1},8,["label"]),B(l,{label:e.$t("Site.TableRow.index_13"),"label-width":"120"},{default:M((()=>[B(a,{value:W(p).holdpath,"onUpdate:value":t[1]||(t[1]=e=>W(p).holdpath=e),"checked-value":1,"unchecked-value":0},null,8,["value"])])),_:1},8,["label"])])),_:1}),B(n,{size:30},{default:M((()=>[B(l,{label:e.$t("Site.TableRow.index_11")},{default:M((()=>[H("div",_a,[B(i,{value:W(p).domainorpath,"onUpdate:value":[t[2]||(t[2]=e=>W(p).domainorpath=e),h],options:x},null,8,["value"])])])),_:1},8,["label"]),B(l,{label:e.$t("Site.TableRow.index_12"),"label-width":"70"},{default:M((()=>[H("div",xa,[B(i,{value:W(p).redirecttype,"onUpdate:value":t[3]||(t[3]=e=>W(p).redirecttype=e),options:y},null,8,["value"])])])),_:1},8,["label"])])),_:1}),"domain"===W(p).domainorpath?(A(),ee(l,{key:0,label:e.$t("Site.Lable.index_32"),path:"redirectdomain"},{default:M((()=>[H("div",ya,[B(i,{value:W(p).redirectdomain,"onUpdate:value":t[4]||(t[4]=e=>W(p).redirectdomain=e),multiple:!0,loading:W(v),options:W(m),"max-tag-count":"responsive",placeholder:"Select domain"},null,8,["value","loading","options"])])])),_:1},8,["label"])):Q("",!0),"path"===W(p).domainorpath?(A(),ee(l,{key:1,label:e.$t("Site.Lable.index_30"),path:"redirectpath"},{default:M((()=>[H("div",ma,[B(o,{value:W(p).redirectpath,"onUpdate:value":t[5]||(t[5]=e=>W(p).redirectpath=e),placeholder:""},null,8,["value"])])])),_:1},8,["label"])):Q("",!0),B(l,{label:e.$t("Site.Lable.index_33"),path:"tourl"},{default:M((()=>[H("div",ha,[B(o,{value:W(p).tourl,"onUpdate:value":t[6]||(t[6]=e=>W(p).tourl=e),placeholder:""},null,8,["value"])])])),_:1},8,["label"])])),_:1},8,["model"]),B(u,{class:"mt-12px"},{default:M((()=>[H("li",null,K(e.$t("Site.Config.index_77")),1),H("li",null,K(e.$t("Site.Config.index_78")),1),H("li",null,K(e.$t("Site.Config.index_79")),1),H("li",null,K(e.$t("Site.Config.index_80")),1),H("li",null,K(e.$t("Site.Config.index_81")),1),H("li",null,K(e.$t("Site.Config.index_82")),1)])),_:1})])}}}),fa={class:"p-20px"},ba={class:"mt-12px"},wa=O({__name:"config",props:{data:{}},emits:["close"],setup(t,{emit:a}){const l=t,{row:i,getList:o}=l.data,r=a,u=I(""),s=I(""),d=async()=>{const{message:t}=await Ue({path:i.redirect_conf_file,data:u.value,encoding:s.value});e(t)&&n.success(t.msg),null==o||o(),r("close")};return(async()=>{const{message:t}=await Le({path:i.redirect_conf_file});e(t)&&(u.value=t.data,s.value=t.encoding)})(),(e,t)=>{const a=Ge,l=P;return A(),D("div",fa,[B(pt,{value:W(u),"onUpdate:value":t[0]||(t[0]=e=>F(u)?u.value=e:null),height:350,"show-tips":!0},null,8,["value"]),H("div",ba,[B(a,{type:"primary",onClick:d},{default:M((()=>[Y(K(e.$t("Site.Cert.index_60")),1)])),_:1})]),B(l,{class:"mt-24px"},{default:M((()=>[H("li",null,K(e.$t("Site.Config.index_83")),1)])),_:1})])}}}),ga=O({__name:"index",setup(e,{expose:t}){const{t:a}=q(),{data:n}=gt(),i=e=>({site_name:e.sitename,redirectname:e.redirectname,tourl:e.tourl,redirectdomain:e.redirectdomain,redirectpath:e.redirectpath,redirecttype:e.redirecttype,domainorpath:e.domainorpath}),{keys:o,table:r,columns:u}=g([{title:a("Site.TableRow.index_9"),key:"name",ellipsis:{tooltip:{width:"trigger"}},render:e=>"domain"===e.domainorpath&&e.redirectdomain.length?e.redirectdomain.join("、"):e.redirectpath},{title:a("Site.TableRow.index_11"),key:"name",width:90,render:e=>"domain"===e.domainorpath?"Domain":"Approach"},{key:"tourl",title:a("Site.TableRow.index_10"),width:140},{key:"type",title:a("Site.TableRow.index_14"),width:100,render:e=>B(L,{value:e.type,"checked-value":1,"unchecked-value":0,"checked-title":"Running","unchecked-title":"Paused",onClick:async t=>{await Ce({...i(e),type:t,holdpath:e.holdpath,errorpage:0}),e.type=t}},null)},$({width:120,options:e=>[{label:a("Site.TableOP.index_2"),onClick:()=>{v(e)}},{label:a("Site.TableOP.index_7"),onClick:()=>{x(e)}},{label:a("Public.Btn.Del"),onClick:()=>{b({title:"".concat(a("Site.Batch.index_14")," [").concat(e.redirectname,"]"),content:a("Site.Batch.index_15"),onConfirm:async({hide:t})=>{await Te({site_name:n.name,redirectname:e.redirectname}),c(),t()}})}}]})]),{loading:s,setLoading:d}=S(),c=async()=>{try{d(!0);const{message:e}=await Ve({sitename:n.name});r.data=l(e)?e:[]}finally{o.value=[],d(!1)}},p=C(a("Site.Config.index_74"),{row:void 0,siteId:n.id,siteName:n.name,isEdit:!1,getList:c}),_=()=>{p.data.row=void 0,p.data.isEdit=!1,p.title=a("Site.Config.index_74"),p.show=!0},x=e=>{p.data.row=e,p.data.isEdit=!0,p.title="".concat(a("Site.Config.index_75")," [").concat(e.redirectname,"]"),p.show=!0},y=C("",{row:void 0,siteName:n.name,getList:c}),v=e=>{y.data.row=e,y.title="".concat(a("Site.Config.index_76")," [").concat(e.redirectname,"]"),y.show=!0};return c(),t({init:c}),(e,t)=>{const a=Ge,l=k,n=h,i=P,d=m;return A(),D("div",null,[B(n,null,{toolsLeft:M((()=>[B(a,{type:"primary",onClick:_},{default:M((()=>[Y(K(e.$t("Site.Config.index_73")),1)])),_:1})])),table:M((()=>[B(l,{"checked-row-keys":W(o),"onUpdate:checkedRowKeys":t[0]||(t[0]=e=>F(o)?o.value=e:null),"row-key":"redirectname",loading:W(s),"max-height":440,data:W(r).data,columns:W(u)},null,8,["checked-row-keys","loading","data","columns"])])),_:1}),B(i,{class:"mt-20px"},{default:M((()=>[H("li",null,K(e.$t("Site.Config.index_84")),1)])),_:1}),B(d,{show:W(p).show,"onUpdate:show":t[1]||(t[1]=e=>W(p).show=e),title:W(p).title,data:W(p).data,width:660,footer:!0,component:va},null,8,["show","title","data"]),B(d,{show:W(y).show,"onUpdate:show":t[2]||(t[2]=e=>W(y).show=e),title:W(y).title,data:W(y).data,width:580,component:wa},null,8,["show","title","data"])])}}}),Sa={class:"m-15px"},ka={class:"list-none!"},Pa={class:"list-none!"},$a={class:"list-none!"},Ca=O({__name:"form",props:{data:{}},setup(e,{expose:t}){const{t:a}=q(),l=e,{getList:n,siteName:i}=l.data,o=()=>{"2"===_.proxy_type?_.proxy_host="$http_host":_.proxy_host=""},r=e=>{if("2"===_.proxy_type)return void(_.proxy_host="$http_host");let t=e.replace(/^http[s]?:\/\//,"");t=t.replace(/(:|\?|\/|\\)(.*)$/,""),s.value||(_.proxy_host=t)},s=I(!1),d=()=>{_.proxy_host&&"$http_host"!==_.proxy_host&&(s.value=!0)},c=I(null),p=[{label:a("Site.Proxy.index_11"),value:"1"},{label:a("Site.Proxy.index_12"),value:"2"}],_=X({proxy_path:"",proxy_type:"1",url:"http://",unx:"",proxy_host:"$http_host",remark:"",keepuri:1,rewrite:[{key:"",value:""}]}),x=I([{key:"",value:""}]),y={proxy_path:{required:!0,trigger:["blur","change"],validator:(e,t)=>{if(""===t.trim())return new Error(a("Site.RulesError.index_33"))}},url:{required:!0,trigger:["blur","change"],validator:(e,t)=>{if(!t.replace(/^http[s]?:\/\//,""))return new Error(a("Site.Proxy.index_14"));const l=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;let n=t.replace(/^http[s]?:\/\//,"");return n=n.replace(/(:|\?|\/|\\)(.*)$/,""),s.value||(l.test(n)?_.proxy_host="$http_host":_.proxy_host=n),!0}},unx:{required:!0,message:a("Site.PHP.add_site_26"),trigger:["blur","change"]},proxy_host:{required:!0,message:a("Site.PHP.add_site_26"),trigger:["blur","change"]}};return t({onConfirm:async()=>{var e;await(null==(e=c.value)?void 0:e.validate());const t=x.value.filter((e=>""!==e.key||""!==e.value)).map((e=>({dir1:e.key,dir2:e.value})));let a={keepuri:_.keepuri,site_name:i,remark:_.remark,proxy_type:"1"==_.proxy_type?"http":"unix",proxy_pass:"1"==_.proxy_type?_.url:_.unx,proxy_path:_.proxy_path,proxy_host:_.proxy_host,rewritedir:JSON.stringify(t)};await Re(a),null==n||n()}}),(e,t)=>{const a=et,l=Ze,n=Qe,i=at,s=ct,m=lt,h=it,v=u,f=dt,b=P;return A(),D("div",Sa,[B(f,{ref_key:"formRef",ref:c,model:W(_),rules:y},{default:M((()=>["1"==W(_).proxy_type?(A(),ee(l,{key:0,label:"Show Proxy Path"},{default:M((()=>[B(a,{value:W(_).keepuri,"onUpdate:value":t[0]||(t[0]=e=>W(_).keepuri=e),"checked-value":1,"unchecked-value":0},null,8,["value"])])),_:1})):Q("",!0),B(l,{label:e.$t("Site.TableRow.index_32"),path:"proxy_path",class:"w-570px"},{default:M((()=>[B(n,{value:W(_).proxy_path,"onUpdate:value":t[1]||(t[1]=e=>W(_).proxy_path=e),placeholder:e.$t("Site.Placeholder.Index_9")},null,8,["value","placeholder"])])),_:1},8,["label"]),B(m,null,{default:M((()=>[B(l,{label:e.$t("Site.Proxy.index_1")},{default:M((()=>[B(i,{value:W(_).proxy_type,"onUpdate:value":[t[2]||(t[2]=e=>W(_).proxy_type=e),o],options:p,class:"w-120px"},null,8,["value"])])),_:1},8,["label"]),"1"==W(_).proxy_type?(A(),ee(l,{key:0,path:"url",class:"w-310px"},{default:M((()=>[B(n,{value:W(_).url,"onUpdate:value":t[3]||(t[3]=e=>W(_).url=e),onInput:r},null,8,["value"])])),_:1})):(A(),ee(l,{key:1,path:"unx",class:"w-310px"},{default:M((()=>[B(s,{"checked-type":["dir","file"],value:W(_).unx,"onUpdate:value":t[4]||(t[4]=e=>W(_).unx=e),onChange:r},null,8,["value"])])),_:1}))])),_:1}),B(l,{label:e.$t("Site.Proxy.index_2"),path:"proxy_host",class:"w-570px"},{default:M((()=>[B(h,{trigger:"hover"},{trigger:M((()=>[B(n,{value:W(_).proxy_host,"onUpdate:value":t[5]||(t[5]=e=>W(_).proxy_host=e),onBlur:d},null,8,["value"])])),default:M((()=>[Y(" "+K(e.$t("Site.Proxy.index_75")),1)])),_:1})])),_:1},8,["label"]),"1"==W(_).proxy_type?(A(),ee(l,{key:1,label:"URL Rewrite"},{default:M((()=>[B(v,{class:"w-440px",min:1,value:W(x),"onUpdate:value":t[6]||(t[6]=e=>F(x)?x.value=e:null),preset:"pair","key-placeholder":"/aaa","value-placeholder":"/bbb"},null,8,["value"])])),_:1})):Q("",!0),B(l,{label:e.$t("Site.Proxy.index_3"),class:"w-570px"},{default:M((()=>[B(n,{value:W(_).remark,"onUpdate:value":t[7]||(t[7]=e=>W(_).remark=e),placeholder:e.$t("Site.Proxy.index_5")},null,8,["value","placeholder"])])),_:1},8,["label"])])),_:1},8,["model"]),B(b,{class:"mt-16px"},{default:M((()=>[H("li",null,K(e.$t("Site.Proxy.index_76")),1),H("li",null,K(e.$t("Site.Proxy.index_77")),1),H("li",ka,K(e.$t("Site.Proxy.index_78")),1),H("li",Pa,K(e.$t("Site.Proxy.index_79")),1),H("li",$a,K(e.$t("Site.Proxy.index_80")),1)])),_:1})])}}}),La={class:"p-20px"},Ua={class:"w-280px"},Ta=O({__name:"form",props:{data:{}},setup(e,{expose:t}){const{t:a}=q(),l=i(),{siteName:n,proxyPath:o}=J(l),r=e,{getList:u}=r.data,s=I(null),d=X({name:""}),c={name:{required:!0,message:a("Site.Proxy.index_20"),trigger:["blur","input"]}};return t({onConfirm:async({hide:e})=>{var t;await(null==(t=s.value)?void 0:t.validate()),await je({site_name:n.value,proxy_path:o.value,ip_type:"white",ips:d.name}),null==u||u(),e()}}),(e,t)=>{const a=Qe,l=Ze,n=dt,i=P;return A(),D("div",La,[B(n,{ref_key:"formRef",ref:s,model:W(d),rules:c},{default:M((()=>[B(l,{label:e.$t("Site.Proxy.index_18"),path:"name"},{default:M((()=>[H("div",Ua,[B(a,{type:"textarea",value:W(d).name,"onUpdate:value":t[0]||(t[0]=e=>W(d).name=e),placeholder:e.$t("Site.Proxy.index_20")},null,8,["value","placeholder"])])])),_:1},8,["label"])])),_:1},8,["model"]),B(i,{class:"mt-4px"},{default:M((()=>[H("li",null,K(e.$t("Site.Proxy.index_19")),1)])),_:1})])}}}),Va=O({__name:"index",setup(t,{expose:a}){const{t:l}=q(),{loading:n,setLoading:o}=S(),r=i(),{siteName:u,proxyPath:s}=J(r),d=async()=>{try{o(!0);const t=await wt(u.value,s.value);e(t)&&(p.data=t.ip_limit.ip_white.map((e=>({ip:e}))))}finally{c.value=[],o(!1)}};d(),a({init:d});const{keys:c,table:p,columns:_}=g([{type:"selection",width:40},{key:"ip",title:l("Site.Proxy.index_18"),ellipsis:{tooltip:{width:"trigger"}}},$({width:130,options:e=>[{label:l("Public.Btn.Del"),onClick:()=>{b({title:"".concat(l("Site.TableOP.index_6")," [").concat(e.ip,"]"),content:l("Site.Proxy.index_23"),onConfirm:async()=>{await Ee({site_name:u.value,proxy_path:s.value,ip_type:"white",ip:e.ip}),d()}})}}]})]),x=[{key:"del",label:l("Site.Batch.index_20"),onBatch:e=>{b({title:l("Site.Batch.index_21"),content:l("Site.Batch.index_11"),onConfirm:async()=>{await ze({site_name:u.value,proxy_path:s.value,ip_type:"white",ips:e.map((e=>e.ip)).join("\n")}),d()}})}}],y=()=>{v.title=l("Site.Proxy.index_22"),v.show=!0},v=C(l("Site.Proxy.index_22"),{getList:d});return(e,t)=>{const a=Ge,l=k,i=f,o=h,r=m;return A(),D("div",null,[B(o,null,{toolsLeft:M((()=>[B(a,{type:"primary",onClick:y},{default:M((()=>[Y(K(e.$t("Site.Proxy.index_22")),1)])),_:1})])),table:M((()=>[B(l,{"checked-row-keys":W(c),"onUpdate:checkedRowKeys":t[0]||(t[0]=e=>F(c)?c.value=e:null),"row-key":"ip",loading:W(n),"max-height":440,data:W(p).data,columns:W(_)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:M((()=>[B(i,{"checked-row-keys":W(c),"onUpdate:checkedRowKeys":t[1]||(t[1]=e=>F(c)?c.value=e:null),"row-key":"ip",data:W(p).data,options:x},null,8,["checked-row-keys","data"])])),_:1}),B(r,{show:W(v).show,"onUpdate:show":t[2]||(t[2]=e=>W(v).show=e),title:W(v).title,data:W(v).data,width:480,footer:!0,component:Ta},null,8,["show","title","data"])])}}}),Ra={class:"p-20px"},ja={class:"w-280px"},Ea=O({__name:"form",props:{data:{}},setup(e,{expose:t}){const{t:a}=q(),l=i(),{siteName:n,proxyPath:o}=J(l),r=e,{getList:u}=r.data,s=I(null),d=X({name:""}),c={name:{required:!0,message:a("Site.Proxy.index_20"),trigger:["blur","input"]}};return t({onConfirm:async({hide:e})=>{var t;await(null==(t=s.value)?void 0:t.validate()),await je({site_name:n.value,proxy_path:o.value,ip_type:"black",ips:d.name}),null==u||u(),e()}}),(e,t)=>{const a=Qe,l=Ze,n=dt,i=P;return A(),D("div",Ra,[B(n,{ref_key:"formRef",ref:s,model:W(d),rules:c},{default:M((()=>[B(l,{label:e.$t("Site.Proxy.index_18"),path:"name"},{default:M((()=>[H("div",ja,[B(a,{type:"textarea",value:W(d).name,"onUpdate:value":t[0]||(t[0]=e=>W(d).name=e),placeholder:e.$t("Site.Proxy.index_20")},null,8,["value","placeholder"])])])),_:1},8,["label"])])),_:1},8,["model"]),B(i,{class:"mt-4px"},{default:M((()=>[H("li",null,K(e.$t("Site.Proxy.index_19")),1)])),_:1})])}}}),za=O({__name:"index",setup(t,{expose:a}){const{t:l}=q(),{loading:n,setLoading:o}=S(),r=i(),{siteName:u,proxyPath:s}=J(r),d=async()=>{try{o(!0);const t=await wt(u.value,s.value);e(t)&&(p.data=t.ip_limit.ip_black.map((e=>({ip:e}))))}finally{c.value=[],o(!1)}};d(),a({init:d});const{keys:c,table:p,columns:_}=g([{type:"selection",width:40},{key:"ip",title:l("Site.Proxy.index_18"),ellipsis:{tooltip:{width:"trigger"}}},$({width:130,options:e=>[{label:l("Public.Btn.Del"),onClick:()=>{b({title:"".concat(l("Site.TableOP.index_6")," [").concat(e.ip,"]"),content:l("Site.Proxy.index_23"),onConfirm:async()=>{await Ee({site_name:u.value,proxy_path:s.value,ip_type:"black",ip:e.ip}),d()}})}}]})]),x=[{key:"del",label:l("Site.Batch.index_20"),onBatch:e=>{b({title:l("Site.Batch.index_21"),content:l("Site.Batch.index_11"),onConfirm:async()=>{await ze({site_name:u.value,proxy_path:s.value,ip_type:"black",ips:e.map((e=>e.ip)).join("\n")}),d()}})}}],y=()=>{v.title=l("Site.Proxy.index_21"),v.show=!0},v=C(l("Site.Proxy.index_21"),{getList:d});return(e,t)=>{const a=Ge,l=k,i=f,o=h,r=m;return A(),D("div",null,[B(o,null,{toolsLeft:M((()=>[B(a,{type:"primary",onClick:y},{default:M((()=>[Y(K(e.$t("Site.Proxy.index_21")),1)])),_:1})])),table:M((()=>[B(l,{"checked-row-keys":W(c),"onUpdate:checkedRowKeys":t[0]||(t[0]=e=>F(c)?c.value=e:null),"row-key":"ip",loading:W(n),"max-height":440,data:W(p).data,columns:W(_)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:M((()=>[B(i,{"checked-row-keys":W(c),"onUpdate:checkedRowKeys":t[1]||(t[1]=e=>F(c)?c.value=e:null),"row-key":"ip",data:W(p).data,options:x},null,8,["checked-row-keys","data"])])),_:1}),B(r,{show:W(v).show,"onUpdate:show":t[2]||(t[2]=e=>W(v).show=e),title:W(v).title,data:W(v).data,width:480,footer:!0,component:Ea},null,8,["show","title","data"])])}}}),Na={class:"p-20px"},Ba={key:0},Oa=O({__name:"index",setup(t,{expose:a}){const{t:l}=q(),n=i(),{siteName:o,proxyPath:r}=J(n),u=I(null),s=X({switchValue:!1,inputValue:1,selectValue:"m"}),d=async()=>{const t=await wt(o.value,r.value);e(t)&&(s.switchValue=t.proxy_cache.cache_status,t.proxy_cache.expires.length>1&&(s.inputValue=Number(t.proxy_cache.expires.slice(0,-1)),s.selectValue=t.proxy_cache.expires.slice(-1)))};d(),a({init:d});const c={inputValue:{required:!0,validator(e,t){if(!t)return new Error(l("Site.Proxy.index_26"))},trigger:["input","blur"]}},p=[{label:l("Public.Unit.Minute"),value:"m"},{label:l("Public.Unit.Hour"),value:"h"},{label:l("Public.Unit.Day"),value:"d"}],_=async()=>{var e;await(null==(e=u.value)?void 0:e.validate());let t={site_name:o.value,proxy_path:r.value,cache_status:s.switchValue?1:0,expires:"".concat(s.inputValue).concat(s.selectValue)};await Ne(t),d()};return(e,t)=>{const a=et,l=Ze,n=tt,i=at,o=lt,r=Ge,d=nt,x=P;return A(),D(Z,null,[H("div",Na,[B(d,{ref_key:"formRef",ref:u,"label-width":100,model:W(s),rules:c,"label-placement":"left"},{default:M((()=>[B(l,{label:e.$t("Site.Proxy.index_24")},{default:M((()=>[B(a,{value:W(s).switchValue,"onUpdate:value":[t[0]||(t[0]=e=>W(s).switchValue=e),_]},null,8,["value"])])),_:1},8,["label"]),W(s).switchValue?(A(),D("div",Ba,[B(o,null,{default:M((()=>[B(l,{label:e.$t("Site.Proxy.index_25"),path:"inputValue"},{default:M((()=>[B(n,{"show-button":!1,value:W(s).inputValue,"onUpdate:value":t[1]||(t[1]=e=>W(s).inputValue=e)},null,8,["value"])])),_:1},8,["label"]),B(l,null,{default:M((()=>[B(i,{class:"w-90px",value:W(s).selectValue,"onUpdate:value":t[2]||(t[2]=e=>W(s).selectValue=e),options:p},null,8,["value"])])),_:1})])),_:1}),B(l,{label:" "},{default:M((()=>[B(r,{type:"primary",onClick:_},{default:M((()=>[Y(K(e.$t("Site.Cert.index_60")),1)])),_:1})])),_:1})])):Q("",!0)])),_:1},8,["model"])]),B(x,null,{default:M((()=>[H("li",null,K(e.$t("Site.Proxy.index_28")),1),H("li",null,K(e.$t("Site.Proxy.index_29")),1),H("li",null,K(e.$t("Site.Proxy.index_30")),1),H("li",null,K(e.$t("Site.Proxy.index_31")),1),H("li",null,K(e.$t("Site.Proxy.index_32"))+" css|js|jpg|jpeg|gif|png|webp|woff|eot|ttf|svg|ico|css.map|js.map ",1)])),_:1})],64)}}}),qa={class:"p-20px"},Ia={key:0},Aa=O({__name:"index",setup(t,{expose:a}){const{t:l}=q(),n=i(),{siteName:o,proxyPath:r}=J(n),u=async()=>{const t=await wt(o.value,r.value);if(e(t)){d.switchValue=t.gzip.gzip_status,d.inputType=t.gzip.gzip_types,d.selectLevel=Number(t.gzip.gzip_comp_level);let e="",a="m";t.gzip.gzip_min_length&&t.gzip.gzip_min_length.length>1&&(e=t.gzip.gzip_min_length.slice(0,-1),a=t.gzip.gzip_min_length.slice(-1)),d.inputValue=Number(e),d.selectLength=a}};u(),a({init:u});const s=I(null),d=X({switchValue:!0,inputType:"",selectLevel:1,selectLength:"m",inputValue:1}),c={inputType:{required:!0,message:l("Site.Proxy.index_41"),trigger:"blur"},inputValue:{required:!0,trigger:"blur",validator:(e,t)=>{if(!t)return new Error(l("Site.Proxy.index_41"))}}},p=[{label:"k",value:"k"},{label:"m",value:"m"}],_=[{label:"1",value:1},{label:"2",value:2},{label:"3",value:3},{label:"4",value:4},{label:"5",value:5},{label:"6",value:6},{label:"7",value:7},{label:"8",value:8},{label:"9",value:9}],x=async()=>{var e;await(null==(e=s.value)?void 0:e.validate());let t={site_name:o.value,proxy_path:r.value,gzip_status:d.switchValue?1:0,gzip_min_length:"".concat(d.inputValue).concat(d.selectLength),gzip_comp_level:d.selectLevel,gzip_types:d.inputType};await Be(t),u()};return(e,t)=>{const a=et,l=Ze,n=Qe,i=at,o=tt,r=lt,u=Ge,y=nt,m=P;return A(),D("div",qa,[B(y,{ref_key:"formRef",ref:s,"label-width":150,model:W(d),rules:c,"label-placement":"left"},{default:M((()=>[B(l,{label:e.$t("Site.Proxy.index_34")},{default:M((()=>[B(a,{value:W(d).switchValue,"onUpdate:value":[t[0]||(t[0]=e=>W(d).switchValue=e),x]},null,8,["value"])])),_:1},8,["label"]),W(d).switchValue?(A(),D("div",Ia,[B(l,{label:e.$t("Site.Proxy.index_35"),path:"inputType"},{default:M((()=>[B(n,{value:W(d).inputType,"onUpdate:value":t[1]||(t[1]=e=>W(d).inputType=e),type:"textarea",placeholder:e.$t("Site.Proxy.index_41")},null,8,["value","placeholder"])])),_:1},8,["label"]),B(l,{label:e.$t("Site.Proxy.index_36")},{default:M((()=>[B(i,{value:W(d).selectLevel,"onUpdate:value":t[2]||(t[2]=e=>W(d).selectLevel=e),placeholder:"Select",options:_},null,8,["value"])])),_:1},8,["label"]),B(r,null,{default:M((()=>[B(l,{label:e.$t("Site.Proxy.index_37"),path:"inputValue"},{default:M((()=>[B(o,{"show-button":!1,value:W(d).inputValue,"onUpdate:value":t[3]||(t[3]=e=>W(d).inputValue=e)},null,8,["value"])])),_:1},8,["label"]),B(l,null,{default:M((()=>[B(i,{class:"w-90px",value:W(d).selectLength,"onUpdate:value":t[4]||(t[4]=e=>W(d).selectLength=e),options:p},null,8,["value"])])),_:1})])),_:1}),B(l,{label:" "},{default:M((()=>[B(u,{type:"primary",onClick:x},{default:M((()=>[Y(K(e.$t("Site.Cert.index_60")),1)])),_:1})])),_:1})])):Q("",!0)])),_:1},8,["model"]),B(m,null,{default:M((()=>[H("li",null,K(e.$t("Site.Proxy.index_38")),1),H("li",null,K(e.$t("Site.Proxy.index_39")),1),H("li",null,K(e.$t("Site.Proxy.index_40")),1)])),_:1})])}}}),Da={class:"p-20px"},Ha=O({__name:"index",setup(t,{expose:a}){const{t:l}=q(),n=i(),{siteName:o,proxyPath:r}=J(n),s=I(!1),d=async()=>{var t,a,l,n;const i=await wt(o.value,r.value);e(i)&&(p.proxy_type=i.proxy_type?"http":"unix",p.proxy_pass=i.proxy_pass,p.proxy_host=i.proxy_host,p.proxy_path=i.proxy_path,p.remark=i.remark,s.value=i.global_websocket,p.websocket=null==(t=i.websocket)?void 0:t.websocket_status,p.proxy_connect_timeout=null==(a=i.timeout)?void 0:a.proxy_connect_timeout,p.proxy_send_timeout=null==(l=i.timeout)?void 0:l.proxy_send_timeout,p.proxy_read_timeout=null==(n=i.timeout)?void 0:n.proxy_read_timeout,p.keepuri=i.keepuri,_.value=i.rewritedir.length?i.rewritedir.map((e=>({key:e.dir1,value:e.dir2}))):[{key:"",value:""}])};d(),a({init:d});const c=I(null),p=X({keepuri:1,proxy_path:"",proxy_pass:"",proxy_host:"",proxy_type:"http",remark:"",websocket:!1,proxy_connect_timeout:"",proxy_send_timeout:"",proxy_read_timeout:"",rewrite:[{key:"",value:""}]}),_=I([{key:"",value:""}]),x={proxy_path:{required:!0,message:l("Site.Proxy.index_41"),trigger:"blur"},proxy_pass:{required:!0,message:l("Site.Proxy.index_41"),trigger:"blur"},proxy_host:{required:!0,message:l("Site.Proxy.index_41"),trigger:"blur"},proxy_connect_timeout:{required:!0,message:l("Site.Proxy.index_41"),trigger:"blur"},proxy_send_timeout:{required:!0,message:l("Site.Proxy.index_41"),trigger:"blur"},proxy_read_timeout:{required:!0,message:l("Site.Proxy.index_41"),trigger:"blur"}},y=[{label:l("Site.Proxy.index_11"),value:"http"},{label:l("Site.Proxy.index_12"),value:"unix"}],m=async()=>{var e;await(null==(e=c.value)?void 0:e.validate());const t=_.value.filter((e=>""!==e.key||""!==e.value)).map((e=>({dir1:e.key,dir2:e.value})));let a={site_name:o.value,proxy_path:p.proxy_path,proxy_pass:p.proxy_pass,proxy_host:p.proxy_host,proxy_type:p.proxy_type,remark:p.remark,websocket:p.websocket?1:0,proxy_connect_timeout:p.proxy_connect_timeout,proxy_send_timeout:p.proxy_send_timeout,proxy_read_timeout:p.proxy_read_timeout,keepuri:p.keepuri,rewritedir:JSON.stringify(t)};await Oe(a),d()};return(e,t)=>{const a=et,l=Ze,n=Qe,i=at,o=u,r=ot,d=it,h=yt,v=Ge,f=nt;return A(),D("div",Da,[B(f,{ref_key:"formRef",ref:c,"label-width":180,model:W(p),rules:x,"label-placement":"left"},{default:M((()=>["http"===W(p).proxy_type?(A(),ee(l,{key:0,label:"Show Proxy Path"},{default:M((()=>[B(a,{value:W(p).keepuri,"onUpdate:value":t[0]||(t[0]=e=>W(p).keepuri=e),"checked-value":1,"unchecked-value":0},null,8,["value"])])),_:1})):Q("",!0),B(l,{label:e.$t("Site.TableRow.index_21"),path:"proxy_path"},{default:M((()=>[B(n,{class:"w-400px!",value:W(p).proxy_path,"onUpdate:value":t[1]||(t[1]=e=>W(p).proxy_path=e),disabled:""},null,8,["value"])])),_:1},8,["label"]),B(l,{label:e.$t("Site.Proxy.index_1")},{default:M((()=>[B(i,{class:"w-200px",value:W(p).proxy_type,"onUpdate:value":t[2]||(t[2]=e=>W(p).proxy_type=e),options:y},null,8,["value"])])),_:1},8,["label"]),B(l,{label:" ",path:"proxy_pass"},{default:M((()=>[B(n,{class:"w-400px!",value:W(p).proxy_pass,"onUpdate:value":t[3]||(t[3]=e=>W(p).proxy_pass=e),placeholder:e.$t("Site.Proxy.index_41")},null,8,["value","placeholder"])])),_:1}),B(l,{label:e.$t("Site.Proxy.index_2"),path:"proxy_host"},{default:M((()=>[B(n,{class:"w-400px!",value:W(p).proxy_host,"onUpdate:value":t[4]||(t[4]=e=>W(p).proxy_host=e),placeholder:e.$t("Site.Proxy.index_41")},null,8,["value","placeholder"])])),_:1},8,["label"]),"http"===W(p).proxy_type?(A(),ee(l,{key:1,label:"URL Rewrite"},{default:M((()=>[B(o,{class:"w-400px",min:1,value:W(_),"onUpdate:value":t[5]||(t[5]=e=>F(_)?_.value=e:null),preset:"pair","key-placeholder":"/aaa","value-placeholder":"/bbb"},null,8,["value"])])),_:1})):Q("",!0),B(l,{label:e.$t("Docker.Container.create.index_46")},{default:M((()=>[B(n,{class:"w-400px!",value:W(p).remark,"onUpdate:value":t[6]||(t[6]=e=>W(p).remark=e),placeholder:e.$t("Site.Proxy.index_41")},null,8,["value","placeholder"])])),_:1},8,["label"]),B(l,{label:e.$t("Site.Proxy.index_58")},{default:M((()=>[B(d,{trigger:"hover"},{trigger:M((()=>[B(r,{checked:W(p).websocket,"onUpdate:checked":t[7]||(t[7]=e=>W(p).websocket=e),disabled:W(s)},null,8,["checked","disabled"])])),default:M((()=>[Y(" "+K(e.$t("Site.Tips.index_16")),1)])),_:1})])),_:1},8,["label"]),B(l,{label:e.$t("Site.Lable.index_42"),path:"proxy_connect_timeout"},{default:M((()=>[B(h,ae(e.$attrs,{class:"w-400px!",value:W(p).proxy_connect_timeout,"onUpdate:value":t[8]||(t[8]=e=>W(p).proxy_connect_timeout=e),text:"Sec"}),null,16,["value"])])),_:1},8,["label"]),B(l,{label:e.$t("Site.Lable.index_43"),path:"proxy_send_timeout"},{default:M((()=>[B(h,ae(e.$attrs,{class:"w-400px!",value:W(p).proxy_send_timeout,"onUpdate:value":t[9]||(t[9]=e=>W(p).proxy_send_timeout=e),text:"Sec"}),null,16,["value"])])),_:1},8,["label"]),B(l,{label:e.$t("Site.Lable.index_44"),path:"proxy_read_timeout"},{default:M((()=>[B(h,ae(e.$attrs,{class:"w-400px!",value:W(p).proxy_read_timeout,"onUpdate:value":t[10]||(t[10]=e=>W(p).proxy_read_timeout=e),text:"Sec"}),null,16,["value"])])),_:1},8,["label"]),B(l,{label:" "},{default:M((()=>[B(v,{type:"primary",onClick:m},{default:M((()=>[Y(K(e.$t("Site.Cert.index_60")),1)])),_:1})])),_:1})])),_:1},8,["model"])])}}}),Ma={class:"p-20px"},Ka=O({__name:"index",setup(t,{expose:a}){const{t:l}=q(),n=i(),{siteName:o,proxyPath:r}=J(n),u=async()=>{const t=await wt(o.value,r.value);e(t)&&(d.configValue=t.custom_conf)};u(),a({init:u});const s=I(null),d=X({configValue:""}),c={configValue:{required:!0,message:l("Site.Proxy.index_41"),trigger:"blur"}},p=async()=>{var e;await(null==(e=s.value)?void 0:e.validate()),await qe({site_name:o.value,proxy_path:r.value,custom_conf:d.configValue}),u()};return(e,t)=>{const a=Qe,l=Ze,n=Ge,i=nt,o=P;return A(),D("div",Ma,[B(i,{ref_key:"formRef",ref:s,"label-width":180,model:W(d),rules:c,"label-placement":"left"},{default:M((()=>[B(l,{label:e.$t("Site.TableRow.index_21"),path:"configValue"},{default:M((()=>[B(a,{class:"w-400px!",rows:6,type:"textarea",value:W(d).configValue,"onUpdate:value":t[0]||(t[0]=e=>W(d).configValue=e),placeholder:'Line by line configuration, please end with, for example：\nproxy_set_header Cookie "cookie_name=cookie_value";\nallow 192.168.1.0/24;\naccess_log /www/wwwlogs/xxx.log;'},null,8,["value"])])),_:1},8,["label"]),B(l,{label:" "},{default:M((()=>[B(n,{type:"primary",onClick:p},{default:M((()=>[Y(K(e.$t("Site.Cert.index_60")),1)])),_:1})])),_:1})])),_:1},8,["model"]),B(o,null,{default:M((()=>[H("li",null,K(e.$t("Site.Tips.index_1")),1),H("li",null,[Y(K(e.$t("Site.Tips.index_2")),1),t[1]||(t[1]=H("br",null,null,-1)),Y(" "+K(e.$t("Site.Tips.index_4")),1),t[2]||(t[2]=H("br",null,null,-1)),Y(" "+K(e.$t("Site.Tips.index_5")),1),t[3]||(t[3]=H("br",null,null,-1)),Y(" "+K(e.$t("Site.Tips.index_6")),1),t[4]||(t[4]=H("br",null,null,-1)),Y(" "+K(e.$t("Site.Tips.index_7")),1),t[5]||(t[5]=H("br",null,null,-1)),t[6]||(t[6]=Y(" limit_except POST{")),t[7]||(t[7]=H("br",null,null,-1)),t[8]||(t[8]=Y("   allow 192.168.1.0/24;")),t[9]||(t[9]=H("br",null,null,-1)),t[10]||(t[10]=Y("   deny all;")),t[11]||(t[11]=H("br",null,null,-1)),t[12]||(t[12]=Y(" }")),t[13]||(t[13]=H("br",null,null,-1)),Y(" "+K(e.$t("Site.Tips.index_11")),1)]),H("li",null,K(e.$t("Site.Tips.index_3")),1)])),_:1})])}}}),Wa={class:"p-20px"},Fa=O({__name:"form",props:{data:{}},setup(e,{expose:t}){const{t:a}=q(),l=i(),{siteName:n,proxyPath:o}=J(l),r=e,{getList:u}=r.data,d=I(a("Site.Tips.index_15")),c=I(null),p=X({oldstr:"",newstr:"",sub_type:[]}),_=()=>{x(p.sub_type)},x=e=>{const t=e.includes("i")?a("Site.Tips.index_12"):"",l=e.includes("o")?a("Site.Tips.index_13"):"",n=e.includes("r")?a("Site.Tips.index_14"):"";switch(e.length){case 0:d.value="".concat(a("Site.Lable.index_48")," ").concat(p.oldstr," ").concat(a("Site.Lable.index_51")," ").concat(p.newstr);break;case 1:d.value="".concat(a("Site.Lable.index_49")," ").concat(l?"".concat(a("Docker.Container.index_26.index_2")):""," ").concat(p.oldstr," ").concat(a("Site.Lable.index_51")," ").concat(p.newstr,"，").concat(a("Site.Lable.index_50")," ").concat(t||l||n);break;case 2:d.value="".concat(a("Site.Lable.index_49")," ").concat(l?"".concat(a("Docker.Container.index_26.index_2")):""," ").concat(p.oldstr," ").concat(a("Site.Lable.index_51")," ").concat(p.newstr,"，").concat(a("Site.Lable.index_50")," ").concat(t||l||n," ").concat(a("Site.Lable.index_52")," ").concat(n||l||t);break;case 3:d.value="".concat(a("Site.Lable.index_49")," ").concat(p.oldstr," ").concat(a("Site.Lable.index_51")," ").concat(p.newstr," ，").concat(a("Site.Lable.index_50")," ").concat(t,"、").concat(l," ").concat(a("Site.Lable.index_52")," s").concat(n)}},y={oldstr:{required:!0,message:a("Site.Proxy.index_41"),trigger:["blur","input"]}};return t({onConfirm:async({hide:e})=>{var t;await(null==(t=c.value)?void 0:t.validate());let a={site_name:n.value,proxy_path:o.value,oldstr:p.oldstr,newstr:p.newstr,sub_type:p.sub_type?p.sub_type.join(""):"g"};await Ie(a),null==u||u(),e()}}),(e,t)=>{const a=Qe,l=Ze,n=ot,i=s,o=rt,r=dt;return A(),D("div",Wa,[B(r,{ref_key:"formRef",ref:c,model:W(p),rules:y},{default:M((()=>[B(l,{label:e.$t("Site.Lable.index_19"),path:"oldstr"},{default:M((()=>[B(a,{class:"w-280px",value:W(p).oldstr,"onUpdate:value":t[0]||(t[0]=e=>W(p).oldstr=e),placeholder:e.$t("Site.Placeholder.Index_10"),onInput:_},null,8,["value","placeholder"])])),_:1},8,["label"]),B(l,{label:e.$t("Site.Lable.index_15")},{default:M((()=>[B(a,{class:"w-280px",value:W(p).newstr,"onUpdate:value":t[1]||(t[1]=e=>W(p).newstr=e),placeholder:e.$t("Site.Placeholder.Index_10"),onInput:_},null,8,["value","placeholder"])])),_:1},8,["label"]),B(l,{label:" "},{default:M((()=>[B(o,{value:W(p).sub_type,"onUpdate:value":[t[2]||(t[2]=e=>W(p).sub_type=e),x]},{default:M((()=>[B(i,{"item-style":"display: flex;"},{default:M((()=>[B(n,{value:"i",label:e.$t("Site.Tips.index_12")},null,8,["label"]),B(n,{value:"o",label:e.$t("Site.Tips.index_13")},null,8,["label"]),B(n,{value:"r",label:e.$t("Site.Tips.index_14")},null,8,["label"])])),_:1})])),_:1},8,["value"])])),_:1}),B(l,{label:" "},{default:M((()=>[Y(K(W(d)),1)])),_:1})])),_:1},8,["model"])])}}}),Ya=O({__name:"index",setup(t,{expose:a}){const{t:l}=q(),{loading:n,setLoading:o}=S(),r=i(),{siteName:u,proxyPath:s}=J(r),d=async()=>{try{o(!0);const t=await wt(u.value,s.value);e(t)&&(p.data=t.sub_filter.sub_filter_str)}finally{c.value=[],o(!1)}};d(),a({init:d});const{keys:c,table:p,columns:_}=g([{key:"oldstr",title:l("Site.Lable.index_19"),width:200,ellipsis:{tooltip:{width:"trigger"}}},{key:"newstr",title:l("Site.Lable.index_15"),width:250,ellipsis:{tooltip:{width:"trigger"}}},{key:"sub_type",title:l("Site.Lable.index_16"),ellipsis:{tooltip:{width:"trigger"}}},$({width:130,options:e=>[{label:l("Public.Btn.Del"),onClick:async()=>{await Ae({site_name:u.value,proxy_path:s.value,newstr:e.newstr,oldstr:e.oldstr}),d()}}]})]),x=()=>{y.title="".concat(l("Site.Proxy.index_81")," [").concat(s.value,"]"),y.show=!0},y=C("".concat(l("Site.Proxy.index_81")," [").concat(s.value,"]"),{getList:d});return(e,t)=>{const a=Ge,l=k,i=h,o=P,r=m;return A(),D("div",null,[B(i,null,{toolsLeft:M((()=>[B(a,{type:"primary",onClick:x},{default:M((()=>[Y(K(e.$t("Site.Proxy.index_81")),1)])),_:1})])),table:M((()=>[B(l,{"checked-row-keys":W(c),"onUpdate:checkedRowKeys":t[0]||(t[0]=e=>F(c)?c.value=e:null),"row-key":"ip",loading:W(n),"max-height":440,data:W(p).data,columns:W(_)},null,8,["checked-row-keys","loading","data","columns"])])),_:1}),B(o,{class:"mt-16px"},{default:M((()=>[H("li",null,"g："+K(e.$t("Site.Tips.index_18")),1),H("li",null,"i："+K(e.$t("Site.Tips.index_12")),1),H("li",null,"o："+K(e.$t("Site.Tips.index_13")),1),H("li",null,"r："+K(e.$t("Site.Tips.index_14")),1)])),_:1}),B(r,{show:W(y).show,"onUpdate:show":t[1]||(t[1]=e=>W(y).show=e),title:W(y).title,data:W(y).data,width:600,footer:!0,component:Fa},null,8,["show","title","data"])])}}}),Ja=O({__name:"index",setup(e){const{t:t}=q(),a=I("reverse"),l=[{key:"reverse",label:t("Site.Config.index_23"),component:Ha},{key:"config",label:t("Site.Config.index_10"),component:Ka},{key:"replace",label:t("Site.Config.index_22"),component:Ya},{key:"cache",label:t("Site.Lable.index_31"),component:Oa},{key:"compressed",label:t("Site.Proxy.index_61"),component:Aa},{key:"black",label:t("Site.Proxy.index_62"),component:za},{key:"white",label:t("Site.Proxy.index_63"),component:Va}];return(e,t)=>{const n=st;return A(),ee(n,{class:"p-20px",value:W(a),"onUpdate:value":t[0]||(t[0]=e=>F(a)?a.value=e:null),options:l},null,8,["value"])}}}),Xa=O({__name:"index",setup(e,{expose:t}){const{t:a}=q(),o=i(),{proxyPath:r}=J(o),{data:u}=gt(),{keys:s,table:d,columns:c}=g([{key:"proxy_path",title:a("Site.TableRow.index_32"),width:100,ellipsis:{tooltip:{width:"trigger"}}},{key:"proxy_pass",title:a("Site.Proxy.index_1"),width:100,ellipsis:{tooltip:{width:"trigger"}}},U({key:"remark",title:a("Site.Proxy.index_3"),width:"8%",onBlur:async(e,t)=>{await De({site_name:u.name,proxy_path:t.proxy_path,remark:e})}}),$({width:120,options:e=>[{label:a("Public.Btn.Set"),onClick:()=>{w(e)}},{label:a("Public.Btn.Del"),onClick:()=>{"/"!==e.proxy_path?b({title:"".concat(a("Site.Batch.index_16")," [").concat(e.proxy_path,"]"),content:"".concat(a("Site.Batch.index_17")," [").concat(e.proxy_path,"]?"),onConfirm:async({hide:t})=>{await He({site_name:u.name,proxy_path:e.proxy_path}),x(),t()}}):n.error(a("Site.Proxy.index_74"))}}]})]),{loading:p,setLoading:_}=S(),x=async()=>{try{_(!0);const{message:e}=await se({site_name:u.name});d.data=l(e)?e:[]}finally{s.value=[],_(!1)}},y=C(a("Site.Config.index_86"),{row:void 0,siteName:u.name,getList:x}),v=()=>{y.data.row=void 0,y.title=a("Site.Config.index_92"),y.show=!0},f=C("",{row:void 0,siteName:u.name,getList:x}),w=e=>{r.value=e.proxy_path,f.title="".concat(a("Site.Config.index_93")," [").concat(e.proxy_path,"]"),f.show=!0};return x(),t({init:x}),(e,t)=>{const a=Ge,l=k,n=h,i=m;return A(),D("div",null,[B(n,null,{toolsLeft:M((()=>[B(a,{type:"primary",onClick:v},{default:M((()=>[Y(K(e.$t("Site.Config.index_85")),1)])),_:1})])),table:M((()=>[B(l,{"checked-row-keys":W(s),"onUpdate:checkedRowKeys":t[0]||(t[0]=e=>F(s)?s.value=e:null),"row-key":"proxyname",loading:W(p),"max-height":440,data:W(d).data,columns:W(c)},null,8,["checked-row-keys","loading","data","columns"])])),_:1}),B(i,{show:W(y).show,"onUpdate:show":t[1]||(t[1]=e=>W(y).show=e),title:W(y).title,data:W(y).data,width:660,footer:!0,component:Ca},null,8,["show","title","data"]),B(i,{show:W(f).show,"onUpdate:show":t[2]||(t[2]=e=>W(f).show=e),title:W(f).title,width:800,"min-height":650,component:Ja},null,8,["show","title"])])}}}),Ga={class:"pt-8px"},Qa={class:"w-300px"},Za={class:"w-300px"},el={class:"w-300px"},tl={class:"flex flex-col"},al=O({__name:"index",setup(t,{expose:a}){const{t:l}=q(),{data:n}=gt(),i=I(null),o=I(!1),r=X({fix:"",domains:"",return_rule:"",status:!1,none:!1}),u={fix:{trigger:["blur","change"],validator:()=>""!==r.fix.trim()||new Error(l("Site.RulesError.index_330"))},return_rule:{trigger:["blur","change"],validator:()=>""!==r.return_rule.trim()||new Error(l("Site.RulesError.index_330"))}},s=e=>{e?o.value=!1:(o.value=!0,r.none=!1)},d=async()=>{var e;await(null==(e=i.value)?void 0:e.validate()),await Me({id:n.id,name:n.name,fix:r.fix,domains:r.domains.trim().split("\n").join(","),return_rule:r.return_rule,status:r.status,http_status:!!r.none}),c()},c=async()=>{const{message:t}=await Ke({id:n.id,name:n.name});e(t)&&(r.fix=t.fix,r.domains=t.domains.split(",").join("\n"),r.return_rule=t.return_rule,r.status=t.status,r.none=t.http_status)};return c(),a({init:c}),(e,t)=>{const a=Qe,l=Ze,n=ot,c=Ge,p=dt,_=P;return A(),D("div",Ga,[B(p,{ref_key:"formRef",ref:i,class:"px-8px",model:W(r),rules:u},{default:M((()=>[B(l,{label:e.$t("Site.Lable.index_6"),path:"fix"},{default:M((()=>[H("div",Qa,[B(a,{value:W(r).fix,"onUpdate:value":t[0]||(t[0]=e=>W(r).fix=e),placeholder:""},null,8,["value"])])])),_:1},8,["label"]),B(l,{label:e.$t("Site.Lable.index_7")},{default:M((()=>[H("div",Za,[B(a,{value:W(r).domains,"onUpdate:value":t[1]||(t[1]=e=>W(r).domains=e),type:"textarea",autosize:{minRows:6,maxRows:6},placeholder:""},null,8,["value"])])])),_:1},8,["label"]),B(l,{label:e.$t("Site.Lable.index_13"),path:"return_rule"},{default:M((()=>[H("div",el,[B(a,{value:W(r).return_rule,"onUpdate:value":t[2]||(t[2]=e=>W(r).return_rule=e),placeholder:""},null,8,["value"])])])),_:1},8,["label"]),B(l,{label:" "},{default:M((()=>[H("div",tl,[B(n,{checked:W(r).status,"onUpdate:checked":[t[3]||(t[3]=e=>W(r).status=e),s]},{default:M((()=>[Y(K(e.$t("Site.Config.index_94")),1)])),_:1},8,["checked"]),B(n,{checked:W(r).none,"onUpdate:checked":t[4]||(t[4]=e=>W(r).none=e),class:"mt-16px",disabled:W(o)},{default:M((()=>[Y(K(e.$t("Site.Config.index_95")),1)])),_:1},8,["checked","disabled"])])])),_:1}),B(l,{label:" ","show-feedback":!1},{default:M((()=>[B(c,{type:"primary",onClick:d},{default:M((()=>[Y(K(e.$t("Site.Cert.index_60")),1)])),_:1})])),_:1})])),_:1},8,["model"]),B(_,{class:"mt-20px"},{default:M((()=>[H("li",null,[Y(K(e.$t("Site.Config.index_96")),1),t[5]||(t[5]=H("br",null,null,-1)),Y(" "+K(e.$t("Site.Config.index_97")),1)]),H("li",null,K(e.$t("Site.Config.index_98")),1),H("li",null,K(e.$t("Site.Config.index_99")),1)])),_:1})])}}}),ll={class:"mb-10px"},nl=O({__name:"index",setup(t,{expose:a}){const{data:l}=gt(),n=I("None"),i=I(0),{loading:o,setLoading:r}=S(),u=async()=>{try{r(!0);const{message:t}=await We({site_name:l.name,type:"access"});e(t)&&(n.value=t.msg?t.msg:"None",i.value=t.size)}finally{r(!1)}};return u(),a({init:u}),(e,t)=>{const a=mt,l=d;return A(),ee(l,{class:"h-560px",show:W(o)},{default:M((()=>[H("div",ll,K(e.$t("Site.Cert.index_3"))+": "+K(W(i)),1),B(a,{log:W(n)},null,8,["log"])])),_:1},8,["show"])}}}),il={class:"mb-10px"},ol=O({__name:"index",setup(t,{expose:a}){const{data:l}=gt(),n=I("None"),i=I(0),{loading:o,setLoading:r}=S(),u=async()=>{try{r(!0);const{message:t}=await We({site_name:l.name,type:"error"});e(t)&&(n.value=t.msg?t.msg:"None",i.value=t.size)}finally{r(!1)}};return u(),a({init:u}),(e,t)=>{const a=mt,l=d;return A(),ee(l,{class:"h-560px",show:W(o)},{default:M((()=>[H("div",il,K(e.$t("Site.Cert.index_3"))+": "+K(W(i)),1),B(a,{log:W(n)},null,8,["log"])])),_:1},8,["show"])}}}),rl=O({__name:"index",setup(e,{expose:t}){const{t:a}=q(),{config:l}=gt(),n=I("access"),i=I(),o=[{key:"access",label:a("Site.Config.index_100"),component:nl},{key:"error",label:a("Site.Config.index_101"),component:ol}];return n.value=l.subMenu||"access",l.subMenu="",t({init:()=>{n.value="access",le((()=>{var e;null==(e=i.value)||e.init()}))}}),(e,t)=>{const a=st;return A(),ee(a,{value:W(n),"onUpdate:value":t[0]||(t[0]=e=>F(n)?n.value=e:null),ref_key:"tabsRef",ref:i,options:o},null,8,["value"])}}}),ul=O({__name:"index",props:{siteInfo:{},config:{}},setup(e){const t=ne((()=>c((()=>import("./index242.js?v=1763625242172")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48])))),a=i(),{siteName:l}=J(a),{t:n}=q(),o=e,{siteInfo:r,config:u}=o;l.value=o.siteInfo.name;const s=I();r&&z(ft,{data:r,config:u});const d=I("domain"),p=[{key:"domain",label:n("Site.Config.index_1"),component:Lt},{key:"proxy_pass",label:n("Site.Config.index_8"),component:Xa},{key:"config",label:n("Site.Config.index_10"),component:ea},{key:"file",label:n("Site.Config.index_15"),component:ca},{key:"ssl",label:()=>B(Z,null,[n("Site.Config.index_11")]),component:t},{key:"redirect",label:n("Site.Config.index_21"),component:ga},{key:"hotlink",label:n("Site.Config.index_24"),component:al},{key:"logs",label:n("Site.Config.index_25"),component:rl}];return d.value=u.menu||"domain",u.menu="",te((()=>{window.siteConfigInit=s.value.init})),(e,t)=>{const a=Je;return A(),ee(a,{value:W(d),"onUpdate:value":t[0]||(t[0]=e=>F(d)?d.value=e:null),ref_key:"tabsRef",ref:s,data:p},null,8,["value"])}}});const sl=p(),{t:dl}=t.global;function cl({onClick:e}){return{key:"name",title:dl("Site.Lable.index_1"),width:"12%",minWidth:120,render:t=>B(a,{onClick:()=>{e(t)}},{default:()=>[t.name]})}}function pl({onClick:e}){return{key:"proxy_pass",title:dl("Site.TableRow.index_31"),minWidth:70,render:t=>B(a,{onClick:()=>{e(t)}},{default:()=>[t.proxy_pass]})}}function _l({onClick:t}){return{key:"ssl",title:"SSL",width:"12%",minWidth:100,render:l=>{let n;const{ssl:i}=l;return e(i)?B(a,{type:i.endtime<0?"error":"primary",onClick:()=>{t(l)}},{default:()=>[i.endtime<0?dl("Site.PHP.index_28"):dl("Site.PHP.index_29",[i.endtime])]}):B(a,{type:"warning",onClick:()=>{t(l)}},"function"==typeof(o=n=dl("Site.PHP.index_30"))||"[object Object]"===Object.prototype.toString.call(o)&&!ie(o)?n:{default:()=>[n]});var o}}}function xl({onClick:e}){const{openSiteWaf:t}=vt();return{key:"action",title:dl("Site.TableRow.index_30"),width:200,align:"right",render:a=>B(w,{options:[{label:dl("Site.PHP.index_14"),onClick:async()=>{await T({source:142}),await V("monitor"),ht({name:"monitor",title:"Website statistics-v2",admin:!0})}},{label:dl("Layout.Sider.wap_1"),show:"nginx"===sl.webserver||"apache"===sl.webserver,onClick:()=>{t(a.name)}},{label:dl("Site.TableOP.index_2"),onClick:()=>{e(a)}},{label:dl("Public.Btn.Del"),onClick:()=>{var e;e=[a],R({title:"".concat(dl("Site.Tips.index_17")," - [").concat(e[0].name,"]"),width:500,minHeight:72,footer:!0,data:{rows:e},component:ne((()=>c((()=>import("./index243.js?v=1763625242172")),__vite__mapDeps([49,6,2,3,4,5,7,8,9,29]))))})}}]},null)}}const yl={class:"w-860px h-700px"},ml=O({__name:"index",setup(t){const n=ne((()=>c((()=>import("./index244.js?v=1763625242172")),__vite__mapDeps([50,7,6,2,3,4,5,9,8,26,36,37,38,13,14,29])))),{t:o}=q(),r=p(),u=i(),s=_(),{web:d}=J(r),b=I(!1),w=C(o("Site.Proxy.index_82")),P=()=>{w.show=!0},$=()=>{Z()},L=X({show:!1,title:"",siteInfo:null,config:{menu:"",subMenu:""}}),T=(e,t={})=>{L.title=o("Site.PHP.index_13",[e.name,e.addtime]),L.siteInfo=e,L.config=Object.assign({menu:"",subMenu:""},t),L.show=!0},{keys:V,table:z,columns:N}=g([{type:"selection",width:40},cl({onClick:e=>{T(e)}}),pl({onClick:e=>{T(e,{menu:"proxy_pass"})}}),_l({onClick:e=>{T(e,{menu:"ssl"})}}),U({width:"14%",onBlur:async(e,t)=>{await Fe({id:t.id,ps:e})}}),xl({onClick:e=>{T(e)}})]),O=[{key:"Project",label:o("Site.Cert.index_6"),onBatch:e=>{R({title:o("Site.Cert.index_7"),content:o("Site.Cert.index_8"),width:500,minHeight:72,footer:!0,data:{rows:e},component:ne((()=>c((()=>import("./index243.js?v=1763625242172")),__vite__mapDeps([49,6,2,3,4,5,7,8,9,29]))))})}}],D=X({p:1,limit:10,search:""}),{loading:G,setLoading:Q}=S(!0),Z=async()=>{try{Q(!0);const{message:t}=await Ye(D);e(t)?e(t.data)&&(z.data=l(t.data.data)?t.data.data:[],z.total=x(t.data.page)):(z.data=[],z.total=0)}finally{V.value=[],Q(!1)}};oe((()=>u.isRefresh),(e=>{e&&(r.setRefresh(!1),Z())})),oe((()=>s.taskCount),(()=>{te()}));const te=async()=>{try{await r.getPHPConfig(),r.web.setup?(b.value=!0,Z()):(b.value=!1,Q(!1),re())}catch(e){Q(!1)}};return te(),(e,t)=>{const l=a,i=Ge,o=E,r=k,u=f,s=v,c=h,p=m,_=y,x=ut;return A(),ee(x,null,{default:M((()=>[B(_,{install:W(d).setup&&"nginx"==W(d).type},{desc:M((()=>[H("span",null,K(e.$t("Site.Cert.index_4")),1),B(l,{class:"ml-4px",onClick:t[0]||(t[0]=e=>W(j)("nginx"))},{default:M((()=>[Y(K(e.$t("Site.PHP.index_2")),1)])),_:1})])),default:M((()=>[B(c,{class:"p-16px",feedback:!0},{toolsLeft:M((()=>[B(i,{type:"primary",onClick:P},{default:M((()=>[Y(K(e.$t("Site.Cert.index_5")),1)])),_:1})])),toolsRight:M((()=>[B(o,{value:W(D).search,"onUpdate:value":t[1]||(t[1]=e=>W(D).search=e),placeholder:e.$t("Site.Placeholder.Index_11"),onSearch:Z},null,8,["value","placeholder"])])),table:M((()=>[B(r,{"checked-row-keys":W(V),"onUpdate:checkedRowKeys":t[2]||(t[2]=e=>F(V)?V.value=e:null),loading:W(G),data:W(z).data,columns:W(N)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:M((()=>[B(u,{"checked-row-keys":W(V),"onUpdate:checkedRowKeys":t[3]||(t[3]=e=>F(V)?V.value=e:null),data:W(z).data,options:O},null,8,["checked-row-keys","data"])])),pageRight:M((()=>[B(s,{page:W(D).p,"onUpdate:page":t[4]||(t[4]=e=>W(D).p=e),"page-size":W(D).limit,"onUpdate:pageSize":t[5]||(t[5]=e=>W(D).limit=e),"item-count":W(z).total,"store-key":"site-php-page",onRefresh:Z},null,8,["page","page-size","item-count"])])),_:1}),B(p,{show:W(w).show,"onUpdate:show":t[6]||(t[6]=e=>W(w).show=e),title:W(w).title,width:640,"min-height":400,footer:!0,data:{onRefresh:$},component:W(n)},null,8,["show","title","data","component"]),B(p,{show:W(L).show,"onUpdate:show":t[7]||(t[7]=e=>W(L).show=e),title:W(L).title},{default:M((()=>[H("div",yl,[B(ul,{"site-info":W(L).siteInfo,config:W(L).config},null,8,["site-info","config"])])])),_:1},8,["show","title"])])),_:1},8,["install"])])),_:1})}}}),hl=Object.freeze(Object.defineProperty({__proto__:null,default:ml},Symbol.toStringTag,{value:"Module"}));export{hl as i,gt as u};
