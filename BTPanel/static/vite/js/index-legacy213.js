System.register(["./index-legacy245.js?v=1763625242172","./public-legacy.js?v=1763625242172","./page_layout-legacy.js?v=1763625242172","./vue-legacy.js?v=1763625242172","./naive-legacy.js?v=1763625242172","./common-legacy.js?v=1763625242172","./__commonjsHelpers__-legacy.js?v=1763625242172"],(function(e,a){"use strict";var l,t,s,n,i,o,r,c,u,d,m,p,f,h,v,_,x,y,S,w,g,b,k,L,C,j,$,z,R,A,N,U,D,T,H,I,J,O;return{setters:[e=>{l=e._},e=>{t=e.a,s=e._},e=>{n=e.h5,i=e.c,o=e._,r=e.e3,c=e.m,u=e.f_,d=e.T,m=e.p,p=e.h6,f=e.q,h=e.h7},e=>{v=e.r,_=e.k,x=e.P,y=e.af,S=e.e,w=e.c,g=e.o,b=e.a5,k=e.R,L=e.S,C=e.U,j=e.X,$=e.a3,z=e.a4,R=e.V,A=e.j,N=e.aj,U=e.an,D=e.a2},e=>{T=e.d9,H=e.el,I=e.dR,J=e.aC,O=e.dk},null,null],execute:function(){var a=document.createElement("style");a.textContent="[data-v-1cd65fd9] .n-tabs-tab__label{height:24px}[data-v-1cd65fd9] .n-tabs-tab--active{color:#20a53a!important}.icon-box[data-v-5d5ba104]{rotate:-90deg;transform-origin:center;display:flex;justify-content:center;align-items:center;color:#666;background-color:#def7e8;border-radius:50%;width:50px;height:50px;margin:10px auto}:deep(.n-tabs-tab__label){height:24px}:deep(.n-tabs-tab--active){color:#20a53a!important}\n",document.head.appendChild(a);const P=v(!1),q=v({}),E=async e=>{try{P.value=!0;const{message:a}=await n({hash:e});i(a)&&(q.value=a)}finally{P.value=!1}},M={class:"text-#20a53a"},V={class:"mt-16px"},X=m(_({__name:"index",props:{row:{},onRefresh:{}},setup(e){const{t:a}=x(),l=e,{row:n}=y(l),m=v("all"),p=S({domains:n.value.user_for.sites||[]}),f=v([]),h=v([]),_=w((()=>"matched"===m.value?h.value:f.value)),U=({option:e})=>{const a=e.match?"ssl-lock":"ssl-unlock",l=e.match?"text-#20a53a":"text-error";return j(T,{size:5,class:"items-center flex-nowrap!"},{default:()=>[j(o,{name:a,class:l,size:18},null),j("div",{class:"truncate w-full"},[e.label])]})},D=()=>{t({title:"Deploy SSL Certificate",content:p.domains.length?"Are you sure you want to deploy this certificate?":"Are you sure you want to cancel the deployment",onConfirm:async()=>{const{message:e}=await r({hash:n.value.hash,domains:JSON.stringify(p.domains)});i(e)&&(e.faild?c.error(`${a("SSL.index_31")}（${e.faildList.map((e=>e.siteName)).join(",")}）`):c.success(a("SSL.index_32")),l.onRefresh())}})},O=e=>e.map((e=>({label:e.name,value:e.name,match:e.match})));return g((()=>{(async()=>{await E(n.value.hash);const e=q.value.sites.filter((e=>e.match)),a=q.value.sites.filter((e=>!e.match));f.value=O([...e,...a]),h.value=O(e),p.domains=p.domains.filter((e=>f.value.some((a=>a.value===e))))})()})),(e,a)=>{const l=b("i18n-t"),t=H,i=I,r=u,c=d,f=J,h=o,v=s;return k(),L("div",null,[C("div",null,[j(l,{keypath:"SSL.index_26",tag:"span",scope:"global"},{a:$((()=>[C("span",M,z(R(n)?.verify_domains?.join(",")),1)])),_:1}),a[2]||(a[2]=C("span",null," site",-1))]),j(i,{type:"segment",animated:"",value:R(m),"onUpdate:value":a[0]||(a[0]=e=>N(m)?m.value=e:null),class:"my-10px"},{default:$((()=>[j(t,{name:"all"},{default:$((()=>[A(z(e.$t("SSL.index_28")),1)])),_:1}),j(t,{name:"matched"},{default:$((()=>[A(z(e.$t("SSL.index_27")),1)])),_:1})])),_:1},8,["value"]),j(c,{show:R(P)},{default:$((()=>[j(r,{"render-source-label":U,"render-target-label":U,value:R(p).domains,"onUpdate:value":a[1]||(a[1]=e=>R(p).domains=e),options:R(_),"source-filterable":"","virtual-scroll":""},null,8,["value","options"])])),_:1},8,["show"]),C("div",V,[j(f,{type:"primary",onClick:D},{default:$((()=>[A(z(e.$t("SSL.index_29")),1)])),_:1})]),j(v,{class:"mt-20px"},{default:$((()=>[C("li",null,[j(h,{name:"ssl-lock",class:"text-#20a53a",size:18}),a[3]||(a[3]=C("span",{class:"ml-8px"},"This SSL is applicable to the this domain",-1))]),C("li",null,[j(h,{name:"ssl-unlock",class:"text-error",size:18}),a[4]||(a[4]=C("span",{class:"ml-8px"},'After using this SSL, accessing the domain will show a "Not Secure" warning',-1))])])),_:1})])}}}),[["__scopeId","data-v-1cd65fd9"]]),B={key:0,class:"text-#20a53a"},F={class:"icon-box"},G=m(_({__name:"index",props:{row:{}},setup(e){const a=e,{row:l}=y(a),n=S({domains:"",issuer:"",end_date:"",is_match:1}),i=e=>{t({title:"Deploy SSL Certificate",content:0===e?"Are you sure to deploy this SSL certificate to the panel?":"Are you sure you want to restore it?",onConfirm:async()=>{await p({hash:l.value.hash,recover:e}),window.location.href=window.location.href.split("?")[0]+"?_t="+Date.now()}})};return g((()=>{(async()=>{await E(l.value.hash),n.domains=q.value.panel[0].info.subject,n.issuer=q.value.panel[0].info.issuer,n.end_date=q.value.panel[0].info.notAfter,n.is_match=q.value.panel[0].match})()})),(e,a)=>{const t=b("i18n-t"),r=o,c=f,u=T,m=O,p=d,h=J,v=s;return k(),L("div",null,[C("div",null,[j(t,{keypath:"SSL.index_26",tag:"span",scope:"global"},{a:$((()=>[R(l)?(k(),L("span",B,z(R(l).verify_domains.join(",")),1)):U("",!0)])),_:1}),a[2]||(a[2]=C("span",null," panel",-1))]),j(p,{show:R(P),class:"my-16px"},{default:$((()=>[j(m,{type:"info","show-icon":!1},{default:$((()=>[j(u,{class:"py-2px text-12px items-center flex-nowrap!"},{default:$((()=>[a[3]||(a[3]=C("b",{class:"text-nowrap!"},"Current SSL",-1)),j(r,{name:"ssl-lock",class:"text-#20a53a",size:18}),j(c,{vertical:""}),C("div",null,[C("div",null,[A(z(e.$t("Config.Safe.index_37")),1),C("b",null,z(R(n).domains),1)]),C("div",null,[A(z(e.$t("Config.Safe.index_38")),1),C("b",null,z(R(n).issuer),1)]),C("div",null,[A(z(e.$t("Config.Safe.index_39")),1),C("b",null,z(R(n).end_date),1)])])])),_:1,__:[3]})])),_:1}),C("div",F,[j(r,{name:"file-back",size:40,color:"#0a8c46"})]),j(m,{type:R(n).is_match?"success":"error","show-icon":!1},{default:$((()=>[j(u,{class:"py-2px text-12px items-center flex-nowrap! text-primary"},{default:$((()=>[a[4]||(a[4]=C("b",{class:"text-nowrap!"},"New SSL",-1)),R(n).is_match?(k(),D(r,{key:0,name:"ssl-lock",class:"text-#20a53a",size:18})):(k(),D(r,{key:1,name:"ssl-unlock",class:"text-error",size:18})),j(c,{vertical:""}),C("div",null,[C("div",null,[A(z(e.$t("Config.Safe.index_37")),1),C("b",null,z(R(l).verify_domains.join(",")),1)]),C("div",null,[A(z(e.$t("Config.Safe.index_38")),1),C("b",null,z(R(l).provider+" "+R(l).issuer),1)]),C("div",null,[A(z(e.$t("Config.Safe.index_39")),1),C("b",null,z(R(l).end_date),1)])])])),_:1,__:[4]})])),_:1},8,["type"])])),_:1},8,["show"]),C("div",null,[j(h,{type:"primary",onClick:a[0]||(a[0]=e=>i(0))},{default:$((()=>[A(z(e.$t("SSL.index_29")),1)])),_:1})]),j(c,{class:"my-16px!"}),j(u,{class:"items-center"},{default:$((()=>[a[6]||(a[6]=C("span",{class:"text-desc"},"Restore to panel self-signed certificate?",-1)),j(h,{type:"primary",ghost:"",onClick:a[1]||(a[1]=e=>i(1))},{default:$((()=>a[5]||(a[5]=[A("Restore")]))),_:1,__:[5]})])),_:1,__:[6]}),j(v,{class:"mt-20px"},{default:$((()=>[C("li",null,[j(r,{name:"ssl-lock",class:"text-#20a53a",size:18}),a[7]||(a[7]=C("span",{class:"ml-8px"},"This SSL is applicable to the this panel",-1))]),C("li",null,[j(r,{name:"ssl-unlock",class:"text-error",size:18}),a[8]||(a[8]=C("span",{class:"ml-8px"},'After using this SSL, accessing the panel will show a "Not Secure" warning',-1))])])),_:1})])}}}),[["__scopeId","data-v-5d5ba104"]]),K={class:"text-#20a53a"},Q={class:"mt-16px"},W=_({__name:"index",props:{row:{},onRefresh:{}},setup(e){const{t:a}=x(),l=e,{row:n}=y(l),r=v("all"),m=S({domains:n.value.user_for.mails}),p=v([]),f=v([]),_=w((()=>"matched"===r.value?f.value:p.value)),g=({option:e})=>{const a=e.match?"ssl-lock":"ssl-unlock",l=e.match?"text-#20a53a":"text-error";return j(T,{size:5,class:"items-center flex-nowrap!"},{default:()=>[j(o,{name:a,class:l,size:18},null),j("div",{class:"truncate w-full"},[e.label])]})},U=()=>{t({title:"Deploy SSL Certificate",content:m.domains.length?"Are you sure you want to deploy this certificate?":"Are you sure you want to cancel the deployment",onConfirm:async()=>{try{const{message:e}=await h({hash:n.value.hash,domains:JSON.stringify(m.domains)});i(e)&&(e.faild?c.error(`${a("SSL.index_31")}（${e.faildList.map((e=>e.siteName)).join(",")}）`):c.success(a("SSL.index_32")))}finally{l.onRefresh()}}})},D=e=>e.map((e=>({label:e.domain,value:e.domain,match:e.match})));return(async()=>{await E(n.value.hash);const e=q.value.mails.filter((e=>e.match)),a=q.value.mails.filter((e=>!e.match));p.value=D([...e,...a]),f.value=D(e)})(),(e,a)=>{const l=b("i18n-t"),t=H,i=I,c=u,p=d,f=J,h=o,v=s;return k(),L("div",null,[C("div",null,[j(l,{keypath:"SSL.index_26",tag:"span",scope:"global"},{a:$((()=>[C("span",K,z(R(n)?.verify_domains?.join(",")),1)])),_:1}),a[2]||(a[2]=C("span",null," mail",-1))]),j(i,{type:"segment",animated:"",value:R(r),"onUpdate:value":a[0]||(a[0]=e=>N(r)?r.value=e:null),class:"my-10px"},{default:$((()=>[j(t,{name:"all"},{default:$((()=>[A(z(e.$t("SSL.index_28")),1)])),_:1}),j(t,{name:"matched"},{default:$((()=>[A(z(e.$t("SSL.index_27")),1)])),_:1})])),_:1},8,["value"]),j(p,{show:R(P)},{default:$((()=>[j(c,{"render-source-label":g,"render-target-label":g,value:R(m).domains,"onUpdate:value":a[1]||(a[1]=e=>R(m).domains=e),options:R(_),"source-filterable":"","virtual-scroll":""},null,8,["value","options"])])),_:1},8,["show"]),C("div",Q,[j(f,{type:"primary",onClick:U},{default:$((()=>[A(z(e.$t("SSL.index_29")),1)])),_:1})]),j(v,{class:"mt-20px"},{default:$((()=>[C("li",null,[j(h,{name:"ssl-lock",class:"text-#20a53a",size:18}),a[3]||(a[3]=C("span",{class:"ml-8px"},"This SSL is applicable to the this domain",-1))]),C("li",null,[j(h,{name:"ssl-unlock",class:"text-error",size:18}),a[4]||(a[4]=C("span",{class:"ml-8px"},'After using this SSL, accessing the domain will show a "Not Secure" warning',-1))])])),_:1})])}}});e("default",_({__name:"index",props:{data:{}},setup(e){const{t:a}=x(),t=e,{row:s,onRefresh:n,menu:i}=t.data,o=v("site"),r=[{key:"site",label:a("Home.index_68"),component:X,data:{row:s,onRefresh:n}},{key:"mail",label:"Mail",component:W,data:{row:s,onRefresh:n}},{key:"panel",label:"Panel",component:G,data:{row:s}}];return o.value=i||"site",(e,a)=>{const t=l;return k(),D(t,{value:R(o),"onUpdate:value":a[0]||(a[0]=e=>N(o)?o.value=e:null),data:r},null,8,["value"])}}}))}}}));
