System.register(["./index-legacy113.js?v=1769066082311","./index-legacy.js?v=1769066082311","./index.vue_vue_type_script_setup_true_lang-legacy5.js?v=1769066082311","./index.vue_vue_type_script_setup_true_lang-legacy7.js?v=1769066082311","./public-legacy.js?v=1769066082311","./index.vue_vue_type_script_setup_true_lang-legacy8.js?v=1769066082311","./page_layout-legacy.js?v=1769066082311","./alarm-legacy.js?v=1769066082311","./index.vue_vue_type_script_setup_true_lang-legacy.js?v=1769066082311","./index.vue_vue_type_script_setup_true_lang-legacy10.js?v=1769066082311","./vue-legacy.js?v=1769066082311","./naive-legacy.js?v=1769066082311","./index-legacy109.js?v=1769066082311","./soft-legacy.js?v=1769066082311","./common-legacy.js?v=1769066082311","./__commonjsHelpers__-legacy.js?v=1769066082311","./index.vue_vue_type_script_setup_true_lang-legacy6.js?v=1769066082311","./site-legacy.js?v=1769066082311"],function(e,t){"use strict";var a,l,n,s,i,u,o,d,r,c,_,p,m,g,v,y,f,h,x,b,w,S,j,k,C,P,$,U,R,q,T,A,M,z,L,V,B,N,E,F,D,H,I,K,O,W,G,J,Q,X,Y,Z,ee;return{setters:[e=>{a=e.S},e=>{l=e._},e=>{n=e._},e=>{s=e._},e=>{i=e.d,u=e.e,o=e.c,d=e.f,r=e.r,c=e.a,_=e.h,p=e.u},e=>{m=e._},e=>{g=e.aE,v=e.T,y=e.aK,f=e.x,h=e.t,x=e.d,b=e.aL,w=e.p},e=>{S=e.h,j=e.e,k=e.s},e=>{C=e._},e=>{P=e._},e=>{$=e.k,U=e.P,R=e.r,q=e.e,T=e.a2,A=e.V,M=e.a3,z=e.W,L=e.U,V=e.j,B=e.a4,N=e.S,E=e.R,F=e.o},e=>{D=e.dS,H=e.dk,I=e.dU,K=e.dV,O=e.av,W=e.dg,G=e.d_,J=e.aC,Q=e.db,X=e.di,Y=e.dT},e=>{Z=e._},e=>{ee=e.a},null,null,null,null],execute:function(){var t=document.createElement("style");t.textContent=".settings-title[data-v-f83d166b]{border-bottom:none}\n/*$vite$:1*/",document.head.appendChild(t);const te={class:"w-250px"},ae=$({__name:"service-daemon",props:{name:{default:"nginx"},onRefresh:{type:Function,default:()=>{}}},setup(e,{expose:t}){const a=e,{name:l,onRefresh:n}=a,{t:s}=U(),i=R(null),u=q({status:!0,day_num:3,interval:600,method:[],count:1,id:null,title:null}),o={day_num:{trigger:"input",type:"number",required:!0,message:s("Config.Alarm.index_22")},interval:{trigger:"input",type:"number",required:!0,message:s("Config.Alarm.index_23")},method:{trigger:"change",type:"array",required:!0,message:s("Config.Safe.index_7")}},d=e=>({template_id:"5",status:e?u.status?1:0:null,task_id:e?u.id:null,title:e?u.title:null,task_data:{task_data:{tid:"5",type:"services",title:"Service Stop Alert",status:u.status,count:u.count,interval:u.interval,project:l,help:600},sender:u.method,number_rule:{day_num:u.day_num,total:0},time_rule:{send_interval:0,time_range:[]}}}),r=R(!1);return(async()=>{try{r.value=!0;const{message:e}=await j({keyword:l});f(e)&&e.length&&(u.id=e[0].id,u.title=e[0].title,u.status=e[0].status,u.method=e[0].sender,u.count=e[0].task_data.count,u.day_num=e[0].number_rule.day_num,u.interval=e[0].task_data.interval)}finally{r.value=!1}})(),t({onConfirm:async()=>{await(i.value?.validate()),u.id?await y(d(!0)):await S(d(!1)),n()}}),(e,t)=>{const a=H,l=D,n=K,s=I,d=W,c=G,_=O,p=P,m=C,g=v;return A(),T(g,{show:L(r),class:"p-20px pt-28px pb-8px"},{default:M(()=>[z(m,{ref_key:"formRef",ref:i,model:L(u),rules:o},{default:M(()=>[z(l,{label:e.$t("Mail.Setting.index_51")},{default:M(()=>[z(a,{value:L(u).status,"onUpdate:value":t[0]||(t[0]=e=>L(u).status=e)},null,8,["value"])]),_:1},8,["label"]),z(l,{label:e.$t("Plugin.Mysql.index_4")},{default:M(()=>[z(s,{value:L(u).count,"onUpdate:value":t[1]||(t[1]=e=>L(u).count=e)},{default:M(()=>[z(n,{value:1},{default:M(()=>[V(B(e.$t("Config.Panel.index_83_1")),1)]),_:1}),z(n,{value:2},{default:M(()=>[V(B(e.$t("Config.Panel.index_83_2")),1)]),_:1})]),_:1},8,["value"])]),_:1},8,["label"]),z(l,{label:e.$t("Plugin.Mysql.index_29"),path:"interval"},{default:M(()=>[z(_,null,{default:M(()=>[z(d,{value:L(u).interval,"onUpdate:value":t[2]||(t[2]=e=>L(u).interval=e),class:"w-100px",min:0,"show-button":!1,placeholder:""},null,8,["value"]),z(c,{class:"min-w-52px text-center"},{default:M(()=>[V(B(e.$t("Public.Unit.Seconds")),1)]),_:1})]),_:1})]),_:1},8,["label"]),z(l,{label:e.$t("Config.Alarm.index_28"),path:"day_num"},{default:M(()=>[z(_,null,{default:M(()=>[z(d,{value:L(u).day_num,"onUpdate:value":t[3]||(t[3]=e=>L(u).day_num=e),class:"w-100px",min:0,"show-button":!1,placeholder:""},null,8,["value"]),z(c,{class:"min-w-52px text-center"},{default:M(()=>[V(B(e.$t("Public.Unit.Times")),1)]),_:1})]),_:1})]),_:1},8,["label"]),z(l,{label:e.$t("Config.Safe.index_6"),path:"method"},{default:M(()=>[N("div",te,[z(p,{value:L(u).method,"onUpdate:value":t[4]||(t[4]=e=>L(u).method=e)},null,8,["value"])])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show"])}}}),le={class:"p-16px h-400px"},ne=$({__name:"service-log",props:{data:{}},setup(e){const t=e,{loading:a,setLoading:l}=i(),n=R("None"),s=async()=>{if(t.data.path)try{l(!0);const{message:e}=await h({path:t.data.path});x(e)&&(n.value=e.data?e.data:"None")}finally{l(!1)}};return(e,t)=>{const l=J,i=Z;return A(),E("div",le,[z(l,{class:"mb-8px",type:"primary",onClick:s},{default:M(()=>[V(B(e.$t("Public.Btn.Refresh")),1)]),_:1}),z(i,{loading:L(a),log:L(n)},null,8,["loading","log"])])}}}),se=$({__name:"service-table",setup(e){const{t:t}=U(),a=u(t("Ftp.Table.index_15")),i=q({p:1,limit:10,search:""}),{table:v,columns:y}=o([{key:"title",title:t("Mail.Setting.index_31")},{key:"alarm",align:"center",title:()=>z(Q,{class:"items-center justify-center!",size:3},{default:()=>[z("span",null,[t("Layout.Sider.monitor_1")]),z(X,{trigger:"hover"},{trigger:()=>z("i",{class:"i-uiw:question-circle-o text-16px text-#9DA1A6 cursor-pointer"},null),default:()=>z("span",null,[t("Once monitoring is enabled, if the service stops, alerts will be sent using the alerting method you selected")])})]}),render:e=>e.alarm?z(H,{value:e.alarm.alarm_status,size:"small","onUpdate:value":async a=>{a?p({title:t("Plugin.Mysql.index_3"),width:480,footer:!0,confirmText:t("Public.Btn.Save"),data:{name:e.name,onRefresh:w},component:ae}):(await k({task_id:e.alarm.alarm_id,status:0}),e.alarm.alarm_status=!1)}},null):"--"},{key:"version",title:t("Site.TableRow.index_3")},{key:"status",title:t("Public.Table.Status"),render:e=>z(r,{value:e.status,checkedValue:!0,onClick:async()=>{f(e.name,e.status?t("Public.Status.Stop"):t("Public.Status.Start"),e.status?"stop":"start")}},null)},d({width:200,options:e=>[{label:t("Public.Status.Restart"),onClick:async()=>{f(e.name,t("Public.Status.Restart"),"restart")}},{label:t("SSL.index_58"),show:"ssh"!==e.name,onClick:()=>{ee({...e,name:e.shop_name})}},{label:"View log",show:!1,onClick:()=>{a.data=e,a.show=!0}}]})]),f=(e,a,l)=>{const n=t("Plugin.Mysql.index_5",[a,e]);c({title:t("Node.index_65"),content:n,onConfirm:async()=>{await b({name:e,type:l}),w()}})},h=()=>{i.p=1,w()},w=async()=>{try{v.loading=!0;const{message:t}=await(e=i,g.post("/config?action=get_alarm_services",e));x(t)&&(v.data=t.data,v.total=t.total)}finally{v.loading=!1}var e};return F(()=>{w()}),(e,t)=>{const u=J,o=m,d=_,r=s,c=n,p=l;return A(),E("div",null,[z(c,null,{toolsLeft:M(()=>[z(u,{type:"primary",onClick:w},{default:M(()=>[V(B(e.$t("Public.Btn.Refresh")),1)]),_:1})]),toolsRight:M(()=>[z(o,{value:L(i).search,"onUpdate:value":t[0]||(t[0]=e=>L(i).search=e),placeholder:e.$t("Please enter the service name"),onSearch:h},null,8,["value","placeholder"])]),table:M(()=>[z(d,{loading:L(v).loading,data:L(v).data,columns:L(y)},null,8,["loading","data","columns"])]),pageRight:M(()=>[z(r,{page:L(i).p,"onUpdate:page":t[1]||(t[1]=e=>L(i).p=e),"page-size":L(i).limit,"onUpdate:pageSize":t[2]||(t[2]=e=>L(i).limit=e),"item-count":L(v).total,"store-key":"config-service",onRefresh:w},null,8,["page","page-size","item-count"])]),_:1}),z(p,{show:L(a).show,"onUpdate:show":t[3]||(t[3]=e=>L(a).show=e),title:L(a).title,data:L(a).data,width:700,height:450,footer:!1,component:ne},null,8,["show","title","data"])])}}});e("default",w($({__name:"index",setup:e=>(e,t)=>{const l=Y;return A(),T(l,{class:"p-16px"},{default:M(()=>[z(a,null,{default:M(()=>[V(B(e.$t("Service Status")),1)]),_:1}),z(se)]),_:1})}}),[["__scopeId","data-v-f83d166b"]]))}}});
