import{aE as t,i as e,p as a,G as n,_ as o,a7 as i,x as l,ck as s,cf as r,aa as d,n as c,k as u,T as p,aI as x,q as m,aA as y,m as v,P as A,d as f}from"./page_layout.js?v=1767769852656";import{i as h,d as g,J as b,p as w}from"./public.js?v=1767769852656";import{R as _,V as M,W as S,k as C,r as T,aI as k,o as I,l as B,v as N,U as O,ad as L,t as q,P as R,ae as W,ao as J,c as Y,aJ as E,ak as z,a3 as U,F as Q,O as F,j as G,a4 as P,S as j,X as Z,x as V,a2 as D}from"./vue.js?v=1767769852656";import{G as H,dT as K,e1 as X,aC as $,dh as tt,dS as et,dV as at,dj as nt,df as ot,dY as it}from"./naive.js?v=1767769852656";import{m as lt,O as st,U as rt}from"./common.js?v=1767769852656";import{_ as dt}from"./index.vue_vue_type_script_setup_true_lang14.js?v=1767769852656";import"./__commonjsHelpers__.js?v=1767769852656";const ct=a=>t.post("/config?action=SetControl",a,{requestOptions:{loading:e.global.t("Monitor.API.system_1"),successMessage:!0}}),ut=e=>t.post("/ajax?action=GetCpuIo",e),pt={class:"flex-center h-full"};const xt=a({},[["render",function(t,e){const a=H;return M(),_("div",pt,[S(a,{size:"large"})])}]]),mt=["title"],yt=C({__name:"index",setup(t){const e=T(null),a=T(null),{isFullscreen:i,toggle:l}=k(a),s=()=>{l()};return I(()=>{e.value&&(a.value=n(e.value,"n-card"))}),(t,a)=>{const n=o;return B((M(),_("div",{ref_key:"iconRef",ref:e,class:"inline-flex cursor-pointer ml-8px",title:t.$t("Monitor.System.index_27"),onClick:s},[S(n,{ref_key:"iconRef",ref:e,name:"base-full-exit",size:"22"},null,512)],8,mt)),[[N,O(i)]])}}}),vt={class:"flex"},At=a(C({__name:"index",props:L({day:{default:30}},{value:{default:()=>[]},valueModifiers:{}}),emits:L(["refresh"],["update:value"]),setup(t,{emit:e}){const a=q(t,"day"),n=e,{t:d}=R(),c=W(t,"value"),u=T(),p=T(),x=T("today"),m=T(null),y=T(!1),v=[{label:d("Public.Search.Yesterday"),value:"yesterday"},{label:d("Public.Search.Today"),value:"today"},{label:d("Public.Search.Last7"),value:"7"}],{x:A,y:f,width:h,height:g}=J(u),b=Y(()=>A.value+h.value),w=Y(()=>f.value+g.value);E(p,()=>{y.value=!1});const C=t=>{"custom"!==t&&(m.value=null,c.value=N())},k=t=>{l(t)&&t[0]!==t[1]&&(c.value=t.map(t=>s(t)),y.value=!1)},I=()=>{y.value||(y.value=!0)},B=t=>{const e=new Date,n=lt(e,-a.value);return st(n).getTime()>=t||st(e).getTime()<t};function N(){const t=new Date;let e={start:st(t),end:t};switch(x.value){case"yesterday":e=r(lt(t,-1));break;case"7":e.start=st(lt(t,-6))}return[s(e.start),s(e.end)]}0===c.value.length&&(c.value=N());const L=()=>{n("refresh")};return(t,e)=>{const a=X,n=K,l=o,s=$,r=i,d=tt;return M(),_("div",vt,[S(n,{value:O(x),"onUpdate:value":[e[0]||(e[0]=t=>z(x)?x.value=t:null),C],size:"small"},{default:U(()=>[(M(),_(Q,null,F(v,t=>S(a,{key:t.value,value:t.value},{default:U(()=>[G(P(t.label),1)]),_:2},1032,["value"])),64)),S(a,{ref_key:"customRef",ref:u,value:"custom",onClick:I},{default:U(()=>[G(P(t.$t("Public.Search.Custom")),1)]),_:1},512)]),_:1},8,["value"]),S(s,{size:"small",class:"ml-10px px-8px",onClick:L},{default:U(()=>[S(l,{name:"refresh",size:"14"})]),_:1}),S(d,{show:O(y),placement:"bottom",trigger:"manual",x:O(b),y:O(w),"show-arrow":!1,style:{padding:0}},{trigger:U(()=>e[2]||(e[2]=[j("div",{class:"hidden"},null,-1)])),default:U(()=>[j("div",{ref_key:"popoverContentRef",ref:p},[S(r,{value:O(m),"onUpdate:value":[e[1]||(e[1]=t=>z(m)?m.value=t:null),k],type:"daterange",panel:!0,actions:null,"is-date-disabled":B},null,8,["value"])],512)]),_:1},8,["show","x","y"])])}}}),[["__scopeId","data-v-6be620d4"]]),ft=["title"],ht=C({__name:"index",setup(t){const e=T(null),a=T(null),{isFullscreen:i,toggle:l}=k(a),s=()=>{l()};return I(()=>{e.value&&(a.value=n(e.value,"n-card"))}),(t,a)=>{const n=o;return B((M(),_("div",{ref_key:"iconRef",ref:e,class:"inline-flex cursor-pointer ml-8px",title:t.$t("Monitor.System.index_26"),onClick:s},[S(n,{ref_key:"iconRef",ref:e,name:"base-full",size:"22"},null,512)],8,ft)),[[N,!O(i)]])}}});function gt(){const{t:t}=R(),e=Z("--color-text-2"),a=Z("--color-border");"undefined"!=typeof window&&(window.__copyText=async t=>{await h(t)});function o(t,e){let a=0;const n=(e-t)/3600/1e3,o=n/24;return a=n<=1?.02:n<=3?.5:n<=6?1:n<=12?3:n<=20?6:n<=24?8:o<=3?14:o<=7?24:168,36e5*a}function i(t,e){var a;const o=e.size.contentSize[0],i=e.size.contentSize[1],l=window.innerWidth,s=window.innerHeight,r=null==(a=n(t,"n-spin-content"))?void 0:a.getBoundingClientRect(),d=e.pos[0]+((null==r?void 0:r.left)||0),c=e.pos[1]+((null==r?void 0:r.top)||0);let u=e.pos[0]+20,p=e.pos[1]+20;return d+o+20>l&&(u=e.pos[0]-o-20),c+i+20>s&&(p=e.pos[1]-i-20),p<0-((null==r?void 0:r.top)||0)&&(p=0-((null==r?void 0:r.top)||0)+10),[u,p]}return{option:V({}),getAddTime:function(t,e){const a=new Date,n=a.getMonth()+1,o=e.split(" ")[0].split("/");parseInt(o[0]);const i=t.split(" "),l=i[0].split("/"),s=i[1].split(":"),r=parseInt(l[0]);let d=a.getFullYear();r>n&&(d-=1);const c=parseInt(l[1]),u=parseInt(s[0]),p=parseInt(s[1]);return new Date(d,r-1,c,u,p).getTime()},getInterval:o,renderTooltip:function(){return{trigger:"axis",axisPointer:{type:"cross"},padding:0,backgroundColor:"transparent",borderColor:"transparent",extraCssText:"z-index: 1000;",position:(t,e,a,n,o)=>i(a,{pos:t,size:o})}},renderTable:function(e,a=""){let n="",o="",i=3,l=[{title:"PID",index:1},{title:t("Monitor.System.index_28"),width:"120px",index:2},{title:t("Monitor.System.index_29"),index:0,render:t=>"".concat(t[0],"%")},{title:t("Monitor.System.index_30"),index:4}];return"memory"===a&&(l=[{title:"PID",index:1},{title:t("Monitor.System.index_28"),width:"120px",index:2},{title:t("Monitor.System.index_31"),index:0,render:t=>c(u(t[0]))},{title:t("Monitor.System.index_30"),index:4}]),"disk"===a&&(i=5,l=[{title:"PID",index:3},{title:t("Monitor.System.index_28"),width:"100px",index:4},{title:t("Monitor.System.index_32"),index:0,render:t=>c(u(t[0]))},{title:t("Monitor.System.index_18"),index:1,render:t=>c(u(t[1]))},{title:t("Monitor.System.index_19"),index:2,render:t=>c(u(t[2]))},{title:t("Monitor.System.index_30"),index:6}]),l.forEach(t=>{n+='<th style="width: '.concat(t.width||"auto",';">').concat(t.title,"</th>")}),e.forEach(e=>{let a="";l.forEach(t=>{a+='<td style="width: '.concat(t.width||"auto",'; border-bottom: none; cursor: pointer; padding-top: 4px;" onclick="window.__copyText(\'').concat(t.render?t.render(e):e[t.index],"')\">\n\t\t\t\t\t").concat(t.render?t.render(e):e[t.index],"\n\t\t\t\t</td>")});const n=e[i],s=n.toString().replace(/'/g,"\\'");o+="<tr>".concat(a,'</tr><tr style="color: var(--color-text-4)"><td \n\t\t\t\tcolspan="').concat(l.length,'" \n\t\t\t\tstyle="\n\t\t\t\t\tborder-bottom: 1px solid var(--color-border); \n\t\t\t\t\tcursor: pointer; \n\t\t\t\t\twhite-space: nowrap; \n\t\t\t\t\toverflow: hidden; \n\t\t\t\t\tpadding-top: 0px;\n\t\t\t\t\tpadding-bottom: 15px;\n\t\t\t\t\tline-height: 1;\n\t\t\t\t\ttext-overflow: ellipsis;" \n\t\t\t\t\ttitle="CMD：').concat(n,'" \n\t\t\t\t\tonclick="window.__copyText(\'').concat(s,'\')"\n\t\t\t\t>\n\t\t\t\t<span style="font-weight: bold;">CMD：</span>').concat(n,'\n\t\t\t\t<span style="color: #20a53a; cursor: pointer;">').concat(t("Public.Btn.Copy"),"</span>\n\t\t\t</td></tr>")}),'<div>\n\t\t\t\t<div style="display: flex; align-items: center; gap: 5px; margin-bottom: 10px; font-weight: bold; color: var(--color-text-4)">\n\t\t\t\t\t<svg viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="15.000000" height="15.000000" fill="none">\n\t\t\t\t\t\t<rect id=" " width="12.000000" height="12.000000" x="0.000000" y="0.000000" />\n\t\t\t\t\t\t<path id="矢量 70" d="M10.5145 1.73672C10.5777 1.73672 10.6316 1.79063 10.6316 1.85391L10.6316 10.1742C10.6316 10.2375 10.5777 10.2914 10.5145 10.2914L1.48633 10.2914C1.42305 10.2914 1.36914 10.2375 1.36914 10.1742L1.36914 1.85391C1.36914 1.79063 1.42305 1.73672 1.48633 1.73672L10.5145 1.73672M10.5145 1.15079L1.48633 1.15079C1.09961 1.15079 0.783203 1.46719 0.783203 1.85391L0.783203 10.1742C0.783203 10.5609 1.09961 10.8773 1.48633 10.8773L10.5145 10.8773C10.9012 10.8773 11.2176 10.5609 11.2176 10.1742L11.2176 1.85391C11.2176 1.46719 10.9012 1.15079 10.5145 1.15079Z" fill="rgb(58,66,77)" fill-rule="nonzero" />\n\t\t\t\t\t\t<path id="矢量 71" d="M2.92969 6.01408L3.86719 6.01408L3.86719 8.75626L2.92969 8.75626L2.92969 6.01408ZM5.53125 3.21564L6.46875 3.21564L6.46875 8.75626L5.53125 8.75626L5.53125 3.21564ZM8.25 4.49767L9.1875 4.49767L9.1875 8.75743L8.25 8.75743L8.25 4.49767Z" fill="rgb(58,66,77)" fill-rule="nonzero" />\n\t\t\t\t\t</svg>\n\t\t\t\t\t<span>Process resource usage ranking</span>\n\t\t\t\t</div>\n\t\t\t<div class="process-top5">\n\t\t\t\t<table>\n\t\t\t\t\t<thead>'.concat(n,"</thead>\n\t\t\t\t\t<tbody>").concat(o,"</tbody>\n\t\t\t\t</table>\n\t\t\t</div>\n\t\t</div>")},renderDataZoom:function(t,e){return[{type:"inside",start:0,end:100,zoomLock:!0,...t},{type:"slider",bottom:24,start:0,end:100,handleIcon:"path://M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4v1.3h1.3v-1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7V23h6.6V24.4z M13.3,19.6H6.7v-1.4h6.6V19.6z",handleSize:"80%",handleStyle:{color:"#fff",shadowBlur:3,shadowColor:"rgba(0, 0, 0, 0.6)",shadowOffsetX:2,shadowOffsetY:2},...e}]},renderToolbox:function(){return{feature:{dataZoom:{yAxisIndex:"none"},restore:{}},top:0,right:"2%"}},renderXAxis:function(t,a){return{type:"time",min:t,minInterval:o(t,a),axisLine:{lineStyle:{color:e.value}},axisLabel:{formatter(t){const e=d(t,"MM-dd HH:mm").split(" ");return"".concat(e[0],"\n").concat(e[1])}}}},renderYAxis:function(t){return{name:t,scale:!0,min:0,splitLine:{show:!0,lineStyle:{color:a.value}},nameTextStyle:{color:e.value,fontSize:12,align:"left"},axisLine:{lineStyle:{color:e.value}}}},renderSeries:function(t,e){return{name:t,smooth:!0,symbol:"circle",showSymbol:!1,itemStyle:{color:e},lineStyle:{width:2,color:e}}},getTooltip:i}}const bt={class:"flex items-center"},wt=C({__name:"system-load",props:{day:{default:30}},setup(e){const{t:a}=R(),n=Z("--color-text-2"),o=new Date,i=T([s(st(o)),s(o)]),r=T(!1),{option:c,getAddTime:m,renderTooltip:y,renderTable:v,renderXAxis:A,renderYAxis:f,renderSeries:h,renderDataZoom:w,renderToolbox:_,getTooltip:C}=gt();const{loading:k,setLoading:B}=g(),N=async()=>{try{B(!0);const{message:o}=await(e={start:i.value[0],end:i.value[1]},t.post("/ajax?action=get_load_average",e));if(l(o)){const t=[],e=[],l=[],s=[];for(let a=0;a<o.length;a++){const n=o[a];n.time=m(n.addtime,o[o.length-1].addtime),e.push([n.time,n.pro,n]),t.push([n.time,n.one,n]),l.push([n.time,n.five,n]),s.push([n.time,n.fifteen,n])}let p=i.value[1],g=i.value[0];o.length>0?(p=o[0].time,g=rt(o[o.length-1].time).getTime(),r.value=!1):r.value=!0,function(t,e,o){c.value={legend:{top:"16px",right:"16%",textStyle:{color:n.value},data:[a("Monitor.System.index_9"),a("Monitor.System.index_10"),a("Monitor.System.index_11")]},tooltip:{...y(),formatter(t){let e="",n="",o="";const i=Object.entries(t);return i.forEach(([t,l])=>{const{data:s}=l,[,r,d]=s;if(i.length>1&&"0"===t){const t=d.pro;n+='<div class="select-data">\n\t\t\t\t\t\t\t<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:rgb(255, 140, 0);"></span>\n\t\t\t\t\t\t\t<span>'.concat(a("Monitor.System.index_14")).concat(x(t)?t.toFixed(2):0,"%</span>\n\t\t\t\t\t\t</div>")}"0"===t&&(o=v(d.cpu_top)),e=l.axisValue;const c="System resource usage"===l.seriesName?"".concat(l.seriesName,"："):"",u=x(r)?r.toFixed(2):"0";n+='\n\t\t\t\t\t<div class="select-data">\n\t\t\t\t\t\t'.concat(l.marker,"\n\t\t\t\t\t\t<span>").concat(c).concat(u,"%</span>\n\t\t\t\t\t</div>\n\t\t\t\t")}),'<div class="echarts-tooltip" style="width: 550px;">\n\t\t\t\t\t<div class="formatter-header">\n\t\t\t\t\t\t<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAABHNCSVQICAgIfAhkiAAAAgBJREFUWIXtWN1xgzAMlkQ3YoCaYaJji8AWPjJM3AEYCasPNT3XZ2xBk17b43uCiy190b8AOHHixN8GPkpQ3/cmfrfWukfIPUyw73vjvTci8oqIJndGRBwivk3TNPwoQWYeAOC689p4hOgugsFq971KYhBRt8f9pD3IzEOOnIg4ABiJqCOibpomBIARAMbw2xd47+/BAyqoLJiznIi4pmnGmjW2rK615IuGYEbBeLvdBs3dQALTuA0yqwZqageCYBOTOxLs8zy7tm0xltW2Lc7z7Er3qv+AmSV+DzF2GJfL5R6XpZqri0mSBjMRdd8hBwDQNM0Yv3vvTel8kaCIvEbPTpMQaUdJYa11cXbHOnIoJknsCkR8KxFbluW6WoOZi64LskyqI4dNC9YsEcN7f08VLcuy2WmIyGl1qQv1VuZuCUfEqrs1UBN8hLIVT2l1JWW5llYisqfVbRJMhZfKQVo6RMTtKUklixazOMxzJjxvloO1na1hUHNhmCE/dZTOFl0clxZN0FtrVbVSW76qBNNyUCodWqSDR62vFwkGa3zGFyKaPQGeInN3zJ2LoWr86cAAByaa3JqgGTxU8yARdYlrrsx81QydaxuEryObevBQj05bi9K6uQF8xNOaSJWNT+2BX780/a+1MwUzD5rFnYiq9fEpBGM869PHiRMn/jreAZxNPtSJHlfLAAAAAElFTkSuQmCC" alt="path" />\n\t\t\t\t\t\t<span>'.concat(a("Monitor.System.index_15")).concat(e?d(e):"--",'</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="formatter-body">\n\t\t\t\t\t\t<div style="display: flex; flex-wrap: wrap; gap: 8px; justify-content: space-between;">\n\t\t\t\t\t\t\t').concat(n,"\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t").concat(o,"\n\t\t\t\t\t</div>\n\t\t\t\t</div>")}},toolbox:_(),dataZoom:w({xAxisIndex:[0,1]},{left:"5%",right:"5%",xAxisIndex:[0,1]}),grid:[{left:"5%",bottom:92,right:"55%",width:"40%",height:"auto"},{bottom:92,left:"55%",width:"40%",height:"auto"}],xAxis:[{...A(t,e),gridIndex:0},{...A(t,e),gridIndex:1}],yAxis:[{...f(a("Monitor.System.index_12")),gridIndex:0,max:function(t){return t.max>=100?Math.ceil(t.max):t.max>=80?100:u((t.max+10).toString().slice(0,1)+"0")}},{...f(a("Monitor.System.index_13")),gridIndex:1}],series:[{type:"line",xAxisIndex:0,yAxisIndex:0,data:o.pro,...h(a("Monitor.System.index_12"),"rgb(255, 140, 0)")},{type:"line",xAxisIndex:1,yAxisIndex:1,data:o.one,...h(a("Monitor.System.index_9"),"rgb(30, 144, 255)")},{type:"line",xAxisIndex:1,yAxisIndex:1,data:o.five,...h(a("Monitor.System.index_10"),"rgb(0, 178, 45)")},{type:"line",xAxisIndex:1,yAxisIndex:1,data:o.fifteen,...h(a("Monitor.System.index_11"),"rgb(147, 38, 255)")}]}}(g,p,{one:t,pro:e,five:l,fifteen:s})}}finally{B(!1)}var e},L=T(),{initChartEvent:q}=b(L,{getTooltip:C,renderTooltip:y}),W=async()=>{await N(),q()};return I(()=>{W()}),(t,e)=>{const a=ht,n=At,o=yt,l=xt,s=p,d=et;return M(),D(d,{class:"h-388px"},{header:U(()=>[j("div",bt,[j("span",null,P(t.$t("Monitor.System.index_8")),1),S(a)])]),"header-extra":U(()=>[S(n,{value:O(i),"onUpdate:value":[e[0]||(e[0]=t=>z(i)?i.value=t:null),W],day:t.day,onRefresh:W},null,8,["value","day"]),S(o)]),default:U(()=>[S(s,{class:"h-full",show:O(k)},{default:U(()=>[O(r)?(M(),D(l,{key:0})):(M(),D(dt,{key:1,ref_key:"chartRef",ref:L,type:"line",height:"100%",option:O(c)},null,8,["option"]))]),_:1},8,["show"])]),_:1})}}}),_t={class:"flex items-center"},Mt=C({__name:"system-cpu",props:{day:{default:30}},setup(t){const{t:e}=R(),a=new Date,n=T([s(st(a)),s(a)]),o=T(!1),{option:i,getAddTime:r,renderTooltip:c,renderTable:u,renderXAxis:m,renderYAxis:y,renderSeries:v,renderDataZoom:A,renderToolbox:f,getTooltip:h}=gt();const{loading:w,setLoading:_}=g(),C=async()=>{try{_(!0);const{message:t}=await ut({start:n.value[0],end:n.value[1]});if(l(t)){const a=[];for(let e=0;e<t.length;e++){const n=t[e];n.time=r(n.addtime,t[t.length-1].addtime),a.push([n.time,n.pro,n])}let l=n.value[1],s=n.value[0];t.length>0?(l=t[0].time,s=rt(t[t.length-1].time).getTime(),o.value=!1):o.value=!0,function(t,a,n){i.value={tooltip:{...c(),formatter(t){let a="",n="",o="";return Object.entries(t).forEach(([t,e])=>{const{data:i}=e,[,l,s]=i;"0"===t&&(o=u(s.cpu_top)),a=e.axisValue,n+='<div class="select-data">\n\t\t\t\t\t\t'.concat(e.marker,"\n\t\t\t\t\t\t<span>").concat(e.seriesName,"：").concat(x(l)?l.toFixed(2):0,"%</span>\n\t\t\t\t\t</div>")}),'<div class="echarts-tooltip" style="width: 550px;">\n\t\t\t\t\t<div class="formatter-header">\n\t\t\t\t\t\t<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAABHNCSVQICAgIfAhkiAAAAgBJREFUWIXtWN1xgzAMlkQ3YoCaYaJji8AWPjJM3AEYCasPNT3XZ2xBk17b43uCiy190b8AOHHixN8GPkpQ3/cmfrfWukfIPUyw73vjvTci8oqIJndGRBwivk3TNPwoQWYeAOC689p4hOgugsFq971KYhBRt8f9pD3IzEOOnIg4ABiJqCOibpomBIARAMbw2xd47+/BAyqoLJiznIi4pmnGmjW2rK615IuGYEbBeLvdBs3dQALTuA0yqwZqageCYBOTOxLs8zy7tm0xltW2Lc7z7Er3qv+AmSV+DzF2GJfL5R6XpZqri0mSBjMRdd8hBwDQNM0Yv3vvTel8kaCIvEbPTpMQaUdJYa11cXbHOnIoJknsCkR8KxFbluW6WoOZi64LskyqI4dNC9YsEcN7f08VLcuy2WmIyGl1qQv1VuZuCUfEqrs1UBN8hLIVT2l1JWW5llYisqfVbRJMhZfKQVo6RMTtKUklixazOMxzJjxvloO1na1hUHNhmCE/dZTOFl0clxZN0FtrVbVSW76qBNNyUCodWqSDR62vFwkGa3zGFyKaPQGeInN3zJ2LoWr86cAAByaa3JqgGTxU8yARdYlrrsx81QydaxuEryObevBQj05bi9K6uQF8xNOaSJWNT+2BX780/a+1MwUzD5rFnYiq9fEpBGM869PHiRMn/jreAZxNPtSJHlfLAAAAAElFTkSuQmCC" alt="path" />\n\t\t\t\t\t\t<span>'.concat(e("Monitor.System.index_15")).concat(a?d(a):"--",'</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="formatter-body">\n\t\t\t\t\t\t').concat(n,"\n\t\t\t\t\t\t").concat(o,"\n\t\t\t\t\t</div>\n\t\t\t\t</div>")}},grid:{bottom:92},toolbox:f(),dataZoom:A(),xAxis:{...m(t,a)},yAxis:{...y("CPU"),max:100},series:[{type:"line",data:n.cpu,...v("CPU","rgb(0, 153, 238)")}]}}(s,l,{cpu:a})}}finally{_(!1)}},k=T(),{initChartEvent:B}=b(k,{getTooltip:h,renderTooltip:c}),N=async()=>{await C(),B()};return I(()=>{N()}),(t,e)=>{const a=ht,l=At,s=yt,r=xt,d=p,c=et;return M(),D(c,{class:"h-388px"},{header:U(()=>[j("div",_t,[e[1]||(e[1]=j("span",null,"CPU",-1)),S(a)])]),"header-extra":U(()=>[S(l,{value:O(n),"onUpdate:value":[e[0]||(e[0]=t=>z(n)?n.value=t:null),N],day:t.day,onRefresh:N},null,8,["value","day"]),S(s)]),default:U(()=>[S(d,{class:"h-full",show:O(w)},{default:U(()=>[O(o)?(M(),D(r,{key:0})):(M(),D(dt,{key:1,ref_key:"chartRef",ref:k,type:"line",height:"100%",option:O(i)},null,8,["option"]))]),_:1},8,["show"])]),_:1})}}}),St={class:"flex items-center"},Ct=C({__name:"system-memory",props:{day:{default:30}},setup(t){const{t:e}=R(),a=new Date,n=T([s(st(a)),s(a)]),o=T(!1),{option:i,getAddTime:r,renderTooltip:c,renderTable:u,renderXAxis:m,renderYAxis:y,renderSeries:v,renderDataZoom:A,renderToolbox:f,getTooltip:h}=gt();const{loading:w,setLoading:_}=g(),C=async()=>{try{_(!0);const{message:t}=await ut({start:n.value[0],end:n.value[1]});if(l(t)){const a=[];for(let e=0;e<t.length;e++){const n=t[e];n.time=r(n.addtime,t[t.length-1].addtime),a.push([n.time,n.mem,n])}let l=n.value[1],s=n.value[0];t.length>0?(l=t[0].time,s=rt(t[t.length-1].time).getTime(),o.value=!1):o.value=!0,function(t,a,n){i.value={tooltip:{...c(),formatter(t){let a="",n="",o="";return Object.entries(t).forEach(([t,e])=>{const{data:i}=e,[,l,s]=i;"0"===t&&(o=u(s.memory_top,"memory")),a=e.axisValue,n+='<div class="select-data">\n\t\t\t\t\t\t'.concat(e.marker,"\n\t\t\t\t\t\t<span>").concat(e.seriesName,"：").concat(x(l)?l.toFixed(2):0,"%</span>\n\t\t\t\t\t</div>")}),'<div class="echarts-tooltip" style="width: 590px;">\n\t\t\t\t\t<div class="formatter-header">\n\t\t\t\t\t\t<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAABHNCSVQICAgIfAhkiAAAAgBJREFUWIXtWN1xgzAMlkQ3YoCaYaJji8AWPjJM3AEYCasPNT3XZ2xBk17b43uCiy190b8AOHHixN8GPkpQ3/cmfrfWukfIPUyw73vjvTci8oqIJndGRBwivk3TNPwoQWYeAOC689p4hOgugsFq971KYhBRt8f9pD3IzEOOnIg4ABiJqCOibpomBIARAMbw2xd47+/BAyqoLJiznIi4pmnGmjW2rK615IuGYEbBeLvdBs3dQALTuA0yqwZqageCYBOTOxLs8zy7tm0xltW2Lc7z7Er3qv+AmSV+DzF2GJfL5R6XpZqri0mSBjMRdd8hBwDQNM0Yv3vvTel8kaCIvEbPTpMQaUdJYa11cXbHOnIoJknsCkR8KxFbluW6WoOZi64LskyqI4dNC9YsEcN7f08VLcuy2WmIyGl1qQv1VuZuCUfEqrs1UBN8hLIVT2l1JWW5llYisqfVbRJMhZfKQVo6RMTtKUklixazOMxzJjxvloO1na1hUHNhmCE/dZTOFl0clxZN0FtrVbVSW76qBNNyUCodWqSDR62vFwkGa3zGFyKaPQGeInN3zJ2LoWr86cAAByaa3JqgGTxU8yARdYlrrsx81QydaxuEryObevBQj05bi9K6uQF8xNOaSJWNT+2BX780/a+1MwUzD5rFnYiq9fEpBGM869PHiRMn/jreAZxNPtSJHlfLAAAAAElFTkSuQmCC" alt="path" />\n\t\t\t\t\t\t<span>'.concat(e("Monitor.System.index_15")).concat(a?d(a):"--",'</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="formatter-body">\n\t\t\t\t\t\t').concat(n,"\n\t\t\t\t\t\t").concat(o,"\n\t\t\t\t\t</div>\n\t\t\t\t</div>")}},grid:{bottom:92},toolbox:f(),dataZoom:A(),xAxis:{...m(t,a)},yAxis:{...y(e("Monitor.System.index_16")),max:100},series:[{type:"line",data:n.memory,...v(e("Monitor.System.index_16"),"rgb(0, 153, 238)")}]}}(s,l,{memory:a})}}finally{_(!1)}},k=T(),{initChartEvent:B}=b(k,{getTooltip:h,renderTooltip:c}),N=async()=>{await C(),B()};return I(()=>{N()}),(t,e)=>{const a=ht,l=At,s=yt,r=xt,d=p,c=et;return M(),D(c,{class:"h-388px"},{header:U(()=>[j("div",St,[j("span",null,P(t.$t("Monitor.System.index_16")),1),S(a)])]),"header-extra":U(()=>[S(l,{value:O(n),"onUpdate:value":[e[0]||(e[0]=t=>z(n)?n.value=t:null),N],day:t.day,onRefresh:N},null,8,["value","day"]),S(s)]),default:U(()=>[S(d,{class:"h-full",show:O(w)},{default:U(()=>[O(o)?(M(),D(r,{key:0})):(M(),D(dt,{key:1,ref_key:"chartRef",ref:k,type:"line",height:"100%",option:O(i)},null,8,["option"]))]),_:1},8,["show"])]),_:1})}}}),Tt={class:"flex items-center"},kt="KB",It=C({__name:"system-disk",props:{day:{default:30}},setup(e){const{t:a}=R(),n=Z("--color-text-2"),o=new Date,i=T([s(st(o)),s(o)]),r=T(!1),{option:m,getAddTime:y,renderTooltip:v,renderTable:A,renderXAxis:f,renderYAxis:h,renderSeries:w,renderDataZoom:_,renderToolbox:C,getTooltip:k}=gt();const{loading:B,setLoading:N}=g(),L=t=>u(c(t,!1,3,kt)),q=async()=>{try{N(!0);const{message:o}=await(e={start:i.value[0],end:i.value[1]},t.post("/ajax?action=GetDiskIo",e));if(l(o)){const t=[],e=[],l=[],s=[];for(let n=0;n<o.length;n++){const i=o[n],r=L(i.read_bytes),d=L(i.write_bytes),c=i.read_time+i.write_time;i.time=y(i.addtime,o[o.length-1].addtime),t.push([i.time,r,i,"".concat(kt,"/s")]),e.push([i.time,d,i,"".concat(kt,"/s")]),l.push([i.time,c,i,"".concat(a("Public.Unit.Time",c),"/s")]),s.push([i.time,i.read_count+i.write_count,i,"ms"])}let c=i.value[1],u=i.value[0];o.length>0?(c=o[0].time,u=rt(o[o.length-1].time).getTime(),r.value=!1):r.value=!0,function(t,e,o){m.value={legend:{top:"16px",textStyle:{color:n.value},data:[a("Monitor.System.index_18"),a("Monitor.System.index_19"),a("Monitor.System.index_20"),a("Monitor.System.index_21")]},tooltip:{...v(),formatter(t){let e="",n="",o="";return Object.entries(t).forEach(([t,a])=>{const{data:i}=a,[,l,s,r]=i;"0"===t&&(o=A(s.disk_top,"disk")),e=a.axisValue,n+='<div class="select-data">\n\t\t\t\t\t\t'.concat(a.marker,"\n\t\t\t\t\t\t<span>").concat(a.seriesName,"：").concat(x(l)?l.toFixed(2):0,"  ").concat(r,"</span>\n\t\t\t\t\t</div>")}),'<div class="echarts-tooltip" style="width: 680px;">\n\t\t\t\t\t<div class="formatter-header">\n\t\t\t\t\t\t<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAABHNCSVQICAgIfAhkiAAAAgBJREFUWIXtWN1xgzAMlkQ3YoCaYaJji8AWPjJM3AEYCasPNT3XZ2xBk17b43uCiy190b8AOHHixN8GPkpQ3/cmfrfWukfIPUyw73vjvTci8oqIJndGRBwivk3TNPwoQWYeAOC689p4hOgugsFq971KYhBRt8f9pD3IzEOOnIg4ABiJqCOibpomBIARAMbw2xd47+/BAyqoLJiznIi4pmnGmjW2rK615IuGYEbBeLvdBs3dQALTuA0yqwZqageCYBOTOxLs8zy7tm0xltW2Lc7z7Er3qv+AmSV+DzF2GJfL5R6XpZqri0mSBjMRdd8hBwDQNM0Yv3vvTel8kaCIvEbPTpMQaUdJYa11cXbHOnIoJknsCkR8KxFbluW6WoOZi64LskyqI4dNC9YsEcN7f08VLcuy2WmIyGl1qQv1VuZuCUfEqrs1UBN8hLIVT2l1JWW5llYisqfVbRJMhZfKQVo6RMTtKUklixazOMxzJjxvloO1na1hUHNhmCE/dZTOFl0clxZN0FtrVbVSW76qBNNyUCodWqSDR62vFwkGa3zGFyKaPQGeInN3zJ2LoWr86cAAByaa3JqgGTxU8yARdYlrrsx81QydaxuEryObevBQj05bi9K6uQF8xNOaSJWNT+2BX780/a+1MwUzD5rFnYiq9fEpBGM869PHiRMn/jreAZxNPtSJHlfLAAAAAElFTkSuQmCC" alt="path" />\n\t\t\t\t\t\t<span>'.concat(a("Monitor.System.index_15")).concat(e?d(e):"--",'</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="formatter-body">\n\t\t\t\t\t\t<div style="display: grid; grid-template-columns: 0.5fr 1fr; gap: 8px;">\n\t\t\t\t\t\t\t').concat(n,"\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t").concat(o,"\n\t\t\t\t\t</div>\n\t\t\t\t</div>")}},grid:{bottom:92},toolbox:C(),dataZoom:_(),xAxis:{...f(t,e)},yAxis:{...h(a("Monitor.System.index_22",[kt]))},series:[{type:"line",data:o.read,...w(a("Monitor.System.index_18"),"rgb(255, 70, 131)")},{type:"line",data:o.write,...w(a("Monitor.System.index_19"),"rgba(46, 165, 186, .7)")},{type:"line",data:o.countTotal,...w(a("Monitor.System.index_20"),"rgba(30, 144, 255)")},{type:"line",data:o.timeTotal,...w(a("Monitor.System.index_21"),"rgba(255, 140, 0)")}]}}(u,c,{read:t,write:e,timeTotal:l,countTotal:s})}}finally{N(!1)}var e},W=T(),{initChartEvent:J}=b(W,{getTooltip:k,renderTooltip:v}),Y=async()=>{await q(),J()};return I(()=>{Y()}),(t,e)=>{const a=ht,n=At,o=yt,l=xt,s=p,d=et;return M(),D(d,{class:"h-388px"},{header:U(()=>[j("div",Tt,[j("span",null,P(t.$t("Monitor.System.index_17")),1),S(a)])]),"header-extra":U(()=>[S(n,{value:O(i),"onUpdate:value":[e[0]||(e[0]=t=>z(i)?i.value=t:null),Y],day:t.day,onRefresh:Y},null,8,["value","day"]),S(o)]),default:U(()=>[S(s,{class:"h-full",show:O(B)},{default:U(()=>[O(r)?(M(),D(l,{key:0})):(M(),D(dt,{key:1,ref_key:"chartRef",ref:W,type:"line",height:"100%",option:O(m)},null,8,["option"]))]),_:1},8,["show"])]),_:1})}}}),Bt={class:"flex whitespace-pre-wrap items-center"},Nt={class:"w-100px"},Ot="KB",Lt=C({__name:"system-network",props:{day:{default:30}},setup(e){const{t:a}=R(),n=Z("--color-text-2"),o=new Date,i=T([s(st(o)),s(o)]),r=T("all"),m=T([]),y=T(!1),{option:v,getAddTime:A,renderTooltip:f,renderXAxis:h,renderYAxis:w,renderSeries:_,renderDataZoom:C,renderToolbox:k,getTooltip:B}=gt();const{loading:N,setLoading:L}=g(),q=t=>u(c(1024*t,!1,3,Ot)),W=t=>{m.value.length>0||(m.value=Object.keys(t).map(t=>({label:t,value:t})),m.value.unshift({label:a("Public.All"),value:"all"}))},J=async()=>{try{L(!0);const{message:o}=await(e={start:i.value[0],end:i.value[1]},t.post("/ajax?action=GetNetWorkIo",e));if(l(o)){const t=[],e=[];for(let a=0;a<o.length;a++){const n=o[a],i="all"===r.value?n.up:n.up_packets[r.value],l="all"===r.value?n.down:n.down_packets[r.value],s=q(i),d=q(l);n.time=A(n.addtime,o[o.length-1].addtime),t.push([n.time,s,n,"".concat(Ot,"/s")]),e.push([n.time,d,n,"".concat(Ot,"/s")])}let l=i.value[1],s=i.value[0];o.length>0?(l=o[0].time,s=rt(o[o.length-1].time).getTime(),y.value=!1,W(o[0].down_packets)):(y.value=!0,W({})),function(t,e,o){v.value={legend:{top:"16px",textStyle:{color:n.value},data:[a("Monitor.System.index_24"),a("Monitor.System.index_25")]},tooltip:{...f(),formatter(t){let e="",n="";return Object.entries(t).forEach(([,t])=>{const{data:a}=t,[,o,,i]=a;e=t.axisValue,n+='<div class="select-data">\n\t\t\t\t\t\t'.concat(t.marker,"\n\t\t\t\t\t\t<span>").concat(t.seriesName,"：").concat(x(o)?o.toFixed(2):0,"  ").concat(i,"</span>\n\t\t\t\t\t</div>")}),'<div class="echarts-tooltip" style="width: 280px;">\n\t\t\t\t\t<div class="formatter-header">\n\t\t\t\t\t\t<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAABHNCSVQICAgIfAhkiAAAAgBJREFUWIXtWN1xgzAMlkQ3YoCaYaJji8AWPjJM3AEYCasPNT3XZ2xBk17b43uCiy190b8AOHHixN8GPkpQ3/cmfrfWukfIPUyw73vjvTci8oqIJndGRBwivk3TNPwoQWYeAOC689p4hOgugsFq971KYhBRt8f9pD3IzEOOnIg4ABiJqCOibpomBIARAMbw2xd47+/BAyqoLJiznIi4pmnGmjW2rK615IuGYEbBeLvdBs3dQALTuA0yqwZqageCYBOTOxLs8zy7tm0xltW2Lc7z7Er3qv+AmSV+DzF2GJfL5R6XpZqri0mSBjMRdd8hBwDQNM0Yv3vvTel8kaCIvEbPTpMQaUdJYa11cXbHOnIoJknsCkR8KxFbluW6WoOZi64LskyqI4dNC9YsEcN7f08VLcuy2WmIyGl1qQv1VuZuCUfEqrs1UBN8hLIVT2l1JWW5llYisqfVbRJMhZfKQVo6RMTtKUklixazOMxzJjxvloO1na1hUHNhmCE/dZTOFl0clxZN0FtrVbVSW76qBNNyUCodWqSDR62vFwkGa3zGFyKaPQGeInN3zJ2LoWr86cAAByaa3JqgGTxU8yARdYlrrsx81QydaxuEryObevBQj05bi9K6uQF8xNOaSJWNT+2BX780/a+1MwUzD5rFnYiq9fEpBGM869PHiRMn/jreAZxNPtSJHlfLAAAAAElFTkSuQmCC" alt="path" />\n\t\t\t\t\t\t<span>'.concat(a("Monitor.System.index_15")).concat(e?d(e):"--",'</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="formatter-body">\n\t\t\t\t\t\t').concat(n,"\n\t\t\t\t\t</div>\n\t\t\t\t</div>")}},grid:{bottom:92},toolbox:k(),dataZoom:C(),xAxis:{...h(t,e)},yAxis:{...w(a("Monitor.System.index_22",[Ot]))},series:[{type:"line",data:o.up,..._(a("Monitor.System.index_24"),"rgb(255, 70, 131)")},{type:"line",data:o.down,..._(a("Monitor.System.index_25"),"rgba(46, 165, 186, .7)")}]}}(s,l,{up:t,down:e})}}finally{L(!1)}var e},Y=T(),{initChartEvent:E}=b(Y,{getTooltip:B,renderTooltip:f}),Q=async()=>{await J(),E()};return I(()=>{Q()}),(t,e)=>{const a=at,n=ht,o=At,l=yt,s=xt,d=p,c=et;return M(),D(c,{class:"h-388px"},{header:U(()=>[j("div",Bt,[j("span",null,P(t.$t("Monitor.System.index_23")),1),j("div",Nt,[S(a,{value:O(r),"onUpdate:value":[e[0]||(e[0]=t=>z(r)?r.value=t:null),J],options:O(m),size:"small","consistent-menu-width":!1},null,8,["value","options"])]),S(n)])]),"header-extra":U(()=>[S(o,{value:O(i),"onUpdate:value":[e[1]||(e[1]=t=>z(i)?i.value=t:null),Q],day:t.day,onRefresh:Q},null,8,["value","day"]),S(l)]),default:U(()=>[S(d,{class:"h-full",show:O(N)},{default:U(()=>[O(y)?(M(),D(s,{key:0})):(M(),D(dt,{key:1,ref_key:"chartRef",ref:Y,type:"line",height:"100%",option:O(v)},null,8,["option"]))]),_:1},8,["show"])]),_:1})}}}),qt={class:"flex items-center flex-wrap"},Rt={class:"inline-flex items-center mr-32px"},Wt={class:"mr-12px"},Jt={class:"inline-flex items-center"},Yt={class:"mr-6px"},Et={class:"w-86px mr-12px"},zt={class:"inline-flex mx-32px"},Ut={class:"mr-16px"},Qt=C({__name:"index",setup(a){const{t:n}=R(),o=T({day:0,status:!1,size:0}),i=async t=>{await ct({type:t?1:0,day:o.value.day}),o.value.status=t},l=async()=>{o.value.day?/^-?\d+$/.test("".concat(o.value.day))?await ct({type:o.value.status?1:0,day:o.value.day}):v.error(n("Monitor.System.index_6")):v.error(n("Monitor.System.index_5"))},s=()=>{w({title:n("Monitor.System.index_4"),content:()=>S("span",{class:"text-error"},[n("Monitor.System.index_7")]),onConfirm:async()=>{await t.post("/config?action=SetControl",{type:"del"},{requestOptions:{loading:e.global.t("Monitor.API.system_2"),successMessage:!0}}),A()}})};return(async()=>{const{message:e}=await(a={type:-1},t.post("/config?action=SetControl",a));var a;f(e)&&(o.value=e)})(),(t,e)=>{const a=nt,n=ot,r=$,d=m,u=et,p=it,x=y;return M(),_("div",null,[S(u,{class:"p-16px mb-16px"},{default:U(()=>[j("div",qt,[j("div",Rt,[j("span",Wt,P(t.$t("Monitor.System.index_1")),1),S(a,{value:O(o).status,"onUpdate:value":i},null,8,["value"])]),j("div",Jt,[j("span",Yt,P(t.$t("Monitor.System.index_2")),1),j("div",Et,[S(n,{value:O(o).day,"onUpdate:value":e[0]||(e[0]=t=>O(o).day=t),min:1,"show-button":!1,placeholder:""},null,8,["value"])]),S(r,{onClick:l},{default:U(()=>[G(P(t.$t("Monitor.System.index_3")),1)]),_:1})]),j("div",zt,[S(d,{vertical:""})]),j("span",Ut,P(t.$t("Monitor.System.index_33"))+P(O(c)(O(o).size)),1),S(r,{onClick:s},{default:U(()=>[G(P(t.$t("Monitor.System.index_4")),1)]),_:1})])]),_:1}),S(x,{"x-gap":"16","y-gap":"16",cols:2},{default:U(()=>[S(p,{span:2},{default:U(()=>[S(wt,{day:O(o).day},null,8,["day"])]),_:1}),S(p,{span:1},{default:U(()=>[S(Mt,{day:O(o).day},null,8,["day"])]),_:1}),S(p,{span:1},{default:U(()=>[S(Ct,{day:O(o).day},null,8,["day"])]),_:1}),S(p,{span:1},{default:U(()=>[S(It,{day:O(o).day},null,8,["day"])]),_:1}),S(p,{span:1},{default:U(()=>[S(Lt,{day:O(o).day},null,8,["day"])]),_:1})]),_:1})])}}});export{Qt as default};
