import"./echartsGl.js?v=1769066082311";import{_ as e}from"./common.js?v=1769066082311";import"./interface.js?v=1769066082311";import{g as t}from"./index77.js?v=1769066082311";import{d as o}from"./page_layout.js?v=1769066082311";import{k as a,av as i,r,o as l,b as s,R as n,V as d}from"./vue.js?v=1769066082311";import{ac as p}from"./echarts.js?v=1769066082311";import"./__commonjsHelpers__.js?v=1769066082311";import"./setting.js?v=1769066082311";import"./naive.js?v=1769066082311";import"./public.js?v=1769066082311";import"./index.vue_vue_type_script_setup_true_lang14.js?v=1769066082311";import"./index208.js?v=1769066082311";import"./tools2.js?v=1769066082311";import"./rules.js?v=1769066082311";const c=a({__name:"map3d",setup(a){const c=i("mapRef");let m=null;const u=r(0),f=r(0),g=r([]),y=()=>{const e=document.createElement("canvas"),t=p.init(e,null,{width:4096,height:2048});return t.setOption({backgroundColor:{type:"linear",x:0,y:0,x2:0,y2:1,global:!1,colorStops:[{offset:0,color:"#9ed6ff"},{offset:.7,color:"#fafcfa"},{offset:1,color:"#9ed6ff"}]},series:[{type:"map",map:"world",left:0,top:0,right:0,bottom:0,boundingCoords:[[-180,90],[180,-90]],label:{show:!1,color:"#fff",fontSize:20},itemStyle:{areaColor:"#44b359",borderColor:"#fff",borderWidth:1}}]}),t},v=async()=>{if(!c.value)return;const{message:e}=await t();o(e)&&(u.value=e.load_ip.latitude,f.value=e.load_ip.longitude,g.value=e.attack_ip.map(t=>({coords:[[t.ip_longitude,t.ip_latitude],[e.load_ip.longitude,e.load_ip.latitude]],value:1}))),m=p.init(c.value);const a={tooltip:{show:!0},globe:{silent:!0,shading:"color",baseTexture:y(),viewControl:{distance:240,targetCoord:[f.value,u.value],maxDistance:240,minDistance:240,rotateSensitivity:2,autoRotateSpeed:10}},series:[{type:"bar3D",coordinateSystem:"globe",shading:"lambert",opacity:1,bevelSize:.2,itemStyle:{color:"#EBE806"},label:{show:!1,formatter:"{b}"},data:[]},{name:"lines3D",type:"lines3D",coordinateSystem:"globe",effect:{show:!0,period:2,trailWidth:4,trailLength:.5,trailOpacity:1,trailColor:"red"},blendMode:"lighter",lineStyle:{width:1,color:"red",opacity:0},data:g.value,silent:!1},{type:"lines3D",coordinateSystem:"globe",effect:{show:!0,trailWidth:5,trailOpacity:1,trailLength:.2,constantSpeed:5},blendMode:"lighter",lineStyle:{color:"#EBE806",width:1,opacity:1},data:[]}]};m.setOption(a)},b=()=>{null==m||m.resize()};return l(async()=>{await(async()=>{const{data:t}=await e.get("/static/vite/data/world.json");p.registerMap("world",t)})(),v(),window.addEventListener("resize",b)}),s(()=>{null==m||m.dispose(),m=null,window.removeEventListener("resize",b)}),(e,t)=>(d(),n("div",{ref_key:"mapRef",ref:c,class:"attack-map"},null,512))}});export{c as default};
