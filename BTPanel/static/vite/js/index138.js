import{b as a,h as t,d as e,c as s,f as o,_ as n}from"./public.js?v=1752142539265";import{_ as i}from"./index.vue_vue_type_script_setup_true_lang4.js?v=1752142539265";import{b0 as l,X as r,n as d,f0 as c,f3 as p,d as m}from"./page_layout.js?v=1752142539265";import{c as _}from"./file.js?v=1752142539265";import{o as u}from"./file2.js?v=1752142539265";import{ay as b}from"./naive.js?v=1752142539265";import{k as f,P as g,U as x,X as h,Q as y,a2 as w,W as j,j as D,a3 as k,V as z}from"./vue.js?v=1752142539265";import"./common.js?v=1752142539265";import"./__commonjsHelpers__.js?v=1752142539265";import"./index.vue_vue_type_script_setup_true_lang7.js?v=1752142539265";const q={class:"p-20px"},v=f({__name:"index",props:{data:{}},setup(f){const{t:v}=g(),C=f,{row:P,type:$}=C.data,L=l(),U=()=>{const a=(()=>{if(!L.backupPath)throw new Error(v("Database.tools.index_35"));const a="".concat(L.backupPath,"/database");switch($){case"pgsql":return"".concat(a,"/pgsql");case"mongodb":return"".concat(a,"/mongodb");default:return a}})(),t="pgsql"==L.type?".sql":".sql,.gz,.tar.gz,.zip";u(a,t,(()=>{F()}))},{table:W,columns:X}=a([{key:"name",title:v("Component.UploadFile.index_3"),ellipsis:{tooltip:{width:"trigger"}}},{key:"addtime",title:v("Database.tools.index_77"),width:150,render:a=>r(a.ctime)},{key:"size",title:v("Database.tools.index_14"),width:100,render:a=>d(a.size)},t({width:120,options:a=>[{label:v("Waf.Setting.index_13"),onClick:()=>{e({title:v("Database.tools.index_17"),content:v("Database.tools.index_36"),onConfirm:async({hide:t})=>{await(async a=>{await c(L.type,{file:a.path,name:P.name})})(a),t()}})}},{label:v("Public.Btn.Del"),onClick:()=>{e({title:"".concat(v("Database.tools.index_37")," [").concat(a.name,"]"),content:v("Database.tools.index_38",[a.name]),onConfirm:async({hide:t})=>{await(async a=>{await _({path:a.path}),F(),L.setRefresh(!0)})(a),t()}})}}]})]),{loading:B,setLoading:E}=s(),F=async()=>{try{E(!0);const{message:a}=await p({p:1,limit:100,search:"",type_sql:$});m(a)&&(W.data=a.data)}finally{E(!1)}};return F(),(a,t)=>{const e=b,s=o,l=i,r=n;return h(),x("div",q,[y(l,null,{toolsLeft:w((()=>[y(e,{onClick:U},{default:w((()=>[D(k(a.$t("Database.tools.index_31")),1)])),_:1})])),table:w((()=>[y(s,{"max-height":348,loading:j(B),data:j(W).data,columns:j(X)},null,8,["loading","data","columns"])])),_:1}),y(r,{class:"mt-16px"},{default:w((()=>[z("li",null,k(a.$t("Database.tools.index_32"))+" sql, zip, (tar.gz|gz|tgz)",1),z("li",null,k(a.$t("Database.tools.index_33")),1),z("li",null,k(a.$t("Database.tools.index_34")),1)])),_:1})])}}});export{v as default};
