import{_ as e,a}from"./index106.js?v=1762424784323";import{P as n,a0 as o,N as i,k as t,ad as s,ae as l,c as g,r as c,R as _,V as u,S as m,a2 as p,U as r,a4 as f,q as d,W as v,ak as b,a3 as C,j as U,F as I,an as y}from"./vue.js?v=1762424784323";import{i as h,z as w,m as k,t as x,d as S,bc as B,bd as D,p as O,be as R,q as j}from"./page_layout.js?v=1762424784323";import{a as $}from"./public.js?v=1762424784323";import{u as z}from"./file.js?v=1762424784323";import{bJ as q,aC as M,df as A,dj as F,dS as P}from"./naive.js?v=1762424784323";import"./__commonjsHelpers__.js?v=1762424784323";import"./common.js?v=1762424784323";const{t:L}=h.global,T={favicon:"/static/favicon.ico",show_login_logo:!0,show_login_bg_images:!1,login_logo:"/static/icons/logo-green.svg",login_bg_images:"",login_bg_images_opacity:100,show_main_bg_images:!0,main_bg_images:"/static/icons/main_bg.png",main_bg_images_dark:"/static/icons/main_bg_dark.png",main_bg_images_opacity:100,main_content_opacity:100,main_shadow_color:"#000000",main_shadow_opacity:5,menu_logo:"/static/icons/menu_logo.png",menu_bg_opacity:100,theme_color:"#3c444d",theme_name:"default",home_state_font_size:24},E=new Map([["menu_logo",L("Config.UI.logo")],["favicon",L("Config.UI.websiteIcon")],["login_bg_images",L("Config.UI.loginBackgroundImage")],["login_logo",L("Config.UI.loginLogoImage")],["main_bg_images",L("Config.UI.mainBackgroundImage")],["theme_color",L("Config.UI.sidebarColor")],["theme_name",L("Config.UI.colorTheme")],["menu_bg_opacity",L("Config.UI.sidebarBackgroundOpacity")],["main_content_opacity",L("Config.UI.contentOpacity")],["main_bg_images_opacity",L("Config.UI.mainBackgroundImageOpacity")],["login_bg_images_opacity",L("Config.UI.loginBackgroundOpacity")],["main_shadow_color",L("Config.UI.mainShadowColor")],["main_shadow_opacity",L("Config.UI.mainShadowOpacity")]]),H=()=>{const{t:e}=n(),a=w(),{pageConfig:t}=o(a),s=async()=>{const{message:e}=await x.post("/config?action=get_panel_asset");S(e)&&(t.value=e)},l=async(a={})=>{await x.post("/config?action=set_panel_asset",i({...t.value,...a}),{requestOptions:{loading:e("Config.UI.savingInterfaceSettings"),successMessage:!0}}),s()},g=e=>E.get(e)||e;return{pageConfig:t,fetchConfig:s,saveConfig:l,resetConfig:a=>{$({title:e("Config.UI.restoreDefaultSettings"),content:e("Config.UI.confirmRestore",{name:g(a)}),onConfirm:async()=>{await l({[a]:T[a]})}})},uploadImage:async(a,n)=>{if(n.file){const o=k.loading(e("Config.UI.uploadingImage"));try{const e=((e,a)=>{const n=(e=>{const a=e.lastIndexOf(".");return-1!==a?e.substring(a+1):"png"})(a);return"".concat(e,"_").concat(Date.now(),".").concat(n)})(a,n.name),o=new FormData;o.append("f_path","/www/server/panel/BTPanel/static/temp"),o.append("f_name",e),o.append("f_start","0"),o.append("blob",n.file),o.append("f_size",n.file.size.toString()),await z(o),await x.post("/config?action=set_panel_asset",i({...t.value,[a]:"/static/temp/".concat(e)}),{requestOptions:{successMessage:!0}}),"favicon"===a&&(e=>{const a=document.querySelector("link[rel*='icon']");a&&(a.href=B(e))})("/static/temp/".concat(e)),s()}finally{o.close()}}},resetAllConfig:()=>{$({title:e("Config.UI.restoreDefaultSettings"),content:e("Config.UI.confirmRestoreAll"),onConfirm:async()=>{await l(T)}})}}},J={class:"logo-preview"},N={key:1,class:"text-font3"},V={class:"logo-tips"},W={class:"upload-action"},G=O(t({__name:"upload",props:s({onUpload:Function},{value:{default:""},valueModifiers:{}}),emits:s(["reset"],["update:value"]),setup(e,{emit:a}){const{t:o}=n(),i=a,t=l(e,"value"),s=g(()=>B(t.value)),I=c([]),y=({file:e})=>{if(e.file){if(!e.file.type.includes("image"))return k.error(o("Config.UI.imageFileOnlyError")),!1;if(e.file.size>5242880)return k.error(o("Config.UI.imageSizeError")),!1}return!0},h=async({file:a})=>{var n;await(null==(n=e.onUpload)?void 0:n.call(e,a)),I.value=[]},w=()=>{i("reset")};return(e,a)=>{const n=q,o=M,i=D;return u(),_("div",null,[m("div",J,[t.value?(u(),p(n,{key:0,width:"100%",height:"100%",src:r(s),"preview-disabled":!0},null,8,["src"])):(u(),_("span",N,f(e.$t("Config.UI.uploadImagePlaceholder")),1))]),m("div",V,[d(e.$slots,"desc",{},void 0,!0)]),m("div",W,[v(i,{"file-list":r(I),"onUpdate:fileList":a[0]||(a[0]=e=>b(I)?I.value=e:null),class:"w-auto",action:"",multiple:!1,"show-file-list":!1,"custom-request":h,onBeforeUpload:y},{default:C(()=>[v(o,{size:"small"},{default:C(()=>[d(e.$slots,"upload",{},void 0,!0)]),_:3})]),_:3},8,["file-list"]),v(o,{onClick:w},{default:C(()=>[U(f(e.$t("Config.UI.resetDefault")),1)]),_:1})])])}}}),[["__scopeId","data-v-86fbb4bb"]]),K=t({__name:"index",setup(a){const{t:o}=n(),{pageConfig:i,uploadImage:t,resetConfig:s}=H();return(a,n)=>{const l=e;return u(),_(I,null,[v(l,{label:r(o)("Config.UI.logo")},{content:C(()=>[v(G,{value:r(i).menu_logo,"onUpdate:value":n[0]||(n[0]=e=>r(i).menu_logo=e),onUpload:n[1]||(n[1]=e=>r(t)("menu_logo",e)),onReset:n[2]||(n[2]=()=>r(s)("menu_logo"))},{desc:C(()=>[U(f(r(o)("Config.UI.logoDescription")),1)]),upload:C(()=>[U(f(r(o)("Config.UI.uploadLogo")),1)]),_:1},8,["value"])]),_:1},8,["label"]),v(l,{label:r(o)("Config.UI.websiteIcon")},{content:C(()=>[v(G,{value:r(i).favicon,"onUpdate:value":n[3]||(n[3]=e=>r(i).favicon=e),onUpload:n[4]||(n[4]=e=>r(t)("favicon",e)),onReset:n[5]||(n[5]=()=>r(s)("favicon"))},{desc:C(()=>[U(f(r(o)("Config.UI.iconDescription")),1)]),upload:C(()=>[U(f(r(o)("Config.UI.uploadIcon")),1)]),_:1},8,["value"])]),_:1},8,["label"])],64)}}}),Q={class:"flex items-center"},X={class:"w-120px mr-24px"},Y={class:"text-font3"},Z={class:"flex items-center gap-10px mt-10px"},ee=t({__name:"slider",props:{value:{default:0},valueModifiers:{}},emits:s(["save","reset"],["update:value"]),setup(e,{emit:a}){const{t:o}=n(),i=l(e,"value"),t=a,s=()=>{t("save")},g=()=>{t("reset")};return(e,a)=>{const n=R,t=A,l=M;return u(),_("div",null,[m("div",Q,[m("div",X,[v(n,{value:i.value,"onUpdate:value":a[0]||(a[0]=e=>i.value=e),step:10},null,8,["value"])]),v(t,{value:i.value,"onUpdate:value":a[1]||(a[1]=e=>i.value=e),class:"w-150px",min:0,max:100,size:"small"},null,8,["value"])]),m("div",Y,f(r(o)("Config.UI.transparencyTip")),1),m("div",Z,[v(l,{size:"small",onClick:s},{default:C(()=>[U(f(e.$t("Public.Btn.Save")),1)]),_:1}),v(l,{size:"small",onClick:g},{default:C(()=>[U(f(r(o)("Config.UI.resetDefault")),1)]),_:1})])])}}}),ae=t({__name:"index",setup(a){const{t:o}=n(),{pageConfig:i,saveConfig:t,resetConfig:s}=H();return(a,n)=>{const l=e;return u(),p(l,{label:r(o)("Config.UI.sidebarBackgroundOpacity")},{content:C(()=>[v(ee,{value:r(i).menu_bg_opacity,"onUpdate:value":n[0]||(n[0]=e=>r(i).menu_bg_opacity=e),onSave:n[1]||(n[1]=()=>r(t)()),onReset:n[2]||(n[2]=()=>r(s)("menu_bg_opacity"))},null,8,["value"])]),_:1},8,["label"])}}}),ne={class:"flex-1"},oe={class:"flex items-center h-32px"},ie=t({__name:"index",setup(a){const{t:i}=n(),{theme:t}=o(w()),{pageConfig:s,saveConfig:l,resetConfig:g,uploadImage:c}=H();return(a,n)=>{const o=F,t=e;return u(),_(I,null,[v(t,{label:r(i)("Config.UI.mainBackgroundImage")},{content:C(()=>[m("div",ne,[m("div",oe,[v(o,{value:r(s).show_main_bg_images,"onUpdate:value":[n[0]||(n[0]=e=>r(s).show_main_bg_images=e),r(l)]},{checked:C(()=>[U(f(r(i)("Config.UI.show")),1)]),unchecked:C(()=>[U(f(r(i)("Config.UI.hide")),1)]),_:1},8,["value","onUpdate:value"])]),r(s).show_main_bg_images?(u(),p(G,{key:0,value:r(s).main_bg_images,"onUpdate:value":n[1]||(n[1]=e=>r(s).main_bg_images=e),class:"mt-10px",onUpload:n[2]||(n[2]=e=>r(c)("main_bg_images",e)),onReset:n[3]||(n[3]=()=>r(g)("main_bg_images"))},{desc:C(()=>[U(f(r(i)("Config.UI.mainBackgroundDescription")),1)]),upload:C(()=>[U(f(r(i)("Config.UI.uploadImage")),1)]),_:1},8,["value"])):y("",!0)])]),_:1},8,["label"]),r(s).show_main_bg_images?(u(),p(t,{key:0,label:r(i)("Config.UI.mainBackgroundImageDark")},{content:C(()=>[v(G,{value:r(s).main_bg_images_dark,"onUpdate:value":n[4]||(n[4]=e=>r(s).main_bg_images_dark=e),class:"mt-10px",onUpload:n[5]||(n[5]=e=>r(c)("main_bg_images_dark",e)),onReset:n[6]||(n[6]=()=>r(g)("main_bg_images_dark"))},{desc:C(()=>[U(f(r(i)("Config.UI.mainBackgroundDescription")),1)]),upload:C(()=>[U(f(r(i)("Config.UI.uploadImage")),1)]),_:1},8,["value"])]),_:1},8,["label"])):y("",!0),v(t,{label:r(i)("Config.UI.backgroundOpacity")},{content:C(()=>[v(ee,{value:r(s).main_bg_images_opacity,"onUpdate:value":n[7]||(n[7]=e=>r(s).main_bg_images_opacity=e),onSave:n[8]||(n[8]=()=>r(l)()),onReset:n[9]||(n[9]=()=>r(g)("main_bg_images_opacity"))},null,8,["value"])]),_:1},8,["label"]),v(t,{label:r(i)("Config.UI.contentOpacity")},{content:C(()=>[v(ee,{value:r(s).main_content_opacity,"onUpdate:value":n[10]||(n[10]=e=>r(s).main_content_opacity=e),onSave:n[11]||(n[11]=()=>r(l)()),onReset:n[12]||(n[12]=()=>r(g)("main_content_opacity"))},null,8,["value"])]),_:1},8,["label"])],64)}}}),te={class:"flex-1"},se={class:"flex items-center h-32px"},le=t({__name:"index",setup(a){const{pageConfig:n,saveConfig:o,resetConfig:i,uploadImage:t}=H();return(a,s)=>{const l=F,g=e;return u(),_(I,null,[v(g,{label:a.$t("Config.UI.loginBackgroundImage")},{content:C(()=>[m("div",te,[m("div",se,[v(l,{value:r(n).show_login_bg_images,"onUpdate:value":[s[0]||(s[0]=e=>r(n).show_login_bg_images=e),r(o)]},{checked:C(()=>[U(f(a.$t("Config.UI.show")),1)]),unchecked:C(()=>[U(f(a.$t("Config.UI.hide")),1)]),_:1},8,["value","onUpdate:value"])]),r(n).show_login_bg_images?(u(),p(G,{key:0,value:r(n).login_bg_images,"onUpdate:value":s[1]||(s[1]=e=>r(n).login_bg_images=e),class:"mt-10px",onUpload:s[2]||(s[2]=e=>r(t)("login_bg_images",e)),onReset:s[3]||(s[3]=()=>r(i)("login_bg_images"))},{desc:C(()=>[U(f(a.$t("Config.UI.backgroundDescription")),1)]),upload:C(()=>[U(f(a.$t("Config.UI.uploadImage")),1)]),_:1},8,["value"])):y("",!0)])]),_:1},8,["label"]),r(n).show_login_bg_images?(u(),p(g,{key:0,label:a.$t("Config.UI.loginBackgroundOpacity")},{content:C(()=>[v(ee,{value:r(n).login_bg_images_opacity,"onUpdate:value":s[4]||(s[4]=e=>r(n).login_bg_images_opacity=e),onSave:s[5]||(s[5]=()=>r(o)()),onReset:s[6]||(s[6]=()=>r(i)("login_bg_images_opacity"))},null,8,["value"])]),_:1},8,["label"])):y("",!0)],64)}}}),ge={class:"py-16px"},ce={class:"my-16px"},_e=t({__name:"index",setup(e){const{t:o}=n(),{fetchConfig:i,resetAllConfig:t}=H();return i(),(e,n)=>{const i=a,s=j,l=M,g=P;return u(),p(g,{class:"p-16px"},{default:C(()=>[v(i,null,{default:C(()=>[U(f(r(o)("Config.UI.logoSettings")),1)]),_:1}),v(K),v(i,{class:"mt-12px"},{default:C(()=>[U(f(r(o)("Config.UI.sidebarSettings")),1)]),_:1}),v(ae),v(i,{class:"mt-12px"},{default:C(()=>[U(f(r(o)("Config.UI.mainBackgroundSettings")),1)]),_:1}),v(ie),v(i,{class:"mt-12px"},{default:C(()=>[U(f(r(o)("Config.UI.loginInterfaceSettings")),1)]),_:1}),v(le),m("div",ge,[m("div",ce,[v(s)]),v(l,{onClick:n[0]||(n[0]=()=>r(t)())},{default:C(()=>[U(f(r(o)("Config.UI.resetAllDefaults")),1)]),_:1})])]),_:1})}}});export{_e as default};
