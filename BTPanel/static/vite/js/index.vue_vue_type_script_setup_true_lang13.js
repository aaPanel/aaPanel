import{_ as a}from"./page_layout.js?v=1752142539265";import{u as s}from"./public.js?v=1752142539265";import{by as e,bR as t,b_ as l}from"./naive.js?v=1752142539265";import{k as n,r as i,c as r,U as c,X as u,V as o,Q as p,a3 as d,W as m,P as x,F as g}from"./vue.js?v=1752142539265";const b={class:"w-400px p-20px"},h={class:"mb-12px text-14px"},v=n({__name:"progress",props:{data:{}},emits:["close"],setup(a,{emit:s}){const l=a,{title:n,data:x,api:g,callback:v}=l.data,f=s,y=i(0),_=i(0),S=r((()=>x.length));return(async()=>{for(let s=0;s<x.length;s++)try{if(g){const a=await g(x[s]);x[s].batchStatus="success",x[s].reqMsg=t(a,"message.result","Success"),_.value+=1,_.value===S.value?y.value=100:y.value=Math.round(_.value/S.value*100)}}catch(a){x[s].batchStatus="error",x[s].reqMsg=t(a,"message.result","")}null==v||v(x),f("close")})(),(a,s)=>{const t=e;return u(),c("div",b,[o("div",h,[o("span",null,d(a.$t("Component.Batch.index_3",m(n))),1),o("span",null,d(m(_))+"/"+d(m(S)),1)]),p(t,{type:"line",status:"success",percentage:m(y),height:24,"border-radius":4,"fill-border-radius":0,processing:!0,"show-indicator":!1,"indicator-placement":"inside"},null,8,["percentage"])])}}}),f={class:"p-24px"},y={class:"flex items-center mb-24px"},_={class:"flex-1 ml-12px text-14px leading-22px"},S={class:"flex-1 ml-12px text-14px leading-22px"},w=n({__name:"index",props:{data:{}},emits:["setConfirm"],setup(e,{expose:t,emit:n}){const r=e,{title:b,desc:h,data:w,columns:C,api:k,done:M}=r.data,j=n,{t:q}=x(),P=i([]),z=i([...C,{key:"batchStatus",title:q("Public.Table.Result"),align:"right",width:200,render:a=>"success"===a.batchStatus?p("span",{class:"text-primary"},[a.reqMsg]):"error"===a.batchStatus?p("span",{class:"text-error"},[a.reqMsg]):p("span",{class:"text-warning"},[q("Public.Status.Wait")])}]),R=i(!1),W=i(""),B=a=>{const s=a.filter((a=>"success"===a.batchStatus)).length,e=a.length-s;W.value=q("Component.Confirm.index_3",[b,a.length,s,e]),R.value=!0,j("setConfirm",{text:"Done",disabled:!1}),null==M||M(a)};return(()=>{P.value=w.map((a=>({batchStatus:"wait",...a})));const{status:a}=r.data;"done"===a&&B(w)})(),t({onConfirm:({hide:a})=>(R.value?a():(j("setConfirm",{disabled:!0}),s({title:b,hideClose:!0,data:{title:b,api:k,data:P.value,callback:B},component:v})),!1)}),(s,e)=>{const t=a,n=l;return u(),c("div",f,[o("div",y,[m(R)?(u(),c(g,{key:1},[p(t,{name:"base-success",size:"40",class:"text-primary"}),o("div",S,d(m(W)),1)],64)):(u(),c(g,{key:0},[p(t,{name:"base-warning",size:"40",class:"text-warning"}),o("div",_,d(m(h)),1)],64))]),p(n,{"max-height":182,data:m(P),columns:m(z)},null,8,["data","columns"])])}}});export{w as _,v as a};
