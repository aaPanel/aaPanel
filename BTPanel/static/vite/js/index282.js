import{_ as e}from"./index.js?v=1769066082311";import{_ as t}from"./index.vue_vue_type_script_setup_true_lang.js?v=1769066082311";import{_ as s}from"./public.js?v=1769066082311";import{u as a,o as i,d as r,m as n,x as l}from"./page_layout.js?v=1769066082311";import{d as p}from"./php.js?v=1769066082311";import{s as o}from"./file.js?v=1769066082311";import{bd as u,be as m}from"./site.js?v=1769066082311";import{u as _}from"./index252.js?v=1769066082311";import{u as d}from"./index248.js?v=1769066082311";import{k as v,P as c,a0 as j,r as f,e as x,o as g,R as h,V as w,W as y,a3 as C,S,U as b,ak as k,a4 as $,j as U,N as R}from"./vue.js?v=1769066082311";import N from"./index105.js?v=1769066082311";import{dW as P,db as T,aC as W,dS as q,au as E,eo as H}from"./naive.js?v=1769066082311";import"./common.js?v=1769066082311";import"./__commonjsHelpers__.js?v=1769066082311";import"./index223.js?v=1769066082311";import"./index.vue_vue_type_script_setup_true_lang5.js?v=1769066082311";import"./index.vue_vue_type_script_setup_true_lang6.js?v=1769066082311";import"./index.vue_vue_type_script_setup_true_lang9.js?v=1769066082311";import"./index104.js?v=1769066082311";import"./index114.js?v=1769066082311";import"./index.vue_vue_type_script_setup_true_lang11.js?v=1769066082311";import"./index103.js?v=1769066082311";import"./index140.js?v=1769066082311";import"./refersh.js?v=1769066082311";import"./form.vue_vue_type_script_setup_true_lang2.js?v=1769066082311";import"./index109.js?v=1769066082311";import"./index89.js?v=1769066082311";import"./index.vue_vue_type_script_setup_true_lang7.js?v=1769066082311";import"./index.vue_vue_type_script_setup_true_lang8.js?v=1769066082311";import"./index138.js?v=1769066082311";import"./soft.js?v=1769066082311";import"./soft2.js?v=1769066082311";import"./useOperate.js?v=1769066082311";import"./useModal2.js?v=1769066082311";import"./index.vue_vue_type_script_setup_true_lang14.js?v=1769066082311";import"./logs.vue_vue_type_script_setup_true_lang.js?v=1769066082311";import"./ssl.js?v=1769066082311";import"./cert.js?v=1769066082311";import"./ssl-lets-progress.js?v=1769066082311";import"./utils3.js?v=1769066082311";import"./index230.js?v=1769066082311";import"./paypal-js.js?v=1769066082311";import"./upload.js?v=1769066082311";import"./git-ps.js?v=1769066082311";import"./theme-monokai.js?v=1769066082311";const M={class:"w-160px"},O={class:"w-380px px-20px pt-24px pb-8px"},V={class:"w-180px"},z=v({__name:"index",setup(v,{expose:z}){const{t:A}=c(),{data:B}=d(),D=_(),{multiService:F}=j(a()),G=f(null),I=f(null),J=f([]),K=f(""),L=f();let Q="";const X=e=>{var t;K.value=Y(e),null==(t=G.value)||t.getContent()},Y=e=>{const t=F.value?L.value:D.webserver;if("0.Current"===e)return"apache"===t||"openlitespeed"===t?"".concat(Q,"/.htaccess"):"/www/server/panel/vhost/rewrite/".concat(B.name,".conf");return"/www/server/panel/rewrite/".concat("openlitespeed"===t?"apache":t,"/").concat(I.value,".conf")},Z=async()=>{const e=Y("0.Current"),{message:t}=await o({path:e,data:ae.data,encoding:"utf-8"});r(t)&&n.success(t.msg);const s=J.value[0].value;I.value=s,X(s)},ee=f(!1),te=()=>{ee.value=!0},se=f(null),ae=x({name:"",data:"",site_id:B.id}),ie={name:{required:!0,trigger:["blur","change"],message:A("Site.RulesError.index_21")}},re=async({hide:e})=>{var t;await(null==(t=se.value)?void 0:t.validate()),await m(R(ae)),ae.name="",ne(),e()},ne=async()=>{var e;const{message:t}=await u({siteName:B.name});if(r(t)){Q=t.sitePath;const e=l(t.rewrite)?t.rewrite:[];J.value=H(e).map(e=>({label:e,value:e})),e.length&&(I.value=e[0],K.value=Y(e[0]))}null==(e=G.value)||e.getContent()},le=async()=>{(async()=>{const{message:e}=await p({site_id:B.id});r(e)&&(L.value=e.result)})(),ne()};return g(()=>{le()}),z({init:le}),(a,r)=>{const n=P,l=i,p=T,o=W,u=s,m=E,_=q,d=t,v=e;return w(),h("div",null,[y(p,{class:"items-center mb-12px"},{default:C(()=>[S("div",M,[y(n,{value:b(I),"onUpdate:value":[r[0]||(r[0]=e=>k(I)?I.value=e:null),X],options:b(J)},null,8,["value","options"])]),S("div",null,[S("span",null,$(a.$t("Site.Config.index_56"))+": ",1),y(l,{href:"https://winginx.com/en/htaccess",target:"_blank"},{default:C(()=>[U($(a.$t("Site.Cert.index_42")),1)]),_:1})])]),_:1}),y(N,{ref_key:"configRef",ref:G,path:b(K),"onUpdate:path":r[1]||(r[1]=e=>k(K)?K.value=e:null),value:b(ae).data,"onUpdate:value":r[2]||(r[2]=e=>b(ae).data=e),height:400,"show-tips":!1},null,8,["path","value"]),y(p,{class:"items-center mt-12px"},{default:C(()=>[y(o,{type:"primary",onClick:Z},{default:C(()=>[U($(a.$t("Site.Cert.index_60")),1)]),_:1}),y(o,{onClick:te},{default:C(()=>[U($(a.$t("Site.Cert.index_39")),1)]),_:1})]),_:1}),y(u,{class:"mt-24px"},{default:C(()=>[S("li",null,$(a.$t("Site.Config.index_57")),1),S("li",null,$(a.$t("Site.Config.index_52")),1),S("li",null,$(a.$t("Site.Config.index_58")),1)]),_:1}),y(v,{show:b(ee),"onUpdate:show":r[4]||(r[4]=e=>k(ee)?ee.value=e:null),title:"Save as rewrite template",footer:!0,onConfirm:re},{default:C(()=>[S("div",O,[y(d,{ref_key:"formRef",ref:se,model:b(ae),rules:ie},{default:C(()=>[y(_,{label:"Template name",path:"name"},{default:C(()=>[S("div",V,[y(m,{value:b(ae).name,"onUpdate:value":r[3]||(r[3]=e=>b(ae).name=e),placeholder:"Template name"},null,8,["value"])])]),_:1})]),_:1},8,["model"])])]),_:1},8,["show"])])}}});export{z as default};
