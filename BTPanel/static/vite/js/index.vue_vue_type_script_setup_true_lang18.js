import{a,d as t,u as e,_ as s}from"./public.js?v=1767769852656";import{g as l}from"./php.js?v=1767769852656";import{aL as n,c as u,d as i,aK as o,x as r,ef as d,eg as _,q as p}from"./page_layout.js?v=1767769852656";import{p as c}from"./soft.js?v=1767769852656";import{da as m,aC as v,dR as f,dj as g,dT as x,dU as y,av as h,df as b,dZ as $}from"./naive.js?v=1767769852656";import{k as P,P as S,r as k,R as w,V as C,F as j,W as q,a3 as U,j as R,S as M,a4 as A,U as L,H as N,a2 as T,an as B,e as F,ak as z,q as D,o as H}from"./vue.js?v=1767769852656";import{h as K,s as V,e as W}from"./alarm.js?v=1767769852656";import{_ as Z}from"./index.vue_vue_type_script_setup_true_lang.js?v=1767769852656";import{_ as E}from"./index.vue_vue_type_script_setup_true_lang10.js?v=1767769852656";import G from"./index100.js?v=1767769852656";const I=P({__name:"index",setup(t){const{t:e}=S(),s=k(!0),o=(t,s)=>{const l=e("Plugin.Mysql.index_5",[t,c.title]);a({title:e("Node.index_65"),content:l,onConfirm:async()=>{await n({name:c.s_version,type:s}),r()}})},r=async()=>{if("memcached"===c.name){const{message:a}=await u({sName:"memcached"});return void(i(a)&&(s.value=a.status,c.s_version=a.s_version,c.s_status=a.status))}const{message:a}=await l({name:c.name});i(a)&&(s.value=a.s_status,c.s_version=a.s_version,c.s_status=a.s_status)};return r(),(a,t)=>{const e=m,l=v;return C(),w(j,null,[q(e,{class:"items-center",size:0},{default:U(()=>[R(A(a.$t("Node.index_57"))+"ï¼š"+A(L(s)?a.$t("Public.Status.Start"):a.$t("Public.Status.Stop")),1),M("span",{class:N(["iconfont","icon-".concat(L(s)?"start":"stop")])},null,2)]),_:1}),q(e,{class:"mt-16px"},{default:U(()=>[q(l,{onClick:t[0]||(t[0]=t=>o(L(s)?a.$t("Public.Status.Stop"):a.$t("Public.Status.Start"),L(s)?"stop":"start"))},{default:U(()=>[R(A(L(s)?a.$t("Public.Status.Stop"):a.$t("Public.Status.Start")),1)]),_:1}),q(l,{onClick:t[1]||(t[1]=t=>o(a.$t("Public.Status.Restart"),"restart"))},{default:U(()=>[R(A(a.$t("Public.Status.Restart")),1)]),_:1}),"mongodb"!==L(c).name?(C(),T(l,{key:0,onClick:t[2]||(t[2]=t=>o(a.$t("Public.Status.Reload"),"reload"))},{default:U(()=>[R(A(a.$t("Public.Status.Reload")),1)]),_:1})):B("",!0)]),_:1})],64)}}}),J={class:"p-20px pt-28px pb-8px"},O={class:"w-250px"},Q=P({__name:"set",props:{open:{type:Boolean,default:!1},taskList:{default:()=>[]}},emits:["refresh"],setup(a,{expose:t,emit:e}){const s=a,{open:l,taskList:n}=s,u=e,{t:i}=S(),r=k(null),d=F({status:!0,day_num:3,interval:600,method:[],count:1}),_={day_num:{trigger:"input",type:"number",required:!0,message:i("Config.Alarm.index_22")},interval:{trigger:"input",type:"number",required:!0,message:i("Config.Alarm.index_23")},method:{trigger:"change",type:"array",required:!0,message:i("Config.Safe.index_7")}},p=a=>({template_id:"5",status:a?d.status?1:0:null,task_id:a?n[0].id:null,title:a?n[0].title:null,task_data:{task_data:{tid:"5",type:"services",title:"Service Stop Alert",status:d.status,count:d.count,interval:d.interval,project:c.name,help:600},sender:d.method,number_rule:{day_num:d.day_num,total:0},time_rule:{send_interval:0,time_range:[]}}});return n.length>0&&(d.status=l||n[0].status,d.method=n[0].sender,d.count=n[0].task_data.count,d.day_num=n[0].number_rule.day_num,d.interval=n[0].task_data.interval),t({onConfirm:async()=>{var a;await(null==(a=r.value)?void 0:a.validate()),n.length?await o(p(!0)):await K(p(!1)),u("refresh")}}),(a,t)=>{const e=g,s=f,l=y,n=x,u=b,i=$,o=h,p=E,c=Z;return C(),w("div",J,[q(c,{ref_key:"formRef",ref:r,model:L(d),rules:_},{default:U(()=>[q(s,{label:a.$t("Mail.Setting.index_51")},{default:U(()=>[q(e,{value:L(d).status,"onUpdate:value":t[0]||(t[0]=a=>L(d).status=a)},null,8,["value"])]),_:1},8,["label"]),q(s,{label:a.$t("Plugin.Mysql.index_4")},{default:U(()=>[q(n,{value:L(d).count,"onUpdate:value":t[1]||(t[1]=a=>L(d).count=a)},{default:U(()=>[q(l,{value:1},{default:U(()=>[R(A(a.$t("Config.Panel.index_83_1")),1)]),_:1}),q(l,{value:2},{default:U(()=>[R(A(a.$t("Config.Panel.index_83_2")),1)]),_:1})]),_:1},8,["value"])]),_:1},8,["label"]),q(s,{label:a.$t("Plugin.Mysql.index_29"),path:"interval"},{default:U(()=>[q(o,null,{default:U(()=>[q(u,{value:L(d).interval,"onUpdate:value":t[2]||(t[2]=a=>L(d).interval=a),class:"w-100px",min:0,"show-button":!1,placeholder:""},null,8,["value"]),q(i,{class:"min-w-52px text-center"},{default:U(()=>[R(A(a.$t("Public.Unit.Seconds")),1)]),_:1})]),_:1})]),_:1},8,["label"]),q(s,{label:a.$t("Config.Alarm.index_28"),path:"day_num"},{default:U(()=>[q(o,null,{default:U(()=>[q(u,{value:L(d).day_num,"onUpdate:value":t[3]||(t[3]=a=>L(d).day_num=a),class:"w-100px",min:0,"show-button":!1,placeholder:""},null,8,["value"]),q(i,{class:"min-w-52px text-center"},{default:U(()=>[R(A(a.$t("Public.Unit.Times")),1)]),_:1})]),_:1})]),_:1},8,["label"]),q(s,{label:a.$t("Config.Safe.index_6"),path:"method"},{default:U(()=>[M("div",O,[q(p,{value:L(d).method,"onUpdate:value":t[4]||(t[4]=a=>L(d).method=a)},null,8,["value"])])]),_:1},8,["label"])]),_:1},8,["model"])])}}}),X={class:"text-13px"},Y=P({__name:"index",setup(a){const{t:s}=S(),l=k(!1),n=k([]),u=async a=>{a?i(!0):(await V({task_id:n.value[0].id,status:0}),l.value=!1,n.value[0].status=!1)},i=(a=!1)=>{e({title:s("Plugin.Mysql.index_3"),width:480,footer:!0,confirmText:s("Public.Btn.Save"),data:{open:a,taskList:n.value,onRefresh:_},component:Q})},{loading:o,setLoading:d}=t(),_=async()=>{try{d(!0);const{message:a}=await W({keyword:c.name});r(a)&&(a.length?(l.value=a[0].status,n.value=a):(l.value=!1,n.value=[]))}finally{d(!1)}};return _(),(a,t)=>{const e=g,s=m;return C(),T(s,{class:"items-center"},{default:U(()=>[M("div",X,A(a.$t("Plugin.Mysql.index_2")),1),q(e,{value:L(l),loading:L(o),"onUpdate:value":u},null,8,["value","loading"]),M("span",{class:"bt-link",onClick:t[0]||(t[0]=a=>i(L(l)))},A(a.$t("Database.Mysql.index_26")),1)]),_:1})}}}),aa=P({__name:"index",setup(a,{expose:e}){const l=k(!1),n=async a=>{try{await d({name:c.name,status:a?1:0})}catch(t){l.value=!l.value}},{loading:u,setLoading:o}=t(),r=async()=>{try{o(!0);const{message:a}=await _({name:c.name});i(a)&&(l.value=!!a.status)}finally{o(!1)}};return r(),e({init:r}),(a,t)=>{const e=g,i=m,o=s;return C(),w(j,null,[q(i,{class:"items-center"},{default:U(()=>[M("span",null,A(a.$t("Plugin.Apache.index_10")),1),q(e,{value:L(l),"onUpdate:value":[t[0]||(t[0]=a=>z(l)?l.value=a:null),n],loading:L(u)},null,8,["value","loading"]),t[1]||(t[1]=M("span",null,null,-1))]),_:1,__:[1]}),q(o,{class:"mt-10px"},{default:U(()=>[M("li",null,A(a.$t("Plugin.Apache.index_14")),1),M("li",null,A(a.$t("Plugin.Apache.index_11",[L(c).title])),1)]),_:1})],64)}}}),ta=P({__name:"index",setup:a=>(a,t)=>{const e=p;return C(),w(j,null,[q(I),q(e,{class:"py-26px"}),a.$slots.center?(C(),w(j,{key:0},[D(a.$slots,"center"),q(e,{class:"py-26px"})],64)):B("",!0),q(Y),q(e,{class:"py-26px"}),q(aa)],64)}}),ea={class:"mt-8px"},sa=P({__name:"index",props:{path:{},height:{default:480}},setup(a,{expose:t}){const e=k(null),l=a,n=k(l.path),u=async()=>{var a;null==(a=e.value)||a.getContent()},i=()=>{var a;null==(a=e.value)||a.saveFile()};return H(()=>{u()}),t({init:u}),(a,t)=>{const u=v,o=s;return C(),w("div",null,[q(G,{ref_key:"configRef",ref:e,path:L(n),"onUpdate:path":t[0]||(t[0]=a=>z(n)?n.value=a:null),height:l.height},null,8,["path","height"]),M("div",ea,[q(u,{type:"primary",onClick:i},{default:U(()=>[R(A(a.$t("Site.Cert.index_60")),1)]),_:1})]),q(o,{class:"mt-16px"},{default:U(()=>[M("li",null,A(a.$t("Plugin.Mysql.index_1",[L(c).name])),1)]),_:1})])}}});export{ta as _,sa as a};
