const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/rewrite.js?v=1764233927359","js/public.js?v=1764233927359","js/page_layout.js?v=1764233927359","js/vue.js?v=1764233927359","js/__commonjsHelpers__.js?v=1764233927359","js/naive.js?v=1764233927359","js/common.js?v=1764233927359","css/page_layout.css?v=1764233927359","css/public.css?v=1764233927359","js/index238.js?v=1764233927359","js/file.js?v=1764233927359","js/php.js?v=1764233927359","js/index100.js?v=1764233927359","js/theme-monokai.js?v=1764233927359","css/index16.css?v=1764233927359","js/index245.js?v=1764233927359","css/index59.css?v=1764233927359","js/index.vue_vue_type_script_setup_true_lang5.js?v=1764233927359","js/index.vue_vue_type_script_setup_true_lang6.js?v=1764233927359","css/index15.css?v=1764233927359","js/index.vue_vue_type_script_setup_true_lang12.js?v=1764233927359","js/index99.js?v=1764233927359","css/index14.css?v=1764233927359","js/site.js?v=1764233927359","js/index107.js?v=1764233927359","css/index21.css?v=1764233927359","js/index.vue_vue_type_script_setup_true_lang.js?v=1764233927359","js/index.vue_vue_type_script_setup_true_lang10.js?v=1764233927359","js/index98.js?v=1764233927359","css/index13.css?v=1764233927359","js/index.js?v=1764233927359","css/index110.css?v=1764233927359","js/index132.js?v=1764233927359","css/index23.css?v=1764233927359","js/refersh.js?v=1764233927359","js/form.vue_vue_type_script_setup_true_lang2.js?v=1764233927359","js/index104.js?v=1764233927359","css/index19.css?v=1764233927359","js/index84.js?v=1764233927359","js/index.vue_vue_type_script_setup_true_lang7.js?v=1764233927359","js/index.vue_vue_type_script_setup_true_lang8.js?v=1764233927359","js/index130.js?v=1764233927359","js/soft.js?v=1764233927359","css/index22.css?v=1764233927359","js/soft2.js?v=1764233927359","js/useOperate.js?v=1764233927359","js/useModal2.js?v=1764233927359","js/index.vue_vue_type_script_setup_true_lang15.js?v=1764233927359","css/index58.css?v=1764233927359","js/logs.vue_vue_type_script_setup_true_lang.js?v=1764233927359","js/ssl.js?v=1764233927359","js/cert.js?v=1764233927359","js/ssl-lets-progress.js?v=1764233927359","css/ssl-lets-progress.css?v=1764233927359","js/utils3.js?v=1764233927359","js/index217.js?v=1764233927359","js/paypal-js.js?v=1764233927359","css/index48.css?v=1764233927359","js/upload.js?v=1764233927359","js/git-ps.js?v=1764233927359","js/index212.js?v=1764233927359","css/index93.css?v=1764233927359","js/index213.js?v=1764233927359","css/index94.css?v=1764233927359","js/domain-verification.js?v=1764233927359","js/log2.js?v=1764233927359","js/index268.js?v=1764233927359"])))=>i.map(i=>d[i]);
import{i as e,o as a,x as t,m as l,q as i,d as n,a as s,bj as o,h as d,u as r,aY as u,p as c,e1 as p,g as _,e0 as m,T as v,cx as f,e3 as h,e4 as x,e5 as y,_ as g,dt as b,du as w,dv as S,e7 as k,e8 as C,am as $,dy as P,a6 as L}from"./page_layout.js?v=1764233927359";import{_ as U}from"./index245.js?v=1764233927359";import{i as R,p as E,W as T,k as B,P as j,r as D,R as N,V as I,S as W,a3 as O,a4 as A,ak as H,U as z,j as M,e as q,an as F,F as V,_ as J,a2 as K,n as X,N as G,a0 as Y,o as Z,ay as Q,l as ee,v as ae,O as te,c as le,y as ie,H as ne,am as se,w as oe,m as de,x as re,u as ue}from"./vue.js?v=1764233927359";import{u as ce}from"./index238.js?v=1764233927359";import{_ as pe}from"./index.vue_vue_type_script_setup_true_lang5.js?v=1764233927359";import{_ as _e}from"./index.vue_vue_type_script_setup_true_lang12.js?v=1764233927359";import{a as me,S as ve,c as fe,d as he,h as xe,e as ye,f as ge,_ as be,b as we,r as Se,u as ke,l as Ce,V as $e,W as Pe,X as Le,p as Ue,i as Re}from"./public.js?v=1764233927359";import{_ as Ee}from"./index99.js?v=1764233927359";import{a2 as Te,a3 as Be,a4 as je,a5 as De,a6 as Ne,a7 as Ie,a8 as We,a9 as Oe,aa as Ae,ab as He,ac as ze,aU as Me,aV as qe,aW as Fe,aX as Ve,aY as Je,ay as Ke,az as Xe,aA as Ge,aB as Ye,aC as Ze,aD as Qe,aE as ea,aF as aa,aq as ta,ar as la,as as ia,aZ as na,a_ as sa,at as oa,au as da,av as ra,g as ua,aw as ca,ax as pa,a1 as _a,a0 as ma,a$ as va,b0 as fa,b1 as ha,b2 as xa,b3 as ya,b4 as ga,b5 as ba,ad as wa,ae as Sa,af as ka,ag as Ca,ah as $a,ai as Pa,aj as La,ak as Ua,al as Ra,am as Ea,an as Ta,ao as Ba,ap as ja,aH as Da,aI as Na,aJ as Ia,a as Wa,aK as Oa}from"./site.js?v=1764233927359";import{aC as Aa,dR as Ha,da as za,dV as Ma,dj as qa,au as Fa,d5 as Va,_ as Ja,df as Ka,dk as Xa,eg as Ga,av as Ya,dZ as Za,bH as Qa,e2 as et,dc as at,dT as tt,dU as lt,G as it,dY as nt,aX as st,dS as ot,dh as dt,dd as rt}from"./naive.js?v=1764233927359";import{_ as ut}from"./index107.js?v=1764233927359";import{_ as ct}from"./index.vue_vue_type_script_setup_true_lang.js?v=1764233927359";import{_ as pt}from"./index.vue_vue_type_script_setup_true_lang10.js?v=1764233927359";import{_ as _t}from"./index.js?v=1764233927359";import{d as mt,e as vt,f as ft,m as ht,n as xt,h as yt,i as gt,o as bt,p as wt,q as St,r as kt,u as Ct,t as $t,v as Pt,w as Lt,x as Ut,y as Rt,z as Et,A as Tt,B as Bt,C as jt,D as Dt}from"./php.js?v=1764233927359";import Nt from"./index100.js?v=1764233927359";import{_ as It}from"./index132.js?v=1764233927359";import{_ as Wt,a as Ot,b as At}from"./refersh.js?v=1764233927359";import{_ as Ht}from"./form.vue_vue_type_script_setup_true_lang2.js?v=1764233927359";import{_ as zt}from"./index104.js?v=1764233927359";import{u as Mt}from"./index84.js?v=1764233927359";import{_ as qt}from"./logs.vue_vue_type_script_setup_true_lang.js?v=1764233927359";import{c as Ft,s as Vt,a as Jt,g as Kt,b as Xt}from"./ssl.js?v=1764233927359";import{C as Gt}from"./cert.js?v=1764233927359";import{a as Yt}from"./ssl-lets-progress.js?v=1764233927359";import{u as Zt}from"./utils3.js?v=1764233927359";import{A as Qt}from"./index217.js?v=1764233927359";import{o as el}from"./upload.js?v=1764233927359";import{a as al}from"./soft.js?v=1764233927359";import{_ as tl}from"./index98.js?v=1764233927359";import{g as ll}from"./git-ps.js?v=1764233927359";const il=Symbol("site-config");function nl(){return R(il)}const{t:sl}=e.global;function ol({delDomain:e}){return{key:"action",title:sl("Public.Table.Action"),width:80,align:"right",render:a=>T(ve,{options:[{label:sl("Public.Btn.Del"),class:"delete-btn",onClick:()=>{me({title:"".concat(sl("Site.Batch.index_12"),"[").concat(a.name,"]"),content:sl("Site.Batch.index_13"),onConfirm:async({hide:t})=>{await e(a),t()}})}}]},null)}}const dl={class:"flex justify-between items-center mb-24px"},rl={class:"w-400px"},ul={class:"pr-40px"},cl=B({__name:"index",setup(e,{expose:i}){const{t:n}=j(),{data:s}=nl(),o=D(""),d=async()=>{""!==o.value.trim()?(await je({id:s.id,webname:s.name,domain:o.value.trim().split("\n").join(",")}),o.value="",h()):l.error(n("Site.RulesError.index_31"))},r=async e=>{await Te({id:s.id,webname:s.name,domain:e.name,port:e.port}),h()},{keys:u,table:c,columns:p}=fe([{type:"selection",width:40},{key:"name",title:sl("Site.TableRow.index_19"),render:e=>T(a,{href:"http://".concat(e.name,":").concat(e.port),target:"_blank"},{default:()=>[e.name]})},{key:"port",title:sl("Site.TableRow.index_16"),width:100},ol({delDomain:r})]),_=()=>{c.data.length>1?p.value[p.value.length-1]=ol({delDomain:r}):p.value[p.value.length-1]={key:"action",title:sl("Public.Table.Action"),width:80,align:"right",render:()=>T("span",{class:"text-default"},[sl("Config.Panel.index_82")])}},m=[{key:"del",type:"confirm",label:n("Site.Batch.index_20"),confirm:{title:n("Site.Batch.index_21"),desc:n("Site.Batch.index_11"),api:e=>Te({id:s.id,webname:s.name,domain:e.name,port:e.port},!1),done:()=>{h()},columns:[{key:"name",title:n("Site.Cert.index_29"),ellipsis:{tooltip:{width:"trigger"}}}]}}],{loading:v,setLoading:f}=he(),h=async()=>{try{f(!0);const e={id:s.id},{message:a}=await Be(e);c.data=t(a)?a:[],_()}finally{u.value=[],f(!1)}};return h(),i({init:h}),(e,a)=>{const t=Ee,l=Aa,i=xe,n=_e,s=pe;return I(),N("div",null,[W("div",dl,[W("div",rl,[T(t,{value:z(o),"onUpdate:value":a[0]||(a[0]=e=>H(o)?o.value=e:null),name:"domain"},{default:O(()=>[W("p",null,A(e.$t("Site.Config.index_30")),1),W("p",null,A(e.$t("Site.Config.index_31")),1),W("p",null,A(e.$t("Site.Config.index_32")),1)]),_:1},8,["value"])]),W("div",ul,[T(l,{class:"add-domain-btn",type:"primary",onClick:d},{default:O(()=>[M(A(e.$t("Site.Cert.index_62")),1)]),_:1})])]),T(s,null,{table:O(()=>[T(i,{"checked-row-keys":z(u),"onUpdate:checkedRowKeys":a[1]||(a[1]=e=>H(u)?u.value=e:null),loading:z(v),"max-height":400,data:z(c).data,columns:z(p)},null,8,["checked-row-keys","loading","data","columns"])]),pageLeft:O(()=>[T(n,{"checked-row-keys":z(u),"onUpdate:checkedRowKeys":a[2]||(a[2]=e=>H(u)?u.value=e:null),data:z(c).data,options:m},null,8,["checked-row-keys","data"])]),_:1})])}}}),pl={class:"pt-16px"},_l={class:"flex-1"},ml={class:"w-240px"},vl={class:"mt-8px text-desc"},fl={class:"flex-1"},hl={class:"w-240px"},xl={class:"mt-12px text-desc"},yl={class:"my-16px"},gl={class:"text-desc"},bl={class:"my-20px"},wl={class:"w-240px"},Sl={class:"w-240px"},kl={class:"w-240px"},Cl=B({__name:"index",setup(e,{expose:a}){const{t:t}=j(),{data:s}=nl(),o=D(""),d=async()=>{if(""!==o.value.trim())try{await De({id:s.id,name:s.name,path:o.value}),g()}catch(e){console.warn(e)}else l.error(t("Site.RulesError.index_13"))},r=D(null),u=D([]),c=async()=>{null!==r.value?(await Ne({id:s.id,runPath:r.value}),g()):l.error(t("Site.RulesError.index_15"))},p=D(!1),_=async()=>{await Ie({id:s.id,path:s.path}),g()},m=D(!1),v=async()=>{await We({id:s.id}),g()},f=D(!1),h=q({username_get:"",password_get_1:"",password_get_2:""}),x=async e=>{e||(await Oe({id:s.id}),g())},y=async()=>{""!==h.username_get.trim()?""!==h.password_get_1.trim()?""!==h.password_get_2.trim()?h.username_get.trim().length<3||h.password_get_1.trim().length<3?l.error(t("Site.RulesError.index_35")):h.password_get_1.trim()===h.password_get_2.trim()?(await Ae({id:s.id,username:h.username_get,password:h.password_get_1}),h.username_get="",h.password_get_1="",h.password_get_2="",g()):l.error(t("Site.RulesError.index_38")):l.error(t("Site.RulesError.index_37")):l.error(t("Site.RulesError.index_36")):l.error(t("Site.RulesError.index_34"))},g=()=>{(async()=>{const{message:e}=await He({id:s.id});n(e)&&(o.value=e.result||"/www")})(),(async()=>{const{message:e}=await ze({id:s.id,path:s.path});if(n(e)){r.value=Va(e,"runPath.runPath",null),p.value=Va(e,"userini",!1),m.value=Va(e,"logs.result",!1),f.value=Va(e,"pass.result",!1);const a=Va(e,"runPath.dirs",[]);u.value=a.map(e=>({label:e,value:e}))}})()};return g(),a({init:g}),(e,a)=>{const t=pt,l=Aa,n=za,s=Ha,g=Ma,b=i,w=qa,S=Fa,k=ct;return I(),N("div",pl,[T(k,{"label-width":"140"},{default:O(()=>[T(s,{label:e.$t("Site.Lable.index_2"),"show-feedback":!1},{default:O(()=>[W("div",_l,[T(n,null,{default:O(()=>[W("div",ml,[T(t,{value:z(o),"onUpdate:value":a[0]||(a[0]=e=>H(o)?o.value=e:null),"input-props":{name:"directory"}},null,8,["value"])]),T(l,{class:"save-dir-btn",type:"primary",onClick:d},{default:O(()=>[M(A(e.$t("Site.Cert.index_60")),1)]),_:1})]),_:1}),W("div",vl,A(e.$t("Site.Config.index_35")),1)])]),_:1},8,["label"]),T(s,{class:"mt-16px",label:e.$t("Site.Lable.index_3"),"show-feedback":!1},{default:O(()=>[W("div",fl,[T(n,null,{default:O(()=>[W("div",hl,[T(g,{value:z(r),"onUpdate:value":a[1]||(a[1]=e=>H(r)?r.value=e:null),class:"run-select",options:z(u)},null,8,["value","options"])]),T(l,{class:"save-run-btn",type:"primary",onClick:c},{default:O(()=>[M(A(e.$t("Site.Cert.index_60")),1)]),_:1})]),_:1}),W("div",xl,A(e.$t("Site.Config.index_36")),1)])]),_:1},8,["label"]),W("div",yl,[T(b,{dashed:""})]),T(s,{label:e.$t("Site.Lable.index_4"),"show-feedback":!1},{default:O(()=>[T(n,{class:"items-center"},{default:O(()=>[T(w,{value:z(p),"onUpdate:value":[a[2]||(a[2]=e=>H(p)?p.value=e:null),_]},null,8,["value"]),W("div",gl,A(e.$t("Site.Config.index_37")),1)]),_:1})]),_:1},8,["label"]),T(s,{class:"mt-16px",label:e.$t("Site.Lable.index_5"),"show-feedback":!1},{default:O(()=>[T(n,{class:"items-center"},{default:O(()=>[T(w,{value:z(m),"onUpdate:value":[a[3]||(a[3]=e=>H(m)?m.value=e:null),v]},null,8,["value"]),a[8]||(a[8]=W("div",{class:"text-desc"},null,-1))]),_:1,__:[8]})]),_:1},8,["label"]),W("div",bl,[T(b,{dashed:""})]),T(s,{label:e.$t("Site.Lable.index_14"),"show-feedback":!1},{default:O(()=>[T(n,{class:"items-center"},{default:O(()=>[T(w,{value:z(f),"onUpdate:value":[a[4]||(a[4]=e=>H(f)?f.value=e:null),x]},null,8,["value"]),a[9]||(a[9]=W("div",{class:"text-desc"},null,-1))]),_:1,__:[9]})]),_:1},8,["label"]),z(f)?(I(),N(V,{key:0},[T(s,{class:"mt-16px",label:e.$t("Site.Lable.index_17"),"show-feedback":!1},{default:O(()=>[W("div",wl,[T(S,{value:z(h).username_get,"onUpdate:value":a[5]||(a[5]=e=>z(h).username_get=e),placeholder:e.$t("Site.Placeholder.Index_7")},null,8,["value","placeholder"])])]),_:1},8,["label"]),T(s,{class:"mt-16px",label:e.$t("Site.Lable.index_14"),"show-feedback":!1},{default:O(()=>[W("div",Sl,[T(S,{value:z(h).password_get_1,"onUpdate:value":a[6]||(a[6]=e=>z(h).password_get_1=e),type:"password",placeholder:e.$t("Site.Placeholder.Index_7")},null,8,["value","placeholder"])])]),_:1},8,["label"]),T(s,{class:"mt-16px",label:e.$t("Site.Lable.index_18"),"show-feedback":!1},{default:O(()=>[W("div",kl,[T(S,{value:z(h).password_get_2,"onUpdate:value":a[7]||(a[7]=e=>z(h).password_get_2=e),type:"password",placeholder:e.$t("Site.Placeholder.Index_7")},null,8,["value","placeholder"])])]),_:1},8,["label"]),T(s,{class:"mt-16px",label:" ","show-feedback":!1},{default:O(()=>[T(l,{type:"primary",onClick:y},{default:O(()=>[M(A(e.$t("Site.Cert.index_60")),1)]),_:1})]),_:1})],64)):F("",!0)]),_:1})])}}}),$l={class:"w-140px"},Pl={class:"w-120px"},Ll=B({__name:"index",setup(e,{expose:a}){const i=J(()=>s(()=>import("./rewrite.js?v=1764233927359"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59]))),{t:o}=j(),{data:d}=nl(),r=q({domain:"",dirName:null}),u=D([]),c=async()=>{const e=r.dirName;""!==r.domain.trim()?null!==e?(await qe({id:d.id,domain:r.domain,dirName:e}),g()):l.error(o("Site.RulesError.index_32")):l.error(o("Site.RulesError.index_31"))},p=ye(o("Site.PHP.index_81"),{data:"",filename:"",rlist:[]}),_=e=>{p.data.filename=e.filename,p.data.fileContent=e.data,p.data.rlist=e.rlist,p.show=!0},{keys:m,table:v,columns:f}=fe([{type:"selection",width:40},{key:"domain",title:o("Site.TableRow.index_19"),ellipsis:{tooltip:{width:"trigger"}}},{key:"port",title:o("Site.TableRow.index_16"),width:80},{key:"path",title:o("Site.Config.index_33"),width:120,ellipsis:{tooltip:{width:"trigger"}}},ge({width:130,options:e=>[{label:o("Site.TableOP.index_10"),onClick:()=>{(async e=>{try{const{message:a}=await Fe({id:e.id});n(a)&&_(a)}catch(a){const t=Va(a,"meesage.result","");t?l.error(t):me({title:o("Site.Cert.index_40"),content:o("Site.PHP.index_80"),onConfirm:async({hide:a})=>{const{message:t}=await Ve({id:e.id});n(t)&&_(t),a()}})}})(e)}},{label:o("Public.Btn.Del"),onClick:()=>{me({title:"".concat(o("Ftp.Table.index_10")," ").concat(e.path),content:o("Site.Config.index_34"),onConfirm:async({hide:a})=>{await Me({id:e.id}),g(),a()}})}}]})]),h=[{key:"del",type:"confirm",label:o("Site.Batch.index_20"),confirm:{title:o("Site.Batch.index_21"),desc:o("Site.Batch.index_11"),api:e=>Me({id:e.id},!1),done:()=>{g()},columns:[{key:"domain",title:o("Site.TableRow.index_19"),ellipsis:{tooltip:{width:"trigger"}}}]}}],{loading:x,setLoading:y}=he(),g=()=>{r.domain="",r.dirName=null,(async()=>{try{y(!0);const{message:e}=await Je({id:d.id});if(n(e)){const{dirs:a,binding:l}=e;t(a)&&a.length>0?(u.value=a.map(e=>({label:e,value:e})),r.dirName=a[0]):(u.value=[],r.dirName=null),v.data=t(l)?l:[]}}finally{m.value=[],y(!1)}})()};return g(),a({init:g}),(e,a)=>{const t=Fa,l=za,n=Ma,s=Aa,o=xe,d=_e,_=pe,y=_t;return I(),N("div",null,[T(l,{class:"items-center",size:16},{default:O(()=>[T(l,{class:"items-center"},{default:O(()=>[W("div",null,A(e.$t("Site.TableRow.index_19")),1),W("div",$l,[T(t,{value:z(r).domain,"onUpdate:value":a[0]||(a[0]=e=>z(r).domain=e),placeholder:"","input-props":{name:"domain"}},null,8,["value"])])]),_:1}),T(l,{class:"items-center"},{default:O(()=>[W("div",null,A(e.$t("Site.Config.index_33")),1),W("div",Pl,[T(n,{value:z(r).dirName,"onUpdate:value":a[1]||(a[1]=e=>z(r).dirName=e),options:z(u)},null,8,["value","options"])])]),_:1}),T(s,{class:"add-domain-btn",type:"primary",onClick:c},{default:O(()=>[M(A(e.$t("Site.Cert.index_62")),1)]),_:1})]),_:1}),T(_,{class:"mt-16px"},{table:O(()=>[T(o,{"checked-row-keys":z(m),"onUpdate:checkedRowKeys":a[2]||(a[2]=e=>H(m)?m.value=e:null),loading:z(x),"max-height":440,data:z(v).data,columns:z(f)},null,8,["checked-row-keys","loading","data","columns"])]),pageLeft:O(()=>[T(d,{"checked-row-keys":z(m),"onUpdate:checkedRowKeys":a[3]||(a[3]=e=>H(m)?m.value=e:null),data:z(v).data,options:h},null,8,["checked-row-keys","data"])]),_:1}),T(y,{show:z(p).show,"onUpdate:show":a[4]||(a[4]=e=>z(p).show=e),title:z(p).title,data:z(p).data,width:600,"min-height":488,component:z(i)},null,8,["show","title","data","component"])])}}}),Ul=B({__name:"index",setup(e,{expose:a}){const{t:t}=j(),{config:l}=nl(),i=D("site"),n=D(),s=[{key:"site",label:t("Site.Config.index_4"),component:Cl},{key:"subdirectory",label:t("Site.Config.index_3"),component:Ll}];return i.value=l.subMenu||"site",l.subMenu="",a({init:()=>{i.value="site",X(()=>{var e;null==(e=n.value)||e.init()})}}),(e,a)=>{const t=ut;return I(),K(t,{value:z(i),"onUpdate:value":a[0]||(a[0]=e=>H(i)?i.value=e:null),ref_key:"tabsRef",ref:n,options:s},null,8,["value"])}}}),Rl={class:"p-20px"},El={class:"w-280px"},Tl={class:"w-280px"},Bl={class:"w-280px"},jl={class:"w-280px"},Dl=B({__name:"form",props:{data:{}},setup(e,{expose:a}){const t=e,{t:l}=j(),{isEdit:i,siteId:n,row:s,getList:o}=t.data,d=D(null),r=q({name:"",site_dir:"",username:"",password:""}),u={name:{required:!0,message:l("Site.RulesError.index_16"),trigger:["blur","input"]},site_dir:{required:!0,message:l("Site.RulesError.index_17"),trigger:["blur","input"]},username:{required:!0,message:l("Site.Placeholder.Index_6"),trigger:["blur","input"]},password:{required:!0,message:l("Site.Placeholder.Index_8"),trigger:["blur","input"]}};return i&&s&&(r.name=s.name,r.site_dir=s.site_dir),a({onConfirm:async({hide:e})=>{var a;await(null==(a=d.value)?void 0:a.validate()),i?await Ke({id:n,name:r.name,username:r.username,password:r.password}):await Xe({...G(r),id:n}),null==o||o(),e()}}),(e,a)=>{const t=Fa,l=Ha,n=ct,s=be;return I(),N("div",Rl,[T(n,{ref_key:"formRef",ref:d,model:z(r),rules:u},{default:O(()=>[T(l,{label:e.$t("Site.TableRow.index_2"),path:"name"},{default:O(()=>[W("div",El,[T(t,{value:z(r).name,"onUpdate:value":a[0]||(a[0]=e=>z(r).name=e),disabled:z(i),placeholder:"","input-props":{name:"name"}},null,8,["value","disabled"])])]),_:1},8,["label"]),T(l,{label:e.$t("Site.TableRow.index_15"),path:"site_dir"},{default:O(()=>[W("div",Tl,[T(t,{value:z(r).site_dir,"onUpdate:value":a[1]||(a[1]=e=>z(r).site_dir=e),disabled:z(i),placeholder:e.$t("Site.Config.Limit.index_5"),"input-props":{name:"site_dir"}},null,8,["value","disabled","placeholder"])])]),_:1},8,["label"]),T(l,{label:e.$t("Site.Lable.index_24"),path:"username"},{default:O(()=>[W("div",Bl,[T(t,{value:z(r).username,"onUpdate:value":a[2]||(a[2]=e=>z(r).username=e),placeholder:"","input-props":{name:"username"}},null,8,["value"])])]),_:1},8,["label"]),T(l,{label:e.$t("Site.Lable.index_27"),path:"password"},{default:O(()=>[W("div",jl,[T(t,{value:z(r).password,"onUpdate:value":a[3]||(a[3]=e=>z(r).password=e),placeholder:"","input-props":{name:"password"}},null,8,["value"])])]),_:1},8,["label"])]),_:1},8,["model"]),T(s,{class:"mt-4px"},{default:O(()=>[W("li",null,A(e.$t("Site.Config.index_40")),1),W("li",null,A(e.$t("Site.Config.index_41")),1)]),_:1})])}}}),Nl=B({__name:"index",setup(e,{expose:a}){const{t:t}=j(),{data:l}=nl(),{keys:i,table:s,columns:o}=fe([{type:"selection",width:40},{key:"name",title:t("Site.TableRow.index_2"),ellipsis:{tooltip:{width:"trigger"}}},{key:"site_dir",title:t("Site.TableRow.index_15"),ellipsis:{tooltip:{width:"trigger"}}},ge({width:130,options:e=>[{label:t("Site.TableOP.index_7"),class:"edit-btn",onClick:()=>{m(e)}},{label:t("Public.Btn.Del"),class:"delete-btn",onClick:()=>{me({title:"".concat(t("Site.Config.Limit.index_1",[e.name])),content:t("Site.Config.Limit.index_2"),onConfirm:async({hide:a})=>{await Ge({id:l.id,name:e.name}),c(),a()}})}}]})]),d=[{key:"del",type:"confirm",label:t("Site.Batch.index_20"),confirm:{title:t("Site.Batch.index_21"),desc:t("Site.Batch.index_11"),columns:[o.value[1]],api:e=>Ge({id:l.id,name:e.name},!1),done:()=>{c()}}}],{loading:r,setLoading:u}=he(),c=async()=>{try{u(!0);const{message:e}=await Ye({id:l.id});if(n(e)){s.data=[];for(const[a,t]of Object.entries(e))if(l.name===a){s.data=t;break}}}finally{i.value=[],u(!1)}},p=ye(t("Site.Config.index_38"),{row:void 0,siteId:l.id,isEdit:!1,getList:c}),_=()=>{p.data.isEdit=!1,p.title=t("Site.Config.index_38"),p.show=!0},m=e=>{p.data.row=e,p.data.isEdit=!0,p.title=t("Site.Config.index_39"),p.show=!0};return c(),a({init:c}),(e,a)=>{const t=Aa,l=xe,n=_e,u=pe,c=be,m=_t;return I(),N("div",null,[T(u,null,{toolsLeft:O(()=>[T(t,{class:"add-limit-btn",type:"primary",onClick:_},{default:O(()=>[M(A(e.$t("Site.Config.index_38")),1)]),_:1})]),table:O(()=>[T(l,{"checked-row-keys":z(i),"onUpdate:checkedRowKeys":a[0]||(a[0]=e=>H(i)?i.value=e:null),"row-key":"name",loading:z(r),"max-height":440,data:z(s).data,columns:z(o)},null,8,["checked-row-keys","loading","data","columns"])]),pageLeft:O(()=>[T(n,{"checked-row-keys":z(i),"onUpdate:checkedRowKeys":a[1]||(a[1]=e=>H(i)?i.value=e:null),"row-key":"name",data:z(s).data,options:d},null,8,["checked-row-keys","data"])]),_:1}),T(c,{class:"mt-16px"},{default:O(()=>[W("li",null,A(e.$t("Site.Config.index_40")),1),W("li",null,A(e.$t("Site.Config.index_41")),1)]),_:1}),T(m,{show:z(p).show,"onUpdate:show":a[2]||(a[2]=e=>z(p).show=e),title:z(p).title,data:z(p).data,width:480,footer:!0,component:Dl},null,8,["show","title","data"])])}}}),Il={class:"p-20px"},Wl={class:"w-280px"},Ol={class:"w-280px"},Al={class:"w-280px"},Hl=B({__name:"form",props:{data:{}},setup(e,{expose:a}){const t=e,{isEdit:l,siteName:i,row:n,getList:s}=t.data,{t:o}=j(),d=D(null),r=q({deny_name:"",suffix:"php|jsp",dir:""}),u={deny_name:{required:!0,message:o("Site.Placeholder.Index_4"),trigger:["blur","input"]},suffix:{required:!0,message:o("Site.Placeholder.Index_5"),trigger:["blur","input"]},dir:{required:!0,message:o("Site.Placeholder.Index_6"),trigger:["blur","input"]}},c=()=>({...G(r),dir:r.dir.replace(/\/$/,"")+"/",website:i});return l&&n&&(r.deny_name=n.name,r.suffix=n.suffix,r.dir=n.dir),a({onConfirm:async({hide:e})=>{var a;await(null==(a=d.value)?void 0:a.validate()),l?await Ze(c()):await Qe(c()),null==s||s(),e()}}),(e,a)=>{const t=Fa,i=Ha,n=ct,s=be;return I(),N("div",Il,[T(n,{ref_key:"formRef",ref:d,model:z(r),rules:u},{default:O(()=>[T(i,{label:e.$t("Site.TableRow.index_2"),path:"deny_name"},{default:O(()=>[W("div",Wl,[T(t,{value:z(r).deny_name,"onUpdate:value":a[0]||(a[0]=e=>z(r).deny_name=e),disabled:z(l),placeholder:e.$t("Site.Placeholder.Index_1"),"input-props":{name:"name"}},null,8,["value","disabled","placeholder"])])]),_:1},8,["label"]),T(i,{label:e.$t("Site.TableRow.index_18"),path:"suffix"},{default:O(()=>[W("div",Ol,[T(t,{value:z(r).suffix,"onUpdate:value":a[1]||(a[1]=e=>z(r).suffix=e),placeholder:e.$t("Site.Placeholder.Index_2"),"input-props":{name:"suffix"}},null,8,["value","placeholder"])])]),_:1},8,["label"]),T(i,{label:e.$t("Site.TableRow.index_15"),path:"dir"},{default:O(()=>[W("div",Al,[T(t,{value:z(r).dir,"onUpdate:value":a[2]||(a[2]=e=>z(r).dir=e),placeholder:e.$t("Site.Placeholder.Index_3"),"input-props":{name:"dir"}},null,8,["value","placeholder"])])]),_:1},8,["label"])]),_:1},8,["model"]),T(s,{class:"mt-4px"},{default:O(()=>[W("li",null,A(e.$t("Site.PHP.index_72")),1),W("li",null,A(e.$t("Site.PHP.index_73")),1),W("li",null,A(e.$t("Site.PHP.index_74")),1),W("li",null,A(e.$t("Site.PHP.index_75")),1),W("li",null,A(e.$t("Site.PHP.index_76")),1)]),_:1})])}}}),zl=B({__name:"index",setup(e,{expose:a}){const{t:l}=j(),{data:i}=nl(),{keys:n,table:s,columns:o}=fe([{type:"selection",width:40},{key:"name",title:l("Site.TableRow.index_2"),ellipsis:{tooltip:{width:"trigger"}}},{key:"dir",title:l("Site.TableRow.index_15"),ellipsis:{tooltip:{width:"trigger"}}},{key:"suffix",title:l("Site.TableRow.index_18"),ellipsis:{tooltip:{width:"trigger"}}},ge({width:130,options:e=>[{label:l("Site.TableOP.index_7"),class:"edit-btn",onClick:()=>{m(e)}},{label:l("Public.Btn.Del"),class:"delete-btn",onClick:()=>{me({title:"".concat(l("Site.TableOP.index_6")," [").concat(e.name,"]"),content:l("Site.Batch.index_13"),onConfirm:async({hide:a})=>{await ea({website:i.name,deny_name:e.name}),c(),a()}})}}]})]),d=[{key:"del",type:"confirm",label:l("Site.Batch.index_20"),confirm:{title:l("Site.Batch.index_21"),desc:l("Site.Batch.index_11"),columns:[o.value[1]],api:e=>ea({website:i.name,deny_name:e.name},!1),done:()=>{c()}}}],{loading:r,setLoading:u}=he(),c=async()=>{try{u(!0);const{message:e}=await aa({website:i.name});s.data=t(e)?e:[]}finally{n.value=[],u(!1)}},p=ye(l("Site.Config.index_38"),{row:void 0,siteName:i.name,isEdit:!1,getList:c}),_=()=>{p.data.row=void 0,p.data.isEdit=!1,p.title=l("Site.Config.index_38"),p.show=!0},m=e=>{p.data.row=e,p.data.isEdit=!0,p.title=l("Site.Config.index_39"),p.show=!0};return c(),a({init:c}),(e,a)=>{const t=Aa,l=xe,i=_e,u=pe,c=be,m=_t;return I(),N("div",null,[T(u,null,{toolsLeft:O(()=>[T(t,{class:"add-deny-btn",type:"primary",onClick:_},{default:O(()=>[M(A(e.$t("Site.Config.index_38")),1)]),_:1})]),table:O(()=>[T(l,{"checked-row-keys":z(n),"onUpdate:checkedRowKeys":a[0]||(a[0]=e=>H(n)?n.value=e:null),"row-key":"name",loading:z(r),"max-height":440,data:z(s).data,columns:z(o)},null,8,["checked-row-keys","loading","data","columns"])]),pageLeft:O(()=>[T(i,{"checked-row-keys":z(n),"onUpdate:checkedRowKeys":a[1]||(a[1]=e=>H(n)?n.value=e:null),"row-key":"name",data:z(s).data,options:d},null,8,["checked-row-keys","data"])]),_:1}),T(c,{class:"mt-16px"},{default:O(()=>[W("li",null,A(e.$t("Site.Config.index_42"))+" |",1),W("li",null,A(e.$t("Site.Config.index_43")),1),W("li",null,A(e.$t("Site.Config.index_44")),1),W("li",null,A(e.$t("Site.Config.index_45")),1)]),_:1}),T(m,{show:z(p).show,"onUpdate:show":a[2]||(a[2]=e=>z(p).show=e),title:z(p).title,data:z(p).data,width:480,footer:!0,component:Hl},null,8,["show","title","data"])])}}}),Ml={class:"pt-8px"},ql={class:"w-200px"},Fl={class:"flex flex-col"},Vl={class:"w-200px"},Jl={class:"mt-8px text-desc"},Kl={class:"flex flex-col"},Xl={class:"w-200px"},Gl={class:"mt-8px text-desc"},Yl={class:"flex flex-col"},Zl={class:"w-200px"},Ql={class:"mt-8px text-desc"},ei=B({__name:"index",setup(e,{expose:a}){const{t:t}=j(),{data:l}=nl(),i=D(null),s=q({status:!1,type:0,perserver:300,perip:25,limit_rate:512}),d={perserver:{trigger:["blur","change"],validator:()=>!!s.perserver||new Error(t("Site.RulesError.index_318"))},perip:{trigger:["blur","change"],validator:()=>!!s.perip||new Error(t("Site.RulesError.index_319"))},limit_rate:{trigger:["blur","change"],validator:()=>!!s.limit_rate||new Error(t("Site.RulesError.index_320"))}},r=D([{label:"BBS/Blog",value:0,items:{perserver:300,perip:25,limit_rate:512}},{label:"Photofolio",value:1,items:{perserver:200,perip:10,limit_rate:1024}},{label:"Download",value:2,items:{perserver:50,perip:3,limit_rate:2048}},{label:"Mall",value:3,items:{perserver:500,perip:10,limit_rate:2048}},{label:"Portal",value:4,items:{perserver:400,perip:15,limit_rate:1024}},{label:"Corporate",value:5,items:{perserver:60,perip:10,limit_rate:512}},{label:"Video",value:6,items:{perserver:150,perip:4,limit_rate:1024}},{label:"Customize",value:7,items:{perserver:0,perip:0,limit_rate:0}}]),u=async e=>{e?_():(await ta({id:l.id}),m())},c=(e,a)=>{const{items:t}=a;n(t)&&p(t)},p=e=>{s.perserver=e.perserver,s.perip=e.perip,s.limit_rate=e.limit_rate},_=async()=>{var e;await(null==(e=i.value)?void 0:e.validate()),await la({id:l.id,perserver:s.perserver,perip:s.perip,limit_rate:s.limit_rate}),m()},m=async()=>{const{message:e}=await ia({id:l.id});n(e)&&(s.status=0!=e.perserver,p(r.value[0].items),o(e.perserver)&&0!=e.perserver&&(s.perserver=e.perserver),o(e.perip)&&0!=e.perip&&(s.perip=e.perip),o(e.limit_rate)&&0!=e.limit_rate&&(s.limit_rate=e.limit_rate))};return m(),a({init:m}),(e,a)=>{const t=Ja,l=Ha,n=Ma,o=Ka,p=Aa,m=ct;return I(),N("div",Ml,[T(m,{ref_key:"formRef",ref:i,"label-width":"150",class:"px-8px",model:z(s),rules:d},{default:O(()=>[T(l,{label:" "},{default:O(()=>[T(t,{checked:z(s).status,"onUpdate:checked":[a[0]||(a[0]=e=>z(s).status=e),u]},{default:O(()=>[M(A(e.$t("Site.PHP.index_82")),1)]),_:1},8,["checked"])]),_:1}),T(l,{label:e.$t("Site.Lable.index_40"),path:"type"},{default:O(()=>[W("div",ql,[T(n,{value:z(s).type,"onUpdate:value":[a[1]||(a[1]=e=>z(s).type=e),c],options:z(r)},null,8,["value","options"])])]),_:1},8,["label"]),T(l,{label:e.$t("Site.Lable.index_41"),path:"perserver"},{default:O(()=>[W("div",Fl,[W("div",Vl,[T(o,{value:z(s).perserver,"onUpdate:value":a[2]||(a[2]=e=>z(s).perserver=e),"show-button":!1,min:0},null,8,["value"])]),W("div",Jl,A(e.$t("Site.PHP.index_83")),1)])]),_:1},8,["label"]),T(l,{label:e.$t("Site.Lable.index_45"),path:"perip"},{default:O(()=>[W("div",Kl,[W("div",Xl,[T(o,{value:z(s).perip,"onUpdate:value":a[3]||(a[3]=e=>z(s).perip=e),"show-button":!1,min:0},null,8,["value"])]),W("div",Gl,A(e.$t("Site.PHP.index_84")),1)])]),_:1},8,["label"]),T(l,{label:e.$t("Site.Config.index_6"),path:"limit_rate"},{default:O(()=>[W("div",Yl,[W("div",Zl,[T(o,{value:z(s).limit_rate,"onUpdate:value":a[4]||(a[4]=e=>z(s).limit_rate=e),"show-button":!1,min:0},null,8,["value"])]),W("div",Ql,A(e.$t("Site.PHP.index_85")),1)])]),_:1},8,["label"]),T(l,{label:" "},{default:O(()=>[T(p,{type:"primary",onClick:_},{default:O(()=>[M(A(e.$t("Site.Cert.index_60")),1)]),_:1})]),_:1})]),_:1},8,["model"])])}}}),ai=B({__name:"index",setup(e){const{t:a}=j(),t=D("limit"),l=[{key:"limit",label:a("Site.Config.index_5"),component:Nl},{key:"deny",label:a("Site.Config.index_14"),component:zl},{key:"traffic",label:a("Site.Config.index_6"),component:ei}];return(e,a)=>{const i=ut;return I(),K(i,{value:z(t),"onUpdate:value":a[0]||(a[0]=e=>H(t)?t.value=e:null),options:l},null,8,["value"])}}}),ti={class:"w-420px"},li={class:"mt-8px"},ii=B({__name:"index",setup(e,{expose:a}){const{data:t}=nl(),l=D(""),i=async()=>{const{message:e}=await na({id:t.id});n(e)&&(l.value=d(e.result)?e.result.split(",").join("\n"):"")},s=async()=>{await sa({id:t.id,Index:l.value.trim().split("\n").join(",")}),i()};return i(),a({init:i}),(e,a)=>{const t=Ee,i=Aa,n=be;return I(),N("div",null,[W("div",ti,[T(t,{value:z(l),"onUpdate:value":a[0]||(a[0]=e=>H(l)?l.value=e:null),rows:12,name:"content",placeholder:""},null,8,["value"])]),W("div",li,[T(i,{class:"save-btn",type:"primary",onClick:s},{default:O(()=>[M(A(e.$t("Public.Btn.Save")),1)]),_:1})]),T(n,{class:"mt-16px"},{default:O(()=>[W("li",null,A(e.$t("Site.PHP.index_79")),1)]),_:1})])}}}),ni={class:"mt-8px"},si=B({__name:"index",setup(e,{expose:a}){const{multiService:t}=Y(r()),{data:l}=nl(),i=ce(),s=D(null),o=D(),d=D(""),u=async()=>{var e;await(async()=>{const{message:e}=await mt({site_id:l.id});n(e)&&(o.value=e.result)})(),d.value=await(async()=>{const e=t.value?o.value:i.webserver,a="openlitespeed"===e?"".concat(e,"/detail"):e;return"/www/server/panel/vhost/".concat(a,"/").concat(l.name,".conf")})(),null==(e=s.value)||e.getContent()},c=()=>{var e;null==(e=s.value)||e.saveFile()};return Z(()=>{u()}),a({init:u}),(e,a)=>{const l=Xa,i=Aa,n=be;return I(),N("div",null,[z(t)?(I(),K(l,{key:0,type:"warning",class:"mb-16px"},{default:O(()=>a[1]||(a[1]=[W("span",{class:"font-bold"},"Multi-WebServer Hosting Do not modify the port, otherwise the website will not be accessible normally",-1)])),_:1,__:[1]})):F("",!0),T(Nt,{ref_key:"configRef",ref:s,path:z(d),"onUpdate:path":a[0]||(a[0]=e=>H(d)?d.value=e:null),height:"500","show-tips":!z(t)},null,8,["path","show-tips"]),W("div",ni,[T(i,{type:"primary",onClick:c},{default:O(()=>[M(A(e.$t("Site.Cert.index_60")),1)]),_:1})]),T(n,{class:"mt-16px"},{default:O(()=>[W("li",null,A(e.$t("Site.Config.index_59")),1),W("li",null,A(e.$t("Site.Config.index_60")),1)]),_:1})])}}}),oi={class:"p-8"},di=B({__name:"form",setup(e,{expose:a}){const t=D(null),l=D(!1),i={path:{required:!0,message:"Please select the file directory",trigger:["blur","change"]},operation:{type:"array",required:!0,trigger:"change",message:"please select"}},n=q({path:"",operation:[]}),s=(e,a)=>{"dir"===a.type?(l.value=!0,n.operation=[0]):(l.value=!1,n.operation=[0,1,2])};return a({onConfirm:async()=>{var e;await(null==(e=t.value)?void 0:e.validate())}}),(e,a)=>{const o=pt,d=Ha,r=Ja,c=u,p=Ga,_=ct,m=za,v=be;return I(),N("div",oi,[T(m,null,{default:O(()=>[T(_,{ref_key:"formRef",ref:t,model:z(n),rules:i},{default:O(()=>[T(d,{label:"Detection path",path:"path"},{default:O(()=>[T(o,{disabled:"",value:z(n).path,"onUpdate:value":a[0]||(a[0]=e=>z(n).path=e),"checked-type":["dir","file"],placeholder:"Please select the file directory",onChange:s},null,8,["value"])]),_:1}),T(d,{label:"Alert operation",path:"operation"},{default:O(()=>[T(p,{value:z(n).operation,"onUpdate:value":a[1]||(a[1]=e=>z(n).operation=e)},{default:O(()=>[T(c,null,{default:O(()=>[T(r,{value:0},{default:O(()=>a[2]||(a[2]=[M(" Read ",-1)])),_:1,__:[2]}),T(r,{value:1,disabled:z(l)},{default:O(()=>a[3]||(a[3]=[M(" delete ",-1)])),_:1,__:[3]},8,["disabled"]),T(r,{value:2,disabled:z(l)},{default:O(()=>a[4]||(a[4]=[M(" Modify/increase ",-1)])),_:1,__:[4]},8,["disabled"])]),_:1})]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])]),_:1}),T(v,{class:"mt-16px"},{default:O(()=>a[5]||(a[5]=[W("li",null,"Directory temporarily only supports reading alarm operation",-1)])),_:1,__:[5]})])}}}),ri={class:"p-5"},ui={class:"mt-16px"},ci=B({__name:"monitor",setup(e){const a=D(!1),t=D(!1),l=D([{key:"path",title:"path",ellipsis:{tooltip:{width:"trigger"}}},{key:"type",title:"type",ellipsis:{tooltip:{width:"trigger"}}},{key:"operation",title:"Alert operation",ellipsis:{tooltip:{width:"trigger"}}},{key:"name",title:"operate",ellipsis:{tooltip:{width:"trigger"}}}]),i=D([]);return(e,n)=>{const s=Aa,o=za,d=xe,r=be,u=_t;return I(),N("div",ri,[W("div",null,[T(o,{justify:"space-between"},{default:O(()=>[T(s,{type:"primary",onClick:n[0]||(n[0]=e=>a.value=!0)},{default:O(()=>n[2]||(n[2]=[M(" Add monitor ",-1)])),_:1,__:[2]}),T(s,null,{icon:O(()=>n[3]||(n[3]=[W("img",{src:Wt,class:"w-5"},null,-1)])),_:1})]),_:1})]),W("div",ui,[T(d,{loading:z(t),"loading-num":6,data:z(i),columns:z(l)},null,8,["loading","data","columns"])]),W("div",null,[T(r,{class:"mt-16px"},{default:O(()=>[n[5]||(n[5]=W("li",null," The security alarm will monitor the behavior of the current website access to the non -current website file (for example: your site a.COM visited the file or directory of the site B.COM). ",-1)),n[6]||(n[6]=W("li",null,"Police frequency: 60 seconds of alarm behavior will only send an alarm once",-1)),W("li",null,[T(s,{text:"",class:"color-#20a53a"},{default:O(()=>n[4]||(n[4]=[M("Tutorial",-1)])),_:1,__:[4]})])]),_:1,__:[5,6]})]),T(u,{show:z(a),"onUpdate:show":n[1]||(n[1]=e=>H(a)?a.value=e:null),title:"Add file monitor",width:500,"min-height":148,footer:!0,component:di},null,8,["show"])])}}});const pi=c({},[["render",function(e,a){return I(),N("div",null,"555")}]]),_i={class:"box mt-16px"},mi={key:0,class:"items-center warning"},vi={class:"warning"},fi={class:"color-#f23836"},hi=c(B({__name:"index",props:{isInstall:{type:Boolean,default:!1},phpVersion:{default:"PHP"}},setup(e){const t=ce(),l=D(!1),i=D(!1),n=D(!1),s=e,o=r(),d=()=>{we({source:114})},u=()=>{const e=l.value?"Open the site security alarm":"Close the site security alarm",a=l.value?"After opening, the alarm notice will be sent when the safety problem is detected. Do you continue?":"After closing, the website will no longer receive a security alarm. Do you continue?";me({title:e,content:a,onConfirm:async()=>{const e=vt(l.value);console.log(e,"result")},onPublicClose:()=>{l.value=!l.value}})};return(e,r)=>{const c=qa,p=za,_=Aa,m=be,v=a,f=It,h=_t;return I(),N(V,null,[W("div",_i,[T(f,{install:z(o).isPro,class:"install"},Q({default:O(()=>[T(p,{class:"items-center color-#666"},{default:O(()=>[r[8]||(r[8]=W("div",null,"Site protection",-1)),W("div",null,[T(c,{value:z(l),"onUpdate:value":[r[0]||(r[0]=e=>H(l)?l.value=e:null),u]},null,8,["value"])]),r[9]||(r[9]=W("div",null,"today: 0",-1)),r[10]||(r[10]=W("div",null,"Total alarm: 0",-1)),z(l)?F("",!0):(I(),N("div",mi,[r[7]||(r[7]=W("img",{src:At,class:"h-8"},null,-1)),W("span",vi,[r[5]||(r[5]=M(" Please open ",-1)),W("span",fi,"PHP-"+A(s.phpVersion),1),r[6]||(r[6]=M(" protection first ",-1))])]))]),_:1,__:[8,9,10]}),T(p,{class:"mt-16px"},{default:O(()=>[T(_,{onClick:r[1]||(r[1]=e=>i.value=!0)},{default:O(()=>r[11]||(r[11]=[M("Monitor",-1)])),_:1,__:[11]}),T(_,{onClick:r[2]||(r[2]=e=>n.value=!0)},{default:O(()=>r[12]||(r[12]=[M("Trigger log",-1)])),_:1,__:[12]})]),_:1}),T(m,{class:"mt-16px"},{default:O(()=>r[13]||(r[13]=[W("li",null," Based on the PHP kernel monitoring tools, real -time monitoring of other invasive behaviors such as Trojan horses and vulnerabilities, I found that Trojan supports automatic isolation ",-1),W("li",null," The security alarm will monitor the behavior of the current website access to the non -current website file (for example: your site a.COM visited the file or directory of the site B.COM). When you wait for a cache, please do not turn on this option ",-1)])),_:1,__:[13]})]),_:2},[s.isInstall?{name:"desc",fn:O(()=>[T(p,{class:"items-center"},{default:O(()=>[r[16]||(r[16]=W("img",{src:Ot,class:"h-10"},null,-1)),W("span",null,[r[15]||(r[15]=M("If you need to use the [PHP website security alarm] function, please buy first ",-1)),T(v,{onClick:d},{default:O(()=>r[14]||(r[14]=[M("click to buy",-1)])),_:1,__:[14]})])]),_:1,__:[16]})]),key:"0"}:{name:"desc",fn:O(()=>[T(p,{class:"items-center"},{default:O(()=>[r[19]||(r[19]=W("img",{src:Ot,class:"h-10"},null,-1)),W("span",null,[r[18]||(r[18]=M("Currently not installed [PHP website security alarm], ",-1)),T(v,null,{default:O(()=>r[17]||(r[17]=[M("Click to install",-1)])),_:1,__:[17]})])]),_:1,__:[19]})]),key:"1"}]),1032,["install"])]),T(h,{show:z(i),"onUpdate:show":r[3]||(r[3]=e=>H(i)?i.value=e:null),title:"XXXXmonitor",width:1e3,"min-height":148,footer:!1,component:ci},null,8,["show"]),T(h,{show:z(n),"onUpdate:show":r[4]||(r[4]=e=>H(n)?n.value=e:null),title:"[".concat(z(t).siteName,"] Site security log"),width:1e3,"min-height":148,footer:!1,component:pi},null,8,["show","title"])],64)}}}),[["__scopeId","data-v-d159b1c0"]]),xi={class:"w-140px"},yi={class:"my-16px"},gi={key:0,class:"my-16px"},bi=B({__name:"index",setup(e,{expose:a}){const{data:s}=nl(),o=ce(),d=D(null),r=D(!1),u=D(!1);let c="";const _=D([]),m=async()=>{null!==d.value?(await oa({siteName:s.name,version:d.value,other:c}),o.setRefresh(!0),h()):l.error("Please select a PHP version")},v=async()=>{const{message:e}=await ca({id:s.id});n(e)&&(r.value=e.result)},f=async e=>{await da({id:s.id,act:e?1:0}),v()},h=()=>{(async()=>{const{message:e}=await ft();n(e)&&(u.value=e.php_status)})(),v(),(async()=>{const{message:e}=await ua();t(e)&&(_.value=e.map(e=>({label:e.name,value:e.version})))})(),(async()=>{const{message:e}=await ra({siteName:s.name});n(e)&&(d.value=e.phpversion,c=e.php_other||"")})()};return h(),a({init:h}),(e,a)=>{const t=Ma,l=Aa,n=za,s=be,o=i,c=qa;return I(),N("div",null,[T(n,{class:"items-center"},{default:O(()=>[W("div",null,A(e.$t("Site.Lable.index_22")),1),W("div",xi,[T(t,{value:z(d),"onUpdate:value":a[0]||(a[0]=e=>H(d)?d.value=e:null),options:z(_)},null,8,["value","options"])]),W("div",null,[T(l,{type:"primary",onClick:m},{default:O(()=>[M(A(e.$t("Site.Cert.index_61")),1)]),_:1})])]),_:1}),T(s,{class:"mt-16px"},{default:O(()=>[W("li",null,A(e.$t("Site.Config.index_65")),1),W("li",null,A(e.$t("Site.Config.index_66")),1),W("li",null,A(e.$t("Site.Config.index_67")),1),W("li",null,A(e.$t("Site.Config.index_68")),1),W("li",null,A(e.$t("Site.Config.index_69")),1),W("li",null,A(e.$t("Site.Config.index_70")),1)]),_:1}),W("div",yi,[T(o,{dashed:""})]),T(n,{class:"items-center"},{default:O(()=>[W("div",null,A(e.$t("Site.Config.index_64")),1),W("div",null,[T(c,{value:z(r),"onUpdate:value":[a[1]||(a[1]=e=>H(r)?r.value=e:null),f]},null,8,["value"])])]),_:1}),T(s,{class:"mt-16px"},{default:O(()=>[W("li",null,A(e.$t("Site.Config.index_71")),1),W("li",null,A(e.$t("Site.Config.index_72")),1)]),_:1}),z(p)?(I(),N("div",gi,[T(o,{dashed:""}),T(hi,{isInstall:z(u),phpVersion:z(d)},null,8,["isInstall","phpVersion"])])):F("",!0)])}}}),wi={class:"mr-16px text-#777"},Si={key:1,class:"text-#777"},ki={class:"w-200px mr-8px"},Ci={class:"w-200px mr-8px"},$i=B({__name:"index",setup(e,{expose:a}){const{data:i}=nl(),s=ce(),o=D(!1),d=D("--"),r=D("--"),u=D(i.cache_status),c=D(null),p=D([]),_=D(""),m=async()=>{await pa({s_id:i.id,version:r.value}),x()},v=async e=>{await _a({version:i.php_version,sitename:i.name,act:e}),i.cache_status=e,s.setRefresh(!0)},f=async()=>{await ma({s_id:i.id})},h=async()=>{c.value?""!==_.value.trim()?await va({s_id:i.id,user:c.value,new_pass:_.value}):l.error("Please enter new password"):l.error("Please select user")},x=async()=>{const e=l.loading("Getting Wordpress information, please wait...");try{await(async()=>{const{message:e}=await fa({s_id:i.id});n(e)&&(d.value=e.local_v,r.value=e.online_v,o.value=e.update)})(),await(async()=>{const{message:e}=await ha({s_id:i.id});t(e)&&e.length>0?(p.value=e.map(e=>({label:e,value:e})),c.value=e[0]):(p.value=[],c.value=null)})()}finally{e.close()}};return x(),a({init:x}),(e,a)=>{const t=Aa,l=Ha,i=Ja,n=Ma,s=Fa,x=ct;return I(),N("div",null,[T(x,null,{default:O(()=>[T(l,{label:"WP Version"},{default:O(()=>[z(o)?(I(),N(V,{key:0},[W("div",wi,"The current version is: "+A(z(d)),1),T(t,{type:"primary",onClick:m},{default:O(()=>[M("Upgrade to "+A(z(r)),1)]),_:1})],64)):(I(),N("span",Si,"The latest version"))]),_:1}),T(l,{label:"Cache"},{default:O(()=>[T(i,{checked:z(u),"onUpdate:checked":[a[0]||(a[0]=e=>H(u)?u.value=e:null),v],class:"mr-16px"},{default:O(()=>a[3]||(a[3]=[M(" Open cache ",-1)])),_:1,__:[3]},8,["checked"]),T(t,{type:"primary",onClick:f},{default:O(()=>a[4]||(a[4]=[M("Purge all cache",-1)])),_:1,__:[4]})]),_:1}),T(l,{label:"Reset password"},{default:O(()=>[W("div",ki,[T(n,{value:z(c),"onUpdate:value":a[1]||(a[1]=e=>H(c)?c.value=e:null),options:z(p)},null,8,["value","options"])]),W("div",Ci,[T(s,{value:z(_),"onUpdate:value":a[2]||(a[2]=e=>H(_)?_.value=e:null),placeholder:"Please enter a new password"},null,8,["value"])]),T(t,{type:"primary",onClick:h},{default:O(()=>a[5]||(a[5]=[M("Save password",-1)])),_:1,__:[5]})]),_:1})]),_:1})])}}}),Pi={class:"pt-8px"},Li={class:"w-180px mr-8px"},Ui={class:"w-180px"},Ri={class:"w-180px"},Ei={class:"w-280px"},Ti={class:"w-180px"},Bi={class:"w-180px"},ji={class:"w-280px"},Di={class:"flex-1"},Ni={key:0,class:"mb-16px text-error"},Ii={key:1,class:"mb-16px text-error"},Wi=B({__name:"index",setup(e,{expose:t}){const{t:l}=j(),{data:i}=nl(),s=q({composer_version:"",php_version:"auto",composer_args:"install",composer_cmd:"",repo:"repos.packagist",composer_user:"www",composer_path:i.path}),o=D([]),r=[{label:l("Docker.App.index_4"),value:"install"},{label:l("Docker.App.index_3"),value:"update"}],u=[{label:l("Site.Lable.index_8"),value:"repos.packagist"}],c=[{label:l("Site.Lable.index_9"),value:"www"},{label:l("Site.Lable.index_10"),value:"root"}],p=D(""),_=D(""),m=async()=>{await xa({repo:s.repo}),x()},v=async()=>{await ya({path:i.path}),x()},f=()=>{me({title:l("Site.PHP.index_77"),content:l("Site.PHP.index_78"),onConfirm:async()=>{await ga({php_version:s.php_version,composer_args:s.composer_args,composer_cmd:s.composer_cmd,repo:s.repo,path:s.composer_path,user:s.composer_user}),x()}})},h=()=>{o.value.unshift({label:l("Site.Lable.index_12"),value:"auto"})},x=async()=>{const{message:e}=await ba({path:i.path});n(e)&&(s.composer_version=e.result,e.comp_json&&(p.value=e.comp_json),d(e.comp_lock)&&(_.value=e.comp_lock),o.value=e.php_versions.filter(e=>"00"!==e.version).map(e=>({label:e.name,value:e.version})),h())};return h(),x(),t({init:x}),(e,t)=>{const l=Fa,i=Aa,n=Ha,d=Ma,h=pt,x=a,y=ct;return I(),N("div",Pi,[T(y,{class:"px-8px"},{default:O(()=>[T(n,{label:e.$t("Site.TableRow.index_3"),path:"composer_version"},{default:O(()=>[W("div",Li,[T(l,{value:z(s).composer_version,"onUpdate:value":t[0]||(t[0]=e=>z(s).composer_version=e),disabled:!0,placeholder:""},null,8,["value"])]),T(i,{onClick:m},{default:O(()=>[M(A(e.$t("Docker.App.index_3")),1)]),_:1})]),_:1},8,["label"]),T(n,{label:e.$t("Site.TableRow.index_27"),path:"php_version"},{default:O(()=>[W("div",Ui,[T(d,{value:z(s).php_version,"onUpdate:value":t[1]||(t[1]=e=>z(s).php_version=e),options:z(o)},null,8,["value","options"])])]),_:1},8,["label"]),T(n,{label:e.$t("Site.TableRow.index_28"),path:"composer_args"},{default:O(()=>[W("div",Ri,[T(d,{value:z(s).composer_args,"onUpdate:value":t[2]||(t[2]=e=>z(s).composer_args=e),options:r},null,8,["value"])])]),_:1},8,["label"]),T(n,{label:e.$t("Site.TableRow.index_29"),path:"composer_cmd"},{default:O(()=>[W("div",Ei,[T(l,{value:z(s).composer_cmd,"onUpdate:value":t[3]||(t[3]=e=>z(s).composer_cmd=e),placeholder:e.$t("Site.Cert.index_67")},null,8,["value","placeholder"])])]),_:1},8,["label"]),T(n,{label:e.$t("Site.Lable.index_32"),path:"repo"},{default:O(()=>[W("div",Ti,[T(d,{value:z(s).repo,"onUpdate:value":t[4]||(t[4]=e=>z(s).repo=e),options:u},null,8,["value"])])]),_:1},8,["label"]),T(n,{label:e.$t("Ftp.Analysis.Index_27"),path:"composer_user"},{default:O(()=>[W("div",Bi,[T(d,{value:z(s).composer_user,"onUpdate:value":t[5]||(t[5]=e=>z(s).composer_user=e),options:c},null,8,["value"])])]),_:1},8,["label"]),T(n,{label:e.$t("Site.Lable.index_26"),path:"composer_path"},{default:O(()=>[W("div",ji,[T(h,{value:z(s).composer_path,"onUpdate:value":t[6]||(t[6]=e=>z(s).composer_path=e)},null,8,["value"])])]),_:1},8,["label"]),T(n,{label:" ","show-feedback":!1},{default:O(()=>[W("div",Di,[z(p)?(I(),N("div",Ni,A(z(p)),1)):F("",!0),z(_)?(I(),N("div",Ii,[W("span",null,A(z(_)),1),T(x,{onClick:v},{default:O(()=>[M("["+A(e.$t("Site.TableOP.index_6"))+"]",1)]),_:1})])):F("",!0),T(i,{type:"primary",onClick:f},{default:O(()=>[M(A(e.$t("Site.Lable.index_11")),1)]),_:1})])]),_:1})]),_:1})])}}}),Oi={class:"px-20px py-24px"},Ai={class:"w-120px"},Hi={class:"w-120px"},zi={class:"w-200px"},Mi={class:"w-200px"},qi={class:"w-200px"},Fi=B({__name:"form",props:{data:{}},setup(e,{expose:a}){const{t:l}=j(),i=e,{isEdit:n,siteId:s,siteName:o,row:d,getList:r}=i.data,u=D(null),c=q({redirectname:"".concat((new Date).valueOf()),type:1,holdpath:1,domainorpath:"domain",redirecttype:"301",redirectpath:"",redirectdomain:[],tourl:"http://"}),p={redirectdomain:{trigger:["change"],validator:()=>0!==c.redirectdomain.length||new Error(l("Site.RulesError.index_23"))},redirectpath:{trigger:["blur","input"],validator:()=>""!==c.redirectpath.trim()||new Error(l("Site.RulesError.index_24"))},tourl:{trigger:["blur","input"],validator:()=>""!==c.tourl.trim()||new Error(l("Site.RulesError.index_25"))}},_=[{label:"Domain name",value:"domain"},{label:"Path",value:"path"}],m=[{label:"301",value:"301"},{label:"302",value:"302"}],v=D([]),f=()=>{c.redirectdomain=[],c.redirectpath=""},{loading:h,setLoading:x}=he();return n&&d&&(c.redirectname=d.redirectname,c.type=d.type,c.holdpath=d.holdpath,c.redirecttype=d.redirecttype,c.redirectpath=d.redirectpath,c.domainorpath=d.domainorpath,c.redirectdomain=d.redirectdomain,c.tourl=d.tourl),(async()=>{try{x(!0);const{message:e}=await Be({id:s});v.value=t(e)?e.map(e=>({label:e.name,value:e.name})):[]}finally{x(!1)}})(),a({onConfirm:async({hide:e})=>{var a;await(null==(a=u.value)?void 0:a.validate());const t={...G(c),sitename:o};n?await Sa(t):await wa(t),null==r||r(),e()}}),(e,a)=>{const t=qa,l=Ha,i=za,n=Ma,s=Fa,o=ct,d=be;return I(),N("div",Oi,[T(o,{ref_key:"formRef",ref:u,model:z(c),rules:p},{default:O(()=>[T(i,{size:60},{default:O(()=>[T(l,{label:e.$t("Site.Lable.index_34")},{default:O(()=>[T(t,{value:z(c).type,"onUpdate:value":a[0]||(a[0]=e=>z(c).type=e),"checked-value":1,"unchecked-value":0},null,8,["value"])]),_:1},8,["label"]),T(l,{label:e.$t("Site.TableRow.index_13"),"label-width":"120"},{default:O(()=>[T(t,{value:z(c).holdpath,"onUpdate:value":a[1]||(a[1]=e=>z(c).holdpath=e),"checked-value":1,"unchecked-value":0},null,8,["value"])]),_:1},8,["label"])]),_:1}),T(i,{size:30},{default:O(()=>[T(l,{label:e.$t("Site.TableRow.index_11")},{default:O(()=>[W("div",Ai,[T(n,{value:z(c).domainorpath,"onUpdate:value":[a[2]||(a[2]=e=>z(c).domainorpath=e),f],class:"type-select",options:_},null,8,["value"])])]),_:1},8,["label"]),T(l,{label:e.$t("Site.TableRow.index_12"),"label-width":"70"},{default:O(()=>[W("div",Hi,[T(n,{value:z(c).redirecttype,"onUpdate:value":a[3]||(a[3]=e=>z(c).redirecttype=e),class:"mode-select",options:m},null,8,["value"])])]),_:1},8,["label"])]),_:1}),"domain"===z(c).domainorpath?(I(),K(l,{key:0,label:e.$t("Site.Lable.index_32"),path:"redirectdomain"},{default:O(()=>[W("div",zi,[T(n,{value:z(c).redirectdomain,"onUpdate:value":a[4]||(a[4]=e=>z(c).redirectdomain=e),class:"domain-select",multiple:!0,loading:z(h),options:z(v),"max-tag-count":"responsive",placeholder:"Select domain"},null,8,["value","loading","options"])])]),_:1},8,["label"])):F("",!0),"path"===z(c).domainorpath?(I(),K(l,{key:1,label:e.$t("Site.Lable.index_30"),path:"redirectpath"},{default:O(()=>[W("div",Mi,[T(s,{value:z(c).redirectpath,"onUpdate:value":a[5]||(a[5]=e=>z(c).redirectpath=e),placeholder:"","input-props":{name:"path"}},null,8,["value"])])]),_:1},8,["label"])):F("",!0),T(l,{label:e.$t("Site.Lable.index_33"),path:"tourl"},{default:O(()=>[W("div",qi,[T(s,{value:z(c).tourl,"onUpdate:value":a[6]||(a[6]=e=>z(c).tourl=e),placeholder:"","input-props":{name:"url"}},null,8,["value"])])]),_:1},8,["label"])]),_:1},8,["model"]),T(d,{class:"mt-12px"},{default:O(()=>[W("li",null,A(e.$t("Site.Config.index_77")),1),W("li",null,A(e.$t("Site.Config.index_78")),1),W("li",null,A(e.$t("Site.Config.index_79")),1),W("li",null,A(e.$t("Site.Config.index_80")),1),W("li",null,A(e.$t("Site.Config.index_81")),1),W("li",null,A(e.$t("Site.Config.index_82")),1)]),_:1})])}}}),Vi={class:"p-20px"},Ji={class:"mt-12px"},Ki=B({__name:"config",props:{data:{}},emits:["close"],setup(e,{emit:a}){const t=e,{row:i,siteName:s,getList:o}=t.data,d=a,r=ce(),u=D(""),c=D(""),p=D(""),_=async()=>{const{message:e}=await Ca({path:p.value,data:u.value,encoding:c.value});n(e)&&l.success(e.msg),null==o||o(),d("close")};return(async()=>{const{message:e}=await ka({sitename:s,redirectname:i.redirectname,webserver:r.webserver});n(e)&&(p.value=e.file,u.value=e.data,c.value=e.encoding)})(),(e,a)=>{const t=Aa,l=be;return I(),N("div",Vi,[T(Nt,{value:z(u),"onUpdate:value":a[0]||(a[0]=e=>H(u)?u.value=e:null),height:350,"show-tips":!1},null,8,["value"]),W("div",Ji,[T(t,{type:"primary",onClick:_},{default:O(()=>[M(A(e.$t("Site.Cert.index_60")),1)]),_:1})]),T(l,{class:"mt-24px"},{default:O(()=>[W("li",null,A(e.$t("Site.Config.index_83")),1)]),_:1})])}}}),Xi=B({__name:"index",setup(e,{expose:l}){const{t:i}=j(),{data:n}=nl(),s=e=>({sitename:e.sitename,redirectname:e.redirectname,tourl:e.tourl,redirectdomain:e.redirectdomain,redirectpath:e.redirectpath,redirecttype:e.redirecttype,domainorpath:e.domainorpath}),{keys:o,table:d,columns:r}=fe([{type:"selection",width:40},{key:"sitename",title:i("Site.TableRow.index_11"),ellipsis:{tooltip:{width:"trigger"}},render:e=>"path"===e.domainorpath?e.redirectpath:e.sitename},{key:"redirecttype",title:i("Site.TableRow.index_12"),width:90},{key:"holdpath",title:i("Site.TableRow.index_13"),width:140,render:e=>T(a,{type:1===e.holdpath?"primary":"error",onClick:async()=>{await La({...s(e),type:e.type,holdpath:1===e.holdpath?0:1,status:e.type}),e.holdpath=1===e.holdpath?0:1}},{default:()=>[1===e.holdpath?i("Config.Alarm.index_18"):i("Public.Status.TurnOff")]})},{key:"type",title:i("Config.Safe.index_156"),width:100,render:e=>T(Se,{value:e.type,"checked-value":1,"unchecked-value":0,"checked-title":i("Public.Status.Running"),"unchecked-title":i("Public.Status.Paused"),onClick:async a=>{await La({...s(e),type:a,holdpath:e.holdpath,status:e.type}),e.type=a}},null)},ge({width:140,options:e=>[{label:i("Site.TableOP.index_2"),class:"config-btn",onClick:()=>{x(e)}},{label:i("Site.TableOP.index_7"),class:"edit-btn",onClick:()=>{f(e)}},{label:i("Public.Btn.Del"),class:"delete-btn",onClick:()=>{me({title:i("Site.Config.Redirect.index_1",[e.redirectname]),content:i("Site.Config.Redirect.index_2"),onConfirm:async()=>{await $a({sitename:n.name,redirectname:e.redirectname}),_()}})}}]})]),u=[{key:"del",type:"confirm",label:i("Site.Batch.index_20"),confirm:{title:i("Site.Batch.index_21"),desc:i("Site.Batch.index_11"),columns:[r.value[1]],api:e=>$a({sitename:n.name,redirectname:e.redirectname},!1),done:()=>{_()}}}],{loading:c,setLoading:p}=he(),_=async()=>{try{p(!0);const{message:e}=await Pa({sitename:n.name});d.data=t(e)?e:[]}finally{o.value=[],p(!1)}},m=ye(i("Site.Config.index_74"),{row:void 0,siteId:n.id,siteName:n.name,isEdit:!1,getList:_}),v=()=>{m.data.row=void 0,m.data.isEdit=!1,m.title=i("Site.Config.index_74"),m.show=!0},f=e=>{m.data.row=e,m.data.isEdit=!0,m.title="".concat(i("Site.Config.index_75")," [").concat(e.redirectname,"]"),m.show=!0},h=ye("",{row:void 0,siteName:n.name,getList:_}),x=e=>{h.data.row=e,h.title="".concat(i("Site.Config.index_76")," [").concat(e.redirectname,"]"),h.show=!0};return _(),l({init:_}),(e,a)=>{const t=Aa,l=xe,i=_e,n=pe,s=_t;return I(),N("div",null,[T(n,null,{toolsLeft:O(()=>[T(t,{class:"add-btn",type:"primary",onClick:v},{default:O(()=>[M(A(e.$t("Site.Config.index_73")),1)]),_:1})]),table:O(()=>[T(l,{"checked-row-keys":z(o),"onUpdate:checkedRowKeys":a[0]||(a[0]=e=>H(o)?o.value=e:null),"row-key":"redirectname",loading:z(c),"max-height":440,data:z(d).data,columns:z(r)},null,8,["checked-row-keys","loading","data","columns"])]),pageLeft:O(()=>[T(i,{"checked-row-keys":z(o),"onUpdate:checkedRowKeys":a[1]||(a[1]=e=>H(o)?o.value=e:null),"row-key":"redirectname",data:z(d).data,options:u},null,8,["checked-row-keys","data"])]),_:1}),T(s,{show:z(m).show,"onUpdate:show":a[2]||(a[2]=e=>z(m).show=e),title:z(m).title,data:z(m).data,width:660,footer:!0,component:Fi},null,8,["show","title","data"]),T(s,{show:z(h).show,"onUpdate:show":a[3]||(a[3]=e=>z(h).show=e),title:z(h).title,data:z(h).data,width:580,component:Ki},null,8,["show","title","data"])])}}}),Gi={class:"px-20px py-24px"},Yi={class:"w-220px"},Zi={class:"w-220px"},Qi={class:"w-220px"},en={class:"w-220px"},an={class:"w-220px"},tn={class:"w-220px"},ln={class:"w-220px"},nn=B({__name:"form",props:{data:{}},setup(e,{expose:t}){const{t:l}=j(),i=e,{isEdit:n,siteName:s,row:o,getList:d}=i.data,r=D(null),u=q({type:1,keepuri:1,proxyname:"proxy_".concat(_(5)),cachetime:1,proxydir:"/",proxysite:"http://",todomain:"$host",cache:0,advancedfeature:0,sitename:s}),c=D([{key:"",value:""}]),p={proxyname:{trigger:["blur","input"],validator:()=>""!==u.proxyname.trim()||new Error(l("Site.RulesError.index_26"))},cachetime:{trigger:["blur","input"],validator:()=>!(1===u.cache&&!u.cachetime)||new Error(l("Site.RulesError.index_27"))},proxydir:{trigger:["blur","input"],validator:()=>""!==u.proxydir.trim()||new Error(l("Site.RulesError.index_28"))},proxysite:{trigger:["blur","input"],validator:()=>""!==u.proxysite.trim()||new Error(l("Site.RulesError.index_25"))},todomain:{trigger:["blur","input"],validator:()=>""!==u.todomain.trim()||new Error(l("Site.RulesError.index_29"))}},v=e=>{const a=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;e=(e=e.replace(/^http[s]?:\/\//,"")).replace(/(:|\?|\/|\\)(.*)$/,""),f.value||(a.test(e)?u.todomain="$host":u.todomain=e)},f=D(!1),h=()=>{u.todomain&&"$host"!==u.todomain&&(f.value=!0)},x=D([]),y=()=>{x.value.length>=3||x.value.push({sub1:"",sub2:""})};y();return(()=>{if(n&&o){u.type=o.type,u.keepuri=o.keepuri,u.cache=o.cache,u.advancedfeature=o.advancedfeature,u.proxyname=o.proxyname,u.cachetime=o.cachetime,u.proxydir=o.proxydir,u.proxysite=o.proxysite,u.todomain=o.todomain,u.sitename=o.sitename,c.value=o.rewritedir.length?o.rewritedir.map(e=>({key:e.dir1,value:e.dir2})):[{key:"",value:""}];const e=o.subfilter.filter(e=>""!==e.sub1||""!==e.sub2);e.length>0&&(x.value=e)}})(),t({onConfirm:async({hide:e})=>{var a;await(null==(a=r.value)?void 0:a.validate());const t=(()=>{const e=[{sub1:"",sub2:""},{sub1:"",sub2:""},{sub1:"",sub2:""}];e.forEach((e,a)=>{x.value.length-1<a||(e.sub1=x.value[a].sub1,e.sub2=x.value[a].sub2)});const a=c.value.filter(e=>""!==e.key||""!==e.value).map(e=>({dir1:e.key,dir2:e.value}));return{...G(u),advanced:u.advancedfeature,subfilter:e,rewritedir:JSON.stringify(a)}})();n?await Ra(t):await Ua(t),null==d||d(),e()}}),(e,t)=>{const l=qa,i=Ha,s=za,o=Fa,d=Ka,_=Za,f=Ya,g=m,b=a,w=Aa,S=ct,k=be;return I(),N("div",Gi,[T(S,{ref_key:"formRef",ref:r,model:z(u),rules:p},{default:O(()=>[T(s,null,{default:O(()=>[T(i,{label:"Show Proxy Path"},{default:O(()=>[T(l,{value:z(u).keepuri,"onUpdate:value":t[0]||(t[0]=e=>z(u).keepuri=e),"checked-value":1,"unchecked-value":0},null,8,["value"])]),_:1}),T(i,{label:e.$t("Site.Lable.index_47")},{default:O(()=>[T(l,{value:z(u).cache,"onUpdate:value":t[1]||(t[1]=e=>z(u).cache=e),"checked-value":1,"unchecked-value":0},null,8,["value"])]),_:1},8,["label"]),T(i,{label:e.$t("Site.Lable.index_35")},{default:O(()=>[T(l,{value:z(u).advancedfeature,"onUpdate:value":t[2]||(t[2]=e=>z(u).advancedfeature=e),"checked-value":1,"unchecked-value":0},null,8,["value"])]),_:1},8,["label"])]),_:1}),T(i,{label:e.$t("Site.Lable.index_38"),path:"proxyname"},{default:O(()=>[W("div",Yi,[T(o,{value:z(u).proxyname,"onUpdate:value":t[3]||(t[3]=e=>z(u).proxyname=e),disabled:z(n),placeholder:"","input-props":{name:"name"}},null,8,["value","disabled"])])]),_:1},8,["label"]),1===z(u).cache?(I(),K(i,{key:0,label:e.$t("Site.Lable.index_39"),path:"cachetime"},{default:O(()=>[W("div",Zi,[T(f,null,{default:O(()=>[T(d,{value:z(u).cachetime,"onUpdate:value":t[4]||(t[4]=e=>z(u).cachetime=e),min:1,"show-button":!1,placeholder:"","input-props":{name:"time"}},null,8,["value"]),T(_,{class:"w-70px text-center"},{default:O(()=>[M(A(z(u).cachetime>1?"Minutes":"Minute"),1)]),_:1})]),_:1})])]),_:1},8,["label"])):F("",!0),T(i,{label:e.$t("Site.TableRow.index_17"),path:"proxydir"},{default:O(()=>[W("div",Qi,[T(o,{value:z(u).proxydir,"onUpdate:value":t[5]||(t[5]=e=>z(u).proxydir=e),placeholder:"","input-props":{name:"dir"}},null,8,["value"])])]),_:1},8,["label"]),T(i,{label:e.$t("Site.Lable.index_33")},{default:O(()=>[W("div",en,[T(o,{value:z(u).proxysite,"onUpdate:value":[t[6]||(t[6]=e=>z(u).proxysite=e),v],placeholder:"","input-props":{name:"url"}},null,8,["value"])])]),_:1},8,["label"]),T(i,{label:e.$t("Site.Lable.index_36")},{default:O(()=>[W("div",an,[T(o,{value:z(u).todomain,"onUpdate:value":t[7]||(t[7]=e=>z(u).todomain=e),placeholder:"","input-props":{name:"domain"},onBlur:h},null,8,["value"])])]),_:1},8,["label"]),ee(T(i,{label:"URL Rewrite"},{default:O(()=>[T(g,{class:"w-450px!",min:1,value:z(c),"onUpdate:value":t[8]||(t[8]=e=>H(c)?c.value=e:null),preset:"pair","key-placeholder":"/aaa","value-placeholder":"/bbb"},null,8,["value"])]),_:1},512),[[ae,1===z(u).advancedfeature]]),ee(T(i,{label:e.$t("Site.Lable.index_37")},{default:O(()=>[T(s,{class:"flex-1",vertical:""},{default:O(()=>[(I(!0),N(V,null,te(z(x),(a,t)=>(I(),K(s,{key:"".concat(t+1),class:"sub-rows items-center"},{default:O(()=>[W("div",tn,[T(o,{value:a.sub1,"onUpdate:value":e=>a.sub1=e,placeholder:e.$t("Site.Placeholder.index_20"),"input-props":{name:"sub1"}},null,8,["value","onUpdate:value","placeholder"])]),W("div",ln,[T(o,{value:a.sub2,"onUpdate:value":e=>a.sub2=e,placeholder:e.$t("Site.Placeholder.index_21"),"input-props":{name:"sub2"}},null,8,["value","onUpdate:value","placeholder"])]),W("div",null,[T(b,{type:"error",disabled:0===t&&1===z(x).length,onClick:e=>(e=>{x.value.length<=1||x.value.splice(e,1)})(t)},{default:O(()=>[M(A(e.$t("Public.Btn.Del")),1)]),_:2},1032,["disabled","onClick"])])]),_:2},1024))),128)),W("div",null,[T(w,{type:"primary",disabled:z(x).length>=3,onClick:y},{default:O(()=>[W("span",null,A(e.$t("Site.Config.index_87")),1)]),_:1},8,["disabled"])])]),_:1})]),_:1},8,["label"]),[[ae,1===z(u).advancedfeature]])]),_:1},8,["model"]),T(k,{class:"mt-12px"},{default:O(()=>[W("li",null,A(e.$t("Site.Config.index_88")),1),W("li",null,A(e.$t("Site.Config.index_89")),1),W("li",null,A(e.$t("Site.Config.index_90")),1),W("li",null,A(e.$t("Site.Config.index_91")),1)]),_:1})])}}}),sn={class:"p-20px"},on={class:"mt-12px"},dn=B({__name:"config",props:{data:{}},emits:["close"],setup(e,{emit:a}){const{multiService:t}=Y(r()),i=e,{row:s,siteName:o,getList:d}=i.data,{data:u}=nl(),c=a,p=ce(),_=D(""),m=D(""),v=D(""),f=D(),h=async()=>{const{message:e}=await Ea({path:v.value,data:_.value,encoding:m.value});n(e)&&l.success(e.msg),null==d||d(),c("close")};return(async()=>{await(async()=>{const{message:e}=await mt({site_id:u.id});n(e)&&(f.value=e.result)})(),(async()=>{const{message:e}=await Ta({sitename:o,proxyname:s.proxyname,webserver:t.value?f.value:p.webserver});n(e)&&(v.value=e.file,_.value=e.data,m.value=e.encoding)})()})(),(e,a)=>{const t=Aa,l=be;return I(),N("div",sn,[T(Nt,{value:z(_),"onUpdate:value":a[0]||(a[0]=e=>H(_)?_.value=e:null),height:350,"show-tips":!1},null,8,["value"]),W("div",on,[T(t,{type:"primary",onClick:h},{default:O(()=>[M(A(e.$t("Site.Cert.index_60")),1)]),_:1})]),T(l,{class:"mt-24px"},{default:O(()=>[W("li",null,A(e.$t("Site.Config.index_83")),1)]),_:1})])}}}),rn=B({__name:"index",setup(e,{expose:l}){const{t:i}=j(),{data:n}=nl(),s=e=>({proxyname:e.proxyname,sitename:e.sitename,proxydir:e.proxydir,proxysite:e.proxysite,todomain:e.todomain,subfilter:e.subfilter,advanced:e.advanced,cachetime:e.cachetime,keepuri:e.keepuri,rewritedir:JSON.stringify(e.rewritedir),advancedfeature:e.advancedfeature}),{keys:o,table:d,columns:r}=fe([{type:"selection",width:40},{key:"proxyname",title:i("Site.TableRow.index_2"),width:80,ellipsis:{tooltip:{width:"trigger"}}},{key:"proxydir",title:i("Site.TableRow.index_17"),width:90,ellipsis:{tooltip:{width:"trigger"}}},{key:"proxysite",title:i("Site.Lable.index_33"),ellipsis:{tooltip:{width:"trigger"}},render:e=>T("a",{class:"text-primary text-primary-hover",href:e.proxysite,target:"_blank"},[e.proxysite])},{key:"cache",title:i("Site.Lable.index_31"),width:90,render:e=>T(a,{type:1===e.cache?"primary":"error",onClick:async()=>{await Ra({...s(e),type:e.type,cache:1===e.cache?0:1}),e.cache=1===e.cache?0:1}},{default:()=>[1===e.cache?"Enabled":"Disabled"]})},{key:"type",title:i("Site.TableRow.index_14"),width:90,render:e=>T(Se,{value:e.type,"checked-value":1,"unchecked-value":0,"checked-title":"Running","unchecked-title":"Paused",onClick:async a=>{await Ra({...s(e),type:a,cache:e.cache}),e.type=a}},null)},ge({width:140,options:e=>[{label:i("Site.TableOP.index_2"),onClick:()=>{x(e)}},{label:i("Site.TableOP.index_7"),class:"edit-btn",onClick:()=>{f(e)}},{label:i("Public.Btn.Del"),class:"delete-btn",onClick:()=>{me({title:i("Site.Config.Proxy.index_1",[e.proxyname]),content:i("Site.Config.Proxy.index_2"),onConfirm:async()=>{await Ba({sitename:n.name,proxyname:e.proxyname}),_()}})}}]})]),u=[{key:"del",type:"confirm",label:i("Site.Batch.index_20"),confirm:{title:i("Site.Batch.index_21"),desc:i("Site.Batch.index_11"),api:e=>Ba({sitename:n.name,proxyname:e.proxyname},!1),done:()=>{_()},columns:[{key:"proxyname",title:i("Site.TableRow.index_2"),ellipsis:{tooltip:{width:"trigger"}}}]}}],{loading:c,setLoading:p}=he(),_=async()=>{try{p(!0);const{message:e}=await ja({sitename:n.name});d.data=t(e)?e:[]}finally{o.value=[],p(!1)}},m=ye(i("Site.Config.index_86"),{row:void 0,siteName:n.name,isEdit:!1,getList:_}),v=()=>{m.data.row=void 0,m.data.isEdit=!1,m.title=i("Site.Config.index_86"),m.show=!0},f=e=>{m.data.row=e,m.data.isEdit=!0,m.title="".concat(i("Site.Config.index_75")," [").concat(e.proxyname,"]"),m.show=!0},h=ye("",{row:void 0,siteName:n.name,getList:_}),x=e=>{h.data.row=e,h.title="".concat(i("Site.Config.index_76")," [").concat(e.proxyname,"]"),h.show=!0};return _(),l({init:_}),(e,a)=>{const t=Aa,l=xe,i=_e,n=pe,s=_t;return I(),N("div",null,[T(n,null,{toolsLeft:O(()=>[T(t,{class:"add-btn",type:"primary",onClick:v},{default:O(()=>[M(A(e.$t("Site.Config.index_85")),1)]),_:1})]),table:O(()=>[T(l,{"checked-row-keys":z(o),"onUpdate:checkedRowKeys":a[0]||(a[0]=e=>H(o)?o.value=e:null),"row-key":"proxyname",loading:z(c),"max-height":440,data:z(d).data,columns:z(r)},null,8,["checked-row-keys","loading","data","columns"])]),pageLeft:O(()=>[T(i,{"checked-row-keys":z(o),"onUpdate:checkedRowKeys":a[1]||(a[1]=e=>H(o)?o.value=e:null),"row-key":"proxyname",data:z(d).data,options:u},null,8,["checked-row-keys","data"])]),_:1}),T(s,{show:z(m).show,"onUpdate:show":a[2]||(a[2]=e=>z(m).show=e),title:z(m).title,data:z(m).data,width:660,footer:!0,component:nn},null,8,["show","title","data"]),T(s,{show:z(h).show,"onUpdate:show":a[3]||(a[3]=e=>z(h).show=e),title:z(h).title,data:z(h).data,width:580,component:dn},null,8,["show","title","data"])])}}}),un={class:"pt-8px"},cn=B({__name:"index",setup(e,{expose:a}){const{data:t}=nl(),l=D();return a({init:()=>{l.value.init()}}),(e,a)=>(I(),N("div",un,[T(Ht,{ref_key:"formRef",ref:l,site:z(t)},null,8,["site"])]))}}),pn=B({__name:"index",setup(e,{expose:t}){const{openSiteAdvancedModal:l}=Mt(),{data:i}=nl(),s=D("None"),{loading:o,setLoading:r}=he(),u=async()=>{try{r(!0);const{message:e}=await Da({siteName:i.name});n(e)&&(s.value=d(e.result)?e.result:"None")}finally{r(!1)}};return u(),t({init:u}),(e,t)=>{const i=zt,n=a,d=be,r=v;return I(),K(r,{class:"h-560px",show:z(o)},{default:O(()=>[T(i,{log:z(s)},null,8,["log"]),T(d,{class:"mt-12px"},{default:O(()=>[W("li",null,[t[2]||(t[2]=M("If enabling CDN on your website causes errors in log source IP resolution, you can go to [",-1)),T(n,{onClick:t[0]||(t[0]=e=>z(l)("global"))},{default:O(()=>t[1]||(t[1]=[M("Global Settings",-1)])),_:1,__:[1]}),t[3]||(t[3]=M(" ] to enable CDN source IP resolution (Nginx only).",-1))])]),_:1})]),_:1},8,["show"])}}}),_n=B({__name:"index",setup(e,{expose:a}){const{data:t}=nl(),l=D("None"),{loading:i,setLoading:s}=he(),o=async()=>{try{s(!0);const{message:e}=await Na({siteName:t.name});n(e)&&(l.value=d(e.result)?e.result:"None")}finally{s(!1)}};return o(),a({init:o}),(e,a)=>{const t=zt,n=v;return I(),K(n,{class:"h-560px",show:z(i)},{default:O(()=>[T(t,{log:z(l)},null,8,["log"])]),_:1},8,["show"])}}}),mn={class:"text-error"},vn={class:"w-400px p-20px"},fn={class:"mb-16px"},hn=B({__name:"index",setup(e,{expose:t}){const{t:i}=j(),s=ce(),{data:o}=nl(),d=le(()=>{let e="";switch(s.webserver){case"nginx":e=".log";break;case"apache":e="-access_log";break;default:e="_ols.access_log"}return"/www/wwwlogs/".concat(o.name).concat(e)}),r=le(()=>{const e=d.value.split("/");return e[e.length-1]}),u=()=>{me({title:i("Site.Config.index_104"),content:"".concat(i("Site.Config.index_105")," [").concat(r.value,"] ").concat(i("Site.Config.index_106")),onConfirm:async({hide:e})=>{await Ia({path:d.value}),e(),_()}})},c=D(!1),p=D(0),_=async()=>{c.value=!0,m()},m=(e=0)=>{let a=setTimeout(async()=>{const{message:e}=await Wa({path:d.value});n(e)&&(p.value=e.result,p.value>=100?(l.success(i("Site.Config.index_107")),c.value=!1,p.value=0,g(),clearTimeout(a)):m(1e3))},e)},v=e=>{ke({title:"[".concat(e,"] ").concat(i("Site.Config.index_103")),data:{type:e,path:d.value},component:qt})},{table:f,columns:h}=fe([{key:"start_time",title:i("Site.Cert.index_68")},{key:"time",title:i("Site.DelSite.index_6"),render:e=>"".concat(e.time.substring(0,4)," s")},{key:"xss",title:i("Site.TableRow.index_4"),render:e=>e.xss>0?T("span",{class:"text-error"},[e.xss]):e.xss},{key:"sql",title:i("Site.TableRow.index_5"),render:e=>e.sql>0?T("span",{class:"text-error"},[e.sql]):e.sql},{key:"san",title:i("Site.TableRow.index_6"),render:e=>e.san>0?T("span",{class:"text-error"},[e.san]):e.san},{key:"php",title:i("Site.TableRow.index_27"),render:e=>e.php>0?T("span",{class:"text-error"},[e.php]):e.php},{key:"ip",title:i("Site.TableRow.index_7"),render:e=>e.ip>0?T(a,{onClick:()=>{v("ip")}},{default:()=>[e.ip]}):e.ip},{key:"url",title:i("Site.TableRow.index_8"),render:e=>e.url>0?T(a,{onClick:()=>{v("url")}},{default:()=>[e.url]}):e.url}]),{loading:x,setLoading:y}=he(),g=async()=>{try{y(!0);const{message:e}=await Oa({path:d.value});n(e)&&(f.data=[e])}finally{y(!1)}},b=()=>{g()};return b(),t({init:b}),(e,t)=>{const l=Aa,i=xe,n=pe,s=be,o=Qa,d=_t;return I(),N("div",null,[T(n,null,{toolsLeft:O(()=>[T(l,{type:"primary",onClick:u},{default:O(()=>[M(A(e.$t("Site.Config.index_104")),1)]),_:1})]),table:O(()=>[T(i,{loading:z(x),"loading-num":1,data:z(f).data,columns:z(h)},null,8,["loading","data","columns"])]),_:1}),T(s,{class:"mt-16px"},{default:O(()=>[W("li",null,[M(A(e.$t("Site.Config.index_108"))+" ",1),W("span",mn,A(e.$t("Site.Config.index_109")),1)]),W("li",null,A(e.$t("Site.Config.index_110")),1),W("li",null,A(e.$t("Site.Config.index_111")),1),W("li",null,A(e.$t("Site.Config.index_112")),1),W("li",null,[T(a,{href:"https://www.aapanel.com/forum/d/3351-nginx-waf-instructions",target:"_blank"},{default:O(()=>[M(A(e.$t("Site.Config.index_113")),1)]),_:1}),M(" "+A(e.$t("Site.Config.index_114")),1)])]),_:1}),T(d,{show:z(c),"onUpdate:show":t[0]||(t[0]=e=>H(c)?c.value=e:null)},{default:O(()=>[W("div",vn,[W("div",fn,A(e.$t("Site.Config.index_115")),1),T(o,{type:"line",status:"success",height:24,percentage:z(p),"border-radius":4,"indicator-placement":"inside"},null,8,["percentage"])])]),_:1},8,["show"])])}}}),xn=B({__name:"index",setup(e,{expose:a}){const{t:t}=j(),{config:l}=nl(),i=D("access"),n=D(),s=[{key:"access",label:t("Site.Config.index_100"),component:pn},{key:"error",label:t("Site.Config.index_101"),component:_n},{key:"security",label:t("Site.Config.index_102"),component:hn}];return i.value=l.subMenu||"access",l.subMenu="",a({init:()=>{i.value="access",X(()=>{var e;null==(e=n.value)||e.init()})}}),(e,a)=>{const t=ut;return I(),K(t,{value:z(i),"onUpdate:value":a[0]||(a[0]=e=>H(i)?i.value=e:null),ref_key:"tabsRef",ref:n,options:s},null,8,["value"])}}}),yn={class:"cert-info"},gn={class:"cert-label"},bn={class:"cert-value"},wn={class:"cert-info"},Sn={class:"cert-label"},kn={class:"cert-value"},Cn={class:"cert-info"},$n={class:"cert-label"},Pn={class:"cert-value"},Ln={class:"cert-info"},Un={class:"cert-label"},Rn={class:"cert-value"},En={key:0,class:"text-primary"},Tn={key:1,class:"text-error"},Bn={class:"cert-info"},jn={class:"cert-label"},Dn={class:"cert-value"},Nn={class:"w-48%"},In={class:"mb-8px"},Wn={class:"w-48%"},On={class:"mb-8px"},An=c(B({__name:"index",props:{info:{default:null},isRenew:{type:Boolean,default:!1},loading:{type:Boolean,default:!1}},emits:["refresh"],setup(e,{expose:t,emit:i}){const s=e,o=i,{t:d}=j(),{data:r}=nl(),u=ce(),c=D(-1),p=D(!1),_=D(!1),m=D(""),g=D("");let b="";const w=D("");let S="";const k=D({issuer:"",notAfter:"",notBefore:"",dns:[],subject:"",endtime:0}),C=le(()=>c.value===Gt.LetsEncryptDeploy?d("Site.Cert.index_65"):c.value===Gt.BusinessDeploy?d("Site.Cert.index_64"):c.value===Gt.TestDeploy?d("Site.Cert.index_38"):d("Site.Cert.index_37")),$=le(()=>!!w.value),P=le(()=>s.isRenew||c.value===Gt.LetsEncryptDeploy),L=le(()=>!1),U=le(()=>p.value),R=async e=>{e?(await Vt({siteName:r.name}),o("refresh")):me({title:d("Site.Cert.index_12"),content:d("Site.Cert.index_13"),onConfirm:async()=>{await Ft({siteName:r.name}),o("refresh")},onPublicClose:()=>{_.value=!0}})},E=()=>{""!==g.value.trim()&&""!==w.value.trim()?g.value!==b&&b||w.value!==S&&S?me({title:d("Site.Cert.index_10"),content:d("Site.Cert.index_11"),onConfirm:async()=>{await B()}}):B():l.error(d("Site.Cert.index_9"))},B=async()=>{const{message:e}=await h({key:g.value,cert:w.value});n(e)&&e.hash&&(await x({hash:e.hash,domains:JSON.stringify([r.name]),append:1}),l.success(d("SSL.index_32"))),J()},q=async()=>{var e;const{message:a}=await y({hash:(null==(e=s.info)?void 0:e.hash)||""});n(a)&&ke({hideClose:!0,data:{isJump:!1,task_id:a.task_id,onFinish:()=>{o("refresh")}},component:Yt})},V=async()=>{await Jt({updateOf:1,siteName:r.name}),J()},J=()=>{o("refresh"),u.setRefresh(!0)};return ie(()=>{const{info:e}=s;e&&(c.value=e.type,p.value=e.status,_.value=e.httpTohttps,g.value=e.key||"",b=e.key||"",w.value=e.csr||"",S=e.csr||"",k.value=e.cert_data,m.value=e.index)}),t({init:o("refresh")}),(e,t)=>{const l=a,i=et,n=at,s=qa,o=f,d=Xa,r=Ee,u=za,c=Aa,m=be,h=v;return I(),K(h,{show:e.loading},{default:O(()=>[z($)?(I(),K(d,{key:0,class:"mb-16px",type:"success","show-icon":!1},{default:O(()=>[T(o,{"x-gap":12,cols:"15"},{default:O(()=>[T(i,{span:"8"},{default:O(()=>[W("div",yn,[W("div",gn,A(e.$t("Site.Cert.index_44"))+A(e.$t("Public.Punctuation.Colon")),1),W("div",bn,[T(l,null,{default:O(()=>[M(A(z(C)),1)]),_:1})])])]),_:1}),T(i,{span:"7"},{default:O(()=>[W("div",wn,[W("div",Sn,A(e.$t("Site.Cert.index_45"))+A(e.$t("Public.Punctuation.Colon")),1),W("div",kn,[T(n,null,{default:O(()=>[M(A(z(k).issuer||"other"),1)]),_:1})])])]),_:1}),T(i,{span:"8"},{default:O(()=>[W("div",Cn,[W("div",$n,A(e.$t("Site.Cert.index_46"))+A(e.$t("Public.Punctuation.Colon")),1),W("div",Pn,[T(n,null,{default:O(()=>[M(A(z(k).dns.join(e.$t("Public.Punctuation.Comma"))),1)]),_:1})])])]),_:1}),T(i,{span:"7"},{default:O(()=>[W("div",Ln,[W("div",Un,A(e.$t("Site.Cert.index_47"))+A(e.$t("Public.Punctuation.Colon")),1),W("div",Rn,[z(k).endtime>0?(I(),N("span",En,A(e.$t("Site.Cert.index_48",{date:z(k).notAfter,days:z(k).endtime})),1)):(I(),N("span",Tn,A(e.$t("Site.Cert.index_47")),1))])])]),_:1}),T(i,{span:"8"},{default:O(()=>[W("div",Bn,[W("div",jn,A(e.$t("Site.Cert.index_49"))+A(e.$t("Public.Punctuation.Colon")),1),W("div",Dn,[T(s,{value:z(_),"onUpdate:value":[t[0]||(t[0]=e=>H(_)?_.value=e:null),R],size:"small"},null,8,["value"])])])]),_:1})]),_:1})]),_:1})):F("",!0),T(u,{class:"mb-16px",size:10,justify:"space-between"},{default:O(()=>[W("div",Nn,[W("div",In,A(e.$t("Site.Cert.index_50")),1),T(r,{value:z(g),"onUpdate:value":t[1]||(t[1]=e=>H(g)?g.value=e:null),rows:10},null,8,["value"])]),W("div",Wn,[W("div",On,A(e.$t("Site.Cert.index_51")),1),T(r,{value:z(w),"onUpdate:value":t[2]||(t[2]=e=>H(w)?w.value=e:null),rows:10},null,8,["value"])])]),_:1}),T(u,{class:"mb-12px"},{default:O(()=>[T(c,{type:"primary",onClick:E},{default:O(()=>[M(A(z(p)?e.$t("Public.Btn.Save"):e.$t("Site.Cert.index_52")),1)]),_:1}),z(P)?(I(),K(c,{key:0,type:"primary",onClick:q},{default:O(()=>[M(A(e.$t("Site.Cert.index_53")),1)]),_:1})):F("",!0),z(L)?(I(),K(c,{key:1},{default:O(()=>[M(A(e.$t("Site.Cert.index_54")),1)]),_:1})):F("",!0),z(U)?(I(),K(c,{key:2,onClick:V},{default:O(()=>[M(A(e.$t("Site.Cert.index_55")),1)]),_:1})):F("",!0)]),_:1}),T(m,null,{default:O(()=>[W("li",null,A(e.$t("Site.Cert.index_33")),1),W("li",null,A(e.$t("Site.Cert.index_34")),1),W("li",null,A(e.$t("Site.Cert.index_35")),1),W("li",null,A(e.$t("Site.Cert.index_36")),1)]),_:1})]),_:1},8,["show"])}}}),[["__scopeId","data-v-1cb405f3"]]),Hn={class:"business-top-tips flex flex-wrap border-#d6e9c6 border-1px rounded-5px p-12px"},zn={class:"text-#3c763d w-100%"},Mn=c(B({__name:"top-tips",setup(e){const{t:a}=j(),t=[a("SSL.SiteSSL.index_5"),a("SSL.SiteSSL.index_6"),a("SSL.SiteSSL.index_7"),a("SSL.SiteSSL.index_8"),a("SSL.SiteSSL.index_9"),a("SSL.SiteSSL.index_10"),a("SSL.SiteSSL.index_11")];return(e,a)=>{const l=g,i=za;return I(),N("div",Hn,[(I(),N(V,null,te(t,(e,a)=>T(i,{size:5,key:e,class:ne(["flex-nowrap! leading-20px",{"w-33%":a!==t.length-1}])},{default:O(()=>[T(l,{name:"base-tick",size:16,color:"#ff8d00"}),W("span",zn,A(e),1)]),_:2},1032,["class"])),64))])}}}),[["__scopeId","data-v-77483f61"]]),qn={class:"my-10px"},Fn=B({__name:"table",setup(e){const a=J(()=>s(()=>import("./index212.js?v=1764233927359"),__vite__mapDeps([60,30,3,4,6,1,2,5,7,8,31,26,40,61]))),t=J(()=>s(()=>import("./index213.js?v=1764233927359"),__vite__mapDeps([62,15,3,4,5,6,2,1,8,7,16,63]))),l=J(()=>s(()=>import("./domain-verification.js?v=1764233927359"),__vite__mapDeps([64,2,3,4,5,6,1,8,7,26]))),i=ce(),o=r(),{userInfo:d}=Y(o),{t:u}=j(),c=q({p:1,limit:9999}),p=ye(u("SSL.Business.index_41"),{onRefresh:(e,a)=>{v.data.request=!0,v.data.uc_id=a,v.data.verify=e,v.show=!0,y()}}),_=ye(u("SSL.index_44")),m=ye(u("SSL.index_49"),{onRefresh:()=>{y(),i.setRefresh(!0)}}),v=ye(u("SSL.Business.index_42"),{onRefresh:()=>{y()}}),{table:f,columns:h}=fe([{key:"verify_domains",title:u("Layout.Sider.mail_3"),render:e=>T("span",{innerHTML:e.verify_domains&&e.verify_domains.length>0?e.verify_domains.join("<br/>"):"--"},null)},{key:"title",title:u("Site.Cert.index_44"),render:e=>e.order_info.title,ellipsis:{tooltip:!0}},Zt({title:u("SSL.index_54")}),{key:"order_status",title:u("SSL.Business.index_43"),render:e=>{const a=e.order_info;return a.certId||a.domains.length?!a.certId&&a.domains.length?T("span",{class:"color-warning"},[M(" "),u("SSL.Business.index_45"),M(" ")]):"PENDING"===a.order_status&&1===a.status?T("span",{class:"color-warning"},[M(" "),u("SSL.Business.index_46"),M(" ")]):"COMPLETE"===a.order_status&&1===a.status?T("span",{class:"color-#20a53a"},[M(" "),u("SSL.Business.index_47"),M(" ")]):"CANCELLED"===a.order_status&&1===a.status||-1===a.status?T("span",{class:"color-warning"},[M(" "),u("SSL.Business.index_48"),M(" ")]):"FAILED"===a.order_status&&1===a.status?T("span",{class:"color-error"},[M(" "),u("SSL.Business.index_49"),M(" ")]):"EXPIRED"===a.order_status&&1===a.status?T("span",{class:"color-warning"},[M(" "),u("SSL.Business.index_50"),M(" ")]):1!==a.status||["PENDING","COMPLETE","CANCELLED","FAILED","EXPIRED"].includes(a.order_status)?0===a.status?T("span",{class:"color-warning"},[M(" "),u("SSL.Business.index_52"),M(" ")]):void 0:T("span",{class:"color-warning"},[M(" "),u("SSL.Business.index_51"),M(" ")]):T("span",{class:"color-warning cursor-pointer",onClick:()=>x(e)},[" ",u("SSL.Business.index_44")," "])}},ge({width:140,options:e=>[{show:!e.order_info.certId&&!e.order_info.domains.length,label:u("SSL.Business.index_53"),onClick:()=>{x(e)}},{show:"PENDING"===e.order_info.order_status&&1===e.order_info.status,label:u("SSL.Business.index_54"),onClick:async()=>{const{message:a}=await b({uc_id:e.order_info.uc_id});n(a)&&(v.data.uc_id=e.order_info.uc_id,v.data.verify=a.data,v.data.paths=a.paths,v.show=!0)}},{show:"COMPLETE"===e.order_info.order_status&&1===e.order_info.status,label:u("SSL.index_58"),onClick:async()=>{m.data.row=e,m.show=!0}},{show:"COMPLETE"===e.order_info.order_status&&1===e.order_info.status,label:u("Ftp.Label.index_11"),onClick:async()=>{const a=window.location.origin+"/v2/business_ssl?action=download_cert&uc_id="+e.order_info.uc_id;window.open(a)}},{show:!1,label:u("Public.Btn.Del"),onClick:()=>{me({title:u("SSL.index_59"),content:u("SSL.index_60"),onConfirm:async()=>{await w({hash:e.hash}),y()}})}}]})]),x=e=>{p.data.row=e,p.show=!0},y=async()=>{try{f.loading=!0;const{message:e}=await S(c);n(e)&&(f.data=e.data,f.total=e.total)}finally{f.loading=!1}};return d.value.status&&y(),(e,i)=>{const n=Aa,s=xe,o=pe,r=_t,c=It;return I(),N("div",qn,[T(c,{install:z(d).status},{desc:O(()=>[i[6]||(i[6]=W("span",{class:"mr-10px"},"Business certificates require login panel to start using them",-1)),T(n,{type:"primary",onClick:i[0]||(i[0]=()=>z(Ce)())},{default:O(()=>[M(A(e.$t("Login.index_3")),1)]),_:1})]),default:O(()=>[T(o,null,{toolsLeft:O(()=>[T(n,{type:"primary",onClick:i[1]||(i[1]=e=>z(_).show=!0)},{default:O(()=>[M(A(z(u)("SSL.index_44")),1)]),_:1})]),table:O(()=>[T(s,{loading:z(f).loading,data:z(f).data,columns:z(h),"max-height":220},null,8,["loading","data","columns"])]),_:1}),T(r,{show:z(_).show,"onUpdate:show":i[2]||(i[2]=e=>z(_).show=e),title:z(_).title,data:z(_).data,"min-height":250,component:Qt},null,8,["show","title","data"]),T(r,{show:z(p).show,"onUpdate:show":i[3]||(i[3]=e=>z(p).show=e),title:z(p).title,data:z(p).data,width:650,"min-height":450,component:z(a)},null,8,["show","title","data","component"]),T(r,{show:z(m).show,"onUpdate:show":i[4]||(i[4]=e=>z(m).show=e),title:z(m).title,data:z(m).data,width:720,height:530,component:z(t)},null,8,["show","title","data","component"]),T(r,{show:z(v).show,"onUpdate:show":i[5]||(i[5]=e=>z(v).show=e),title:z(v).title,data:z(v).data,width:650,"min-height":450,component:z(l)},null,8,["show","title","data","component"])]),_:1},8,["install"])])}}}),Vn={class:"text-error"};const Jn=c({},[["render",function(e,t){const l=a,i=be;return I(),K(i,null,{default:O(()=>[W("li",Vn,A(e.$t("SSL.SiteSSL.index_1")),1),W("li",null,A(e.$t("SSL.SiteSSL.index_2")),1),W("li",null,A(e.$t("SSL.SiteSSL.index_3")),1),W("li",null,[M(A(e.$t("SSL.SiteSSL.index_4"))+" ",1),T(l,{href:"https://www.aapanel.com/docs/Function/BusinessCertificate.html",target:"_blank"},{default:O(()=>[M(A(e.$t("SSL.Business.index_20")),1)]),_:1})])]),_:1})}]]),Kn=B({__name:"index",setup:e=>(e,a)=>(I(),N("div",null,[T(Mn),T(Fn),T(Jn)]))}),Xn={class:"cert-info"},Gn={class:"cert-label"},Yn={class:"cert-value"},Zn={class:"cert-info"},Qn={class:"cert-label"},es={class:"cert-value"},as={class:"cert-info"},ts={class:"cert-label"},ls={class:"cert-value"},is={class:"cert-info"},ns={class:"cert-label"},ss={class:"cert-value"},os={key:0,class:"text-primary"},ds={key:1,class:"text-error"},rs={class:"w-48%"},us={class:"mb-8px"},cs={class:"w-48%"},ps={class:"mb-8px"},_s=c(B({__name:"cert",emits:["update"],setup(e,{emit:a}){const t=a,{data:l}=nl(),i=ce(),s=D(!1),o=D(1),d=D(""),r=D(""),u=q({hash:"",issuer:"",notAfter:"",notBefore:"",dns:[],subject:"",endtime:0}),c=async()=>{const{message:e}=await y({hash:u.hash});n(e)&&ke({hideClose:!0,data:{isJump:!1,task_id:e.task_id,onFinish:()=>{t("update")}},component:Yt})},p=async()=>{await Jt({updateOf:1,siteName:l.name}),t("update"),i.setRefresh(!0)},{loading:_,setLoading:m}=he();return(async()=>{try{m(!0);const{message:e}=await Kt({siteName:l.name});n(e)&&(s.value=e.status,u.hash=e.hash,u.issuer=e.cert_data.issuer,u.notAfter=e.cert_data.notAfter,u.notBefore=e.cert_data.notBefore,u.dns=e.cert_data.dns,u.subject=e.cert_data.subject,u.endtime=e.cert_data.endtime,d.value=e.key,r.value=e.csr,o.value=e.auto_renew)}finally{m(!1)}})(),(e,a)=>{const t=et,l=at,i=f,n=Xa,s=Ee,m=za,h=Aa,x=be,y=v;return I(),K(y,{show:z(_)},{default:O(()=>[T(n,{class:"mb-16px",type:"success","show-icon":!1},{default:O(()=>[T(i,{"x-gap":12,cols:"15"},{default:O(()=>[z(o)?(I(),K(t,{key:0,span:"16"},{default:O(()=>[W("div",Xn,[W("div",Gn,A(e.$t("SSL.SiteSSL.index_22"))+"",1),W("div",Yn,A(e.$t("SSL.SiteSSL.index_23")),1)])]),_:1})):F("",!0),T(t,{span:"7"},{default:O(()=>[W("div",Zn,[W("div",Qn,A(e.$t("Site.Cert.index_45"))+"",1),W("div",es,[T(l,null,{default:O(()=>[M(A(z(u).issuer),1)]),_:1})])])]),_:1}),T(t,{span:"8"},{default:O(()=>[W("div",as,[W("div",ts,A(e.$t("Site.Cert.index_46"))+"",1),W("div",ls,[T(l,null,{default:O(()=>[M(A(z(u).dns.join(e.$t("Public.Punctuation.Comma"))),1)]),_:1})])])]),_:1}),T(t,{span:"7"},{default:O(()=>[W("div",is,[W("div",ns,A(e.$t("Site.Cert.index_47"))+A(e.$t("Public.Punctuation.Colon")),1),W("div",ss,[z(u).endtime>0?(I(),N("span",os,A(e.$t("Site.Cert.index_48",{date:z(u).notAfter,days:z(u).endtime})),1)):(I(),N("span",ds,A(e.$t("Site.Cert.index_47")),1))])])]),_:1})]),_:1})]),_:1}),T(m,{class:"mb-16px",size:10,justify:"space-between"},{default:O(()=>[W("div",rs,[W("div",us,A(e.$t("Site.Cert.index_50")),1),T(s,{readonly:"",value:z(d),"onUpdate:value":a[0]||(a[0]=e=>H(d)?d.value=e:null),rows:14},null,8,["value"])]),W("div",cs,[W("div",ps,A(e.$t("Site.Cert.index_51")),1),T(s,{readonly:"",value:z(r),"onUpdate:value":a[1]||(a[1]=e=>H(r)?r.value=e:null),rows:14},null,8,["value"])])]),_:1}),T(m,{class:"mb-12px"},{default:O(()=>[T(h,{type:"primary",onClick:c},{default:O(()=>[M(A(e.$t("Site.Cert.index_53")),1)]),_:1}),T(h,{onClick:p},{default:O(()=>[M(A(e.$t("Site.Cert.index_55")),1)]),_:1})]),_:1}),T(x,null,{default:O(()=>[W("li",null,A(e.$t("SSL.SiteSSL.index_24")),1),W("li",null,A(e.$t("SSL.SiteSSL.index_25")),1)]),_:1})]),_:1},8,["show"])}}}),[["__scopeId","data-v-ec2f03c1"]]),ms={class:"flex items-center"},vs={class:"leading-17px"},fs={class:"w-full"},hs={class:"w-full"},xs={class:"text-error"},ys=B({__name:"apply",emits:["update"],setup(e,{emit:a}){const i=se(),{t:s}=j(),{data:o}=nl(),d=ce(),r=a,c=q({auth_type:"http",dns_manual:0,auto_wildcard:0,domains:[],all:!1}),p={domains:{required:!0,trigger:"change",type:"array",message:s("SSL.SiteSSL.index_16")}},_=D(null),m=D([]),f=e=>{var a;return null==(a=m.value.find(a=>a.name===e))?void 0:a.auto},h=()=>{i.push("/ssl_domain/domain")},x=le(()=>c.domains.length>0&&c.domains.length<m.value.length);oe(()=>c.domains,e=>{e.length===m.value.length?c.all=!0:e.length||(c.all=!1)}),oe(()=>c.all,e=>{var a;e?(c.domains=m.value.map(e=>e.name),null==(a=_.value)||a.validate()):c.domains=[]}),oe(()=>c.auth_type,e=>{var a;"dns"===e?(c.domains=m.value.filter(e=>e.auto).map(e=>e.name),null==(a=_.value)||a.validate()):c.domains=[]});const y=le(()=>c.domains.filter(e=>!f(e))),b=async()=>{var e;if(await(null==(e=_.value)?void 0:e.validate()),"dns"===c.auth_type&&y.value.length&&!c.dns_manual)return void l.error({content:()=>de("span",{innerHTML:"".concat(y.value.join("<br/>")).concat(s("SSL.SiteSSL.index_14"))})});let a={auth_type:c.dns_manual?"dns_manual":c.auth_type,auto_wildcard:c.auto_wildcard,domains:JSON.stringify(c.domains),site_id:c.dns_manual?o.id:void 0,deploy:c.dns_manual?0:1};if(c.dns_manual&&"dns"===c.auth_type){const{message:e}=await k({site_id:o.id,domains:JSON.stringify(c.domains)});if(n(e)&&Object.keys(e).length)return void $e(e.auths,o.id,c.domains,()=>{r("update"),d.setRefresh(!0)},!0);const t=ke({width:500,height:300,hideClose:!0,component:Pe});try{const{message:e}=await C(a,!1);n(e)&&(e.deploy?(l.success(e.result||s("SSL.index_32")),r("update"),d.setRefresh(!0)):Array.isArray(e.auths)&&e.auths.length&&$e(e.auths,o.id,c.domains,()=>{r("update"),d.setRefresh(!0)}))}catch(i){Le(Va(i,"message",""))}finally{t.hide()}return}const{message:t}=await C(a);n(t)&&ke({hideClose:!0,data:{isJump:!1,task_id:t.task_id,onFinish:()=>{r("update"),d.setRefresh(!0)}},component:Yt})},{loading:w,setLoading:S}=he();return Z(()=>{(async()=>{try{S(!0);const{message:e}=await Be({id:o.id});if(t(e)){const a=e.map(async e=>{const{message:a}=await $({domain:e.name});n(a)&&m.value.push({name:e.name,auto:a.support.includes("auto")})});await Promise.all(a)}}finally{S(!1)}})()}),(e,a)=>{const t=g,l=Xa,i=lt,n=u,s=tt,o=Ha,d=Ja,r=za,S=Ga,k=it,C=v,$=Aa,P=ct,L=be;return I(),N("div",null,[ee(T(l,{"show-icon":!1,class:"mb-10px"},{default:O(()=>[W("div",ms,[T(t,{name:"base-info",size:"17",class:"mr-8px"}),W("span",vs,A(e.$t("SSL.SiteSSL.index_12")),1)])]),_:1},512),[[ae,"dns"===z(c).auth_type]]),T(P,{ref_key:"formRef",ref:_,model:z(c),rules:p,"label-width":"140"},{default:O(()=>[T(o,{label:e.$t("Config.Safe.Ssl.index_2")},{default:O(()=>[T(s,{value:z(c).auth_type,"onUpdate:value":a[0]||(a[0]=e=>z(c).auth_type=e)},{default:O(()=>[T(n,null,{default:O(()=>[T(i,{value:"http"},{default:O(()=>[M(A(e.$t("SSL.SiteSSL.index_17")),1)]),_:1}),T(i,{value:"dns"},{default:O(()=>[M(A(e.$t("SSL.index_12"))+" (Wildcard support) ",1)]),_:1})]),_:1})]),_:1},8,["value"])]),_:1},8,["label"]),ee(T(o,{label:" ","show-feedback":!1},{default:O(()=>[T(d,{checked:z(c).dns_manual,"onUpdate:checked":a[1]||(a[1]=e=>z(c).dns_manual=e),"checked-value":1,"unchecked-value":0},{default:O(()=>[M(A(e.$t("SSL.index_2")),1)]),_:1},8,["checked"])]),_:1},512),[[ae,"dns"===z(c).auth_type]]),ee(T(o,{label:" "},{default:O(()=>[T(d,{checked:z(c).auto_wildcard,"onUpdate:checked":a[2]||(a[2]=e=>z(c).auto_wildcard=e),"checked-value":1,"unchecked-value":0},{default:O(()=>[M(A(e.$t("SSL.SiteSSL.index_20")),1)]),_:1},8,["checked"])]),_:1},512),[[ae,"dns"===z(c).auth_type]]),T(o,{label:e.$t("Mail.Domain.index_3"),path:"domains"},{default:O(()=>[T(C,{show:z(w),class:"p-12px w-300px max-h-300px min-h-100px overflow-auto border border-solid border-#ccc"},{default:O(()=>[T(d,{class:"mb-12px",checked:z(c).all,"onUpdate:checked":a[3]||(a[3]=e=>z(c).all=e),label:e.$t("Public.SelectAll"),indeterminate:z(x)},null,8,["checked","label","indeterminate"]),z(m).length?(I(),K(S,{key:0,value:z(c).domains,"onUpdate:value":a[4]||(a[4]=e=>z(c).domains=e)},{default:O(()=>[T(r,{class:"flex-col!",size:12},{default:O(()=>[(I(!0),N(V,null,te(z(m),e=>(I(),K(d,{key:e.name,value:e.name,label:e.name},null,8,["value","label"]))),128))]),_:1})]),_:1},8,["value"])):(I(),K(k,{key:1,description:"No domain name"}))]),_:1},8,["show"])]),_:1},8,["label"]),ee(T(o,{label:" "},{default:O(()=>[T(l,{"show-icon":!1,type:z(y).length?"warning":"success"},{default:O(()=>[(I(!0),N(V,null,te(z(c).domains,a=>(I(),K(r,{key:a},{default:O(()=>[f(a)?(I(),K(r,{key:0,class:"flex-nowrap! py-3px"},{default:O(()=>[T(t,{name:"base-success",size:"17",color:"#20a53a"}),W("span",fs,"["+A(a)+"] "+A(e.$t("SSL.SiteSSL.index_13")),1)]),_:2},1024)):(I(),K(r,{key:1,class:"flex-nowrap! py-3px"},{default:O(()=>[T(t,{name:"base-error",size:"17",color:"#E85445"}),W("span",hs,"["+A(a)+"] "+A(e.$t("SSL.SiteSSL.index_14")),1),T($,{type:"primary",size:"tiny",onClick:h},{default:O(()=>[M(A(e.$t("SSL.SiteSSL.index_21")),1)]),_:1})]),_:2},1024))]),_:2},1024))),128))]),_:1},8,["type"])]),_:1},512),[[ae,"dns"===z(c).auth_type&&z(c).domains.length&&!z(c).dns_manual]]),T(o,{label:" "},{default:O(()=>[T($,{type:"primary",onClick:b},{default:O(()=>[M(A(e.$t("Public.Btn.Apply")),1)]),_:1})]),_:1})]),_:1},8,["model"]),ee(T(L,{class:"mt-16px"},{default:O(()=>[W("li",xs,A(e.$t("SSL.SiteSSL.index_15")),1),W("li",null,A(e.$t("Site.Cert.index_21")),1),W("li",null,A(e.$t("Site.Cert.index_23")),1),W("li",null,A(e.$t("Site.Cert.index_24")),1)]),_:1},512),[[ae,"http"===z(c).auth_type]]),ee(T(L,{class:"mt-24px"},{default:O(()=>[a[5]||(a[5]=W("li",null,"Manually resolved certificates do not support auto-renewal",-1)),W("li",null,A(e.$t("Site.Cert.index_25")),1),W("li",null,A(e.$t("Site.Cert.index_26")),1),W("li",null,A(e.$t("Site.Cert.index_27")),1),W("li",null,A(e.$t("Site.Cert.index_28")),1)]),_:1,__:[5]},512),[[ae,"dns"===z(c).auth_type]])])}}}),gs=B({__name:"index",props:{isOpen:{type:Boolean},type:{},onRefresh:{type:Function}},setup(e){const a=e,t=()=>{a.onRefresh()};return(e,l)=>(I(),N("div",null,[a.isOpen&&"Let's Encrypt"===a.type?(I(),K(_s,{key:0,onUpdate:t})):(I(),K(ys,{key:1,onUpdate:t}))]))}}),bs=B({__name:"index",props:{onMenuChange:{type:Function}},setup(e,{expose:a}){const{data:t}=nl(),{t:i}=j(),s=q({p:1,limit:99999}),{columns:o,table:d}=fe([{key:"domain",title:i("Site.Cert.index_29"),render:e=>T("span",{innerHTML:e.verify_domains.length>0?e.verify_domains.join("<br/>"):"--"},null)},Zt({title:i("SSL.index_54"),width:140}),{key:"issuer",title:i("Site.Cert.index_30"),ellipsis:{tooltip:!0}},ge({width:150,options:a=>[{label:i("Public.Btn.Deploy"),onClick:async()=>{try{await x({hash:a.hash,domains:JSON.stringify([t.name]),append:1}),l.success(i("SSL.index_32")),setTimeout(()=>{e.onMenuChange()},500)}catch(n){console.log(n)}}},{show:"Let's Encrypt"===a.provider,label:i("Public.Btn.Del"),onClick:()=>{(e=>{Ue({title:i("Site.Cert.index_31"),content:i("Site.Cert.index_32"),onConfirm:async()=>{await w({hash:e.hash}),c()}})})(a)}}]})]),{loading:r,setLoading:u}=he(!0),c=async()=>{try{u(!0);const{message:e}=await P(s);n(e)&&(d.data=e.data)}finally{u(!1)}};return c(),a({init:c}),(e,a)=>{const t=xe;return I(),N("div",null,[T(t,{loading:z(r),columns:z(o),data:z(d).data,"max-height":510},null,8,["loading","columns","data"])])}}}),ws={class:"mr-12px"},Ss={key:0,class:"mr-12px"},ks={key:1,class:"mr-12px"},Cs=B({__name:"index",setup(e,{expose:a}){const t=ce(),{data:l}=nl(),{t:i}=j(),s=D("current"),o=D(""),d=D(Gt.NotDeploy),r=D(""),u=D(!1),c=D(0),p=D(""),_=D(!1),m=async()=>{const{message:e}=await y({hash:o.value});n(e)&&ke({hideClose:!0,data:{isJump:!1,task_id:e.task_id,onFinish:()=>{f()}},component:Yt})},v=e=>{h.value[0].data&&(h.value[0].data.loading=e)},f=async()=>{try{v(!0);const{message:t}=await Xt({siteName:l.name});n(t)&&(d.value=t.type,u.value=t.status,c.value=Va(t,"cert_data.endtime",0),p.value=t.cert_data.issuer_O||"",_.value=(()=>{let e=!1;return c.value<=30&&(e=!0),d.value===Gt.TestDeploy&&c.value<0&&(e=!0),d.value!==Gt.SaveOrHolderDeploy&&d.value!==Gt.NotDeploy||(e=!1),e})(),r.value=t.cert_data.dns.join(","),o.value=t.hash,a=t,h.value[0].data&&(h.value[0].data.info=a),e=_.value,h.value[0].data&&(h.value[0].data.isRenew=e))}catch(t){u.value=!1,_.value=!1}finally{v(!1)}var e,a},h=D([{key:"current",label:()=>T("div",null,[T("span",null,[M("Current Certs - ")]),T("span",{class:u.value?"text-#1d9534":"text-red-500"},[M("["),u.value?"Deployed":"Not Deployed",M("]")])]),data:{info:null,isRenew:!1,loading:!0,onRefresh:f},component:re(An)},{key:"business",label:i("Site.Cert.index_64"),component:re(Kn)},{key:"let",label:i("Site.Cert.index_65"),data:{isOpen:le(()=>u.value),type:le(()=>p.value),onRefresh:f},component:re(gs)},{key:"holder",label:i("Site.Cert.index_66"),component:re(bs),data:{onMenuChange:()=>{s.value="current",f(),t.setRefresh(!0)}}}]);return a({init:()=>{f()}}),(e,a)=>{const t=Aa,l=Xa,i=ut;return I(),N("div",null,[z(u)?F("",!0):(I(),K(l,{key:0,class:"mb-12px",type:"error","show-icon":!1,style:{"--n-padding":"9px 16px"}},{default:O(()=>[W("span",ws,A(e.$t("Site.Cert.index_41")),1),T(t,{size:"tiny",type:"primary",onClick:a[0]||(a[0]=e=>s.value="business")},{default:O(()=>[M(A(e.$t("Site.Cert.index_43")),1)]),_:1})]),_:1})),z(u)&&z(_)?(I(),K(l,{key:1,class:"mb-12px",type:"error","show-icon":!1,style:{"--n-padding":"9px 16px"}},{default:O(()=>[z(c)>0?(I(),N("span",Ss,A(e.$t("SSL.SiteSSL.index_26",[z(r),z(c)])),1)):(I(),N("span",ks,A(e.$t("SSL.SiteSSL.index_19",[z(r)])),1)),T(t,{size:"tiny",type:"primary",onClick:m},{default:O(()=>[M(A(e.$t("Site.Cert.index_53")),1)]),_:1})]),_:1})):F("",!0),T(i,{value:z(s),"onUpdate:value":a[1]||(a[1]=e=>H(s)?s.value=e:null),options:z(h)},null,8,["value","options"])])}}}),$s={class:"tips"},Ps={class:"w-full ml-12px"},Ls={class:"w-full ml-12px"},Us={class:"text-warning font-bold"},Rs=c(B({__name:"index",setup(e){const a=r(),{isPro:t}=Y(a),{data:l}=nl(),i=q({maintenance:!1,type:"default",maintenance_title:"",maintenance_big_text:"",maintenance_small_text:"",social_network_links:[],times:null,template_upload:"",background_upload:""}),s=()=>{i.social_network_links.push({title:"",value:""})},o=e=>{const a=l.path;el({path:a,uploadData:{multiple:!1,accept:"bg"===e?".jpg,.jpeg,.png,.gif,.svg,.webp":".html,.phtml,.php"},size:10,onUploadSuccess:t=>{"bg"===e?i.background_upload="".concat(a,"/").concat(t[0].name):i.template_upload="".concat(a,"/").concat(t[0].name)}})},d=()=>{we({source:371})},u=e=>e<Date.now()-864e5,c=async()=>{const e={set_id:l.id,...i,social_network_links:JSON.stringify(i.social_network_links),template_upload:"custom"===i.type?i.template_upload:""};await ht(e),m()},{loading:p,setLoading:_}=he(),m=async()=>{try{_(!0);const{message:e}=await xt({set_id:l.id});n(e)&&(i.maintenance="true"===e.maintenance,i.maintenance_title=e.maintenance_title,i.maintenance_big_text=e.maintenance_big_text,i.maintenance_small_text=e.maintenance_small_text,i.social_network_links=e.social_network_links.length?e.social_network_links:[{title:"",value:""}],i.times=Number(e.times)||null,i.template_upload=e.template_upload,i.background_upload=e.background_upload,i.type=e.template_upload?"custom":"default")}finally{_(!1)}};return t.value&&m(),(e,a)=>{const l=Aa,n=qa,r=Ha,_=nt,m=tt,f=Fa,h=st,x=za,y=L,g=pt,b=ct,w=be,S=v,k=It;return I(),K(k,{install:z(t)},{desc:O(()=>[W("span",null,A(e.$t("WP.Config.index_34")),1),T(l,{class:"ml-8px",onClick:d,type:"primary",size:"small"},{default:O(()=>[M(A(e.$t("Component.Auth.index_3")),1)]),_:1})]),default:O(()=>[T(S,{show:z(p),class:"pr-16px"},{default:O(()=>[T(b,{model:z(i),"label-width":"150"},{default:O(()=>[T(r,{label:e.$t("WP.Config.index_33")},{default:O(()=>[T(n,{value:z(i).maintenance,"onUpdate:value":a[0]||(a[0]=e=>z(i).maintenance=e)},null,8,["value"]),W("span",$s,A(e.$t("WP.Config.index_35")),1)]),_:1},8,["label"]),T(r,{label:e.$t("Layout.Sider.docker_8")},{default:O(()=>[T(m,{value:z(i).type,"onUpdate:value":a[1]||(a[1]=e=>z(i).type=e)},{default:O(()=>[T(_,{label:e.$t("Site.Proxy.index_54"),value:"default"},null,8,["label"]),T(_,{label:e.$t("Public.Search.Custom"),value:"custom"},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"]),"default"===z(i).type?(I(),N(V,{key:0},[T(r,{label:e.$t("WP.Config.index_36")},{default:O(()=>[T(f,{value:z(i).maintenance_title,"onUpdate:value":a[2]||(a[2]=e=>z(i).maintenance_title=e)},null,8,["value"])]),_:1},8,["label"]),T(r,{label:e.$t("WP.Config.index_37")},{default:O(()=>[T(f,{value:z(i).maintenance_big_text,"onUpdate:value":a[3]||(a[3]=e=>z(i).maintenance_big_text=e),maxlength:200},null,8,["value"])]),_:1},8,["label"]),T(r,{label:e.$t("WP.Config.index_38")},{default:O(()=>[T(f,{type:"textarea",value:z(i).maintenance_small_text,"onUpdate:value":a[4]||(a[4]=e=>z(i).maintenance_small_text=e),maxlength:300},null,8,["value"])]),_:1},8,["label"]),T(r,{label:e.$t("WP.Config.index_39")},{default:O(()=>[T(x,null,{default:O(()=>[(I(!0),N(V,null,te(z(i).social_network_links,(t,n)=>(I(),K(x,{class:"flex-nowrap!",key:n},{default:O(()=>[T(f,{class:"w-150px!",value:t.title,"onUpdate:value":e=>t.title=e,placeholder:e.$t("Config.Alarm.index_7")},null,8,["value","onUpdate:value","placeholder"]),T(f,{class:"w-200px!",value:t.value,"onUpdate:value":e=>t.value=e,placeholder:"https://www.aapanel.com/"},null,8,["value","onUpdate:value"]),T(h,null,{default:O(()=>[T(l,{onClick:e=>(e=>{i.social_network_links=i.social_network_links.filter(a=>a!==e)})(t),disabled:1===z(i).social_network_links.length},{default:O(()=>a[10]||(a[10]=[M("-",-1)])),_:2,__:[10]},1032,["onClick","disabled"]),T(l,{onClick:s,disabled:z(i).social_network_links.length>=5},{default:O(()=>a[11]||(a[11]=[M("+",-1)])),_:1,__:[11]},8,["disabled"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1},8,["label"]),T(r,{label:e.$t("WP.Config.index_40")},{default:O(()=>[T(y,{value:z(i).times,"onUpdate:value":a[5]||(a[5]=e=>z(i).times=e),type:"datetime",clearable:"","is-date-disabled":u},null,8,["value"])]),_:1},8,["label"]),T(r,{ref:"dbBakFileRef",label:e.$t("WP.Config.index_41"),path:"db_bak_file"},{default:O(()=>[T(l,{onClick:a[6]||(a[6]=e=>o("bg"))},{default:O(()=>[M(A(e.$t("Docker.App.Backup.index_3")),1)]),_:1}),W("div",Ps,[T(g,{value:z(i).background_upload,"onUpdate:value":a[7]||(a[7]=e=>z(i).background_upload=e),"default-path":"/www/wwwroot","checked-type":["file"]},null,8,["value"])])]),_:1},8,["label"])],64)):F("",!0),"custom"===z(i).type?(I(),K(r,{key:1,label:e.$t("WP.Config.index_42")},{default:O(()=>[T(l,{onClick:a[8]||(a[8]=e=>o("template"))},{default:O(()=>[M(A(e.$t("Docker.App.Backup.index_3")),1)]),_:1}),W("div",Ls,[T(g,{value:z(i).template_upload,"onUpdate:value":a[9]||(a[9]=e=>z(i).template_upload=e),"default-path":"/www/wwwroot","checked-type":["file"]},null,8,["value"])])]),_:1},8,["label"])):F("",!0),T(r,{label:" "},{default:O(()=>[T(l,{type:"primary",onClick:c},{default:O(()=>[M(A(e.$t("Public.Btn.Save")),1)]),_:1})]),_:1})]),_:1},8,["model"]),T(w,null,{default:O(()=>[W("li",Us,A(e.$t("WP.Config.index_43")),1),W("li",null,A(e.$t("WP.Config.index_44")),1),"custom"===z(i).type?(I(),N(V,{key:0},[W("li",null,A(e.$t("WP.Config.index_45")),1),W("li",null,A(e.$t("WP.Config.index_46")),1)],64)):F("",!0)]),_:1})]),_:1},8,["show"])]),_:1},8,["install"])}}}),[["__scopeId","data-v-ce54d9d9"]]),Es={class:"font-bold line-height-24px mb-8px"},Ts={class:"font-bold line-height-24px mb-8px"},Bs={class:"p-16px rounded-8px"},js=c(B({__name:"index",setup(e,{expose:t}){const l=ce(),{data:i}=nl(),{multiService:s,isWebServerJump:o}=Y(r()),{t:d}=j(),u=q({webServer:"apache",ico:""}),c=D(""),p=async()=>{o.value=!0,await al({name:"nginx",title:"Nginx",admin:!1})},_=D([{label:"Apache",value:"apache"},{label:"Nginx",value:"nginx"},{label:"Openlitespeed",value:"openlitespeed"}]),m=()=>{me({title:d("WP.Config.index_25"),width:500,content:()=>T(V,null,[T("span",null,[d("WP.Config.index_26",[u.webServer])]),T("div",{class:"mt-12px"},[d("WP.Config.index_27")]),T(be,{class:"text-12px"},{default:()=>[T("li",{class:"text-warning font-bold"},[d("WP.Config.index_28")]),T("li",{class:"text-warning font-bold"},[d("WP.Config.index_29")]),T("li",null,[d("WP.Config.index_30")]),T("li",null,[d("WP.Config.index_31")])]})]),onConfirm:async()=>{await yt({site_id:i.id,service_type:u.webServer}),f(),l.setRefresh(!0)}})},v=()=>{me({title:d("WP.Config.index_19"),content:d("WP.Config.index_32"),onConfirm:async()=>{await gt({site_id:i.id}),f(),l.setRefresh(!0)}})},f=async()=>{const{message:e}=await mt({site_id:i.id});n(e)&&(u.webServer=e.result,c.value=e.result.charAt(0).toUpperCase()+e.result.slice(1))};return f(),t({init:f}),(e,t)=>{const l=Aa,i=za,n=be,o=ot,d=g,r=Xa,f=dt,h=Ha,x=Ma,y=ct,b=a,w=It;return I(),K(w,{install:z(s)},{desc:O(()=>[T(i,{class:"items-center"},{default:O(()=>[W("span",null,A(e.$t("WP.Config.index_11")),1),T(l,{size:"small",onClick:p,type:"primary"},{default:O(()=>[M(A(e.$t("file.fileOperation.open")),1)]),_:1})]),_:1})]),default:O(()=>[T(o,{class:"p-16px"},{default:O(()=>[T(i,{class:"mb-20px flex-nowrap!"},{default:O(()=>[t[1]||(t[1]=W("i",{class:"i-material-symbols:network-node color-#20a53a text-24px"},null,-1)),W("div",null,[W("div",Es,A(e.$t("WP.Config.index_12")),1),T(n,null,{default:O(()=>[W("li",null,A(e.$t("WP.Config.index_13")),1)]),_:1})])]),_:1,__:[1]}),T(i,{class:"flex-nowrap!"},{default:O(()=>[t[2]||(t[2]=W("i",{class:"i-ic:outline-arrow-circle-right color-#20a53a text-24px"},null,-1)),W("div",null,[W("div",Ts,A(e.$t("WP.Config.index_14")),1),T(n,null,{default:O(()=>[W("li",null,A(e.$t("WP.Config.index_15")),1),W("li",null,A(e.$t("WP.Config.index_16")),1),W("li",null,A(e.$t("WP.Config.index_17")),1)]),_:1})])]),_:1,__:[2]})]),_:1}),T(y,{class:"my-16px",model:z(u)},{default:O(()=>[T(h,{label:e.$t("WP.Config.index_18")},{default:O(()=>[T(r,{"show-icon":!1},{default:O(()=>[T(i,{class:"items-center!",size:2},{default:O(()=>[T(d,{name:"soft-".concat(z(c).toLowerCase()),size:"24"},null,8,["name"]),W("span",null,A(z(c)),1)]),_:1})]),_:1}),T(l,{class:"ml-12px",onClick:v},{default:O(()=>[M(A(e.$t("WP.Config.index_19")),1)]),_:1}),T(f,{trigger:"hover",style:{"--n-color":"var(--site-multi-service-rollback-bg)"}},{trigger:O(()=>[T(d,{class:"ml-5px",name:"base-problem",size:"20"})]),default:O(()=>[W("div",Bs,A(e.$t("WP.Config.index_20")),1)]),_:1})]),_:1},8,["label"]),T(h,{label:e.$t("WP.Config.index_21")},{default:O(()=>[T(x,{class:"w-300px!",value:z(u).webServer,"onUpdate:value":t[0]||(t[0]=e=>z(u).webServer=e),options:z(_)},null,8,["value","options"])]),_:1},8,["label"]),T(h,{label:" "},{default:O(()=>[T(l,{type:"primary",onClick:m},{default:O(()=>[M(A(e.$t("Public.Btn.Save")),1)]),_:1})]),_:1})]),_:1},8,["model"]),T(n,null,{default:O(()=>[W("li",null,A(e.$t("WP.Config.index_22")),1),W("li",null,[M(A(e.$t("WP.Config.index_23")),1),T(b,{class:"ml-5px",target:"_blank",href:"https://www.aapanel.com/docs/faq/multi-webserver_hosting.html"},{default:O(()=>[M(A(e.$t("WP.Config.index_24")),1)]),_:1})])]),_:1})]),_:1},8,["install"])}}}),[["__scopeId","data-v-e468c3da"]]),Ds={key:0};const Ns=B({__name:"index",setup(e,{expose:a}){const{t:t}=j(),{isFree:l}=r(),{data:i}=nl();D(!1);const{table:o,columns:d}=fe([{title:t("Site.Config.index_120"),key:"commit_hash_short",render:e=>T(dt,null,{trigger:()=>{let a;return T(za,{class:"items-center"},{default:()=>{return[T("div",null,[T("div",null,[e.commit_hash_short]),T("div",{class:"text-font3"},[e.author_name])]),e.deploy_status?T(rt,{type:"success",size:"small",round:!0},(l=a=t("WP.TableRow.index_8"),"function"==typeof l||"[object Object]"===Object.prototype.toString.call(l)&&!ue(l)?a:{default:()=>[a]})):""];var l}})},default:()=>T("span",null,[e.commit_hash])})},{title:t("Site.Config.index_121"),key:"msg",render:e=>T(dt,null,{trigger:()=>T("div",{class:"cursor-pointer text-primary",onClick:()=>c(e)},[e.msg]),default:()=>T("span",null,[M("View log")])})},{title:t("Waf.Area.index_3"),key:"status",render:e=>T("span",{class:e.status?"text-primary":"text-error"},[e.status?"Success":"Failed"])},{title:t("Site.Config.index_122"),key:"deployment_time",render:e=>T(dt,null,{trigger:()=>T("div",null,[T("div",null,[e.deployment_time]),T("div",{class:"text-font3"},[t("Crontab.arrange.index_6"),M(": "),e.execut_time,M("s")])]),default:()=>T("div",null,[t("Site.Config.index_123"),M(": "),e.committed_time])})},ge({options:e=>[{disabled:!!e.deploy_status,label:t("WP.Config.index_19"),onClick:async()=>{const a=D(""),{message:l}=await bt({deploy_id:e.id});n(l)&&(a.value=l.result),me({title:t("WP.Config.index_19"),width:500,content:()=>T(V,null,[T("span",null,[t("Site.Config.index_124"),M(", "),T("b",{class:"text-warning"},[t("Site.Config.index_125")])]),T(za,{class:"items-center flex-nowrap! mt-10px"},{default:()=>[T("span",{class:"whitespace-nowrap"},[t("Site.Config.index_127")]),T(Fa,{"input-props":{spellcheck:!1},type:"textarea",value:a.value,"onUpdate:value":e=>a.value=e,autosize:{minRows:9}},null)]})]),onConfirm:async()=>{const{message:l}=await wt({deploy_id:e.id,deploy_script:a.value||e.script_path});n(l)&&ke({title:t("Site.Config.index_126"),width:500,height:300,content:()=>T("div",{class:"p-16px whitespace-pre-wrap",innerHTML:l.result},null)}),p()}})}}]})]),u=()=>{we({source:372})},c=e=>{ke({title:"Log [".concat(e.commit_hash_short,"]"),width:500,height:420,data:{id:e.id},component:J(()=>s(()=>import("./log2.js?v=1764233927359"),__vite__mapDeps([65,36,2,3,4,5,6,1,8,7,37,11])))})},p=async()=>{try{o.loading=!0;const{message:e}=await St({site_id:i.id});n(e)?o.data=e.records||[]:o.data=[]}finally{o.loading=!1}};return p(),a({init:p}),(e,a)=>{const t=g,i=Aa,n=Xa,s=xe,r=pe;return I(),N("div",null,[z(l)?(I(),N("div",Ds,[T(n,{"show-icon":!1,class:"mb-10px"},{default:O(()=>[T(z(za),{class:"items-center flex-nowrap!"},{default:O(()=>[T(t,{class:"flex-shrink-0",name:"base-info",size:"18"}),W("span",null,A(e.$t("Site.Config.index_116")),1),T(i,{class:"ml-5px",type:"primary",size:"small",onClick:u},{default:O(()=>[M(A(e.$t("Site.Config.index_117")),1)]),_:1})]),_:1})]),_:1})])):F("",!0),T(r,null,Q({table:O(()=>[T(s,{loading:z(o).loading,data:z(o).data,columns:z(d),"max-height":580},null,8,["loading","data","columns"])]),_:2},[void 0]),1024)])}}}),Is={class:"p-20px"},Ws=B({__name:"form",props:{data:{}},setup(e,{expose:a}){const{t:t}=j(),{data:l}=nl(),i=e,{getList:s,row:o,isEdit:d}=i.data,r=D("master"),u=D(null),c=q({deploy_script:"",title:""}),p={deploy_script:{required:!0,message:t("Security.Conf.Index_28"),trigger:["blur","input"]},title:{required:!0,message:t("Security.Conf.Index_28"),trigger:["blur","input"]}},{loading:_,setLoading:m}=he();(async()=>{if(d&&o)c.deploy_script=o.deploy_script,c.title=o.title;else try{m(!0);const{message:e}=await kt({site_id:l.id});n(e)&&(r.value=e.branch||"master",c.deploy_script="echo $(date)\ncd ".concat(l.path,"\ngit pull origin ").concat(r.value,'\necho " Application deployed!"\necho ""'))}finally{m(!1)}})();return a({onConfirm:async()=>{var e;await(null==(e=u.value)?void 0:e.validate()),d?await Ct({script_id:o.id,deploy_script:c.deploy_script}):await $t({site_id:l.id,...c}),null==s||s()}}),(e,a)=>{const t=Fa,l=Ha,i=ct,n=be,s=v;return I(),N("div",Is,[T(s,{show:z(_)},{default:O(()=>[T(i,{ref_key:"formRef",ref:u,model:z(c),rules:p},{default:O(()=>[T(l,{label:e.$t("Site.Config.index_138"),path:"deploy_script"},{default:O(()=>[T(t,{class:"w-400px!",value:z(c).deploy_script,"onUpdate:value":a[0]||(a[0]=e=>z(c).deploy_script=e),placeholder:e.$t("Site.Config.index_151"),type:"textarea",rows:10,"input-props":{spellcheck:!1}},null,8,["value","placeholder"])]),_:1},8,["label"]),T(l,{label:e.$t("Config.Panel.index_36"),path:"title"},{default:O(()=>[T(t,{class:"w-400px!",disabled:z(d),value:z(c).title,"onUpdate:value":a[1]||(a[1]=e=>z(c).title=e),placeholder:e.$t("Site.Config.index_139")},null,8,["disabled","value","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"]),T(n,{class:"ml-20px mt-16px"},{default:O(()=>[W("li",null,A(e.$t("Site.Config.index_150")),1)]),_:1})]),_:1},8,["show"])])}}}),Os=B({__name:"index",setup(e,{expose:a}){const{t:l}=j(),{data:i}=nl(),n=ye(l("Site.Config.index_141"),{getList:()=>{r()}}),s=()=>{n.title=l("Site.Config.index_141"),n.data.isEdit=!1,n.show=!0},{table:o,columns:d}=fe([{title:l("Config.Panel.index_36"),key:"title"},{title:l("Site.Config.index_127"),key:"deploy_script",ellipsis:{tooltip:!0}},ge({width:150,align:"center",options:e=>[{label:l("Public.Btn.Deploy"),onClick:()=>{me({title:l("Site.PHP.add_site_50"),content:l("Site.Config.index_142"),onConfirm:async()=>{await Pt({site_id:i.id,script_id:e.id})}})}},{label:l("Public.Btn.Edit"),onClick:()=>{n.title=l("Crontab.arrange.index_38"),n.data.row=e,n.data.isEdit=!0,n.show=!0}},{label:l("Public.Btn.Del"),onClick:()=>{me({title:l("Crontab.Script.index_42"),content:l("Site.Config.index_143"),onConfirm:async()=>{await Lt({script_id:e.id}),r()}})}}]})]),r=async()=>{try{o.loading=!0;const{message:e}=await Ut({site_id:i.id});t(e)&&(o.data=e||[])}finally{o.loading=!1}};return r(),a({init:r}),(e,a)=>{const t=Xa,l=Aa,i=xe,r=pe,u=_t;return I(),N("div",null,[T(t,{"show-icon":!1,class:"mb-10px"},{default:O(()=>[W("span",null,A(e.$t("Site.Config.index_140")),1)]),_:1}),T(r,null,{toolsLeft:O(()=>[T(l,{type:"primary",onClick:s},{default:O(()=>[M(A(e.$t("Public.Btn.Add")),1)]),_:1})]),table:O(()=>[T(i,{loading:z(o).loading,data:z(o).data,columns:z(d),"max-height":480},null,8,["loading","data","columns"])]),_:1}),T(u,{show:z(n).show,"onUpdate:show":a[0]||(a[0]=e=>z(n).show=e),title:z(n).title,data:z(n).data,width:600,"min-height":320,footer:!0,component:Ws},null,8,["show","title","data"])])}}}),As={key:0},Hs={class:"text-primary cursor-pointer"},zs=["src"],Ms={key:0},qs=B({__name:"index",props:{onJump:{type:Function,default:()=>{}}},setup(e,{expose:a}){const{t:l}=j(),{data:i}=nl(),{isFree:s}=r(),o=e,d=D(!0),u=D(null),c=q({git_provider:"",git_repo:null,git_branch:null,custom_key:"",custom_repo:null,custom_branch:"",track_deployments:null,webhook_url:"",coverage_data:!1,webhook_script:null}),p=q({git_repo:{required:!0,trigger:["blur","change"],message:l("Site.PHP.add_site_53")},git_branch:{required:!0,trigger:["blur","change"],message:l("Site.PHP.add_site_54")},custom_repo:{required:!0,trigger:["blur","change"],message:l("Site.Config.index_135")},custom_branch:{required:!0,trigger:["blur","change"],message:l("Site.Config.index_136")}}),_=D([]),m=D([]),f=D([]),h=[{label:"5",value:5},{label:"10",value:10,disabled:s},{label:"15",value:15,disabled:s},{label:"30",value:30,disabled:s}],x=e=>s&&Number(e.value)>5?T("div",{onClick:()=>we({source:372})},[T("span",null,[e.label]),T("span",{class:"float-right cursor-pointer color-#ffb800"},[M("PRO")])]):T("span",null,[e.label]),y=()=>{o.onJump()},g=async()=>{me({title:l("Site.Config.index_133"),content:l("Site.Config.index_137"),onConfirm:async()=>{await Rt({site_id:i.id}),P()}})},b=()=>{Re(c.webhook_url)},w=async()=>{var e;if(await(null==(e=u.value)?void 0:e.validate()),!d.value)return await Et({site_id:i.id,site_path:i.path,repo:c.custom_repo||"",branch:c.custom_branch,coverage_data:c.coverage_data}),void P();await Tt({site_id:i.id,number_copies:c.track_deployments||5,script_id:c.webhook_script})},{loading:S,setLoading:k}=he(),{loading:C,setLoading:$}=he(),P=async()=>{try{$(!0);const{message:e}=await kt({site_id:i.id});n(e)&&(1===Object.entries(e).length?d.value=!1:d.value=!0,c.git_provider=e.deploy_type||"ssh",c.git_repo=e.repo,c.git_branch=e.branch,c.custom_key=e.ssh_key,c.custom_repo=e.repo,c.custom_branch=e.branch||"master",c.track_deployments=e.number_copies,c.webhook_url=e.webhook_url,c.webhook_script=e.webhook_script||null,c.coverage_data=!1),(async()=>{try{k(!0);const{message:e}=await Ut({site_id:i.id});t(e)&&(f.value=e.map(e=>({label:e.title,value:e.id})))}finally{k(!1)}})()}finally{$(!1)}};return P(),a({init:P}),(e,a)=>{const t=Xa,l=za,i=lt,n=tt,s=Ha,o=Ma,r=Fa,k=dt,$=Aa,P=tl,L=qa,U=ct,R=v;return I(),K(R,{class:"h-620px",show:z(C)},{default:O(()=>[z(d)?F("",!0):(I(),K(t,{key:0,class:"mb-16px","show-icon":!1},{default:O(()=>[M(A(e.$t("Site.Config.index_128")),1)]),_:1})),T(U,{ref_key:"formRef",ref:u,model:z(c),rules:z(p)},{default:O(()=>[T(s,{label:e.$t("Site.PHP.add_site_47"),path:"git_provider"},{default:O(()=>[T(n,{value:z(c).git_provider,"onUpdate:value":a[0]||(a[0]=e=>z(c).git_provider=e)},{default:O(()=>[F("",!0),T(i,{value:"ssh"},{default:O(()=>[T(l,{class:"items-center",size:2},{default:O(()=>[a[11]||(a[11]=W("i",{class:"i-octicon:git-branch-16 text-18px"},null,-1)),W("span",null,A(e.$t("Public.Search.Custom")),1)]),_:1,__:[11]})]),_:1})]),_:1},8,["value"])]),_:1},8,["label"]),"github"===z(c).git_provider?(I(),N("div",As,[T(s,{label:" "},{default:O(()=>[W("div",null,[T(s,{label:e.$t("Site.PHP.add_site_48"),path:"git_repo","label-placement":"top"},{default:O(()=>[T(o,{class:"w-400px",value:z(c).git_repo,"onUpdate:value":a[1]||(a[1]=e=>z(c).git_repo=e),name:"git_repo",options:z(_)},null,8,["value","options"])]),_:1},8,["label"]),T(s,{label:e.$t("Site.PHP.add_site_49"),path:"git_branch","label-placement":"top"},{default:O(()=>[T(o,{class:"w-400px",value:z(c).git_branch,"onUpdate:value":a[2]||(a[2]=e=>z(c).git_branch=e),name:"git_branch",options:z(m)},null,8,["value","options"])]),_:1},8,["label"])])]),_:1})])):F("",!0),"ssh"===z(c).git_provider?(I(),K(s,{key:1,label:" "},{default:O(()=>[W("div",null,[T(s,{label:"SSH key","label-placement":"top"},{default:O(()=>[T(r,{readonly:"",type:"textarea",class:"w-400px!",value:z(c).custom_key,"onUpdate:value":a[3]||(a[3]=e=>z(c).custom_key=e),"input-props":{spellcheck:!1}},null,8,["value"])]),_:1}),T(s,{label:e.$t("Site.PHP.add_site_48"),"label-placement":"top",path:"custom_repo"},{default:O(()=>[T(l,null,{default:O(()=>[T(r,{readonly:z(d),class:"w-400px!",value:z(c).custom_repo,"onUpdate:value":a[4]||(a[4]=e=>z(c).custom_repo=e),"input-props":{spellcheck:!1}},null,8,["readonly","value"]),z(d)?F("",!0):(I(),N(V,{key:0},[a[12]||(a[12]=W("div",null,"(e.g. git@github.com:username/repo.git)",-1)),T(k,{trigger:"hover"},{trigger:O(()=>[W("span",Hs,A(e.$t("Site.PHP.add_site_52")),1)]),default:O(()=>[W("img",{width:"400px",src:z(ll),alt:"git desc"},null,8,zs)]),_:1})],64))]),_:1})]),_:1},8,["label"]),T(s,{label:e.$t("Site.PHP.add_site_49"),"label-placement":"top",path:"custom_branch"},{default:O(()=>[T(l,{class:"flex-col!"},{default:O(()=>[T(r,{readonly:z(d),class:"w-400px!",value:z(c).custom_branch,"onUpdate:value":a[5]||(a[5]=e=>z(c).custom_branch=e)},null,8,["readonly","value"]),z(d)?F("",!0):(I(),N("div",Ms,"(e.g. master)"))]),_:1})]),_:1},8,["label"])])]),_:1})):F("",!0),z(d)?(I(),N(V,{key:2},[T(s,{label:e.$t("SSL.Domain.index_11")},{default:O(()=>[T(l,null,{default:O(()=>[T(o,{class:"w-400px",value:z(c).track_deployments,"onUpdate:value":a[6]||(a[6]=e=>z(c).track_deployments=e),"render-label":x,options:h},null,8,["value"]),W("span",null,"*"+A(e.$t("Site.Config.index_129")),1)]),_:1})]),_:1},8,["label"]),T(s,{label:e.$t("Site.Config.index_130")},{default:O(()=>[T(l,null,{default:O(()=>[T(l,{class:"items-center"},{default:O(()=>[T(o,{loading:z(S),class:"w-400px",value:z(c).webhook_script,"onUpdate:value":a[7]||(a[7]=e=>z(c).webhook_script=e),options:z(f)},null,8,["loading","value","options"]),T($,{size:"small",onClick:y},{default:O(()=>[M(A(e.$t("Site.PHP.add_site_34")),1)]),_:1})]),_:1}),W("div",null,"*"+A(e.$t("Site.Config.index_131")),1)]),_:1})]),_:1},8,["label"]),T(s,{label:e.$t("Site.Config.index_132")},{default:O(()=>[T(l,null,{default:O(()=>[T(l,{class:"items-center"},{default:O(()=>[T(P,{readonly:"",iconName:"common-copy",class:"w-400px!",value:z(c).webhook_url,"onUpdate:value":a[8]||(a[8]=e=>z(c).webhook_url=e),"input-props":{spellcheck:!1},onClick:b},null,8,["value"]),T($,{type:"primary",size:"small",onClick:g},{default:O(()=>[M(A(e.$t("Site.Config.index_133")),1)]),_:1})]),_:1}),W("span",null,"*"+A(e.$t("Site.Config.index_134")),1)]),_:1})]),_:1},8,["label"])],64)):(I(),K(s,{key:3,label:"Coverage data"},{default:O(()=>[T(L,{value:z(c).coverage_data,"onUpdate:value":a[9]||(a[9]=e=>z(c).coverage_data=e)},null,8,["value"])]),_:1})),T(s,{label:" "},{default:O(()=>[T(l,null,{default:O(()=>[T($,{type:"primary",onClick:w},{default:O(()=>[M(A(e.$t("Public.Btn.Save")),1)]),_:1}),F("",!0)]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["show"])}}}),Fs={class:"flex gap-10px mb-10px"},Vs={class:"h-540px"},Js=B({__name:"index",setup(e,{expose:a}){const{t:t}=j(),{data:l}=nl(),{loading:i,setLoading:s}=he(),o=D(""),r=()=>{me({title:t("Site.Config.index_147"),content:t("Site.Config.index_148"),onConfirm:async()=>{await Dt({site_id:l.id}),u()}})},u=async()=>{try{s(!0);const{message:e}=await jt({site_id:l.id});n(e)&&(o.value=d(e.result)&&e.result.length>0?e.result:t("Site.Config.index_149"))}finally{s(!1)}};return u(),a({init:u}),(e,a)=>{const t=Aa,l=zt,n=v;return I(),N("div",null,[W("div",Fs,[T(t,{type:"primary",onClick:u},{default:O(()=>[M(A(e.$t("Public.Btn.Refresh")),1)]),_:1}),T(t,{onClick:r},{default:O(()=>[M(A(e.$t("Public.Btn.Clear")),1)]),_:1})]),W("div",Vs,[T(n,{class:"h-full",show:z(i)},{default:O(()=>[T(l,{log:z(o)},null,8,["log"])]),_:1},8,["show"])])])}}}),Ks=B({__name:"index",setup(e,{expose:a}){const{t:t}=j(),{config:l,data:i}=nl(),s=D("deployment"),o=D(),d=[{key:"deployment",label:t("Site.Config.index_145"),component:Ns},{key:"script",label:t("Site.Config.index_127"),component:Os},{key:"repository",label:t("Site.PHP.add_site_48"),component:qs,data:{onJump:()=>{s.value="script"}}},{key:"logs",label:t("Site.Config.index_146"),component:Js}],r=D(!0);return(async()=>{await(async()=>{const{message:e}=await kt({site_id:i.id});n(e)&&(1===Object.entries(e).length?r.value=!1:r.value=!0)})(),s.value=l.subMenu||"deployment",l.subMenu=""})(),a({init:async()=>{s.value="deployment",X(()=>{var e;null==(e=o.value)||e.init()})}}),(e,a)=>{const t=ut,l=It;return I(),K(l,{install:z(r)},{desc:O(()=>[M(A(e.$t("Site.Config.index_144")),1)]),default:O(()=>[T(t,{value:z(s),"onUpdate:value":a[0]||(a[0]=e=>H(s)?s.value=e:null),ref_key:"tabsRef",ref:o,options:d},null,8,["value"])]),_:1},8,["install"])}}}),Xs={class:"h-full"},Gs=B({__name:"index",props:{siteInfo:{},config:{}},setup(e){const{t:a}=j(),t=ce(),{siteName:l}=Y(t),i=J(()=>s(()=>import("./index268.js?v=1764233927359"),__vite__mapDeps([66,30,3,4,6,1,2,5,7,8,31,26,11,10,23,9,12,13,14,15,16,17,18,19,20,21,22,24,25,27,28,29,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59]))),n=e,{siteInfo:o,config:d}=n;l.value=n.siteInfo.name;const r=D();o&&E(il,{data:o,config:d});const u=D("domain"),c=[{key:"domain",label:a("Site.Config.index_1"),component:cl},{key:"directory",label:"Directory",component:Ul},{key:"access",label:a("Site.Config.index_5"),component:ai},{key:"rewrite",label:a("Site.Config.index_7"),component:i},{key:"document",label:a("Site.Config.index_9"),component:ii},{key:"config",label:a("Site.Config.index_10"),component:si},{key:"ssl",label:()=>T(V,null,[a("Site.Config.index_11")]),component:Cs},{key:"php",label:a("Site.Config.index_12"),component:bi},{key:"webserver",label:a("WP.Config.index_21"),component:js},{key:"git",label:"Git Manager",component:Ks},{key:"wordpress",label:"Wordpress Setting",show:"WP"===(null==o?void 0:o.project_type),component:$i},{key:"composer",label:a("Site.Config.index_20"),component:Wi},{key:"redirect",label:a("Site.Config.index_21"),component:Xi},{key:"proxy",label:a("Site.Config.index_23"),component:rn},{key:"hotlink",label:a("Site.Config.index_24"),component:cn},{key:"maintenance",label:a("WP.Config.index_33"),component:Rs},{key:"logs",label:a("Site.Config.index_25"),component:xn}];return u.value=d.menu||"domain",d.menu="",Z(()=>{window.siteConfigInit=r.value.init}),(e,a)=>{const t=U;return I(),N("div",Xs,[T(t,{value:z(u),"onUpdate:value":a[0]||(a[0]=e=>H(u)?u.value=e:null),ref_key:"tabsRef",ref:r,data:c},null,8,["value"])])}}}),Ys=Object.freeze(Object.defineProperty({__proto__:null,default:Gs},Symbol.toStringTag,{value:"Module"}));export{Ys as i,nl as u};
