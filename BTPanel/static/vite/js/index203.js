import{_ as e}from"./index.js?v=1752142539265";import{_ as a,b as l,f as s,ar as t,e as i,c as n,as as o,at as d,au as r}from"./public.js?v=1752142539265";import{d as u,m as p,p as _,_ as m,o as c,O as f,e as S}from"./page_layout.js?v=1752142539265";import{_ as v}from"./index.vue_vue_type_script_setup_true_lang.js?v=1752142539265";import{k as h,P as x,r as y,e as b,U as g,X as w,Q as L,a2 as $,W as B,V as C,a3 as k,ah as N,ad as M,c as j,w as H,a1 as U,l as A,j as q,v as T,H as R}from"./vue.js?v=1752142539265";import{cz as P,aq as F,bX as E,ay as z,cB as O,cC as W,c3 as X}from"./naive.js?v=1752142539265";import{_ as D}from"./index.vue_vue_type_script_setup_true_lang6.js?v=1752142539265";import"./common.js?v=1752142539265";import"./__commonjsHelpers__.js?v=1752142539265";const I={class:"p-20px"},J=h({__name:"custom-domain",props:{onConfirm:{type:Function}},setup(e,{expose:l}){const{t:s}=x(),t=e,i=y(null),n=b({domain:""}),o={domain:[{required:!0,message:s("Mail.Setting.index_50"),trigger:"blur"}]};return l({onConfirm:async()=>{var e;await(null==(e=i.value)?void 0:e.validate()),t.onConfirm(n.domain)}}),(e,l)=>{const s=F,t=P,d=v,r=a;return w(),g("div",I,[L(d,{ref_key:"formRef",ref:i,model:B(n),rules:o},{default:$((()=>[L(t,{label:e.$t("Mail.Mass.index_45"),path:"domain"},{default:$((()=>[L(s,{class:"w-350px!",value:B(n).domain,"onUpdate:value":l[0]||(l[0]=e=>B(n).domain=e),placeholder:"single domain name certificate, for example, www.aapanel.com"},null,8,["value"])])),_:1},8,["label"])])),_:1},8,["model"]),L(r,{class:"mt-16px!"},{default:$((()=>[C("li",null,k(e.$t("SSL.Business.index_9")),1),C("li",null,k(e.$t("SSL.Business.index_10")),1),C("li",null,k(e.$t("SSL.Business.index_11")),1),C("li",null,k(e.$t("SSL.Business.index_12")),1),C("li",null,k(e.$t("SSL.Business.index_13")),1),C("li",null,k(e.$t("SSL.Business.index_14")),1)])),_:1})])}}}),K={class:"p-20px"},Q=h({__name:"exist-domain",props:{onConfirm:{type:Function}},setup(e,{expose:i}){const{t:n}=x(),o=e,d=b({keyword:""}),r=()=>{S()},{keys:_,table:m,columns:c}=l([{type:"selection",width:40,multiple:!1},{title:n("Mail.Mass.index_45"),key:"name"}]),f=e=>({onClick:()=>{_.value=[e.id]}}),S=async()=>{const{message:e}=await t({tojs:"site.get_list",table:"domain",limit:1e4,search:d.keyword,p:1,order:"id desc",type:-1});u(e)&&(m.data=e.data)};S();return i({onConfirm:async()=>{0!==_.value.length?m.data.forEach((e=>{e.id===_.value[0]&&o.onConfirm(e.name)})):p.error(n("SSL.SiteSSL.index_16"))}}),(e,l)=>{const t=D,i=s,n=a;return w(),g("div",K,[L(t,{class:"w-full!",clearable:"",value:B(d).keyword,"onUpdate:value":l[0]||(l[0]=e=>B(d).keyword=e),placeholder:e.$t("Mail.Setting.index_50"),onSearch:r},null,8,["value","placeholder"]),L(i,{class:"my-16px","max-height":250,"checked-row-keys":B(_),"onUpdate:checkedRowKeys":l[1]||(l[1]=e=>N(_)?_.value=e:null),loading:B(m).loading,data:B(m).data,columns:B(c),"row-props":f},null,8,["checked-row-keys","loading","data","columns"]),L(n,null,{default:$((()=>[C("li",null,k(e.$t("SSL.Business.index_9")),1),C("li",null,k(e.$t("SSL.Business.index_10")),1),C("li",null,k(e.$t("SSL.Business.index_11")),1),C("li",null,k(e.$t("SSL.Business.index_12")),1),C("li",null,k(e.$t("SSL.Business.index_13")),1),C("li",null,k(e.$t("SSL.Business.index_14")),1)])),_:1})])}}}),V={class:"color-#20a53a"},Y={class:"color-#20a53a text-12px"},G={class:"mt-16px"},Z=S(h({__name:"index",props:{data:{}},setup(l){const{t:s}=x(),t=l,{row:p}=M(t.data),S=i(s("SSL.Business.index_26"),{onConfirm:e=>{K.domain=e}}),h=i(s("SSL.Business.index_25"),{onConfirm:e=>{K.domain=e}}),g=y(null),N=y(!0),D=j((()=>!p.value.order_info.code.includes("wildcard"))),I=y({}),K=b({domain:"",verifyMethod:"CNAME_CSR_HASH",province:"",city:"",company:"",email:"",phone:"",job:"",postCode:"",country:"",firstName:"",lastName:"",address:"",tel_prefix:""}),Z={domain:[{required:!0,message:s("Mail.Setting.index_50"),trigger:"blur"}],province:[{required:!0,message:s("SSL.Business.index_37"),trigger:"blur"}],city:[{required:!0,message:s("SSL.Business.index_38"),trigger:"blur"}],address:[{required:!0,message:"Address details",trigger:"blur"}],company:[{required:!0,message:s("SSL.Business.index_39"),trigger:"blur"}],firstName:[{required:!0,message:"First Name",trigger:"blur"}],lastName:[{required:!0,message:"Last Name",trigger:"blur"}],email:[{required:!0,message:s("Mail.Unsubscribe.index_5"),trigger:"blur"}],phone:[{required:!0,message:s("SSL.Business.index_40"),trigger:"blur"}],tel_prefix:[{required:!0,message:"Tel Prefix",trigger:"blur"}]};H((()=>K.domain),(async e=>{const{message:a}=await r({domain:e});u(a)&&(I.value=a.auto)}));const ee=async()=>{var e,a,l,s,i;await(null==(e=g.value)?void 0:e.validate());const{message:n}=await o({pdata:JSON.stringify({pid:null==(a=null==p?void 0:p.value)?void 0:a.order_info.pid,oid:null==(l=null==p?void 0:p.value)?void 0:l.order_info.oid,uc_id:null==(s=null==p?void 0:p.value)?void 0:s.order_info.uc_id,domains:[K.domain],dcvMethod:K.verifyMethod,auth_to:"dns",auto:"CNAME_CSR_HASH"===K.verifyMethod?I.value:"",Administrator:{job:K.job,postCode:K.postCode,country:K.country,firstName:K.firstName,lastName:K.lastName,state:K.province,city:K.city,address:K.address,organation:K.company,email:K.email,mobile:K.phone,tel_prefix:K.tel_prefix}})});u(n)&&t.data.onRefresh(n.verify_info,null==(i=p.value)?void 0:i.order_info.uc_id)},{loading:ae,setLoading:le}=n();return(async()=>{try{le(!0);const{message:e}=await d();u(e)&&(K.province=e.state,K.city=e.city,K.company=e.organation,K.firstName=e.firstName,K.lastName=e.lastName,K.email=e.email,K.phone=e.mobile,K.job=e.job,K.postCode=e.postCode,K.country=e.country,K.address=e.address,K.tel_prefix=e.tel_prefix)}finally{le(!1)}})(),(l,s)=>{const t=P,i=F,n=z,o=E,d=W,r=O,u=X,x=m,y=_,b=v,M=c,j=a,H=e,le=f;return w(),U(le,{show:B(ae),class:"p-16px"},{default:$((()=>[L(b,{ref_key:"formRef",ref:g,model:B(K),rules:Z},{default:$((()=>[L(t,{label:l.$t("Config.Safe.index_28")},{default:$((()=>[C("span",V,k(B(p).order_info.title),1)])),_:1},8,["label"]),L(t,{label:l.$t("Mail.Mass.index_45"),path:"domain"},{default:$((()=>[L(o,{class:"w-420px"},{default:$((()=>[L(i,{disabled:"",value:B(K).domain,"onUpdate:value":s[0]||(s[0]=e=>B(K).domain=e),placeholder:l.$t("SSL.Business.index_24")},null,8,["value","placeholder"]),L(o,null,{default:$((()=>[L(n,{size:"small",type:"primary",onClick:s[1]||(s[1]=e=>B(h).show=!0)},{default:$((()=>[q(k(l.$t("SSL.Business.index_25")),1)])),_:1}),L(n,{size:"small",onClick:s[2]||(s[2]=e=>B(S).show=!0)},{default:$((()=>[q(k(l.$t("SSL.Business.index_26")),1)])),_:1})])),_:1})])),_:1})])),_:1},8,["label"]),L(t,{label:l.$t("Waf.Setting.config_67"),path:"verifyMethod","show-feedback":!1},{default:$((()=>[L(r,{value:B(K).verifyMethod,"onUpdate:value":s[3]||(s[3]=e=>B(K).verifyMethod=e)},{default:$((()=>[L(d,{value:"CNAME_CSR_HASH"},{default:$((()=>[q(k(l.$t("SSL.index_12")),1)])),_:1}),A(L(d,{value:"HTTP_CSR_HASH"},{default:$((()=>[q(k(l.$t("SSL.SiteSSL.index_17"))+"(HTTP) ",1)])),_:1},512),[[T,B(D)]]),A(L(d,{value:"HTTPS_CSR_HASH"},{default:$((()=>[q(k(l.$t("SSL.SiteSSL.index_17"))+"(HTTPS) ",1)])),_:1},512),[[T,B(D)]])])),_:1},8,["value"])])),_:1},8,["label"]),A(L(t,{label:" ","show-feedback":!1},{default:$((()=>[Object.keys(B(I)).length?(w(),U(u,{key:0,type:"success",class:"w-full"},{default:$((()=>[q(k(B(I).name)+" The parsing record will be added automatically ",1)])),_:1})):(w(),U(u,{key:1,type:"warning",class:"w-full"},{default:$((()=>s[16]||(s[16]=[C("span",null,"Your domain name is not in the Domain management center, please manually add the domain name resolution record",-1)]))),_:1,__:[16]}))])),_:1},512),[[T,B(K).domain&&"CNAME_CSR_HASH"===B(K).verifyMethod]]),L(y,{class:"my-16px!"},{default:$((()=>[L(o,{size:5,class:"items-center flex-nowrap! cursor-pointer",onClick:s[4]||(s[4]=e=>N.value=!B(N))},{default:$((()=>[L(x,{name:"base-arrow-bottom",class:R(["color-#20a53a",{hiden:B(N)}])},null,8,["class"]),C("span",Y,k(l.$t("SSL.Business.index_27")),1)])),_:1})])),_:1}),A(C("div",G,[L(t,{label:l.$t("SSL.Business.index_32"),"show-feedback":!1},{default:$((()=>[L(o,null,{default:$((()=>[L(t,{label:"",path:"province"},{default:$((()=>[L(i,{value:B(K).province,"onUpdate:value":s[5]||(s[5]=e=>B(K).province=e),placeholder:l.$t("SSL.Business.index_28")},null,8,["value","placeholder"])])),_:1}),L(t,{label:"",path:"city"},{default:$((()=>[L(i,{value:B(K).city,"onUpdate:value":s[6]||(s[6]=e=>B(K).city=e),placeholder:l.$t("SSL.Business.index_29")},null,8,["value","placeholder"])])),_:1})])),_:1})])),_:1},8,["label"]),L(t,{label:l.$t("Mail.Forward.index_2"),path:"address"},{default:$((()=>[L(i,{class:"w-420px!",value:B(K).address,"onUpdate:value":s[7]||(s[7]=e=>B(K).address=e),placeholder:"Address details"},null,8,["value"])])),_:1},8,["label"]),L(t,{label:l.$t("SSL.Business.index_30"),path:"company"},{default:$((()=>[L(i,{class:"w-420px!",value:B(K).company,"onUpdate:value":s[8]||(s[8]=e=>B(K).company=e),placeholder:l.$t("SSL.Business.index_30")},null,8,["value","placeholder"])])),_:1},8,["label"]),L(t,{label:l.$t("Config.Alarm.index_43"),"show-feedback":!1},{default:$((()=>[L(o,null,{default:$((()=>[L(t,{label:"",path:"firstName"},{default:$((()=>[L(i,{value:B(K).firstName,"onUpdate:value":s[9]||(s[9]=e=>B(K).firstName=e),placeholder:"First Name"},null,8,["value"])])),_:1}),L(t,{label:"",path:"lastName"},{default:$((()=>[L(i,{value:B(K).lastName,"onUpdate:value":s[10]||(s[10]=e=>B(K).lastName=e),placeholder:"Last Name"},null,8,["value"])])),_:1})])),_:1})])),_:1},8,["label"]),L(t,{label:l.$t("Config.Alarm.index_3"),path:"email"},{default:$((()=>[L(i,{class:"w-420px!",value:B(K).email,"onUpdate:value":s[11]||(s[11]=e=>B(K).email=e),placeholder:l.$t("Config.Alarm.index_3")},null,8,["value","placeholder"])])),_:1},8,["label"]),L(t,{label:l.$t("SSL.Business.index_31"),"show-feedback":!1},{default:$((()=>[L(o,null,{default:$((()=>[L(t,{label:"",path:"tel_prefix"},{default:$((()=>[L(i,{class:"w-120px!",value:B(K).tel_prefix,"onUpdate:value":s[12]||(s[12]=e=>B(K).tel_prefix=e),placeholder:"Tel Prefix"},null,8,["value"])])),_:1}),L(t,{label:"",path:"phone"},{default:$((()=>[L(i,{class:"w-290px!",value:B(K).phone,"onUpdate:value":s[13]||(s[13]=e=>B(K).phone=e),placeholder:"Phone Number"},null,8,["value"])])),_:1})])),_:1})])),_:1},8,["label"])],512),[[T,B(N)]]),L(t,{label:" "},{default:$((()=>[L(n,{type:"primary",onClick:ee},{default:$((()=>[q(k(l.$t("SSL.Business.index_33")),1)])),_:1})])),_:1})])),_:1},8,["model"]),L(j,null,{default:$((()=>[C("li",null,k(l.$t("SSL.Business.index_34")),1),C("li",null,k(l.$t("SSL.Business.index_35")),1),C("li",null,[L(M,{target:"_blank",href:"https://www.aapanel.com/docs/Function/BusinessCertificate.html"},{default:$((()=>[q(k(l.$t("SSL.Business.index_36")),1)])),_:1})])])),_:1}),L(H,{show:B(h).show,"onUpdate:show":s[14]||(s[14]=e=>B(h).show=e),title:B(h).title,data:B(h).data,footer:!0,width:580,component:Q},null,8,["show","title","data"]),L(H,{show:B(S).show,"onUpdate:show":s[15]||(s[15]=e=>B(S).show=e),title:B(S).title,data:B(S).data,footer:!0,width:580,component:J},null,8,["show","title","data"])])),_:1},8,["show"])}}}),[["__scopeId","data-v-58284147"]]);export{Z as default};
