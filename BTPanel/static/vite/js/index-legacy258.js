System.register(["./index-legacy109.js?v=1767769852656","./index-legacy135.js?v=1767769852656","./index.vue_vue_type_script_setup_true_lang-legacy.js?v=1767769852656","./page_layout-legacy.js?v=1767769852656","./vue-legacy.js?v=1767769852656","./index-legacy87.js?v=1767769852656","./public-legacy.js?v=1767769852656","./domain-input-legacy.js?v=1767769852656","./site-legacy.js?v=1767769852656","./naive-legacy.js?v=1767769852656","./index.vue_vue_type_script_setup_true_lang-legacy17.js?v=1767769852656","./index.vue_vue_type_script_setup_true_lang-legacy11.js?v=1767769852656","./upload-legacy.js?v=1767769852656","./task-view.vue_vue_type_script_setup_true_lang-legacy.js?v=1767769852656","./common-legacy.js?v=1767769852656","./__commonjsHelpers__-legacy.js?v=1767769852656","./index-legacy.js?v=1767769852656","./index.vue_vue_type_script_setup_true_lang-legacy5.js?v=1767769852656","./index.vue_vue_type_script_setup_true_lang-legacy6.js?v=1767769852656","./index.vue_vue_type_script_setup_true_lang-legacy7.js?v=1767769852656","./index.vue_vue_type_script_setup_true_lang-legacy9.js?v=1767769852656","./index.vue_vue_type_script_setup_true_lang-legacy8.js?v=1767769852656","./index-legacy133.js?v=1767769852656","./php-legacy.js?v=1767769852656","./soft-legacy.js?v=1767769852656","./site-legacy3.js?v=1767769852656","./index.vue_vue_type_script_setup_true_lang-legacy14.js?v=1767769852656","./index-legacy251.js?v=1767769852656","./index-legacy99.js?v=1767769852656","./index-legacy100.js?v=1767769852656","./theme-monokai-legacy.js?v=1767769852656","./file-legacy.js?v=1767769852656","./refersh-legacy.js?v=1767769852656","./index-legacy104.js?v=1767769852656","./ssl-legacy.js?v=1767769852656","./cert-legacy.js?v=1767769852656","./ssl-lets-progress-legacy.js?v=1767769852656","./utils-legacy3.js?v=1767769852656","./index-legacy222.js?v=1767769852656","./paypal-js-legacy.js?v=1767769852656","./index-legacy98.js?v=1767769852656"],function(e,l){"use strict";var a,t,i,n,r,u,d,s,o,_,p,c,v,m,g,b,h,f,x,y,w,k,S,$,j,P,L,E,U,R,W,A,q,C,V,B,D,H,z,F,M,I,N,T,J,O,Q,Z,G,K,X,Y,ee,le,ae,te,ie,ne,re,ue,de;return{setters:[e=>{a=e._},e=>{t=e._},e=>{i=e._},e=>{n=e.x,r=e.u,u=e.e,d=e.g,s=e._,o=e.o,_=e.d,p=e.m},e=>{c=e.k,v=e.a0,m=e.ae,g=e.r,b=e.a2,h=e.V,f=e.U,x=e.n,y=e.w,w=e.c,k=e.P,S=e.e,$=e.a3,j=e.W,P=e.l,L=e.j,E=e.a4,U=e.ak,R=e.v,W=e.S,A=e.an,q=e.R},e=>{C=e.u,V=e.g,B=e.a,D=e.c,H=e.b,z=e.d},e=>{F=e.d,M=e.m,I=e._},e=>{N=e.D},e=>{T=e.g},e=>{J=e.dV,O=e.dR,Q=e.dT,Z=e.dU,G=e.au,K=e.da,X=e.d8,Y=e._,ee=e.dj,le=e.e1,ae=e.aC,te=e.av,ie=e.dZ},e=>{ne=e._},e=>{re=e._},e=>{ue=e.o},e=>{de=e._},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){const l=c({__name:"index",props:{value:{},valueModifiers:{}},emits:["update:value"],setup(e){const l=C(),{phpVersion:a}=v(l),t=m(e,"value"),{loading:i,setLoading:r}=F(),u=g([]),d=e=>{a.value=e};return(async()=>{try{r(!0);const{message:e}=await T(),l=n(e)?e:[];u.value=l.reverse().filter(e=>"00"!==e.version).map(e=>({label:e.name,value:e.version})),await x(),l.length>0&&(t.value="00"==l[0].version?"":l[0].version,a.value="00"==l[0].version?"":l[0].version)}finally{r(!1)}})(),(e,l)=>{const a=J;return h(),b(a,{value:t.value,"onUpdate:value":[l[0]||(l[0]=e=>t.value=e),d],loading:f(i),options:f(u)},null,8,["value","loading","options"])}}}),se=c({__name:"index",props:{value:{},valueModifiers:{}},emits:["update:value"],setup(e){const l=C();y(()=>l.phpVersion,e=>{d(e)});const a=w(()=>l.phpVersion?"Not supported by current PHP":"Please select PHP version"),t=m(e,"value"),{loading:i,setLoading:r}=F(),u=g([]),d=async e=>{try{r(!0),t.value="";const{message:l}=await V({php_version_short:e});n(l)&&(u.value=l.map(e=>({label:e.version,value:e.version})),await x(),l.length>0&&(t.value=l[0].version))}finally{r(!1)}};return l.phpVersion&&d(l.phpVersion),(e,l)=>{const n=J;return h(),b(n,{value:t.value,"onUpdate:value":l[0]||(l[0]=e=>t.value=e),loading:f(i),options:f(u),placeholder:f(a)},null,8,["value","loading","options","placeholder"])}}}),oe={key:1},_e={class:"w-400px"},pe={class:"w-400px"},ce={class:"w-230px"},ve={class:"w-230px"},me={class:"w-400px"},ge={class:"w-230px mr-16px"},be={class:"w-400px"},he={class:"w-400px"},fe=c({__name:"index",props:{getList:{type:Function}},setup(e,{expose:a}){const n=e,{t:c}=k(),m=r(),{multiService:x}=v(m),y=C(),{mysql:V,php:D,webserver:H}=v(y),z=w(()=>"apache"===H.value&&!x.value),F=g(null),I=g(null),T=g([]),J=S({type:0,domain_auto:[""],domain:"",weblog_title:"",language:"en",php_version:null,wp_version:null,user_name:d(6),admin_password:u(16,"wp"),pw_weak:!1,admin_email:"",Login_url:"wp-admin",redirection_url:"404",prefix:"wp_"+d(6)+"_",enable_cache:!z.value,wps:!1,is_create_default_file:!0}),le={domain:{required:!0,trigger:["blur","input"],validator:()=>0!==J.type||""!==J.domain.trim()||new Error(c("Site.RulesError.index_31"))},domain_auto:{trigger:["blur"],validator:(e,l)=>!(1===J.type&&!l[0])||new Error(c("Site.PHP.add_site_23"))},weblog_title:{required:!0,trigger:["blur","input"],validator:()=>""!==J.weblog_title.trim()||new Error(c("Site.RulesError.index_3"))},language:{trigger:"change",validator:()=>null!==J.language||new Error(c("Site.RulesError.index_4"))},php_version:{trigger:"change",validator:()=>null!==J.php_version||new Error(c("Site.RulesError.index_5"))},wp_version:{trigger:"change",validator:()=>null!==J.php_version||new Error(c("Site.RulesError.index_6"))},user_name:{required:!0,trigger:["blur","input"],validator:()=>""!==J.user_name.trim()||new Error(c("Site.RulesError.index_7"))},admin_password:{required:!0,trigger:["blur","input"],validator:()=>""!==J.admin_password.trim()||new Error(c("Site.RulesError.index_8"))},admin_email:{required:!0,trigger:["blur","input"],validator:()=>""!==J.admin_email.trim()||new Error(c("Site.RulesError.index_9"))},redirection_url:{required:!0,trigger:["blur","input"],validator:()=>""!==J.redirection_url.trim()||new Error(c("Site.RulesError.index_12"))},Login_url:{required:!0,trigger:["blur","input"],validator:()=>""!==J.Login_url.trim()||new Error(c("Site.RulesError.index_11"))},prefix:{required:!0,trigger:["blur","input"],validator:()=>""!==J.prefix.trim()||new Error(c("Site.RulesError.index_10"))}},ae=e=>{if(F.value?.restoreValidation(),!e)return void(J.domain=J.domain_auto[0]);const l=J.domain.trim();l!==J.domain_auto[0]&&(J.domain_auto=l?[l]:[""],J.domain_auto.forEach((e,l)=>I.value?.onDomainItemBlur(e,l)))},te=()=>{const{domain:e,php_version:l}=J,a=e.replace(new RegExp(/([-.])/g),"_");if(null===l)throw p.error(c("Site.RulesError.index_5")),new Error(c("Site.RulesError.index_5"));const t=T.value.map(e=>({domain:e.domain,hash:e.hash,support:[...e.auto?["auto"]:[],...e.ssl_cert?["ssl_cert"]:[],...e.cf_proxy?["cf_proxy"]:[]]}));return{webname:{domain:e,domainlist:[],count:0},type:"PHP",port:80,type_id:0,ftp:!1,sql:"MySQL",codeing:"utf8",set_ssl:0,force_ssl:0,project_type:"WP",path:y.sitePath+"/"+(0===J.type?e:J.domain_auto[0]),ps:a,version:l,datauser:"sql_"+a,datapassword:d(16),password:J.admin_password,pw_weak:J.pw_weak?"on":"off",email:J.admin_email,weblog_title:J.weblog_title,language:J.language,user_name:J.user_name,prefix:J.prefix,enable_cache:J.enable_cache?1:0,enable_whl:0,whl_page:J.Login_url?J.Login_url:null,whl_redirect_admin:J.redirection_url?J.redirection_url:null,package_version:J.wp_version,wp_parse_list:1===J.type&&t.length?JSON.stringify(t):null,is_create_default_file:J.is_create_default_file}},ie=()=>new Promise((e,l)=>{0===T.value.filter(e=>e.support.includes("auto")).length&&1===J.type?(p.error("This domain does not support automatic resolution, please choose manual resolution"),l(!1)):e(!0)});return a({onConfirm:async()=>{await ie(),await(F.value?.validate());const{message:e}=await B(te());_(e)&&n.getList()}}),(e,a)=>{const n=o,r=Z,u=Q,d=s,_=O,p=G,c=X,v=K,m=Y,g=ee,x=i,y=t;return h(),b(y,{install:f(V).setup&&f(D).setup},{desc:$(()=>[W("span",null,E(e.$t("WP.index_6")),1),f(D).setup?A("",!0):(h(),b(n,{key:0,class:"ml-4px",onClick:a[0]||(a[0]=e=>f(M)("php-8.0"))},{default:$(()=>[L(E(e.$t("WP.index_7")),1)]),_:1})),f(V).setup?A("",!0):(h(),q("span",oe,[a[17]||(a[17]=W("span",{class:"mx-4px"},"|",-1)),j(n,{onClick:a[1]||(a[1]=e=>f(M)("mysql"))},{default:$(()=>[L(E(e.$t("WP.index_8")),1)]),_:1})]))]),default:$(()=>[j(x,{ref_key:"formRef",ref:F,model:f(J),rules:le},{default:$(()=>[j(_,{label:e.$t("SSL.index_1")},{default:$(()=>[j(u,{value:f(J).type,"onUpdate:value":[a[2]||(a[2]=e=>f(J).type=e),ae]},{default:$(()=>[j(r,{value:0},{default:$(()=>[L(E(e.$t("SSL.index_2")),1)]),_:1}),j(r,{value:1},{default:$(()=>[L(E(e.$t("SSL.index_3")),1)]),_:1})]),_:1},8,["value"]),j(d,{name:"ssl-stars",size:22})]),_:1},8,["label"]),P(j(_,{label:e.$t("Site.Lable.index_1"),path:"domain_auto"},{default:$(()=>[j(N,{ref_key:"domainInputRef",ref:I,value:f(J).domain_auto,"onUpdate:value":a[3]||(a[3]=e=>f(J).domain_auto=e),"parse-list":f(T),"onUpdate:parseList":a[4]||(a[4]=e=>U(T)?T.value=e:null),is_wp:""},null,8,["value","parse-list"])]),_:1},8,["label"]),[[R,1===f(J).type]]),P(j(_,{label:e.$t("Site.Lable.index_1"),path:"domain"},{default:$(()=>[W("div",_e,[j(p,{value:f(J).domain,"onUpdate:value":a[5]||(a[5]=e=>f(J).domain=e),placeholder:e.$t("Site.Placeholder.index_12")},null,8,["value","placeholder"])])]),_:1},8,["label"]),[[R,0===f(J).type]]),j(_,{label:e.$t("Site.Lable.index_20"),path:"weblog_title"},{default:$(()=>[W("div",pe,[j(p,{value:f(J).weblog_title,"onUpdate:value":a[6]||(a[6]=e=>f(J).weblog_title=e),placeholder:e.$t("Site.Placeholder.index_13")},null,8,["value","placeholder"])])]),_:1},8,["label"]),j(_,{label:e.$t("Site.Lable.index_21"),path:"language"},{default:$(()=>[W("div",ce,[j(ne,{value:f(J).language,"onUpdate:value":a[7]||(a[7]=e=>f(J).language=e)},null,8,["value"])])]),_:1},8,["label"]),j(_,{label:e.$t("Site.Lable.index_22"),path:"php_version"},{default:$(()=>[W("div",ve,[j(l,{value:f(J).php_version,"onUpdate:value":a[8]||(a[8]=e=>f(J).php_version=e)},null,8,["value"])])]),_:1},8,["label"]),j(_,{label:e.$t("Site.Lable.index_23"),path:"wp_version"},{default:$(()=>[j(v,{class:"items-center",size:8},{default:$(()=>[j(se,{value:f(J).wp_version,"onUpdate:value":a[9]||(a[9]=e=>f(J).wp_version=e),class:"w-230px"},null,8,["value"]),j(c,{trigger:"hover"},{trigger:$(()=>[j(d,{name:"common-ask",size:"18",color:"#999"})]),default:$(()=>[L(" "+E(e.$t("WP.Add.index_8")),1)]),_:1})]),_:1})]),_:1},8,["label"]),j(_,{label:e.$t("Site.Lable.index_24"),path:"user_name"},{default:$(()=>[W("div",me,[j(p,{value:f(J).user_name,"onUpdate:value":a[10]||(a[10]=e=>f(J).user_name=e),placeholder:e.$t("Site.Placeholder.index_14")},null,8,["value","placeholder"])])]),_:1},8,["label"]),j(_,{label:e.$t("Site.Lable.index_27"),path:"admin_password"},{default:$(()=>[W("div",ge,[j(p,{value:f(J).admin_password,"onUpdate:value":a[11]||(a[11]=e=>f(J).admin_password=e),placeholder:e.$t("Site.Placeholder.index_15")},null,8,["value","placeholder"])]),j(m,{checked:f(J).pw_weak,"onUpdate:checked":a[12]||(a[12]=e=>f(J).pw_weak=e)},{default:$(()=>[W("span",null,E(e.$t("WP.Add.index_9")),1)]),_:1},8,["checked"])]),_:1},8,["label"]),j(_,{label:e.$t("Site.Lable.index_28"),path:"admin_email"},{default:$(()=>[W("div",be,[j(p,{value:f(J).admin_email,"onUpdate:value":a[13]||(a[13]=e=>f(J).admin_email=e),placeholder:e.$t("Site.Placeholder.index_16")},null,8,["value","placeholder"])])]),_:1},8,["label"]),j(_,{label:e.$t("Site.Lable.index_29"),path:"prefix"},{default:$(()=>[W("div",he,[j(p,{value:f(J).prefix,"onUpdate:value":a[14]||(a[14]=e=>f(J).prefix=e),placeholder:e.$t("Site.Placeholder.index_17")},null,8,["value","placeholder"])])]),_:1},8,["label"]),j(_,{label:e.$t("Site.Lable.index_31"),"show-feedback":!1},{default:$(()=>[j(m,{checked:f(J).enable_cache,"onUpdate:checked":a[15]||(a[15]=e=>f(J).enable_cache=e),disabled:f(z)},{default:$(()=>a[18]||(a[18]=[W("span",null,"Enable cache, Apache is not supported under single service",-1)])),_:1,__:[18]},8,["checked","disabled"])]),_:1},8,["label"]),j(_,{label:e.$t("SSL.SiteSSL.index_18")},{default:$(()=>[j(g,{value:f(J).is_create_default_file,"onUpdate:value":a[16]||(a[16]=e=>f(J).is_create_default_file=e)},null,8,["value"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["install"])}}}),xe={key:1},ye={class:"w-302px ml-12px"},we={class:"w-302px ml-12px"},ke={class:"w-400px"},Se={class:"w-230px"},$e=c({__name:"index",props:{getList:{type:Function}},setup(e,{expose:a}){const{t:n}=k(),r=C(),{web:u,mysql:d,php:s}=v(r),_=e,p=g(null),c=g(null),m=g(null),x=S({method:1,bak_file:"",domain:"",sub_path:"",php_version:null,enable_cache:!1,db_bak_file:""}),y={bak_file:{trigger:["blur","input"],validator:()=>""!==x.bak_file.trim()||new Error(n("WP.Add.import_6"))},domain:{trigger:["blur","input"],validator:()=>""!==x.domain.trim()||new Error(n("Site.RulesError.index_31"))},php_version:{trigger:"change",validator:()=>null!==x.php_version||new Error(n("Site.RulesError.index_5"))},db_bak_file:{trigger:["blur","input"],validator:()=>""!==x.db_bak_file.trim()||new Error(n("WP.Add.import_6"))}},P=w(()=>x.domain?`/${x.domain}/`:"/"),R=e=>{const l="/www/server/panel/temp";ue({path:l,uploadData:{multiple:!1},onUploadSuccess:a=>{"wp"===e?(x.bak_file=`${l}/${a[0].name}`,V()):"db"===e&&(x.db_bak_file=`${l}/${a[0].name}`,B())}})},V=()=>{c.value?.restoreValidation()},B=()=>{m.value?.restoreValidation()};return a({onConfirm:async()=>{await(p.value?.validate());const e=3===x.method?{db_bak_file:x.db_bak_file,bak_file:x.bak_file,domain:x.domain,sub_path:x.sub_path,php_ver_short:x.php_version||"",enable_cache:x.enable_cache?1:0}:{bak_file:x.bak_file,domain:x.domain,sub_path:x.sub_path,php_ver_short:x.php_version||"",enable_cache:x.enable_cache?1:0};1===x.method?await D(e):2===x.method?await H(e):3===x.method&&await z(e),_.getList()}}),(e,a)=>{const n=o,_=le,v=Q,g=O,w=ae,k=re,S=G,C=ie,D=te,H=Y,z=i,F=I,N=t;return h(),b(N,{install:f(d).setup&&f(s).setup},{desc:$(()=>[W("span",null,E(e.$t("WP.index_6")),1),f(s).setup?A("",!0):(h(),b(n,{key:0,class:"ml-4px",onClick:a[0]||(a[0]=e=>f(M)("php-8.0"))},{default:$(()=>[L(E(e.$t("WP.index_7")),1)]),_:1})),f(d).setup?A("",!0):(h(),q("span",xe,[a[12]||(a[12]=W("span",{class:"mx-4px"},"|",-1)),j(n,{onClick:a[1]||(a[1]=e=>f(M)("mysql"))},{default:$(()=>[L(E(e.$t("WP.index_8")),1)]),_:1})]))]),default:$(()=>[j(z,{ref_key:"formRef",ref:p,modelValue:f(x),"onUpdate:modelValue":a[11]||(a[11]=e=>U(x)?x.value=e:null),rules:y},{default:$(()=>[j(g,{label:e.$t("WP.Add.import_1")},{default:$(()=>[j(v,{value:f(x).method,"onUpdate:value":a[2]||(a[2]=e=>f(x).method=e)},{default:$(()=>[j(_,{label:e.$t("WP.Add.import_2"),value:1},null,8,["label"]),j(_,{label:e.$t("WP.Add.import_3"),value:2},null,8,["label"]),j(_,{label:"Manual Backup",value:3})]),_:1},8,["value"])]),_:1},8,["label"]),j(g,{ref_key:"bakFileRef",ref:c,label:"WP backup file",path:"bak_file"},{default:$(()=>[j(w,{onClick:a[3]||(a[3]=e=>R("wp"))},{default:$(()=>[L(E(e.$t("Docker.App.Backup.index_3")),1)]),_:1}),W("div",ye,[j(k,{value:f(x).bak_file,"onUpdate:value":a[4]||(a[4]=e=>f(x).bak_file=e),"default-path":"/www/backup/wordpress","checked-type":["file"],onChange:V},null,8,["value"])])]),_:1},512),3===f(x).method?(h(),b(g,{key:0,ref_key:"dbBakFileRef",ref:m,label:"DB backup file",path:"db_bak_file"},{default:$(()=>[j(w,{onClick:a[5]||(a[5]=e=>R("db"))},{default:$(()=>[L(E(e.$t("Docker.App.Backup.index_3")),1)]),_:1}),W("div",we,[j(k,{value:f(x).db_bak_file,"onUpdate:value":a[6]||(a[6]=e=>f(x).db_bak_file=e),"default-path":"/www/backup/wordpress","checked-type":["file"],onChange:B},null,8,["value"])])]),_:1},512)):A("",!0),j(g,{label:e.$t("Site.Lable.index_1"),path:"domain"},{default:$(()=>[W("div",ke,[j(S,{value:f(x).domain,"onUpdate:value":a[7]||(a[7]=e=>f(x).domain=e),placeholder:e.$t("Site.Placeholder.index_12")},null,8,["value","placeholder"])])]),_:1},8,["label"]),j(g,{label:e.$t("Site.PHP.add_site_9"),path:"path"},{default:$(()=>[j(D,{class:"w-400px"},{default:$(()=>[j(C,null,{default:$(()=>[L(E(f(r).sitePath)+E(f(P)),1)]),_:1}),j(S,{value:f(x).sub_path,"onUpdate:value":a[8]||(a[8]=e=>f(x).sub_path=e),placeholder:e.$t("WP.Add.import_5")},null,8,["value","placeholder"])]),_:1})]),_:1},8,["label"]),j(g,{label:e.$t("Site.Lable.index_22"),path:"php_version"},{default:$(()=>[W("div",Se,[j(l,{value:f(x).php_version,"onUpdate:value":a[9]||(a[9]=e=>f(x).php_version=e)},null,8,["value"])])]),_:1},8,["label"]),j(g,{label:e.$t("Site.Lable.index_31"),"show-feedback":!1},{default:$(()=>[j(H,{checked:f(x).enable_cache,"onUpdate:checked":a[10]||(a[10]=e=>f(x).enable_cache=e),disabled:"nginx"!==f(u).type},{default:$(()=>[L(E(e.$t("WP.Add.index_10")),1)]),_:1},8,["checked","disabled"])]),_:1},8,["label"])]),_:1},8,["modelValue"]),3===f(x).method?(h(),b(F,{key:0},{default:$(()=>a[13]||(a[13]=[W("li",null," Manual backup deployment relies on the wp-config.php file, please ensure that it exists and is configured correctly. ",-1)])),_:1,__:[13]})):A("",!0)]),_:1},8,["install"])}}}),je={class:"p-20px h-full"};e("default",c({__name:"index",props:{done:{type:Function}},setup(e,{expose:l}){const{t:t}=k(),i=e,n=g("single"),r=g(),u=[{key:"single",label:t("WP.Add.index_1"),isLazy:!0,component:fe,data:{getList:i.done}},{key:"import",label:t("WP.Add.index_2"),isLazy:!0,component:$e,data:{getList:i.done}}];return l({onConfirm:async()=>{await(r.value?.onConfirm())}}),(e,l)=>{const t=a;return h(),b(de,{title:e.$t("WP.Add.index_7"),params:"backup_deploy"},{default:$(()=>[W("div",je,[j(t,{ref_key:"tabsRef",ref:r,value:f(n),"onUpdate:value":l[0]||(l[0]=e=>U(n)?n.value=e:null),options:u},null,8,["value"])])]),_:1},8,["title"])}}}))}}});
