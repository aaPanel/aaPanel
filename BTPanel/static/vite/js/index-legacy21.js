System.register(["./page_layout-legacy.js?v=1764830988434","./index-legacy.js?v=1764830988434","./index.vue_vue_type_script_setup_true_lang-legacy5.js?v=1764830988434","./index.vue_vue_type_script_setup_true_lang-legacy7.js?v=1764830988434","./index.vue_vue_type_script_setup_true_lang-legacy9.js?v=1764830988434","./public-legacy.js?v=1764830988434","./index.vue_vue_type_script_setup_true_lang-legacy8.js?v=1764830988434","./index-legacy131.js?v=1764830988434","./index-legacy132.js?v=1764830988434","./vue-legacy.js?v=1764830988434","./hooks-legacy.js?v=1764830988434","./naive-legacy.js?v=1764830988434","./common-legacy.js?v=1764830988434","./__commonjsHelpers__-legacy.js?v=1764830988434","./index.vue_vue_type_script_setup_true_lang-legacy6.js?v=1764830988434","./php-legacy.js?v=1764830988434","./soft-legacy.js?v=1764830988434","./site-legacy.js?v=1764830988434","./index-legacy133.js?v=1764830988434"],function(e,a){"use strict";var t,n,s,l,i,o,d,c,u,r,p,_,h,y,m,b,w,g,x,k,v,f,D,j,C,U,R,$,q,W,S,z,B,L,M,P,O,I,K,N,H,Q,V,A,E,F,G,J,T,X,Y,Z,ee,ae,te,ne,se,le,ie,oe,de,ce,ue,re,pe,_e;return{setters:[e=>{t=e.o,n=e._,s=e.aM,l=e.aN,i=e.d,o=e.aL,d=e.aO,c=e.aP,u=e.aQ,r=e.x,p=e.y,_=e.a,h=e.m,y=e.aR},e=>{m=e._},e=>{b=e._},e=>{w=e._},e=>{g=e._},e=>{x=e.s,k=e.d,v=e.e,f=e.c,D=e.t,j=e.v,C=e.f,U=e.a,R=e.h,$=e.w},e=>{q=e._},e=>{W=e._},e=>{S=e.u,z=e.a,B=e.b,L=e.c,M=e._,P=e.d,O=e.e,I=e.f,K=e.g},e=>{N=e.W,H=e.P,Q=e.ab,V=e.j,A=e.u,E=e.k,F=e.r,G=e.am,J=e.a2,T=e.V,X=e.a3,Y=e.R,Z=e.a4,ee=e.U,ae=e.ak,te=e.e,ne=e.w,se=e.S,le=e.an,ie=e._,oe=e.N},e=>{de=e.g},e=>{ce=e.dk,ue=e.dj,re=e.da,pe=e.dS,_e=e.aC},null,null,null,null,null,null,null],execute:function(){const he=({row:e})=>{if(e.password)return N(x,{value:e.password},null);const{t:a}=H();return N("div",{class:"text-desc cursor-pointer",onClick:()=>{B(e)}},[N(Q,{keypath:"Database.index_15.index_1",tag:"span",scope:"global"},{error:()=>N("span",{class:"text-error"},[a("Database.index_15.index_2")])})])},ye=({row:e})=>{let a;const{t:n}=H();return N("div",{class:"flex items-center"},[N(t,{type:e.backup_count>0?"primary":"warning",class:"backup-btn",onClick:()=>{S(e)}},{default:()=>[e.backup_count>0?n("Database.index_17",[e.backup_count]):n("Database.index_18")]}),N("span",{class:"mx-4px"},[V("|")]),N(t,{onClick:()=>{z(e,"mysql")}},(s=a=n("Public.Btn.Import"),"function"==typeof s||"[object Object]"===Object.prototype.toString.call(s)&&!A(s)?a:{default:()=>[a]}))]);var s},me={key:1},be=E({__name:"index",setup(e){const a=F(!1),o=G(),d=()=>{o.push("/crontab/task")},c=async e=>{try{await s({name:"mysql",status:e?1:0})}catch{a.value=!e}},{loading:u,setLoading:r}=k();return(async()=>{try{r(!0);const{message:e}=await l({name:"mysql"});i(e)&&(a.value=!!e.status)}finally{r(!1)}})(),(e,s)=>{const l=n,i=ue,o=t,r=re,p=ce;return T(),J(p,{"show-icon":!1,closable:!1},{default:X(()=>[N(r,{class:"h-24px items-center"},{default:X(()=>[N(l,{name:"base-info",size:"18"}),V(" "+Z(e.$t("Database.Mysql.index_1")),1),N(i,{size:"small",loading:ee(u),value:ee(a),"onUpdate:value":[s[0]||(s[0]=e=>ae(a)?a.value=e:null),c]},null,8,["loading","value"]),ee(a)?(T(),J(o,{key:0,onClick:d},{default:X(()=>[V("["+Z(e.$t("Database.index_7.index_2"))+"]",1)]),_:1})):(T(),Y("span",me,Z(e.$t("Database.Mysql.index_2")),1))]),_:1})]),_:1})}}}),we={class:"p-16px"};e("default",E({__name:"index",setup(e){const t=ie(()=>_(()=>a.import("./index-legacy126.js?v=1764830988434"),void 0)),n=ie(()=>_(()=>a.import("./index-legacy127.js?v=1764830988434"),void 0)),s=ie(()=>_(()=>a.import("./index-legacy128.js?v=1764830988434"),void 0)),l=ie(()=>_(()=>a.import("./index-legacy129.js?v=1764830988434"),void 0)),x=ie(()=>_(()=>a.import("./index-legacy130.js?v=1764830988434").then(e=>e.i),void 0)),{t:S}=H(),z=o(),Q=F(!1),A=v(),E=v(S("Database.index_3"),{row:void 0}),G=()=>{A.show=!0},Y=()=>{I()},ce=e=>{z.phpmyadmin.setup?(e?(E.data.row=e,E.title=S("Database.index_8",[e.name])):(E.data.row=void 0,E.title=S("Database.index_3")),E.show=!0):h.error(S("Database.index_9"))},ue=()=>{K()},re=v(S("Database.Mysql.index_3")),me=v(),ge=v(),xe=async()=>{await c(z.type,{ids:[]}),Re()},{keys:ke,table:ve,columns:fe}=f([{type:"selection",width:40},{key:"name",title:S("Database.index_12"),width:"10%",minWidth:100,ellipsis:{tooltip:{width:"trigger"}}},{key:"username",title:S("Database.index_13"),width:"10%",minWidth:100,ellipsis:{tooltip:{width:"trigger"}}},{key:"password",title:S("Database.index_14"),width:"10%",minWidth:120,render:e=>N(he,{row:e},null)},D({type:"database",width:"5%",maxWidth:60,callback:()=>{Re()}}),{key:"backup_count",title:S("Database.index_16"),width:"10%",minWidth:120,render:e=>N(ye,{row:e},null)},{key:"sid",title:S("Database.index_19"),width:"8%",minWidth:80,ellipsis:{tooltip:!0},render:e=>de(e)},j({minWidth:90,onBlur:async(e,a)=>{await y({id:a.id,ps:e})}}),C({width:"30%",minWidth:280,options:e=>[{label:S("Database.index_20"),show:0===e.db_type,onClick:()=>{ce(e)}},{label:S("Database.index_21"),class:"permission-btn",onClick:()=>{(e=>{ge.data.row=e,ge.title=S("Database.index_11",[e.name]),ge.show=!0})(e)}},{label:S("Database.index_22"),class:"tools-btn",onClick:()=>{(e=>{me.data.row=e,me.title=S("Database.index_10",[e.name]),me.show=!0})(e)}},{label:S("Database.index_23"),class:"change-btn",onClick:()=>{B(e)}},{label:S("Public.Btn.Del"),class:"delete-btn",onClick:()=>{L([e])}}]})]),De=[{key:"sync",label:S("Database.index_24"),onBatch:e=>{U({title:S("Database.index_25"),content:S("Database.index_26"),onConfirm:async()=>{await c(z.type,{ids:e.map(e=>e.id)})}})}},{key:"backup",type:"confirm",label:S("Database.index_27"),confirm:{title:S("Database.index_28"),desc:S("Database.index_29"),api:e=>d(z.type,{id:e.id},!1),done:()=>{Re()},columns:[{key:"name",title:S("Database.index_12")}]}},{key:"delete",label:S("Database.index_30"),onBatch:e=>{L(e)}}],{loading:je,setLoading:Ce}=k(!0),Ue=te({p:1,limit:20,sid:-1,search:""}),Re=async()=>{try{Ce(!0);const{message:e}=await u((()=>{const e={...oe(Ue)};return-1===e.sid&&delete e.sid,e})());i(e)?(ve.data=r(e.data)?e.data:[],ve.total=p(e.page)):(ve.data=[],ve.total=0)}finally{ke.value=[],Ce(!1)}};return ne(()=>z.isRefresh,e=>{e&&(z.setRefresh(!1),z.delRemoteId===Ue.sid&&(Ue.sid=-1),Re())}),(async()=>{try{await z.getRemote(),z.install?(Q.value=!0,Re()):(Q.value=!1,$())}finally{Ce(!1)}})(),(e,a)=>{const i=_e,o=W,d=q,c=R,u=g,r=w,p=b,_=m,h=pe;return T(),J(ee(O),null,{default:X(()=>[N(h,null,{default:X(()=>[se("div",we,[N(be),N(p,{class:"mt-16px",feedback:!0},{toolsLeft:X(()=>[N(i,{class:"add-db-btn",type:"primary",onClick:G},{default:X(()=>[V(Z(e.$t("Database.index_1")),1)]),_:1}),N(i,{class:"set-root-btn",onClick:Y},{default:X(()=>[V(Z(e.$t("Database.index_2")),1)]),_:1}),N(i,{onClick:a[0]||(a[0]=e=>ce())},{default:X(()=>[V(Z(e.$t("Database.index_3")),1)]),_:1}),N(i,{onClick:ue},{default:X(()=>[V(Z(e.$t("Database.index_4")),1)]),_:1}),N(i,{onClick:a[1]||(a[1]=e=>ee(re).show=!0)},{default:X(()=>[V(Z(e.$t("Database.Mysql.index_3")),1)]),_:1}),N(i,{onClick:xe},{default:X(()=>[V(Z(e.$t("Database.index_5")),1)]),_:1}),N(i,{onClick:ee(P)},{default:X(()=>[V(Z(e.$t("Database.index_6")),1)]),_:1},8,["onClick"]),ee(Q)?(T(),J(o,{key:0,"soft-name":"mysql"})):le("",!0)]),toolsRight:X(()=>[N(ee(M),{ref:"remoteRef",value:ee(Ue).sid,"onUpdate:value":a[2]||(a[2]=e=>ee(Ue).sid=e),"store-key":"mysql-remote",onChange:Re},null,8,["value"]),N(d,{value:ee(Ue).search,"onUpdate:value":a[3]||(a[3]=e=>ee(Ue).search=e),placeholder:e.$t("Database.mongo.index_3"),width:"180",onSearch:Re},null,8,["value","placeholder"])]),table:X(()=>[N(c,{"checked-row-keys":ee(ke),"onUpdate:checkedRowKeys":a[4]||(a[4]=e=>ae(ke)?ke.value=e:null),loading:ee(je),data:ee(ve).data,columns:ee(fe)},null,8,["checked-row-keys","loading","data","columns"])]),pageLeft:X(()=>[N(u,{"checked-row-keys":ee(ke),"onUpdate:checkedRowKeys":a[5]||(a[5]=e=>ae(ke)?ke.value=e:null),data:ee(ve).data,options:De},null,8,["checked-row-keys","data"])]),pageRight:X(()=>[N(r,{page:ee(Ue).p,"onUpdate:page":a[6]||(a[6]=e=>ee(Ue).p=e),"page-size":ee(Ue).limit,"onUpdate:pageSize":a[7]||(a[7]=e=>ee(Ue).limit=e),"store-key":"database-mysql-page","item-count":ee(ve).total,onRefresh:Re},null,8,["page","page-size","item-count"])]),_:1}),N(_,{show:ee(A).show,"onUpdate:show":a[8]||(a[8]=e=>ee(A).show=e),title:e.$t("Database.mongo.index_4"),width:540,"min-height":334,footer:!0,component:ee(t)},null,8,["show","title","component"]),N(_,{show:ee(E).show,"onUpdate:show":a[9]||(a[9]=e=>ee(E).show=e),title:ee(E).title,data:ee(E).data,width:740,height:580,component:ee(n)},null,8,["show","title","data","component"]),N(_,{show:ee(ge).show,"onUpdate:show":a[10]||(a[10]=e=>ee(ge).show=e),data:ee(ge).data,title:ee(ge).title,width:480,"min-height":132,footer:!0,component:ee(l)},null,8,["show","data","title","component"]),N(_,{show:ee(me).show,"onUpdate:show":a[11]||(a[11]=e=>ee(me).show=e),data:ee(me).data,title:ee(me).title,width:870,"min-height":359,component:ee(s)},null,8,["show","data","title","component"]),N(_,{show:ee(re).show,"onUpdate:show":a[12]||(a[12]=e=>ee(re).show=e),title:ee(re).title,width:850,"min-height":600,component:ee(x)},null,8,["show","title","component"])])]),_:1})]),_:1})}}}))}}});
