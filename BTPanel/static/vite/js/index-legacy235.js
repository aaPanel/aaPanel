System.register(["./page_layout-legacy.js?v=1763625242172","./index-legacy245.js?v=1763625242172","./vue-legacy.js?v=1763625242172","./index-legacy238.js?v=1763625242172","./index.vue_vue_type_script_setup_true_lang-legacy5.js?v=1763625242172","./index.vue_vue_type_script_setup_true_lang-legacy12.js?v=1763625242172","./public-legacy.js?v=1763625242172","./index-legacy99.js?v=1763625242172","./site-legacy.js?v=1763625242172","./naive-legacy.js?v=1763625242172","./index-legacy107.js?v=1763625242172","./index.vue_vue_type_script_setup_true_lang-legacy.js?v=1763625242172","./index.vue_vue_type_script_setup_true_lang-legacy10.js?v=1763625242172","./index-legacy.js?v=1763625242172","./php-legacy.js?v=1763625242172","./index-legacy100.js?v=1763625242172","./index-legacy132.js?v=1763625242172","./refersh-legacy.js?v=1763625242172","./form.vue_vue_type_script_setup_true_lang-legacy2.js?v=1763625242172","./index-legacy104.js?v=1763625242172","./logs.vue_vue_type_script_setup_true_lang-legacy.js?v=1763625242172","./ssl-legacy.js?v=1763625242172","./cert-legacy.js?v=1763625242172","./ssl-lets-progress-legacy.js?v=1763625242172","./utils-legacy3.js?v=1763625242172","./index-legacy217.js?v=1763625242172","./upload-legacy.js?v=1763625242172","./soft-legacy.js?v=1763625242172","./index-legacy98.js?v=1763625242172","./git-ps-legacy.js?v=1763625242172"],(function(e,t){"use strict";var a,l,i,n,s,o,d,r,u,c,p,_,m,v,f,h,x,y,g,b,w,S,k,C,$,P,L,U,R,E,B,T,j,N,D,W,I,O,H,A,z,M,q,F,J,K,V,X,G,Y,Z,Q,ee,te,ae,le,ie,ne,se,oe,de,re,ue,ce,pe,_e,me,ve,fe,he,xe,ye,ge,be,we,Se,ke,Ce,$e,Pe,Le,Ue,Re,Ee,Be,Te,je,Ne,De,We,Ie,Oe,He,Ae,ze,Me,qe,Fe,Je,Ke,Ve,Xe,Ge,Ye,Ze,Qe,et,tt,at,lt,it,nt,st,ot,dt,rt,ut,ct,pt,_t,mt,vt,ft,ht,xt,yt,gt,bt,wt,St,kt,Ct,$t,Pt,Lt,Ut,Rt,Et,Bt,Tt,jt,Nt,Dt,Wt,It,Ot,Ht,At,zt,Mt,qt,Ft,Jt,Kt,Vt,Xt,Gt,Yt,Zt,Qt,ea,ta,aa,la,ia,na,sa,oa,da,ra,ua,ca,pa,_a,ma,va,fa,ha,xa,ya,ga,ba,wa,Sa,ka,Ca,$a,Pa,La,Ua,Ra,Ea,Ba,Ta,ja,Na,Da,Wa,Ia,Oa,Ha,Aa,za,Ma,qa,Fa,Ja,Ka,Va,Xa,Ga,Ya,Za,Qa,el,tl,al,ll;return{setters:[e=>{a=e.i,l=e.o,i=e.x,n=e.m,s=e.q,o=e.c,d=e.a,r=e.bj,u=e.h,c=e.u,p=e.aY,_=e.p,m=e.e0,v=e.g,f=e.d$,h=e.T,x=e.e2,y=e.e3,g=e.e4,b=e.cx,w=e._,S=e.du,k=e.dv,C=e.dw,$=e.e6,P=e.e7,L=e.am,U=e.dx,R=e.a6},e=>{E=e._},e=>{B=e.p,T=e.i,j=e.X,N=e.k,D=e.P,W=e.r,I=e.R,O=e.S,H=e.U,A=e.a3,z=e.a4,M=e.V,q=e.aj,F=e.j,J=e.e,K=e.F,V=e.an,X=e._,G=e.a2,Y=e.n,Z=e.N,Q=e.a0,ee=e.o,te=e.ay,ae=e.l,le=e.v,ie=e.O,ne=e.c,se=e.y,oe=e.H,de=e.am,re=e.w,ue=e.m,ce=e.x,pe=e.u},e=>{_e=e.u},e=>{me=e._},e=>{ve=e._},e=>{fe=e.a,he=e.R,xe=e.c,ye=e.d,ge=e.h,be=e.e,we=e.f,Se=e._,ke=e.b,Ce=e.r,$e=e.u,Pe=e.l,Le=e.U,Ue=e.V,Re=e.W,Ee=e.p,Be=e.i},e=>{Te=e._},e=>{je=e.a2,Ne=e.a3,De=e.a4,We=e.a5,Ie=e.a6,Oe=e.a7,He=e.a8,Ae=e.a9,ze=e.aa,Me=e.ab,qe=e.ac,Fe=e.aU,Je=e.aV,Ke=e.aW,Ve=e.aX,Xe=e.aY,Ge=e.ay,Ye=e.az,Ze=e.aA,Qe=e.aB,et=e.aC,tt=e.aD,at=e.aE,lt=e.aF,it=e.aq,nt=e.ar,st=e.as,ot=e.aZ,dt=e.a_,rt=e.at,ut=e.au,ct=e.av,pt=e.g,_t=e.aw,mt=e.ax,vt=e.a1,ft=e.a0,ht=e.a$,xt=e.b0,yt=e.b1,gt=e.b2,bt=e.b3,wt=e.b4,St=e.b5,kt=e.ad,Ct=e.ae,$t=e.af,Pt=e.ag,Lt=e.ah,Ut=e.ai,Rt=e.aj,Et=e.ak,Bt=e.al,Tt=e.am,jt=e.an,Nt=e.ao,Dt=e.ap,Wt=e.aH,It=e.aI,Ot=e.aJ,Ht=e.a,At=e.aK},e=>{zt=e.aC,Mt=e.d9,qt=e.dP,Ft=e.dV,Jt=e.dj,Kt=e.au,Vt=e.d5,Xt=e._,Gt=e.df,Yt=e.dk,Zt=e.eg,Qt=e.dY,ea=e.az,ta=e.bH,aa=e.e2,la=e.dc,ia=e.dU,na=e.dT,sa=e.H,oa=e.dZ,da=e.aZ,ra=e.dS,ua=e.dh,ca=e.dd},e=>{pa=e._},e=>{_a=e._},e=>{ma=e._},e=>{va=e._},e=>{fa=e.d,ha=e.e,xa=e.f,ya=e.m,ga=e.n,ba=e.h,wa=e.i,Sa=e.o,ka=e.p,Ca=e.q,$a=e.r,Pa=e.u,La=e.t,Ua=e.v,Ra=e.w,Ea=e.x,Ba=e.y,Ta=e.z,ja=e.A,e.B,Na=e.C,Da=e.D},e=>{Wa=e.default},e=>{Ia=e._},e=>{Oa=e._,Ha=e.a,Aa=e.b},e=>{za=e._},e=>{Ma=e._},e=>{qa=e._},e=>{Fa=e.c,Ja=e.s,Ka=e.a,Va=e.g,Xa=e.b},e=>{Ga=e.C},e=>{Ya=e.a},e=>{Za=e.u},e=>{Qa=e.A},e=>{el=e.o},e=>{tl=e.a},e=>{al=e._},e=>{ll=e.g}],execute:function(){var il=document.createElement("style");il.textContent=".warning[data-v-d159b1c0]{padding:8px;border-radius:4px;background-color:#fdf6ec;color:#e6a23c}.n-alert[data-v-1cb405f3]{--n-font-size: 12px}.cert-info[data-v-1cb405f3]{display:flex;align-items:center;height:24px}.cert-info .cert-label[data-v-1cb405f3]{color:var(--site-config-ssl-label);font-weight:700}.cert-info .cert-value[data-v-1cb405f3]{flex:1;width:0;margin-left:4px}.business-top-tips[data-v-77483f61]{background:var(--site-config-business-tips)}.n-alert[data-v-ec2f03c1]{--n-font-size: 12px}.cert-info[data-v-ec2f03c1]{display:flex;align-items:center;height:24px}.cert-info .cert-label[data-v-ec2f03c1]{color:var(--site-config-ssl-label);font-weight:700}.cert-info .cert-value[data-v-ec2f03c1]{flex:1;width:0;margin-left:4px}.tips[data-v-ce54d9d9]{margin-left:10px;--un-text-opacity:1;color:rgb(102 102 102 / var(--un-text-opacity))}[data-v-e468c3da] .n-alert .n-alert-body{--n-padding: 5px 8px}\n",document.head.appendChild(il),e("u",sl);const nl=Symbol("site-config");function sl(){return T(nl)}const{t:ol}=a.global;function dl(){return{key:"name",title:ol("Site.TableRow.index_19"),render:e=>j(l,{href:`http://${e.name}:${e.port}`,target:"_blank"},{default:()=>[e.name]})}}function rl(){return{key:"port",title:ol("Site.TableRow.index_16"),width:100}}function ul(){return{key:"action",title:ol("Public.Table.Action"),width:80,align:"right",render:()=>j("span",{class:"text-default"},[ol("Config.Panel.index_82")])}}function cl({delDomain:e}){return{key:"action",title:ol("Public.Table.Action"),width:80,align:"right",render:t=>j(he,{options:[{label:ol("Public.Btn.Del"),class:"delete-btn",onClick:()=>{fe({title:`${ol("Site.Batch.index_12")}[${t.name}]`,content:ol("Site.Batch.index_13"),onConfirm:async({hide:a})=>{await e(t),a()}})}}]},null)}}const pl={class:"flex justify-between items-center mb-24px"},_l={class:"w-400px"},ml={class:"pr-40px"},vl=N({__name:"index",setup(e,{expose:t}){const{t:a}=D(),{data:l}=sl(),s=W(""),o=async()=>{""!==s.value.trim()?(await De({id:l.id,webname:l.name,domain:s.value.trim().split("\n").join(",")}),s.value="",v()):n.error(a("Site.RulesError.index_31"))},d=async e=>{await je({id:l.id,webname:l.name,domain:e.name,port:e.port}),v()},{keys:r,table:u,columns:c}=xe([{type:"selection",width:40},dl(),rl(),cl({delDomain:d})]),p=[{key:"del",type:"confirm",label:a("Site.Batch.index_20"),confirm:{title:a("Site.Batch.index_21"),desc:a("Site.Batch.index_11"),api:e=>je({id:l.id,webname:l.name,domain:e.name,port:e.port},!1),done:()=>{v()},columns:[{key:"name",title:a("Site.Cert.index_29"),ellipsis:{tooltip:{width:"trigger"}}}]}}],{loading:_,setLoading:m}=ye(),v=async()=>{try{m(!0);const e={id:l.id},{message:t}=await Ne(e);u.data=i(t)?t:[],u.data.length>1?c.value[c.value.length-1]=cl({delDomain:d}):c.value[c.value.length-1]=ul()}finally{r.value=[],m(!1)}};return v(),t({init:v}),(e,t)=>{const a=Te,l=zt,i=ge,n=ve,d=me;return I(),O("div",null,[H("div",pl,[H("div",_l,[j(a,{value:M(s),"onUpdate:value":t[0]||(t[0]=e=>q(s)?s.value=e:null),name:"domain"},{default:A((()=>[H("p",null,z(e.$t("Site.Config.index_30")),1),H("p",null,z(e.$t("Site.Config.index_31")),1),H("p",null,z(e.$t("Site.Config.index_32")),1)])),_:1},8,["value"])]),H("div",ml,[j(l,{class:"add-domain-btn",type:"primary",onClick:o},{default:A((()=>[F(z(e.$t("Site.Cert.index_62")),1)])),_:1})])]),j(d,null,{table:A((()=>[j(i,{"checked-row-keys":M(r),"onUpdate:checkedRowKeys":t[1]||(t[1]=e=>q(r)?r.value=e:null),loading:M(_),"max-height":400,data:M(u).data,columns:M(c)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:A((()=>[j(n,{"checked-row-keys":M(r),"onUpdate:checkedRowKeys":t[2]||(t[2]=e=>q(r)?r.value=e:null),data:M(u).data,options:p},null,8,["checked-row-keys","data"])])),_:1})])}}}),fl={class:"pt-16px"},hl={class:"flex-1"},xl={class:"w-240px"},yl={class:"mt-8px text-desc"},gl={class:"flex-1"},bl={class:"w-240px"},wl={class:"mt-12px text-desc"},Sl={class:"my-16px"},kl={class:"text-desc"},Cl={class:"my-20px"},$l={class:"w-240px"},Pl={class:"w-240px"},Ll={class:"w-240px"},Ul=N({__name:"index",setup(e,{expose:t}){const{t:a}=D(),{data:l}=sl(),i=W(""),d=async()=>{if(""!==i.value.trim())try{await We({id:l.id,name:l.name,path:i.value}),g()}catch(e){console.warn(e)}else n.error(a("Site.RulesError.index_13"))},r=W(null),u=W([]),c=async()=>{null!==r.value?(await Ie({id:l.id,runPath:r.value}),g()):n.error(a("Site.RulesError.index_15"))},p=W(!1),_=async()=>{await Oe({id:l.id,path:l.path}),g()},m=W(!1),v=async()=>{await He({id:l.id}),g()},f=W(!1),h=J({username_get:"",password_get_1:"",password_get_2:""}),x=async e=>{e||(await Ae({id:l.id}),g())},y=async()=>{""!==h.username_get.trim()?""!==h.password_get_1.trim()?""!==h.password_get_2.trim()?h.username_get.trim().length<3||h.password_get_1.trim().length<3?n.error(a("Site.RulesError.index_35")):h.password_get_1.trim()===h.password_get_2.trim()?(await ze({id:l.id,username:h.username_get,password:h.password_get_1}),h.username_get="",h.password_get_1="",h.password_get_2="",g()):n.error(a("Site.RulesError.index_38")):n.error(a("Site.RulesError.index_37")):n.error(a("Site.RulesError.index_36")):n.error(a("Site.RulesError.index_34"))},g=()=>{(async()=>{const{message:e}=await Me({id:l.id});o(e)&&(i.value=e.result||"/www")})(),(async()=>{const{message:e}=await qe({id:l.id,path:l.path});if(o(e)){r.value=Vt(e,"runPath.runPath",null),p.value=Vt(e,"userini",!1),m.value=Vt(e,"logs.result",!1),f.value=Vt(e,"pass.result",!1);const t=Vt(e,"runPath.dirs",[]);u.value=t.map((e=>({label:e,value:e})))}})()};return g(),t({init:g}),(e,t)=>{const a=ma,l=zt,n=Mt,o=qt,g=Ft,b=s,w=Jt,S=Kt,k=_a;return I(),O("div",fl,[j(k,{"label-width":"140"},{default:A((()=>[j(o,{label:e.$t("Site.Lable.index_2"),"show-feedback":!1},{default:A((()=>[H("div",hl,[j(n,null,{default:A((()=>[H("div",xl,[j(a,{value:M(i),"onUpdate:value":t[0]||(t[0]=e=>q(i)?i.value=e:null),"input-props":{name:"directory"}},null,8,["value"])]),j(l,{class:"save-dir-btn",type:"primary",onClick:d},{default:A((()=>[F(z(e.$t("Site.Cert.index_60")),1)])),_:1})])),_:1}),H("div",yl,z(e.$t("Site.Config.index_35")),1)])])),_:1},8,["label"]),j(o,{class:"mt-16px",label:e.$t("Site.Lable.index_3"),"show-feedback":!1},{default:A((()=>[H("div",gl,[j(n,null,{default:A((()=>[H("div",bl,[j(g,{value:M(r),"onUpdate:value":t[1]||(t[1]=e=>q(r)?r.value=e:null),class:"run-select",options:M(u)},null,8,["value","options"])]),j(l,{class:"save-run-btn",type:"primary",onClick:c},{default:A((()=>[F(z(e.$t("Site.Cert.index_60")),1)])),_:1})])),_:1}),H("div",wl,z(e.$t("Site.Config.index_36")),1)])])),_:1},8,["label"]),H("div",Sl,[j(b,{dashed:""})]),j(o,{label:e.$t("Site.Lable.index_4"),"show-feedback":!1},{default:A((()=>[j(n,{class:"items-center"},{default:A((()=>[j(w,{value:M(p),"onUpdate:value":[t[2]||(t[2]=e=>q(p)?p.value=e:null),_]},null,8,["value"]),H("div",kl,z(e.$t("Site.Config.index_37")),1)])),_:1})])),_:1},8,["label"]),j(o,{class:"mt-16px",label:e.$t("Site.Lable.index_5"),"show-feedback":!1},{default:A((()=>[j(n,{class:"items-center"},{default:A((()=>[j(w,{value:M(m),"onUpdate:value":[t[3]||(t[3]=e=>q(m)?m.value=e:null),v]},null,8,["value"]),t[8]||(t[8]=H("div",{class:"text-desc"},null,-1))])),_:1,__:[8]})])),_:1},8,["label"]),H("div",Cl,[j(b,{dashed:""})]),j(o,{label:e.$t("Site.Lable.index_14"),"show-feedback":!1},{default:A((()=>[j(n,{class:"items-center"},{default:A((()=>[j(w,{value:M(f),"onUpdate:value":[t[4]||(t[4]=e=>q(f)?f.value=e:null),x]},null,8,["value"]),t[9]||(t[9]=H("div",{class:"text-desc"},null,-1))])),_:1,__:[9]})])),_:1},8,["label"]),M(f)?(I(),O(K,{key:0},[j(o,{class:"mt-16px",label:e.$t("Site.Lable.index_17"),"show-feedback":!1},{default:A((()=>[H("div",$l,[j(S,{value:M(h).username_get,"onUpdate:value":t[5]||(t[5]=e=>M(h).username_get=e),placeholder:e.$t("Site.Placeholder.Index_7")},null,8,["value","placeholder"])])])),_:1},8,["label"]),j(o,{class:"mt-16px",label:e.$t("Site.Lable.index_14"),"show-feedback":!1},{default:A((()=>[H("div",Pl,[j(S,{value:M(h).password_get_1,"onUpdate:value":t[6]||(t[6]=e=>M(h).password_get_1=e),type:"password",placeholder:e.$t("Site.Placeholder.Index_7")},null,8,["value","placeholder"])])])),_:1},8,["label"]),j(o,{class:"mt-16px",label:e.$t("Site.Lable.index_18"),"show-feedback":!1},{default:A((()=>[H("div",Ll,[j(S,{value:M(h).password_get_2,"onUpdate:value":t[7]||(t[7]=e=>M(h).password_get_2=e),type:"password",placeholder:e.$t("Site.Placeholder.Index_7")},null,8,["value","placeholder"])])])),_:1},8,["label"]),j(o,{class:"mt-16px",label:" ","show-feedback":!1},{default:A((()=>[j(l,{type:"primary",onClick:y},{default:A((()=>[F(z(e.$t("Site.Cert.index_60")),1)])),_:1})])),_:1})],64)):V("",!0)])),_:1})])}}}),Rl={class:"w-140px"},El={class:"w-120px"},Bl=N({__name:"index",setup(e,{expose:a}){const l=X((()=>d((()=>t.import("./rewrite-legacy.js?v=1763625242172")),void 0))),{t:s}=D(),{data:r}=sl(),u=J({domain:"",dirName:null}),c=W([]),p=async()=>{const e=u.dirName;""!==u.domain.trim()?null!==e?(await Je({id:r.id,domain:u.domain,dirName:e}),b()):n.error(s("Site.RulesError.index_32")):n.error(s("Site.RulesError.index_31"))},_=be(s("Site.PHP.index_81"),{data:"",filename:"",rlist:[]}),m=e=>{_.data.filename=e.filename,_.data.fileContent=e.data,_.data.rlist=e.rlist,_.show=!0},{keys:v,table:f,columns:h}=xe([{type:"selection",width:40},{key:"domain",title:s("Site.TableRow.index_19"),ellipsis:{tooltip:{width:"trigger"}}},{key:"port",title:s("Site.TableRow.index_16"),width:80},{key:"path",title:s("Site.Config.index_33"),width:120,ellipsis:{tooltip:{width:"trigger"}}},we({width:130,options:e=>[{label:s("Site.TableOP.index_10"),onClick:()=>{(async e=>{try{const{message:t}=await Ke({id:e.id});o(t)&&m(t)}catch(t){const a=Vt(t,"meesage.result","");a?n.error(a):fe({title:s("Site.Cert.index_40"),content:s("Site.PHP.index_80"),onConfirm:async({hide:t})=>{const{message:a}=await Ve({id:e.id});o(a)&&m(a),t()}})}})(e)}},{label:s("Public.Btn.Del"),onClick:()=>{fe({title:`${s("Ftp.Table.index_10")} ${e.path}`,content:s("Site.Config.index_34"),onConfirm:async({hide:t})=>{await Fe({id:e.id}),b(),t()}})}}]})]),x=[{key:"del",type:"confirm",label:s("Site.Batch.index_20"),confirm:{title:s("Site.Batch.index_21"),desc:s("Site.Batch.index_11"),api:e=>Fe({id:e.id},!1),done:()=>{b()},columns:[{key:"domain",title:s("Site.TableRow.index_19"),ellipsis:{tooltip:{width:"trigger"}}}]}}],{loading:y,setLoading:g}=ye(),b=()=>{u.domain="",u.dirName=null,(async()=>{try{g(!0);const{message:e}=await Xe({id:r.id});if(o(e)){const{dirs:t,binding:a}=e;i(t)&&t.length>0?(c.value=t.map((e=>({label:e,value:e}))),u.dirName=t[0]):(c.value=[],u.dirName=null),f.data=i(a)?a:[]}}finally{v.value=[],g(!1)}})()};return b(),a({init:b}),(e,t)=>{const a=Kt,i=Mt,n=Ft,s=zt,o=ge,d=ve,r=me,m=va;return I(),O("div",null,[j(i,{class:"items-center",size:16},{default:A((()=>[j(i,{class:"items-center"},{default:A((()=>[H("div",null,z(e.$t("Site.TableRow.index_19")),1),H("div",Rl,[j(a,{value:M(u).domain,"onUpdate:value":t[0]||(t[0]=e=>M(u).domain=e),placeholder:"","input-props":{name:"domain"}},null,8,["value"])])])),_:1}),j(i,{class:"items-center"},{default:A((()=>[H("div",null,z(e.$t("Site.Config.index_33")),1),H("div",El,[j(n,{value:M(u).dirName,"onUpdate:value":t[1]||(t[1]=e=>M(u).dirName=e),options:M(c)},null,8,["value","options"])])])),_:1}),j(s,{class:"add-domain-btn",type:"primary",onClick:p},{default:A((()=>[F(z(e.$t("Site.Cert.index_62")),1)])),_:1})])),_:1}),j(r,{class:"mt-16px"},{table:A((()=>[j(o,{"checked-row-keys":M(v),"onUpdate:checkedRowKeys":t[2]||(t[2]=e=>q(v)?v.value=e:null),loading:M(y),"max-height":440,data:M(f).data,columns:M(h)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:A((()=>[j(d,{"checked-row-keys":M(v),"onUpdate:checkedRowKeys":t[3]||(t[3]=e=>q(v)?v.value=e:null),data:M(f).data,options:x},null,8,["checked-row-keys","data"])])),_:1}),j(m,{show:M(_).show,"onUpdate:show":t[4]||(t[4]=e=>M(_).show=e),title:M(_).title,data:M(_).data,width:600,"min-height":488,component:M(l)},null,8,["show","title","data","component"])])}}}),Tl=N({__name:"index",setup(e,{expose:t}){const{t:a}=D(),{config:l}=sl(),i=W("site"),n=W(),s=[{key:"site",label:a("Site.Config.index_4"),component:Ul},{key:"subdirectory",label:a("Site.Config.index_3"),component:Bl}];return i.value=l.subMenu||"site",l.subMenu="",t({init:()=>{i.value="site",Y((()=>{n.value?.init()}))}}),(e,t)=>{const a=pa;return I(),G(a,{value:M(i),"onUpdate:value":t[0]||(t[0]=e=>q(i)?i.value=e:null),ref_key:"tabsRef",ref:n,options:s},null,8,["value"])}}}),jl={class:"p-20px"},Nl={class:"w-280px"},Dl={class:"w-280px"},Wl={class:"w-280px"},Il={class:"w-280px"},Ol=N({__name:"form",props:{data:{}},setup(e,{expose:t}){const a=e,{t:l}=D(),{isEdit:i,siteId:n,row:s,getList:o}=a.data,d=W(null),r=J({name:"",site_dir:"",username:"",password:""}),u={name:{required:!0,message:l("Site.RulesError.index_16"),trigger:["blur","input"]},site_dir:{required:!0,message:l("Site.RulesError.index_17"),trigger:["blur","input"]},username:{required:!0,message:l("Site.Placeholder.Index_6"),trigger:["blur","input"]},password:{required:!0,message:l("Site.Placeholder.Index_8"),trigger:["blur","input"]}};return i&&s&&(r.name=s.name,r.site_dir=s.site_dir),t({onConfirm:async({hide:e})=>{await(d.value?.validate()),i?await Ge({id:n,name:r.name,username:r.username,password:r.password}):await Ye({...Z(r),id:n}),o?.(),e()}}),(e,t)=>{const a=Kt,l=qt,n=_a,s=Se;return I(),O("div",jl,[j(n,{ref_key:"formRef",ref:d,model:M(r),rules:u},{default:A((()=>[j(l,{label:e.$t("Site.TableRow.index_2"),path:"name"},{default:A((()=>[H("div",Nl,[j(a,{value:M(r).name,"onUpdate:value":t[0]||(t[0]=e=>M(r).name=e),disabled:M(i),placeholder:"","input-props":{name:"name"}},null,8,["value","disabled"])])])),_:1},8,["label"]),j(l,{label:e.$t("Site.TableRow.index_15"),path:"site_dir"},{default:A((()=>[H("div",Dl,[j(a,{value:M(r).site_dir,"onUpdate:value":t[1]||(t[1]=e=>M(r).site_dir=e),disabled:M(i),placeholder:e.$t("Site.Config.Limit.index_5"),"input-props":{name:"site_dir"}},null,8,["value","disabled","placeholder"])])])),_:1},8,["label"]),j(l,{label:e.$t("Site.Lable.index_24"),path:"username"},{default:A((()=>[H("div",Wl,[j(a,{value:M(r).username,"onUpdate:value":t[2]||(t[2]=e=>M(r).username=e),placeholder:"","input-props":{name:"username"}},null,8,["value"])])])),_:1},8,["label"]),j(l,{label:e.$t("Site.Lable.index_27"),path:"password"},{default:A((()=>[H("div",Il,[j(a,{value:M(r).password,"onUpdate:value":t[3]||(t[3]=e=>M(r).password=e),placeholder:"","input-props":{name:"password"}},null,8,["value"])])])),_:1},8,["label"])])),_:1},8,["model"]),j(s,{class:"mt-4px"},{default:A((()=>[H("li",null,z(e.$t("Site.Config.index_40")),1),H("li",null,z(e.$t("Site.Config.index_41")),1)])),_:1})])}}}),Hl=N({__name:"index",setup(e,{expose:t}){const{t:a}=D(),{data:l}=sl(),{keys:i,table:n,columns:s}=xe([{type:"selection",width:40},{key:"name",title:a("Site.TableRow.index_2"),ellipsis:{tooltip:{width:"trigger"}}},{key:"site_dir",title:a("Site.TableRow.index_15"),ellipsis:{tooltip:{width:"trigger"}}},we({width:130,options:e=>[{label:a("Site.TableOP.index_7"),class:"edit-btn",onClick:()=>{m(e)}},{label:a("Public.Btn.Del"),class:"delete-btn",onClick:()=>{fe({title:`${a("Site.Config.Limit.index_1",[e.name])}`,content:a("Site.Config.Limit.index_2"),onConfirm:async({hide:t})=>{await Ze({id:l.id,name:e.name}),c(),t()}})}}]})]),d=[{key:"del",type:"confirm",label:a("Site.Batch.index_20"),confirm:{title:a("Site.Batch.index_21"),desc:a("Site.Batch.index_11"),columns:[s.value[1]],api:e=>Ze({id:l.id,name:e.name},!1),done:()=>{c()}}}],{loading:r,setLoading:u}=ye(),c=async()=>{try{u(!0);const{message:e}=await Qe({id:l.id});if(o(e)){n.data=[];for(const[t,a]of Object.entries(e))if(l.name===t){n.data=a;break}}}finally{i.value=[],u(!1)}},p=be(a("Site.Config.index_38"),{row:void 0,siteId:l.id,isEdit:!1,getList:c}),_=()=>{p.data.isEdit=!1,p.title=a("Site.Config.index_38"),p.show=!0},m=e=>{p.data.row=e,p.data.isEdit=!0,p.title=a("Site.Config.index_39"),p.show=!0};return c(),t({init:c}),(e,t)=>{const a=zt,l=ge,o=ve,u=me,c=Se,m=va;return I(),O("div",null,[j(u,null,{toolsLeft:A((()=>[j(a,{class:"add-limit-btn",type:"primary",onClick:_},{default:A((()=>[F(z(e.$t("Site.Config.index_38")),1)])),_:1})])),table:A((()=>[j(l,{"checked-row-keys":M(i),"onUpdate:checkedRowKeys":t[0]||(t[0]=e=>q(i)?i.value=e:null),"row-key":"name",loading:M(r),"max-height":440,data:M(n).data,columns:M(s)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:A((()=>[j(o,{"checked-row-keys":M(i),"onUpdate:checkedRowKeys":t[1]||(t[1]=e=>q(i)?i.value=e:null),"row-key":"name",data:M(n).data,options:d},null,8,["checked-row-keys","data"])])),_:1}),j(c,{class:"mt-16px"},{default:A((()=>[H("li",null,z(e.$t("Site.Config.index_40")),1),H("li",null,z(e.$t("Site.Config.index_41")),1)])),_:1}),j(m,{show:M(p).show,"onUpdate:show":t[2]||(t[2]=e=>M(p).show=e),title:M(p).title,data:M(p).data,width:480,footer:!0,component:Ol},null,8,["show","title","data"])])}}}),Al={class:"p-20px"},zl={class:"w-280px"},Ml={class:"w-280px"},ql={class:"w-280px"},Fl=N({__name:"form",props:{data:{}},setup(e,{expose:t}){const a=e,{isEdit:l,siteName:i,row:n,getList:s}=a.data,{t:o}=D(),d=W(null),r=J({deny_name:"",suffix:"php|jsp",dir:""}),u={deny_name:{required:!0,message:o("Site.Placeholder.Index_4"),trigger:["blur","input"]},suffix:{required:!0,message:o("Site.Placeholder.Index_5"),trigger:["blur","input"]},dir:{required:!0,message:o("Site.Placeholder.Index_6"),trigger:["blur","input"]}},c=()=>({...Z(r),dir:r.dir.replace(/\/$/,"")+"/",website:i});return l&&n&&(r.deny_name=n.name,r.suffix=n.suffix,r.dir=n.dir),t({onConfirm:async({hide:e})=>{await(d.value?.validate()),l?await et(c()):await tt(c()),s?.(),e()}}),(e,t)=>{const a=Kt,i=qt,n=_a,s=Se;return I(),O("div",Al,[j(n,{ref_key:"formRef",ref:d,model:M(r),rules:u},{default:A((()=>[j(i,{label:e.$t("Site.TableRow.index_2"),path:"deny_name"},{default:A((()=>[H("div",zl,[j(a,{value:M(r).deny_name,"onUpdate:value":t[0]||(t[0]=e=>M(r).deny_name=e),disabled:M(l),placeholder:e.$t("Site.Placeholder.Index_1"),"input-props":{name:"name"}},null,8,["value","disabled","placeholder"])])])),_:1},8,["label"]),j(i,{label:e.$t("Site.TableRow.index_18"),path:"suffix"},{default:A((()=>[H("div",Ml,[j(a,{value:M(r).suffix,"onUpdate:value":t[1]||(t[1]=e=>M(r).suffix=e),placeholder:e.$t("Site.Placeholder.Index_2"),"input-props":{name:"suffix"}},null,8,["value","placeholder"])])])),_:1},8,["label"]),j(i,{label:e.$t("Site.TableRow.index_15"),path:"dir"},{default:A((()=>[H("div",ql,[j(a,{value:M(r).dir,"onUpdate:value":t[2]||(t[2]=e=>M(r).dir=e),placeholder:e.$t("Site.Placeholder.Index_3"),"input-props":{name:"dir"}},null,8,["value","placeholder"])])])),_:1},8,["label"])])),_:1},8,["model"]),j(s,{class:"mt-4px"},{default:A((()=>[H("li",null,z(e.$t("Site.PHP.index_72")),1),H("li",null,z(e.$t("Site.PHP.index_73")),1),H("li",null,z(e.$t("Site.PHP.index_74")),1),H("li",null,z(e.$t("Site.PHP.index_75")),1),H("li",null,z(e.$t("Site.PHP.index_76")),1)])),_:1})])}}}),Jl=N({__name:"index",setup(e,{expose:t}){const{t:a}=D(),{data:l}=sl(),{keys:n,table:s,columns:o}=xe([{type:"selection",width:40},{key:"name",title:a("Site.TableRow.index_2"),ellipsis:{tooltip:{width:"trigger"}}},{key:"dir",title:a("Site.TableRow.index_15"),ellipsis:{tooltip:{width:"trigger"}}},{key:"suffix",title:a("Site.TableRow.index_18"),ellipsis:{tooltip:{width:"trigger"}}},we({width:130,options:e=>[{label:a("Site.TableOP.index_7"),class:"edit-btn",onClick:()=>{m(e)}},{label:a("Public.Btn.Del"),class:"delete-btn",onClick:()=>{fe({title:`${a("Site.TableOP.index_6")} [${e.name}]`,content:a("Site.Batch.index_13"),onConfirm:async({hide:t})=>{await at({website:l.name,deny_name:e.name}),c(),t()}})}}]})]),d=[{key:"del",type:"confirm",label:a("Site.Batch.index_20"),confirm:{title:a("Site.Batch.index_21"),desc:a("Site.Batch.index_11"),columns:[o.value[1]],api:e=>at({website:l.name,deny_name:e.name},!1),done:()=>{c()}}}],{loading:r,setLoading:u}=ye(),c=async()=>{try{u(!0);const{message:e}=await lt({website:l.name});s.data=i(e)?e:[]}finally{n.value=[],u(!1)}},p=be(a("Site.Config.index_38"),{row:void 0,siteName:l.name,isEdit:!1,getList:c}),_=()=>{p.data.row=void 0,p.data.isEdit=!1,p.title=a("Site.Config.index_38"),p.show=!0},m=e=>{p.data.row=e,p.data.isEdit=!0,p.title=a("Site.Config.index_39"),p.show=!0};return c(),t({init:c}),(e,t)=>{const a=zt,l=ge,i=ve,u=me,c=Se,m=va;return I(),O("div",null,[j(u,null,{toolsLeft:A((()=>[j(a,{class:"add-deny-btn",type:"primary",onClick:_},{default:A((()=>[F(z(e.$t("Site.Config.index_38")),1)])),_:1})])),table:A((()=>[j(l,{"checked-row-keys":M(n),"onUpdate:checkedRowKeys":t[0]||(t[0]=e=>q(n)?n.value=e:null),"row-key":"name",loading:M(r),"max-height":440,data:M(s).data,columns:M(o)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:A((()=>[j(i,{"checked-row-keys":M(n),"onUpdate:checkedRowKeys":t[1]||(t[1]=e=>q(n)?n.value=e:null),"row-key":"name",data:M(s).data,options:d},null,8,["checked-row-keys","data"])])),_:1}),j(c,{class:"mt-16px"},{default:A((()=>[H("li",null,z(e.$t("Site.Config.index_42"))+" |",1),H("li",null,z(e.$t("Site.Config.index_43")),1),H("li",null,z(e.$t("Site.Config.index_44")),1),H("li",null,z(e.$t("Site.Config.index_45")),1)])),_:1}),j(m,{show:M(p).show,"onUpdate:show":t[2]||(t[2]=e=>M(p).show=e),title:M(p).title,data:M(p).data,width:480,footer:!0,component:Fl},null,8,["show","title","data"])])}}}),Kl={class:"pt-8px"},Vl={class:"w-200px"},Xl={class:"flex flex-col"},Gl={class:"w-200px"},Yl={class:"mt-8px text-desc"},Zl={class:"flex flex-col"},Ql={class:"w-200px"},ei={class:"mt-8px text-desc"},ti={class:"flex flex-col"},ai={class:"w-200px"},li={class:"mt-8px text-desc"},ii=N({__name:"index",setup(e,{expose:t}){const{t:a}=D(),{data:l}=sl(),i=W(null),n=J({status:!1,type:0,perserver:300,perip:25,limit_rate:512}),s={perserver:{trigger:["blur","change"],validator:()=>!!n.perserver||new Error(a("Site.RulesError.index_318"))},perip:{trigger:["blur","change"],validator:()=>!!n.perip||new Error(a("Site.RulesError.index_319"))},limit_rate:{trigger:["blur","change"],validator:()=>!!n.limit_rate||new Error(a("Site.RulesError.index_320"))}},d=W([{label:"BBS/Blog",value:0,items:{perserver:300,perip:25,limit_rate:512}},{label:"Photofolio",value:1,items:{perserver:200,perip:10,limit_rate:1024}},{label:"Download",value:2,items:{perserver:50,perip:3,limit_rate:2048}},{label:"Mall",value:3,items:{perserver:500,perip:10,limit_rate:2048}},{label:"Portal",value:4,items:{perserver:400,perip:15,limit_rate:1024}},{label:"Corporate",value:5,items:{perserver:60,perip:10,limit_rate:512}},{label:"Video",value:6,items:{perserver:150,perip:4,limit_rate:1024}},{label:"Customize",value:7,items:{perserver:0,perip:0,limit_rate:0}}]),u=async e=>{e?_():(await it({id:l.id}),m())},c=(e,t)=>{const{items:a}=t;o(a)&&p(a)},p=e=>{n.perserver=e.perserver,n.perip=e.perip,n.limit_rate=e.limit_rate},_=async()=>{await(i.value?.validate()),await nt({id:l.id,perserver:n.perserver,perip:n.perip,limit_rate:n.limit_rate}),m()},m=async()=>{const{message:e}=await st({id:l.id});o(e)&&(n.status=0!=e.perserver,p(d.value[0].items),r(e.perserver)&&0!=e.perserver&&(n.perserver=e.perserver),r(e.perip)&&0!=e.perip&&(n.perip=e.perip),r(e.limit_rate)&&0!=e.limit_rate&&(n.limit_rate=e.limit_rate))};return m(),t({init:m}),(e,t)=>{const a=Xt,l=qt,o=Ft,r=Gt,p=zt,m=_a;return I(),O("div",Kl,[j(m,{ref_key:"formRef",ref:i,"label-width":"150",class:"px-8px",model:M(n),rules:s},{default:A((()=>[j(l,{label:" "},{default:A((()=>[j(a,{checked:M(n).status,"onUpdate:checked":[t[0]||(t[0]=e=>M(n).status=e),u]},{default:A((()=>[F(z(e.$t("Site.PHP.index_82")),1)])),_:1},8,["checked"])])),_:1}),j(l,{label:e.$t("Site.Lable.index_40"),path:"type"},{default:A((()=>[H("div",Vl,[j(o,{value:M(n).type,"onUpdate:value":[t[1]||(t[1]=e=>M(n).type=e),c],options:M(d)},null,8,["value","options"])])])),_:1},8,["label"]),j(l,{label:e.$t("Site.Lable.index_41"),path:"perserver"},{default:A((()=>[H("div",Xl,[H("div",Gl,[j(r,{value:M(n).perserver,"onUpdate:value":t[2]||(t[2]=e=>M(n).perserver=e),"show-button":!1,min:0},null,8,["value"])]),H("div",Yl,z(e.$t("Site.PHP.index_83")),1)])])),_:1},8,["label"]),j(l,{label:e.$t("Site.Lable.index_45"),path:"perip"},{default:A((()=>[H("div",Zl,[H("div",Ql,[j(r,{value:M(n).perip,"onUpdate:value":t[3]||(t[3]=e=>M(n).perip=e),"show-button":!1,min:0},null,8,["value"])]),H("div",ei,z(e.$t("Site.PHP.index_84")),1)])])),_:1},8,["label"]),j(l,{label:e.$t("Site.Config.index_6"),path:"limit_rate"},{default:A((()=>[H("div",ti,[H("div",ai,[j(r,{value:M(n).limit_rate,"onUpdate:value":t[4]||(t[4]=e=>M(n).limit_rate=e),"show-button":!1,min:0},null,8,["value"])]),H("div",li,z(e.$t("Site.PHP.index_85")),1)])])),_:1},8,["label"]),j(l,{label:" "},{default:A((()=>[j(p,{type:"primary",onClick:_},{default:A((()=>[F(z(e.$t("Site.Cert.index_60")),1)])),_:1})])),_:1})])),_:1},8,["model"])])}}}),ni=N({__name:"index",setup(e){const{t:t}=D(),a=W("limit"),l=[{key:"limit",label:t("Site.Config.index_5"),component:Hl},{key:"deny",label:t("Site.Config.index_14"),component:Jl},{key:"traffic",label:t("Site.Config.index_6"),component:ii}];return(e,t)=>{const i=pa;return I(),G(i,{value:M(a),"onUpdate:value":t[0]||(t[0]=e=>q(a)?a.value=e:null),options:l},null,8,["value"])}}}),si={class:"w-420px"},oi={class:"mt-8px"},di=N({__name:"index",setup(e,{expose:t}){const{data:a}=sl(),l=W(""),i=async()=>{const{message:e}=await ot({id:a.id});o(e)&&(l.value=u(e.result)?e.result.split(",").join("\n"):"")},n=async()=>{await dt({id:a.id,Index:l.value.trim().split("\n").join(",")}),i()};return i(),t({init:i}),(e,t)=>{const a=Te,i=zt,s=Se;return I(),O("div",null,[H("div",si,[j(a,{value:M(l),"onUpdate:value":t[0]||(t[0]=e=>q(l)?l.value=e:null),rows:12,name:"content",placeholder:""},null,8,["value"])]),H("div",oi,[j(i,{class:"save-btn",type:"primary",onClick:n},{default:A((()=>[F(z(e.$t("Public.Btn.Save")),1)])),_:1})]),j(s,{class:"mt-16px"},{default:A((()=>[H("li",null,z(e.$t("Site.PHP.index_79")),1)])),_:1})])}}}),ri={class:"mt-8px"},ui=N({__name:"index",setup(e,{expose:t}){const{multiService:a}=Q(c()),{data:l}=sl(),i=_e(),n=W(null),s=W(),d=W(""),r=async()=>{await(async()=>{const{message:e}=await fa({site_id:l.id});o(e)&&(s.value=e.result)})(),d.value=await(async()=>{const e=a.value?s.value:i.webserver;return`/www/server/panel/vhost/${"openlitespeed"===e?`${e}/detail`:e}/${l.name}.conf`})(),n.value?.getContent()},u=()=>{n.value?.saveFile()};return ee((()=>{r()})),t({init:r}),(e,t)=>{const l=Yt,i=zt,s=Se;return I(),O("div",null,[M(a)?(I(),G(l,{key:0,type:"warning",class:"mb-16px"},{default:A((()=>t[1]||(t[1]=[H("span",{class:"font-bold"},"Multi-WebServer Hosting Do not modify the port, otherwise the website will not be accessible normally",-1)]))),_:1,__:[1]})):V("",!0),j(Wa,{ref_key:"configRef",ref:n,path:M(d),"onUpdate:path":t[0]||(t[0]=e=>q(d)?d.value=e:null),height:"500","show-tips":!M(a)},null,8,["path","show-tips"]),H("div",ri,[j(i,{type:"primary",onClick:u},{default:A((()=>[F(z(e.$t("Site.Cert.index_60")),1)])),_:1})]),j(s,{class:"mt-16px"},{default:A((()=>[H("li",null,z(e.$t("Site.Config.index_59")),1),H("li",null,z(e.$t("Site.Config.index_60")),1)])),_:1})])}}}),ci={class:"p-8"},pi=N({__name:"form",setup(e,{expose:t}){const a=W(null),l=W(!1),i={path:{required:!0,message:"Please select the file directory",trigger:["blur","change"]},operation:{type:"array",required:!0,trigger:"change",message:"please select"}},n=J({path:"",operation:[]}),s=(e,t)=>{"dir"===t.type?(l.value=!0,n.operation=[0]):(l.value=!1,n.operation=[0,1,2])};return t({onConfirm:async()=>{await(a.value?.validate())}}),(e,t)=>{const o=ma,d=qt,r=Xt,u=p,c=Zt,_=_a,m=Mt,v=Se;return I(),O("div",ci,[j(m,null,{default:A((()=>[j(_,{ref_key:"formRef",ref:a,model:M(n),rules:i},{default:A((()=>[j(d,{label:"Detection path",path:"path"},{default:A((()=>[j(o,{disabled:"",value:M(n).path,"onUpdate:value":t[0]||(t[0]=e=>M(n).path=e),"checked-type":["dir","file"],placeholder:"Please select the file directory",onChange:s},null,8,["value"])])),_:1}),j(d,{label:"Alert operation",path:"operation"},{default:A((()=>[j(c,{value:M(n).operation,"onUpdate:value":t[1]||(t[1]=e=>M(n).operation=e)},{default:A((()=>[j(u,null,{default:A((()=>[j(r,{value:0},{default:A((()=>t[2]||(t[2]=[F(" Read ")]))),_:1,__:[2]}),j(r,{value:1,disabled:M(l)},{default:A((()=>t[3]||(t[3]=[F(" delete ")]))),_:1,__:[3]},8,["disabled"]),j(r,{value:2,disabled:M(l)},{default:A((()=>t[4]||(t[4]=[F(" Modify/increase ")]))),_:1,__:[4]},8,["disabled"])])),_:1})])),_:1},8,["value"])])),_:1})])),_:1},8,["model"])])),_:1}),j(v,{class:"mt-16px"},{default:A((()=>t[5]||(t[5]=[H("li",null,"Directory temporarily only supports reading alarm operation",-1)]))),_:1,__:[5]})])}}}),_i={class:"p-5"},mi={class:"mt-16px"},vi=N({__name:"monitor",setup(e){const t=W(!1),a=W(!1),l=W([{key:"path",title:"path",ellipsis:{tooltip:{width:"trigger"}}},{key:"type",title:"type",ellipsis:{tooltip:{width:"trigger"}}},{key:"operation",title:"Alert operation",ellipsis:{tooltip:{width:"trigger"}}},{key:"name",title:"operate",ellipsis:{tooltip:{width:"trigger"}}}]),i=W([]);return(e,n)=>{const s=zt,o=Mt,d=ge,r=Se,u=va;return I(),O("div",_i,[H("div",null,[j(o,{justify:"space-between"},{default:A((()=>[j(s,{type:"primary",onClick:n[0]||(n[0]=e=>t.value=!0)},{default:A((()=>n[2]||(n[2]=[F(" Add monitor ")]))),_:1,__:[2]}),j(s,null,{icon:A((()=>n[3]||(n[3]=[H("img",{src:Oa,class:"w-5"},null,-1)]))),_:1})])),_:1})]),H("div",mi,[j(d,{loading:M(a),"loading-num":6,data:M(i),columns:M(l)},null,8,["loading","data","columns"])]),H("div",null,[j(r,{class:"mt-16px"},{default:A((()=>[n[5]||(n[5]=H("li",null," The security alarm will monitor the behavior of the current website access to the non -current website file (for example: your site a.COM visited the file or directory of the site B.COM). ",-1)),n[6]||(n[6]=H("li",null,"Police frequency: 60 seconds of alarm behavior will only send an alarm once",-1)),H("li",null,[j(s,{text:"",class:"color-#20a53a"},{default:A((()=>n[4]||(n[4]=[F("Tutorial")]))),_:1,__:[4]})])])),_:1,__:[5,6]})]),j(u,{show:M(t),"onUpdate:show":n[1]||(n[1]=e=>q(t)?t.value=e:null),title:"Add file monitor",width:500,"min-height":148,footer:!0,component:pi},null,8,["show"])])}}}),fi=_({},[["render",function(e,t){return I(),O("div",null,"555")}]]),hi={class:"box mt-16px"},xi={key:0,class:"items-center warning"},yi={class:"warning"},gi={class:"color-#f23836"},bi=N({__name:"index",props:{isInstall:{type:Boolean,default:!1},phpVersion:{default:"PHP"}},setup(e){const t=_e(),a=W(!1),i=W(!1),n=W(!1),s=e,o=c(),d=()=>{ke({source:114})},r=()=>{const e=a.value?"Open the site security alarm":"Close the site security alarm",t=a.value?"After opening, the alarm notice will be sent when the safety problem is detected. Do you continue?":"After closing, the website will no longer receive a security alarm. Do you continue?";fe({title:e,content:t,onConfirm:async()=>{const e=ha(a.value);console.log(e,"result")},onPublicClose:()=>{a.value=!a.value}})};return(e,u)=>{const c=Jt,p=Mt,_=zt,m=Se,v=l,f=Ia,h=va;return I(),O(K,null,[H("div",hi,[j(f,{install:M(o).isPro,class:"install"},te({default:A((()=>[j(p,{class:"items-center color-#666"},{default:A((()=>[u[8]||(u[8]=H("div",null,"Site protection",-1)),H("div",null,[j(c,{value:M(a),"onUpdate:value":[u[0]||(u[0]=e=>q(a)?a.value=e:null),r]},null,8,["value"])]),u[9]||(u[9]=H("div",null,"today: 0",-1)),u[10]||(u[10]=H("div",null,"Total alarm: 0",-1)),M(a)?V("",!0):(I(),O("div",xi,[u[7]||(u[7]=H("img",{src:Aa,class:"h-8"},null,-1)),H("span",yi,[u[5]||(u[5]=F(" Please open ")),H("span",gi,"PHP-"+z(s.phpVersion),1),u[6]||(u[6]=F(" protection first "))])]))])),_:1,__:[8,9,10]}),j(p,{class:"mt-16px"},{default:A((()=>[j(_,{onClick:u[1]||(u[1]=e=>i.value=!0)},{default:A((()=>u[11]||(u[11]=[F("Monitor")]))),_:1,__:[11]}),j(_,{onClick:u[2]||(u[2]=e=>n.value=!0)},{default:A((()=>u[12]||(u[12]=[F("Trigger log")]))),_:1,__:[12]})])),_:1}),j(m,{class:"mt-16px"},{default:A((()=>u[13]||(u[13]=[H("li",null," Based on the PHP kernel monitoring tools, real -time monitoring of other invasive behaviors such as Trojan horses and vulnerabilities, I found that Trojan supports automatic isolation ",-1),H("li",null," The security alarm will monitor the behavior of the current website access to the non -current website file (for example: your site a.COM visited the file or directory of the site B.COM). When you wait for a cache, please do not turn on this option ",-1)]))),_:1,__:[13]})])),_:2},[s.isInstall?{name:"desc",fn:A((()=>[j(p,{class:"items-center"},{default:A((()=>[u[16]||(u[16]=H("img",{src:Ha,class:"h-10"},null,-1)),H("span",null,[u[15]||(u[15]=F("If you need to use the [PHP website security alarm] function, please buy first ")),j(v,{onClick:d},{default:A((()=>u[14]||(u[14]=[F("click to buy")]))),_:1,__:[14]})])])),_:1,__:[16]})])),key:"0"}:{name:"desc",fn:A((()=>[j(p,{class:"items-center"},{default:A((()=>[u[19]||(u[19]=H("img",{src:Ha,class:"h-10"},null,-1)),H("span",null,[u[18]||(u[18]=F("Currently not installed [PHP website security alarm], ")),j(v,null,{default:A((()=>u[17]||(u[17]=[F("Click to install")]))),_:1,__:[17]})])])),_:1,__:[19]})])),key:"1"}]),1032,["install"])]),j(h,{show:M(i),"onUpdate:show":u[3]||(u[3]=e=>q(i)?i.value=e:null),title:"XXXXmonitor",width:1e3,"min-height":148,footer:!1,component:vi},null,8,["show"]),j(h,{show:M(n),"onUpdate:show":u[4]||(u[4]=e=>q(n)?n.value=e:null),title:`[${M(t).siteName}] Site security log`,width:1e3,"min-height":148,footer:!1,component:fi},null,8,["show","title"])],64)}}}),wi=_(bi,[["__scopeId","data-v-d159b1c0"]]),Si={class:"w-140px"},ki={class:"my-16px"},Ci={key:0,class:"my-16px"},$i=N({__name:"index",setup(e,{expose:t}){const{data:a}=sl(),l=_e(),d=W(null),r=W(!1),u=W(!1);let c="";const p=W([]),_=async()=>{null!==d.value?(await rt({siteName:a.name,version:d.value,other:c}),l.setRefresh(!0),h()):n.error("Please select a PHP version")},v=async()=>{const{message:e}=await _t({id:a.id});o(e)&&(r.value=e.result)},f=async e=>{await ut({id:a.id,act:e?1:0}),v()},h=()=>{(async()=>{const{message:e}=await xa();o(e)&&(u.value=e.php_status)})(),v(),(async()=>{const{message:e}=await pt();i(e)&&(p.value=e.map((e=>({label:e.name,value:e.version}))))})(),(async()=>{const{message:e}=await ct({siteName:a.name});o(e)&&(d.value=e.phpversion,c=e.php_other||"")})()};return h(),t({init:h}),(e,t)=>{const a=Ft,l=zt,i=Mt,n=Se,o=s,c=Jt;return I(),O("div",null,[j(i,{class:"items-center"},{default:A((()=>[H("div",null,z(e.$t("Site.Lable.index_22")),1),H("div",Si,[j(a,{value:M(d),"onUpdate:value":t[0]||(t[0]=e=>q(d)?d.value=e:null),options:M(p)},null,8,["value","options"])]),H("div",null,[j(l,{type:"primary",onClick:_},{default:A((()=>[F(z(e.$t("Site.Cert.index_61")),1)])),_:1})])])),_:1}),j(n,{class:"mt-16px"},{default:A((()=>[H("li",null,z(e.$t("Site.Config.index_65")),1),H("li",null,z(e.$t("Site.Config.index_66")),1),H("li",null,z(e.$t("Site.Config.index_67")),1),H("li",null,z(e.$t("Site.Config.index_68")),1),H("li",null,z(e.$t("Site.Config.index_69")),1),H("li",null,z(e.$t("Site.Config.index_70")),1)])),_:1}),H("div",ki,[j(o,{dashed:""})]),j(i,{class:"items-center"},{default:A((()=>[H("div",null,z(e.$t("Site.Config.index_64")),1),H("div",null,[j(c,{value:M(r),"onUpdate:value":[t[1]||(t[1]=e=>q(r)?r.value=e:null),f]},null,8,["value"])])])),_:1}),j(n,{class:"mt-16px"},{default:A((()=>[H("li",null,z(e.$t("Site.Config.index_71")),1),H("li",null,z(e.$t("Site.Config.index_72")),1)])),_:1}),M(m)?(I(),O("div",Ci,[j(o,{dashed:""}),j(wi,{isInstall:M(u),phpVersion:M(d)},null,8,["isInstall","phpVersion"])])):V("",!0)])}}}),Pi={class:"mr-16px text-#777"},Li={key:1,class:"text-#777"},Ui={class:"w-200px mr-8px"},Ri={class:"w-200px mr-8px"},Ei=N({__name:"index",setup(e,{expose:t}){const{data:a}=sl(),l=_e(),s=W(!1),d=W("--"),r=W("--"),u=W(a.cache_status),c=W(null),p=W([]),_=W(""),m=async()=>{await mt({s_id:a.id,version:r.value}),x()},v=async e=>{await vt({version:a.php_version,sitename:a.name,act:e}),a.cache_status=e,l.setRefresh(!0)},f=async()=>{await ft({s_id:a.id})},h=async()=>{c.value?""!==_.value.trim()?await ht({s_id:a.id,user:c.value,new_pass:_.value}):n.error("Please enter new password"):n.error("Please select user")},x=async()=>{const e=n.loading("Getting Wordpress information, please wait...");try{await(async()=>{const{message:e}=await xt({s_id:a.id});o(e)&&(d.value=e.local_v,r.value=e.online_v,s.value=e.update)})(),await(async()=>{const{message:e}=await yt({s_id:a.id});i(e)&&e.length>0?(p.value=e.map((e=>({label:e,value:e}))),c.value=e[0]):(p.value=[],c.value=null)})()}finally{e.close()}};return x(),t({init:x}),(e,t)=>{const a=zt,l=qt,i=Xt,n=Ft,o=Kt,x=_a;return I(),O("div",null,[j(x,null,{default:A((()=>[j(l,{label:"WP Version"},{default:A((()=>[M(s)?(I(),O(K,{key:0},[H("div",Pi,"The current version is: "+z(M(d)),1),j(a,{type:"primary",onClick:m},{default:A((()=>[F("Upgrade to "+z(M(r)),1)])),_:1})],64)):(I(),O("span",Li,"The latest version"))])),_:1}),j(l,{label:"Cache"},{default:A((()=>[j(i,{checked:M(u),"onUpdate:checked":[t[0]||(t[0]=e=>q(u)?u.value=e:null),v],class:"mr-16px"},{default:A((()=>t[3]||(t[3]=[F(" Open cache ")]))),_:1,__:[3]},8,["checked"]),j(a,{type:"primary",onClick:f},{default:A((()=>t[4]||(t[4]=[F("Purge all cache")]))),_:1,__:[4]})])),_:1}),j(l,{label:"Reset password"},{default:A((()=>[H("div",Ui,[j(n,{value:M(c),"onUpdate:value":t[1]||(t[1]=e=>q(c)?c.value=e:null),options:M(p)},null,8,["value","options"])]),H("div",Ri,[j(o,{value:M(_),"onUpdate:value":t[2]||(t[2]=e=>q(_)?_.value=e:null),placeholder:"Please enter a new password"},null,8,["value"])]),j(a,{type:"primary",onClick:h},{default:A((()=>t[5]||(t[5]=[F("Save password")]))),_:1,__:[5]})])),_:1})])),_:1})])}}}),Bi={class:"pt-8px"},Ti={class:"w-180px mr-8px"},ji={class:"w-180px"},Ni={class:"w-180px"},Di={class:"w-280px"},Wi={class:"w-180px"},Ii={class:"w-180px"},Oi={class:"w-280px"},Hi={class:"flex-1"},Ai={key:0,class:"mb-16px text-error"},zi={key:1,class:"mb-16px text-error"},Mi=N({__name:"index",setup(e,{expose:t}){const{t:a}=D(),{data:i}=sl(),n=J({composer_version:"",php_version:"auto",composer_args:"install",composer_cmd:"",repo:"repos.packagist",composer_user:"www",composer_path:i.path}),s=W([]),d=[{label:a("Docker.App.index_4"),value:"install"},{label:a("Docker.App.index_3"),value:"update"}],r=[{label:a("Site.Lable.index_8"),value:"repos.packagist"}],c=[{label:a("Site.Lable.index_9"),value:"www"},{label:a("Site.Lable.index_10"),value:"root"}],p=W(""),_=W(""),m=async()=>{await gt({repo:n.repo}),x()},v=async()=>{await bt({path:i.path}),x()},f=()=>{fe({title:a("Site.PHP.index_77"),content:a("Site.PHP.index_78"),onConfirm:async()=>{await wt({php_version:n.php_version,composer_args:n.composer_args,composer_cmd:n.composer_cmd,repo:n.repo,path:n.composer_path,user:n.composer_user}),x()}})},h=()=>{s.value.unshift({label:a("Site.Lable.index_12"),value:"auto"})},x=async()=>{const{message:e}=await St({path:i.path});o(e)&&(n.composer_version=e.result,e.comp_json&&(p.value=e.comp_json),u(e.comp_lock)&&(_.value=e.comp_lock),s.value=e.php_versions.filter((e=>"00"!==e.version)).map((e=>({label:e.name,value:e.version}))),h())};return h(),x(),t({init:x}),(e,t)=>{const a=Kt,i=zt,o=qt,u=Ft,h=ma,x=l,y=_a;return I(),O("div",Bi,[j(y,{class:"px-8px"},{default:A((()=>[j(o,{label:e.$t("Site.TableRow.index_3"),path:"composer_version"},{default:A((()=>[H("div",Ti,[j(a,{value:M(n).composer_version,"onUpdate:value":t[0]||(t[0]=e=>M(n).composer_version=e),disabled:!0,placeholder:""},null,8,["value"])]),j(i,{onClick:m},{default:A((()=>[F(z(e.$t("Docker.App.index_3")),1)])),_:1})])),_:1},8,["label"]),j(o,{label:e.$t("Site.TableRow.index_27"),path:"php_version"},{default:A((()=>[H("div",ji,[j(u,{value:M(n).php_version,"onUpdate:value":t[1]||(t[1]=e=>M(n).php_version=e),options:M(s)},null,8,["value","options"])])])),_:1},8,["label"]),j(o,{label:e.$t("Site.TableRow.index_28"),path:"composer_args"},{default:A((()=>[H("div",Ni,[j(u,{value:M(n).composer_args,"onUpdate:value":t[2]||(t[2]=e=>M(n).composer_args=e),options:d},null,8,["value"])])])),_:1},8,["label"]),j(o,{label:e.$t("Site.TableRow.index_29"),path:"composer_cmd"},{default:A((()=>[H("div",Di,[j(a,{value:M(n).composer_cmd,"onUpdate:value":t[3]||(t[3]=e=>M(n).composer_cmd=e),placeholder:e.$t("Site.Cert.index_67")},null,8,["value","placeholder"])])])),_:1},8,["label"]),j(o,{label:e.$t("Site.Lable.index_32"),path:"repo"},{default:A((()=>[H("div",Wi,[j(u,{value:M(n).repo,"onUpdate:value":t[4]||(t[4]=e=>M(n).repo=e),options:r},null,8,["value"])])])),_:1},8,["label"]),j(o,{label:e.$t("Ftp.Analysis.Index_27"),path:"composer_user"},{default:A((()=>[H("div",Ii,[j(u,{value:M(n).composer_user,"onUpdate:value":t[5]||(t[5]=e=>M(n).composer_user=e),options:c},null,8,["value"])])])),_:1},8,["label"]),j(o,{label:e.$t("Site.Lable.index_26"),path:"composer_path"},{default:A((()=>[H("div",Oi,[j(h,{value:M(n).composer_path,"onUpdate:value":t[6]||(t[6]=e=>M(n).composer_path=e)},null,8,["value"])])])),_:1},8,["label"]),j(o,{label:" ","show-feedback":!1},{default:A((()=>[H("div",Hi,[M(p)?(I(),O("div",Ai,z(M(p)),1)):V("",!0),M(_)?(I(),O("div",zi,[H("span",null,z(M(_)),1),j(x,{onClick:v},{default:A((()=>[F("["+z(e.$t("Site.TableOP.index_6"))+"]",1)])),_:1})])):V("",!0),j(i,{type:"primary",onClick:f},{default:A((()=>[F(z(e.$t("Site.Lable.index_11")),1)])),_:1})])])),_:1})])),_:1})])}}}),qi={class:"px-20px py-24px"},Fi={class:"w-120px"},Ji={class:"w-120px"},Ki={class:"w-200px"},Vi={class:"w-200px"},Xi={class:"w-200px"},Gi=N({__name:"form",props:{data:{}},setup(e,{expose:t}){const{t:a}=D(),l=e,{isEdit:n,siteId:s,siteName:o,row:d,getList:r}=l.data,u=W(null),c=J({redirectname:`${(new Date).valueOf()}`,type:1,holdpath:1,domainorpath:"domain",redirecttype:"301",redirectpath:"",redirectdomain:[],tourl:"http://"}),p={redirectdomain:{trigger:["change"],validator:()=>0!==c.redirectdomain.length||new Error(a("Site.RulesError.index_23"))},redirectpath:{trigger:["blur","input"],validator:()=>""!==c.redirectpath.trim()||new Error(a("Site.RulesError.index_24"))},tourl:{trigger:["blur","input"],validator:()=>""!==c.tourl.trim()||new Error(a("Site.RulesError.index_25"))}},_=[{label:"Domain name",value:"domain"},{label:"Path",value:"path"}],m=[{label:"301",value:"301"},{label:"302",value:"302"}],v=W([]),f=()=>{c.redirectdomain=[],c.redirectpath=""},{loading:h,setLoading:x}=ye();return n&&d&&(c.redirectname=d.redirectname,c.type=d.type,c.holdpath=d.holdpath,c.redirecttype=d.redirecttype,c.redirectpath=d.redirectpath,c.domainorpath=d.domainorpath,c.redirectdomain=d.redirectdomain,c.tourl=d.tourl),(async()=>{try{x(!0);const{message:e}=await Ne({id:s});v.value=i(e)?e.map((e=>({label:e.name,value:e.name}))):[]}finally{x(!1)}})(),t({onConfirm:async({hide:e})=>{await(u.value?.validate());const t={...Z(c),sitename:o};n?await Ct(t):await kt(t),r?.(),e()}}),(e,t)=>{const a=Jt,l=qt,i=Mt,n=Ft,s=Kt,o=_a,d=Se;return I(),O("div",qi,[j(o,{ref_key:"formRef",ref:u,model:M(c),rules:p},{default:A((()=>[j(i,{size:60},{default:A((()=>[j(l,{label:e.$t("Site.Lable.index_34")},{default:A((()=>[j(a,{value:M(c).type,"onUpdate:value":t[0]||(t[0]=e=>M(c).type=e),"checked-value":1,"unchecked-value":0},null,8,["value"])])),_:1},8,["label"]),j(l,{label:e.$t("Site.TableRow.index_13"),"label-width":"120"},{default:A((()=>[j(a,{value:M(c).holdpath,"onUpdate:value":t[1]||(t[1]=e=>M(c).holdpath=e),"checked-value":1,"unchecked-value":0},null,8,["value"])])),_:1},8,["label"])])),_:1}),j(i,{size:30},{default:A((()=>[j(l,{label:e.$t("Site.TableRow.index_11")},{default:A((()=>[H("div",Fi,[j(n,{value:M(c).domainorpath,"onUpdate:value":[t[2]||(t[2]=e=>M(c).domainorpath=e),f],class:"type-select",options:_},null,8,["value"])])])),_:1},8,["label"]),j(l,{label:e.$t("Site.TableRow.index_12"),"label-width":"70"},{default:A((()=>[H("div",Ji,[j(n,{value:M(c).redirecttype,"onUpdate:value":t[3]||(t[3]=e=>M(c).redirecttype=e),class:"mode-select",options:m},null,8,["value"])])])),_:1},8,["label"])])),_:1}),"domain"===M(c).domainorpath?(I(),G(l,{key:0,label:e.$t("Site.Lable.index_32"),path:"redirectdomain"},{default:A((()=>[H("div",Ki,[j(n,{value:M(c).redirectdomain,"onUpdate:value":t[4]||(t[4]=e=>M(c).redirectdomain=e),class:"domain-select",multiple:!0,loading:M(h),options:M(v),"max-tag-count":"responsive",placeholder:"Select domain"},null,8,["value","loading","options"])])])),_:1},8,["label"])):V("",!0),"path"===M(c).domainorpath?(I(),G(l,{key:1,label:e.$t("Site.Lable.index_30"),path:"redirectpath"},{default:A((()=>[H("div",Vi,[j(s,{value:M(c).redirectpath,"onUpdate:value":t[5]||(t[5]=e=>M(c).redirectpath=e),placeholder:"","input-props":{name:"path"}},null,8,["value"])])])),_:1},8,["label"])):V("",!0),j(l,{label:e.$t("Site.Lable.index_33"),path:"tourl"},{default:A((()=>[H("div",Xi,[j(s,{value:M(c).tourl,"onUpdate:value":t[6]||(t[6]=e=>M(c).tourl=e),placeholder:"","input-props":{name:"url"}},null,8,["value"])])])),_:1},8,["label"])])),_:1},8,["model"]),j(d,{class:"mt-12px"},{default:A((()=>[H("li",null,z(e.$t("Site.Config.index_77")),1),H("li",null,z(e.$t("Site.Config.index_78")),1),H("li",null,z(e.$t("Site.Config.index_79")),1),H("li",null,z(e.$t("Site.Config.index_80")),1),H("li",null,z(e.$t("Site.Config.index_81")),1),H("li",null,z(e.$t("Site.Config.index_82")),1)])),_:1})])}}}),Yi={class:"p-20px"},Zi={class:"mt-12px"},Qi=N({__name:"config",props:{data:{}},emits:["close"],setup(e,{emit:t}){const a=e,{row:l,siteName:i,getList:s}=a.data,d=t,r=_e(),u=W(""),c=W(""),p=W(""),_=async()=>{const{message:e}=await Pt({path:p.value,data:u.value,encoding:c.value});o(e)&&n.success(e.msg),s?.(),d("close")};return(async()=>{const{message:e}=await $t({sitename:i,redirectname:l.redirectname,webserver:r.webserver});o(e)&&(p.value=e.file,u.value=e.data,c.value=e.encoding)})(),(e,t)=>{const a=zt,l=Se;return I(),O("div",Yi,[j(Wa,{value:M(u),"onUpdate:value":t[0]||(t[0]=e=>q(u)?u.value=e:null),height:350,"show-tips":!1},null,8,["value"]),H("div",Zi,[j(a,{type:"primary",onClick:_},{default:A((()=>[F(z(e.$t("Site.Cert.index_60")),1)])),_:1})]),j(l,{class:"mt-24px"},{default:A((()=>[H("li",null,z(e.$t("Site.Config.index_83")),1)])),_:1})])}}}),en=N({__name:"index",setup(e,{expose:t}){const{t:a}=D(),{data:n}=sl(),s=e=>({sitename:e.sitename,redirectname:e.redirectname,tourl:e.tourl,redirectdomain:e.redirectdomain,redirectpath:e.redirectpath,redirecttype:e.redirecttype,domainorpath:e.domainorpath}),{keys:o,table:d,columns:r}=xe([{type:"selection",width:40},{key:"sitename",title:a("Site.TableRow.index_11"),ellipsis:{tooltip:{width:"trigger"}},render:e=>"path"===e.domainorpath?e.redirectpath:e.sitename},{key:"redirecttype",title:a("Site.TableRow.index_12"),width:90},{key:"holdpath",title:a("Site.TableRow.index_13"),width:140,render:e=>j(l,{type:1===e.holdpath?"primary":"error",onClick:async()=>{await Lt({...s(e),type:e.type,holdpath:1===e.holdpath?0:1,status:e.type}),e.holdpath=1===e.holdpath?0:1}},{default:()=>[1===e.holdpath?a("Config.Alarm.index_18"):a("Public.Status.TurnOff")]})},{key:"type",title:a("Config.Safe.index_156"),width:100,render:e=>j(Ce,{value:e.type,"checked-value":1,"unchecked-value":0,"checked-title":a("Public.Status.Running"),"unchecked-title":a("Public.Status.Paused"),onClick:async t=>{await Lt({...s(e),type:t,holdpath:e.holdpath,status:e.type}),e.type=t}},null)},we({width:140,options:e=>[{label:a("Site.TableOP.index_2"),class:"config-btn",onClick:()=>{x(e)}},{label:a("Site.TableOP.index_7"),class:"edit-btn",onClick:()=>{f(e)}},{label:a("Public.Btn.Del"),class:"delete-btn",onClick:()=>{fe({title:a("Site.Config.Redirect.index_1",[e.redirectname]),content:a("Site.Config.Redirect.index_2"),onConfirm:async()=>{await Ut({sitename:n.name,redirectname:e.redirectname}),_()}})}}]})]),u=[{key:"del",type:"confirm",label:a("Site.Batch.index_20"),confirm:{title:a("Site.Batch.index_21"),desc:a("Site.Batch.index_11"),columns:[r.value[1]],api:e=>Ut({sitename:n.name,redirectname:e.redirectname},!1),done:()=>{_()}}}],{loading:c,setLoading:p}=ye(),_=async()=>{try{p(!0);const{message:e}=await Rt({sitename:n.name});d.data=i(e)?e:[]}finally{o.value=[],p(!1)}},m=be(a("Site.Config.index_74"),{row:void 0,siteId:n.id,siteName:n.name,isEdit:!1,getList:_}),v=()=>{m.data.row=void 0,m.data.isEdit=!1,m.title=a("Site.Config.index_74"),m.show=!0},f=e=>{m.data.row=e,m.data.isEdit=!0,m.title=`${a("Site.Config.index_75")} [${e.redirectname}]`,m.show=!0},h=be("",{row:void 0,siteName:n.name,getList:_}),x=e=>{h.data.row=e,h.title=`${a("Site.Config.index_76")} [${e.redirectname}]`,h.show=!0};return _(),t({init:_}),(e,t)=>{const a=zt,l=ge,i=ve,n=me,s=va;return I(),O("div",null,[j(n,null,{toolsLeft:A((()=>[j(a,{class:"add-btn",type:"primary",onClick:v},{default:A((()=>[F(z(e.$t("Site.Config.index_73")),1)])),_:1})])),table:A((()=>[j(l,{"checked-row-keys":M(o),"onUpdate:checkedRowKeys":t[0]||(t[0]=e=>q(o)?o.value=e:null),"row-key":"redirectname",loading:M(c),"max-height":440,data:M(d).data,columns:M(r)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:A((()=>[j(i,{"checked-row-keys":M(o),"onUpdate:checkedRowKeys":t[1]||(t[1]=e=>q(o)?o.value=e:null),"row-key":"redirectname",data:M(d).data,options:u},null,8,["checked-row-keys","data"])])),_:1}),j(s,{show:M(m).show,"onUpdate:show":t[2]||(t[2]=e=>M(m).show=e),title:M(m).title,data:M(m).data,width:660,footer:!0,component:Gi},null,8,["show","title","data"]),j(s,{show:M(h).show,"onUpdate:show":t[3]||(t[3]=e=>M(h).show=e),title:M(h).title,data:M(h).data,width:580,component:Qi},null,8,["show","title","data"])])}}}),tn={class:"px-20px py-24px"},an={class:"w-220px"},ln={class:"w-220px"},nn={class:"w-220px"},sn={class:"w-220px"},on={class:"w-220px"},dn={class:"w-220px"},rn={class:"w-220px"},un=N({__name:"form",props:{data:{}},setup(e,{expose:t}){const{t:a}=D(),i=e,{isEdit:n,siteName:s,row:o,getList:d}=i.data,r=W(null),u=J({type:1,keepuri:1,proxyname:`proxy_${v(5)}`,cachetime:1,proxydir:"/",proxysite:"http://",todomain:"$host",cache:0,advancedfeature:0,sitename:s}),c=W([{key:"",value:""}]),p={proxyname:{trigger:["blur","input"],validator:()=>""!==u.proxyname.trim()||new Error(a("Site.RulesError.index_26"))},cachetime:{trigger:["blur","input"],validator:()=>!(1===u.cache&&!u.cachetime)||new Error(a("Site.RulesError.index_27"))},proxydir:{trigger:["blur","input"],validator:()=>""!==u.proxydir.trim()||new Error(a("Site.RulesError.index_28"))},proxysite:{trigger:["blur","input"],validator:()=>""!==u.proxysite.trim()||new Error(a("Site.RulesError.index_25"))},todomain:{trigger:["blur","input"],validator:()=>""!==u.todomain.trim()||new Error(a("Site.RulesError.index_29"))}},_=e=>{const t=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;e=(e=e.replace(/^http[s]?:\/\//,"")).replace(/(:|\?|\/|\\)(.*)$/,""),m.value||(t.test(e)?u.todomain="$host":u.todomain=e)},m=W(!1),h=()=>{u.todomain&&"$host"!==u.todomain&&(m.value=!0)},x=W([]),y=()=>{x.value.length>=3||x.value.push({sub1:"",sub2:""})};return y(),(()=>{if(n&&o){u.type=o.type,u.keepuri=o.keepuri,u.cache=o.cache,u.advancedfeature=o.advancedfeature,u.proxyname=o.proxyname,u.cachetime=o.cachetime,u.proxydir=o.proxydir,u.proxysite=o.proxysite,u.todomain=o.todomain,u.sitename=o.sitename,c.value=o.rewritedir.length?o.rewritedir.map((e=>({key:e.dir1,value:e.dir2}))):[{key:"",value:""}];const e=o.subfilter.filter((e=>""!==e.sub1||""!==e.sub2));e.length>0&&(x.value=e)}})(),t({onConfirm:async({hide:e})=>{await(r.value?.validate());const t=(()=>{const e=[{sub1:"",sub2:""},{sub1:"",sub2:""},{sub1:"",sub2:""}];e.forEach(((e,t)=>{x.value.length-1<t||(e.sub1=x.value[t].sub1,e.sub2=x.value[t].sub2)}));const t=c.value.filter((e=>""!==e.key||""!==e.value)).map((e=>({dir1:e.key,dir2:e.value})));return{...Z(u),advanced:u.advancedfeature,subfilter:e,rewritedir:JSON.stringify(t)}})();n?await Bt(t):await Et(t),d?.(),e()}}),(e,t)=>{const a=Jt,i=qt,s=Mt,o=Kt,d=Gt,m=Qt,v=ea,g=f,b=l,w=zt,S=_a,k=Se;return I(),O("div",tn,[j(S,{ref_key:"formRef",ref:r,model:M(u),rules:p},{default:A((()=>[j(s,null,{default:A((()=>[j(i,{label:"Show Proxy Path"},{default:A((()=>[j(a,{value:M(u).keepuri,"onUpdate:value":t[0]||(t[0]=e=>M(u).keepuri=e),"checked-value":1,"unchecked-value":0},null,8,["value"])])),_:1}),j(i,{label:e.$t("Site.Lable.index_47")},{default:A((()=>[j(a,{value:M(u).cache,"onUpdate:value":t[1]||(t[1]=e=>M(u).cache=e),"checked-value":1,"unchecked-value":0},null,8,["value"])])),_:1},8,["label"]),j(i,{label:e.$t("Site.Lable.index_35")},{default:A((()=>[j(a,{value:M(u).advancedfeature,"onUpdate:value":t[2]||(t[2]=e=>M(u).advancedfeature=e),"checked-value":1,"unchecked-value":0},null,8,["value"])])),_:1},8,["label"])])),_:1}),j(i,{label:e.$t("Site.Lable.index_38"),path:"proxyname"},{default:A((()=>[H("div",an,[j(o,{value:M(u).proxyname,"onUpdate:value":t[3]||(t[3]=e=>M(u).proxyname=e),disabled:M(n),placeholder:"","input-props":{name:"name"}},null,8,["value","disabled"])])])),_:1},8,["label"]),1===M(u).cache?(I(),G(i,{key:0,label:e.$t("Site.Lable.index_39"),path:"cachetime"},{default:A((()=>[H("div",ln,[j(v,null,{default:A((()=>[j(d,{value:M(u).cachetime,"onUpdate:value":t[4]||(t[4]=e=>M(u).cachetime=e),min:1,"show-button":!1,placeholder:"","input-props":{name:"time"}},null,8,["value"]),j(m,{class:"w-70px text-center"},{default:A((()=>[F(z(M(u).cachetime>1?"Minutes":"Minute"),1)])),_:1})])),_:1})])])),_:1},8,["label"])):V("",!0),j(i,{label:e.$t("Site.TableRow.index_17"),path:"proxydir"},{default:A((()=>[H("div",nn,[j(o,{value:M(u).proxydir,"onUpdate:value":t[5]||(t[5]=e=>M(u).proxydir=e),placeholder:"","input-props":{name:"dir"}},null,8,["value"])])])),_:1},8,["label"]),j(i,{label:e.$t("Site.Lable.index_33")},{default:A((()=>[H("div",sn,[j(o,{value:M(u).proxysite,"onUpdate:value":[t[6]||(t[6]=e=>M(u).proxysite=e),_],placeholder:"","input-props":{name:"url"}},null,8,["value"])])])),_:1},8,["label"]),j(i,{label:e.$t("Site.Lable.index_36")},{default:A((()=>[H("div",on,[j(o,{value:M(u).todomain,"onUpdate:value":t[7]||(t[7]=e=>M(u).todomain=e),placeholder:"","input-props":{name:"domain"},onBlur:h},null,8,["value"])])])),_:1},8,["label"]),ae(j(i,{label:"URL Rewrite"},{default:A((()=>[j(g,{class:"w-450px!",min:1,value:M(c),"onUpdate:value":t[8]||(t[8]=e=>q(c)?c.value=e:null),preset:"pair","key-placeholder":"/aaa","value-placeholder":"/bbb"},null,8,["value"])])),_:1},512),[[le,1===M(u).advancedfeature]]),ae(j(i,{label:e.$t("Site.Lable.index_37")},{default:A((()=>[j(s,{class:"flex-1",vertical:""},{default:A((()=>[(I(!0),O(K,null,ie(M(x),((t,a)=>(I(),G(s,{key:`${a+1}`,class:"sub-rows items-center"},{default:A((()=>[H("div",dn,[j(o,{value:t.sub1,"onUpdate:value":e=>t.sub1=e,placeholder:e.$t("Site.Placeholder.index_20"),"input-props":{name:"sub1"}},null,8,["value","onUpdate:value","placeholder"])]),H("div",rn,[j(o,{value:t.sub2,"onUpdate:value":e=>t.sub2=e,placeholder:e.$t("Site.Placeholder.index_21"),"input-props":{name:"sub2"}},null,8,["value","onUpdate:value","placeholder"])]),H("div",null,[j(b,{type:"error",disabled:0===a&&1===M(x).length,onClick:e=>(e=>{x.value.length<=1||x.value.splice(e,1)})(a)},{default:A((()=>[F(z(e.$t("Public.Btn.Del")),1)])),_:2},1032,["disabled","onClick"])])])),_:2},1024)))),128)),H("div",null,[j(w,{type:"primary",disabled:M(x).length>=3,onClick:y},{default:A((()=>[H("span",null,z(e.$t("Site.Config.index_87")),1)])),_:1},8,["disabled"])])])),_:1})])),_:1},8,["label"]),[[le,1===M(u).advancedfeature]])])),_:1},8,["model"]),j(k,{class:"mt-12px"},{default:A((()=>[H("li",null,z(e.$t("Site.Config.index_88")),1),H("li",null,z(e.$t("Site.Config.index_89")),1),H("li",null,z(e.$t("Site.Config.index_90")),1),H("li",null,z(e.$t("Site.Config.index_91")),1)])),_:1})])}}}),cn={class:"p-20px"},pn={class:"mt-12px"},_n=N({__name:"config",props:{data:{}},emits:["close"],setup(e,{emit:t}){const{multiService:a}=Q(c()),l=e,{row:i,siteName:s,getList:d}=l.data,{data:r}=sl(),u=t,p=_e(),_=W(""),m=W(""),v=W(""),f=W(),h=async()=>{const{message:e}=await Tt({path:v.value,data:_.value,encoding:m.value});o(e)&&n.success(e.msg),d?.(),u("close")};return(async()=>{await(async()=>{const{message:e}=await fa({site_id:r.id});o(e)&&(f.value=e.result)})(),(async()=>{const{message:e}=await jt({sitename:s,proxyname:i.proxyname,webserver:a.value?f.value:p.webserver});o(e)&&(v.value=e.file,_.value=e.data,m.value=e.encoding)})()})(),(e,t)=>{const a=zt,l=Se;return I(),O("div",cn,[j(Wa,{value:M(_),"onUpdate:value":t[0]||(t[0]=e=>q(_)?_.value=e:null),height:350,"show-tips":!1},null,8,["value"]),H("div",pn,[j(a,{type:"primary",onClick:h},{default:A((()=>[F(z(e.$t("Site.Cert.index_60")),1)])),_:1})]),j(l,{class:"mt-24px"},{default:A((()=>[H("li",null,z(e.$t("Site.Config.index_83")),1)])),_:1})])}}}),mn=N({__name:"index",setup(e,{expose:t}){const{t:a}=D(),{data:n}=sl(),s=e=>({proxyname:e.proxyname,sitename:e.sitename,proxydir:e.proxydir,proxysite:e.proxysite,todomain:e.todomain,subfilter:e.subfilter,advanced:e.advanced,cachetime:e.cachetime,keepuri:e.keepuri,rewritedir:JSON.stringify(e.rewritedir),advancedfeature:e.advancedfeature}),{keys:o,table:d,columns:r}=xe([{type:"selection",width:40},{key:"proxyname",title:a("Site.TableRow.index_2"),width:80,ellipsis:{tooltip:{width:"trigger"}}},{key:"proxydir",title:a("Site.TableRow.index_17"),width:90,ellipsis:{tooltip:{width:"trigger"}}},{key:"proxysite",title:a("Site.Lable.index_33"),ellipsis:{tooltip:{width:"trigger"}},render:e=>j("a",{class:"text-primary text-primary-hover",href:e.proxysite,target:"_blank"},[e.proxysite])},{key:"cache",title:a("Site.Lable.index_31"),width:90,render:e=>j(l,{type:1===e.cache?"primary":"error",onClick:async()=>{await Bt({...s(e),type:e.type,cache:1===e.cache?0:1}),e.cache=1===e.cache?0:1}},{default:()=>[1===e.cache?"Enabled":"Disabled"]})},{key:"type",title:a("Site.TableRow.index_14"),width:90,render:e=>j(Ce,{value:e.type,"checked-value":1,"unchecked-value":0,"checked-title":"Running","unchecked-title":"Paused",onClick:async t=>{await Bt({...s(e),type:t,cache:e.cache}),e.type=t}},null)},we({width:140,options:e=>[{label:a("Site.TableOP.index_2"),onClick:()=>{x(e)}},{label:a("Site.TableOP.index_7"),class:"edit-btn",onClick:()=>{f(e)}},{label:a("Public.Btn.Del"),class:"delete-btn",onClick:()=>{fe({title:a("Site.Config.Proxy.index_1",[e.proxyname]),content:a("Site.Config.Proxy.index_2"),onConfirm:async()=>{await Nt({sitename:n.name,proxyname:e.proxyname}),_()}})}}]})]),u=[{key:"del",type:"confirm",label:a("Site.Batch.index_20"),confirm:{title:a("Site.Batch.index_21"),desc:a("Site.Batch.index_11"),api:e=>Nt({sitename:n.name,proxyname:e.proxyname},!1),done:()=>{_()},columns:[{key:"proxyname",title:a("Site.TableRow.index_2"),ellipsis:{tooltip:{width:"trigger"}}}]}}],{loading:c,setLoading:p}=ye(),_=async()=>{try{p(!0);const{message:e}=await Dt({sitename:n.name});d.data=i(e)?e:[]}finally{o.value=[],p(!1)}},m=be(a("Site.Config.index_86"),{row:void 0,siteName:n.name,isEdit:!1,getList:_}),v=()=>{m.data.row=void 0,m.data.isEdit=!1,m.title=a("Site.Config.index_86"),m.show=!0},f=e=>{m.data.row=e,m.data.isEdit=!0,m.title=`${a("Site.Config.index_75")} [${e.proxyname}]`,m.show=!0},h=be("",{row:void 0,siteName:n.name,getList:_}),x=e=>{h.data.row=e,h.title=`${a("Site.Config.index_76")} [${e.proxyname}]`,h.show=!0};return _(),t({init:_}),(e,t)=>{const a=zt,l=ge,i=ve,n=me,s=va;return I(),O("div",null,[j(n,null,{toolsLeft:A((()=>[j(a,{class:"add-btn",type:"primary",onClick:v},{default:A((()=>[F(z(e.$t("Site.Config.index_85")),1)])),_:1})])),table:A((()=>[j(l,{"checked-row-keys":M(o),"onUpdate:checkedRowKeys":t[0]||(t[0]=e=>q(o)?o.value=e:null),"row-key":"proxyname",loading:M(c),"max-height":440,data:M(d).data,columns:M(r)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:A((()=>[j(i,{"checked-row-keys":M(o),"onUpdate:checkedRowKeys":t[1]||(t[1]=e=>q(o)?o.value=e:null),"row-key":"proxyname",data:M(d).data,options:u},null,8,["checked-row-keys","data"])])),_:1}),j(s,{show:M(m).show,"onUpdate:show":t[2]||(t[2]=e=>M(m).show=e),title:M(m).title,data:M(m).data,width:660,footer:!0,component:un},null,8,["show","title","data"]),j(s,{show:M(h).show,"onUpdate:show":t[3]||(t[3]=e=>M(h).show=e),title:M(h).title,data:M(h).data,width:580,component:_n},null,8,["show","title","data"])])}}}),vn={class:"pt-8px"},fn=N({__name:"index",setup(e,{expose:t}){const{data:a}=sl(),l=W();return t({init:()=>{l.value.init()}}),(e,t)=>(I(),O("div",vn,[j(za,{ref_key:"formRef",ref:l,site:M(a)},null,8,["site"])]))}}),hn=N({__name:"index",setup(e,{expose:t}){const{data:a}=sl(),l=W("None"),{loading:i,setLoading:n}=ye(),s=async()=>{try{n(!0);const{message:e}=await Wt({siteName:a.name});o(e)&&(l.value=u(e.result)?e.result:"None")}finally{n(!1)}};return s(),t({init:s}),(e,t)=>{const a=Ma,n=h;return I(),G(n,{class:"h-560px",show:M(i)},{default:A((()=>[j(a,{log:M(l)},null,8,["log"])])),_:1},8,["show"])}}}),xn=N({__name:"index",setup(e,{expose:t}){const{data:a}=sl(),l=W("None"),{loading:i,setLoading:n}=ye(),s=async()=>{try{n(!0);const{message:e}=await It({siteName:a.name});o(e)&&(l.value=u(e.result)?e.result:"None")}finally{n(!1)}};return s(),t({init:s}),(e,t)=>{const a=Ma,n=h;return I(),G(n,{class:"h-560px",show:M(i)},{default:A((()=>[j(a,{log:M(l)},null,8,["log"])])),_:1},8,["show"])}}}),yn={class:"text-error"},gn={class:"w-400px p-20px"},bn={class:"mb-16px"},wn=N({__name:"index",setup(e,{expose:t}){const{t:a}=D(),i=_e(),{data:s}=sl(),d=ne((()=>{let e="";switch(i.webserver){case"nginx":e=".log";break;case"apache":e="-access_log";break;default:e="_ols.access_log"}return`/www/wwwlogs/${s.name}${e}`})),r=ne((()=>{const e=d.value.split("/");return e[e.length-1]})),u=()=>{fe({title:a("Site.Config.index_104"),content:`${a("Site.Config.index_105")} [${r.value}] ${a("Site.Config.index_106")}`,onConfirm:async({hide:e})=>{await Ot({path:d.value}),e(),_()}})},c=W(!1),p=W(0),_=async()=>{c.value=!0,m()},m=(e=0)=>{let t=setTimeout((async()=>{const{message:e}=await Ht({path:d.value});o(e)&&(p.value=e.result,p.value>=100?(n.success(a("Site.Config.index_107")),c.value=!1,p.value=0,g(),clearTimeout(t)):m(1e3))}),e)},v=e=>{$e({title:`[${e}] ${a("Site.Config.index_103")}`,data:{type:e,path:d.value},component:qa})},{table:f,columns:h}=xe([{key:"start_time",title:a("Site.Cert.index_68")},{key:"time",title:a("Site.DelSite.index_6"),render:e=>`${e.time.substring(0,4)} s`},{key:"xss",title:a("Site.TableRow.index_4"),render:e=>e.xss>0?j("span",{class:"text-error"},[e.xss]):e.xss},{key:"sql",title:a("Site.TableRow.index_5"),render:e=>e.sql>0?j("span",{class:"text-error"},[e.sql]):e.sql},{key:"san",title:a("Site.TableRow.index_6"),render:e=>e.san>0?j("span",{class:"text-error"},[e.san]):e.san},{key:"php",title:a("Site.TableRow.index_27"),render:e=>e.php>0?j("span",{class:"text-error"},[e.php]):e.php},{key:"ip",title:a("Site.TableRow.index_7"),render:e=>e.ip>0?j(l,{onClick:()=>{v("ip")}},{default:()=>[e.ip]}):e.ip},{key:"url",title:a("Site.TableRow.index_8"),render:e=>e.url>0?j(l,{onClick:()=>{v("url")}},{default:()=>[e.url]}):e.url}]),{loading:x,setLoading:y}=ye(),g=async()=>{try{y(!0);const{message:e}=await At({path:d.value});o(e)&&(f.data=[e])}finally{y(!1)}},b=()=>{g()};return b(),t({init:b}),(e,t)=>{const a=zt,i=ge,n=me,s=Se,o=ta,d=va;return I(),O("div",null,[j(n,null,{toolsLeft:A((()=>[j(a,{type:"primary",onClick:u},{default:A((()=>[F(z(e.$t("Site.Config.index_104")),1)])),_:1})])),table:A((()=>[j(i,{loading:M(x),"loading-num":1,data:M(f).data,columns:M(h)},null,8,["loading","data","columns"])])),_:1}),j(s,{class:"mt-16px"},{default:A((()=>[H("li",null,[F(z(e.$t("Site.Config.index_108"))+" ",1),H("span",yn,z(e.$t("Site.Config.index_109")),1)]),H("li",null,z(e.$t("Site.Config.index_110")),1),H("li",null,z(e.$t("Site.Config.index_111")),1),H("li",null,z(e.$t("Site.Config.index_112")),1),H("li",null,[j(l,{href:"https://www.aapanel.com/forum/d/3351-nginx-waf-instructions",target:"_blank"},{default:A((()=>[F(z(e.$t("Site.Config.index_113")),1)])),_:1}),F(" "+z(e.$t("Site.Config.index_114")),1)])])),_:1}),j(d,{show:M(c),"onUpdate:show":t[0]||(t[0]=e=>q(c)?c.value=e:null)},{default:A((()=>[H("div",gn,[H("div",bn,z(e.$t("Site.Config.index_115")),1),j(o,{type:"line",status:"success",height:24,percentage:M(p),"border-radius":4,"indicator-placement":"inside"},null,8,["percentage"])])])),_:1},8,["show"])])}}}),Sn=N({__name:"index",setup(e,{expose:t}){const{t:a}=D(),{config:l}=sl(),i=W("access"),n=W(),s=[{key:"access",label:a("Site.Config.index_100"),component:hn},{key:"error",label:a("Site.Config.index_101"),component:xn},{key:"security",label:a("Site.Config.index_102"),component:wn}];return i.value=l.subMenu||"access",l.subMenu="",t({init:()=>{i.value="access",Y((()=>{n.value?.init()}))}}),(e,t)=>{const a=pa;return I(),G(a,{value:M(i),"onUpdate:value":t[0]||(t[0]=e=>q(i)?i.value=e:null),ref_key:"tabsRef",ref:n,options:s},null,8,["value"])}}}),kn={class:"cert-info"},Cn={class:"cert-label"},$n={class:"cert-value"},Pn={class:"cert-info"},Ln={class:"cert-label"},Un={class:"cert-value"},Rn={class:"cert-info"},En={class:"cert-label"},Bn={class:"cert-value"},Tn={class:"cert-info"},jn={class:"cert-label"},Nn={class:"cert-value"},Dn={key:0,class:"text-primary"},Wn={key:1,class:"text-error"},In={class:"cert-info"},On={class:"cert-label"},Hn={class:"cert-value"},An={class:"w-48%"},zn={class:"mb-8px"},Mn={class:"w-48%"},qn={class:"mb-8px"},Fn=N({__name:"index",props:{info:{default:null},isRenew:{type:Boolean,default:!1},loading:{type:Boolean,default:!1}},emits:["refresh"],setup(e,{expose:t,emit:a}){const i=e,s=a,{t:d}=D(),{data:r}=sl(),u=_e(),c=W(-1),p=W(!1),_=W(!1),m=W(""),v=W("");let f="";const w=W("");let S="";const k=W({issuer:"",notAfter:"",notBefore:"",dns:[],subject:"",endtime:0}),C=ne((()=>c.value===Ga.LetsEncryptDeploy?d("Site.Cert.index_65"):c.value===Ga.BusinessDeploy?d("Site.Cert.index_64"):c.value===Ga.TestDeploy?d("Site.Cert.index_38"):d("Site.Cert.index_37"))),$=ne((()=>!!w.value)),P=ne((()=>i.isRenew||c.value===Ga.LetsEncryptDeploy)),L=ne((()=>!1)),U=ne((()=>p.value)),R=async e=>{e?(await Ja({siteName:r.name}),s("refresh")):fe({title:d("Site.Cert.index_12"),content:d("Site.Cert.index_13"),onConfirm:async()=>{await Fa({siteName:r.name}),s("refresh")},onPublicClose:()=>{_.value=!0}})},E=()=>{""!==v.value.trim()&&""!==w.value.trim()?v.value!==f&&f||w.value!==S&&S?fe({title:d("Site.Cert.index_10"),content:d("Site.Cert.index_11"),onConfirm:async()=>{await B()}}):B():n.error(d("Site.Cert.index_9"))},B=async()=>{const{message:e}=await x({key:v.value,cert:w.value});o(e)&&e.hash&&(await y({hash:e.hash,domains:JSON.stringify([r.name]),append:1}),n.success(d("SSL.index_32"))),J()},T=async()=>{const{message:e}=await g({hash:i.info?.hash||""});o(e)&&$e({hideClose:!0,data:{isJump:!1,task_id:e.task_id,onFinish:()=>{s("refresh")}},component:Ya})},N=async()=>{await Ka({updateOf:1,siteName:r.name}),J()},J=()=>{s("refresh"),u.setRefresh(!0)};return se((()=>{const{info:e}=i;e&&(c.value=e.type,p.value=e.status,_.value=e.httpTohttps,v.value=e.key||"",f=e.key||"",w.value=e.csr||"",S=e.csr||"",k.value=e.cert_data,m.value=e.index)})),t({init:s("refresh")}),(e,t)=>{const a=l,i=aa,n=la,s=Jt,o=b,d=Yt,r=Te,u=Mt,c=zt,m=Se,f=h;return I(),G(f,{show:e.loading},{default:A((()=>[M($)?(I(),G(d,{key:0,class:"mb-16px",type:"success","show-icon":!1},{default:A((()=>[j(o,{"x-gap":12,cols:"15"},{default:A((()=>[j(i,{span:"8"},{default:A((()=>[H("div",kn,[H("div",Cn,z(e.$t("Site.Cert.index_44"))+z(e.$t("Public.Punctuation.Colon")),1),H("div",$n,[j(a,null,{default:A((()=>[F(z(M(C)),1)])),_:1})])])])),_:1}),j(i,{span:"7"},{default:A((()=>[H("div",Pn,[H("div",Ln,z(e.$t("Site.Cert.index_45"))+z(e.$t("Public.Punctuation.Colon")),1),H("div",Un,[j(n,null,{default:A((()=>[F(z(M(k).issuer||"other"),1)])),_:1})])])])),_:1}),j(i,{span:"8"},{default:A((()=>[H("div",Rn,[H("div",En,z(e.$t("Site.Cert.index_46"))+z(e.$t("Public.Punctuation.Colon")),1),H("div",Bn,[j(n,null,{default:A((()=>[F(z(M(k).dns.join(e.$t("Public.Punctuation.Comma"))),1)])),_:1})])])])),_:1}),j(i,{span:"7"},{default:A((()=>[H("div",Tn,[H("div",jn,z(e.$t("Site.Cert.index_47"))+z(e.$t("Public.Punctuation.Colon")),1),H("div",Nn,[M(k).endtime>0?(I(),O("span",Dn,z(e.$t("Site.Cert.index_48",{date:M(k).notAfter,days:M(k).endtime})),1)):(I(),O("span",Wn,z(e.$t("Site.Cert.index_47")),1))])])])),_:1}),j(i,{span:"8"},{default:A((()=>[H("div",In,[H("div",On,z(e.$t("Site.Cert.index_49"))+z(e.$t("Public.Punctuation.Colon")),1),H("div",Hn,[j(s,{value:M(_),"onUpdate:value":[t[0]||(t[0]=e=>q(_)?_.value=e:null),R],size:"small"},null,8,["value"])])])])),_:1})])),_:1})])),_:1})):V("",!0),j(u,{class:"mb-16px",size:10,justify:"space-between"},{default:A((()=>[H("div",An,[H("div",zn,z(e.$t("Site.Cert.index_50")),1),j(r,{value:M(v),"onUpdate:value":t[1]||(t[1]=e=>q(v)?v.value=e:null),rows:10},null,8,["value"])]),H("div",Mn,[H("div",qn,z(e.$t("Site.Cert.index_51")),1),j(r,{value:M(w),"onUpdate:value":t[2]||(t[2]=e=>q(w)?w.value=e:null),rows:10},null,8,["value"])])])),_:1}),j(u,{class:"mb-12px"},{default:A((()=>[j(c,{type:"primary",onClick:E},{default:A((()=>[F(z(M(p)?e.$t("Public.Btn.Save"):e.$t("Site.Cert.index_52")),1)])),_:1}),M(P)?(I(),G(c,{key:0,type:"primary",onClick:T},{default:A((()=>[F(z(e.$t("Site.Cert.index_53")),1)])),_:1})):V("",!0),M(L)?(I(),G(c,{key:1},{default:A((()=>[F(z(e.$t("Site.Cert.index_54")),1)])),_:1})):V("",!0),M(U)?(I(),G(c,{key:2,onClick:N},{default:A((()=>[F(z(e.$t("Site.Cert.index_55")),1)])),_:1})):V("",!0)])),_:1}),j(m,null,{default:A((()=>[H("li",null,z(e.$t("Site.Cert.index_33")),1),H("li",null,z(e.$t("Site.Cert.index_34")),1),H("li",null,z(e.$t("Site.Cert.index_35")),1),H("li",null,z(e.$t("Site.Cert.index_36")),1)])),_:1})])),_:1},8,["show"])}}}),Jn=_(Fn,[["__scopeId","data-v-1cb405f3"]]),Kn={class:"business-top-tips flex flex-wrap border-#d6e9c6 border-1px rounded-5px p-12px"},Vn={class:"text-#3c763d w-100%"},Xn=N({__name:"top-tips",setup(e){const{t:t}=D(),a=[t("SSL.SiteSSL.index_5"),t("SSL.SiteSSL.index_6"),t("SSL.SiteSSL.index_7"),t("SSL.SiteSSL.index_8"),t("SSL.SiteSSL.index_9"),t("SSL.SiteSSL.index_10"),t("SSL.SiteSSL.index_11")];return(e,t)=>{const l=w,i=Mt;return I(),O("div",Kn,[(I(),O(K,null,ie(a,((e,t)=>j(i,{size:5,key:e,class:oe(["flex-nowrap! leading-20px",{"w-33%":t!==a.length-1}])},{default:A((()=>[j(l,{name:"base-tick",size:16,color:"#ff8d00"}),H("span",Vn,z(e),1)])),_:2},1032,["class"]))),64))])}}}),Gn=_(Xn,[["__scopeId","data-v-77483f61"]]),Yn={class:"my-10px"},Zn=N({__name:"table",setup(e){const a=X((()=>d((()=>t.import("./index-legacy212.js?v=1763625242172")),void 0))),l=X((()=>d((()=>t.import("./index-legacy213.js?v=1763625242172")),void 0))),i=X((()=>d((()=>t.import("./domain-verification-legacy.js?v=1763625242172")),void 0))),n=_e(),s=c(),{userInfo:r}=Q(s),{t:u}=D(),p=J({p:1,limit:9999}),_=be(u("SSL.Business.index_41"),{onRefresh:(e,t)=>{f.data.request=!0,f.data.uc_id=t,f.data.verify=e,f.show=!0,g()}}),m=be(u("SSL.index_44")),v=be(u("SSL.index_49"),{onRefresh:()=>{g(),n.setRefresh(!0)}}),f=be(u("SSL.Business.index_42"),{onRefresh:()=>{g()}}),{table:h,columns:x}=xe([{key:"verify_domains",title:u("Layout.Sider.mail_3"),render:e=>j("span",{innerHTML:e.verify_domains&&e.verify_domains.length>0?e.verify_domains.join("<br/>"):"--"},null)},{key:"title",title:u("Site.Cert.index_44"),render:e=>e.order_info.title,ellipsis:{tooltip:!0}},Za({title:u("SSL.index_54")}),{key:"order_status",title:u("SSL.Business.index_43"),render:e=>{const t=e.order_info;return t.certId||t.domains.length?!t.certId&&t.domains.length?j("span",{class:"color-warning"},[F(" "),u("SSL.Business.index_45"),F(" ")]):"PENDING"===t.order_status&&1===t.status?j("span",{class:"color-warning"},[F(" "),u("SSL.Business.index_46"),F(" ")]):"COMPLETE"===t.order_status&&1===t.status?j("span",{class:"color-#20a53a"},[F(" "),u("SSL.Business.index_47"),F(" ")]):"CANCELLED"===t.order_status&&1===t.status||-1===t.status?j("span",{class:"color-warning"},[F(" "),u("SSL.Business.index_48"),F(" ")]):"FAILED"===t.order_status&&1===t.status?j("span",{class:"color-error"},[F(" "),u("SSL.Business.index_49"),F(" ")]):"EXPIRED"===t.order_status&&1===t.status?j("span",{class:"color-warning"},[F(" "),u("SSL.Business.index_50"),F(" ")]):1!==t.status||["PENDING","COMPLETE","CANCELLED","FAILED","EXPIRED"].includes(t.order_status)?0===t.status?j("span",{class:"color-warning"},[F(" "),u("SSL.Business.index_52"),F(" ")]):void 0:j("span",{class:"color-warning"},[F(" "),u("SSL.Business.index_51"),F(" ")]):j("span",{class:"color-warning cursor-pointer",onClick:()=>y(e)},[" ",u("SSL.Business.index_44")," "])}},we({width:140,options:e=>[{show:!e.order_info.certId&&!e.order_info.domains.length,label:u("SSL.Business.index_53"),onClick:()=>{y(e)}},{show:"PENDING"===e.order_info.order_status&&1===e.order_info.status,label:u("SSL.Business.index_54"),onClick:async()=>{const{message:t}=await S({uc_id:e.order_info.uc_id});o(t)&&(f.data.uc_id=e.order_info.uc_id,f.data.verify=t.data,f.data.paths=t.paths,f.show=!0)}},{show:"COMPLETE"===e.order_info.order_status&&1===e.order_info.status,label:u("SSL.index_58"),onClick:async()=>{v.data.row=e,v.show=!0}},{show:"COMPLETE"===e.order_info.order_status&&1===e.order_info.status,label:u("Ftp.Label.index_11"),onClick:async()=>{const t=window.location.origin+"/v2/business_ssl?action=download_cert&uc_id="+e.order_info.uc_id;window.open(t)}},{show:!1,label:u("Public.Btn.Del"),onClick:()=>{fe({title:u("SSL.index_59"),content:u("SSL.index_60"),onConfirm:async()=>{await k({hash:e.hash}),g()}})}}]})]),y=e=>{_.data.row=e,_.show=!0},g=async()=>{try{h.loading=!0;const{message:e}=await C(p);o(e)&&(h.data=e.data,h.total=e.total)}finally{h.loading=!1}};return r.value.status&&g(),(e,t)=>{const n=zt,s=ge,o=me,d=va,c=Ia;return I(),O("div",Yn,[j(c,{install:M(r).status},{desc:A((()=>[t[6]||(t[6]=H("span",{class:"mr-10px"},"Business certificates require login panel to start using them",-1)),j(n,{type:"primary",onClick:t[0]||(t[0]=()=>M(Pe)())},{default:A((()=>[F(z(e.$t("Login.index_3")),1)])),_:1})])),default:A((()=>[j(o,null,{toolsLeft:A((()=>[j(n,{type:"primary",onClick:t[1]||(t[1]=e=>M(m).show=!0)},{default:A((()=>[F(z(M(u)("SSL.index_44")),1)])),_:1})])),table:A((()=>[j(s,{loading:M(h).loading,data:M(h).data,columns:M(x),"max-height":220},null,8,["loading","data","columns"])])),_:1}),j(d,{show:M(m).show,"onUpdate:show":t[2]||(t[2]=e=>M(m).show=e),title:M(m).title,data:M(m).data,"min-height":250,component:Qa},null,8,["show","title","data"]),j(d,{show:M(_).show,"onUpdate:show":t[3]||(t[3]=e=>M(_).show=e),title:M(_).title,data:M(_).data,width:650,"min-height":450,component:M(a)},null,8,["show","title","data","component"]),j(d,{show:M(v).show,"onUpdate:show":t[4]||(t[4]=e=>M(v).show=e),title:M(v).title,data:M(v).data,width:720,height:530,component:M(l)},null,8,["show","title","data","component"]),j(d,{show:M(f).show,"onUpdate:show":t[5]||(t[5]=e=>M(f).show=e),title:M(f).title,data:M(f).data,width:650,"min-height":450,component:M(i)},null,8,["show","title","data","component"])])),_:1},8,["install"])])}}}),Qn={class:"text-error"},es=_({},[["render",function(e,t){const a=l,i=Se;return I(),G(i,null,{default:A((()=>[H("li",Qn,z(e.$t("SSL.SiteSSL.index_1")),1),H("li",null,z(e.$t("SSL.SiteSSL.index_2")),1),H("li",null,z(e.$t("SSL.SiteSSL.index_3")),1),H("li",null,[F(z(e.$t("SSL.SiteSSL.index_4"))+" ",1),j(a,{href:"https://www.aapanel.com/docs/Function/BusinessCertificate.html",target:"_blank"},{default:A((()=>[F(z(e.$t("SSL.Business.index_20")),1)])),_:1})])])),_:1})}]]),ts=N({__name:"index",setup:e=>(e,t)=>(I(),O("div",null,[j(Gn),j(Zn),j(es)]))}),as={class:"cert-info"},ls={class:"cert-label"},is={class:"cert-value"},ns={class:"cert-info"},ss={class:"cert-label"},os={class:"cert-value"},ds={class:"cert-info"},rs={class:"cert-label"},us={class:"cert-value"},cs={class:"cert-info"},ps={class:"cert-label"},_s={class:"cert-value"},ms={key:0,class:"text-primary"},vs={key:1,class:"text-error"},fs={class:"w-48%"},hs={class:"mb-8px"},xs={class:"w-48%"},ys={class:"mb-8px"},gs=N({__name:"cert",emits:["update"],setup(e,{emit:t}){const a=t,{data:l}=sl(),i=_e(),n=W(!1),s=W(1),d=W(""),r=W(""),u=J({hash:"",issuer:"",notAfter:"",notBefore:"",dns:[],subject:"",endtime:0}),c=async()=>{const{message:e}=await g({hash:u.hash});o(e)&&$e({hideClose:!0,data:{isJump:!1,task_id:e.task_id,onFinish:()=>{a("update")}},component:Ya})},p=async()=>{await Ka({updateOf:1,siteName:l.name}),a("update"),i.setRefresh(!0)},{loading:_,setLoading:m}=ye();return(async()=>{try{m(!0);const{message:e}=await Va({siteName:l.name});o(e)&&(n.value=e.status,u.hash=e.hash,u.issuer=e.cert_data.issuer,u.notAfter=e.cert_data.notAfter,u.notBefore=e.cert_data.notBefore,u.dns=e.cert_data.dns,u.subject=e.cert_data.subject,u.endtime=e.cert_data.endtime,d.value=e.key,r.value=e.csr,s.value=e.auto_renew)}finally{m(!1)}})(),(e,t)=>{const a=aa,l=la,i=b,n=Yt,o=Te,m=Mt,v=zt,f=Se,x=h;return I(),G(x,{show:M(_)},{default:A((()=>[j(n,{class:"mb-16px",type:"success","show-icon":!1},{default:A((()=>[j(i,{"x-gap":12,cols:"15"},{default:A((()=>[M(s)?(I(),G(a,{key:0,span:"16"},{default:A((()=>[H("div",as,[H("div",ls,z(e.$t("SSL.SiteSSL.index_22"))+"",1),H("div",is,z(e.$t("SSL.SiteSSL.index_23")),1)])])),_:1})):V("",!0),j(a,{span:"7"},{default:A((()=>[H("div",ns,[H("div",ss,z(e.$t("Site.Cert.index_45"))+"",1),H("div",os,[j(l,null,{default:A((()=>[F(z(M(u).issuer),1)])),_:1})])])])),_:1}),j(a,{span:"8"},{default:A((()=>[H("div",ds,[H("div",rs,z(e.$t("Site.Cert.index_46"))+"",1),H("div",us,[j(l,null,{default:A((()=>[F(z(M(u).dns.join(e.$t("Public.Punctuation.Comma"))),1)])),_:1})])])])),_:1}),j(a,{span:"7"},{default:A((()=>[H("div",cs,[H("div",ps,z(e.$t("Site.Cert.index_47"))+z(e.$t("Public.Punctuation.Colon")),1),H("div",_s,[M(u).endtime>0?(I(),O("span",ms,z(e.$t("Site.Cert.index_48",{date:M(u).notAfter,days:M(u).endtime})),1)):(I(),O("span",vs,z(e.$t("Site.Cert.index_47")),1))])])])),_:1})])),_:1})])),_:1}),j(m,{class:"mb-16px",size:10,justify:"space-between"},{default:A((()=>[H("div",fs,[H("div",hs,z(e.$t("Site.Cert.index_50")),1),j(o,{readonly:"",value:M(d),"onUpdate:value":t[0]||(t[0]=e=>q(d)?d.value=e:null),rows:14},null,8,["value"])]),H("div",xs,[H("div",ys,z(e.$t("Site.Cert.index_51")),1),j(o,{readonly:"",value:M(r),"onUpdate:value":t[1]||(t[1]=e=>q(r)?r.value=e:null),rows:14},null,8,["value"])])])),_:1}),j(m,{class:"mb-12px"},{default:A((()=>[j(v,{type:"primary",onClick:c},{default:A((()=>[F(z(e.$t("Site.Cert.index_53")),1)])),_:1}),j(v,{onClick:p},{default:A((()=>[F(z(e.$t("Site.Cert.index_55")),1)])),_:1})])),_:1}),j(f,null,{default:A((()=>[H("li",null,z(e.$t("SSL.SiteSSL.index_24")),1),H("li",null,z(e.$t("SSL.SiteSSL.index_25")),1)])),_:1})])),_:1},8,["show"])}}}),bs=_(gs,[["__scopeId","data-v-ec2f03c1"]]),ws={class:"flex items-center"},Ss={class:"leading-17px"},ks={class:"w-full"},Cs={class:"w-full"},$s={class:"text-error"},Ps=N({__name:"apply",emits:["update"],setup(e,{emit:t}){const a=de(),{t:l}=D(),{data:s}=sl(),d=_e(),r=t,u=J({auth_type:"http",dns_manual:0,auto_wildcard:0,domains:[],all:!1}),c={domains:{required:!0,trigger:"change",type:"array",message:l("SSL.SiteSSL.index_16")}},_=W(null),m=W([]),v=e=>m.value.find((t=>t.name===e))?.auto,f=()=>{a.push("/ssl_domain/domain")},x=ne((()=>u.domains.length>0&&u.domains.length<m.value.length));re((()=>u.domains),(e=>{e.length===m.value.length?u.all=!0:e.length||(u.all=!1)})),re((()=>u.all),(e=>{e?(u.domains=m.value.map((e=>e.name)),_.value?.validate()):u.domains=[]})),re((()=>u.auth_type),(e=>{"dns"===e?(u.domains=m.value.filter((e=>e.auto)).map((e=>e.name)),_.value?.validate()):u.domains=[]}));const y=ne((()=>u.domains.filter((e=>!v(e))))),g=async()=>{if(await(_.value?.validate()),"dns"===u.auth_type&&y.value.length&&!u.dns_manual)return void n.error({content:()=>ue("span",{innerHTML:`${y.value.join("<br/>")}${l("SSL.SiteSSL.index_14")}`})});let e={auth_type:u.dns_manual?"dns_manual":u.auth_type,auto_wildcard:u.auto_wildcard,domains:JSON.stringify(u.domains),site_id:u.dns_manual?s.id:void 0,deploy:u.dns_manual?0:1};if(u.dns_manual&&"dns"===u.auth_type){const{message:t}=await $({site_id:s.id,domains:JSON.stringify(u.domains)});if(o(t)&&Object.keys(t).length)return void Le(t.auths,s.id,u.domains,(()=>{r("update"),d.setRefresh(!0)}),!0);const i=$e({width:500,height:300,hideClose:!0,component:Ue});try{const{message:t}=await P(e,!1);o(t)&&(t.deploy?(n.success(t.result||l("SSL.index_32")),r("update"),d.setRefresh(!0)):Array.isArray(t.auths)&&t.auths.length&&Le(t.auths,s.id,u.domains,(()=>{r("update"),d.setRefresh(!0)})))}catch(a){Re(Vt(a,"message",""))}finally{i.hide()}return}const{message:t}=await P(e);o(t)&&$e({hideClose:!0,data:{isJump:!1,task_id:t.task_id,onFinish:()=>{r("update"),d.setRefresh(!0)}},component:Ya})},{loading:b,setLoading:S}=ye();return ee((()=>{(async()=>{try{S(!0);const{message:e}=await Ne({id:s.id});if(i(e)){const t=e.map((async e=>{const{message:t}=await L({domain:e.name});o(t)&&m.value.push({name:e.name,auto:t.support.includes("auto")})}));await Promise.all(t)}}finally{S(!1)}})()})),(e,t)=>{const a=w,l=Yt,i=ia,n=p,s=na,o=qt,d=Xt,r=Mt,S=Zt,k=sa,C=h,$=zt,P=_a,L=Se;return I(),O("div",null,[ae(j(l,{"show-icon":!1,class:"mb-10px"},{default:A((()=>[H("div",ws,[j(a,{name:"base-info",size:"17",class:"mr-8px"}),H("span",Ss,z(e.$t("SSL.SiteSSL.index_12")),1)])])),_:1},512),[[le,"dns"===M(u).auth_type]]),j(P,{ref_key:"formRef",ref:_,model:M(u),rules:c,"label-width":"140"},{default:A((()=>[j(o,{label:e.$t("Config.Safe.Ssl.index_2")},{default:A((()=>[j(s,{value:M(u).auth_type,"onUpdate:value":t[0]||(t[0]=e=>M(u).auth_type=e)},{default:A((()=>[j(n,null,{default:A((()=>[j(i,{value:"http"},{default:A((()=>[F(z(e.$t("SSL.SiteSSL.index_17")),1)])),_:1}),j(i,{value:"dns"},{default:A((()=>[F(z(e.$t("SSL.index_12"))+" (Wildcard support) ",1)])),_:1})])),_:1})])),_:1},8,["value"])])),_:1},8,["label"]),ae(j(o,{label:" ","show-feedback":!1},{default:A((()=>[j(d,{checked:M(u).dns_manual,"onUpdate:checked":t[1]||(t[1]=e=>M(u).dns_manual=e),"checked-value":1,"unchecked-value":0},{default:A((()=>[F(z(e.$t("SSL.index_2")),1)])),_:1},8,["checked"])])),_:1},512),[[le,"dns"===M(u).auth_type]]),ae(j(o,{label:" "},{default:A((()=>[j(d,{checked:M(u).auto_wildcard,"onUpdate:checked":t[2]||(t[2]=e=>M(u).auto_wildcard=e),"checked-value":1,"unchecked-value":0},{default:A((()=>[F(z(e.$t("SSL.SiteSSL.index_20")),1)])),_:1},8,["checked"])])),_:1},512),[[le,"dns"===M(u).auth_type]]),j(o,{label:e.$t("Mail.Domain.index_3"),path:"domains"},{default:A((()=>[j(C,{show:M(b),class:"p-12px w-300px max-h-300px min-h-100px overflow-auto border border-solid border-#ccc"},{default:A((()=>[j(d,{class:"mb-12px",checked:M(u).all,"onUpdate:checked":t[3]||(t[3]=e=>M(u).all=e),label:e.$t("Public.SelectAll"),indeterminate:M(x)},null,8,["checked","label","indeterminate"]),M(m).length?(I(),G(S,{key:0,value:M(u).domains,"onUpdate:value":t[4]||(t[4]=e=>M(u).domains=e)},{default:A((()=>[j(r,{class:"flex-col!",size:12},{default:A((()=>[(I(!0),O(K,null,ie(M(m),(e=>(I(),G(d,{key:e.name,value:e.name,label:e.name},null,8,["value","label"])))),128))])),_:1})])),_:1},8,["value"])):(I(),G(k,{key:1,description:"No domain name"}))])),_:1},8,["show"])])),_:1},8,["label"]),ae(j(o,{label:" "},{default:A((()=>[j(l,{"show-icon":!1,type:M(y).length?"warning":"success"},{default:A((()=>[(I(!0),O(K,null,ie(M(u).domains,(t=>(I(),G(r,{key:t},{default:A((()=>[v(t)?(I(),G(r,{key:0,class:"flex-nowrap! py-3px"},{default:A((()=>[j(a,{name:"base-success",size:"17",color:"#20a53a"}),H("span",ks,"["+z(t)+"] "+z(e.$t("SSL.SiteSSL.index_13")),1)])),_:2},1024)):(I(),G(r,{key:1,class:"flex-nowrap! py-3px"},{default:A((()=>[j(a,{name:"base-error",size:"17",color:"#E85445"}),H("span",Cs,"["+z(t)+"] "+z(e.$t("SSL.SiteSSL.index_14")),1),j($,{type:"primary",size:"tiny",onClick:f},{default:A((()=>[F(z(e.$t("SSL.SiteSSL.index_21")),1)])),_:1})])),_:2},1024))])),_:2},1024)))),128))])),_:1},8,["type"])])),_:1},512),[[le,"dns"===M(u).auth_type&&M(u).domains.length&&!M(u).dns_manual]]),j(o,{label:" "},{default:A((()=>[j($,{type:"primary",onClick:g},{default:A((()=>[F(z(e.$t("Public.Btn.Apply")),1)])),_:1})])),_:1})])),_:1},8,["model"]),ae(j(L,{class:"mt-16px"},{default:A((()=>[H("li",$s,z(e.$t("SSL.SiteSSL.index_15")),1),H("li",null,z(e.$t("Site.Cert.index_21")),1),H("li",null,z(e.$t("Site.Cert.index_23")),1),H("li",null,z(e.$t("Site.Cert.index_24")),1)])),_:1},512),[[le,"http"===M(u).auth_type]]),ae(j(L,{class:"mt-24px"},{default:A((()=>[t[5]||(t[5]=H("li",null,"Manually resolved certificates do not support auto-renewal",-1)),H("li",null,z(e.$t("Site.Cert.index_25")),1),H("li",null,z(e.$t("Site.Cert.index_26")),1),H("li",null,z(e.$t("Site.Cert.index_27")),1),H("li",null,z(e.$t("Site.Cert.index_28")),1)])),_:1,__:[5]},512),[[le,"dns"===M(u).auth_type]])])}}}),Ls=N({__name:"index",props:{isOpen:{type:Boolean},type:{},onRefresh:{type:Function}},setup(e){const t=e,a=()=>{t.onRefresh()};return(e,l)=>(I(),O("div",null,[t.isOpen&&"Let's Encrypt"===t.type?(I(),G(bs,{key:0,onUpdate:a})):(I(),G(Ps,{key:1,onUpdate:a}))]))}}),Us=N({__name:"index",props:{onMenuChange:{type:Function}},setup(e,{expose:t}){const{data:a}=sl(),{t:l}=D(),i=J({p:1,limit:99999}),{columns:s,table:d}=xe([{key:"domain",title:l("Site.Cert.index_29"),render:e=>j("span",{innerHTML:e.verify_domains.length>0?e.verify_domains.join("<br/>"):"--"},null)},Za({title:l("SSL.index_54"),width:140}),{key:"issuer",title:l("Site.Cert.index_30"),ellipsis:{tooltip:!0}},we({width:150,options:t=>[{label:l("Public.Btn.Deploy"),onClick:async()=>{try{await y({hash:t.hash,domains:JSON.stringify([a.name]),append:1}),n.success(l("SSL.index_32")),setTimeout((()=>{e.onMenuChange()}),500)}catch(i){console.log(i)}}},{show:"Let's Encrypt"===t.provider,label:l("Public.Btn.Del"),onClick:()=>{(e=>{Ee({title:l("Site.Cert.index_31"),content:l("Site.Cert.index_32"),onConfirm:async()=>{await k({hash:e.hash}),c()}})})(t)}}]})]),{loading:r,setLoading:u}=ye(!0),c=async()=>{try{u(!0);const{message:e}=await U(i);o(e)&&(d.data=e.data)}finally{u(!1)}};return c(),t({init:c}),(e,t)=>{const a=ge;return I(),O("div",null,[j(a,{loading:M(r),columns:M(s),data:M(d).data,"max-height":510},null,8,["loading","columns","data"])])}}}),Rs={class:"mr-12px"},Es={key:0,class:"mr-12px"},Bs={key:1,class:"mr-12px"},Ts=N({__name:"index",setup(e,{expose:t}){const a=_e(),{data:l}=sl(),{t:i}=D(),n=W("current"),s=W(""),d=W(Ga.NotDeploy),r=W(""),u=W(!1),c=W(0),p=W(""),_=W(!1),m=async()=>{const{message:e}=await g({hash:s.value});o(e)&&$e({hideClose:!0,data:{isJump:!1,task_id:e.task_id,onFinish:()=>{f()}},component:Ya})},v=e=>{h.value[0].data&&(h.value[0].data.loading=e)},f=async()=>{try{v(!0);const{message:a}=await Xa({siteName:l.name});o(a)&&(d.value=a.type,u.value=a.status,c.value=Vt(a,"cert_data.endtime",0),p.value=a.cert_data.issuer_O||"",_.value=(()=>{let e=!1;return c.value<=30&&(e=!0),d.value===Ga.TestDeploy&&c.value<0&&(e=!0),d.value!==Ga.SaveOrHolderDeploy&&d.value!==Ga.NotDeploy||(e=!1),e})(),r.value=a.cert_data.dns.join(","),s.value=a.hash,t=a,h.value[0].data&&(h.value[0].data.info=t),e=_.value,h.value[0].data&&(h.value[0].data.isRenew=e))}catch{u.value=!1,_.value=!1}finally{v(!1)}var e,t},h=W([{key:"current",label:()=>j("div",null,[j("span",null,[F("Current Certs - ")]),j("span",{class:u.value?"text-#1d9534":"text-red-500"},[F("["),u.value?"Deployed":"Not Deployed",F("]")])]),data:{info:null,isRenew:!1,loading:!0,onRefresh:f},component:ce(Jn)},{key:"business",label:i("Site.Cert.index_64"),component:ce(ts)},{key:"let",label:i("Site.Cert.index_65"),data:{isOpen:ne((()=>u.value)),type:ne((()=>p.value)),onRefresh:f},component:ce(Ls)},{key:"holder",label:i("Site.Cert.index_66"),component:ce(Us),data:{onMenuChange:()=>{n.value="current",f(),a.setRefresh(!0)}}}]);return t({init:()=>{f()}}),(e,t)=>{const a=zt,l=Yt,i=pa;return I(),O("div",null,[M(u)?V("",!0):(I(),G(l,{key:0,class:"mb-12px",type:"error","show-icon":!1,style:{"--n-padding":"9px 16px"}},{default:A((()=>[H("span",Rs,z(e.$t("Site.Cert.index_41")),1),j(a,{size:"tiny",type:"primary",onClick:t[0]||(t[0]=e=>n.value="business")},{default:A((()=>[F(z(e.$t("Site.Cert.index_43")),1)])),_:1})])),_:1})),M(u)&&M(_)?(I(),G(l,{key:1,class:"mb-12px",type:"error","show-icon":!1,style:{"--n-padding":"9px 16px"}},{default:A((()=>[M(c)>0?(I(),O("span",Es,z(e.$t("SSL.SiteSSL.index_26",[M(r),M(c)])),1)):(I(),O("span",Bs,z(e.$t("SSL.SiteSSL.index_19",[M(r)])),1)),j(a,{size:"tiny",type:"primary",onClick:m},{default:A((()=>[F(z(e.$t("Site.Cert.index_53")),1)])),_:1})])),_:1})):V("",!0),j(i,{value:M(n),"onUpdate:value":t[1]||(t[1]=e=>q(n)?n.value=e:null),options:M(h)},null,8,["value","options"])])}}}),js={class:"tips"},Ns={class:"w-full ml-12px"},Ds={class:"w-full ml-12px"},Ws={class:"text-warning font-bold"},Is=N({__name:"index",setup(e){const t=c(),{isPro:a}=Q(t),{data:l}=sl(),i=J({maintenance:!1,type:"default",maintenance_title:"",maintenance_big_text:"",maintenance_small_text:"",social_network_links:[],times:null,template_upload:"",background_upload:""}),n=()=>{i.social_network_links.push({title:"",value:""})},s=e=>{const t=l.path;el({path:t,uploadData:{multiple:!1,accept:"bg"===e?".jpg,.jpeg,.png,.gif,.svg,.webp":".html,.phtml,.php"},size:10,onUploadSuccess:a=>{"bg"===e?i.background_upload=`${t}/${a[0].name}`:i.template_upload=`${t}/${a[0].name}`}})},d=()=>{ke({source:371})},r=e=>e<Date.now()-864e5,u=async()=>{const e={set_id:l.id,...i,social_network_links:JSON.stringify(i.social_network_links),template_upload:"custom"===i.type?i.template_upload:""};await ya(e),m()},{loading:p,setLoading:_}=ye(),m=async()=>{try{_(!0);const{message:e}=await ga({set_id:l.id});o(e)&&(i.maintenance="true"===e.maintenance,i.maintenance_title=e.maintenance_title,i.maintenance_big_text=e.maintenance_big_text,i.maintenance_small_text=e.maintenance_small_text,i.social_network_links=e.social_network_links.length?e.social_network_links:[{title:"",value:""}],i.times=Number(e.times)||null,i.template_upload=e.template_upload,i.background_upload=e.background_upload,i.type=e.template_upload?"custom":"default")}finally{_(!1)}};return a.value&&m(),(e,t)=>{const l=zt,o=Jt,c=qt,_=oa,m=na,v=Kt,f=da,x=Mt,y=R,g=ma,b=_a,w=Se,S=h,k=Ia;return I(),G(k,{install:M(a)},{desc:A((()=>[H("span",null,z(e.$t("WP.Config.index_34")),1),j(l,{class:"ml-8px",onClick:d,type:"primary",size:"small"},{default:A((()=>[F(z(e.$t("Component.Auth.index_3")),1)])),_:1})])),default:A((()=>[j(S,{show:M(p),class:"pr-16px"},{default:A((()=>[j(b,{model:M(i),"label-width":"150"},{default:A((()=>[j(c,{label:e.$t("WP.Config.index_33")},{default:A((()=>[j(o,{value:M(i).maintenance,"onUpdate:value":t[0]||(t[0]=e=>M(i).maintenance=e)},null,8,["value"]),H("span",js,z(e.$t("WP.Config.index_35")),1)])),_:1},8,["label"]),j(c,{label:e.$t("Layout.Sider.docker_8")},{default:A((()=>[j(m,{value:M(i).type,"onUpdate:value":t[1]||(t[1]=e=>M(i).type=e)},{default:A((()=>[j(_,{label:e.$t("Site.Proxy.index_54"),value:"default"},null,8,["label"]),j(_,{label:e.$t("Public.Search.Custom"),value:"custom"},null,8,["label"])])),_:1},8,["value"])])),_:1},8,["label"]),"default"===M(i).type?(I(),O(K,{key:0},[j(c,{label:e.$t("WP.Config.index_36")},{default:A((()=>[j(v,{value:M(i).maintenance_title,"onUpdate:value":t[2]||(t[2]=e=>M(i).maintenance_title=e)},null,8,["value"])])),_:1},8,["label"]),j(c,{label:e.$t("WP.Config.index_37")},{default:A((()=>[j(v,{value:M(i).maintenance_big_text,"onUpdate:value":t[3]||(t[3]=e=>M(i).maintenance_big_text=e),maxlength:200},null,8,["value"])])),_:1},8,["label"]),j(c,{label:e.$t("WP.Config.index_38")},{default:A((()=>[j(v,{type:"textarea",value:M(i).maintenance_small_text,"onUpdate:value":t[4]||(t[4]=e=>M(i).maintenance_small_text=e),maxlength:300},null,8,["value"])])),_:1},8,["label"]),j(c,{label:e.$t("WP.Config.index_39")},{default:A((()=>[j(x,null,{default:A((()=>[(I(!0),O(K,null,ie(M(i).social_network_links,((a,s)=>(I(),G(x,{class:"flex-nowrap!",key:s},{default:A((()=>[j(v,{class:"w-150px!",value:a.title,"onUpdate:value":e=>a.title=e,placeholder:e.$t("Config.Alarm.index_7")},null,8,["value","onUpdate:value","placeholder"]),j(v,{class:"w-200px!",value:a.value,"onUpdate:value":e=>a.value=e,placeholder:"https://www.aapanel.com/"},null,8,["value","onUpdate:value"]),j(f,null,{default:A((()=>[j(l,{onClick:e=>(e=>{i.social_network_links=i.social_network_links.filter((t=>t!==e))})(a),disabled:1===M(i).social_network_links.length},{default:A((()=>t[10]||(t[10]=[F("-")]))),_:2,__:[10]},1032,["onClick","disabled"]),j(l,{onClick:n,disabled:M(i).social_network_links.length>=5},{default:A((()=>t[11]||(t[11]=[F("+")]))),_:1,__:[11]},8,["disabled"])])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1},8,["label"]),j(c,{label:e.$t("WP.Config.index_40")},{default:A((()=>[j(y,{value:M(i).times,"onUpdate:value":t[5]||(t[5]=e=>M(i).times=e),type:"datetime",clearable:"","is-date-disabled":r},null,8,["value"])])),_:1},8,["label"]),j(c,{ref:"dbBakFileRef",label:e.$t("WP.Config.index_41"),path:"db_bak_file"},{default:A((()=>[j(l,{onClick:t[6]||(t[6]=e=>s("bg"))},{default:A((()=>[F(z(e.$t("Docker.App.Backup.index_3")),1)])),_:1}),H("div",Ns,[j(g,{value:M(i).background_upload,"onUpdate:value":t[7]||(t[7]=e=>M(i).background_upload=e),"default-path":"/www/wwwroot","checked-type":["file"]},null,8,["value"])])])),_:1},8,["label"])],64)):V("",!0),"custom"===M(i).type?(I(),G(c,{key:1,label:e.$t("WP.Config.index_42")},{default:A((()=>[j(l,{onClick:t[8]||(t[8]=e=>s("template"))},{default:A((()=>[F(z(e.$t("Docker.App.Backup.index_3")),1)])),_:1}),H("div",Ds,[j(g,{value:M(i).template_upload,"onUpdate:value":t[9]||(t[9]=e=>M(i).template_upload=e),"default-path":"/www/wwwroot","checked-type":["file"]},null,8,["value"])])])),_:1},8,["label"])):V("",!0),j(c,{label:" "},{default:A((()=>[j(l,{type:"primary",onClick:u},{default:A((()=>[F(z(e.$t("Public.Btn.Save")),1)])),_:1})])),_:1})])),_:1},8,["model"]),j(w,null,{default:A((()=>[H("li",Ws,z(e.$t("WP.Config.index_43")),1),H("li",null,z(e.$t("WP.Config.index_44")),1),"custom"===M(i).type?(I(),O(K,{key:0},[H("li",null,z(e.$t("WP.Config.index_45")),1),H("li",null,z(e.$t("WP.Config.index_46")),1)],64)):V("",!0)])),_:1})])),_:1},8,["show"])])),_:1},8,["install"])}}}),Os=_(Is,[["__scopeId","data-v-ce54d9d9"]]),Hs={class:"font-bold line-height-24px mb-8px"},As={class:"font-bold line-height-24px mb-8px"},zs={class:"p-16px rounded-8px"},Ms=N({__name:"index",setup(e,{expose:t}){const a=_e(),{data:i}=sl(),{multiService:n,isWebServerJump:s}=Q(c()),{t:d}=D(),r=J({webServer:"apache",ico:""}),u=W(""),p=async()=>{s.value=!0,await tl({name:"nginx",title:"Nginx",admin:!1})},_=W([{label:"Apache",value:"apache"},{label:"Nginx",value:"nginx"},{label:"Openlitespeed",value:"openlitespeed"}]),m=()=>{fe({title:d("WP.Config.index_25"),width:500,content:()=>j(K,null,[j("span",null,[d("WP.Config.index_26",[r.webServer])]),j("div",{class:"mt-12px"},[d("WP.Config.index_27")]),j(Se,{class:"text-12px"},{default:()=>[j("li",{class:"text-warning font-bold"},[d("WP.Config.index_28")]),j("li",{class:"text-warning font-bold"},[d("WP.Config.index_29")]),j("li",null,[d("WP.Config.index_30")]),j("li",null,[d("WP.Config.index_31")])]})]),onConfirm:async()=>{await ba({site_id:i.id,service_type:r.webServer}),f(),a.setRefresh(!0)}})},v=()=>{fe({title:d("WP.Config.index_19"),content:d("WP.Config.index_32"),onConfirm:async()=>{await wa({site_id:i.id}),f(),a.setRefresh(!0)}})},f=async()=>{const{message:e}=await fa({site_id:i.id});o(e)&&(r.webServer=e.result,u.value=e.result.charAt(0).toUpperCase()+e.result.slice(1))};return f(),t({init:f}),(e,t)=>{const a=zt,i=Mt,s=Se,o=ra,d=w,c=Yt,f=ua,h=qt,x=Ft,y=_a,g=l,b=Ia;return I(),G(b,{install:M(n)},{desc:A((()=>[j(i,{class:"items-center"},{default:A((()=>[H("span",null,z(e.$t("WP.Config.index_11")),1),j(a,{size:"small",onClick:p,type:"primary"},{default:A((()=>[F(z(e.$t("file.fileOperation.open")),1)])),_:1})])),_:1})])),default:A((()=>[j(o,{class:"p-16px"},{default:A((()=>[j(i,{class:"mb-20px flex-nowrap!"},{default:A((()=>[t[1]||(t[1]=H("i",{class:"i-material-symbols:network-node color-#20a53a text-24px"},null,-1)),H("div",null,[H("div",Hs,z(e.$t("WP.Config.index_12")),1),j(s,null,{default:A((()=>[H("li",null,z(e.$t("WP.Config.index_13")),1)])),_:1})])])),_:1,__:[1]}),j(i,{class:"flex-nowrap!"},{default:A((()=>[t[2]||(t[2]=H("i",{class:"i-ic:outline-arrow-circle-right color-#20a53a text-24px"},null,-1)),H("div",null,[H("div",As,z(e.$t("WP.Config.index_14")),1),j(s,null,{default:A((()=>[H("li",null,z(e.$t("WP.Config.index_15")),1),H("li",null,z(e.$t("WP.Config.index_16")),1),H("li",null,z(e.$t("WP.Config.index_17")),1)])),_:1})])])),_:1,__:[2]})])),_:1}),j(y,{class:"my-16px",model:M(r)},{default:A((()=>[j(h,{label:e.$t("WP.Config.index_18")},{default:A((()=>[j(c,{"show-icon":!1},{default:A((()=>[j(i,{class:"items-center!",size:2},{default:A((()=>[j(d,{name:`soft-${M(u).toLowerCase()}`,size:"24"},null,8,["name"]),H("span",null,z(M(u)),1)])),_:1})])),_:1}),j(a,{class:"ml-12px",onClick:v},{default:A((()=>[F(z(e.$t("WP.Config.index_19")),1)])),_:1}),j(f,{trigger:"hover",style:{"--n-color":"var(--site-multi-service-rollback-bg)"}},{trigger:A((()=>[j(d,{class:"ml-5px",name:"base-problem",size:"20"})])),default:A((()=>[H("div",zs,z(e.$t("WP.Config.index_20")),1)])),_:1})])),_:1},8,["label"]),j(h,{label:e.$t("WP.Config.index_21")},{default:A((()=>[j(x,{class:"w-300px!",value:M(r).webServer,"onUpdate:value":t[0]||(t[0]=e=>M(r).webServer=e),options:M(_)},null,8,["value","options"])])),_:1},8,["label"]),j(h,{label:" "},{default:A((()=>[j(a,{type:"primary",onClick:m},{default:A((()=>[F(z(e.$t("Public.Btn.Save")),1)])),_:1})])),_:1})])),_:1},8,["model"]),j(s,null,{default:A((()=>[H("li",null,z(e.$t("WP.Config.index_22")),1),H("li",null,[F(z(e.$t("WP.Config.index_23")),1),j(g,{class:"ml-5px",target:"_blank",href:"https://www.aapanel.com/docs/faq/multi-webserver_hosting.html"},{default:A((()=>[F(z(e.$t("WP.Config.index_24")),1)])),_:1})])])),_:1})])),_:1},8,["install"])}}}),qs=_(Ms,[["__scopeId","data-v-e468c3da"]]),Fs={key:0},Js=N({__name:"index",setup(e,{expose:a}){const{t:l}=D(),{isFree:i}=c(),{data:n}=sl();W(!1);const{table:s,columns:r}=xe([{title:l("Site.Config.index_120"),key:"commit_hash_short",render:e=>j(ua,null,{trigger:()=>{let t;return j(Mt,{class:"items-center"},{default:()=>{return[j("div",null,[j("div",null,[e.commit_hash_short]),j("div",{class:"text-font3"},[e.author_name])]),e.deploy_status?j(ca,{type:"success",size:"small",round:!0},(a=t=l("WP.TableRow.index_8"),"function"==typeof a||"[object Object]"===Object.prototype.toString.call(a)&&!pe(a)?t:{default:()=>[t]})):""];var a}})},default:()=>j("span",null,[e.commit_hash])})},{title:l("Site.Config.index_121"),key:"msg",render:e=>j(ua,null,{trigger:()=>j("div",{class:"cursor-pointer text-primary",onClick:()=>p(e)},[e.msg]),default:()=>j("span",null,[F("View log")])})},{title:l("Waf.Area.index_3"),key:"status",render:e=>j("span",{class:e.status?"text-primary":"text-error"},[e.status?"Success":"Failed"])},{title:l("Site.Config.index_122"),key:"deployment_time",render:e=>j(ua,null,{trigger:()=>j("div",null,[j("div",null,[e.deployment_time]),j("div",{class:"text-font3"},[l("Crontab.arrange.index_6"),F(": "),e.execut_time,F("s")])]),default:()=>j("div",null,[l("Site.Config.index_123"),F(": "),e.committed_time])})},we({options:e=>[{disabled:!!e.deploy_status,label:l("WP.Config.index_19"),onClick:async()=>{const t=W(""),{message:a}=await Sa({deploy_id:e.id});o(a)&&(t.value=a.result),fe({title:l("WP.Config.index_19"),width:500,content:()=>j(K,null,[j("span",null,[l("Site.Config.index_124"),F(", "),j("b",{class:"text-warning"},[l("Site.Config.index_125")])]),j(Mt,{class:"items-center flex-nowrap! mt-10px"},{default:()=>[j("span",{class:"whitespace-nowrap"},[l("Site.Config.index_127")]),j(Kt,{"input-props":{spellcheck:!1},type:"textarea",value:t.value,"onUpdate:value":e=>t.value=e,autosize:{minRows:9}},null)]})]),onConfirm:async()=>{const{message:a}=await ka({deploy_id:e.id,deploy_script:t.value||e.script_path});o(a)&&$e({title:l("Site.Config.index_126"),width:500,height:300,content:()=>j("div",{class:"p-16px whitespace-pre-wrap",innerHTML:a.result},null)}),_()}})}}]})]),u=()=>{ke({source:372})},p=e=>{$e({title:`Log [${e.commit_hash_short}]`,width:500,height:420,data:{id:e.id},component:X((()=>d((()=>t.import("./log-legacy2.js?v=1763625242172")),void 0)))})},_=async()=>{try{s.loading=!0;const{message:e}=await Ca({site_id:n.id});o(e)?s.data=e.records||[]:s.data=[]}finally{s.loading=!1}};return _(),a({init:_}),(e,t)=>{const a=w,l=zt,n=Yt,o=ge,d=me;return I(),O("div",null,[M(i)?(I(),O("div",Fs,[j(n,{"show-icon":!1,class:"mb-10px"},{default:A((()=>[j(M(Mt),{class:"items-center flex-nowrap!"},{default:A((()=>[j(a,{class:"flex-shrink-0",name:"base-info",size:"18"}),H("span",null,z(e.$t("Site.Config.index_116")),1),j(l,{class:"ml-5px",type:"primary",size:"small",onClick:u},{default:A((()=>[F(z(e.$t("Site.Config.index_117")),1)])),_:1})])),_:1})])),_:1})])):V("",!0),j(d,null,te({table:A((()=>[j(o,{loading:M(s).loading,data:M(s).data,columns:M(r),"max-height":580},null,8,["loading","data","columns"])])),_:2},[void 0]),1024)])}}}),Ks={class:"p-20px"},Vs=N({__name:"form",props:{data:{}},setup(e,{expose:t}){const{t:a}=D(),{data:l}=sl(),i=e,{getList:n,row:s,isEdit:d}=i.data,r=W("master"),u=W(null),c=J({deploy_script:"",title:""}),p={deploy_script:{required:!0,message:a("Security.Conf.Index_28"),trigger:["blur","input"]},title:{required:!0,message:a("Security.Conf.Index_28"),trigger:["blur","input"]}},{loading:_,setLoading:m}=ye();return(async()=>{if(d&&s)c.deploy_script=s.deploy_script,c.title=s.title;else try{m(!0);const{message:e}=await $a({site_id:l.id});o(e)&&(r.value=e.branch||"master",c.deploy_script=`echo $(date)\ncd ${l.path}\ngit pull origin ${r.value}\necho " Application deployed!"\necho ""`)}finally{m(!1)}})(),t({onConfirm:async()=>{await(u.value?.validate()),d?await Pa({script_id:s.id,deploy_script:c.deploy_script}):await La({site_id:l.id,...c}),n?.()}}),(e,t)=>{const a=Kt,l=qt,i=_a,n=Se,s=h;return I(),O("div",Ks,[j(s,{show:M(_)},{default:A((()=>[j(i,{ref_key:"formRef",ref:u,model:M(c),rules:p},{default:A((()=>[j(l,{label:e.$t("Site.Config.index_138"),path:"deploy_script"},{default:A((()=>[j(a,{class:"w-400px!",value:M(c).deploy_script,"onUpdate:value":t[0]||(t[0]=e=>M(c).deploy_script=e),placeholder:e.$t("Site.Config.index_151"),type:"textarea",rows:10,"input-props":{spellcheck:!1}},null,8,["value","placeholder"])])),_:1},8,["label"]),j(l,{label:e.$t("Config.Panel.index_36"),path:"title"},{default:A((()=>[j(a,{class:"w-400px!",disabled:M(d),value:M(c).title,"onUpdate:value":t[1]||(t[1]=e=>M(c).title=e),placeholder:e.$t("Site.Config.index_139")},null,8,["disabled","value","placeholder"])])),_:1},8,["label"])])),_:1},8,["model"]),j(n,{class:"ml-20px mt-16px"},{default:A((()=>[H("li",null,z(e.$t("Site.Config.index_150")),1)])),_:1})])),_:1},8,["show"])])}}}),Xs=N({__name:"index",setup(e,{expose:t}){const{t:a}=D(),{data:l}=sl(),n=be(a("Site.Config.index_141"),{getList:()=>{r()}}),s=()=>{n.title=a("Site.Config.index_141"),n.data.isEdit=!1,n.show=!0},{table:o,columns:d}=xe([{title:a("Config.Panel.index_36"),key:"title"},{title:a("Site.Config.index_127"),key:"deploy_script",ellipsis:{tooltip:!0}},we({width:150,align:"center",options:e=>[{label:a("Public.Btn.Deploy"),onClick:()=>{fe({title:a("Site.PHP.add_site_50"),content:a("Site.Config.index_142"),onConfirm:async()=>{await Ua({site_id:l.id,script_id:e.id})}})}},{label:a("Public.Btn.Edit"),onClick:()=>{n.title=a("Crontab.arrange.index_38"),n.data.row=e,n.data.isEdit=!0,n.show=!0}},{label:a("Public.Btn.Del"),onClick:()=>{fe({title:a("Crontab.Script.index_42"),content:a("Site.Config.index_143"),onConfirm:async()=>{await Ra({script_id:e.id}),r()}})}}]})]),r=async()=>{try{o.loading=!0;const{message:e}=await Ea({site_id:l.id});i(e)&&(o.data=e||[])}finally{o.loading=!1}};return r(),t({init:r}),(e,t)=>{const a=Yt,l=zt,i=ge,r=me,u=va;return I(),O("div",null,[j(a,{"show-icon":!1,class:"mb-10px"},{default:A((()=>[H("span",null,z(e.$t("Site.Config.index_140")),1)])),_:1}),j(r,null,{toolsLeft:A((()=>[j(l,{type:"primary",onClick:s},{default:A((()=>[F(z(e.$t("Public.Btn.Add")),1)])),_:1})])),table:A((()=>[j(i,{loading:M(o).loading,data:M(o).data,columns:M(d),"max-height":480},null,8,["loading","data","columns"])])),_:1}),j(u,{show:M(n).show,"onUpdate:show":t[0]||(t[0]=e=>M(n).show=e),title:M(n).title,data:M(n).data,width:600,"min-height":320,footer:!0,component:Vs},null,8,["show","title","data"])])}}}),Gs={key:0},Ys={class:"text-primary cursor-pointer"},Zs=["src"],Qs={key:0},eo=N({__name:"index",props:{onJump:{type:Function,default:()=>{}}},setup(e,{expose:t}){const{t:a}=D(),{data:l}=sl(),{isFree:n}=c(),s=e,d=W(!0),r=W(null),u=J({git_provider:"",git_repo:null,git_branch:null,custom_key:"",custom_repo:null,custom_branch:"",track_deployments:null,webhook_url:"",coverage_data:!1,webhook_script:null}),p=J({git_repo:{required:!0,trigger:["blur","change"],message:a("Site.PHP.add_site_53")},git_branch:{required:!0,trigger:["blur","change"],message:a("Site.PHP.add_site_54")},custom_repo:{required:!0,trigger:["blur","change"],message:a("Site.Config.index_135")},custom_branch:{required:!0,trigger:["blur","change"],message:a("Site.Config.index_136")}}),_=W([]),m=W([]),v=W([]),f=[{label:"5",value:5},{label:"10",value:10,disabled:n},{label:"15",value:15,disabled:n},{label:"30",value:30,disabled:n}],x=e=>n&&Number(e.value)>5?j("div",{onClick:()=>ke({source:372})},[j("span",null,[e.label]),j("span",{class:"float-right cursor-pointer color-#ffb800"},[F("PRO")])]):j("span",null,[e.label]),y=()=>{s.onJump()},g=async()=>{fe({title:a("Site.Config.index_133"),content:a("Site.Config.index_137"),onConfirm:async()=>{await Ba({site_id:l.id}),P()}})},b=()=>{Be(u.webhook_url)},w=async()=>{if(await(r.value?.validate()),!d.value)return await Ta({site_id:l.id,site_path:l.path,repo:u.custom_repo||"",branch:u.custom_branch,coverage_data:u.coverage_data}),void P();await ja({site_id:l.id,number_copies:u.track_deployments||5,script_id:u.webhook_script})},{loading:S,setLoading:k}=ye(),{loading:C,setLoading:$}=ye(),P=async()=>{try{$(!0);const{message:e}=await $a({site_id:l.id});o(e)&&(1===Object.entries(e).length?d.value=!1:d.value=!0,u.git_provider=e.deploy_type||"ssh",u.git_repo=e.repo,u.git_branch=e.branch,u.custom_key=e.ssh_key,u.custom_repo=e.repo,u.custom_branch=e.branch||"master",u.track_deployments=e.number_copies,u.webhook_url=e.webhook_url,u.webhook_script=e.webhook_script||null,u.coverage_data=!1),(async()=>{try{k(!0);const{message:e}=await Ea({site_id:l.id});i(e)&&(v.value=e.map((e=>({label:e.title,value:e.id}))))}finally{k(!1)}})()}finally{$(!1)}};return P(),t({init:P}),(e,t)=>{const a=Yt,l=Mt,i=ia,n=na,s=qt,o=Ft,c=Kt,k=ua,$=zt,P=al,L=Jt,U=_a,R=h;return I(),G(R,{class:"h-620px",show:M(C)},{default:A((()=>[M(d)?V("",!0):(I(),G(a,{key:0,class:"mb-16px","show-icon":!1},{default:A((()=>[F(z(e.$t("Site.Config.index_128")),1)])),_:1})),j(U,{ref_key:"formRef",ref:r,model:M(u),rules:M(p)},{default:A((()=>[j(s,{label:e.$t("Site.PHP.add_site_47"),path:"git_provider"},{default:A((()=>[j(n,{value:M(u).git_provider,"onUpdate:value":t[0]||(t[0]=e=>M(u).git_provider=e)},{default:A((()=>[V("",!0),j(i,{value:"ssh"},{default:A((()=>[j(l,{class:"items-center",size:2},{default:A((()=>[t[11]||(t[11]=H("i",{class:"i-octicon:git-branch-16 text-18px"},null,-1)),H("span",null,z(e.$t("Public.Search.Custom")),1)])),_:1,__:[11]})])),_:1})])),_:1},8,["value"])])),_:1},8,["label"]),"github"===M(u).git_provider?(I(),O("div",Gs,[j(s,{label:" "},{default:A((()=>[H("div",null,[j(s,{label:e.$t("Site.PHP.add_site_48"),path:"git_repo","label-placement":"top"},{default:A((()=>[j(o,{class:"w-400px",value:M(u).git_repo,"onUpdate:value":t[1]||(t[1]=e=>M(u).git_repo=e),name:"git_repo",options:M(_)},null,8,["value","options"])])),_:1},8,["label"]),j(s,{label:e.$t("Site.PHP.add_site_49"),path:"git_branch","label-placement":"top"},{default:A((()=>[j(o,{class:"w-400px",value:M(u).git_branch,"onUpdate:value":t[2]||(t[2]=e=>M(u).git_branch=e),name:"git_branch",options:M(m)},null,8,["value","options"])])),_:1},8,["label"])])])),_:1})])):V("",!0),"ssh"===M(u).git_provider?(I(),G(s,{key:1,label:" "},{default:A((()=>[H("div",null,[j(s,{label:"SSH key","label-placement":"top"},{default:A((()=>[j(c,{readonly:"",type:"textarea",class:"w-400px!",value:M(u).custom_key,"onUpdate:value":t[3]||(t[3]=e=>M(u).custom_key=e),"input-props":{spellcheck:!1}},null,8,["value"])])),_:1}),j(s,{label:e.$t("Site.PHP.add_site_48"),"label-placement":"top",path:"custom_repo"},{default:A((()=>[j(l,null,{default:A((()=>[j(c,{readonly:M(d),class:"w-400px!",value:M(u).custom_repo,"onUpdate:value":t[4]||(t[4]=e=>M(u).custom_repo=e),"input-props":{spellcheck:!1}},null,8,["readonly","value"]),M(d)?V("",!0):(I(),O(K,{key:0},[t[12]||(t[12]=H("div",null,"(e.g. git@github.com:username/repo.git)",-1)),j(k,{trigger:"hover"},{trigger:A((()=>[H("span",Ys,z(e.$t("Site.PHP.add_site_52")),1)])),default:A((()=>[H("img",{width:"400px",src:M(ll),alt:"git desc"},null,8,Zs)])),_:1})],64))])),_:1})])),_:1},8,["label"]),j(s,{label:e.$t("Site.PHP.add_site_49"),"label-placement":"top",path:"custom_branch"},{default:A((()=>[j(l,{class:"flex-col!"},{default:A((()=>[j(c,{readonly:M(d),class:"w-400px!",value:M(u).custom_branch,"onUpdate:value":t[5]||(t[5]=e=>M(u).custom_branch=e)},null,8,["readonly","value"]),M(d)?V("",!0):(I(),O("div",Qs,"(e.g. master)"))])),_:1})])),_:1},8,["label"])])])),_:1})):V("",!0),M(d)?(I(),O(K,{key:2},[j(s,{label:e.$t("SSL.Domain.index_11")},{default:A((()=>[j(l,null,{default:A((()=>[j(o,{class:"w-400px",value:M(u).track_deployments,"onUpdate:value":t[6]||(t[6]=e=>M(u).track_deployments=e),"render-label":x,options:f},null,8,["value"]),H("span",null,"*"+z(e.$t("Site.Config.index_129")),1)])),_:1})])),_:1},8,["label"]),j(s,{label:e.$t("Site.Config.index_130")},{default:A((()=>[j(l,null,{default:A((()=>[j(l,{class:"items-center"},{default:A((()=>[j(o,{loading:M(S),class:"w-400px",value:M(u).webhook_script,"onUpdate:value":t[7]||(t[7]=e=>M(u).webhook_script=e),options:M(v)},null,8,["loading","value","options"]),j($,{size:"small",onClick:y},{default:A((()=>[F(z(e.$t("Site.PHP.add_site_34")),1)])),_:1})])),_:1}),H("div",null,"*"+z(e.$t("Site.Config.index_131")),1)])),_:1})])),_:1},8,["label"]),j(s,{label:e.$t("Site.Config.index_132")},{default:A((()=>[j(l,null,{default:A((()=>[j(l,{class:"items-center"},{default:A((()=>[j(P,{readonly:"",iconName:"common-copy",class:"w-400px!",value:M(u).webhook_url,"onUpdate:value":t[8]||(t[8]=e=>M(u).webhook_url=e),"input-props":{spellcheck:!1},onClick:b},null,8,["value"]),j($,{type:"primary",size:"small",onClick:g},{default:A((()=>[F(z(e.$t("Site.Config.index_133")),1)])),_:1})])),_:1}),H("span",null,"*"+z(e.$t("Site.Config.index_134")),1)])),_:1})])),_:1},8,["label"])],64)):(I(),G(s,{key:3,label:"Coverage data"},{default:A((()=>[j(L,{value:M(u).coverage_data,"onUpdate:value":t[9]||(t[9]=e=>M(u).coverage_data=e)},null,8,["value"])])),_:1})),j(s,{label:" "},{default:A((()=>[j(l,null,{default:A((()=>[j($,{type:"primary",onClick:w},{default:A((()=>[F(z(e.$t("Public.Btn.Save")),1)])),_:1}),V("",!0)])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["show"])}}}),to={class:"flex gap-10px mb-10px"},ao={class:"h-540px"},lo=N({__name:"index",setup(e,{expose:t}){const{t:a}=D(),{data:l}=sl(),{loading:i,setLoading:n}=ye(),s=W(""),d=()=>{fe({title:a("Site.Config.index_147"),content:a("Site.Config.index_148"),onConfirm:async()=>{await Na({site_id:l.id}),r()}})},r=async()=>{try{n(!0);const{message:e}=await Da({site_id:l.id});o(e)&&(s.value=u(e.result)&&e.result.length>0?e.result:a("Site.Config.index_149"))}finally{n(!1)}};return r(),t({init:r}),(e,t)=>{const a=zt,l=Ma,n=h;return I(),O("div",null,[H("div",to,[j(a,{type:"primary",onClick:r},{default:A((()=>[F(z(e.$t("Public.Btn.Refresh")),1)])),_:1}),j(a,{onClick:d},{default:A((()=>[F(z(e.$t("Public.Btn.Clear")),1)])),_:1})]),H("div",ao,[j(n,{class:"h-full",show:M(i)},{default:A((()=>[j(l,{log:M(s)},null,8,["log"])])),_:1},8,["show"])])])}}}),io=N({__name:"index",setup(e,{expose:t}){const{t:a}=D(),{config:l,data:i}=sl(),n=W("deployment"),s=W(),d=[{key:"deployment",label:a("Site.Config.index_145"),component:Js},{key:"script",label:a("Site.Config.index_127"),component:Xs},{key:"repository",label:a("Site.PHP.add_site_48"),component:eo,data:{onJump:()=>{n.value="script"}}},{key:"logs",label:a("Site.Config.index_146"),component:lo}],r=W(!0);return(async()=>{await(async()=>{const{message:e}=await $a({site_id:i.id});o(e)&&(1===Object.entries(e).length?r.value=!1:r.value=!0)})(),n.value=l.subMenu||"deployment",l.subMenu=""})(),t({init:async()=>{n.value="deployment",Y((()=>{s.value?.init()}))}}),(e,t)=>{const a=pa,l=Ia;return I(),G(l,{install:M(r)},{desc:A((()=>[F(z(e.$t("Site.Config.index_144")),1)])),default:A((()=>[j(a,{value:M(n),"onUpdate:value":t[0]||(t[0]=e=>q(n)?n.value=e:null),ref_key:"tabsRef",ref:s,options:d},null,8,["value"])])),_:1},8,["install"])}}}),no={class:"h-full"},so=N({__name:"index",props:{siteInfo:{},config:{}},setup(e){const{t:a}=D(),l=_e(),{siteName:i}=Q(l),n=X((()=>d((()=>t.import("./index-legacy268.js?v=1763625242172")),void 0))),s=e,{siteInfo:o,config:r}=s;i.value=s.siteInfo.name;const u=W();o&&B(nl,{data:o,config:r});const c=W("domain"),p=[{key:"domain",label:a("Site.Config.index_1"),component:vl},{key:"directory",label:"Directory",component:Tl},{key:"access",label:a("Site.Config.index_5"),component:ni},{key:"rewrite",label:a("Site.Config.index_7"),component:n},{key:"document",label:a("Site.Config.index_9"),component:di},{key:"config",label:a("Site.Config.index_10"),component:ui},{key:"ssl",label:()=>j(K,null,[a("Site.Config.index_11")]),component:Ts},{key:"php",label:a("Site.Config.index_12"),component:$i},{key:"webserver",label:a("WP.Config.index_21"),component:qs},{key:"git",label:"Git Manager",component:io},{key:"wordpress",label:"Wordpress Setting",show:"WP"===o?.project_type,component:Ei},{key:"composer",label:a("Site.Config.index_20"),component:Mi},{key:"redirect",label:a("Site.Config.index_21"),component:en},{key:"proxy",label:a("Site.Config.index_23"),component:mn},{key:"hotlink",label:a("Site.Config.index_24"),component:fn},{key:"maintenance",label:a("WP.Config.index_33"),component:Os},{key:"logs",label:a("Site.Config.index_25"),component:Sn}];return c.value=r.menu||"domain",r.menu="",ee((()=>{window.siteConfigInit=u.value.init})),(e,t)=>{const a=E;return I(),O("div",no,[j(a,{value:M(c),"onUpdate:value":t[0]||(t[0]=e=>q(c)?c.value=e:null),ref_key:"tabsRef",ref:u,data:p},null,8,["value"])])}}}),oo=Object.freeze(Object.defineProperty({__proto__:null,default:so},Symbol.toStringTag,{value:"Module"}));e("i",oo)}}}));
