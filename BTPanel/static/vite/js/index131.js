import{_ as a}from"./index.vue_vue_type_script_setup_true_lang.js?v=1767769852656";import{fv as s,fw as e,d as l,h as t}from"./page_layout.js?v=1767769852656";import{k as o,P as i,r as c,e as r,a2 as n,V as p,a3 as m,W as d,an as u,S as _,U as f,N as v}from"./vue.js?v=1767769852656";import{dR as b,dV as x,au as w,dj as h}from"./naive.js?v=1767769852656";import"./common.js?v=1767769852656";import"./__commonjsHelpers__.js?v=1767769852656";import"./public.js?v=1767769852656";const j={class:"w-280px"},y={class:"w-280px"},A=o({__name:"index",props:{row:{}},setup(o,{expose:A}){const D=o,{row:g}=D,{t:R}=i(),k=c(null),U=r({dataAccess:"127.0.0.1",access:"127.0.0.1",ssl:""}),$=c([{label:R("Database.form.index_12"),value:"127.0.0.1"},{label:R("Database.form.index_13"),value:"%"},{label:R("Database.form.index_14"),value:"ip"}]),E={host:{trigger:["blur","change"],validator:()=>"ip"!==U.dataAccess||(""!==U.access.trim()||new Error(R("Database.form.index_19")))}},S=a=>{U.access="ip"===a?"":a};return(async()=>{const{message:a}=await e({name:g.name});l(a)&&("127.0.0.1"!==a.permission&&"%"!==a.permission?(U.dataAccess="ip",U.access=a.permission.split(",").join("\n")):(U.dataAccess=a.permission,U.access=a.permission),U.ssl=t(a.ssl)?a.ssl:"")})(),A({onConfirm:async()=>{var a;await(null==(a=k.value)?void 0:a.validate());const e={...v(U),name:g.username,access:"ip"===U.dataAccess?U.access.trim().split("\n").join(","):U.access};s(v(e))}}),(s,e)=>{const l=x,t=b,o=w,i=h,c=a;return p(),n(c,{ref_key:"formRef",ref:k,model:f(U),rules:E,class:"px-20px py-24px"},{default:m(()=>[d(t,{label:s.$t("Database.form.index_6"),path:"listen_ip"},{default:m(()=>[_("div",j,[d(l,{value:f(U).dataAccess,"onUpdate:value":[e[0]||(e[0]=a=>f(U).dataAccess=a),S],class:"permission-select",options:f($)},null,8,["value","options"])])]),_:1},8,["label"]),"ip"===f(U).dataAccess?(p(),n(t,{key:0,label:s.$t("Database.form.index_7"),path:"host"},{default:m(()=>[_("div",y,[d(o,{value:f(U).access,"onUpdate:value":e[1]||(e[1]=a=>f(U).access=a),type:"textarea",autosize:{minRows:3,maxRows:3},"input-props":{name:"address"},placeholder:s.$t("Database.form.index_8")},null,8,["value","placeholder"])])]),_:1},8,["label"])):u("",!0),d(t,{label:s.$t("Database.form.index_11"),"show-feedback":!1},{default:m(()=>[d(i,{value:f(U).ssl,"onUpdate:value":e[2]||(e[2]=a=>f(U).ssl=a),class:"ssl-switch","checked-value":"REQUIRE SSL"},null,8,["value"])]),_:1},8,["label"])]),_:1},8,["model"])}}});export{A as default};
