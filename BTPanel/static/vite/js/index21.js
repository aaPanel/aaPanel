const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/index126.js?v=1764830988434","js/index.vue_vue_type_script_setup_true_lang.js?v=1764830988434","js/vue.js?v=1764830988434","js/__commonjsHelpers__.js?v=1764830988434","js/naive.js?v=1764830988434","js/common.js?v=1764830988434","js/page_layout.js?v=1764830988434","js/public.js?v=1764830988434","css/public.css?v=1764830988434","css/page_layout.css?v=1764830988434","js/index.vue_vue_type_script_setup_true_lang2.js?v=1764830988434","js/index96.js?v=1764830988434","css/index14.css?v=1764830988434","js/index132.js?v=1764830988434","js/index133.js?v=1764830988434","css/index25.css?v=1764830988434","js/soft.js?v=1764830988434","js/site.js?v=1764830988434","js/index127.js?v=1764830988434","js/index246.js?v=1764830988434","css/index61.css?v=1764830988434","css/index79.css?v=1764830988434","js/index128.js?v=1764830988434","js/index.vue_vue_type_script_setup_true_lang5.js?v=1764830988434","js/index.vue_vue_type_script_setup_true_lang6.js?v=1764830988434","css/index16.css?v=1764830988434","js/index129.js?v=1764830988434","js/index130.js?v=1764830988434","js/index.js?v=1764830988434","css/index113.css?v=1764830988434","js/index.vue_vue_type_script_setup_true_lang8.js?v=1764830988434","css/index80.css?v=1764830988434"])))=>i.map(i=>d[i]);
import{o as a,_ as e,aM as t,aN as s,d as i,aL as n,aO as o,aP as l,aQ as d,x as r,y as p,a as _,m as c,aR as m}from"./page_layout.js?v=1764830988434";import{_ as u}from"./index.js?v=1764830988434";import{_ as h}from"./index.vue_vue_type_script_setup_true_lang5.js?v=1764830988434";import{_ as b}from"./index.vue_vue_type_script_setup_true_lang7.js?v=1764830988434";import{_ as w}from"./index.vue_vue_type_script_setup_true_lang9.js?v=1764830988434";import{s as x,d as y,e as k,c as f,t as g,v as D,f as v,a as j,h as C,w as R}from"./public.js?v=1764830988434";import{_ as U}from"./index.vue_vue_type_script_setup_true_lang8.js?v=1764830988434";import{_ as $}from"./index131.js?v=1764830988434";import{u as q,a as E,b as L,c as P,_ as W,d as O,e as I,f as V,g as z}from"./index132.js?v=1764830988434";import{W as A,P as B,ab as M,j as S,u as T,k as K,r as N,am as H,a2 as Q,V as F,a3 as G,R as J,a4 as X,U as Y,ak as Z,e as aa,w as ea,S as ta,an as sa,_ as ia,N as na}from"./vue.js?v=1764830988434";import{g as oa}from"./hooks.js?v=1764830988434";import{dk as la,dj as da,da as ra,dS as pa,aC as _a}from"./naive.js?v=1764830988434";import"./common.js?v=1764830988434";import"./__commonjsHelpers__.js?v=1764830988434";import"./index.vue_vue_type_script_setup_true_lang6.js?v=1764830988434";import"./php.js?v=1764830988434";import"./soft.js?v=1764830988434";import"./site.js?v=1764830988434";import"./index133.js?v=1764830988434";const ca=({row:a})=>{if(a.password)return A(x,{value:a.password},null);const{t:e}=B();return A("div",{class:"text-desc cursor-pointer",onClick:()=>{L(a)}},[A(M,{keypath:"Database.index_15.index_1",tag:"span",scope:"global"},{error:()=>A("span",{class:"text-error"},[e("Database.index_15.index_2")])})])},ma=({row:e})=>{let t;const{t:s}=B();return A("div",{class:"flex items-center"},[A(a,{type:e.backup_count>0?"primary":"warning",class:"backup-btn",onClick:()=>{q(e)}},{default:()=>[e.backup_count>0?s("Database.index_17",[e.backup_count]):s("Database.index_18")]}),A("span",{class:"mx-4px"},[S("|")]),A(a,{onClick:()=>{E(e,"mysql")}},(i=t=s("Public.Btn.Import"),"function"==typeof i||"[object Object]"===Object.prototype.toString.call(i)&&!T(i)?t:{default:()=>[t]}))]);var i},ua={key:1},ha=K({__name:"index",setup(n){const o=N(!1),l=H(),d=()=>{l.push("/crontab/task")},r=async a=>{try{await t({name:"mysql",status:a?1:0})}catch(e){o.value=!a}},{loading:p,setLoading:_}=y();return(async()=>{try{_(!0);const{message:a}=await s({name:"mysql"});i(a)&&(o.value=!!a.status)}finally{_(!1)}})(),(t,s)=>{const i=e,n=da,l=a,_=ra,c=la;return F(),Q(c,{"show-icon":!1,closable:!1},{default:G(()=>[A(_,{class:"h-24px items-center"},{default:G(()=>[A(i,{name:"base-info",size:"18"}),S(" "+X(t.$t("Database.Mysql.index_1")),1),A(n,{size:"small",loading:Y(p),value:Y(o),"onUpdate:value":[s[0]||(s[0]=a=>Z(o)?o.value=a:null),r]},null,8,["loading","value"]),Y(o)?(F(),Q(l,{key:0,onClick:d},{default:G(()=>[S("["+X(t.$t("Database.index_7.index_2"))+"]",1)]),_:1})):(F(),J("span",ua,X(t.$t("Database.Mysql.index_2")),1))]),_:1})]),_:1})}}}),ba={class:"p-16px"},wa=K({__name:"index",setup(a){const e=ia(()=>_(()=>import("./index126.js?v=1764830988434"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]))),t=ia(()=>_(()=>import("./index127.js?v=1764830988434"),__vite__mapDeps([18,19,2,3,4,5,6,7,8,9,20,17,1,21]))),s=ia(()=>_(()=>import("./index128.js?v=1764830988434"),__vite__mapDeps([22,7,6,2,3,4,5,9,8,23,24,25]))),x=ia(()=>_(()=>import("./index129.js?v=1764830988434"),__vite__mapDeps([26,1,2,3,4,5,6,7,8,9]))),q=ia(()=>_(()=>import("./index130.js?v=1764830988434").then(a=>a.i),__vite__mapDeps([27,6,2,3,4,5,7,8,9,28,29,23,24,25,30,31]))),{t:E}=B(),M=n(),T=N(!1),K=k(),H=k(E("Database.index_3"),{row:void 0}),J=()=>{K.show=!0},la=()=>{V()},da=a=>{M.phpmyadmin.setup?(a?(H.data.row=a,H.title=E("Database.index_8",[a.name])):(H.data.row=void 0,H.title=E("Database.index_3")),H.show=!0):c.error(E("Database.index_9"))},ra=()=>{z()},ua=k(E("Database.Mysql.index_3")),wa=k(),xa=k(),ya=async()=>{await l(M.type,{ids:[]}),Ra()},{keys:ka,table:fa,columns:ga}=f([{type:"selection",width:40},{key:"name",title:E("Database.index_12"),width:"10%",minWidth:100,ellipsis:{tooltip:{width:"trigger"}}},{key:"username",title:E("Database.index_13"),width:"10%",minWidth:100,ellipsis:{tooltip:{width:"trigger"}}},{key:"password",title:E("Database.index_14"),width:"10%",minWidth:120,render:a=>A(ca,{row:a},null)},g({type:"database",width:"5%",maxWidth:60,callback:()=>{Ra()}}),{key:"backup_count",title:E("Database.index_16"),width:"10%",minWidth:120,render:a=>A(ma,{row:a},null)},{key:"sid",title:E("Database.index_19"),width:"8%",minWidth:80,ellipsis:{tooltip:!0},render:a=>oa(a)},D({minWidth:90,onBlur:async(a,e)=>{await m({id:e.id,ps:a})}}),v({width:"30%",minWidth:280,options:a=>[{label:E("Database.index_20"),show:0===a.db_type,onClick:()=>{da(a)}},{label:E("Database.index_21"),class:"permission-btn",onClick:()=>{(a=>{xa.data.row=a,xa.title=E("Database.index_11",[a.name]),xa.show=!0})(a)}},{label:E("Database.index_22"),class:"tools-btn",onClick:()=>{(a=>{wa.data.row=a,wa.title=E("Database.index_10",[a.name]),wa.show=!0})(a)}},{label:E("Database.index_23"),class:"change-btn",onClick:()=>{L(a)}},{label:E("Public.Btn.Del"),class:"delete-btn",onClick:()=>{P([a])}}]})]),Da=[{key:"sync",label:E("Database.index_24"),onBatch:a=>{j({title:E("Database.index_25"),content:E("Database.index_26"),onConfirm:async()=>{await l(M.type,{ids:a.map(a=>a.id)})}})}},{key:"backup",type:"confirm",label:E("Database.index_27"),confirm:{title:E("Database.index_28"),desc:E("Database.index_29"),api:a=>o(M.type,{id:a.id},!1),done:()=>{Ra()},columns:[{key:"name",title:E("Database.index_12")}]}},{key:"delete",label:E("Database.index_30"),onBatch:a=>{P(a)}}],{loading:va,setLoading:ja}=y(!0),Ca=aa({p:1,limit:20,sid:-1,search:""}),Ra=async()=>{try{ja(!0);const{message:a}=await d((()=>{const a={...na(Ca)};return-1===a.sid&&delete a.sid,a})());i(a)?(fa.data=r(a.data)?a.data:[],fa.total=p(a.page)):(fa.data=[],fa.total=0)}finally{ka.value=[],ja(!1)}};ea(()=>M.isRefresh,a=>{a&&(M.setRefresh(!1),M.delRemoteId===Ca.sid&&(Ca.sid=-1),Ra())});return(async()=>{try{await M.getRemote(),M.install?(T.value=!0,Ra()):(T.value=!1,R())}finally{ja(!1)}})(),(a,i)=>{const n=_a,o=$,l=U,d=C,r=w,p=b,_=h,c=u,m=pa;return F(),Q(Y(I),null,{default:G(()=>[A(m,null,{default:G(()=>[ta("div",ba,[A(ha),A(_,{class:"mt-16px",feedback:!0},{toolsLeft:G(()=>[A(n,{class:"add-db-btn",type:"primary",onClick:J},{default:G(()=>[S(X(a.$t("Database.index_1")),1)]),_:1}),A(n,{class:"set-root-btn",onClick:la},{default:G(()=>[S(X(a.$t("Database.index_2")),1)]),_:1}),A(n,{onClick:i[0]||(i[0]=a=>da())},{default:G(()=>[S(X(a.$t("Database.index_3")),1)]),_:1}),A(n,{onClick:ra},{default:G(()=>[S(X(a.$t("Database.index_4")),1)]),_:1}),A(n,{onClick:i[1]||(i[1]=a=>Y(ua).show=!0)},{default:G(()=>[S(X(a.$t("Database.Mysql.index_3")),1)]),_:1}),A(n,{onClick:ya},{default:G(()=>[S(X(a.$t("Database.index_5")),1)]),_:1}),A(n,{onClick:Y(O)},{default:G(()=>[S(X(a.$t("Database.index_6")),1)]),_:1},8,["onClick"]),Y(T)?(F(),Q(o,{key:0,"soft-name":"mysql"})):sa("",!0)]),toolsRight:G(()=>[A(Y(W),{ref:"remoteRef",value:Y(Ca).sid,"onUpdate:value":i[2]||(i[2]=a=>Y(Ca).sid=a),"store-key":"mysql-remote",onChange:Ra},null,8,["value"]),A(l,{value:Y(Ca).search,"onUpdate:value":i[3]||(i[3]=a=>Y(Ca).search=a),placeholder:a.$t("Database.mongo.index_3"),width:"180",onSearch:Ra},null,8,["value","placeholder"])]),table:G(()=>[A(d,{"checked-row-keys":Y(ka),"onUpdate:checkedRowKeys":i[4]||(i[4]=a=>Z(ka)?ka.value=a:null),loading:Y(va),data:Y(fa).data,columns:Y(ga)},null,8,["checked-row-keys","loading","data","columns"])]),pageLeft:G(()=>[A(r,{"checked-row-keys":Y(ka),"onUpdate:checkedRowKeys":i[5]||(i[5]=a=>Z(ka)?ka.value=a:null),data:Y(fa).data,options:Da},null,8,["checked-row-keys","data"])]),pageRight:G(()=>[A(p,{page:Y(Ca).p,"onUpdate:page":i[6]||(i[6]=a=>Y(Ca).p=a),"page-size":Y(Ca).limit,"onUpdate:pageSize":i[7]||(i[7]=a=>Y(Ca).limit=a),"store-key":"database-mysql-page","item-count":Y(fa).total,onRefresh:Ra},null,8,["page","page-size","item-count"])]),_:1}),A(c,{show:Y(K).show,"onUpdate:show":i[8]||(i[8]=a=>Y(K).show=a),title:a.$t("Database.mongo.index_4"),width:540,"min-height":334,footer:!0,component:Y(e)},null,8,["show","title","component"]),A(c,{show:Y(H).show,"onUpdate:show":i[9]||(i[9]=a=>Y(H).show=a),title:Y(H).title,data:Y(H).data,width:740,height:580,component:Y(t)},null,8,["show","title","data","component"]),A(c,{show:Y(xa).show,"onUpdate:show":i[10]||(i[10]=a=>Y(xa).show=a),data:Y(xa).data,title:Y(xa).title,width:480,"min-height":132,footer:!0,component:Y(x)},null,8,["show","data","title","component"]),A(c,{show:Y(wa).show,"onUpdate:show":i[11]||(i[11]=a=>Y(wa).show=a),data:Y(wa).data,title:Y(wa).title,width:870,"min-height":359,component:Y(s)},null,8,["show","data","title","component"]),A(c,{show:Y(ua).show,"onUpdate:show":i[12]||(i[12]=a=>Y(ua).show=a),title:Y(ua).title,width:850,"min-height":600,component:Y(q)},null,8,["show","title","component"])])]),_:1})]),_:1})}}});export{wa as default};
