System.register(["./public-legacy.js?v=1764830988434","./index.vue_vue_type_script_setup_true_lang-legacy.js?v=1764830988434","./vue-legacy.js?v=1764830988434","./page_layout-legacy.js?v=1764830988434","./setting-legacy.js?v=1764830988434","./site-legacy3.js?v=1764830988434","./index-legacy199.js?v=1764830988434","./naive-legacy.js?v=1764830988434","./common-legacy.js?v=1764830988434","./__commonjsHelpers__-legacy.js?v=1764830988434"],function(e,a){"use strict";var l,i,t,n,c,s,o,d,u,_,p,r,f,x,m,v,g,b,S,y,C,W,$,w,h,U,j,k,P,E,M,D,N,R,T,B,J;return{setters:[e=>{l=e._,i=e.a},e=>{t=e._},e=>{n=e.k,c=e.P,s=e.ae,o=e.r,d=e.R,u=e.V,_=e.F,p=e.S,r=e.W,f=e.U,x=e.a3,m=e.a4,v=e.l,g=e.v,b=e.j,S=e.t,y=e.c,C=e.e,W=e.a5},e=>{$=e.d,w=e.m,h=e.x},e=>{U=e.d},e=>{j=e.i,k=e.j,P=e.k,E=e.l},e=>{M=e._},e=>{D=e.dV,N=e.df,R=e._,T=e.dR,B=e.aX,J=e.aC},null,null],execute:function(){const a={class:"w-160px"},O={class:"ml-8px"},V={class:"w-300px text-#666 leading-18px"},q={class:"mb-4px"},A={class:"mb-10px"},F={class:"mb-4px"},H={class:"mb-10px"},I={class:"mb-4px"},X={class:"mb-10px"},z={class:"mb-4px"},G=n({__name:"RequestType",props:{value:{},valueModifiers:{}},emits:["update:value"],setup(e){const{t:l}=c(),i=s(e,"value"),t=o([{label:l("Waf.Site.Config.index_40"),value:1},{label:l("Waf.Site.Config.index_41"),value:2},{label:l("Waf.Site.Config.index_42"),value:3},{label:l("Waf.Site.Config.index_43"),value:4}]);return(e,l)=>{const n=D,c=M;return u(),d(_,null,[p("div",a,[r(n,{value:i.value,"onUpdate:value":l[0]||(l[0]=e=>i.value=e),options:f(t)},null,8,["value","options"])]),p("div",O,[r(c,null,{default:x(()=>[p("div",V,[p("div",q,[p("b",null,m(e.$t("Waf.Site.Config.desc_1")),1)]),p("div",A,m(e.$t("Waf.Site.Config.desc_2")),1),p("div",F,[p("b",null,m(e.$t("Waf.Site.Config.desc_3")),1)]),p("div",H,m(e.$t("Waf.Site.Config.desc_4")),1),p("div",I,[p("b",null,m(e.$t("Waf.Site.Config.desc_5")),1)]),p("div",X,m(e.$t("Waf.Site.Config.desc_6")),1),p("div",z,[p("b",null,m(e.$t("Waf.Site.Config.desc_7")),1)]),p("div",null,m(e.$t("Waf.Site.Config.desc_8")),1)])]),_:1})])],64)}}}),K={class:"w-100px"},L={class:"ml-8px"},Q={class:"w-300px text-#666 leading-18px"},Y={class:"mb-4px"},Z={class:"mb-10px"},ee={class:"mb-4px"},ae=n({__name:"UrlDefense",props:{url:{},urlModifiers:{}},emits:["update:url"],setup(e){const{t:a}=c(),l=s(e,"url"),i=o([{label:a("Public.Status.Enable"),value:1},{label:a("Public.Status.Disable"),value:0}]);return(e,a)=>{const t=D,n=M;return u(),d(_,null,[p("div",K,[r(t,{value:l.value,"onUpdate:value":a[0]||(a[0]=e=>l.value=e),options:f(i)},null,8,["value","options"])]),p("div",L,[r(n,null,{default:x(()=>[p("div",Q,[p("div",Y,[p("b",null,m(e.$t("Waf.Site.Config.index_104")),1)]),p("div",Z,m(e.$t("Waf.Site.Config.index_107")),1),p("div",ee,[p("b",null,m(e.$t("Waf.Site.Config.index_105")),1)]),p("div",null,m(e.$t("Waf.Site.Config.index_106")),1)])]),_:1})])],64)}}}),le={class:"flex-1"},ie={class:"flex items-center"},te={class:"w-100px"},ne={class:"ml-8px"},ce={class:"w-300px text-#666 leading-18px"},se={class:"mb-4px"},oe={class:"mb-10px"},de={class:"mb-4px"},ue={class:"w-80px ml-12px"},_e={class:"ml-12px"},pe=n({__name:"IpDefense",props:{open:{},openModifiers:{},max:{},maxModifiers:{},contain:{type:Boolean},containModifiers:{}},emits:["update:open","update:max","update:contain"],setup(e){const{t:a}=c(),l=s(e,"open"),i=o([{label:a("Public.Status.Enable"),value:1},{label:a("Public.Status.Disable"),value:0}]),t=s(e,"max"),n=s(e,"contain");return(e,a)=>{const c=D,s=M,o=N,_=R;return u(),d("div",le,[p("div",ie,[p("div",te,[r(c,{value:l.value,"onUpdate:value":a[0]||(a[0]=e=>l.value=e),options:f(i)},null,8,["value","options"])]),p("div",ne,[r(s,null,{default:x(()=>[p("div",ce,[p("div",se,[p("b",null,m(e.$t("Waf.Site.Config.index_104")),1)]),p("div",oe,m(e.$t("Waf.Site.Config.index_108")),1),p("div",de,[p("b",null,m(e.$t("Waf.Site.Config.index_105")),1)]),p("div",null,m(e.$t("Waf.Site.Config.index_106")),1)])]),_:1})]),v(p("div",ue,[r(o,{value:t.value,"onUpdate:value":a[1]||(a[1]=e=>t.value=e),placeholder:"","show-button":!1},null,8,["value"])],512),[[g,1===l.value]]),v(p("div",{class:"ml-8px text-desc"},m(e.$t("Public.Unit.Time",t.value||0)),513),[[g,1===l.value]]),v(p("div",_e,[r(_,{checked:n.value,"onUpdate:checked":a[2]||(a[2]=e=>n.value=e)},{default:x(()=>[b(m(e.$t("Waf.Site.Config.index_110")),1)]),_:1},8,["checked"])],512),[[g,1===l.value]])]),v(p("div",{class:"mt-12px text-error"},m(e.$t("Waf.Site.Config.index_111")),513),[[g,!t.value||t.value<5e3]])])}}}),re={class:"p-20px"},fe={class:"flex-1"},xe={class:"w-160px"},me={class:"w-160px mr-8px"},ve={class:"text-desc"},ge={class:"w-160px mr-8px"},be={class:"text-desc"},Se={class:"w-160px mr-8px"},ye={class:"text-desc"},Ce={class:"w-320px"},We={class:"flex-1"},$e={class:"w-160px"},we={class:"text-error"},he={class:"text-error"},Ue={class:"text-error"},je={class:"text-error"},ke={class:"text-error"},Pe={class:"text-error"},Ee={class:"text-error"};e("default",n({__name:"index",props:{siteName:{},config:{}},emits:["refresh"],setup(e,{expose:a,emit:n}){const s=e,M=n,{t:R}=c(),O=S(s,"siteName"),V=o(null),q=y(()=>void 0===O.value),A=C({cc_mode:1,cc_type_status:2,cycle:60,limit:120,endtime:1800,is_cc_url:1,cc_enhance_mode:1,increase_wu_heng:1,country:[],cc_increase_type:"js",cc_ip_max:{open:0,ip_max:1e4,static:!1}}),F={cycle:{trigger:["blur","input"],validator:()=>A.cycle?!(A.cycle<30)||new Error(R("Waf.Site.Config.index_35")):new Error(R("Waf.Site.Config.index_34"))},limit:{trigger:["blur","input"],validator:()=>A.limit?!(A.limit<30)||new Error(R("Waf.Site.Config.index_35")):new Error(R("Waf.Site.Config.index_36"))},endtime:{trigger:["blur","input"],validator:()=>!!A.endtime||new Error(R("Waf.Site.Config.index_37"))}},H=[{label:R("Waf.Site.Config.index_38"),value:1},{label:R("Waf.Site.Config.index_39"),value:2}],I=o([{label:R("Waf.Site.Config.index_46"),value:"browser"},{label:R("Waf.Site.Config.index_47"),value:"js"},{label:R("Waf.Site.Config.index_48"),value:"code"},{label:R("Waf.Site.Config.index_49"),value:"renji"},{label:R("Waf.Site.Config.index_50"),value:"huadong"}]),X=o([]),z=()=>{A.country=X.value.map(e=>`${e.value}`)},K=()=>{A.country=[]};let L=!1;const Q=async e=>{if("renji"===e&&!L){const{message:e}=await j();L=!0,$(e)&&e.result&&(A.cc_increase_type="js",I.value[3].disabled=!0,I.value[4].disabled=!0,w.error(R("Waf.Site.Config.index_51")))}},Y=async()=>{const{close:e}=w.loading(R("Waf.Site.Config.index_52",[q.value?R("Waf.Site.Config.index_99"):R("Waf.Site.Config.index_100")]));try{const e=(()=>{const e=1===A.cc_mode?{country:A.country.join(","),is_cc_url:A.is_cc_url}:{};return{cc_mode:1===A.cc_mode?1:A.cc_enhance_mode?3:4,cycle:A.cycle,limit:A.limit,endtime:A.endtime,is_open_global:void 0===O.value?1:0,increase:0===A.cc_enhance_mode?0:1,increase_wu_heng:A.increase_wu_heng,cc_increase_type:A.cc_increase_type,cc_type_status:A.cc_type_status,...e,cc_ip_max:JSON.stringify({open:1===A.cc_ip_max.open,ip_max:A.cc_ip_max.ip_max,static:A.cc_ip_max.static})}})();3!==e.cc_mode&&await P(),q.value?await U(e):await E({...e,siteName:O.value||""}),M("refresh")}finally{e()}};return(async()=>{const{message:e}=await k();h(e)&&(X.value=e.map(e=>({label:e,value:e})))})(),(()=>{const{config:e}=s;e&&(A.cc_mode=e.cc_mode<=1?1:2,A.cc_type_status=e.cc_type_status,A.cycle=e.cc.cycle,A.limit=e.cc.limit,A.endtime=e.cc.endtime,A.is_cc_url=e.cc.is_cc_url?1:0,A.cc_increase_type=e.cc.cc_increase_type||"js",A.country=Object.keys(e.cc.countrys),e.cc.cc_ip_max&&(A.cc_ip_max.open=e.cc.cc_ip_max.open?1:0,A.cc_ip_max.ip_max=e.cc.cc_ip_max.ip_max,A.cc_ip_max.static=e.cc.cc_ip_max.static))})(),a({onConfirm:async({hide:e})=>{if(await(V.value?.validate()),2===A.cc_mode)return i({title:R("Public.Confirm.Title"),content:()=>r(_,null,[R("Waf.Site.Config.desc_9"),r("br",null,null),R("Waf.Site.Config.desc_10"),r("br",null,null),R("Waf.Site.Config.desc_11")]),onConfirm:async({hide:a})=>(await Y(),a(),e(),!1)}),!1;await Y()}}),(e,a)=>{const i=D,n=T,c=N,s=J,o=B,_=t,S=W("i18n-t"),y=l;return u(),d("div",re,[r(_,{ref_key:"formRef",ref:V,model:f(A),rules:F,"label-width":"160"},{default:x(()=>[r(n,{label:e.$t("Waf.Site.Config.index_11")},{default:x(()=>[p("div",fe,[p("div",xe,[r(i,{value:f(A).cc_mode,"onUpdate:value":a[0]||(a[0]=e=>f(A).cc_mode=e),options:H},null,8,["value"])]),v(p("div",{class:"w-320px mt-6px text-desc leading-20px"},m(e.$t("Waf.Site.Config.index_12")),513),[[g,2===f(A).cc_mode]])])]),_:1},8,["label"]),r(n,{label:e.$t("Waf.Site.Config.index_13")},{default:x(()=>[r(G,{value:f(A).cc_type_status,"onUpdate:value":a[1]||(a[1]=e=>f(A).cc_type_status=e)},null,8,["value"])]),_:1},8,["label"]),r(n,{label:e.$t("Waf.Site.Config.index_14"),path:"cycle"},{default:x(()=>[p("div",me,[r(c,{value:f(A).cycle,"onUpdate:value":a[2]||(a[2]=e=>f(A).cycle=e),min:30,"show-button":!1},null,8,["value"])]),p("span",ve,m(e.$t("Public.Unit.Second",f(A).cycle)),1)]),_:1},8,["label"]),r(n,{label:e.$t("Waf.Site.Config.index_16"),path:"limit"},{default:x(()=>[p("div",ge,[r(c,{value:f(A).limit,"onUpdate:value":a[3]||(a[3]=e=>f(A).limit=e),min:30,"show-button":!1},null,8,["value"])]),p("span",be,m(e.$t("Public.Unit.Time",f(A).limit)),1)]),_:1},8,["label"]),r(n,{label:e.$t("Waf.Site.Config.index_18"),path:"endtime"},{default:x(()=>[p("div",Se,[r(c,{value:f(A).endtime,"onUpdate:value":a[4]||(a[4]=e=>f(A).endtime=e),min:1,"show-button":!1},null,8,["value"])]),p("span",ye,m(e.$t("Public.Unit.Second",f(A).endtime)),1)]),_:1},8,["label"]),v(r(n,{label:e.$t("Waf.Site.Config.index_19")},{default:x(()=>[r(ae,{url:f(A).is_cc_url,"onUpdate:url":a[5]||(a[5]=e=>f(A).is_cc_url=e)},null,8,["url"])]),_:1},8,["label"]),[[g,1===f(A).cc_mode]]),r(n,{label:e.$t("Waf.Site.Config.index_109")},{default:x(()=>[r(pe,{open:f(A).cc_ip_max.open,"onUpdate:open":a[6]||(a[6]=e=>f(A).cc_ip_max.open=e),max:f(A).cc_ip_max.ip_max,"onUpdate:max":a[7]||(a[7]=e=>f(A).cc_ip_max.ip_max=e),contain:f(A).cc_ip_max.static,"onUpdate:contain":a[8]||(a[8]=e=>f(A).cc_ip_max.static=e)},null,8,["open","max","contain"])]),_:1},8,["label"]),v(r(n,{label:e.$t("Waf.Site.Config.index_20"),"show-feedback":!1},{default:x(()=>[p("div",Ce,[r(i,{value:f(A).country,"onUpdate:value":a[9]||(a[9]=e=>f(A).country=e),options:f(X),multiple:!0,filterable:!0,"max-tag-count":"responsive",":placeholder":e.$t("Waf.Site.Config.index_21")},{header:x(()=>[r(o,{class:"w-full"},{default:x(()=>[r(s,{class:"flex-1",onClick:z},{default:x(()=>[b(m(e.$t("Public.All")),1)]),_:1}),r(s,{class:"flex-1",onClick:K},{default:x(()=>[b(m(e.$t("Public.Btn.Cancel")),1)]),_:1})]),_:1})]),_:1},8,["value","options",":placeholder"])])]),_:1},8,["label"]),[[g,1===f(A).cc_mode]]),v(r(n,{label:e.$t("Waf.Site.Config.index_22"),"show-feedback":!1},{default:x(()=>[p("div",We,[p("div",$e,[r(i,{value:f(A).cc_increase_type,"onUpdate:value":[a[10]||(a[10]=e=>f(A).cc_increase_type=e),Q],options:f(I)},null,8,["value","options"])]),v(p("div",{class:"mt-6px text-error"},m(e.$t("Waf.Site.Config.index_23")),513),[[g,"code"===f(A).cc_increase_type]])])]),_:1},8,["label"]),[[g,2===f(A).cc_mode]])]),_:1},8,["model"]),r(y,{class:"mt-20px"},{default:x(()=>[p("li",we,m(e.$t("Waf.Site.Config.index_24")),1),v(p("li",{class:"text-error"},m(e.$t("Waf.Site.Config.index_102")),513),[[g,2===f(A).cc_mode]]),r(S,{tag:"li",keypath:"Waf.Site.Config.index_97",scope:"global"},{index_1:x(()=>[p("span",he,m(f(A).limit),1)]),index_2:x(()=>[p("span",Ue,m(f(A).cycle),1)]),index_3:x(()=>[p("span",je,m(f(A).endtime),1)]),_:1}),v(p("li",{class:"text-error"},m(e.$t("Waf.Site.Config.index_29")),513),[[g,1===f(A).cc_mode]]),r(S,{tag:"li",keypath:"Waf.Site.Config.index_98",scope:"global"},{index_1:x(()=>a[11]||(a[11]=[p("span",{class:"text-error"},"JS",-1)])),index_2:x(()=>[p("span",ke,m(f(A).cycle),1)]),index_3:x(()=>[p("span",Pe,m(e.config.retry),1)]),index_4:x(()=>[p("span",Ee,m(f(A).endtime),1)]),_:1})]),_:1})])}}}))}}});
