import{_ as e}from"./index184.js?v=1752142539265";import{u as a,p as s,dK as t,dL as n,dM as l,f as o,e as u,O as i,dN as p,d as r}from"./page_layout.js?v=1752142539265";import{k as c,z as A,f as d,c as g,aj as m}from"./public.js?v=1752142539265";import{B as _,bX as x,ay as f}from"./naive.js?v=1752142539265";import{k as y,P as v,Q as C,F as k,u as b,r as h,w as j,b as w,ao as B,a1 as L,X as M,a2 as Q,V as R,U as z,O as D,W as E,an as I,l as F,a3 as O,j as U,$ as N,e as H,x as P,ah as S}from"./vue.js?v=1752142539265";import{_ as V}from"./index.vue_vue_type_script_setup_true_lang4.js?v=1752142539265";import{_ as $}from"./index.vue_vue_type_script_setup_true_lang5.js?v=1752142539265";import{_ as K}from"./index101.js?v=1752142539265";import"./common.js?v=1752142539265";import"./__commonjsHelpers__.js?v=1752142539265";import"./index.vue_vue_type_script_setup_true_lang7.js?v=1752142539265";const X=y({name:"EmptyBox",setup(e,{slots:t}){const n=a(),{t:l}=v(),o=()=>{c()};return()=>{var e;let a;return C(k,null,[0===n.taskCount?C(_,{class:"pt-80px",size:"huge",description:l("Layout.MessageBox.index_1")},null):C(k,null,[C(x,{class:"justify-between! flex-nowrap!"},{default:()=>{return[C("span",null,[l("Layout.MessageBox.index_2")]),C(f,{text:!0,type:"primary",onClick:o},(e=a=l("Public.Status.Restart"),"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!b(e)?a:{default:()=>[a]}))];var e}}),C(s,{class:"mt-12px! mb-16px!"},null),null==(e=t.default)?void 0:e.call(t)])])}}}),G={class:"h-460px overflow-auto"},J={class:"install"},T={key:0,class:"cmd"},W=u(y({__name:"index",setup(e,{expose:s}){const u=a(),i=t(),p=n(),r=h(""),{send:c,close:d}=A("/sock_shell",{onMessage:(e,a)=>{const s=a.data;o(s)&&(r.value+=s)}}),g=()=>{if(p.taskList.length){const{type:e,status:a}=p.taskList[0];"execshell"===e&&("-1"===a?(r.value="",c("tail -n 100 -f /tmp/panelExec.log")):setTimeout((async()=>{await p.getList(),g()}),2e3))}};j((()=>u.taskCount),(e=>{e&&g(),i.getMessageCount()})),w((()=>{d()}));const m=async()=>{await p.getList(),0!==u.taskCount&&(g(),p.onRepetion())};return m(),s({init:m}),(e,a)=>{const s=f,t=x,n=B("scroll-bottom");return M(),L(E(X),null,{default:Q((()=>[R("div",G,[(M(!0),z(k,null,D(E(p).taskList,(o=>(M(),z("div",{key:o.id},["execshell"===o.type?(M(),z(k,{key:0},[C(t,{class:"justify-between! mb-8px"},{default:Q((()=>[R("span",J,O(o.name),1),R("div",null,[U(O("0"===o.status?"waiting":e.$t("Soft.index_40"))+" ",1),a[0]||(a[0]=R("img",{src:"data:image/gif;base64,R0lGODlhDgACAIAAAHNzcwAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQFDgABACwAAAAAAgACAAACAoRRACH5BAUOAAEALAQAAAACAAIAAAIChFEAIfkEBQ4AAQAsCAAAAAIAAgAAAgKEUQAh+QQJDgABACwAAAAADgACAAACBoyPBpu9BQA7"},null,-1)),a[1]||(a[1]=R("span",{class:"px-5px"},"|",-1)),C(s,{text:"",color:"#20a53a",onClick:e=>(async e=>{d(),await l({id:e}),await p.getList()})(o.id)},{default:Q((()=>[U(O(e.$t("Public.Btn.Del")),1)])),_:2},1032,["onClick"])])])),_:2},1024),"-1"===o.status?F((M(),z("pre",T,[U(O(E(r)),1)])),[[n]]):I("",!0)],64)):I("",!0)])))),128))])])),_:1})}}}),[["__scopeId","data-v-7b9da2ab"]]),q=y({__name:"index",setup(e,{expose:a}){const s=t(),{loading:n,table:l,columns:o,search:u}=N(s),i=()=>{s.getMessageCount()};return a({init:i}),(e,a)=>{const s=d,t=$,p=V;return M(),L(p,null,{table:Q((()=>[C(s,{loading:E(n),data:E(l).data,columns:E(o)},null,8,["loading","data","columns"])])),pageRight:Q((()=>[C(t,{page:E(u).p,"onUpdate:page":a[0]||(a[0]=e=>E(u).p=e),"page-size":E(u).limit,"onUpdate:pageSize":a[1]||(a[1]=e=>E(u).limit=e),"item-count":E(l).total,"page-slot":5,"show-size-picker":!1,onRefresh:i},null,8,["page","page-size","item-count"])])),_:1})}}}),Y=u(y({__name:"index",setup(e,{expose:a}){const s=h("None"),{loading:t,setLoading:n}=g(),l=async()=>{try{n(!0);const{message:e}=await p();r(e)&&(s.value=o(e.result)?e.result:"None")}finally{n(!1)}};return l(),a({init:l}),(e,a)=>{const n=K,l=i;return M(),L(l,{class:"h-full",show:E(t)},{default:Q((()=>[C(n,{log:E(s)},null,8,["log"])])),_:1},8,["show"])}}}),[["__scopeId","data-v-8405edde"]]),Z={class:"h-550px"},ee=y({__name:"index",setup(s,{expose:n}){const{t:l}=v(),o=a(),u=t(),i=h("task"),p=H([{key:"task",label:()=>C("span",null,[l("Layout.MessageBox.index_3"),U(" ("),o.taskCount,U(")")]),component:P(W)},{key:"message",label:()=>C("span",null,[l("Layout.MessageBox.index_4"),U(" ("),u.listConut,U(")")]),component:P(q)},{key:"log",label:l("Layout.MessageBox.index_5"),component:P(Y)}]);return u.getMessageCount(),n({onClose:()=>{m()}}),(a,s)=>{const t=e;return M(),z("div",Z,[C(t,{value:E(i),"onUpdate:value":s[0]||(s[0]=e=>S(i)?i.value=e:null),ref:"tabsRef",data:E(p)},null,8,["value","data"])])}}});export{ee as default};
