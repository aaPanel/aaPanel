import{_ as t}from"./index102.js?v=1756367574781";import{k as a,a0 as e,o as n,a2 as s,V as i,a3 as o,an as r,U as l,j as c,W as u,a4 as p,S as m}from"./vue.js?v=1756367574781";import{a0 as d,a1 as _,a2 as f}from"./page_layout.js?v=1756367574781";import{dk as y,aC as g,dh as v}from"./naive.js?v=1756367574781";import"./public.js?v=1756367574781";import"./common.js?v=1756367574781";import"./__commonjsHelpers__.js?v=1756367574781";import"./index103.js?v=1756367574781";const x=["innerHTML"],b=a({__name:"index",setup(a){const{getUpdateVersion:b,getInfo:h,getApiInfo:w}=d(),{version:j,newVersionInfo:A,hasNewVersion:k,isInstall:$,isUserAutoMatic:I,formToken:U,isExistWhite:C}=e(d());function M(t){return parseInt(t.replace(/\./g,""))}async function S(){if(!$.value)return;await b();const t=M(A.value.version),a=M(j.value);k.value=t>a}async function T(){await _(),await h(),S()}const V=async()=>{U.value.open||await f({t_type:2}),await f({t_type:3,limit_addr:U.value.limit_addr+"\n127.0.0.1"}),w()};return n(()=>{S(),w()}),(a,e)=>{const n=g,d=v,_=y,f=t;return i(),s(f,null,{"public-exam":o(()=>[l($)&&l(k)?(i(),s(_,{key:0,type:"warning",class:"mb-16px"},{default:o(()=>[c(p(a.$t("Account.Settings.index_17",[l(A).version]))+" "+p(a.$t("Account.Settings.index_19"))+p(l(A).uptime)+" ",1),u(n,{type:"primary",onClick:T,class:"ml-6"},{default:o(()=>[c(p(a.$t("Public.Btn.Update")),1)]),_:1}),u(d,{placement:"bottom",trigger:"hover"},{trigger:o(()=>[u(n,{size:"small",text:"",type:"primary",class:"ml-6"},{default:o(()=>[c(p(a.$t("Account.Settings.index_20")),1)]),_:1})]),default:o(()=>[m("div",{class:"large-text",innerHTML:l(A).updateMsg},null,8,x)]),_:1})]),_:1})):r("",!0),!l(C)&&l($)?(i(),s(_,{key:1,type:"warning",class:"mb-16px"},{default:o(()=>[m("span",null,p(a.$t("Account.Account.account_533924-11")),1),u(n,{type:"primary",onClick:V,class:"ml-6"},{default:o(()=>[c(p(a.$t("Account.Account.account_533924-12")),1)]),_:1})]),_:1})):r("",!0),!l(I)&&l($)?(i(),s(_,{key:2,type:"warning",class:"mb-16px"},{default:o(()=>[e[0]||(e[0]=m("span",null,"The current sub-panel version number is lower than 1.0.9, can not use the automatic parse function, please update the sub-panel and in the settings to enable the API and drop 127.0.0.1 to the whitelist!",-1)),u(n,{type:"primary",onClick:T,class:"ml-6"},{default:o(()=>[c(p(a.$t("Public.Btn.Update")),1)]),_:1})]),_:1,__:[0]})):r("",!0)]),_:1})}}});export{b as default};
