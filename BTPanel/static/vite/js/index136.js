import{_ as a}from"./index.vue_vue_type_script_setup_true_lang.js?v=1769066082311";import{fy as s,fz as e,d as t,h as o}from"./page_layout.js?v=1769066082311";import{k as l,P as i,r,e as c,a2 as n,V as p,a3 as m,W as d,an as u,S as _,U as f,N as v}from"./vue.js?v=1769066082311";import{dS as x,dW as b,au as j,dk as w}from"./naive.js?v=1769066082311";import"./common.js?v=1769066082311";import"./__commonjsHelpers__.js?v=1769066082311";import"./public.js?v=1769066082311";const y={class:"w-280px"},h={class:"w-280px"},A=l({__name:"index",props:{row:{}},setup(l,{expose:w}){const A=l,{row:D}=A,{t:g}=i(),k=r(null),R=c({dataAccess:"127.0.0.1",access:"127.0.0.1",ssl:""}),U=r([{label:g("Database.form.index_12"),value:"127.0.0.1"},{label:g("Database.form.index_13"),value:"%"},{label:g("Database.form.index_14"),value:"ip"}]),$={host:{trigger:["blur","change"],validator:()=>"ip"!==R.dataAccess||(""!==R.access.trim()||new Error(g("Database.form.index_19")))}},z=a=>{R.access="ip"===a?"":a};return(async()=>{const{message:a}=await e({name:D.name});t(a)&&("127.0.0.1"!==a.permission&&"%"!==a.permission?(R.dataAccess="ip",R.access=a.permission.split(",").join("\n")):(R.dataAccess=a.permission,R.access=a.permission),R.ssl=o(a.ssl)?a.ssl:"")})(),w({onConfirm:async()=>{var a;await(null==(a=k.value)?void 0:a.validate());const e={...v(R),name:D.username,access:"ip"===R.dataAccess?R.access.trim().split("\n").join(","):R.access};s(v(e))}}),(s,e)=>{const t=b,o=x,l=j,i=a;return p(),n(i,{ref_key:"formRef",ref:k,model:f(R),rules:$,class:"px-20px py-24px"},{default:m(()=>[d(o,{label:s.$t("Database.form.index_6"),path:"listen_ip"},{default:m(()=>[_("div",y,[d(t,{value:f(R).dataAccess,"onUpdate:value":[e[0]||(e[0]=a=>f(R).dataAccess=a),z],class:"permission-select",options:f(U)},null,8,["value","options"])])]),_:1},8,["label"]),"ip"===f(R).dataAccess?(p(),n(o,{key:0,label:s.$t("Database.form.index_7"),path:"host"},{default:m(()=>[_("div",h,[d(l,{value:f(R).access,"onUpdate:value":e[1]||(e[1]=a=>f(R).access=a),type:"textarea",autosize:{minRows:3,maxRows:3},"input-props":{name:"address"},placeholder:s.$t("Database.form.index_8")},null,8,["value","placeholder"])])]),_:1},8,["label"])):u("",!0),u("",!0)]),_:1},8,["model"])}}});export{A as default};
