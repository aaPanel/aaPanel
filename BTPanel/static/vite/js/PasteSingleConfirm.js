import{_ as e}from"./index.js?v=1769066082311";import{_ as a}from"./index.vue_vue_type_script_setup_true_lang.js?v=1769066082311";import{n as t,aa as i}from"./page_layout.js?v=1769066082311";import{A as l,T as s,U as o,w as n}from"./CalcSize.vue_vue_type_script_setup_true_lang.js?v=1769066082311";import{a as r}from"./public.js?v=1769066082311";import{k as m,P as f,i as p,r as u,e as d,a2 as v,V as _,a3 as c,S as w,W as y,U as C,j,a4 as b,ak as h}from"./vue.js?v=1769066082311";import{dS as g,dU as $,dV as x,au as z}from"./naive.js?v=1769066082311";import"./common.js?v=1769066082311";import"./__commonjsHelpers__.js?v=1769066082311";import"./soft2.js?v=1769066082311";import"./soft.js?v=1769066082311";import"./site.js?v=1769066082311";const S={class:"p-20px"},T={class:"w-240px"},U=m({name:"PasteSingleConfirm",__name:"PasteSingleConfirm",setup(m,{expose:U}){const{t:P}=f(),F=p("fileStore"),{currentPath:k,fileList:M,fileCopyCache:V,copiedFile:A,waitForPaste:H}=F,L=u(!1),N=d({type:"rename",name:"",size:0,modifyTime:""}),W=e=>{const a=l(M.value,V.value);a.length&&("overwrite"===e?N.name=a[0].nm:"rename"===e&&(N.name=q(a[0].nm)))},q=e=>e.replace(/\.(?=[^.]+$)/," - copy.");function B(){L.value=!1}async function D(){await o(A.value.path,k.value+"/"+N.name),H.value=!1,n(F)}async function E(){if("rename"==N.type){return await s(k.value,N.name)?r({title:P("file.pasteConfirm.overwriteTitle"),content:P("file.pasteConfirm.overwriteMessage",[N.name]),onConfirm:async({hide:e})=>{await D(),e(),B()}}):(await D(),B()),!1}await D()}return U({open:function(){L.value=!0;const e=l(M.value,V.value);1==e.length&&(N.type="rename",N.name=q(e[0].nm),N.size=e[0].sz,N.modifyTime=i(e[0].mt))},close:B}),(l,s)=>{const o=x,n=$,r=g,m=z,f=a,p=e;return _(),v(p,{show:C(L),"onUpdate:show":s[2]||(s[2]=e=>h(L)?L.value=e:null),width:440,title:l.$t("file.pasteConfirm.title"),footer:!0,onConfirm:E},{default:c(()=>[w("div",S,[y(f,null,{default:c(()=>[y(r,{label:l.$t("file.pasteConfirm.operationType")},{default:c(()=>[y(n,{value:C(N).type,"onUpdate:value":[s[0]||(s[0]=e=>C(N).type=e),W]},{default:c(()=>[y(o,{value:"overwrite"},{default:c(()=>[j(b(l.$t("file.pasteConfirm.overwriteFile")),1)]),_:1}),y(o,{value:"rename"},{default:c(()=>[j(b(l.$t("file.pasteConfirm.renameFile")),1)]),_:1})]),_:1},8,["value"])]),_:1},8,["label"]),y(r,{label:l.$t("file.pasteConfirm.fileName")},{default:c(()=>[w("div",T,[y(m,{value:C(N).name,"onUpdate:value":s[1]||(s[1]=e=>C(N).name=e),disabled:"overwrite"==C(N).type,placeholder:""},null,8,["value","disabled"])])]),_:1},8,["label"]),y(r,{label:l.$t("file.pasteConfirm.size")},{default:c(()=>[w("span",null,b(C(t)(C(N).size)),1)]),_:1},8,["label"]),y(r,{label:l.$t("file.pasteConfirm.lastModified"),"show-feedback":!1},{default:c(()=>[w("span",null,b(C(i)(C(N).modifyTime)),1)]),_:1},8,["label"])]),_:1})])]),_:1},8,["show","title"])}}});export{U as default};
