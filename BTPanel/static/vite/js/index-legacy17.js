System.register(["./page_layout-legacy.js?v=1752142539265","./index-legacy.js?v=1752142539265","./public-legacy.js?v=1752142539265","./index.vue_vue_type_script_setup_true_lang-legacy.js?v=1752142539265","./backup-info-legacy.js?v=1752142539265","./utils-legacy.js?v=1752142539265","./vue-legacy.js?v=1752142539265","./naive-legacy.js?v=1752142539265"],(function(e,t){"use strict";var a,s,o,l,n,i,r,p,d,u,c,_,g,h,m,w,f,x,b,y,v,C,k,M,j,q,T,$,U,O,P,D,R,S,z,X,A,B;return{setters:[e=>{a=e.O,s=e.n,o=e._,l=e.v,n=e.i,i=e.a,r=e.d},e=>{p=e._},e=>{d=e.e,u=e.q,c=e._},e=>{_=e._},e=>{g=e.default},e=>{h=e.u},e=>{m=e.k,w=e.P,f=e.$,x=e.a1,b=e.X,y=e.W,v=e.a2,C=e.Q,k=e.V,M=e.j,j=e.a3,q=e.e,T=e.r,$=e._,U=e.a4},e=>{O=e.cz,P=e.bX,D=e.cH,R=e.b$,S=e.c3,z=e.aq,X=e.bZ,A=e.ay,B=e.cA}],execute:function(){const H=m({__name:"index",setup(e){const{t:t}=w(),l=h(),{loading:n,backupData:i}=f(l);return l.getData(),(e,l)=>{const r=D,p=o,d=R,u=P,c=O,h=_,m=a;return b(),x(m,{show:y(n),class:"p-16px"},{default:v((()=>[C(h,{ref:"formRef"},{default:v((()=>[C(c,{label:y(t)("Config.Migrate.index_10")},{default:v((()=>[C(u,null,{default:v((()=>[C(r,{class:"mr-8px"},{default:v((()=>[M(j(y(s)(y(i).disk_use)),1)])),_:1}),k("div",null,[k("span",null,j(y(t)("Config.Migrate.index_11")),1),C(r,{type:"success",class:"ml-16px mr-8px"},{default:v((()=>[M(j(y(s)(y(i).disk_free)),1)])),_:1}),C(d,{trigger:"hover",placement:"top-start"},{trigger:v((()=>[C(p,{name:"base-warning",class:"text-warning mr-4px",size:"16"})])),default:v((()=>[k("span",null,[k("li",null,j(y(t)("Config.Migrate.index_12"))+" "+j(y(s)(1.5*y(i).disk_use)),1),k("li",null,j(y(t)("Config.Migrate.index_13")),1)])])),_:1})])])),_:1})])),_:1},8,["label"]),C(c,{label:"Backup Data"},{default:v((()=>[C(g,{class:"w-600px"})])),_:1})])),_:1},512)])),_:1},8,["show"])}}}),I=(e("g",(()=>l.post("/mod/backup_restore/com/get_migrate_progress"))),e("c",(()=>l.post("/mod/backup_restore/com/stop_migrate",{},{requestOptions:{loading:n.global.t("Component.Pay.index_12"),successMessage:!0}}))),e("a",(()=>l.post("/mod/backup_restore/com/close_migrate_popup",{},{requestOptions:{loading:n.global.t("Component.Pay.index_12"),successMessage:!1}}))),m({__name:"index",setup(e){const a=$((()=>i((()=>t.import("./index-legacy108.js?v=1752142539265")),void 0))),s=$((()=>i((()=>t.import("./migrate-success-legacy.js?v=1752142539265")),void 0))),o=$((()=>i((()=>t.import("./migrate-error-legacy.js?v=1752142539265")),void 0))),{t:g}=w(),h=d(g("Config.Migrate.index_4")),m=d(g("Config.Migrate.index_5"),{onRefresh:(e,t)=>{"success"===e?(f.data=t,f.show=!0):(D.data.errData=t,D.show=!0)}}),f=d(g("Config.Migrate.index_6")),D=d(g("Config.Migrate.index_7"),{onRetry:e=>{D.show=!1,m.show=!1,I.ip=e.server_ip,I.port=e.ssh_port,I.account=e.ssh_user,I.password=e.password,Z()}}),R=T(null),I=q({ip:"",port:22,account:"",password:""}),Q={ip:{required:!0,message:g("Term.index_9"),trigger:["blur","input"]},port:{required:!0,type:"number",message:g("Security.Conf.Index_28"),trigger:["blur","input"]},account:{required:!0,message:g("Term.index_11"),trigger:["blur","input"]},password:{required:!0,message:g("Term.index_14"),trigger:["blur","input"]}},V=()=>{h.show=!0},W=()=>({auth_type:"password",server_ip:I.ip,ssh_port:I.port,ssh_user:I.account,password:I.password,ps:I.ip}),Z=async()=>{await(R.value?.validate()),u({title:g("Config.Migrate.index_8"),content:()=>C("span",null,[C(U("i18n-t"),{keypath:"Config.Migrate.index_9",scope:"global"},{default:()=>[C("b",{class:"color-warning text-2xl"},[M(" "),I.ip,M(" ")])]})]),onConfirm:async()=>{var e;await(e=W(),l.post("/mod/backup_restore/com/ssh_auth_check",e,{requestOptions:{loading:n.global.t("Component.Pay.index_12"),successMessage:!0}})),await(e=>l.post("/mod/backup_restore/com/add_migrate_task",e,{requestOptions:{loading:n.global.t("Component.Pay.index_12"),successMessage:!0}}))(W()),m.show=!0}})};return(async()=>{const{message:e}=await l.post("/mod/backup_restore/com/get_migrate_status");r(e)&&e.is_running&&(m.show=!0,I.ip=e.server_ip,I.port=e.ssh_port,I.account=e.ssh_user,I.password=e.password)})(),(e,t)=>{const l=z,n=O,i=X,r=P,d=A,u=_,w=c,q=p,T=B;return b(),x(T,{class:"p-16px"},{default:v((()=>[C(y(S),{type:"warning",class:"mb-16px"},{default:v((()=>[k("span",null,j(y(g)("Config.Migrate.index_1")),1)])),_:1}),C(u,{ref_key:"formRef",ref:R,model:y(I),rules:Q},{default:v((()=>[C(r,null,{default:v((()=>[C(n,{label:e.$t("Term.index_8"),path:"ip"},{default:v((()=>[C(l,{class:"w-190px!",value:y(I).ip,"onUpdate:value":t[0]||(t[0]=e=>y(I).ip=e),placeholder:e.$t("Term.index_9")},null,8,["value","placeholder"])])),_:1},8,["label"]),C(n,{path:"port"},{default:v((()=>[C(i,{"show-button":!1,class:"w-80px!",value:y(I).port,"onUpdate:value":t[1]||(t[1]=e=>y(I).port=e),placeholder:e.$t("Docker.Container.create.index_7")},null,8,["value","placeholder"])])),_:1})])),_:1}),C(n,{label:e.$t("Term.index_10"),path:"account"},{default:v((()=>[C(l,{class:"w-280px!",value:y(I).account,"onUpdate:value":t[2]||(t[2]=e=>y(I).account=e),placeholder:e.$t("Term.index_11")},null,8,["value","placeholder"])])),_:1},8,["label"]),C(n,{label:e.$t("Database.index_14"),path:"password"},{default:v((()=>[C(l,{class:"w-280px!",value:y(I).password,"onUpdate:value":t[3]||(t[3]=e=>y(I).password=e),placeholder:e.$t("Term.index_14")},null,8,["value","placeholder"])])),_:1},8,["label"]),C(n,{label:" "},{default:v((()=>[C(d,{type:"primary",onClick:Z},{default:v((()=>[M(j(y(g)("Config.Migrate.index_2")),1)])),_:1})])),_:1})])),_:1},8,["model"]),C(w,null,{default:v((()=>[t[8]||(t[8]=k("li",{class:"text-warning font-bold"},"Please use root user",-1)),k("li",null,[C(d,{type:"primary",text:"",onClick:V},{default:v((()=>[M(j(y(g)("Config.Migrate.index_3")),1)])),_:1})])])),_:1,__:[8]}),C(q,{show:y(h).show,"onUpdate:show":t[4]||(t[4]=e=>y(h).show=e),title:y(h).title,data:y(h).data,width:"850","min-height":250,component:H},null,8,["show","title","data"]),C(q,{show:y(m).show,"onUpdate:show":t[5]||(t[5]=e=>y(m).show=e),title:y(m).title,hideClose:!0,data:y(m).data,width:"750","min-height":250,component:y(a)},null,8,["show","title","data","component"]),C(q,{show:y(f).show,"onUpdate:show":t[6]||(t[6]=e=>y(f).show=e),title:y(f).title,hideClose:!0,data:y(f).data,width:"750","min-height":250,component:y(s)},null,8,["show","title","data","component"]),C(q,{show:y(D).show,"onUpdate:show":t[7]||(t[7]=e=>y(D).show=e),title:y(D).title,hideClose:!0,data:y(D).data,width:"750","min-height":250,component:y(o)},null,8,["show","title","data","component"])])),_:1})}}})),Q=Object.freeze(Object.defineProperty({__proto__:null,default:I},Symbol.toStringTag,{value:"Module"}));e("i",Q)}}}));
