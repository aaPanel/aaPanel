System.register(["./page_layout-legacy.js?v=1763625242172","./index-legacy.js?v=1763625242172","./public-legacy.js?v=1763625242172","./index.vue_vue_type_script_setup_true_lang-legacy.js?v=1763625242172","./backup-info-legacy.js?v=1763625242172","./utils-legacy.js?v=1763625242172","./vue-legacy.js?v=1763625242172","./naive-legacy.js?v=1763625242172"],(function(e,t){"use strict";var a,s,o,l,n,i,r,d,p,u,c,_,g,h,m,w,f,x,b,y,v,C,k,M,j,T,U,q,P,$,D,O,R,S,z,B,I,V;return{setters:[e=>{a=e.n,s=e._,o=e.T,l=e.bf,n=e.i,i=e.c,r=e.a},e=>{d=e._},e=>{p=e.e,u=e.p,c=e._},e=>{_=e._},e=>{g=e.default},e=>{h=e.u},e=>{m=e.k,w=e.P,f=e.a0,x=e.R,b=e.a2,y=e.a3,v=e.X,C=e.V,k=e.j,M=e.a4,j=e.U,T=e.r,U=e.e,q=e.a5,P=e._},e=>{$=e.dd,D=e.dh,O=e.d9,R=e.dP,S=e.dS,z=e.dk,B=e.au,I=e.df,V=e.aC}],execute:function(){const X=m({__name:"index",setup(e){const{t:t}=w(),l=h(),{loading:n,backupData:i}=f(l);return l.getData(),(e,l)=>{const r=$,d=s,p=D,u=O,c=R,h=_,m=o;return x(),b(m,{show:C(n),class:"p-16px"},{default:y((()=>[v(h,{ref:"formRef"},{default:y((()=>[v(c,{label:C(t)("Config.Migrate.index_10")},{default:y((()=>[v(u,null,{default:y((()=>[v(r,{class:"mr-8px"},{default:y((()=>[k(M(C(a)(C(i).disk_use)),1)])),_:1}),j("div",null,[j("span",null,M(C(t)("Config.Migrate.index_11")),1),v(r,{type:"success",class:"ml-16px mr-8px"},{default:y((()=>[k(M(C(a)(C(i).disk_free)),1)])),_:1}),v(p,{trigger:"hover",placement:"top-start"},{trigger:y((()=>[v(d,{name:"base-warning",class:"text-warning mr-4px",size:"16"})])),default:y((()=>[j("span",null,[j("li",null,M(C(t)("Config.Migrate.index_12"))+" "+M(C(a)(1.5*C(i).disk_use)),1),j("li",null,M(C(t)("Config.Migrate.index_13")),1)])])),_:1})])])),_:1})])),_:1},8,["label"]),v(c,{label:"Backup Data"},{default:y((()=>[v(g,{class:"w-600px"})])),_:1})])),_:1},512)])),_:1},8,["show"])}}}),A=(e("g",(()=>l.post("/mod/backup_restore/com/get_migrate_progress"))),e("c",(()=>l.post("/mod/backup_restore/com/stop_migrate",{},{requestOptions:{loading:n.global.t("Component.Pay.index_12"),successMessage:!0}}))),e("a",(()=>l.post("/mod/backup_restore/com/close_migrate_popup",{},{requestOptions:{loading:n.global.t("Component.Pay.index_12"),successMessage:!1}}))),m({__name:"index",setup(e){const a=P((()=>r((()=>t.import("./index-legacy113.js?v=1763625242172")),void 0))),s=P((()=>r((()=>t.import("./migrate-success-legacy.js?v=1763625242172")),void 0))),o=P((()=>r((()=>t.import("./migrate-error-legacy.js?v=1763625242172")),void 0))),{t:g}=w(),h=p(g("Config.Migrate.index_4")),m=p(g("Config.Migrate.index_5"),{onRefresh:(e,t)=>{"success"===e?(f.data=t,f.show=!0):($.data.errData=t,$.show=!0)}}),f=p(g("Config.Migrate.index_6")),$=p(g("Config.Migrate.index_7"),{onRetry:e=>{$.show=!1,m.show=!1,A.ip=e.server_ip,A.port=e.ssh_port,A.account=e.ssh_user,A.password=e.password,H()}}),D=T(null),A=U({ip:"",port:22,account:"",password:""}),E={ip:{required:!0,message:g("Term.index_9"),trigger:["blur","input"]},port:{required:!0,type:"number",message:g("Security.Conf.Index_28"),trigger:["blur","input"]},account:{required:!0,message:g("Term.index_11"),trigger:["blur","input"]},password:{required:!0,message:g("Term.index_14"),trigger:["blur","input"]}},F=()=>{h.show=!0},G=()=>({auth_type:"password",server_ip:A.ip,ssh_port:A.port,ssh_user:A.account,password:A.password,ps:A.ip}),H=async()=>{await(D.value?.validate()),u({title:g("Config.Migrate.index_8"),content:()=>v("span",null,[v(q("i18n-t"),{keypath:"Config.Migrate.index_9",scope:"global"},{default:()=>[v("b",{class:"color-warning text-2xl"},[k(" "),A.ip,k(" ")])]})]),onConfirm:async()=>{var e;await(e=G(),l.post("/mod/backup_restore/com/ssh_auth_check",e,{requestOptions:{loading:n.global.t("Component.Pay.index_12"),successMessage:!0}})),await(e=>l.post("/mod/backup_restore/com/add_migrate_task",e,{requestOptions:{loading:n.global.t("Component.Pay.index_12"),successMessage:!0}}))(G()),m.show=!0}})};return(async()=>{const{message:e}=await l.post("/mod/backup_restore/com/get_migrate_status");i(e)&&e.is_running&&(m.show=!0,A.ip=e.server_ip,A.port=e.ssh_port,A.account=e.ssh_user,A.password=e.password)})(),(e,t)=>{const l=B,n=R,i=I,r=O,p=V,u=_,w=c,T=d,U=S;return x(),b(U,{class:"p-16px"},{default:y((()=>[v(C(z),{type:"warning",class:"mb-16px"},{default:y((()=>[j("span",null,M(C(g)("Config.Migrate.index_1")),1)])),_:1}),v(u,{ref_key:"formRef",ref:D,model:C(A),rules:E},{default:y((()=>[v(r,null,{default:y((()=>[v(n,{label:e.$t("Term.index_8"),path:"ip"},{default:y((()=>[v(l,{class:"w-190px!",value:C(A).ip,"onUpdate:value":t[0]||(t[0]=e=>C(A).ip=e),placeholder:e.$t("Term.index_9")},null,8,["value","placeholder"])])),_:1},8,["label"]),v(n,{path:"port"},{default:y((()=>[v(i,{"show-button":!1,class:"w-80px!",value:C(A).port,"onUpdate:value":t[1]||(t[1]=e=>C(A).port=e),placeholder:e.$t("Docker.Container.create.index_7")},null,8,["value","placeholder"])])),_:1})])),_:1}),v(n,{label:e.$t("Term.index_10"),path:"account"},{default:y((()=>[v(l,{class:"w-280px!",value:C(A).account,"onUpdate:value":t[2]||(t[2]=e=>C(A).account=e),placeholder:e.$t("Term.index_11")},null,8,["value","placeholder"])])),_:1},8,["label"]),v(n,{label:e.$t("Database.index_14"),path:"password"},{default:y((()=>[v(l,{class:"w-280px!",value:C(A).password,"onUpdate:value":t[3]||(t[3]=e=>C(A).password=e),placeholder:e.$t("Term.index_14")},null,8,["value","placeholder"])])),_:1},8,["label"]),v(n,{label:" "},{default:y((()=>[v(p,{type:"primary",onClick:H},{default:y((()=>[k(M(C(g)("Config.Migrate.index_2")),1)])),_:1})])),_:1})])),_:1},8,["model"]),v(w,null,{default:y((()=>[t[8]||(t[8]=j("li",{class:"text-warning font-bold"},"Please use root user",-1)),j("li",null,[v(p,{type:"primary",text:"",onClick:F},{default:y((()=>[k(M(C(g)("Config.Migrate.index_3")),1)])),_:1})])])),_:1,__:[8]}),v(T,{show:C(h).show,"onUpdate:show":t[4]||(t[4]=e=>C(h).show=e),title:C(h).title,data:C(h).data,width:"850","min-height":250,component:X},null,8,["show","title","data"]),v(T,{show:C(m).show,"onUpdate:show":t[5]||(t[5]=e=>C(m).show=e),title:C(m).title,hideClose:!0,data:C(m).data,width:"750","min-height":250,component:C(a)},null,8,["show","title","data","component"]),v(T,{show:C(f).show,"onUpdate:show":t[6]||(t[6]=e=>C(f).show=e),title:C(f).title,hideClose:!0,data:C(f).data,width:"750","min-height":250,component:C(s)},null,8,["show","title","data","component"]),v(T,{show:C($).show,"onUpdate:show":t[7]||(t[7]=e=>C($).show=e),title:C($).title,hideClose:!0,data:C($).data,width:"750","min-height":250,component:C(o)},null,8,["show","title","data","component"])])),_:1})}}})),E=Object.freeze(Object.defineProperty({__proto__:null,default:A},Symbol.toStringTag,{value:"Module"}));e("i",E)}}}));
