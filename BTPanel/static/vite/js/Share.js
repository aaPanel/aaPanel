import{_ as e}from"./index.js?v=1769066082311";import{_ as a}from"./index.vue_vue_type_script_setup_true_lang.js?v=1769066082311";import{i as l,aE as s,d as t}from"./page_layout.js?v=1769066082311";import{g as o}from"./index209.js?v=1769066082311";import{w as r}from"./CalcSize.vue_vue_type_script_setup_true_lang.js?v=1769066082311";import{_ as i}from"./ShareDetail.vue_vue_type_script_setup_true_lang.js?v=1769066082311";import{dS as u,au as n,dU as p,dV as f,aC as d}from"./naive.js?v=1769066082311";import{k as m,i as _,av as v,r as c,c as h,R as j,V as x,W as w,a3 as y,S as M,U as b,j as g,a4 as S,ak as k,F as U,N as C}from"./vue.js?v=1769066082311";import"./common.js?v=1769066082311";import"./__commonjsHelpers__.js?v=1769066082311";import"./public.js?v=1769066082311";import"./soft2.js?v=1769066082311";import"./soft.js?v=1769066082311";import"./site.js?v=1769066082311";const D={class:"p-20px"},F=m({__name:"Share",setup(m,{expose:F}){const{t:R}=l.global,L=_("fileStore"),{choosedKeys:N,fileList:V}=L,W=v("shareDetailRef"),q=c(!1),z=h(()=>"dir"==E.value.type?R("file.shareModal.setShareFolder",{name:E.value.nm}):R("file.shareModal.setShareFile",{name:E.value.nm})),E=c({}),H=c({filename:"",ps:"",password:"",expire:24});async function K(){var e;const{message:a}=await s.post("/files?action=create_download_url",C(H.value),{requestOptions:{loading:R("file.shareModal.creatingShareLink")}});t(a)&&(q.value=!1,null==(e=W.value)||e.open(a),r(L))}function O(){H.value.password=o(8)}return F({open:function(){q.value=!0;const e=V.value.find(e=>N.value[0]==e.nm);E.value=e,H.value.ps=E.value.nm,H.value.filename=E.value.path},close:function(){q.value=!1}}),(l,s)=>{const t=n,o=u,r=f,m=p,_=d,v=a,c=e;return x(),j(U,null,[w(c,{show:b(q),"onUpdate:show":s[3]||(s[3]=e=>k(q)?q.value=e:null),title:b(z),width:560,footer:!0,"confirm-text":b(R)("file.shareModal.create"),onConfirm:K},{default:y(()=>[M("div",D,[w(v,null,{default:y(()=>[w(o,{label:b(R)("file.shareModal.shareName")},{default:y(()=>[w(t,{value:b(H).ps,"onUpdate:value":s[0]||(s[0]=e=>b(H).ps=e)},null,8,["value"])]),_:1},8,["label"]),w(o,{label:b(R)("file.shareModal.expirationDate")},{default:y(()=>[w(m,{value:b(H).expire,"onUpdate:value":s[1]||(s[1]=e=>b(H).expire=e)},{default:y(()=>[w(r,{value:24},{default:y(()=>[g(S(b(R)("file.shareModal.aDay")),1)]),_:1}),w(r,{value:168},{default:y(()=>[g(S(b(R)("file.shareModal.aWeek")),1)]),_:1}),w(r,{value:1130800},{default:y(()=>[g(S(b(R)("file.shareModal.permanent")),1)]),_:1})]),_:1},8,["value"])]),_:1},8,["label"]),w(o,{label:b(R)("file.shareModal.extractionCode"),"show-feedback":!1},{default:y(()=>[w(t,{value:b(H).password,"onUpdate:value":s[2]||(s[2]=e=>b(H).password=e)},null,8,["value"]),w(_,{class:"ml-10px",type:"primary",onClick:O},{default:y(()=>[g(S(b(R)("file.shareModal.random")),1)]),_:1})]),_:1},8,["label"])]),_:1})])]),_:1},8,["show","title","confirm-text"]),w(i,{ref_key:"shareDetailRef",ref:W},null,512)],64)}}});export{F as default};
