import{_ as e}from"./index.js?v=1767769852656";import{_ as a}from"./index.vue_vue_type_script_setup_true_lang.js?v=1767769852656";import{i as l,aE as s,d as t}from"./page_layout.js?v=1767769852656";import{g as o}from"./index204.js?v=1767769852656";import{g as r}from"./index38.js?v=1767769852656";import{_ as i}from"./ShareDetail.vue_vue_type_script_setup_true_lang.js?v=1767769852656";import{dR as u,au as n,dT as p,dU as f,aC as d}from"./naive.js?v=1767769852656";import{k as m,i as _,av as v,r as c,c as h,R as j,V as x,W as w,a3 as y,S as M,U as g,j as b,a4 as k,ak as S,F as U,N as D}from"./vue.js?v=1767769852656";import"./common.js?v=1767769852656";import"./__commonjsHelpers__.js?v=1767769852656";import"./public.js?v=1767769852656";import"./soft2.js?v=1767769852656";import"./soft.js?v=1767769852656";import"./site.js?v=1767769852656";import"./file2.js?v=1767769852656";import"./index.vue_vue_type_script_setup_true_lang7.js?v=1767769852656";const C={class:"p-20px"},R=m({__name:"Share",setup(m,{expose:R}){const{t:F}=l.global,L=_("fileStore"),{choosedKeys:N,fileList:W}=L,q=v("shareDetailRef"),E=c(!1),H=h(()=>"dir"==K.value.type?F("file.shareModal.setShareFolder",{name:K.value.nm}):F("file.shareModal.setShareFile",{name:K.value.nm})),K=c({}),O=c({filename:"",ps:"",password:"",expire:24});async function T(){var e;const{message:a}=await s.post("/files?action=create_download_url",D(O.value),{requestOptions:{loading:F("file.shareModal.creatingShareLink")}});t(a)&&(E.value=!1,null==(e=q.value)||e.open(a),r(L))}function V(){O.value.password=o(8)}return R({open:function(){E.value=!0;const e=W.value.find(e=>N.value[0]==e.nm);K.value=e,O.value.ps=K.value.nm,O.value.filename=K.value.path},close:function(){E.value=!1}}),(l,s)=>{const t=n,o=u,r=f,m=p,_=d,v=a,c=e;return x(),j(U,null,[w(c,{show:g(E),"onUpdate:show":s[3]||(s[3]=e=>S(E)?E.value=e:null),title:g(H),width:560,footer:!0,"confirm-text":g(F)("file.shareModal.create"),onConfirm:T},{default:y(()=>[M("div",C,[w(v,null,{default:y(()=>[w(o,{label:g(F)("file.shareModal.shareName")},{default:y(()=>[w(t,{value:g(O).ps,"onUpdate:value":s[0]||(s[0]=e=>g(O).ps=e)},null,8,["value"])]),_:1},8,["label"]),w(o,{label:g(F)("file.shareModal.expirationDate")},{default:y(()=>[w(m,{value:g(O).expire,"onUpdate:value":s[1]||(s[1]=e=>g(O).expire=e)},{default:y(()=>[w(r,{value:24},{default:y(()=>[b(k(g(F)("file.shareModal.aDay")),1)]),_:1}),w(r,{value:168},{default:y(()=>[b(k(g(F)("file.shareModal.aWeek")),1)]),_:1}),w(r,{value:1130800},{default:y(()=>[b(k(g(F)("file.shareModal.permanent")),1)]),_:1})]),_:1},8,["value"])]),_:1},8,["label"]),w(o,{label:g(F)("file.shareModal.extractionCode"),"show-feedback":!1},{default:y(()=>[w(t,{value:g(O).password,"onUpdate:value":s[2]||(s[2]=e=>g(O).password=e)},null,8,["value"]),w(_,{class:"ml-10px",type:"primary",onClick:V},{default:y(()=>[b(k(g(F)("file.shareModal.random")),1)]),_:1})]),_:1},8,["label"])]),_:1})])]),_:1},8,["show","title","confirm-text"]),w(i,{ref_key:"shareDetailRef",ref:q},null,512)],64)}}});export{R as default};
