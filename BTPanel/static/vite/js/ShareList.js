import{_ as e}from"./index.js?v=1769066082311";import{f as a,a as t,h as s}from"./public.js?v=1769066082311";import{aa as i}from"./page_layout.js?v=1769066082311";import{$ as l,a0 as o}from"./CalcSize.vue_vue_type_script_setup_true_lang.js?v=1769066082311";import{_ as r}from"./ShareDetail.vue_vue_type_script_setup_true_lang.js?v=1769066082311";import{k as n,P as p,i as u,r as m,av as c,R as f,V as _,W as d,a3 as h,S as v,U as j,ak as y,F as g}from"./vue.js?v=1769066082311";import{e1 as x}from"./naive.js?v=1769066082311";import"./common.js?v=1769066082311";import"./__commonjsHelpers__.js?v=1769066082311";import"./soft2.js?v=1769066082311";import"./soft.js?v=1769066082311";import"./site.js?v=1769066082311";import"./index.vue_vue_type_script_setup_true_lang.js?v=1769066082311";const L={class:"p-20px"},k={class:"mt-10px flex justify-end items-center"},w=n({__name:"ShareList",setup(n,{expose:w}){const{t:M}=p(),S=u("fileStore"),{shareList:D,shareListPage:b,shareListTotal:C}=S,P=m(!1),R=m(!1),U=c("shareDetailRef"),B=async()=>{try{R.value=!0,await o(S)}finally{R.value=!1}};function T(e){b.value=e,B()}w({open(){P.value=!0,B()},close(){P.value=!1}});const z=m([{key:"ps",title:M("file.shareListModal.shareName")},{key:"filename",title:M("file.shareListModal.shareAddress")},{key:"expire",title:M("file.shareListModal.expirationDate"),render:e=>i(e.expire)},a({width:120,options:e=>[{label:M("Public.Btn.Details"),onClick:()=>{!async function(e){var a;null==(a=U.value)||a.open(e)}(e)}},{label:M("Public.Btn.Delete"),onClick:()=>{var a;a=e,t({title:M("file.shareListModal.cancelShareTitle"),content:M("file.shareListModal.cancelShareMessage",{filename:a.filename}),onConfirm:async()=>{await l(S,a.id),B()}})}}]})]);return(a,t)=>{const i=s,l=x,o=e;return _(),f(g,null,[d(o,{show:j(P),"onUpdate:show":t[1]||(t[1]=e=>y(P)?P.value=e:null),title:j(M)("file.shareListModal.title"),width:850},{default:h(()=>[v("div",L,[d(i,{loading:j(R),data:j(D),columns:j(z)},null,8,["loading","data","columns"]),v("div",k,[d(l,{"item-count":j(C),page:j(b),"onUpdate:page":t[0]||(t[0]=e=>y(b)?b.value=e:null),"on-update:page":T},null,8,["item-count","page"])])])]),_:1},8,["show","title"]),d(r,{ref_key:"shareDetailRef",ref:U},null,512)],64)}}});export{w as default};
