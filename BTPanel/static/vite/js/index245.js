import{_ as e}from"./index114.js?v=1769066082311";import{c as t,h as a,_ as l,f as n}from"./public.js?v=1769066082311";import{d as i,k as s,m as o}from"./page_layout.js?v=1769066082311";import{g as u,w as c,x as d,y as p,z as _,A as r}from"./setting.js?v=1769066082311";import{k as f,P as g,W as m,R as y,V as h,U as v,a3 as b,S as w,a4 as x,e as S,r as k,F as W,n as $,j,N as U,ak as z}from"./vue.js?v=1769066082311";import{dk as E,dg as C,au as L,aC as P,dS as B}from"./naive.js?v=1769066082311";import{_ as V}from"./index.vue_vue_type_script_setup_true_lang.js?v=1769066082311";import"./common.js?v=1769066082311";import"./__commonjsHelpers__.js?v=1769066082311";const A=f({__name:"type",setup(e,{expose:n}){const{t:s}=g(),{table:o,columns:d,setLoading:p}=t([{key:"type",title:s("Waf.Setting.config_93")},{key:"status",title:s("Public.Table.Status"),align:"right",width:100,render:e=>m(E,{value:e.status,size:"small",onUpdateValue:async t=>{await c({method_type:e.type,check:t?1:0}),e.status=t}},null)}]),_=async()=>{try{p(!0);const{message:e}=await u();i(e)&&(o.data=e.method_type.map(e=>({type:e[0],status:e[1]})))}finally{p(!1)}};return _(),n({init:_}),(e,t)=>{const n=a,i=l;return h(),y("div",null,[m(n,{"max-height":400,loading:v(o).loading,data:v(o).data,columns:v(d)},null,8,["loading","data","columns"]),m(i,{class:"mt-16px"},{default:b(()=>[w("li",null,x(e.$t("Waf.Setting.config_91")),1),w("li",null,x(e.$t("Waf.Setting.config_92")),1)]),_:1})])}}}),H={class:"flex mb-12px"},R={class:"flex-1 mr-12px"},D={class:"w-100px mr-12px"},F=f({__name:"header",setup(e,{expose:c}){const{t:r}=g(),f=S({type:"",length:null}),U=async()=>{f.type?f.length?(await _({header_type:f.type,header_type_len:f.length}),q(),f.type="",f.length=null):o.error(r("Waf.Setting.config_99")):o.error(r("Waf.Setting.config_98"))},z=k(null),{table:E,columns:B,setLoading:V}=t([{key:"type",title:"Header"},{key:"len",title:r("Waf.Setting.config_95"),width:100,render:e=>m(W,null,[e.isEdit?m(C,{ref:z,value:e.editLen,min:1,size:"small",showButton:!1,placeholder:"",onUpdateValue:t=>{e.editLen=t||1}},null):e.len])},n({width:100,options:e=>e.isEdit?[{label:r("Public.Btn.Save"),onClick:()=>{F(e)}},{label:r("Public.Btn.Cancel"),onClick:()=>{N(e)}}]:[{label:r("Public.Btn.Edit"),show:!e.isEdit,onClick:()=>{A(e)}},{label:r("Public.Btn.Del"),show:!e.isEdit,onClick:()=>{T(e)}}]})]),A=e=>{e.isEdit=!0,$(()=>{var e;null==(e=z.value)||e.focus()})},F=async e=>{await d({header_type:e.type,header_type_len:e.editLen}),e.isEdit=!1,e.len=e.editLen},N=e=>{e.isEdit=!1,e.editLen=e.len},T=async e=>{await p({header_type:e.type,header_type_len:e.len}),q()},q=async()=>{try{V(!0);const{message:e}=await u();i(e)&&(E.data=e.header_len.map(e=>({type:e[0],len:s(e[1]),editLen:s(e[1]),isEdit:!1})))}finally{V(!1)}};return q(),c({init:q}),(e,t)=>{const n=L,i=P,s=a,o=l;return h(),y("div",null,[w("div",H,[w("div",R,[m(n,{value:v(f).type,"onUpdate:value":t[0]||(t[0]=e=>v(f).type=e),placeholder:e.$t("Waf.Setting.config_94")},null,8,["value","placeholder"])]),w("div",D,[m(v(C),{value:v(f).length,"onUpdate:value":t[1]||(t[1]=e=>v(f).length=e),"show-button":!1,placeholder:e.$t("Waf.Setting.config_95")},null,8,["value","placeholder"])]),m(i,{type:"primary",onClick:U},{default:b(()=>[j(x(e.$t("Public.Btn.Add")),1)]),_:1})]),m(s,{"max-height":380,loading:v(E).loading,data:v(E).data,columns:v(B)},null,8,["loading","data","columns"]),m(o,{class:"mt-16px"},{default:b(()=>[w("li",null,x(e.$t("Waf.Setting.config_96")),1),w("li",null,x(e.$t("Waf.Setting.config_97")),1)]),_:1})])}}}),N={class:"p-20px"},T={class:"w-200px"},q={class:"w-200px"},G={class:"w-200px"},I=f({__name:"count",setup(e,{expose:t}){const a=k(null),l=S({base64:1,body_size:8e5,post_count:1e3,get_count:1e3}),n={},s=async()=>{var e;await(null==(e=a.value)?void 0:e.validate()),await r(U(l))};return t({init:async()=>{const{message:e}=await u();i(e)&&(l.base64=e.http_config.base64?1:0,l.body_size=e.http_config.body_size,l.post_count=e.http_config.post_count,l.get_count=e.http_config.get_count)}}),(e,t)=>{const i=E,o=B,u=C,c=P,d=V;return h(),y("div",N,[m(d,{ref_key:"formRef",ref:a,model:v(l),rules:n,"label-width":"150"},{default:b(()=>[m(o,{label:e.$t("Waf.Setting.config_100"),path:"base64"},{default:b(()=>[m(i,{value:v(l).base64,"onUpdate:value":t[0]||(t[0]=e=>v(l).base64=e),"checked-value":1,"unchecked-value":0},null,8,["value"])]),_:1},8,["label"]),m(o,{label:e.$t("Waf.Setting.config_101"),path:"body_size"},{default:b(()=>[w("div",T,[m(u,{value:v(l).body_size,"onUpdate:value":t[1]||(t[1]=e=>v(l).body_size=e),min:1,"show-button":!1},null,8,["value"])])]),_:1},8,["label"]),m(o,{label:e.$t("Waf.Setting.config_102"),path:"post_count"},{default:b(()=>[w("div",q,[m(u,{value:v(l).post_count,"onUpdate:value":t[2]||(t[2]=e=>v(l).post_count=e),min:1,"show-button":!1},{suffix:b(()=>[w("span",null,x(e.$t("Waf.Setting.config_103")),1)]),_:1},8,["value"])])]),_:1},8,["label"]),m(o,{label:e.$t("Waf.Setting.config_104"),path:"get_count"},{default:b(()=>[w("div",G,[m(u,{value:v(l).get_count,"onUpdate:value":t[3]||(t[3]=e=>v(l).get_count=e),min:1,"show-button":!1},{suffix:b(()=>[w("span",null,x(e.$t("Waf.Setting.config_103")),1)]),_:1},8,["value"])])]),_:1},8,["label"]),m(o,{label:" "},{default:b(()=>[m(c,{type:"primary",onClick:s},{default:b(()=>[j(x(e.$t("Waf.Setting.config_105")),1)]),_:1})]),_:1})]),_:1},8,["model"])])}}}),J={class:"p-20px"},K=f({__name:"index",setup(t){const{t:a}=g(),l=k("type"),n=[{key:"type",label:a("Waf.Setting.config_88"),component:A},{key:"header",label:a("Waf.Setting.config_89"),component:F},{key:"count",label:a("Waf.Setting.config_90"),component:I}];return(t,a)=>{const i=e;return h(),y("div",J,[m(i,{value:v(l),"onUpdate:value":a[0]||(a[0]=e=>z(l)?l.value=e:null),options:n},null,8,["value"])])}}});export{K as default};
