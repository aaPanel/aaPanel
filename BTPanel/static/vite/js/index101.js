const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/index155.js?v=1769066082311","js/page_layout.js?v=1769066082311","js/vue.js?v=1769066082311","js/__commonjsHelpers__.js?v=1769066082311","js/naive.js?v=1769066082311","js/common.js?v=1769066082311","js/public.js?v=1769066082311","css/public.css?v=1769066082311","css/page_layout.css?v=1769066082311","css/index79.css?v=1769066082311"])))=>i.map(i=>d[i]);
import{Z as e,r as a,c as t,a0 as l,k as n,y as s,R as o,V as i,S as c,an as u,U as r,a4 as p,F as d,O as v,a2 as y,a3 as h,l as _,q as m,v as f,W as x,ad as g,ae as b,P as w,H as C,j as k,u as P,t as I,X as M,o as L,av as S,ak as F,_ as z,G as A,a7 as $}from"./vue.js?v=1769066082311";import{dR as T,d as U,x as V,p as j,dS as Z,dT as O,dU as H,dV as R,dW as G,k as B,dX as D,dY as q,_ as N,T as Y,dZ as E,d_ as W,b9 as Q,o as X,m as K,d$ as J,dn as ee,K as ae,P as te,dl as le,dm as ne,a as se,aa as oe,e0 as ie,e1 as ce}from"./page_layout.js?v=1769066082311";import{df as ue,d6 as re,G as pe,a1 as de,de as ve,_ as ye,dW as he,aC as _e,dR as me,dQ as fe}from"./naive.js?v=1769066082311";import{a as xe,u as ge}from"./public.js?v=1769066082311";import{a as be,l as we}from"./paypal-js.js?v=1769066082311";import{f as Ce}from"./index112.js?v=1769066082311";import"./__commonjsHelpers__.js?v=1769066082311";import"./common.js?v=1769066082311";import"./index.vue_vue_type_script_setup_true_lang.js?v=1769066082311";import"./index104.js?v=1769066082311";import"./index.vue_vue_type_script_setup_true_lang2.js?v=1769066082311";import"./index103.js?v=1769066082311";import"./index114.js?v=1769066082311";import"./ssl-lets-progress.js?v=1769066082311";import"./index.js?v=1769066082311";const ke=e("PayStore",()=>{const e=a(""),l=a(!0),n=a(""),s=a(27),o=a(""),i=a([]),c=a(!1),u=a(!0),r=a(0),p=a([]),d=a(0),v=t(()=>p.value.length>0?p.value[r.value].children:[]),y=t(()=>v.value[d.value]),h=a(!0),_={order_no:"",stripe_publishable_key:"",order_id:0,paypal_client_id:"",price:"",market_price:"",cycle:1,cycle_unit:"month",couponPrice:""},m=a(ue(_)),f=a("stripe"),x=a(!1),g=a(0),b=a([]),w=a([]),C=a({status:0,end_time:0,obtain_id:0,total:0,length:0,coupons:[],package_quota:{total:0,quota:0}}),k=a(""),P=a([]),I=a([]),M=()=>{r.value=0,p.value=[],d.value=0,h.value=!0,m.value=ue(_),f.value="stripe"},L=()=>{k.value="voucher",P.value=[],I.value=[]};return{currentMenu:e,isFirstCutMenu:l,pid:n,source:s,username:o,plugins:i,openSsl:c,isFirstFetchSsl:u,cycleIndex:r,numberIndex:d,cycleList:p,numberList:v,currentProduct:y,shouldFetchOrder:h,orderInfo:m,channelMenu:f,isUseCoupon:x,couponId:g,couponList:b,couponAllList:w,receiveCoupon:C,voucherMenu:k,voucherAllList:P,authorizationAllList:I,reset:()=>{e.value="",l.value=!0,n.value="",s.value=27,o.value="",i.value=[],c.value=!1,u.value=!0,M(),L()},resetProduct:M,resetVoucher:L}}),Pe={class:"feature-box relative w-full h-full py-40px pl-22px pr-8px rounded-tl-10px rounded-bl-10px"},Ie={class:"mb-38px"},Me={class:"flex mb-10px text-20px feature-title"},Le={key:0,class:"glyphicon glyphicon-vip"},Se={key:1,class:"ml-8px"},Fe={key:2},ze={key:0,class:"min-h-34px feature-desc"},Ae={key:0},$e={class:"mb-16px text-15px feature-text"},Te={class:"text-13px"},Ue={class:"flex-1 ml-8px overflow-hidden text-font2 feature-desc"},Ve={key:1,class:"mt-36px text-default"},je={class:"mb-16px text-15px"},Ze=["innerHTML"],Oe={key:2,class:"pay-info-bg"},He={key:3,class:"contrast",href:"https://aapanel.com/new/pricing.html",target:"_blank",rel:"noreferer noopener"},Re={key:4,class:"pay-info-recom"},Ge={class:"buy"},Be={class:"text"},De=j(n({__name:"ProductFeatures",setup(e){const t=ke(),{currentMenu:n,plugins:y}=l(t),h=a([]);return s(()=>{"pro"!==n.value&&"voucher"!==n.value||(async()=>{const{message:e}=await T({product_id:"100000058"});U(e)&&(h.value=V(e.res)?e.res:[])})()}),(e,a)=>(i(),o("div",Pe,[c("div",Ie,[c("div",Me,["pro"===r(n)||"voucher"===r(n)?(i(),o("span",Le)):u("",!0),"pro"===r(n)||"voucher"===r(n)?(i(),o("span",Se,p(e.$t("Component.Pay.index_1")),1)):u("",!0),"plugin"===r(n)&&r(y).length>0?(i(),o("span",Fe,p(r(y)[0].name),1)):u("",!0)]),"pro"===r(n)||"voucher"===r(n)?(i(),o("div",ze,p(e.$t("Component.Pay.index_2")),1)):u("",!0)]),"pro"===r(n)||"voucher"===r(n)?(i(),o("div",Ae,[c("div",$e,p(e.$t("Component.Pay.index_3"))+":",1),c("div",Te,[(i(!0),o(d,null,v(r(h),e=>(i(),o("div",{key:e,class:"flex py-10px"},[a[0]||(a[0]=c("span",{class:"glyphicon glyphicon-ok feature-title"},null,-1)),c("span",Ue,p(e),1)]))),128))])])):u("",!0),"plugin"===r(n)&&r(y).length>0?(i(),o("div",Ve,[c("div",je,p(100===r(y)[0].type?e.$t("Mail.Overview.today_17"):e.$t("Component.Pay.index_4"))+": ",1),c("div",{class:"w-186px leading-22px text-13px",innerHTML:r(y)[0].ps},null,8,Ze)])):u("",!0),"pro"===r(n)||"voucher"===r(n)?(i(),o("div",Oe)):u("",!0),"pro"===r(n)||"voucher"===r(n)?(i(),o("a",He,p(e.$t("Component.Pay.index_5")),1)):u("",!0),"plugin"===r(n)&&100!==r(y)[0].type?(i(),o("div",Re,[c("div",Ge,p(e.$t("Component.Pay.index_6")),1),c("div",Be,[c("span",null,p(e.$t("Component.Pay.index_7")),1)])])):u("",!0)]))}}),[["__scopeId","data-v-d809d67a"]]),qe=()=>{const e=ke(),{pid:a,source:n,cycleIndex:s,cycleList:o,currentProduct:i,openSsl:c,isFirstFetchSsl:u,shouldFetchOrder:r,orderInfo:p,channelMenu:d,isUseCoupon:v,couponId:y,couponList:h,couponAllList:_,receiveCoupon:m}=l(e),f=t(()=>{let e=!1;switch(d.value){case"paypal":e=i.value.paypal_first_subscription_price>0||i.value.paypal_subscription_price>0;break;case"stripe":e=i.value.first_subscription_price>0||i.value.subscription_price>0}return e}),x=t(()=>{if(v.value&&!f.value){const e=h.value.find(e=>e.id===y.value);if(e)return e.deduct_amount}return 0}),g=t(()=>{if(1!==m.value.status)return!1;return!(m.value.end_time-Math.floor(Date.now()/1e3)<=0)&&m.value.length>0}),b=()=>{if(_.value.length>0){const e=_.value[0];for(let a=0;a<o.value.length;a++){const t=2===e.charge_type?"999":"".concat(e.cycle);if(o.value[a].cycle===t&&o.value[a].cycle_unit===e.cycle_unit){s.value=a;break}}}},w=()=>{var e;h.value=[];null==(e=i.value.usable_coupons)||e.forEach(e=>{const t=_.value.find(t=>t.id===e&&"".concat(t.product_id)===a.value);t&&h.value.push(t)}),h.value.sort((e,a)=>Number(a.deduct_amount)-Number(e.deduct_amount)),h.value.length>0?(y.value=h.value[0].id,v.value=!0):(y.value=0,v.value=!1)};return{subscribe:f,couponPrice:x,showCouponModal:g,getCycleList:async()=>{const{message:e}=await G({product_id:a.value||"100000058"});o.value=V(e)?e:[]},getSslStatus:async()=>{if(!u.value)return;const{message:e}=await R();u.value=!1,U(e)&&(c.value=e.result)},getOrderInfo:async()=>{if(!r.value)return;const e={pid:a.value,cycle:i.value.cycle,cycle_unit:i.value.cycle_unit,charge_type:i.value.charge_type,num:i.value.num,source:n.value,...v.value&&0!==y.value?{coupon_id:y.value}:{}},{message:t}=await H(e);r.value=!1,U(t)&&(p.value.order_no=t.order_no,p.value.stripe_publishable_key=t.stripe_publishable_key,p.value.order_id=t.order_id,p.value.paypal_client_id=t.paypal_client_id,p.value.price=t.price,p.value.market_price=t.market_price,p.value.cycle=re(t,"transaction.cycle",1),p.value.cycle_unit=re(t,"transaction.cycle_unit",""))},setChannelMenu:e=>{d.value=e},getCouponList:async()=>{const{message:e}=await O();_.value=V(e)?e:[],b(),w()},setCouponList:w,getReceiveCoupon:async()=>{const{message:e}=await Z();U(e)&&(m.value.status=e.status,m.value.end_time=e.end_time,m.value.obtain_id=e.obtain_id,m.value.length=e.coupons.length,m.value.total=e.total,m.value.coupons=e.coupons,m.value.package_quota=e.package_quota)},resetOrder:()=>{r.value=!0}}},Ne=()=>{const e=ke(),{pid:a,currentMenu:t,isFirstCutMenu:n,voucherMenu:s,voucherAllList:o,authorizationAllList:i}=l(e),c=async()=>{if(o.value.length>0)return;const{message:e}=await q();o.value=V(e)?e:[]},u=async()=>{if(i.value.length>0)return;const{message:e}=await D();i.value=V(e)?e:[]};return{getVoucherList:c,getAuthorizationList:u,initCurrentMenu:async()=>{if(!n.value)return;await u();if(i.value.find(e=>e.product.id===B(a.value)))return n.value=!1,a.value="0",t.value="voucher",s.value="authorization",Promise.reject(!1);await c();return o.value.find(e=>e.product.id===B(a.value))?(n.value=!1,a.value="0",t.value="voucher",s.value="voucher",Promise.reject(!1)):void 0}}},Ye={class:"h-full"},Ee=j(n({__name:"ProductLoading",props:{loading:{type:Boolean,default:!1}},setup:e=>(a,t)=>{const l=N,n=Y;return i(),y(n,{class:"h-full",show:e.loading,rotate:!1},{description:h(()=>t[0]||(t[0]=[c("div",{class:"pt-8px text-14px leading-20px"},"Loading, please wait...",-1)])),icon:h(()=>[x(l,{class:"loading-icon",name:"base-loading"})]),default:h(()=>[_(c("div",Ye,[m(a.$slots,"default",{},void 0,!0)],512),[[f,!e.loading]])]),_:3},8,["show"])}}),[["__scopeId","data-v-b8f5f34f"]]),We={class:"product-section"},Qe={class:"section-title"},Xe={class:"section-body"},Ke=j(n({__name:"ProductSection",props:{title:{type:String,default:""}},setup:e=>(a,t)=>(i(),o("div",We,[c("div",Qe,p(e.title),1),c("div",Xe,[m(a.$slots,"default",{},void 0,!0)])]))}),[["__scopeId","data-v-f226922f"]]),Je=["onClick"],ea={class:"new-price"},aa={class:"number"},ta={class:"time"},la={class:"old-price"},na={key:0,class:"tips"},sa={class:"flex-center h-103px"},oa=j(n({__name:"CycleSelect",props:g({options:{type:Array,default:()=>[]}},{value:{default:0},valueModifiers:{}}),emits:["update:value"],setup(e){const a=b(e,"value"),{t:t}=w(),l=e=>{const a=e.children[0],l=B(a.cycle);return 999===l?t("Component.Auth.index_6"):"year"===a.cycle_unit?t("Component.Pay.index_14",[l,t("Public.Unit.Year",l)]):t("Component.Pay.index_15",[l,t("Public.Unit.Month",l)])};return(t,n)=>{const s=W,r=E,m=pe;return i(),o(d,null,[_(x(r,{"slides-per-view":3,effect:"slide","space-between":20,loop:!1,"show-dots":!1,draggable:!0,"show-arrow":!0},{default:h(()=>[(i(!0),o(d,null,v(e.options,(e,r)=>(i(),y(s,{key:"".concat(e.cycle+e.cycle_unit),class:"pt-8px",style:{width:"190px"}},{default:h(()=>[e.children.length>0?(i(),o("div",{key:0,class:C(["radio-item pro",{active:a.value===r}]),onClick:e=>(e=>{a.value=e})(r)},[c("div",ea,[c("span",aa,[n[0]||(n[0]=c("span",{class:"symbol"},"$",-1)),c("span",null,p(e.children[0].price.toFixed(2)),1)]),n[1]||(n[1]=c("span",{class:"ml-4px mr-2px"},"/",-1)),c("span",ta,p(l(e)),1)]),c("div",la,p(t.$t("Component.Pay.index_16",[e.children[0].market_price])),1),0===r?(i(),o("div",na,p(t.$t("Component.Pay.index_10")),1)):u("",!0),n[2]||(n[2]=c("div",{class:"checked"},null,-1))],10,Je)):u("",!0)]),_:2},1024))),128))]),_:1},512),[[f,e.options.length>0]]),_(c("div",sa,[x(m)],512),[[f,0===e.options.length]])],64)}}}),[["__scopeId","data-v-e3e62edc"]]),ia={class:"product-selector"},ca=["onClick"],ua={key:0,class:"discount"},ra={class:"flex-center"},pa=j(n({__name:"ProductSelect",props:g({onChange:[Function,Array],options:{type:Array,default:()=>[]}},{value:{},valueModifiers:{}}),emits:["update:value"],setup(e){const a=b(e,"value");return(t,l)=>{const n=pe;return i(),o(d,null,[_(c("div",ia,[(i(!0),o(d,null,v(e.options,l=>(i(),o("div",{key:l.value,class:C(["product-option",{active:a.value===l.value}]),onClick:t=>(t=>{a.value=t.value,e.onChange&&de(e.onChange,t.value)})(l)},[k(p(l.label)+" ",1),l.discount&&l.discount<100?(i(),o("div",ua,p(t.$t("Component.Pay.index_13",["".concat(l.discount,"%")])),1)):u("",!0)],10,ca))),128))],512),[[f,e.options.length>0]]),_(c("div",ra,[x(n,{size:"small"})],512),[[f,0===e.options.length]])],64)}}}),[["__scopeId","data-v-a92aa359"]]),da={class:"ml-16px"};function va(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!P(e)}const ya=n({__name:"time",props:{endtime:{default:0}},emits:["finish"],setup(e,{emit:a}){const l=e,n=a,{t:s}=w(),c=t(()=>{const e=Date.now(),a=1e3*l.endtime;return Math.max(0,a-e)}),u=e=>e.toString().padStart(2,"0"),p=({hours:e,minutes:a,seconds:t})=>{let l,n,o,i;const c=Math.floor(e/24);return e%=24,x("div",{class:"text-desc"},[x("span",{class:"mr-6px"},[s("Component.Pay.index_40")]),c>0?x(ve,{type:"error",size:"small",class:"px-4px",bordered:!1},va(l=u(c))?l:{default:()=>[l]}):"",c>0?x("span",{class:"mx-4px"},[k(":")]):"",x(ve,{type:"error",size:"small",class:"px-4px",bordered:!1},va(n=u(e))?n:{default:()=>[n]}),x("span",{class:"mx-4px"},[k(":")]),x(ve,{type:"error",size:"small",class:"px-4px",bordered:!1},va(o=u(a))?o:{default:()=>[o]}),x("span",{class:"mx-4px"},[k(":")]),x(ve,{type:"error",size:"small",class:"px-4px",bordered:!1},va(i=u(t))?i:{default:()=>[i]})])},d=()=>{l.endtime>0&&n("finish")};return(e,a)=>{const t=Q;return i(),o("div",da,[x(t,{duration:r(c),render:p,"on-finish":d},null,8,["duration"])])}}}),ha=j(n({__name:"index",props:g({data:{default:()=>[]}},{value:{},valueModifiers:{},checked:{type:Boolean},checkedModifiers:{}}),emits:g(["change","finish"],["update:value","update:checked"]),setup(e,{emit:a}){const l=e,n=a,{t:s}=w(),{subscribe:u}=qe(),d=I(l,"data"),v=b(e,"value"),y=b(e,"checked"),m=t(()=>{if(-1!==v.value){const e=d.value.find(e=>e.id===v.value);if(e)return e.end_time}return 0}),g=t(()=>d.value.length>0?d.value.map(e=>{const a=(e=>2===e.charge_type?s("Component.Auth.index_6").toLocaleLowerCase():"year"===e.cycle_unit?s("Public.Unit.Year").toLocaleLowerCase():s("Public.Unit.Month").toLocaleLowerCase())(e);return{label:s("Component.Pay.index_19",[e.deduct_amount,a]),value:e.id}}):[{label:s("Component.Pay.index_20"),value:-1}]),k=t(()=>0===l.data.length||u.value),P=()=>{k.value||(y.value=!y.value,n("change"))},M=e=>{e.stopPropagation()},L=e=>{y.value=e,n("change")},S=()=>{n("change")},F=()=>{n("finish")};return(e,a)=>{const t=ye,l=he;return i(),o("div",{class:C(["coupon-box mb-16px",{active:y.value}]),onClick:P},[x(t,{checked:y.value,disabled:r(k),onClick:M,"onUpdate:checked":L},{default:h(()=>[c("span",null,p(e.$t("Component.Pay.index_18",[e.data.length])),1)]),_:1},8,["checked","disabled"]),c("div",{class:"w-220px ml-16px",onClick:M},[x(l,{value:v.value,"onUpdate:value":[a[0]||(a[0]=e=>v.value=e),S],options:r(g),"fallback-option":!1,disabled:r(k),"menu-props":{style:{"--n-option-check-color":"#e4a93c","--n-option-text-color-active":"#e4a93c"}}},null,8,["value","options","disabled"])]),_(x(ya,{endtime:r(m),onFinish:F},null,8,["endtime"]),[[f,r(m)>0]])],2)}}}),[["__scopeId","data-v-8674d607"]]),_a={key:0,class:"flex-center flex-col h-full text-font2"},ma={class:"mb-12px text-16px"},fa=n({__name:"ssl",props:{show:{type:Boolean,default:!1}},setup(e){const a=M("--pay-color"),t=()=>{Ce()};return(l,n)=>{const s=_e;return e.show?m(l.$slots,"default",{key:1}):(i(),o("div",_a,[c("div",ma,p(l.$t("Component.Pay.index_41")),1),x(s,{type:"primary",class:"h-36px",size:"large",color:r(a),onClick:t},{default:h(()=>[k(p(l.$t("Component.Pay.index_42")),1)]),_:1},8,["color"])]))}}}),xa={key:0,class:"mb-8px text-font2 text-13px"},ga={class:"font-bold"},ba={class:"flex flex-wrap justify-center items-baseline text-font2"},wa={class:"mr-4px text-14px"},Ca={class:"mr-4px pay-price-color"},ka={class:"text-24px font-bold"},Pa={key:0,class:"ml-8px pay-price-color font-bold"},Ia=j(n({__name:"total",props:{payType:{type:String,default:""},subscribe:{type:Boolean,default:!1},currency:{type:Boolean,default:!1}},setup(e){const{t:a}=w(),n=ke(),{currentProduct:s,orderInfo:v}=l(n),{couponPrice:y}=qe(),h=t(()=>e.subscribe?_.value:v.value.price),_=t(()=>"paypal"===e.payType?s.value.paypal_first_subscription_price>0?s.value.paypal_first_subscription_price.toFixed(2):s.value.paypal_subscription_price.toFixed(2):s.value.first_subscription_price>0?s.value.first_subscription_price.toFixed(2):s.value.subscription_price.toFixed(2)),m=t(()=>{const{cycle_unit:e}=s.value;return"year"===e?90:10}),f=t(()=>{const e=B(v.value.cycle);return 999===e?a("Component.Auth.index_6"):"year"===s.value.cycle_unit?a("Component.Pay.index_14",[e,a("Public.Unit.Year",e)]):a("Component.Pay.index_15",[e,a("Public.Unit.Month",e)])}),x=t(()=>2===s.value.charge_type?a("Component.Auth.index_6").toLocaleLowerCase():"year"===s.value.cycle_unit?a("Public.Unit.Year").toLocaleLowerCase():a("Public.Unit.Month").toLocaleLowerCase());return(a,t)=>(i(),o(d,null,[e.subscribe?(i(),o("div",xa,[c("span",null,p(a.$t("Component.Pay.index_43")),1),c("span",ga,p(a.$t("Component.Pay.index_44",[r(m)])),1)])):u("",!0),c("div",ba,[c("span",wa,p(a.$t("Component.Pay.index_25")),1),c("span",Ca,[t[0]||(t[0]=c("span",{class:"mr-2px text-18px font-bold"},"$",-1)),c("span",ka,p(r(h)),1)]),c("span",null,"/"+p(r(f)),1),r(y)?(i(),o("span",Pa,p(a.$t("Component.Pay.index_19",[r(y),r(x)])),1)):u("",!0)])],64))}}),[["__scopeId","data-v-5fc19cba"]]),Ma={class:"relative flex-center flex-col h-full"},La={class:"absolute left-0 bottom-12px w-full text-center text-font3"},Sa={class:"ml-8px"},Fa=n({__name:"index",setup(e,{expose:t}){const{t:n}=w(),s=ke(),{openSsl:o,orderInfo:u}=l(s),v=M("--pay-color"),{subscribe:_,getSslStatus:m,getOrderInfo:f,setChannelMenu:g}=qe();let b=null;const C=a(!0),P=a(!1),I=async()=>{if(!b)return;const e=K.loading(n("Component.Pay.index_12"));try{const{message:e}=await J({order_no:u.value.order_no,subscribe:_.value?1:0});U(e)&&(e.stripe_checkout_redirect_url?($(),window.open(e.stripe_checkout_redirect_url,"_blank","no_opener,noreferrer")):e.id?b.redirectToCheckout({sessionId:e.id}):K.error(n("Component.Pay.index_28")))}finally{e.close()}},S=()=>{g("paypal")},F=async()=>{try{C.value=!0,await m(),await f(),await z()}finally{C.value=!1}},z=async()=>{const e=be(u.value.stripe_publishable_key);b=await e};let A=null;const $=async()=>{const{close:e}=K.loading(()=>x(d,null,[x("span",null,[k("Paying in progress, ")]),x(_e,{text:!0,type:"primary",onClick:a},{default:()=>[k("Cancel Pay")]})])),a=()=>{xe({title:n("Public.Confirm.Title"),content:"Do you want to confirm the cancellation of payment?",onConfirm:async()=>{A&&(clearTimeout(A),A=null),e()}})},t=async(a=!0)=>{const{message:t}=await ee({order_id:u.value.order_id});if(U(t)&&1===t.res)return A&&(clearTimeout(A),A=null),e(),K.success(n("Component.Pay.index_7")),await ae({force:1}),void te();a&&null!==A&&l()},l=()=>{A=window.setTimeout(async()=>{await t()},1e3)};A&&clearTimeout(A),await t(!1),l()};return L(()=>{F()}),t({init:F}),(e,a)=>{const t=X;return i(),y(Ee,{loading:r(C)},{default:h(()=>[x(fa,{show:r(o)},{default:h(()=>[c("div",Ma,[x(Ia,{"pay-type":"stripe",subscribe:r(_),currency:r(P)},null,8,["subscribe","currency"]),x(r(_e),{class:"mt-14px w-150px h-34px text-14px",type:"primary",color:r(v),onClick:I},{default:h(()=>[k(p(e.$t("Component.Pay.index_26")),1)]),_:1},8,["color"]),a[1]||(a[1]=c("div",{class:"h-32px"},null,-1)),c("div",La,[c("span",Sa,p(e.$t("Component.Pay.index_27",["Stripe"])),1),x(t,{onClick:S},{default:h(()=>a[0]||(a[0]=[k("PayPal",-1)])),_:1,__:[0]})])])]),_:1},8,["show"])]),_:1},8,["loading"])}}}),za={class:"relative flex-center flex-col h-full"},Aa={class:"absolute left-0 bottom-12px w-full text-center text-font3"},$a={class:"ml-8px"},Ta=n({__name:"index",setup(e,{expose:t}){const{t:n}=w(),s=ke(),{openSsl:o,orderInfo:u,currentProduct:v}=l(s),{subscribe:_,getSslStatus:m,getOrderInfo:f,setChannelMenu:g}=qe(),b=a(null),C=a(!0),P=()=>{g("stripe")},I=async()=>{try{C.value=!0,await m(),await f(),_.value?await F():await S()}finally{C.value=!1}},M=e=>new Promise((a,t)=>{const{message:l}=e;if(U(l)){if(l.status)return a(l.res);K.error(l.msg)}t(l)}),S=async()=>{var e,a;const t=await we({clientId:u.value.paypal_client_id});t&&b.value&&(b.value.innerHTML="",null==(a=t.Buttons)||a.call(t,{style:{height:34},fundingSource:null==(e=t.FUNDING)?void 0:e.PAYPAL,createOrder:()=>ne({oid:u.value.order_id}).then(M).then(e=>e),onApprove:e=>le({paypal_order_id:e.orderID}).then(()=>{K.success(n("Component.Pay.index_7")),te()})}).render(b.value))},F=async()=>{var e,a;const t=await we({clientId:u.value.paypal_client_id,vault:!0,intent:"subscription"});t&&b.value&&(b.value.innerHTML="",null==(a=t.Buttons)||a.call(t,{style:{height:34},fundingSource:null==(e=t.FUNDING)?void 0:e.PAYPAL,createSubscription:(e,a)=>a.subscription.create({custom_id:"".concat(u.value.order_id),plan_id:v.value.paypal_subscription_plan_id}),onApprove:()=>(A(),Promise.resolve())}).render(b.value))};let z=null;const A=async()=>{const{close:e}=K.loading(()=>x(d,null,[x("span",null,[k("Paying in progress, ")]),x(_e,{text:!0,type:"primary",onClick:a},{default:()=>[k("Cancel Pay")]})])),a=()=>{xe({title:n("Public.Confirm.Title"),content:"Do you want to confirm the cancellation of payment?",onConfirm:async()=>{z&&(clearTimeout(z),z=null),e()}})},t=async(a=!0)=>{const{message:t}=await ee({order_id:u.value.order_id});if(U(t)&&1===t.res)return z&&(clearTimeout(z),z=null),e(),K.success(n("Component.Pay.index_7")),await ae({force:1}),void te();a&&null!==z&&l()},l=()=>{z=window.setTimeout(async()=>{await t()},1e3)};z&&clearTimeout(z),await t(!1),l()};return L(()=>{I()}),t({init:I}),(e,a)=>{const t=X;return i(),y(Ee,{loading:r(C)},{default:h(()=>[x(fa,{show:r(o)},{default:h(()=>[c("div",za,[x(Ia,{"pay-type":"paypal",subscribe:r(_),currency:!1},null,8,["subscribe"]),c("div",{ref_key:"payBtnRef",ref:b,class:"relative w-150px h-34px mt-16px z-10"},null,512),a[1]||(a[1]=c("div",{class:"h-32px"},null,-1)),c("div",Aa,[c("span",$a,p(e.$t("Component.Pay.index_27",["Paypal"])),1),x(t,{onClick:P},{default:h(()=>a[0]||(a[0]=[k("Stripe",-1)])),_:1,__:[0]})])])]),_:1},8,["show"])]),_:1},8,["loading"])}}}),Ua={class:"relative flex-center flex-col h-full"},Va={class:"absolute left-0 bottom-12px w-full text-center text-font3"},ja={class:"ml-8px"},Za=n({__name:"index",setup(e,{expose:t}){const{t:n}=w(),s=ke(),{openSsl:o,orderInfo:u}=l(s),{getSslStatus:v,getOrderInfo:_,setChannelMenu:m}=qe();let f=null;const g=M("--pay-color"),b=a(!0),C=a(!0),P=a(!1),I=async()=>{if(!f)return;const e=K.loading(n("Component.Pay.index_12"));try{const{message:e}=await J({order_no:u.value.order_no,subscribe:P.value?1:0,adaptive_pricing:1});U(e)&&(e.stripe_checkout_redirect_url?(F(),window.open(e.stripe_checkout_redirect_url,"_blank","no_opener,noreferrer")):e.id?f.redirectToCheckout({sessionId:e.id}):K.error(n("Component.Pay.index_28")))}finally{e.close()}};let S=null;const F=async()=>{const{close:e}=K.loading(()=>x(d,null,[x("span",null,[k("Paying in progress, ")]),x(_e,{text:!0,type:"primary",onClick:a},{default:()=>[k("Cancel Pay")]})])),a=()=>{xe({title:n("Public.Confirm.Title"),content:"Do you want to confirm the cancellation of payment?",onConfirm:async()=>{S&&(clearTimeout(S),S=null),e()}})},t=async(a=!0)=>{const{message:t}=await ee({order_id:u.value.order_id});if(U(t)&&1===t.res)return S&&(clearTimeout(S),S=null),e(),K.success(n("Component.Pay.index_7")),await ae({force:1}),void te();a&&null!==S&&l()},l=()=>{S=window.setTimeout(async()=>{await t()},1e3)};S&&clearTimeout(S),await t(!1),l()},z=e=>{m(e)},A=async()=>{try{b.value=!0,await v(),await _(),await $()}finally{b.value=!1}},$=async()=>{const e=be(u.value.stripe_publishable_key);f=await e};return L(()=>{A()}),t({init:A}),(e,a)=>{const t=X;return i(),y(Ee,{loading:r(b)},{default:h(()=>[x(fa,{show:r(o)},{default:h(()=>[c("div",Ua,[a[5]||(a[5]=c("div",{class:"flex gap-16px mb-8px"},[c("img",{class:"h-32px",src:"data:image/svg+xml,%3csvg%20aria-hidden='true'%20class='SVGInline-svg%20SVGInline--cleaned-svg%20SVG-svg%20Icon-svg%20Icon--applepay-svg%20Icon-color-svg%20Icon-color--gray600-svg'%20height='32'%20width='32'%20viewBox='0%200%2032%2032'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill='%23F6F8FA'%20d='M0%200h32v32H0z'%3e%3c/path%3e%3cpath%20d='M26.672%208H5.328c-.163%200-.327.002-.49.004a3.265%203.265%200%200%200-.49.043%201.56%201.56%200%200%200-1.148.837c-.076.149-.124.3-.153.464a3.442%203.442%200%200%200-.043.49L3%2010.06v12.255c0%20.164.002.328.004.492.004.163.014.328.043.489a1.562%201.562%200%200%200%20.837%201.148c.149.076.3.124.464.153a3.3%203.3%200%200%200%20.49.044l.223.003h21.877l.226-.003c.162-.005.326-.015.488-.044a1.65%201.65%200%200%200%20.465-.153c.295-.15.534-.389.683-.683.074-.147.126-.304.153-.466.027-.161.041-.324.043-.488.002-.075.003-.149.003-.224l.001-.268V10.062c0-.075-.002-.15-.004-.225a3.243%203.243%200%200%200-.043-.489%201.567%201.567%200%200%200-1.3-1.301%203.274%203.274%200%200%200-.49-.043L26.938%208h-.266Z'%20fill='%23000'%3e%3c/path%3e%3cpath%20d='M26.672%208.555h.262c.071%200%20.143.002.215.004.123.003.27.009.405.034.118.022.217.053.312.103a1.004%201.004%200%200%201%20.54.751c.025.134.032.28.035.405l.004.214v12.515c0%20.07-.002.141-.004.212%200%20.136-.012.272-.034.406a1.08%201.08%200%200%201-.102.311.996.996%200%200%201-.44.44c-.098.05-.202.084-.31.102a2.822%202.822%200%200%201-.404.035%208.19%208.19%200%200%201-.217.002H5.064c-.071%200-.143%200-.212-.002a2.832%202.832%200%200%201-.406-.035%201.087%201.087%200%200%201-.312-.102.995.995%200%200%201-.44-.44%201.09%201.09%200%200%201-.102-.312%202.744%202.744%200%200%201-.033-.405%2010.392%2010.392%200%200%201-.004-.213V10.066c0-.072.001-.143.004-.215.003-.124.01-.269.034-.405.018-.108.052-.213.102-.31a.998.998%200%200%201%20.44-.441%201.11%201.11%200%200%201%20.311-.103c.135-.02.27-.032.406-.033l.213-.004h21.607Z'%20fill='%23fff'%3e%3c/path%3e%3cpath%20d='M10.098%2013.599c.223-.28.373-.652.333-1.035-.325.016-.723.214-.953.494-.207.238-.39.628-.342.994.366.032.731-.183.962-.453Zm.33.524c-.531-.032-.984.302-1.237.302-.254%200-.643-.286-1.063-.278a1.567%201.567%200%200%200-1.331.81c-.571.983-.151%202.442.404%203.244.27.396.594.833%201.022.817.405-.016.564-.26%201.055-.26s.634.26%201.062.252c.444-.008.722-.396.991-.793.31-.453.437-.889.444-.913-.007-.007-.857-.333-.864-1.308-.007-.818.666-1.206.699-1.23-.382-.563-.976-.627-1.183-.642m4.626-1.106c1.155%200%201.959.796%201.959%201.955%200%201.162-.82%201.963-1.988%201.963h-1.278v2.032h-.924v-5.95h2.231Zm-1.307%203.143h1.06c.804%200%201.261-.433%201.261-1.184%200-.75-.457-1.18-1.257-1.18h-1.064v2.364Zm3.508%201.574c0-.759.581-1.224%201.612-1.282l1.187-.07v-.334c0-.482-.326-.771-.87-.771-.515%200-.837.247-.915.635h-.84c.049-.784.716-1.362%201.788-1.362%201.052%200%201.724.557%201.724%201.428v2.99h-.853v-.714h-.02c-.252.483-.802.788-1.37.788-.85%200-1.443-.528-1.443-1.308Zm2.8-.39v-.343l-1.069.065c-.53.037-.832.273-.832.644%200%20.38.313.627.791.627.623%200%201.11-.428%201.11-.994Zm1.692%203.22v-.722c.066.017.215.017.289.017.413%200%20.635-.174.771-.619%200-.009.078-.264.078-.268l-1.566-4.342h.965l1.098%203.53h.016l1.097-3.53h.94l-1.625%204.565c-.37%201.052-.8%201.39-1.699%201.39a3.699%203.699%200%200%201-.363-.021Z'%20fill='%23000'%3e%3c/path%3e%3c/svg%3e",alt:""}),c("img",{class:"h-32px",src:"data:image/svg+xml,%3csvg%20aria-hidden='true'%20class='SVGInline-svg%20SVGInline--cleaned-svg%20SVG-svg%20Icon-svg%20Icon--googlepay-svg%20Icon-color-svg%20Icon-color--gray600-svg'%20height='32'%20width='32'%20viewBox='0%200%2032%2032'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill='%23F5F6F8'%20d='M0%200h32v32H0z'%3e%3c/path%3e%3cpath%20d='M22.075%209.085H9.905C6.1%209.085%202.99%2012.196%202.99%2016c0%203.803%203.111%206.915%206.915%206.915h12.17c3.803%200%206.915-3.112%206.915-6.915s-3.112-6.915-6.915-6.915Z'%20fill='%23fff'%3e%3c/path%3e%3cpath%20d='M22.075%209.645c.854%200%201.684.17%202.465.501a6.413%206.413%200%200%201%203.388%203.388c.332.782.502%201.612.502%202.466%200%20.854-.17%201.683-.502%202.465a6.412%206.412%200%200%201-3.388%203.388%206.272%206.272%200%200%201-2.465.502H9.905c-.854%200-1.684-.17-2.466-.502a6.41%206.41%200%200%201-3.388-3.388A6.272%206.272%200%200%201%203.55%2016c0-.854.17-1.684.501-2.466a6.411%206.411%200%200%201%203.388-3.388%206.274%206.274%200%200%201%202.466-.501h12.17Zm0-.56H9.905C6.1%209.085%202.99%2012.196%202.99%2016c0%203.803%203.111%206.915%206.915%206.915h12.17c3.803%200%206.915-3.112%206.915-6.915s-3.112-6.915-6.915-6.915Z'%20fill='%233C4043'%3e%3c/path%3e%3cpath%20d='M15.388%2016.49v2.092h-.664v-5.165h1.76c.446%200%20.826.149%201.137.446.319.297.478.66.478%201.09%200%20.438-.16.801-.477%201.095-.308.294-.689.44-1.138.44h-1.096v.003Zm0-2.437v1.801h1.11c.263%200%20.484-.09.657-.266a.87.87%200%200%200%20.266-.632.86.86%200%200%200-.266-.626.861.861%200%200%200-.657-.273h-1.11v-.004Zm4.446.878c.491%200%20.878.132%201.162.395.284.262.425.622.425%201.078v2.178h-.632v-.49h-.028c-.273.404-.64.605-1.096.605-.39%200-.716-.115-.979-.346a1.104%201.104%200%200%201-.394-.865c0-.366.139-.657.415-.87.277-.219.647-.326%201.107-.326.394%200%20.719.073.971.218v-.152a.754.754%200%200%200-.273-.588.937.937%200%200%200-.643-.242c-.37%200-.664.156-.878.47l-.585-.366c.322-.467.8-.699%201.428-.699Zm-.857%202.566c0%20.173.072.318.221.432a.813.813%200%200%200%20.515.173c.28%200%20.53-.104.747-.311a.976.976%200%200%200%20.329-.73c-.208-.162-.495-.245-.865-.245-.27%200-.494.065-.674.193-.183.135-.273.298-.273.488Zm6.053-2.452-2.212%205.09h-.684l.822-1.78-1.459-3.31h.723l1.051%202.538h.014l1.023-2.538h.723Z'%20fill='%233C4043'%3e%3c/path%3e%3cpath%20d='M12.748%2016.069c0-.217-.02-.424-.056-.623H9.91v1.141h1.602c-.065.38-.274.704-.595.92v.74h.954c.557-.516.877-1.278.877-2.178Z'%20fill='%234285F4'%3e%3c/path%3e%3cpath%20d='M10.918%2017.506c-.266.18-.608.284-1.008.284-.772%200-1.428-.52-1.663-1.222h-.984v.763a2.962%202.962%200%200%200%202.647%201.631c.8%200%201.473-.263%201.962-.716l-.954-.74Z'%20fill='%2334A853'%3e%3c/path%3e%3cpath%20d='M8.155%2016.001c0-.197.033-.387.092-.566v-.764h-.984a2.955%202.955%200%200%200%200%202.66l.984-.763a1.782%201.782%200%200%201-.092-.567Z'%20fill='%23FABB05'%3e%3c/path%3e%3cpath%20d='M9.91%2014.212c.437%200%20.828.15%201.137.444l.845-.844a2.846%202.846%200%200%200-1.982-.772c-1.157%200-2.16.664-2.647%201.631l.984.764c.235-.702.89-1.223%201.663-1.223Z'%20fill='%23E94235'%3e%3c/path%3e%3c/svg%3e",alt:""}),c("img",{class:"h-32px",src:"data:image/svg+xml,%3csvg%20aria-hidden='true'%20class='SVGInline-svg%20SVGInline--cleaned-svg%20SVG-svg%20Icon-svg%20Icon--alipay-svg%20Icon-color-svg%20Icon-color--gray600-svg'%20height='32'%20width='32'%20viewBox='0%200%2032%2032'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20fill='none'%20fill-rule='evenodd'%3e%3cpath%20d='M0%200h32v32H0z'%20fill='%231c9fe5'%3e%3c/path%3e%3cpath%20d='M23.104%2018.98a142.494%20142.494%200%200%200%2011.052%203.848c2.044.85%200%205.668-2.159%204.674-2.444-1.066-7.359-3.245-11.097-5.108C18.822%2024.842%2015.556%2028%2010.907%2028%206.775%2028%204%2025.568%204%2021.943c0-3.053%202.11-6.137%206.82-6.137%202.697%200%205.47.766%208.785%201.922a25.007%2025.007%200%200%200%201.529-3.838l-11.981-.006v-1.848l6.162.015V9.63H7.808V7.81l7.507.006V5.115c0-.708.38-1.115%201.042-1.115h3.14v3.827l7.442.005v1.805h-7.44v2.431l6.088.016s-.754%203.904-2.483%206.897zM5.691%2021.79v-.004c0%201.736%201.351%203.489%204.64%203.489%202.54%200%205.028-1.52%207.408-4.522-3.181-1.592-4.886-2.357-7.348-2.357-2.394%200-4.7%201.164-4.7%203.394z'%20fill='%23fff'%20fill-rule='nonzero'%3e%3c/path%3e%3c/g%3e%3c/svg%3e",alt:""}),c("img",{class:"h-32px",src:"data:image/svg+xml,%3csvg%20aria-hidden='true'%20class='SVGInline-svg%20SVGInline--cleaned-svg%20SVG-svg%20Icon-svg%20Icon--wechat-svg%20Icon-color-svg%20Icon-color--gray600-svg'%20height='32'%20width='32'%20viewBox='0%200%2032%2033'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill='%23F5F6F8'%20d='M0%20.098h32v32H0z'%3e%3c/path%3e%3cpath%20d='M12.71%2018.392a.783.783%200%200%201-.36.081.786.786%200%200%201-.694-.407l-.055-.108-2.192-4.666a.338.338%200%200%201-.027-.163.366.366%200%200%201%20.11-.271.384.384%200%200%201%20.278-.109.45.45%200%200%201%20.25.082l2.58%201.79c.2.12.43.185.665.19.143%200%20.284-.028.416-.081l12.096-5.263c-2.193-2.523-5.771-4.15-9.793-4.15C9.354%205.316%204%209.683%204%2015.081c0%202.93%201.609%205.589%204.133%207.38a.698.698%200%200%201%20.278.869c-.194.732-.527%201.927-.527%201.98a.956.956%200%200%200-.055.298.366.366%200%200%200%20.11.27.387.387%200%200%200%20.277.109.319.319%200%200%200%20.222-.081l2.608-1.493c.192-.116.412-.181.638-.19.122.005.243.023.36.054%201.27.363%202.588.546%203.912.544%206.602%200%2011.983-4.368%2011.983-9.766a8.44%208.44%200%200%200-1.359-4.53l-13.786%207.812-.084.054Z'%20fill='%231AAD19'%3e%3c/path%3e%3c/svg%3e",alt:""})],-1)),x(Ia,{"pay-type":"stripe",subscribe:r(P),currency:r(C)},null,8,["subscribe","currency"]),x(r(_e),{class:"mt-12px w-150px h-34px text-14px",type:"primary",color:r(g),onClick:I},{default:h(()=>[k(p(e.$t("Component.Pay.index_47")),1)]),_:1},8,["color"]),a[6]||(a[6]=c("div",{class:"h-32px"},null,-1)),c("div",Va,[c("span",ja,p(e.$t("Component.Pay.index_27",[""])),1),x(t,{onClick:a[0]||(a[0]=e=>z("stripe"))},{default:h(()=>a[2]||(a[2]=[k("Stripe",-1)])),_:1,__:[2]}),a[4]||(a[4]=c("span",null," or ",-1)),x(t,{onClick:a[1]||(a[1]=e=>z("paypal"))},{default:h(()=>a[3]||(a[3]=[k("PayPal",-1)])),_:1,__:[3]})])])]),_:1},8,["show"])]),_:1},8,["loading"])}}}),Oa={class:"flex-center flex-col h-full"},Ha=n({__name:"index",setup(e){const a=M("--pay-color"),t=()=>{window.open("mailto:support@aapanel.com")};return(e,l)=>{const n=_e;return i(),o("div",Oa,[l[1]||(l[1]=c("div",{class:"mb-12px text-14px leading-20px text-center text-font2"},[k(" For USDT payments, please contact our customer"),c("br"),k(" service team at "),c("b",null,"support@aapanel.com"),k(" for"),c("br"),k(" assistance with the transaction. ")],-1)),x(n,{type:"primary",class:"h-36px",size:"large",color:r(a),onClick:t},{default:h(()=>l[0]||(l[0]=[c("span",{class:"ml-4px"},"Contact Support",-1)])),_:1,__:[0]},8,["color"])])}}}),Ra=j(n({__name:"index",setup(e,{expose:a}){const t=ke(),{channelMenu:n,shouldFetchOrder:s}=l(t),o=S("stripeRef"),c=S("paypalRef"),u=S("otherRef"),p=()=>{s.value&&d()},d=()=>{var e,a,t;switch(n.value){case"stripe":null==(e=o.value)||e.init();break;case"paypal":null==(a=c.value)||a.init();break;case"other":null==(t=u.value)||t.init()}};return a({init:d}),(e,a)=>{const t=me,l=fe;return i(),y(l,{value:r(n),"onUpdate:value":[a[0]||(a[0]=e=>F(n)?n.value=e:null),p],class:"pay-menu pro",type:"card",placement:"left"},{default:h(()=>[x(t,{name:"stripe",tab:"Stripe","display-directive":"show:lazy"},{default:h(()=>[x(Fa,{ref_key:"stripeRef",ref:o},null,512)]),_:1}),x(t,{name:"paypal",tab:"Paypal","display-directive":"show:lazy"},{default:h(()=>[x(Ta,{ref_key:"paypalRef",ref:c},null,512)]),_:1}),x(t,{name:"other",tab:"Other Payment","display-directive":"show:lazy"},{default:h(()=>[x(Za,{ref_key:"otherRef",ref:u},null,512)]),_:1}),x(t,{name:"usdt",tab:"USDT","display-directive":"show:lazy"},{default:h(()=>[x(Ha)]),_:1})]),_:1},8,["value"])}}}),[["__scopeId","data-v-841898b5"]]),Ga={class:"h-full"},Ba={class:"mb-16px text-15px text-font2"},Da=n({__name:"LinuxProfessional",setup(e){const n=ke(),{cycleIndex:s,cycleList:v,numberIndex:y,numberList:_,isUseCoupon:m,couponId:f,couponList:g,receiveCoupon:b}=l(n),{showCouponModal:w,resetOrder:C,getCycleList:P,getCouponList:I,setCouponList:M,getReceiveCoupon:A}=qe(),{initCurrentMenu:$}=Ne(),T=S("channelRef"),U=a(!0),V=t(()=>_.value.map((e,a)=>({label:"".concat(e.num),value:a,discount:Math.round(100-100*e.discount_rate)}))),j=()=>{var e;y.value=0,C(),M(),null==(e=T.value)||e.init()},Z=()=>{var e;C(),M(),null==(e=T.value)||e.init()},O=()=>{var e;C(),null==(e=T.value)||e.init()},H=async()=>{var e;await I(),C(),null==(e=T.value)||e.init()},R=async()=>{try{U.value=!0,n.resetProduct(),await $(),await P(),await I(),(async()=>{await A(),w.value&&ge({width:400,bgColor:"transparent",data:{obtainId:b.value.obtain_id,endTime:b.value.end_time,couponList:b.value.coupons,couponQuota:b.value.package_quota,onReceive:async()=>{R()}},component:z(()=>se(()=>import("./index155.js?v=1769066082311"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9])))})})()}finally{U.value=!1}};return L(()=>{R()}),(e,a)=>{const t=X;return i(),o("div",Ga,[x(Ee,{loading:r(U)},{default:h(()=>[c("div",Ba,[c("span",null,p(e.$t("Component.Pay.index_8")),1),x(t,{href:"mailto:support@aapanel.com",target:"_blank"},{default:h(()=>a[4]||(a[4]=[k("support@aapanel.com",-1)])),_:1,__:[4]})]),x(Ke,{title:"Choose your plan"},{default:h(()=>[x(oa,{value:r(s),"onUpdate:value":[a[0]||(a[0]=e=>F(s)?s.value=e:null),j],options:r(v)},null,8,["value","options"])]),_:1}),x(Ke,{title:"Number of license"},{default:h(()=>[x(pa,{value:r(y),"onUpdate:value":[a[1]||(a[1]=e=>F(y)?y.value=e:null),Z],options:r(V)},null,8,["value","options"])]),_:1}),r(U)?u("",!0):(i(),o(d,{key:0},[x(ha,{value:r(f),"onUpdate:value":a[2]||(a[2]=e=>F(f)?f.value=e:null),checked:r(m),"onUpdate:checked":a[3]||(a[3]=e=>F(m)?m.value=e:null),data:r(g),onChange:O,onFinish:H},null,8,["value","checked","data"]),x(Ra,{ref_key:"channelRef",ref:T},null,512)],64))]),_:1},8,["loading"])])}}}),qa={class:"max-h-200px overflow-auto"},Na={key:0,class:"voucher-list"},Ya=["onClick"],Ea={class:"voucher-name"},Wa={class:"voucher-date"},Qa={key:1,class:"flex-center h-72px"},Xa=j(n({__name:"VoucherList",props:g({type:String,options:{type:Array,default:()=>[]}},{value:{},valueModifiers:{}}),emits:["update:value"],setup(e){const a=b(e,"value"),t=a=>{const{cycle:t,charge_type:l,rest_days:n}=a;return 2===l?"Lifetime":"authorization"===e.type?"".concat(n," day").concat(n>1?"s":""):"".concat(t," ").concat(a.cycle_unit).concat(t>1?"s":"")};return(l,n)=>{const s=pe;return i(),o("div",qa,[e.options.length>0?(i(),o("div",Na,[(i(!0),o(d,null,v(e.options,(n,s)=>{return i(),o("div",{key:s,class:C(["voucher-item",{selected:a.value===n.id}]),onClick:e=>{return t=n.id,void(a.value=t);var t}},[c("div",Ea,p(t(n)),1),c("div",Wa,p(l.$t("Component.Auth.index_4"))+p((u=n.end_time,"authorization"===e.type||0===u?"Lifetime":oe(u,"yyyy-MM-dd"))),1)],10,Ya);var u}),128))])):(i(),o("div",Qa,[x(s)]))])}}}),[["__scopeId","data-v-13e5d52c"]]),Ka={class:"voucher-container"},Ja=j(n({__name:"index",setup(e){const{t:t}=w(),n=ke(),{voucherMenu:s,voucherAllList:u,authorizationAllList:d}=l(n),{getVoucherList:v,getAuthorizationList:y}=Ne(),_=a(!1),m=M("--pay-color"),f=[{label:t("Component.Pay.index_21"),value:"voucher"},{label:t("Component.Pay.index_22"),value:"authorization"}],g=a(0),b=a([]),C=a(0),P=a([]),I=async e=>{try{z(),_.value=!0,await e(),$(),T()}finally{_.value=!1}},S=async(e,a)=>{const t=e();t&&(await a(t),await ae({force:1}),te())},z=()=>{b.value=[],P.value=[],g.value=0,C.value=0},$=()=>{const e="voucher"===s.value?u.value:d.value,a=new Map;e.forEach(e=>{e.product&&a.set(e.product.id,e.product.name)});const t=Array.from(a.entries()),l=t.findIndex(([e])=>100000058===e);if(-1!==l){const e=t[l];t.splice(l,1),t.unshift(e)}b.value=t.map(([e,a])=>({label:a,value:e})),t.length>0?g.value=t[0][0]:g.value=0},T=()=>{const e="voucher"===s.value?u.value:d.value;P.value=e.filter(e=>{var a;return(null==(a=e.product)?void 0:a.id)===g.value}).map(e=>{var a;return{id:e.id,cycle:e.cycle,cycle_unit:e.cycle_unit,charge_type:e.charge_type,end_time:e.end_time,rest_days:"voucher"===s.value?0:null!=(a=e.rest_days)?a:0}}),P.value.length>0?C.value=P.value[0].id:C.value=0},U=e=>{switch(e){case"voucher":u.value=[],(async()=>{await I(v)})();break;case"authorization":d.value=[],(async()=>{await I(y)})()}},V=()=>{T()},j=()=>{switch(s.value){case"voucher":(async()=>{await S(()=>u.value.find(e=>e.id===C.value),e=>ie({pid:"".concat(e.product_id),code:e.code,coupon_id:e.id,cycle:e.cycle,cycle_unit:e.cycle_unit,charge_type:e.charge_type}))})();break;case"authorization":(async()=>{await S(()=>d.value.find(e=>e.id===C.value),e=>ce({serial_no:e.serial_no}))})()}};return L(()=>{s.value||(s.value="voucher"),U(s.value)}),A(()=>{n.resetVoucher()}),(e,a)=>{const t=_e;return i(),o("div",Ka,[x(Ee,{loading:r(_)},{default:h(()=>[x(Ke,{title:"Voucher Type"},{default:h(()=>[x(pa,{value:r(s),"onUpdate:value":a[0]||(a[0]=e=>F(s)?s.value=e:null),options:f,onChange:U},null,8,["value"])]),_:1}),x(Ke,{title:"Product Type"},{default:h(()=>[x(pa,{value:r(g),"onUpdate:value":a[1]||(a[1]=e=>F(g)?g.value=e:null),options:r(b),onChange:V},null,8,["value","options"])]),_:1}),x(Ke,{title:"".concat("authorization"===r(s)?"License":"Voucher"," List")},{default:h(()=>[x(Xa,{value:r(C),"onUpdate:value":a[2]||(a[2]=e=>F(C)?C.value=e:null),type:r(s),options:r(P)},null,8,["value","type","options"])]),_:1},8,["title"]),c("div",null,[x(t,{type:"primary",size:"large",color:r(m),disabled:0===r(P).length,onClick:j},{default:h(()=>[k(p(e.$t("Component.Pay.index_39")),1)]),_:1},8,["color","disabled"])])]),_:1},8,["loading"])])}}}),[["__scopeId","data-v-1b8f5a84"]]),et={class:"pay-container"},at={class:"pay-sidebar"},tt={class:"pay-body"},lt={class:"product-tabs"},nt=["onClick"],st={class:"tab-content"},ot={class:"tab-title"},it={key:0,class:"glyphicon glyphicon-vip"},ct={class:"text"},ut={class:"tab-desc"},rt={class:"pay-main"},pt={class:"absolute flex items-center justify-end right-20px bottom-20px"},dt=j(n({__name:"index",props:{username:{type:String,required:!0},source:{type:Number,required:!0},plugin:{type:Object}},setup(e){const{t:n}=w(),s=ke(),{currentMenu:_,plugins:m,pid:f,isFirstCutMenu:g}=l(s),{setUsername:b,setSource:P,setCurrentMenu:I,setPid:M,setPlugins:S}=(()=>{const e=ke(),{username:a,source:t,pid:n,currentMenu:s,plugins:o}=l(e);return{setUsername:e=>{a.value=e},setSource:e=>{t.value=e},setPid:e=>{n.value=e},setCurrentMenu:e=>{s.value=e},setPlugins:e=>{e&&(o.value=[e])}}})(),F=a([{key:"pro",pid:"100000058",title:n("Component.Pay.index_1"),description:n("Component.Pay.index_2")},{key:"voucher",pid:"0",title:"Voucher",description:"Voucher License"}]),z=t(()=>{switch(_.value){case"pro":case"plugin":return Da;case"voucher":return Ja;default:return null}}),T=async()=>{await ae({force:1}),te()};return L(()=>{b(e.username),P(e.source),S(e.plugin),(()=>{if(m.value.length>0){const e=m.value[0],a={key:"plugin",title:e.name,description:100!==e.type?n("Component.Pay.index_17"):n("Mail.Overview.today_16",[e.name]),pid:"".concat(e.pid)};F.value.splice(1,0,a),M("".concat(e.pid)),I("plugin")}else M("100000058"),I("pro")})()}),A(()=>{s.reset()}),(e,a)=>{const t=_e;return i(),o("div",et,[c("div",at,[x(De)]),c("div",tt,[c("div",lt,[(i(!0),o(d,null,v(r(F),e=>(i(),o("div",{key:e.key,class:C(["tab-item",["pro"===e.key?e.key:"",r(_)===e.key?"active":""]]),onClick:a=>(e=>{g.value=!1,M(e.pid),I(e.key)})(e)},[c("div",st,[c("div",ot,["pro"===e.key?(i(),o("span",it)):u("",!0),c("div",ct,p(e.title),1)]),c("div",ut,p(e.description),1)])],10,nt))),128))]),c("div",rt,[(i(),y($(r(z)),{key:r(f)})),c("div",pt,[a[1]||(a[1]=c("span",{class:"mr-12px text-font3"},"License didn't changed?",-1)),x(t,{type:"primary",size:"small",ghost:"",onClick:T},{default:h(()=>a[0]||(a[0]=[k(" Refresh License State ",-1)])),_:1,__:[0]})])])])])}}}),[["__scopeId","data-v-f0437695"]]);export{dt as default};
