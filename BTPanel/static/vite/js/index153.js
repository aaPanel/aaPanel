import{_ as e}from"./index223.js?v=1769066082311";import{b as a,c as l,p as t,d as s}from"./soft.js?v=1769066082311";import{k as n,P as i,r as o,a2 as r,V as u,a3 as p,R as c,W as d,F as m,O as y,U as v,S as _,an as b,a4 as f,j as g,b as h,ak as x,e as k,H as w,o as j,a0 as P}from"./vue.js?v=1769066082311";import{_ as O,T as S,eJ as C,eK as L,d as N,p as U,X as I,eL as M,eM as z,eN as D,a9 as H,a8 as F,eO as T,eP as Y,eQ as q,ep as B,u as G}from"./page_layout.js?v=1769066082311";import{_ as Q,a as R}from"./index.vue_vue_type_script_setup_true_lang18.js?v=1769066082311";import{_ as A}from"./index.vue_vue_type_script_setup_true_lang19.js?v=1769066082311";import{d as W,c as $,f as E,a as V,h as X,_ as Z,u as K}from"./public.js?v=1769066082311";import{db as J,dg as ee,au as ae,dk as le,d9 as te,aC as se,dW as ne}from"./naive.js?v=1769066082311";import{O as ie}from"./index273.js?v=1769066082311";import oe from"./index105.js?v=1769066082311";import{_ as re}from"./index109.js?v=1769066082311";import"./site.js?v=1769066082311";import"./__commonjsHelpers__.js?v=1769066082311";import"./common.js?v=1769066082311";import"./php.js?v=1769066082311";import"./alarm.js?v=1769066082311";import"./index.vue_vue_type_script_setup_true_lang.js?v=1769066082311";import"./index.vue_vue_type_script_setup_true_lang10.js?v=1769066082311";import"./leader-line-vue.js?v=1769066082311";import"./theme-monokai.js?v=1769066082311";import"./file.js?v=1769066082311";const ue={class:"w-200px! text-right"},pe=U(n({__name:"index",setup(e,{expose:a}){const{t:l}=i(),t={connTimeout:l("Plugin.Openlitespeed.index_1"),enableGzipCompress:l("Plugin.Openlitespeed.index_2"),gzipCompressLevel:l("Plugin.Openlitespeed.index_3"),maxConnections:l("Plugin.Openlitespeed.index_4"),maxKeepAliveReq:l("Plugin.Openlitespeed.index_5"),maxSSLConnections:l("Plugin.Openlitespeed.index_6")},s=o(),n=async()=>{const e=s.value.reduce((e,a)=>(e[a.name]=a.value,e),{});await C(e)},{loading:h,setLoading:x}=W(),k=async()=>{try{x(!0);const{message:e}=await L();N(e)&&(s.value=Object.entries(e).map(([e,a])=>({name:e,value:"rollingSize"!==e?Number(a[0]):a[0],ps:t[e]})))}finally{x(!1)}};return k(),a({init:k}),(e,a)=>{const l=ee,t=ae,i=le,o=O,x=te,w=J,j=se,P=S;return u(),r(P,{show:v(h)},{default:p(()=>[(u(!0),c(m,null,y(v(s),(e,a)=>(u(),c("div",{key:a},[d(w,{class:"list_box"},{default:p(()=>[_("div",ue,f(e.name),1),"enableGzipCompress"!==e.name&&"rollingSize"!==e.name?(u(),r(l,{key:0,class:"w-200px!","show-button":!1,value:e.value,"onUpdate:value":a=>e.value=a},null,8,["value","onUpdate:value"])):b("",!0),"rollingSize"===e.name?(u(),r(t,{key:1,class:"w-200px!",value:e.value,"onUpdate:value":a=>e.value=a},null,8,["value","onUpdate:value"])):b("",!0),"enableGzipCompress"===e.name?(u(),r(i,{key:2,class:"w-200px! justify-start",value:e.value,"onUpdate:value":a=>e.value=a,"checked-value":1,"unchecked-value":0},null,8,["value","onUpdate:value"])):b("",!0),e.ps?(u(),r(x,{key:3,trigger:"hover",placement:"top-start"},{trigger:p(()=>[d(o,{name:"common-ask",class:"color-#fc7938",size:"16"})]),default:p(()=>[g(" "+f(e.ps),1)]),_:2},1024)):b("",!0)]),_:2},1024)]))),128)),d(w,{class:"justify-center!"},{default:p(()=>[d(j,{type:"primary",onClick:k},{default:p(()=>[g(f(e.$t("Public.Btn.Refresh")),1)]),_:1}),d(j,{type:"primary",onClick:n},{default:p(()=>[g(f(e.$t("Public.Btn.Save")),1)]),_:1})]),_:1})]),_:1},8,["show"])}}}),[["__scopeId","data-v-4193d178"]]),ce=n({__name:"index",setup(e,{expose:t}){const{table:s,columns:n}=$([{key:"name",title:"Name"},{key:"type",title:"Type"},{key:"msg",title:"Description",ellipsis:{tooltip:{width:"trigger"}}},{key:"status",title:"Status",width:60,render:e=>e.status?d("span",{class:"i-material-symbols-light:check-small-rounded text-32px font-bold"},null):d("span",{class:"i-material-symbols-light:close-small-rounded text-32px font-bold"},null)},E({options:e=>[{show:!e.status,label:"0"===e.task?"Waiting":"-1"===e.task?"Installing":"Install",onClick:async()=>{"-1"!==e.task&&"0"!==e.task?(await M({version:a.value,name:e.name.toLowerCase(),type:1}),y(!1)):I()}},{show:e.status,label:"Uninstall",onClick:async()=>{V({title:"Uninstall",content:"Are you sure to uninstall ".concat(e.name,"?"),onConfirm:async()=>{await z({version:a.value,name:e.name.toLowerCase()}),y()}})}}]})]),i=e=>{a.value=e,y()};let o=null;const{loading:r,setLoading:m}=W(),y=async(e=!0)=>{try{m(e);const{message:l}=await D({version:a.value});N(l)&&(s.data=l.libs,o&&(clearTimeout(o),o=null),s.data.some(e=>"-1"===e.task||"0"===e.task)&&(o=window.setTimeout(()=>{y(!1)},2e3)))}finally{m(!1)}},b=async()=>{y()};return b(),h(()=>{o&&(clearTimeout(o),o=null)}),t({init:b}),(e,t)=>{const o=ne,m=X,y=Z;return u(),c("div",null,[d(o,{class:"w-200px!",value:v(a),"onUpdate:value":[t[0]||(t[0]=e=>x(a)?a.value=e:null),i],options:v(l)},null,8,["value","options"]),d(m,{class:"my-16px",data:v(s).data,columns:v(n),loading:v(r),"max-height":430},null,8,["data","columns","loading"]),d(y,null,{default:p(()=>t[1]||(t[1]=[_("li",null,"Pls install the extension according to the actual demand, do NOT install unnecessary PHP extension, this will affect the efficiency of PHP execution, and may even cause an exception",-1),_("li",null,"Opcache/xcache/apc and other script cache extensions, please install only one of them, otherwise it may cause your site program exception",-1)])),_:1,__:[1]})])}}}),de={class:"my-4"},me={class:"text-lg font-bold mb-2"},ye={class:"my-4"},ve={class:"text-lg font-bold mb-2"},_e={class:"text-lg font-bold mb-2"},be={class:"my-4"},fe={class:"text-lg font-bold mb-2"},ge={class:"text-lg font-bold mb-2"},he={class:"my-4"},xe={class:"text-lg font-bold mb-2"},ke={class:"text-lg font-bold mb-2"},we=n({__name:"index",setup(e,{expose:t}){const s=k({php_version:"",php_path:"",php_bin:"",php_ini:"",modules:"",keys:{"1cache":"Buffer","2crypt":"Encryption and decryption library","0db":"Database-driven","4network":"Network Communication Library","5io_string":"File and string processing libraries","3photo":"Image processing library","6other":"Other third-party libraries"}}),n=k({MySQL:!1,MySQLi:!0,"PDO-MySQL":!0,SqlServer:!1,"PDO-SqlServer":!1,Sqlite3:!0,"PDO-Sqlite":!0,PgSQL:!1,"PDO-PgSQL":!1,MongoDB:!1}),i=k({"Zend OPcache":!1,Redis:!1,Memcache:!1,Memcached:!1,apcu:!1,xcache:!1}),o=k({"Zend Optimizer":!1,"Zend Guard Loader":!1,"ionCube Loader":!1,SourceGuardian:!1,Mcrypt:!1,OpenSSL:!0,Iconv:!0}),b=k({EXIF:!1,"GD library":!0,ImageMagick:!0}),h=k({cURL:!0,Swoole:!1,Sockets:!0}),j=k({Xmlrpc:!1,FileInfo:!1,Ftp:!0,Mbstring:!0,bz2:!1,xsl:!1}),P=k({xDebug:!1,phalcon:!1,yaf:!1}),O=e=>{a.value=e,I()},{loading:C,setLoading:L}=W(),U=async()=>{const{message:e}=await T({version:a.value});N(e)&&K({title:"PHP-".concat(a.value,"-info"),width:1e3,content:()=>d("div",{class:"p-16px whitespace-pre-wrap",innerHTML:e.result},null)})},I=async()=>{try{L(!0);const{message:e}=await Y({php_version:a.value});N(e)&&(Object.assign(n,e["0db"]||{}),Object.assign(i,e["1cache"]||{}),Object.assign(o,e["2crypt"]||{}),Object.assign(b,e["3photo"]||{}),Object.assign(h,e["4network"]||{}),Object.assign(j,e["5io_string"]||{}),Object.assign(P,e["6other"]||{}),Object.assign(s,e.phpinfo))}finally{L(!1)}},M=async()=>{try{L(!0),await I()}finally{L(!1)}};return M(),t({init:M}),(e,t)=>{const k=ne,L=se,N=J,I=F,M=H,z=S;return u(),c("div",null,[d(N,null,{default:p(()=>[d(k,{class:"w-200px!",value:v(a),"onUpdate:value":[t[0]||(t[0]=e=>x(a)?a.value=e:null),O],options:v(l)},null,8,["value","options"]),d(L,{onClick:U},{default:p(()=>t[1]||(t[1]=[g("View phpinfo()",-1)])),_:1,__:[1]})]),_:1}),d(z,{show:v(C)},{default:p(()=>[_("div",de,[t[2]||(t[2]=_("h3",{class:"text-lg font-bold mb-2"},"Basic Information",-1)),d(M,{bordered:"",column:2},{default:p(()=>[d(I,{label:"Version"},{default:p(()=>[g(f(v(s).php_version),1)]),_:1}),d(I,{label:"Install Path"},{default:p(()=>[g(f(v(s).php_path),1)]),_:1}),d(I,{label:"php.ini"},{default:p(()=>[g(f(v(s).php_ini),1)]),_:1}),d(I,{label:"php bin"},{default:p(()=>[g(f(v(s).php_bin),1)]),_:1}),d(I,{label:"Loaded"},{default:p(()=>[g(f(v(s).modules),1)]),_:1})]),_:1})]),_("div",null,[_("h3",me,f(v(s).keys["0db"]||"Database-driven"),1),d(M,{bordered:"",column:3},{default:p(()=>[(u(!0),c(m,null,y(v(n),(e,a)=>(u(),r(I,{key:a,label:a},{default:p(()=>[_("span",{class:w(e?"text-primary":"text-error")},f(e?"Yes":"No"),3)]),_:2},1032,["label"]))),128))]),_:1})]),_("div",ye,[_("h3",ve,f(v(s).keys["1cache"]||"Buffer"),1),d(M,{bordered:"",column:3},{default:p(()=>[(u(!0),c(m,null,y(v(i),(e,a)=>(u(),r(I,{key:a,label:a},{default:p(()=>[_("span",{class:w(e?"text-primary":"text-error")},f(e?"Yes":"No"),3)]),_:2},1032,["label"]))),128))]),_:1})]),_("div",null,[_("h3",_e,f(v(s).keys["2crypt"]||"Encryption and decryption library"),1),d(M,{bordered:"",column:3},{default:p(()=>[(u(!0),c(m,null,y(v(o),(e,a)=>(u(),r(I,{key:a,label:a},{default:p(()=>[_("span",{class:w(e?"text-primary":"text-error")},f(e?"Yes":"No"),3)]),_:2},1032,["label"]))),128))]),_:1})]),_("div",be,[_("h3",fe,f(v(s).keys["3photo"]||"Image processing library"),1),d(M,{bordered:"",column:3},{default:p(()=>[(u(!0),c(m,null,y(v(b),(e,a)=>(u(),r(I,{key:a,label:a},{default:p(()=>[_("span",{class:w(e?"text-primary":"text-error")},f(e?"Yes":"No"),3)]),_:2},1032,["label"]))),128))]),_:1})]),_("div",null,[_("h3",ge,f(v(s).keys["4network"]||"Network Communication Library"),1),d(M,{bordered:"",column:3},{default:p(()=>[(u(!0),c(m,null,y(v(h),(e,a)=>(u(),r(I,{key:a,label:a},{default:p(()=>[_("span",{class:w(e?"text-primary":"text-error")},f(e?"Yes":"No"),3)]),_:2},1032,["label"]))),128))]),_:1})]),_("div",he,[_("h3",xe,f(v(s).keys["5io_string"]||"File and string processing libraries"),1),d(M,{bordered:"",column:3},{default:p(()=>[(u(!0),c(m,null,y(v(j),(e,a)=>(u(),r(I,{key:a,label:a},{default:p(()=>[_("span",{class:w(e?"text-primary":"text-error")},f(e?"Yes":"No"),3)]),_:2},1032,["label"]))),128))]),_:1})]),_("div",null,[_("h3",ke,f(v(s).keys["6other"]||"Other third-party libraries"),1),d(M,{bordered:"",column:3},{default:p(()=>[(u(!0),c(m,null,y(v(P),(e,a)=>(u(),r(I,{key:a,label:a},{default:p(()=>[_("span",{class:w(e?"text-primary":"text-error")},f(e?"Yes":"No"),3)]),_:2},1032,["label"]))),128))]),_:1})])]),_:1},8,["show"])])}}}),je=n({__name:"index",setup(e,{expose:s}){const n=o(null),i=o(""),r=()=>{var e;null==(e=n.value)||e.saveFile()},m=async e=>{var l;a.value=e,await y(),null==(l=n.value)||l.getContent()},y=async()=>{var e;const l="php-"+(2===(e=a.value).length?e.charAt(0)+"."+e.charAt(1):e),{message:t}=await q({sName:l},!0);N(t)&&(i.value=t.php_ini)},b=async()=>{var e;await y(),null==(e=n.value)||e.getContent()};return j(()=>{b()}),s({init:b}),(e,s)=>{const o=ne,y=se,b=Z;return u(),c("div",null,[d(o,{class:"w-200px!",value:v(a),"onUpdate:value":[s[0]||(s[0]=e=>x(a)?a.value=e:null),m],options:v(l)},null,8,["value","options"]),d(oe,{class:"my-16px",ref_key:"configRef",ref:n,path:v(i),"onUpdate:path":s[1]||(s[1]=e=>x(i)?i.value=e:null),height:450},null,8,["path"]),_("div",null,[d(y,{type:"primary",onClick:r},{default:p(()=>[g(f(e.$t("Site.Cert.index_60")),1)]),_:1})]),d(b,{class:"mt-16px"},{default:p(()=>[_("li",null,f(e.$t("Plugin.Mysql.index_1",[v(t).name])),1)]),_:1})])}}}),Pe=n({__name:"index",setup(e,{expose:a}){const l=o("None"),{loading:t,setLoading:s}=W(),n=async()=>{try{s(!0);const{message:e}=await B({path:"/usr/local/lsws/logs/error.log"});N(e)&&(l.value=e.result?e.result:"None")}finally{s(!1)}};return n(),a({init:n}),(e,a)=>{const s=re,n=S;return u(),r(n,{class:"h-full",show:v(t)},{default:p(()=>[d(s,{log:v(l)},null,8,["log"])]),_:1},8,["show"])}}}),Oe=n({__name:"index",setup(a){const{t:l}=i(),{multiService:t}=P(G()),n=o("service"),p=[{key:"service",label:l("Security.History.Index_10"),component:Q},{key:"webserver",label:"Web server",component:ie},{key:"version",label:l("Plugin.Ftp.index_9"),component:A},{key:"file",label:l("Site.Config.index_15"),data:{path:"/usr/local/lsws/conf/httpd_config.conf"},component:R},{key:"config",label:"OpenLiteSpeed",component:pe},{key:"php-config",label:"PHP Config file",component:je},{key:"extensions",label:"Install extensions",component:ce},{key:"phpinfo",label:"PHP Info",component:we},{key:"log",label:l("Site.Config.index_101"),component:Pe}];return n.value=t.value?"webserver":"service",s(),(a,l)=>{const t=e;return u(),r(t,{value:v(n),"onUpdate:value":l[0]||(l[0]=e=>x(n)?n.value=e:null),data:p},null,8,["value"])}}});export{Oe as default};
