import{_ as e}from"./index.js?v=1769066082311";import{q as a,_ as s,T as i,c0 as l,aa as n,p as o}from"./page_layout.js?v=1769066082311";import{k as t,P as r,i as c,r as u,a2 as d,V as v,a3 as m,S as f,W as p,U as h,R as _,F as k,O as w,j as y,a4 as M,au as g,ak as C,n as x}from"./vue.js?v=1769066082311";import{X as j,Y as P}from"./CalcSize.vue_vue_type_script_setup_true_lang.js?v=1769066082311";import{C as z}from"./index38.js?v=1769066082311";const $={class:"select-main"},R={class:"p-20px"},S={class:"resource-view"},D={class:"directory"},T=["onClick"],U={class:"file-list"},W={class:"list-tit"},b={class:"name"},q={class:"modify"},F={class:"permission"},I={class:"owner"},N=["onClick"],O={class:"name"},V={class:"modify"},X=o(t({__name:"ResourceManagerWindow",props:{currentPath:{type:String,default:"/"}},emits:["chooseDir"],setup(o,{expose:t,emit:X}){const Y=o,A=X,{t:B}=r(),E=c("fileStore"),{diskMountPoint:G}=E;t({open:function(){J.value=!0,Z()},close:function(){J.value=!1}});const H=u(Y.currentPath),J=u(!1),K=u([]),L=u(!1),Q=u("");async function Z(){try{L.value=!0,K.value=await P(H.value)}catch(e){console.warn(e)}finally{L.value=!1,Q.value=""}}function ee(e){H.value=e,x(Z)}function ae(){Q.value?A("chooseDir",H.value+"/"+Q.value):A("chooseDir",H.value),J.value=!1}return(o,t)=>{const r=a,c=s,u=l,P=i,X=e;return v(),d(X,{show:h(J),"onUpdate:show":t[0]||(t[0]=e=>C(J)?J.value=e:null),title:o.$t("file.resourceManagerModal.title"),width:750,footer:!0,onConfirm:ae},{default:m(()=>[f("div",$,[f("div",R,[p(z,{ref:"choosePathRef","current-path":h(H),onPathChange:ee},null,8,["current-path"])]),p(r),f("div",S,[f("div",D,[(v(!0),_(k,null,w(h(G),(e,a)=>(v(),_("div",{class:"dir-item",key:a,onClick:a=>{return s=e.path,H.value=s,void x(Z);var s}},[p(c,{name:"file-disk",size:"18"}),y(" "+M(e.path)+" ("+M(e.size[2])+") ",1)],8,T))),128))]),f("div",U,[f("div",W,[f("div",b,M(o.$t("file.resourceManagerModal.fileName")),1),f("div",q,M(o.$t("file.resourceManagerModal.modificationTime")),1),f("div",F,M(o.$t("file.resourceManagerModal.permission")),1),f("div",I,M(o.$t("file.resourceManagerModal.owner")),1)]),p(P,{show:h(L)},{default:m(()=>[p(u,{style:{height:"460px"}},{default:m(()=>[(v(!0),_(k,null,w(h(K),e=>(v(),_("div",{class:"list-content",key:e.nm,onClick:a=>function(e){"dir"===e.type&&(H.value="/"==H.value?"/".concat(e.nm):H.value+"/"+e.nm,x(Z))}(e)},[f("div",O,[p(c,{name:h(Q)==e.nm?"file-checked":"file-unchecked",size:"16",onClick:g(a=>{return s=e,void(Q.value=s.nm);var s},["stop"])},null,8,["name","onClick"]),p(c,{name:h(j)(e.ext),size:"24"},null,8,["name"]),f("span",null,M(e.nm),1)]),f("div",V,M(h(n)(e.mt)),1),t[1]||(t[1]=f("div",{class:"permission"},"755",-1)),t[2]||(t[2]=f("div",{class:"owner"},"root",-1))],8,N))),128))]),_:1})]),_:1},8,["show"])])])])]),_:1},8,["show","title"])}}}),[["__scopeId","data-v-19bc9c68"]]);export{X as R};
