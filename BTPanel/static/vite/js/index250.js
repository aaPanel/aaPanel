import{_ as e}from"./index.js?v=1764233927359";import{_ as t}from"./index.vue_vue_type_script_setup_true_lang.js?v=1764233927359";import{_ as a}from"./public.js?v=1764233927359";import{u as s,o as i,d as r,m as n,x as l}from"./page_layout.js?v=1764233927359";import{d as p}from"./php.js?v=1764233927359";import{O as o,u}from"./index87.js?v=1764233927359";import{bd as m,be as _}from"./site.js?v=1764233927359";import{k as d,P as v,a0 as c,r as f,e as x,o as j,R as g,V as h,W as w,a3 as y,S as C,U as S,ak as b,a4 as k,j as $,N as U}from"./vue.js?v=1764233927359";import R from"./index100.js?v=1764233927359";import{s as N}from"./file.js?v=1764233927359";import{dV as P,da as T,aC as V,dR as q,au as E,em as H}from"./naive.js?v=1764233927359";import"./common.js?v=1764233927359";import"./__commonjsHelpers__.js?v=1764233927359";import"./index132.js?v=1764233927359";import"./index.vue_vue_type_script_setup_true_lang5.js?v=1764233927359";import"./index.vue_vue_type_script_setup_true_lang6.js?v=1764233927359";import"./index.vue_vue_type_script_setup_true_lang7.js?v=1764233927359";import"./index.vue_vue_type_script_setup_true_lang12.js?v=1764233927359";import"./index.vue_vue_type_script_setup_true_lang8.js?v=1764233927359";import"./index130.js?v=1764233927359";import"./soft.js?v=1764233927359";import"./site4.js?v=1764233927359";import"./index.vue_vue_type_script_setup_true_lang15.js?v=1764233927359";import"./index245.js?v=1764233927359";import"./index99.js?v=1764233927359";import"./index107.js?v=1764233927359";import"./index.vue_vue_type_script_setup_true_lang10.js?v=1764233927359";import"./index98.js?v=1764233927359";import"./refersh.js?v=1764233927359";import"./index.vue_vue_type_script_setup_true_lang17.js?v=1764233927359";import"./index104.js?v=1764233927359";import"./ssl.js?v=1764233927359";import"./cert.js?v=1764233927359";import"./ssl-lets-progress.js?v=1764233927359";import"./utils3.js?v=1764233927359";import"./index217.js?v=1764233927359";import"./paypal-js.js?v=1764233927359";import"./upload.js?v=1764233927359";import"./theme-monokai.js?v=1764233927359";const O={class:"w-160px"},W={class:"w-380px px-20px pt-24px pb-8px"},z={class:"w-180px"},A=d({__name:"index",setup(d,{expose:A}){const{t:B}=v(),{data:D}=o(),F=u(),{multiService:G}=c(s()),I=f(null),J=f(null),K=f([]),L=f(""),M=f();let Q="";const X=e=>{var t;L.value=Y(e),null==(t=I.value)||t.getContent()},Y=e=>{const t=G.value?M.value:F.webserver;if("0.Current"===e)return"apache"===t||"openlitespeed"===t?"".concat(Q,"/.htaccess"):"/www/server/panel/vhost/rewrite/".concat(D.name,".conf");return"/www/server/panel/rewrite/".concat("openlitespeed"===t?"apache":t,"/").concat(J.value,".conf")},Z=async()=>{const e=Y("0.Current"),{message:t}=await N({path:e,data:se.data,encoding:"utf-8"});r(t)&&n.success(t.msg);const a=K.value[0].value;J.value=a,X(a)},ee=f(!1),te=()=>{ee.value=!0},ae=f(null),se=x({name:"",data:"",site_id:D.id}),ie={name:{required:!0,trigger:["blur","change"],message:B("Site.RulesError.index_21")}},re=async({hide:e})=>{var t;await(null==(t=ae.value)?void 0:t.validate()),await _(U(se)),se.name="",ne(),e()},ne=async()=>{var e;const{message:t}=await m({siteName:D.name});if(r(t)){Q=t.sitePath;const e=l(t.rewrite)?t.rewrite:[];K.value=H(e).map(e=>({label:e,value:e})),e.length&&(J.value=e[0],L.value=Y(e[0]))}null==(e=I.value)||e.getContent()},le=async()=>{(async()=>{const{message:e}=await p({site_id:D.id});r(e)&&(M.value=e.result)})(),ne()};return j(()=>{le()}),A({init:le}),(s,r)=>{const n=P,l=i,p=T,o=V,u=a,m=E,_=q,d=t,v=e;return h(),g("div",null,[w(p,{class:"items-center mb-12px"},{default:y(()=>[C("div",O,[w(n,{value:S(J),"onUpdate:value":[r[0]||(r[0]=e=>b(J)?J.value=e:null),X],options:S(K)},null,8,["value","options"])]),C("div",null,[C("span",null,k(s.$t("Site.Config.index_50"))+": ",1),w(l,{href:"https://winginx.com/en/htaccess",target:"_blank"},{default:y(()=>[$(k(s.$t("Site.Cert.index_42")),1)]),_:1})])]),_:1}),w(R,{ref_key:"configRef",ref:I,path:S(L),"onUpdate:path":r[1]||(r[1]=e=>b(L)?L.value=e:null),value:S(se).data,"onUpdate:value":r[2]||(r[2]=e=>S(se).data=e),height:400,"show-tips":!1},null,8,["path","value"]),w(p,{class:"items-center mt-12px"},{default:y(()=>[w(o,{type:"primary",onClick:Z},{default:y(()=>[$(k(s.$t("Site.Cert.index_60")),1)]),_:1}),w(o,{onClick:te},{default:y(()=>[$(k(s.$t("Site.Cert.index_39")),1)]),_:1})]),_:1}),w(u,{class:"mt-24px"},{default:y(()=>[C("li",null,k(s.$t("Site.Config.index_51")),1),C("li",null,k(s.$t("Site.Config.index_52")),1),C("li",null,k(s.$t("Site.Config.index_53")),1)]),_:1}),w(v,{show:S(ee),"onUpdate:show":r[4]||(r[4]=e=>b(ee)?ee.value=e:null),title:"Save as rewrite template",footer:!0,onConfirm:re},{default:y(()=>[C("div",W,[w(d,{ref_key:"formRef",ref:ae,model:S(se),rules:ie},{default:y(()=>[w(_,{label:"Template name",path:"name"},{default:y(()=>[C("div",z,[w(m,{value:S(se).name,"onUpdate:value":r[3]||(r[3]=e=>S(se).name=e),placeholder:"Template name"},null,8,["value"])])]),_:1})]),_:1},8,["model"])])]),_:1},8,["show"])])}}});export{A as default};
