import{_ as e}from"./index.js?v=1758789124250";import{_ as t}from"./index.vue_vue_type_script_setup_true_lang.js?v=1758789124250";import{_ as a}from"./public.js?v=1758789124250";import{u as s,o as i,d as r,m as n,w as l}from"./page_layout.js?v=1758789124250";import{d as p}from"./php.js?v=1758789124250";import{N as o,u}from"./index87.js?v=1758789124250";import{bd as m,be as _}from"./site.js?v=1758789124250";import{k as d,P as v,a0 as c,r as f,e as j,o as x,R as g,V as h,W as w,a3 as y,S as C,U as S,ak as b,a4 as k,j as $,N as U}from"./vue.js?v=1758789124250";import R from"./index100.js?v=1758789124250";import{s as N}from"./file.js?v=1758789124250";import{dV as P,da as T,aC as V,dR as q,au as E,el as H}from"./naive.js?v=1758789124250";import"./common.js?v=1758789124250";import"./__commonjsHelpers__.js?v=1758789124250";import"./index133.js?v=1758789124250";import"./index.vue_vue_type_script_setup_true_lang5.js?v=1758789124250";import"./index.vue_vue_type_script_setup_true_lang6.js?v=1758789124250";import"./index.vue_vue_type_script_setup_true_lang7.js?v=1758789124250";import"./index.vue_vue_type_script_setup_true_lang12.js?v=1758789124250";import"./index.vue_vue_type_script_setup_true_lang8.js?v=1758789124250";import"./index131.js?v=1758789124250";import"./soft.js?v=1758789124250";import"./site4.js?v=1758789124250";import"./index.vue_vue_type_script_setup_true_lang15.js?v=1758789124250";import"./index245.js?v=1758789124250";import"./index99.js?v=1758789124250";import"./index108.js?v=1758789124250";import"./index.vue_vue_type_script_setup_true_lang10.js?v=1758789124250";import"./index98.js?v=1758789124250";import"./refersh.js?v=1758789124250";import"./index.vue_vue_type_script_setup_true_lang17.js?v=1758789124250";import"./index105.js?v=1758789124250";import"./ssl.js?v=1758789124250";import"./cert.js?v=1758789124250";import"./utils3.js?v=1758789124250";import"./index218.js?v=1758789124250";import"./paypal-js.js?v=1758789124250";import"./ssl-lets-progress.js?v=1758789124250";import"./upload.js?v=1758789124250";import"./index101.js?v=1758789124250";import"./theme-monokai.js?v=1758789124250";const W={class:"w-160px"},z={class:"w-380px px-20px pt-24px pb-8px"},A={class:"w-180px"},B=d({__name:"index",setup(d,{expose:B}){const{t:D}=v(),{data:F}=o(),G=u(),{multiService:I}=c(s()),J=f(null),K=f(null),L=f([]),M=f(""),O=f();let Q="";const X=e=>{var t;M.value=Y(e),null==(t=J.value)||t.getContent()},Y=e=>{const t=I.value?O.value:G.webserver;if("0.Current"===e)return"apache"===t||"openlitespeed"===t?"".concat(Q,"/.htaccess"):"/www/server/panel/vhost/rewrite/".concat(F.name,".conf");return"/www/server/panel/rewrite/".concat("openlitespeed"===t?"apache":t,"/").concat(K.value,".conf")},Z=async()=>{const e=Y("0.Current"),{message:t}=await N({path:e,data:se.data,encoding:"utf-8"});r(t)&&n.success(t.msg);const a=L.value[0].value;K.value=a,X(a)},ee=f(!1),te=()=>{ee.value=!0},ae=f(null),se=j({name:"",data:"",site_id:F.id}),ie={name:{required:!0,trigger:["blur","change"],message:D("Site.RulesError.index_21")}},re=async({hide:e})=>{var t;await(null==(t=ae.value)?void 0:t.validate()),await _(U(se)),se.name="",ne(),e()},ne=async()=>{var e;const{message:t}=await m({siteName:F.name});if(r(t)){Q=t.sitePath;const e=l(t.rewrite)?t.rewrite:[];L.value=H(e).map(e=>({label:e,value:e})),e.length&&(K.value=e[0],M.value=Y(e[0]))}null==(e=J.value)||e.getContent()},le=async()=>{(async()=>{const{message:e}=await p({site_id:F.id});r(e)&&(O.value=e.result)})(),ne()};return x(()=>{le()}),B({init:le}),(s,r)=>{const n=P,l=i,p=T,o=V,u=a,m=E,_=q,d=t,v=e;return h(),g("div",null,[w(p,{class:"items-center mb-12px"},{default:y(()=>[C("div",W,[w(n,{value:S(K),"onUpdate:value":[r[0]||(r[0]=e=>b(K)?K.value=e:null),X],options:S(L)},null,8,["value","options"])]),C("div",null,[C("span",null,k(s.$t("Site.Config.index_50"))+": ",1),w(l,{href:"https://winginx.com/en/htaccess",target:"_blank"},{default:y(()=>[$(k(s.$t("Site.Cert.index_42")),1)]),_:1})])]),_:1}),w(R,{ref_key:"configRef",ref:J,path:S(M),"onUpdate:path":r[1]||(r[1]=e=>b(M)?M.value=e:null),value:S(se).data,"onUpdate:value":r[2]||(r[2]=e=>S(se).data=e),height:400,"show-tips":!1},null,8,["path","value"]),w(p,{class:"items-center mt-12px"},{default:y(()=>[w(o,{type:"primary",onClick:Z},{default:y(()=>[$(k(s.$t("Site.Cert.index_60")),1)]),_:1}),w(o,{onClick:te},{default:y(()=>[$(k(s.$t("Site.Cert.index_39")),1)]),_:1})]),_:1}),w(u,{class:"mt-24px"},{default:y(()=>[C("li",null,k(s.$t("Site.Config.index_51")),1),C("li",null,k(s.$t("Site.Config.index_52")),1),C("li",null,k(s.$t("Site.Config.index_53")),1)]),_:1}),w(v,{show:S(ee),"onUpdate:show":r[4]||(r[4]=e=>b(ee)?ee.value=e:null),title:"Save as rewrite template",footer:!0,onConfirm:re},{default:y(()=>[C("div",z,[w(d,{ref_key:"formRef",ref:ae,model:S(se),rules:ie},{default:y(()=>[w(_,{label:"Template name",path:"name"},{default:y(()=>[C("div",A,[w(m,{value:S(se).name,"onUpdate:value":r[3]||(r[3]=e=>S(se).name=e),placeholder:"Template name"},null,8,["value"])])]),_:1})]),_:1},8,["model"])])]),_:1},8,["show"])])}}});export{B as default};
