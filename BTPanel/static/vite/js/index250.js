import{_ as e}from"./index.js?v=1763625242172";import{_ as t}from"./index.vue_vue_type_script_setup_true_lang.js?v=1763625242172";import{_ as a}from"./public.js?v=1763625242172";import{u as s,c as i,m as r,x as n,o as l}from"./page_layout.js?v=1763625242172";import{d as p}from"./php.js?v=1763625242172";import{O as o,u}from"./index87.js?v=1763625242172";import{bd as m,be as _}from"./site.js?v=1763625242172";import{k as d,P as v,a0 as c,r as f,e as j,o as x,R as g,S as h,X as w,a3 as y,U as C,V as S,aj as b,a4 as k,j as $,N as U}from"./vue.js?v=1763625242172";import R from"./index100.js?v=1763625242172";import{s as P}from"./file.js?v=1763625242172";import{em as N,dV as T,d9 as V,aC as q,au as E,dP as H}from"./naive.js?v=1763625242172";import"./common.js?v=1763625242172";import"./__commonjsHelpers__.js?v=1763625242172";import"./index132.js?v=1763625242172";import"./index.vue_vue_type_script_setup_true_lang5.js?v=1763625242172";import"./index.vue_vue_type_script_setup_true_lang6.js?v=1763625242172";import"./index.vue_vue_type_script_setup_true_lang7.js?v=1763625242172";import"./index.vue_vue_type_script_setup_true_lang12.js?v=1763625242172";import"./index.vue_vue_type_script_setup_true_lang8.js?v=1763625242172";import"./index130.js?v=1763625242172";import"./soft.js?v=1763625242172";import"./site4.js?v=1763625242172";import"./index.vue_vue_type_script_setup_true_lang15.js?v=1763625242172";import"./index245.js?v=1763625242172";import"./index99.js?v=1763625242172";import"./index107.js?v=1763625242172";import"./index.vue_vue_type_script_setup_true_lang10.js?v=1763625242172";import"./index98.js?v=1763625242172";import"./refersh.js?v=1763625242172";import"./index.vue_vue_type_script_setup_true_lang17.js?v=1763625242172";import"./index104.js?v=1763625242172";import"./ssl.js?v=1763625242172";import"./cert.js?v=1763625242172";import"./ssl-lets-progress.js?v=1763625242172";import"./utils3.js?v=1763625242172";import"./index217.js?v=1763625242172";import"./paypal-js.js?v=1763625242172";import"./upload.js?v=1763625242172";import"./theme-monokai.js?v=1763625242172";const O={class:"w-160px"},X={class:"w-380px px-20px pt-24px pb-8px"},z={class:"w-180px"},A=d({__name:"index",setup(d,{expose:A}){const{t:B}=v(),{data:D}=o(),F=u(),{multiService:G}=c(s()),I=f(null),J=f(null),K=f([]),L=f(""),M=f();let Q="";const W=e=>{var t;L.value=Y(e),null==(t=I.value)||t.getContent()},Y=e=>{const t=G.value?M.value:F.webserver;if("0.Current"===e)return"apache"===t||"openlitespeed"===t?"".concat(Q,"/.htaccess"):"/www/server/panel/vhost/rewrite/".concat(D.name,".conf");return"/www/server/panel/rewrite/".concat("openlitespeed"===t?"apache":t,"/").concat(J.value,".conf")},Z=async()=>{const e=Y("0.Current"),{message:t}=await P({path:e,data:se.data,encoding:"utf-8"});i(t)&&r.success(t.msg);const a=K.value[0].value;J.value=a,W(a)},ee=f(!1),te=()=>{ee.value=!0},ae=f(null),se=j({name:"",data:"",site_id:D.id}),ie={name:{required:!0,trigger:["blur","change"],message:B("Site.RulesError.index_21")}},re=async({hide:e})=>{var t;await(null==(t=ae.value)?void 0:t.validate()),await m(U(se)),se.name="",ne(),e()},ne=async()=>{var e;const{message:t}=await _({siteName:D.name});if(i(t)){Q=t.sitePath;const e=n(t.rewrite)?t.rewrite:[];K.value=N(e).map((e=>({label:e,value:e}))),e.length&&(J.value=e[0],L.value=Y(e[0]))}null==(e=I.value)||e.getContent()},le=async()=>{(async()=>{const{message:e}=await p({site_id:D.id});i(e)&&(M.value=e.result)})(),ne()};return x((()=>{le()})),A({init:le}),(s,i)=>{const r=T,n=l,p=V,o=q,u=a,m=E,_=H,d=t,v=e;return g(),h("div",null,[w(p,{class:"items-center mb-12px"},{default:y((()=>[C("div",O,[w(r,{value:S(J),"onUpdate:value":[i[0]||(i[0]=e=>b(J)?J.value=e:null),W],options:S(K)},null,8,["value","options"])]),C("div",null,[C("span",null,k(s.$t("Site.Config.index_50"))+": ",1),w(n,{href:"https://winginx.com/en/htaccess",target:"_blank"},{default:y((()=>[$(k(s.$t("Site.Cert.index_42")),1)])),_:1})])])),_:1}),w(R,{ref_key:"configRef",ref:I,path:S(L),"onUpdate:path":i[1]||(i[1]=e=>b(L)?L.value=e:null),value:S(se).data,"onUpdate:value":i[2]||(i[2]=e=>S(se).data=e),height:400,"show-tips":!1},null,8,["path","value"]),w(p,{class:"items-center mt-12px"},{default:y((()=>[w(o,{type:"primary",onClick:Z},{default:y((()=>[$(k(s.$t("Site.Cert.index_60")),1)])),_:1}),w(o,{onClick:te},{default:y((()=>[$(k(s.$t("Site.Cert.index_39")),1)])),_:1})])),_:1}),w(u,{class:"mt-24px"},{default:y((()=>[C("li",null,k(s.$t("Site.Config.index_51")),1),C("li",null,k(s.$t("Site.Config.index_52")),1),C("li",null,k(s.$t("Site.Config.index_53")),1)])),_:1}),w(v,{show:S(ee),"onUpdate:show":i[4]||(i[4]=e=>b(ee)?ee.value=e:null),title:"Save as rewrite template",footer:!0,onConfirm:re},{default:y((()=>[C("div",X,[w(d,{ref_key:"formRef",ref:ae,model:S(se),rules:ie},{default:y((()=>[w(_,{label:"Template name",path:"name"},{default:y((()=>[C("div",z,[w(m,{value:S(se).name,"onUpdate:value":i[3]||(i[3]=e=>S(se).name=e),placeholder:"Template name"},null,8,["value"])])])),_:1})])),_:1},8,["model"])])])),_:1},8,["show"])])}}});export{A as default};
