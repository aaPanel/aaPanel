System.register(["./index-legacy114.js?v=1769066082311","./utils-legacy3.js?v=1769066082311","./vue-legacy.js?v=1769066082311","./page_layout-legacy.js?v=1769066082311","./index-legacy.js?v=1769066082311","./index.vue_vue_type_script_setup_true_lang-legacy5.js?v=1769066082311","./index.vue_vue_type_script_setup_true_lang-legacy7.js?v=1769066082311","./public-legacy.js?v=1769066082311","./utils-legacy4.js?v=1769066082311","./naive-legacy.js?v=1769066082311","./index.vue_vue_type_script_setup_true_lang-legacy9.js?v=1769066082311","./index.vue_vue_type_script_setup_true_lang-legacy8.js?v=1769066082311","./index.vue_vue_type_script_setup_true_lang-legacy.js?v=1769066082311","./transition-legacy.js?v=1769066082311","./__commonjsHelpers__-legacy.js?v=1769066082311","./common-legacy.js?v=1769066082311","./index.vue_vue_type_script_setup_true_lang-legacy6.js?v=1769066082311","./soft-legacy.js?v=1769066082311","./site-legacy.js?v=1769066082311"],function(e,a){"use strict";var t,l,n,i,o,s,r,d,u,c,m,p,_,h,y,g,v,f,w,b,k,x,S,D,C,P,R,L,U,j,z,$,E,T,N,M,O,A,I,B,V,F,W,q,H,K,Y,G,X,Z,J,Q,ee,ae,te,le,ne,ie,oe,se,re,de,ue,ce,me,pe,_e,he,ye,ge,ve,fe,we,be,ke,xe,Se,De,Ce,Pe,Re,Le,Ue,je,ze,$e,Ee,Te,Ne,Me,Oe,Ae,Ie,Be,Ve,Fe,We,qe,He,Ke,Ye,Ge;return{setters:[e=>{t=e._},e=>{l=e.r,n=e.h,i=e.a,o=e.m,s=e.b,r=e.c,d=e.d,u=e.l,c=e.e,m=e.f,p=e.g,_=e.i,h=e.u,y=e.j},e=>{g=e.k,v=e.P,f=e.e,w=e.r,b=e.W,k=e.b,x=e.R,S=e.V,D=e.a3,C=e.S,P=e.U,R=e.j,L=e.a4,U=e._,j=e.G,z=e.ad,$=e.ae,E=e.a2,T=e.s,N=e.u,M=e.o,O=e.ak,A=e.an,I=e.F,B=e.O,V=e.a0,F=e.N},e=>{W=e.cT,q=e.cU,H=e.d,K=e._,Y=e.a,G=e.cV,X=e.cW,Z=e.m,J=e.cX,Q=e.cY,ee=e.cZ,ae=e.p,te=e.u,le=e.o,ne=e.c_,ie=e.c$,oe=e.T,se=e.d0,re=e.d1,de=e.d2,ue=e.d3,ce=e.d4,me=e.d5,pe=e.d6,_e=e.d7},e=>{he=e._},e=>{ye=e._},e=>{ge=e._},e=>{ve=e.e,fe=e.c,we=e.f,be=e.a,ke=e.h,xe=e.m,Se=e._,De=e.d},e=>{Ce=e.o,Pe=e.c,Re=e.a,Le=e.u,Ue=e.b,je=e.d,ze=e.e,$e=e.f},e=>{Ee=e.dk,Te=e.dl,Ne=e.aC,Me=e.dW,Oe=e.db,Ae=e.de,Ie=e.di,Be=e.dS,Ve=e.au,Fe=e.dg,We=e.d9,qe=e.dT},e=>{He=e._},e=>{Ke=e._},e=>{Ye=e._},e=>{Ge=e.T},null,null,null,null,null],execute:function(){var Xe=document.createElement("style");Xe.textContent=".select-box[data-v-abfdb3c9]{margin-bottom:16px;padding:8px;flex-direction:column!important;border-radius:4px;border:1px solid #dddddd}\n/*$vite$:1*/",document.head.appendChild(Xe);const Ze={class:"flex items-center"},Je=g({__name:"index",setup(e){const t=U(()=>Y(()=>a.import("./form-legacy8.js?v=1769066082311"),void 0)),s=U(()=>Y(()=>a.import("./ssl-log-legacy.js?v=1769066082311"),void 0)),{t:r}=v(),d=f({p:1,limit:10}),u=ve("",{isEdit:!1,onRefresh:()=>{j()}}),c=ve(r("SSL.Domain.index_5")),m=()=>{u.data.isEdit=!1,u.title=r("SSL.Domain.index_4"),u.show=!0},p=w(!1),{table:_,columns:h}=fe([{key:"alias",title:r("Config.Panel.index_36"),render:e=>e.alias?b("span",{class:"bt-link",onClick:()=>{n.value=e.id,i.value=e.name,o.value="manage"}},[e.alias]):"--"},{key:"api_user",title:r("Home.index_2"),render:e=>e.api_user?e.api_user:"--"},l(e=>{c.data.path=e,c.show=!0}),{key:"status",title:r("Public.Table.Status"),render:e=>b(Ee,{uncheckedValue:0,checkedValue:1,value:e.status,"onUpdate:value":[a=>e.status=a,async a=>{try{await G({id:e.id,status:a})}catch{e.status=1===a?0:1}}]},null)},{key:"permission",title:r("Database.index_21"),align:"center",render:e=>e.permission?e.permission:"--"},{key:"domains",title:r("Layout.Sider.domain_1"),align:"center",render:e=>e.domains.length},we({width:250,options:e=>[{label:r("SSL.Domain.index_7"),onClick:()=>{n.value=e.id,i.value=e.name,o.value="manage"}},{label:r("Public.Btn.Edit"),onClick:()=>{"aaPanelDns"!==e.name?y(e):Ce()}},{label:r("Public.Btn.Del"),show:"aaPanelDns"!==e.name,onClick:()=>{be({title:r("SSL.Domain.index_8"),content:r("SSL.Domain.index_9"),onConfirm:async()=>{await W({id:e.id}),j()}})}}]})]),y=e=>{u.data.isEdit=!0,u.data.row=e,u.title=r("SSL.Domain.index_10"),u.show=!0};let g=null;const j=async()=>{try{p.value||(_.loading=!0);const{message:e}=await q(d);H(e)&&(p.value=e.data.some(e=>e.task.some(e=>100!==e.task_status)),p.value?z():g&&clearTimeout(g),_.data=e.data,_.total=e.total)}finally{_.loading=!1}},z=async()=>{g=window.setTimeout(()=>{j()},5e3)};return j(),k(()=>{g&&clearTimeout(g)}),(e,a)=>{const l=K,n=Te,i=Ne,o=ke,r=ge,p=ye,y=he;return S(),x("div",null,[b(n,{"show-icon":!1,class:"mb-10px"},{default:D(()=>[C("div",Ze,[b(l,{name:"base-info",size:17,class:"mr-8px"}),a[4]||(a[4]=C("span",{class:"leading-17px"},"aaPanel Domain Name Management Center, allowing you to unify accounts across multiple domain providers without switching DNS platforms",-1))])]),_:1}),b(p,{feedback:!0},{toolsLeft:D(()=>[b(i,{type:"primary",onClick:m},{default:D(()=>[R(L(e.$t("SSL.Domain.index_4")),1)]),_:1})]),table:D(()=>[b(o,{loading:P(_).loading,data:P(_).data,columns:P(h)},null,8,["loading","data","columns"])]),pageRight:D(()=>[b(r,{page:P(d).p,"onUpdate:page":a[0]||(a[0]=e=>P(d).p=e),"page-size":P(d).limit,"onUpdate:pageSize":a[1]||(a[1]=e=>P(d).limit=e),"item-count":P(_).total,onRefresh:j},null,8,["page","page-size","item-count"])]),_:1}),b(y,{show:P(u).show,"onUpdate:show":a[2]||(a[2]=e=>P(u).show=e),title:P(u).title,data:P(u).data,width:540,"min-height":300,footer:!0,component:P(t)},null,8,["show","title","data","component"]),b(y,{show:P(c).show,"onUpdate:show":a[3]||(a[3]=e=>P(c).show=e),title:P(c).title,data:P(c).data,width:700,height:450,footer:!1,component:P(s)},null,8,["show","title","data","component"])])}}});function Qe(){const e=w(!1);let a=null;const t=()=>{a&&(clearInterval(a),a=null)},l=()=>{t(),a=setInterval(async()=>{await Re(),Pe.value&&(t(),e.value=!1,Z.success("DNS check completed."))},1e3)};return j(()=>{t()}),{canRefreshDns:Pe,refreshLoading:e,startDnsPolling:l,stopPolling:t,onRefreshDns:async()=>{t(),e.value=!0,await X({act:"start"}),l()}}}const ea=g({__name:"host-select",props:{value:{},valueModifiers:{}},emits:z(["change"],["update:value"]),setup(e,{emit:a}){const{t:t}=v(),l=$(e,"value"),n=a,i=(e,a)=>{n("change",e,a.label)},o=e=>{if(e.disabled){let a;return b(Oe,{class:"items-center"},{default:()=>{return[b("span",null,[e.label]),b(Ne,{type:"primary",size:"tiny",onClick:()=>{xe(e.alias)}},(l=a=t("Public.Btn.Install"),"function"==typeof l||"[object Object]"===Object.prototype.toString.call(l)&&!N(l)?a:{default:()=>[a]}))];var l}})}return e.label+" ("+e.alias+")"};return(e,a)=>{const t=Me;return S(),E(t,T({loading:P(r),class:"w-300px"},e.$attrs,{filterable:"",value:l.value,"onUpdate:value":[a[0]||(a[0]=e=>l.value=e),i],options:P(s),"consistent-menu-width":!1,"render-label":o}),null,16,["loading","value","options"])}}}),aa=g({__name:"domain-select",props:{value:{},valueModifiers:{}},emits:["update:value"],setup(e){const a=$(e,"value"),{t:t}=v(),l=e=>b(Oe,{class:"items-center justify-between!"},{default:()=>[b("span",{class:"w-225px truncate"},[t("Mail.Mass.index_45"),R("ï¼š"),e.label]),e.ssl_info&&-1!==e.ssl_info?b(Ae,{type:e.ssl_info>30?"success":e.ssl_info>0?"warning":"error",class:"px-10px"},{default:()=>[e.ssl_info?e.ssl_info+" "+t("Crontab.arrange.index_41"):t("Config.Safe.index_166")]}):""]});return(e,t)=>{const n=Me;return S(),E(n,T(e.$attrs,{class:"w-350px",size:"large",filterable:"",value:a.value,"onUpdate:value":t[0]||(t[0]=e=>a.value=e),options:P(d),"consistent-menu-width":!1,loading:P(u),disabled:!P(d).length,"render-label":l}),null,16,["value","options","loading","disabled"])}}}),ta=g({__name:"domain",emits:["change"],setup(e,{emit:t}){const l=U(()=>Y(()=>a.import("./domain-form-legacy.js?v=1769066082311"),void 0)),o=t,{t:s}=v(),r=f({p:1,limit:10,domain:c,search:""}),d=ve("",{isEdit:!1,onRefresh:()=>{V()}}),u=()=>{d.data.isEdit=!1,d.title=s("SSL.Domain.index_17"),d.show=!0},h=()=>{o("change"),p.value=!1},y=()=>{r.p=1,V()},g=async()=>{V()},w=async(e,a)=>{i.value=a,n.value=e,c.value="",r.p=1,await _(),V()},{table:k,columns:j}=fe([{key:"record",title:s("SSL.Domain.index_11"),width:"20%"},{key:"record_type",title:s("Ftp.Table.index_3"),width:"10%"},{key:"record_value",title:s("SSL.Domain.index_13"),width:"20%",ellipsis:{tooltip:!0}},{key:"ttl",title:"TTL",width:100,render:e=>1===e.ttl?s("Mail.Mass.index_34"):e.ttl},{key:"priority",title:"Priority",width:100,render:e=>-1===e.priority?"--":e.priority},{key:"proxy",title:s("SSL.Domain.index_16"),render:e=>-1===e.proxy?"--":b(Ee,{"checked-value":1,"unchecked-value":0,value:e.proxy,"onUpdate:value":[a=>e.proxy=a,async a=>{const t={id:e.id,pid:n.value,domain:c.value,record:e.record,record_type:e.record_type,record_value:e.record_value,ttl:e.ttl,priority:e.priority,proxy:a,ps:e.ps};try{await ee(t)}catch{e.proxy=1===a?0:1}}]},null)},{key:"ps",title:s("Public.Table.Ps")},we({width:150,options:e=>[{label:s("Public.Btn.Edit"),onClick:()=>{B(e)}},{label:s("Public.Btn.Del"),onClick:()=>{be({title:s("SSL.Domain.index_19"),content:s("SSL.Domain.index_20"),onConfirm:async()=>{await J({id:e.id}),V(),o("change")}})}}]})]),z=()=>{window.open("https://www.aaPanel.com/docs/Function/Tutorial/build_dns_server.html")},{canRefreshDns:$,refreshLoading:T,startDnsPolling:N,onRefreshDns:I}=Qe(),B=e=>{d.data.isEdit=!0,d.data.row=e,d.title=s("SSL.Domain.index_21"),d.show=!0},V=async()=>{try{if(""===c.value)return void(k.data=[]);k.loading=!0;const{message:e}=await Q({...r,search_pid:n.value});H(e)&&(k.data=e.data,k.total=e.total)}finally{k.loading=!1}};return M(()=>{(async()=>{await _(),await V(),m.value&&(await Re(),$.value||(T.value=!0,N()))})()}),(e,a)=>{const t=K,i=Ne,o=Ie,s=Oe,c=Te,p=Ke,_=ke,v=ge,f=ye,U=he;return S(),x("div",null,[b(s,{class:"select-box"},{default:D(()=>[b(ea,{value:P(n),"onUpdate:value":a[0]||(a[0]=e=>O(n)?n.value=e:null),onChange:w},null,8,["value"]),b(s,null,{default:D(()=>[b(aa,{value:P(r).domain,"onUpdate:value":[a[1]||(a[1]=e=>P(r).domain=e),y]},null,8,["value"]),b(o,{trigger:"hover"},{trigger:D(()=>[b(i,{onClick:g,class:"h-40px w-40px"},{default:D(()=>[b(t,{name:"base-refresh"})]),_:1})]),default:D(()=>[C("span",null,L(e.$t("SSL.Domain.index_22")),1)]),_:1})]),_:1})]),_:1}),b(f,null,{toolsLeft:D(()=>[b(i,{type:"primary",onClick:u},{default:D(()=>[R(L(e.$t("SSL.Domain.index_17")),1)]),_:1}),b(i,{onClick:h},{default:D(()=>[R(L(e.$t("SSL.Domain.index_18")),1)]),_:1}),P(m)?(S(),E(c,{key:0,type:"warning"},{default:D(()=>[b(s,{class:"items-center"},{default:D(()=>[C("span",null,L(P(m)),1),b(i,{type:"primary",size:"small",onClick:z},{default:D(()=>a[6]||(a[6]=[R("View tutorial",-1)])),_:1,__:[6]}),b(i,{loading:P(T),type:"primary",ghost:"",size:"small",onClick:P(I),disabled:!P($)},{default:D(()=>[R(L(e.$t("Public.Btn.Refresh")),1)]),_:1},8,["loading","onClick","disabled"])]),_:1})]),_:1})):A("",!0)]),toolsRight:D(()=>[b(p,{value:P(r).search,"onUpdate:value":a[2]||(a[2]=e=>P(r).search=e),onSearch:y},null,8,["value"])]),table:D(()=>[b(_,{loading:P(k).loading,data:P(k).data,columns:P(j)},null,8,["loading","data","columns"])]),pageRight:D(()=>[b(v,{page:P(r).p,"onUpdate:page":a[3]||(a[3]=e=>P(r).p=e),"page-size":P(r).limit,"onUpdate:pageSize":a[4]||(a[4]=e=>P(r).limit=e),"item-count":P(k).total,onRefresh:V,"store-key":"ssl-domain-page"},null,8,["page","page-size","item-count"])]),_:1}),b(U,{show:P(d).show,"onUpdate:show":a[5]||(a[5]=e=>P(d).show=e),title:P(d).title,data:P(d).data,width:540,"min-height":300,footer:!0,component:P(l)},null,8,["show","title","data","component"])])}}}),la=ae(ta,[["__scopeId","data-v-abfdb3c9"]]),na={class:"p-20px"},ia=g({__name:"add-form",props:{onRefresh:{}},setup(e,{expose:a}){const{t:t}=v(),l=te(),n=e,{onRefresh:i}=n,o=w(!1),s=w(null),r=f({domain_name:"",domain_ip:"",soa:"",nameserver1:"",nameserver2:""}),d={domain_name:{required:!0,trigger:["blur","change"],message:t("Please enter your domain name")},domain_ip:{required:!0,trigger:["blur","change"],message:t("Please enter your domain IP")},soa:{required:!0,trigger:["blur","change"],message:t("Please enter SOA")}},u=()=>{if(!r.domain_name)return r.soa="",r.nameserver1="",void(r.nameserver2="");r.soa="ns1."+r.domain_name,o.value||(r.nameserver1="ns1."+r.domain_name,r.nameserver2="ns2."+r.domain_name)},c=()=>{r.domain_ip=l.address};return(async()=>{const{message:e}=await ne();H(e)&&(r.nameserver1=e.NS1,r.nameserver2=e.NS2,Object.keys(e).length?o.value=!0:o.value=!1)})(),a({onConfirm:async()=>{await(s.value?.validate()),await ie({domain:r.domain_name,domain_ip:r.domain_ip,soa:r.soa,ns1domain:r.nameserver1,ns2domain:r.nameserver2}),i()}}),(e,a)=>{const t=Ve,l=Be,n=Ne,i=Oe,o=le,m=Ie,p=Ye,_=Se;return S(),x("div",na,[b(p,{ref_key:"formRef",ref:s,model:P(r),rules:d},{default:D(()=>[b(l,{label:e.$t("Mail.Domain.index_3"),path:"domain_name"},{default:D(()=>[b(t,{class:"w-320px!",value:P(r).domain_name,"onUpdate:value":a[0]||(a[0]=e=>P(r).domain_name=e),placeholder:"Enter your domain name,eg: aapanel.com",onInput:u},null,8,["value"])]),_:1},8,["label"]),b(l,{label:"Domain IP",path:"domain_ip"},{default:D(()=>[b(i,{class:"flex-nowrap!",size:5},{default:D(()=>[b(t,{class:"w-320px!",value:P(r).domain_ip,"onUpdate:value":a[1]||(a[1]=e=>P(r).domain_ip=e),placeholder:"Enter your domain IP,eg: 1.2.3.4"},null,8,["value"]),b(n,{onClick:c},{default:D(()=>a[5]||(a[5]=[R(" USE IP ",-1)])),_:1,__:[5]})]),_:1})]),_:1}),b(l,{label:"SOA",path:"soa"},{default:D(()=>[b(i,{class:"items-center"},{default:D(()=>[b(t,{class:"w-320px!",value:P(r).soa,"onUpdate:value":a[2]||(a[2]=e=>P(r).soa=e),placeholder:"ns1.domain.com"},null,8,["value"]),b(m,null,{trigger:D(()=>a[6]||(a[6]=[C("i",{class:"i-uiw:question-circle-o text-16px text-#9DA1A6 cursor-pointer"},null,-1)])),default:D(()=>[C("div",null,[a[8]||(a[8]=R(" What is SOA record in DNS? ",-1)),b(o,{href:"https://www.aaPanel.com/docs/Function/Domains-basics.html#_4-what-is-the-soa-record",target:"_blank"},{default:D(()=>a[7]||(a[7]=[R(" View ",-1)])),_:1,__:[7]})])]),_:1})]),_:1})]),_:1}),b(l,{label:"NameServer 1",path:"nameserver1"},{default:D(()=>[b(t,{class:"w-320px!",value:P(r).nameserver1,"onUpdate:value":a[3]||(a[3]=e=>P(r).nameserver1=e),placeholder:"Your Name Server,eg: ns1.aapanel.com,Option"},null,8,["value"])]),_:1}),b(l,{label:"NameServer 2",path:"nameserver2"},{default:D(()=>[b(t,{class:"w-320px!",value:P(r).nameserver2,"onUpdate:value":a[4]||(a[4]=e=>P(r).nameserver2=e),placeholder:"Your Name Server,eg: ns2.aapanel.com,Option"},null,8,["value"])]),_:1})]),_:1},8,["model"]),b(_,null,{default:D(()=>[C("li",null,[a[10]||(a[10]=R(" How to add domain name using self-built DNS? ",-1)),b(o,{href:"https://www.aaPanel.com/docs/Function/Tutorial/build_dns_server.html",target:"_blank"},{default:D(()=>a[9]||(a[9]=[R(" View tutorial ",-1)])),_:1,__:[9]})])]),_:1})])}}}),oa=g({__name:"index",props:{data:{},onRefresh:{}},setup(e,{expose:a}){const{t:t}=v(),l=e,{onRefresh:n,data:i}=l,o=w(null),s=f({name_server:"",admin_email:"",serial_number:0,refresh:0,retry:0,expire:0,minimum:0}),r=[{key:"name_server",label:t("Nameserver"),placeholder:t("Enter your nameserver,eg: ns1.domain.com"),tooltip:t("name server")},{key:"admin_email",label:t("Admin Email"),placeholder:"Enter your admin email,eg: admin@domain.com",tooltip:t("model admin email")},{key:"serial_number",label:t("Serial Number"),placeholder:t("Enter your serial number,eg: 2023080101"),tooltip:t("zone file version,Modification is prohibited.")},{key:"refresh",label:t("Refresh"),placeholder:t("Enter your refresh,eg: 3600"),tooltip:t("How often to check the serial number on the master server")},{key:"retry",label:t("Retry"),placeholder:t("Enter your retry,eg: 3600"),tooltip:t("The interval time when the slaveserver reconnects to the masterserver")},{key:"expire",label:t("Expire"),placeholder:t("Enter your expire,eg: 604800"),tooltip:t("When the time exceeds the number of seconds set by Expire and the slave server cannot get in touch with the master, the slave will delete its copy")},{key:"minimum",label:t("Minimum"),placeholder:t("Enter your minimum,eg: 3600"),tooltip:t("Represents the default TTL value of all records in this zone file")}],d=["serial_number","refresh","retry","expire","minimum"],u=Object.fromEntries(r.map(e=>[e.key,{required:!0,...d.includes(e.key)?{type:"number"}:{},trigger:["blur","change"],message:`Please enter your ${e.label.toLowerCase()}`}])),{loading:c,setLoading:m}=De();return(async()=>{try{m(!0);const{message:e}=await se({domain:i.domain});H(e)&&(s.name_server=e.nameserver,s.admin_email=e.admin_mail,s.serial_number=e.serial,s.refresh=e.refresh,s.retry=e.retry,s.expire=e.expire,s.minimum=e.minimum)}finally{m(!1)}})(),a({onConfirm:async()=>{await(o.value?.validate()),await re({domain:i.domain,nameserver:s.name_server,admin_mail:s.admin_email,serial:s.serial_number,refresh:s.refresh,retry:s.retry,expire:s.expire,minimum:s.minimum}),n()}}),(e,a)=>{const t=Ve,l=Fe,n=K,i=We,m=Be,p=Ye,_=oe;return S(),E(_,{show:P(c)},{default:D(()=>[b(p,{class:"p-20px",ref_key:"formRef",ref:o,model:P(s),rules:P(u)},{default:D(()=>[(S(),x(I,null,B(r,e=>b(m,{key:e.key,label:e.label,path:e.key},{default:D(()=>[d.includes(e.key)?(S(),E(l,{key:1,readonly:"serial_number"===e.key,class:"w-350px! mr-8px",value:P(s)[e.key],"onUpdate:value":a=>P(s)[e.key]=a,placeholder:e.placeholder},null,8,["readonly","value","onUpdate:value","placeholder"])):(S(),E(t,{key:0,class:"w-350px! mr-8px",value:P(s)[e.key],"onUpdate:value":a=>P(s)[e.key]=a,placeholder:e.placeholder},null,8,["value","onUpdate:value","placeholder"])),b(i,{trigger:"hover",placement:"top-start"},{trigger:D(()=>[b(n,{name:"common-ask",class:"color-#fc7938",size:"16"})]),default:D(()=>[R(" "+L(e.tooltip),1)]),_:2},1024)]),_:2},1032,["label","path"])),64))]),_:1},8,["model","rules"])]),_:1},8,["show"])}}}),sa={class:"leading-17px"},ra={class:"leading-17px"},da=g({__name:"index",setup(e){const t=U(()=>Y(()=>a.import("./ssl-log-legacy.js?v=1769066082311"),void 0)),{t:l}=v(),o=de(),{dnsStatus:s,dnsInstall:r}=V(o),{canRefreshDns:d,refreshLoading:u,onRefreshDns:_}=Qe(),g=f({p:1,limit:10,domain:"",id:n}),w=async()=>{await me({id:g.id}),Z(),k.show=!0},k=ve(l("SSL.Domain.index_23"),{path:"/www/server/panel/logs/dns_sync.log"}),j=ve(l("Add Domain"),{onRefresh:()=>{Z()}}),z=ve(l("SOA Record"),{onRefresh:()=>{Z()}}),$=e=>{m.value=e.dns_resolve?.ns_resolve||e.dns_resolve?.a_resolve||"aaPanelDns"!==i.value?"":e.dns_resolve?.tips,c.value=e.name,p.value=!0},T=async()=>{await $e("install",async()=>{await y(),await o.getDNSStatus(),Z()})},B=(e,a)=>{i.value=a,n.value=e,g.p=1,Z()},F=()=>{g.p=1,Z()},{keys:W,table:q,columns:G}=fe([{type:"selection",width:40},{key:"name",title:l("Mail.Mass.index_45"),render:e=>b(Oe,{class:"items-center"},{default:()=>[b(le,{onClick:()=>$(e)},{default:()=>[e.name]}),e.dns_resolve?.ns_resolve||e.dns_resolve?.a_resolve||"aaPanelDns"!==i.value?"":b(Ie,{trigger:"focus",placement:"top-start"},{trigger:()=>b(K,{color:"#f08a00",name:"base-info",size:16},null),default:()=>{let a;return b(Oe,{class:"items-center"},{default:()=>{return[b("span",null,[e.dns_resolve.tips]),b(Ne,{type:"primary",size:"small",onClick:()=>window.open("https://www.aaPanel.com/docs/Function/Tutorial/build_dns_server.html")},{default:()=>[R("View tutorial")]}),b(Ne,{type:"primary",ghost:!0,size:"small",disabled:!d.value,loading:u.value,onClick:()=>_()},(t=a=l("Refresh"),"function"==typeof t||"[object Object]"===Object.prototype.toString.call(t)&&!N(t)?a:{default:()=>[a]}))];var t}})}}),""]})},h({key:"ssl_info.end_time",title:"SSL Days"}),{key:"ssl_info.end_date",title:"SSL Expiration Time",render:e=>e.ssl_info.end_date?e.ssl_info.end_date:"--"},{key:"records",title:l("SSL.Domain.index_24"),align:"center"},we({width:300,options:e=>[{label:l("SOA Record"),show:"aaPanelDns"===i.value,onClick:()=>{z.data.domain=e.name,z.show=!0}},{label:"Restore",show:!1,onClick:()=>{be({title:"Restore domain name resolution",content:`Restore the default resolution of the domain name [${e.name}],still continue?`,onConfirm:async()=>{}})}},{label:l("SSL.index_58"),onClick:()=>{$(e)}},{label:l("Public.Btn.Delete"),show:"aaPanelDns"===i.value,onClick:()=>{be({title:"Delete domain name resolution",content:`Delete the domain name resolution of the domain name [${e.name}],still continue?`,onConfirm:async()=>{await ue({domain:e.name}),Z()}})}}]})]),X=Le(()=>{Z()}),Z=async()=>{if(n.value)try{q.loading=!0;const{message:e}=await ce(g);H(e)&&(e.data.length>0?(q.data=e.data,q.total=e.total):(q.data=[],q.total=0))}finally{q.loading=!1}};return M(async()=>{(async()=>{await y(),await o.getDNSStatus(),Z()})()}),(e,a)=>{const l=K,n=Ne,o=Te,d=Ke,u=ke,c=He,m=ge,_=ye,h=he;return S(),x("div",null,[P(r)?A("",!0):(S(),E(o,{key:0,class:"mb-10px","show-icon":!1,type:"default"},{default:D(()=>[b(P(Oe),{class:"items-center"},{default:D(()=>[b(l,{name:"base-info",size:"17"}),C("div",sa,L(e.$t("Build your own dns server based on pdns")),1),b(n,{type:"primary",size:"small",onClick:T},{default:D(()=>[R(L(e.$t("Install Self-built DNS")),1)]),_:1})]),_:1})]),_:1})),!P(s)&&P(r)?(S(),E(o,{key:1,class:"mb-10px",type:"warning"},{default:D(()=>[b(P(Oe),{class:"items-center"},{default:D(()=>[C("div",ra,L(e.$t("The dns server is stopped, please start it first")),1),b(n,{type:"primary",size:"small",onClick:P(Ce)},{default:D(()=>[R(L(e.$t("Set & Manage")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})):A("",!0),P(p)?A("",!0):(S(),E(_,{key:2},{toolsLeft:D(()=>[b(ea,{value:P(g).id,"onUpdate:value":a[0]||(a[0]=e=>P(g).id=e),onChange:B},null,8,["value"]),"aaPanelDns"!==P(i)?(S(),x(I,{key:0},[b(n,{onClick:w,type:"primary",ghost:""},{default:D(()=>[R(L(e.$t("SSL.Domain.index_22")),1)]),_:1}),b(n,{onClick:a[1]||(a[1]=e=>P(k).show=!0)},{default:D(()=>[R(L(e.$t("SSL.Domain.index_23")),1)]),_:1})],64)):A("",!0),P(r)&&"aaPanelDns"===P(i)?(S(),x(I,{key:1},[P(s)?(S(),x(I,{key:0},[b(n,{type:"primary",onClick:a[2]||(a[2]=e=>P(j).show=!0)},{default:D(()=>[R(L(e.$t("Add Domain")),1)]),_:1}),b(n,{onClick:P(Ue)},{default:D(()=>[R(L(e.$t("Apply DMARC Policy")),1)]),_:1},8,["onClick"]),b(n,{onClick:P(je)},{default:D(()=>[R(L(e.$t("Enable DKIM/SPF")),1)]),_:1},8,["onClick"]),b(n,{onClick:P(ze)},{default:D(()=>[R(L(e.$t("DNS Clear")),1)]),_:1},8,["onClick"])],64)):A("",!0),b(n,{onClick:P(Ce)},{default:D(()=>[a[11]||(a[11]=C("i",{class:"i-domain:setting text-16px mr-1"},null,-1)),R(" "+L(e.$t("Set & Manage")),1)]),_:1,__:[11]},8,["onClick"])],64)):A("",!0)]),toolsRight:D(()=>[b(d,{value:P(g).domain,"onUpdate:value":a[3]||(a[3]=e=>P(g).domain=e),onSearch:F,placeholder:e.$t("WP.index_4")},null,8,["value","placeholder"])]),table:D(()=>[b(u,{"checked-row-keys":P(W),"onUpdate:checkedRowKeys":a[4]||(a[4]=e=>O(W)?W.value=e:null),"row-key":"name",loading:P(q).loading,data:P(q).data,columns:P(G)},null,8,["checked-row-keys","loading","data","columns"])]),pageLeft:D(()=>[b(c,{"checked-row-keys":P(W),"onUpdate:checkedRowKeys":a[5]||(a[5]=e=>O(W)?W.value=e:null),"row-key":"name",data:P(q).data,options:P(X)},null,8,["checked-row-keys","data","options"])]),pageRight:D(()=>[b(m,{page:P(g).p,"onUpdate:page":a[6]||(a[6]=e=>P(g).p=e),"page-size":P(g).limit,"onUpdate:pageSize":a[7]||(a[7]=e=>P(g).limit=e),"store-key":"ssl-domain-page","item-count":P(q).total,onRefresh:Z},null,8,["page","page-size","item-count"])]),_:1})),P(p)?(S(),E(la,{key:3,onChange:Z})):A("",!0),b(h,{show:P(k).show,"onUpdate:show":a[8]||(a[8]=e=>P(k).show=e),title:P(k).title,data:P(k).data,width:650,"min-height":450,component:P(t)},null,8,["show","title","data","component"]),b(h,{show:P(j).show,"onUpdate:show":a[9]||(a[9]=e=>P(j).show=e),title:P(j).title,data:P(j).data,width:550,component:ia,footer:!0},null,8,["show","title","data"]),b(h,{show:P(z).show,"onUpdate:show":a[10]||(a[10]=e=>P(z).show=e),title:P(z).title,data:P(z).data,width:600,"min-height":400,component:oa,footer:!0},null,8,["show","title","data"])])}}}),ua=g({__name:"index",setup(e,{expose:a}){const{t:t}=v(),l=f({p:1,limit:10,search:""}),n=()=>{be({title:"Clean up logs",content:"Are you sure you want to clean up logs?",onConfirm:async()=>{await pe(),s()}})},{table:i,columns:o}=fe([{title:t("Config.Backup.index_11"),key:"log",ellipsis:{tooltip:{placement:"top",width:1e3}}},{align:"right",title:t("Logs.Panel.index_7"),width:180,key:"addtime"}]),s=async()=>{try{i.loading=!0;const{message:e}=await _e(F(l));H(e)&&(i.data=e.data||[],i.total=e.count||0)}finally{i.loading=!1}};return s(),a({init:s}),(e,a)=>{const t=Ne,r=Ke,d=ke,u=ge,c=ye;return S(),E(c,null,{toolsLeft:D(()=>[b(t,{type:"primary",onClick:s},{default:D(()=>[R(L(e.$t("Public.Btn.Refresh")),1)]),_:1})]),toolsRight:D(()=>[b(r,{value:P(l).search,"onUpdate:value":a[0]||(a[0]=e=>P(l).search=e),placeholder:"Please enter keywords",onSearch:s},null,8,["value"]),b(t,{onClick:n},{default:D(()=>a[3]||(a[3]=[R("Clean up logs",-1)])),_:1,__:[3]})]),table:D(()=>[b(d,{loading:P(i).loading,data:P(i).data,columns:P(o)},null,8,["loading","data","columns"])]),pageRight:D(()=>[b(u,{page:P(l).p,"onUpdate:page":a[1]||(a[1]=e=>P(l).p=e),"page-size":P(l).limit,"onUpdate:pageSize":a[2]||(a[2]=e=>P(l).limit=e),"item-count":P(i).total,onRefresh:s},null,8,["page","page-size","item-count"])]),_:1})}}});e("default",g({__name:"index",setup(e){const a=te(),{userInfo:l}=V(a),{t:n}=v(),i=[{key:"manage",label:n("SSL.Domain.index_7"),component:da},{key:"host",label:n("SSL.Domain.index_27"),component:Je},{key:"logs",label:n("Config.Safe.index_153"),component:ua}],s=e=>{"host"===e&&(p.value=!1)};return(e,a)=>{const n=t,r=qe;return P(l).status?(S(),E(r,{key:0,class:"p-16px"},{default:D(()=>[b(n,{value:P(o),"onUpdate:value":[a[0]||(a[0]=e=>O(o)?o.value=e:null),s],options:i},null,8,["value"])]),_:1})):(S(),E(Ge,{key:1}))}}}))}}});
