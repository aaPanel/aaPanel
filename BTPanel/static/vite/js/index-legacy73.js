System.register(["./page_layout-legacy.js?v=1762424784323","./index-legacy132.js?v=1762424784323","./index-legacy.js?v=1762424784323","./public-legacy.js?v=1762424784323","./index.vue_vue_type_script_setup_true_lang-legacy5.js?v=1762424784323","./index.vue_vue_type_script_setup_true_lang-legacy7.js?v=1762424784323","./index.vue_vue_type_script_setup_true_lang-legacy8.js?v=1762424784323","./vue-legacy.js?v=1762424784323","./soft-legacy2.js?v=1762424784323","./useModal-legacy2.js?v=1762424784323","./site-legacy3.js?v=1762424784323","./index-legacy197.js?v=1762424784323","./index.vue_vue_type_script_setup_true_lang-legacy.js?v=1762424784323","./naive-legacy.js?v=1762424784323","./common-legacy.js?v=1762424784323","./__commonjsHelpers__-legacy.js?v=1762424784323","./index.vue_vue_type_script_setup_true_lang-legacy6.js?v=1762424784323","./soft-legacy.js?v=1762424784323","./site-legacy.js?v=1762424784323"],function(e,t){"use strict";var i,a,l,n,s,o,d,c,u,r,p,x,m,f,_,h,v,y,W,w,g,S,b,R,$,j,k,U,P,C,N,q,z,O,V,E,L,T,D,F,A,B,H,J,M,G,I,K,Q,X,Y,Z,ee,te,ie,ae,le,ne,se,oe,de,ce,ue,re;return{setters:[e=>{i=e.d,a=e.bU,l=e.d7,n=e.a,s=e.w,o=e.m,d=e.x},e=>{c=e._},e=>{u=e._},e=>{r=e._,p=e.a,x=e.e,m=e.c,f=e.f,_=e.h,h=e.u},e=>{v=e._},e=>{y=e._},e=>{W=e._},e=>{w=e.k,g=e.t,S=e.P,b=e.e,R=e.R,$=e.V,j=e.W,k=e.a3,U=e.S,P=e.l,C=e.U,N=e.j,q=e.a4,z=e.v,O=e.N,V=e.a0,E=e.r,L=e.F,T=e.o,D=e.a2,F=e._,A=e.u},e=>{B=e.u},e=>{H=e.u},e=>{J=e.s,M=e.a,G=e.b,I=e.g,K=e.c,Q=e.d,X=e.e},e=>{Y=e._},e=>{Z=e._},e=>{ee=e.dR,te=e.dj,ie=e.dT,ae=e.dU,le=e.au,ne=e.ee,se=e.ef,oe=e.df,de=e.dh,ce=e._,ue=e.dS,re=e.aC},null,null,null,null,null],execute:function(){const pe={class:"p-20px"},xe={class:"flex-1"},me={class:"flex items-center h-32px"},fe={class:"flex items-center h-32px"},_e={class:"w-320px mt-6px"},he={class:"flex-1"},ve={class:"flex items-center h-32px"},ye={class:"flex items-center h-32px"},We={class:"w-320px mt-6px"},we={class:"text-error"},ge=w({__name:"index",props:{row:{},onRefresh:{}},setup(e,{expose:t}){const a=e,l=g(a,"row"),{t:n}=S(),s=b({html:!1,html_fast:!1,js:!1,picture:!1}),o=b({type:"default",text:""}),d=b({type:"default",text:""});(()=>{if(!l.value)return;const{crawler:e}=l.value;e&&(s.html=e.html,s.picture=e.picture,e.htmlnew&&(o.type=e.htmlnew.type,o.text=e.htmlnew.text),e.picturenew&&(d.type=e.picturenew.type,d.text=e.picturenew.text))})();const c=async()=>{const e=(()=>{const e={site:l.value.siteName,html:s.html,html_fast:!1,js:!1,picture:s.picture,htmlnew:O(o),picturenew:O(d)};return ne(l.value.crawler,e,(e,t)=>{if(i(e))return JSON.stringify(se(e,t))})})();await J(e),a.onRefresh?.()};return t({onConfirm:async({hide:e})=>(s.html||s.picture?p({title:n("Public.Confirm.Title"),width:408,content:()=>j("div",{class:"relative pb-40px"},[j("div",null,[N("效果：每次访问网页内容随机加密、有效防止爬虫")]),j("div",null,[N("影响：开启后会导致比之前流量增加1倍")]),j("div",null,[N("建议：线上业务建议不要开启")]),j(r,{class:"absolute left-[-21px] bottom-0 mt-16px "},{default:()=>[j("li",{class:"text-error"},[N("当前的功能为测试功能建议不要在线上业务开启！！")])]})]),onConfirm:async({hide:t})=>{await c(),t(),e()}}):(await c(),e()),!1)}),(e,t)=>{const i=te,a=ae,l=ie,n=le,c=ee,u=Z;return $(),R("div",pe,[j(u,{"label-width":"160px"},{default:k(()=>[j(c,{label:e.$t("Waf.Site.ReptileProtection.index_1")},{default:k(()=>[U("div",xe,[U("div",me,[j(i,{value:C(s).html,"onUpdate:value":t[0]||(t[0]=e=>C(s).html=e)},null,8,["value"])]),P(U("div",fe,[j(l,{value:C(o).type,"onUpdate:value":t[1]||(t[1]=e=>C(o).type=e)},{default:k(()=>[j(a,{value:"default"},{default:k(()=>[N(q(e.$t("Waf.Site.ReptileProtection.index_2")),1)]),_:1}),j(a,{value:"text"},{default:k(()=>[N(q(e.$t("Waf.Site.ReptileProtection.index_3")),1)]),_:1})]),_:1},8,["value"])],512),[[z,C(s).html]]),P(U("div",_e,[j(n,{value:C(o).text,"onUpdate:value":t[2]||(t[2]=e=>C(o).text=e),placeholder:e.$t("Waf.Site.ReptileProtection.index_4")},null,8,["value","placeholder"])],512),[[z,C(s).html&&"text"===C(o).type]])])]),_:1},8,["label"]),j(c,{label:e.$t("Waf.Site.ReptileProtection.index_5")},{default:k(()=>[U("div",he,[U("div",ve,[j(i,{value:C(s).picture,"onUpdate:value":t[3]||(t[3]=e=>C(s).picture=e)},null,8,["value"])]),P(U("div",ye,[j(l,{value:C(d).type,"onUpdate:value":t[4]||(t[4]=e=>C(d).type=e)},{default:k(()=>[j(a,{value:"default"},{default:k(()=>[N(q(e.$t("Waf.Site.ReptileProtection.index_6")),1)]),_:1}),j(a,{value:"text"},{default:k(()=>[N(q(e.$t("Waf.Site.ReptileProtection.index_7")),1)]),_:1})]),_:1},8,["value"])],512),[[z,C(s).picture]]),P(U("div",We,[j(n,{value:C(d).text,"onUpdate:value":t[5]||(t[5]=e=>C(d).text=e),placeholder:e.$t("Waf.Site.ReptileProtection.index_8")},null,8,["value","placeholder"])],512),[[z,C(s).picture&&"text"===C(d).type]])])]),_:1},8,["label"])]),_:1}),j(r,{class:"mt-16px"},{default:k(()=>[U("li",we,q(e.$t("Waf.Site.ReptileProtection.index_9")),1),U("li",null,[U("b",null,q(e.$t("Waf.Site.ReptileProtection.index_10")),1),N(q(e.$t("Waf.Site.ReptileProtection.index_11")),1)]),U("li",null,[U("b",null,q(e.$t("Waf.Site.ReptileProtection.index_12")),1),N(q(e.$t("Waf.Site.ReptileProtection.index_13")),1)]),U("li",null,[U("b",null,q(e.$t("Waf.Site.ReptileProtection.index_14")),1),N(q(e.$t("Waf.Site.ReptileProtection.index_15")),1)])]),_:1})])}}}),Se={class:"p-20px"},be={class:"w-40px"},Re={class:"mx-8px"},$e={class:"w-40px"},je={class:"mx-8px"},ke={class:"w-40px"},Ue={class:"ml-8px"},Pe={class:"flex-1"},Ce={class:"flex items-center h-32px"},Ne={class:"w-320px mt-6px"},qe={class:"text-error"},ze=w({__name:"index",props:{row:{},onRefresh:{}},setup(e,{expose:t}){const i=e,l=g(i,"row"),n=b({open:!1,user:50,time:10,qps:1,identity:{type:"default",text:""}});return(()=>{if(!l.value)return;const{limiting:e}=l.value;if(!e)return;const{timeout:t}=e;t&&(n.open=t.open,n.user=t.user,n.time=t.time,n.qps=t.qps,n.identity.type=t.identity.type,n.identity.text=t.identity.text)})(),t({onConfirm:async()=>{await M({site:l.value.siteName,limiting:{open:n.open,user:n.user,time:n.time,qps:n.qps,identity:{type:n.identity.type,text:n.identity.text}}}),i.onRefresh?.()}}),(e,t)=>{const i=te,l=ee,s=oe,o=ae,d=ie,c=le,u=a,p=Z,x=r;return $(),R("div",Se,[j(p,{"label-width":"160px"},{default:k(()=>[j(l,{label:e.$t("Waf.Site.WaitingRoom.index_1")},{default:k(()=>[j(i,{value:C(n).open,"onUpdate:value":t[0]||(t[0]=e=>C(n).open=e)},null,8,["value"])]),_:1},8,["label"]),j(u,{show:C(n).open},{default:k(()=>[j(l,{label:e.$t("Waf.Site.WaitingRoom.index_2")},{default:k(()=>[U("div",be,[j(s,{value:C(n).user,"onUpdate:value":t[1]||(t[1]=e=>C(n).user=e),min:0,"show-button":!1,placeholder:""},null,8,["value"])]),U("div",Re,q(e.$t("Waf.Site.WaitingRoom.index_3")),1),U("div",$e,[j(s,{value:C(n).time,"onUpdate:value":t[2]||(t[2]=e=>C(n).time=e),min:0,"show-button":!1,placeholder:""},null,8,["value"])]),U("div",je,q(e.$t("Waf.Site.WaitingRoom.index_4")),1),U("div",ke,[j(s,{value:C(n).qps,"onUpdate:value":t[3]||(t[3]=e=>C(n).qps=e),min:0,"show-button":!1,placeholder:""},null,8,["value"])]),U("div",Ue,q(e.$t("Waf.Site.WaitingRoom.index_5")),1)]),_:1},8,["label"]),j(l,{label:e.$t("Waf.Site.WaitingRoom.index_6")},{default:k(()=>[U("div",Pe,[U("div",Ce,[j(d,{value:C(n).identity.type,"onUpdate:value":t[4]||(t[4]=e=>C(n).identity.type=e)},{default:k(()=>[j(o,{value:"default"},{default:k(()=>[N(q(e.$t("Waf.Site.WaitingRoom.index_7")),1)]),_:1}),j(o,{value:"text"},{default:k(()=>[N(q(e.$t("Waf.Site.WaitingRoom.index_8")),1)]),_:1})]),_:1},8,["value"])]),P(U("div",Ne,[j(c,{value:C(n).identity.text,"onUpdate:value":t[5]||(t[5]=e=>C(n).identity.text=e),placeholder:e.$t("Waf.Site.WaitingRoom.index_9")},null,8,["value","placeholder"])],512),[[z,"text"===C(n).identity.type]])])]),_:1},8,["label"])]),_:1},8,["show"])]),_:1}),j(x,{class:"mt-16px"},{default:k(()=>[U("li",qe,q(e.$t("Waf.Site.WaitingRoom.index_10")),1),U("li",null,[U("b",null,q(e.$t("Waf.Site.WaitingRoom.index_11")),1),N(q(e.$t("Waf.Site.WaitingRoom.index_12")),1)]),U("li",null,[U("b",null,q(e.$t("Waf.Site.WaitingRoom.index_13")),1),N(q(e.$t("Waf.Site.WaitingRoom.index_14")),1)]),U("li",null,[U("b",null,q(e.$t("Waf.Site.WaitingRoom.index_15")),1),N(q(e.$t("Waf.Site.WaitingRoom.index_16")),1)]),U("li",null,[U("b",null,q(e.$t("Waf.Site.WaitingRoom.index_17")),1),N(q(e.$t("Waf.Site.WaitingRoom.index_18")),1)]),U("li",null,q(e.$t("Waf.Site.WaitingRoom.index_19")),1)]),_:1})])}}}),Oe={class:"mr-8px"},Ve={class:"cursor-pointer"};function Ee(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!A(e)}e("default",w({__name:"index",setup(e){const a=F(()=>n(()=>t.import("./count-legacy.js?v=1762424784323"),void 0)),w=F(()=>n(()=>t.import("./record-legacy.js?v=1762424784323"),void 0)),{t:g}=S(),R=l(),{isNewVersion:P,version:z,lastVersion:A}=V(R),J=()=>{B("btwaf",()=>{window.location.reload()})},M=E(!1),Z=async e=>{await G({obj:"malicious_ip"}),M.value=e},ee=b({p:1,limit:10,search:""}),ie=x(""),ae=x(""),le=async(e,t)=>{await K({siteName:e.siteName,obj:t})},{table:ne,columns:se,setLoading:oe}=m([{key:"siteName",title:g("Waf.Site.index_8"),minWidth:150,ellipsis:{tooltip:!0},render:e=>j("a",{class:"bt-link",href:"javascript:;",onClick:()=>{H({row:e,onRefresh:fe})}},[e.siteName])},{key:"total",title:g("Waf.Site.index_9"),width:"10%",minWidth:140,render:e=>{let t=0;return e.total.forEach(e=>{t+=e.value}),j(de,{placement:"bottom-start","arrow-point-to-center":!0},{trigger:()=>j(L,null,[t>0?j("a",{class:"bt-link error",href:"javascript:;",onClick:()=>{(e=>{ie.data.list=e.total,ie.title=g("Waf.Site.index_5",[e.siteName]),ie.show=!0})(e)}},[t]):t]),default:()=>j("div",null,[e.total.map(e=>j("div",{class:"leading-18px"},[e.name,N(": "),e.value,g("Waf.Site.index_35")]))])})}},{key:"not_spider",width:"12%",minWidth:120,title:()=>{let e;return j(L,null,[j("span",{class:"mr-6px"},[g("Waf.Site.index_36")]),j(Y,null,Ee(e=g("Waf.Site.index_37"))?e:{default:()=>[e]})])},render:e=>j(ce,{checked:e.not_spider,onUpdateChecked:async t=>{await le(e,"not_spider"),e.not_spider=t}},null)},{key:"cdn",width:"12%",minWidth:120,title:()=>{let e;return j(L,null,[j("span",{class:"mr-6px"},[g("Waf.Site.index_38")]),j(Y,null,Ee(e=g("Waf.Site.index_39"))?e:{default:()=>[e]})])},render:e=>j(ce,{checked:e.cdn,onUpdateChecked:async t=>{await le(e,"cdn"),e.cdn=t}},null)},{key:"smart_cc",width:"14%",minWidth:140,title:()=>j(L,null,[j("span",{class:"mr-6px"},[g("Waf.Site.index_40")]),j(Y,null,{default:()=>[j("div",{class:"w-500px"},[g("Waf.Site.index_41")])]})]),render:e=>j("div",{class:"inline-flex items-center"},[j(ce,{class:"mr-6px",checked:e.smart_cc.open,onUpdateChecked:async t=>{t?p({title:g("Public.Confirm.Title"),content:g("Waf.Site.index_10"),onConfirm:async()=>{await le(e,"smart_cc"),e.smart_cc.open=t}}):(await le(e,"smart_cc"),e.smart_cc.open=t)}},null),j(de,{placement:"bottom-start","arrow-point-to-center":!0},{trigger:()=>j("span",{class:"text-desc text-13px"},[e.total[9].value]),default:()=>j(L,null,[g("Waf.Site.index_42",[e.total[9].value])])})])},{key:"crawler",title:g("Waf.Site.index_43"),width:"9%",minWidth:100,render:e=>{const t=(e.crawler?Object.entries(e.crawler):[]).some(([e,t])=>t&&"picturenew"!==e&&"htmlnew"!==e);return j("a",{class:["bt-link",t?"":"error"],href:"javascript:;",onClick:()=>{pe(e)}},[g(t?"Public.Status.Enable":"Public.Status.Disable")])}},{key:"limiting",title:g("Waf.Site.index_44"),width:"10%",minWidth:170,render:e=>j("a",{class:["bt-link",e?.limiting?.timeout?.open?"":"error"],href:"javascript:;",onClick:()=>{xe(e)}},[g(e?.limiting?.timeout?.open?"Public.Status.Enable":"Public.Status.Disable")])},{key:"cc",width:"8%",minWidth:100,title:g("Waf.Site.index_11"),render:e=>j("div",{class:"inline-flex items-center"},[j(ce,{class:"mr-6px",checked:e.cc.open,onUpdateChecked:async t=>{await le(e,"cc"),e.cc.open=t}},null),j(de,{placement:"bottom-start","arrow-point-to-center":!0},{trigger:()=>j("span",{class:"text-desc text-13px"},[e.total[2].value]),default:()=>j(L,null,[g("Waf.Site.index_42",[e.total[2].value])])})])},{key:"open",width:"6%",minWidth:70,title:g("Waf.Site.index_12"),render:e=>j(te,{size:"small",value:e.open,onUpdateValue:async t=>{await le(e,"open"),e.open=t}},null)},f({width:100,options:e=>[{label:g("Waf.Site.index_13"),onClick:()=>{(async e=>{const{message:t}=await I({siteName:e.siteName});s(t)&&t.length>0?(ae.data.timeList=t,ae.data.siteName=e.siteName,ae.title=g("Waf.Site.index_6",[e.siteName]),ae.show=!0):o.success(g("Waf.Site.index_7"))})(e)}},{label:g("Public.Btn.Set"),onClick:()=>{H({row:e,onRefresh:fe})}}]})]),pe=e=>{h({title:g("Waf.Site.index_45",[e.siteName]),width:620,footer:!0,data:{row:e,onRefresh:fe},component:ge})},xe=e=>{h({title:g("Waf.Site.index_46",[e.siteName]),width:700,footer:!0,data:{row:e,onRefresh:fe},component:ze})},me=()=>{ee.p=1,fe()},fe=async()=>{try{oe(!0);const{message:e}=await X(O(ee));i(e)&&(ne.data=e.data,ne.total=d(e.page))}finally{oe(!1)}};return(async()=>{const{message:e}=await Q();i(e)&&(M.value=e.malicious_ip)})(),T(()=>{fe()}),(e,t)=>{const i=re,l=W,n=_,s=y,o=v,d=r,p=u,x=ue,m=c;return $(),D(m,{install:C(P)},{desc:k(()=>[U("span",Oe," Current Nginx WAF version is v"+q(C(z))+", latest is v"+q(C(A))+". Please update. ",1),j(i,{class:"px-8px h-24px",type:"primary",size:"small",onClick:J},{default:k(()=>t[6]||(t[6]=[N(" Upgrade ",-1)])),_:1,__:[6]})]),default:k(()=>[j(x,{class:"p-16px"},{default:k(()=>[j(o,null,{toolsLeft:k(()=>[U("div",Ve,[U("span",{class:"mr-8px text-desc",onClick:t[0]||(t[0]=e=>Z(!C(M)))},q(e.$t("Waf.Site.index_1")),1),j(C(ce),{checked:C(M),"onUpdate:checked":Z},null,8,["checked"])])]),toolsRight:k(()=>[j(l,{value:C(ee).search,"onUpdate:value":t[1]||(t[1]=e=>C(ee).search=e),placeholder:e.$t("Waf.Site.index_2"),onSearch:me},null,8,["value","placeholder"])]),table:k(()=>[j(n,{loading:C(ne).loading,data:C(ne).data,columns:C(se)},null,8,["loading","data","columns"])]),pageRight:k(()=>[j(s,{page:C(ee).p,"onUpdate:page":t[2]||(t[2]=e=>C(ee).p=e),"page-size":C(ee).limit,"onUpdate:pageSize":t[3]||(t[3]=e=>C(ee).limit=e),"item-count":C(ne).total,"store-key":"waf-site",onRefresh:fe},null,8,["page","page-size","item-count"])]),_:1}),j(d,{class:"mt-16px"},{default:k(()=>[U("li",null,q(e.$t("Waf.Site.index_3")),1),U("li",null,q(e.$t("Waf.Site.index_4")),1)]),_:1}),j(p,{show:C(ie).show,"onUpdate:show":t[4]||(t[4]=e=>C(ie).show=e),title:C(ie).title,width:480,"min-height":688,data:C(ie).data,component:C(a)},null,8,["show","title","data","component"]),j(p,{show:C(ae).show,"onUpdate:show":t[5]||(t[5]=e=>C(ae).show=e),title:C(ae).title,data:C(ae).data,width:1e3,"min-height":552,component:C(w)},null,8,["show","title","data","component"])]),_:1})]),_:1},8,["install"])}}}))}}});
