const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/PasteConfirm.js?v=1769066082311","js/index.js?v=1769066082311","js/vue.js?v=1769066082311","js/__commonjsHelpers__.js?v=1769066082311","js/common.js?v=1769066082311","js/public.js?v=1769066082311","js/page_layout.js?v=1769066082311","js/naive.js?v=1769066082311","css/page_layout.css?v=1769066082311","css/public.css?v=1769066082311","css/index123.css?v=1769066082311","js/CalcSize.vue_vue_type_script_setup_true_lang.js?v=1769066082311","js/soft2.js?v=1769066082311","js/soft.js?v=1769066082311","js/site.js?v=1769066082311","css/CalcSize.css?v=1769066082311","js/CalcVerify.js?v=1769066082311","css/CalcVerify.css?v=1769066082311","js/PasteSingleConfirm.js?v=1769066082311","js/index.vue_vue_type_script_setup_true_lang.js?v=1769066082311","js/UploadFile.js?v=1769066082311","css/UploadFile.css?v=1769066082311","js/RemoteDownload.js?v=1769066082311","js/SearchFileContent.js?v=1769066082311","js/ResourceManagerWindow.js?v=1769066082311","css/ResourceManagerWindow.css?v=1769066082311","js/file2.js?v=1769066082311","js/index.vue_vue_type_script_setup_true_lang7.js?v=1769066082311","css/SearchFileContent.css?v=1769066082311","js/FavoriteList.js?v=1769066082311","js/ShareList.js?v=1769066082311","js/ShareDetail.vue_vue_type_script_setup_true_lang.js?v=1769066082311","js/Backup.js?v=1769066082311","js/Recycle.js?v=1769066082311","js/index.vue_vue_type_script_setup_true_lang9.js?v=1769066082311","js/index223.js?v=1769066082311","css/index45.css?v=1769066082311","css/Recycle.css?v=1769066082311","js/Terminal.js?v=1769066082311","js/terminal2.js?v=1769066082311","js/xterm.js?v=1769066082311","js/xterm-addon-canvas.js?v=1769066082311","css/xterm-addon-canvas.css?v=1769066082311","css/terminal.css?v=1769066082311","js/SoftLink.js?v=1769066082311","js/Share.js?v=1769066082311","js/index209.js?v=1769066082311","js/Permission.js?v=1769066082311","css/Permission.css?v=1769066082311","js/Properties.js?v=1769066082311","js/index114.js?v=1769066082311","css/index23.css?v=1769066082311","css/Properties.css?v=1769066082311","js/Del.js?v=1769066082311","css/Del.css?v=1769066082311","js/Compression.js?v=1769066082311","js/Decompress.js?v=1769066082311","js/index191.js?v=1769066082311","css/index93.css?v=1769066082311"])))=>i.map(i=>d[i]);
import{c0 as e,p as a,i as t,a as l,m as i,_ as n,d as o,aE as s,h as r,n as c,aa as u,T as f,q as d,u as p,c1 as m,c2 as v,c3 as h}from"./page_layout.js?v=1769066082311";import{k as y,i as k,r as _,c as b,a2 as w,V as g,a3 as x,S as C,U as z,W as P,I as R,R as S,F as O,O as D,H as E,j as F,a4 as L,ak as T,x as j,_ as M,P as I,f as V,ad as A,ae as U,o as N,an as $,av as B,G,l as W,v as K,aj as q,n as H,au as Y,w as X,u as J,b as Q,$ as Z,h as ee,a7 as ae,p as te,a0 as le,aB as ie,a6 as ne}from"./vue.js?v=1769066082311";import{F as oe,i as se,a as re,d as ce,c as ue,h as fe,b as de,e as pe,f as me,g as ve,o as he,j as ye,k as ke,l as _e,m as be,n as we,p as ge,q as xe,r as Ce,s as ze,t as Pe,v as Re,u as Se,w as Oe,x as De,y as Ee,z as Fe,A as Le,B as Te,C as je,D as Me,E as Ie,G as Ve,H as Ae,I as Ue,J as Ne,K as $e,_ as Be,L as Ge,M as We,N as Ke,O as qe,P as He,Q as Ye}from"./CalcSize.vue_vue_type_script_setup_true_lang.js?v=1769066082311";import{_ as Xe}from"./index.js?v=1769066082311";import"./common.js?v=1769066082311";import{a as Je}from"./public.js?v=1769066082311";import{dd as Qe,dm as Ze,aC as ea,dj as aa,aX as ta,au as la,av as ia,_ as na,dh as oa,di as sa,df as ra,dT as ca}from"./naive.js?v=1769066082311";import{c as ua}from"./soft2.js?v=1769066082311";import{a as fa}from"./soft.js?v=1769066082311";import{i as da}from"./file2.js?v=1769066082311";import{_ as pa}from"./index.vue_vue_type_script_setup_true_lang7.js?v=1769066082311";function ma(e){e.card_hover=!0}function va(e){e.card_hover=!1}const ha={class:"video-container"},ya=["src"],ka={class:"video-list"},_a=["onClick"],ba=a(y({__name:"VideoPlayer",setup(a){const t=k("fileStore"),{videoWaitPreview:l,previewVideoShow:i,currentPreviewVideo:n}=t,o=_(),s=_(0),r=b(()=>"/download?filename=".concat(n.value.path));function c(){s.value=o.value.offsetHeight}return(a,t)=>{const u=e,f=Xe;return g(),w(f,{show:z(i),"onUpdate:show":t[0]||(t[0]=e=>T(i)?i.value=e:null),width:"70%",title:a.$t("file.videoPlayerModal.title"),onAfterEnter:c},{default:x(()=>[C("div",ha,[C("video",{src:z(r),controls:"true",preload:"auto",width:"100%",ref_key:"videoRef",ref:o},null,8,ya),C("div",ka,[P(u,{style:R({height:z(s)+"px"})},{default:x(()=>[(g(!0),S(O,null,D(z(l),e=>(g(),S("div",{class:E(["video-item",{active:e.path==z(n).path}]),key:e.path,onClick:a=>n.value=e},[P(oe,{ext:"mp4"}),P(z(Qe),null,{default:x(()=>[F(L(e.name),1)]),_:2},1024)],10,_a))),128))]),_:1},8,["style"])])])]),_:1},8,["show","title"])}}}),[["__scopeId","data-v-6be9ab69"]]),wa=_([]),ga=_(!1),xa=_(null),Ca=_(1),{t:za}=t.global;const Pa={class:"drag-upload"},Ra={class:"upload-area"},Sa={class:"tip"},Oa=a(y({__name:"DragUpload",setup(e,{expose:a}){const{t:t}=I(),l=k("fileStore"),{uploadFileList:n,uploadShow:o,uploadComplete:s,startUpload:r}=l,c=_(!1),u=_(0);function f(e){const a=e.dataTransfer;return!!a&&a.types.some(e=>"Files"===e||"application/x-moz-file"===e)}function d(e){e.preventDefault(),f(e)&&(u.value++,c.value=!0)}function p(e){e.preventDefault(),f(e)&&(u.value--,u.value<=0&&(c.value=!1,u.value=0))}function m(e){e.preventDefault(),f(e)&&(e.dataTransfer.dropEffect="copy")}async function v(e){const a=[];for(let t=0;t<e.length;t++){const l=e[t].webkitGetAsEntry();l&&a.push(l)}await h(a)&&i.error(t("file.uploadModal.fileAlreadyExists"),{close:!0})}async function h(e,a=""){s.value&&(n.value=[],r.value=!1,s.value=!1);let t=!1;for(const l of e)if(l.isDirectory){const e=l.createReader(),i=await new Promise(a=>{e.readEntries(a)});await h(i,a?"".concat(a,"/").concat(l.name):l.name)&&(t=!0)}else if(l.isFile){if(-1!=n.value.findIndex(e=>b("".concat(e.relativePath,"/").concat(e.file.name))==b(l.fullPath))){t=!0;continue}const e=await new Promise(e=>{l.file(e)});n.value.push({file:e,status:0,progress:0,relativePath:a?"".concat(a):""})}return t}async function y(e){var a;e.preventDefault(),f(e)&&(u.value=0,c.value=!1,(null==(a=e.dataTransfer)?void 0:a.items)&&(await v(e.dataTransfer.items),ce(l,"UploadFile"),o.value=!0))}function b(e){return e.startsWith("/")?e.slice(1):e}function w(){document.ondragenter=d,document.ondragleave=p,document.ondragover=m,document.ondrop=y}return ce(l,"UploadFile"),a({listenDragEvent:w}),V(()=>{w()}),(e,a)=>{const t=Ze;return g(),S("div",Pa,[P(t,{show:z(c),"onUpdate:show":a[0]||(a[0]=e=>T(c)?c.value=e:null)},{default:x(()=>[C("div",Ra,[C("span",Sa,L(e.$t("file.uploadModal.dragFilesHere")),1)])]),_:1},8,["show"])])}}}),[["__scopeId","data-v-90e8c7cf"]]),Da={class:"img-wrapper"},Ea=["src"],Fa=a(y({__name:"ImagePreview",setup(e){const a=k("fileStore"),{imgWaitPreview:t,currentPreviewImg:l,previewShow:i}=a,n=_(.5),o=b(()=>"/download?filename=".concat(t.value[s.value])),s=_(0);function r(){s.value=t.value.findIndex(e=>e===l.value)}function c(){s.value>0&&s.value--}function u(){s.value<t.value.length-1&&s.value++}function f(){n.value>2||(n.value+=.1)}function d(){n.value<.2||(n.value-=.1)}function p(){i.value=!1}function m(e){n.value-e.deltaY/1e3<.2||n.value-e.deltaY/1e3>2||(n.value-=e.deltaY/1e3)}return(e,a)=>{const t=Ze;return g(),w(t,{show:z(i),"onUpdate:show":a[0]||(a[0]=e=>T(i)?i.value=e:null),"close-on-esc":!1,"mask-closable":!1,"on-after-enter":r},{default:x(()=>[C("div",Da,[C("img",{src:z(o),style:R({transform:"translate(-50%, -50%) scale(".concat(z(n),")")}),onWheel:m},null,44,Ea),C("div",{class:"tools"},[C("i",{class:"i-ic:outline-arrow-circle-left text-16 text-[#fff] cursor-pointer",onClick:c}),C("i",{class:"i-ic:baseline-zoom-in text-16 text-[#fff] cursor-pointer",onClick:f}),C("i",{class:"i-ic:baseline-zoom-out text-16 text-[#fff] cursor-pointer",onClick:d}),C("i",{class:"i-ic:outline-arrow-circle-right text-16 text-[#fff] cursor-pointer",onClick:u})]),C("i",{class:"i-iconoir:xmark-circle text-16 text-[#fff] cursor-pointer close-icon",onClick:p})])]),_:1},8,["show"])}}}),[["__scopeId","data-v-7045f818"]]),La={key:0,class:"group-left"},Ta={key:1,class:"group-left"},ja={class:"group-right"},Ma={class:"view-change"},Ia=a(y({__name:"ButtonGroup",props:{filesView:{type:String,default:"list"},filesViewModifiers:{}},emits:A(["viewChange"],["update:filesView"]),setup(e,{emit:a}){const t=a,{t:l}=I(),i=k("fileStore"),{favoriteOptions:s,choosedKeys:r,waitForPaste:c,optionToolsRef:u,isMiniScreen:f}=i,d=U(e,"filesView"),p=b(()=>[{label:l("file.buttonGroup.createOptions.newDirectory"),key:"dir",icon:()=>P(n,{name:"file-dir",size:"16"},null)},{label:l("file.buttonGroup.createOptions.newFile"),key:"file",icon:()=>P(n,{name:"base-file",size:"16"},null)},{label:l("file.buttonGroup.createOptions.softLink"),key:"softlink",icon:()=>P(n,{name:"file-soft-link",size:"15"},null)}]),m=b(()=>[{label:l("file.buttonGroup.miniScreenOptions.upload"),key:"Upload",icon:()=>P(n,{name:"file-upload",size:"14"},null)},{label:l("file.buttonGroup.miniScreenOptions.remoteDownload"),key:"Remote Download",icon:()=>P(n,{name:"file-download",size:"16"},null)},{label:l("file.buttonGroup.miniScreenOptions.new"),key:"create",icon:()=>P(n,{name:"base-dir",size:"14",class:"mr-5px"},null),children:[{label:l("file.buttonGroup.createOptions.newDirectory"),key:"dir",icon:()=>P(n,{name:"file-dir",size:"16"},null)},{label:l("file.buttonGroup.createOptions.newFile"),key:"file",icon:()=>P(n,{name:"base-file",size:"16"},null)},{label:l("file.buttonGroup.createOptions.softLink"),key:"softlink",icon:()=>P(n,{name:"file-soft-link",size:"15"},null)}]},{label:l("file.buttonGroup.miniScreenOptions.searchFileContent"),key:"Search File Content",icon:()=>P(n,{name:"search",size:"14"},null)},{label:l("file.buttonGroup.miniScreenOptions.favorite"),key:"Favorite",icon:()=>P(n,{name:"file-favorite",size:"14",class:"mr-5px"},null),children:h.value},{label:l("file.buttonGroup.miniScreenOptions.shareList"),key:"Share List",icon:()=>P(n,{name:"file-share",size:"14"},null)},{label:l("file.buttonGroup.miniScreenOptions.terminal"),key:"Terminal",icon:()=>P(n,{name:"file-terminal",size:"14"},null)},{label:l("file.buttonGroup.miniScreenOptions.rootDirectory"),key:"Root Directory",icon:()=>P(n,{name:"file-disk",size:"14"},null)},{label:l("file.buttonGroup.miniScreenOptions.fileProtection"),key:"File/Dir protection",icon:()=>P(n,{name:"file-protect",size:"14"},null)}]);function v(e,a){switch(e){case"Upload":fe(i);break;case"Remote Download":de(i);break;case"dir":pe(i,"dir");break;case"file":pe(i,"file");break;case"softlink":pe(i,"softlink");break;case"Search File Content":me(i);break;case"Share List":ye(i);break;case"Terminal":ke(i);break;case"Root Directory":_e(i);break;case"File/Dir protection":y();break;default:!function(e,a){ve(i,e,a.meta)}(e,a)}}const h=b(()=>s.value.map(e=>({key:e.key,icon:()=>{return P(n,{name:(a=e.icon,"dir"==a?"file-dir":"settings"==a?"flow-action":"file-record"),size:"16"},null);var a},label:()=>P("div",{class:"flex"},[P("div",{class:"max-w-300px"},[P(Qe,null,{default:()=>[e.label]})])]),meta:{type:e.icon,name:e.label}}))),y=async()=>{const e=await ua("tamper_core",75);o(e)&&fa(e)};function _(){ce(i,"Permission",e=>e.value.open())}function R(){Pe(i)}function O(e){Re(i,e),t("viewChange",e)}return N(()=>{ue(i),window.addEventListener("resize",()=>ue(i))}),(e,a)=>{const t=n,l=ea,o=aa,s=ta;return g(),S("div",{class:"button-group",ref_key:"optionToolsRef",ref:u},[!z(f)&&z(r).length<=1?(g(),S("div",La,[P(l,{onClick:a[0]||(a[0]=e=>z(fe)(z(i)))},{icon:x(()=>[P(t,{name:"file-upload",size:"14"})]),default:x(()=>[F(" "+L(e.$t("file.upload")),1)]),_:1}),P(l,{onClick:a[1]||(a[1]=e=>z(de)(z(i)))},{icon:x(()=>[P(t,{name:"file-download",size:"16"})]),default:x(()=>[F(" "+L(e.$t("file.remoteDownload")),1)]),_:1}),P(o,{trigger:"hover",options:z(p),placement:"bottom-start","on-select":e=>z(pe)(z(i),e)},{default:x(()=>[P(l,{"icon-placement":"right",class:"btn-behavior"},{default:x(()=>[P(t,{name:"base-dir",size:"14",class:"mr-5px"}),F(" "+L(e.$t("file.create"))+" ",1),P(t,{name:"base-arrow-right",size:"14"})]),_:1})]),_:1},8,["options","on-select"]),P(l,{onClick:a[2]||(a[2]=e=>z(me)(z(i)))},{icon:x(()=>[P(t,{name:"search",size:"14"})]),default:x(()=>[F(" "+L(e.$t("file.searchContent")),1)]),_:1}),P(o,{placement:"bottom-start",scrollable:!0,style:{maxHeight:"480px"},options:z(h),onSelect:a[4]||(a[4]=(e,a)=>z(ve)(z(i),e,a.meta))},{default:x(()=>[P(l,{"icon-placement":"right",class:"btn-behavior",onClick:a[3]||(a[3]=e=>z(he)(z(i)))},{default:x(()=>[P(t,{name:"file-favorite",size:"14",class:"mr-5px"}),F(" "+L(e.$t("file.favorite"))+" ",1),P(t,{name:"base-arrow-right",size:"14"})]),_:1})]),_:1},8,["options"]),P(l,{onClick:a[5]||(a[5]=e=>z(ye)(z(i)))},{icon:x(()=>[P(t,{name:"file-share",size:"14"})]),default:x(()=>[F(" "+L(e.$t("file.shareList")),1)]),_:1}),P(l,{onClick:a[6]||(a[6]=e=>z(ke)(z(i)))},{icon:x(()=>[P(t,{name:"file-terminal",size:"14"})]),default:x(()=>[F(" "+L(e.$t("file.terminal")),1)]),_:1}),a[16]||(a[16]=C("div",{class:"divider"},null,-1)),P(l,{onClick:a[7]||(a[7]=e=>z(_e)(z(i)))},{icon:x(()=>[P(t,{name:"file-disk",size:"14"})]),default:x(()=>[F(" "+L(e.$t("file.rootDirectory")),1)]),_:1}),a[17]||(a[17]=C("div",{class:"divider"},null,-1)),P(l,{onClick:y},{icon:x(()=>[P(t,{name:"file-protect",size:"14"})]),default:x(()=>[F(" "+L(e.$t("file.protection")),1)]),_:1})])):z(f)||z(r).length>1?(g(),S("div",Ta,[P(o,{placement:"bottom-start",scrollable:!0,"menu-props":()=>({style:"max-height: 480px"}),options:z(m),"on-select":v},{default:x(()=>[P(l,{"icon-placement":"right",class:"btn-behavior"},{default:x(()=>[P(t,{name:"base-dir",size:"14",class:"mr-5px"}),F(" "+L(e.$t("file.buttonGroup.fileOperations"))+" ",1),P(t,{name:"base-arrow-right",size:"14"})]),_:1})]),_:1},8,["options"])])):$("",!0),C("div",ja,[z(r).length>1?(g(),w(s,{key:0},{default:x(()=>[P(l,{onClick:a[8]||(a[8]=e=>z(be)(z(i)))},{icon:x(()=>[P(t,{name:"common-copy",size:"16"})]),default:x(()=>[F(" "+L(e.$t("file.copy")),1)]),_:1}),P(l,{onClick:a[9]||(a[9]=e=>z(we)(z(i)))},{icon:x(()=>[P(t,{name:"file-cut",size:"16"})]),default:x(()=>[F(" "+L(e.$t("file.cut")),1)]),_:1}),P(l,{onClick:a[10]||(a[10]=e=>z(ge)(z(i)))},{icon:x(()=>[P(t,{name:"file-compression",size:"16"})]),default:x(()=>[F(" "+L(e.$t("file.compress")),1)]),_:1}),P(l,{onClick:_},{icon:x(()=>[P(t,{name:"file-dir-permission",size:"16"})]),default:x(()=>[F(" "+L(e.$t("file.buttonGroup.permissions")),1)]),_:1}),P(l,{onClick:R},{icon:x(()=>[P(t,{name:"file-recycling-bin",size:"16"})]),default:x(()=>[F(" "+L(e.$t("file.delete")),1)]),_:1})]),_:1})):$("",!0),z(c)?(g(),w(l,{key:1,onClick:a[11]||(a[11]=()=>z(xe)(z(i)))},{icon:x(()=>[P(t,{name:"file-paste",size:"20"})]),default:x(()=>[F(" "+L(e.$t("file.paste")),1)]),_:1})):$("",!0),P(l,{onClick:a[12]||(a[12]=e=>z(Ce)(z(i)))},{default:x(()=>[F(L(e.$t("file.backup")),1)]),_:1}),P(l,{onClick:a[13]||(a[13]=e=>z(ze)(z(i)))},{icon:x(()=>[P(t,{name:"file-recycling-bin",size:"14"})]),default:x(()=>[F(" "+L(e.$t("file.recycleBin")),1)]),_:1}),C("div",Ma,[C("div",{class:E(["card",{active:"card"==d.value}]),onClick:a[14]||(a[14]=e=>O("card"))},[P(t,{name:"file-card-view",size:"14"})],2),C("div",{class:E(["list",{active:"list"==d.value}]),onClick:a[15]||(a[15]=e=>O("list"))},[P(t,{name:"file-list-view",size:"16"})],2)])])],512)}}}),[["__scopeId","data-v-c747adc9"]]),Va={class:"path-dir"},Aa={class:"path-arrow reversal"},Ua={class:"path-dir"},Na={class:"path-arrow"},$a=["onClick"],Ba={class:"path-dir"},Ga={class:"path-arrow"},Wa=a(y({__name:"ChoosePath",props:{currentPath:{type:String,default:"/"}},emits:["pathChange"],setup(e,{expose:a,emit:t}){const l=e,i=t,{t:r}=I(),c=k("fileStore"),u=_(""),f=B("pathListRef"),d=_(0),p=b(()=>l.currentPath.split("/").filter(e=>""!==e).map((e,a)=>({name:e,originalIndex:a}))),m=b(()=>{if(!d.value||0===p.value.length)return p.value;let e=d.value-80;const a=[...p.value].reverse(),t=[];for(const l of a){const a=Math.min(8*l.name.length,150)+20+12;if(!(e>=a))break;t.unshift(l),e-=a}return t}),v=b(()=>m.value.length<p.value.length),h=b(()=>{const e=p.value.length-m.value.length;return p.value.slice(0,e)}),y=b(()=>{const e=h.value.map(e=>({key:e.originalIndex,label:e.name,icon:()=>P(n,{name:"file-dir",size:"16"},null)}));return e.unshift({key:"/",label:r("file.rootDirectory"),icon:()=>P(n,{name:"file-dir",size:"16"},null)}),e}),R=e=>{$(e)},E=_(!0),j=B("inputRef");let M=null;function V(){f.value&&(d.value=f.value.offsetWidth)}function A(e){E.value=e,E.value?(u.value="",H(()=>{V()})):u.value=l.currentPath}N(()=>{f.value&&(V(),M=new ResizeObserver(()=>{V()}),M.observe(f.value))}),G(()=>{M&&M.disconnect()});const U=()=>{A(!1),H(()=>{var e;null==(e=j.value)||e.focus()})};function $(e,a){const t=l.currentPath.split("/").filter(e=>""!==e);let n="";"number"==typeof e&&(t.splice(e+1),n="/"+t.join("/")),"/"==e&&(n="/"),i("pathChange",n),null==a||a.stopPropagation()}async function Y(){var e;if(u.value==l.currentPath||""==u.value)null==(e=j.value)||e.blur(),A(!0);else if(da(u.value))try{const{message:e}=await s.post("/files?action=test_path",{path:u.value});if(o(e)&&e.exists)i("pathChange",e.path),A(!0);else{let e=u.value;Je({title:r("file.pathNotExists"),content:r("file.pathNotExistsConfirm",{path:e}),onPublicClose:()=>A(!1),onConfirm:async()=>{await Se(e),i("pathChange",e)},onCancel(){var e;null==(e=j.value)||e.blur(),A(!0)}})}}catch(a){console.warn(a)}else A(!1)}function X(){const e=l.currentPath.split("/").filter(e=>""!==e);if(0!=e.length){e.pop();let a="/"+e.join("/");i("pathChange",a)}}function J(){Oe(c)}return a({handleEnterDown:Y}),(e,a)=>{const t=ea,l=aa,i=Qe,o=la,s=ia;return g(),w(s,null,{default:x(()=>[P(t,{onClick:X},{default:x(()=>[P(n,{name:"file-back",size:"16"})]),_:1}),z(E)?(g(),S("div",{key:0,ref_key:"pathListRef",ref:f,class:"path-list",onClick:U},[P(l,{trigger:"click",placement:"bottom-start",options:z(y),onSelect:R},{default:x(()=>[W(C("div",{class:"path-item",onClick:a[0]||(a[0]=e=>e.stopPropagation())},[C("div",Va,[P(n,{name:"file-dir",size:"16"})]),C("div",Aa,[P(n,{name:"base-arrow-right"})])],512),[[K,z(v)]])]),_:1},8,["options"]),W(C("div",{class:"path-item",onClick:a[1]||(a[1]=e=>$("/",e))},[C("div",Ua,L(e.$t("file.rootDirectory")),1),C("div",Na,[P(n,{name:"base-arrow-right"})])],512),[[K,!z(v)]]),(g(!0),S(O,null,D(z(m),(e,a)=>(g(),S("div",{class:"path-item",key:"".concat(e,"_").concat(a),onClick:a=>$(e.originalIndex,a)},[C("div",Ba,[P(i,{class:"max-w-150px!"},{default:x(()=>[F(L(e.name),1)]),_:2},1024)]),C("div",Ga,[P(n,{name:"base-arrow-right"})])],8,$a))),128))],512)):(g(),w(o,{key:1,ref_key:"inputRef",ref:j,value:z(u),"onUpdate:value":a[2]||(a[2]=e=>T(u)?u.value=e:null),class:"flex-1",placeholder:" ",onFocus:a[3]||(a[3]=e=>A(!1)),onBlur:a[4]||(a[4]=e=>A(!0)),onKeydown:q(Y,["enter"])},null,8,["value"])),P(t,{onClick:J},{default:x(()=>[P(n,{name:"base-refresh",size:"16"})]),_:1})]),_:1})}}}),[["__scopeId","data-v-ca757f3c"]]),Ka={class:"filter-tools"},qa=a(y({__name:"SearchTools",setup(e){const a=k("fileStore"),{currentPath:t}=a,l=_(""),i=_(void 0),{choosePathRef:o}=a;async function s(){const e={search:l.value};a.page.value=1,i.value&&(e.all="True"),Oe(a,e)}function r(e){t.value=e,a.page.value=1,Oe(a)}return(e,a)=>{const c=na,u=la,f=n,d=ea,p=ia;return g(),S("div",Ka,[P(Wa,{ref_key:"choosePathRef",ref:o,class:"w-50%","current-path":z(t),onPathChange:r},null,8,["current-path"]),P(p,{class:"dir-search"},{default:x(()=>[P(u,{placeholder:e.$t("file.search"),status:"success",value:z(l),"onUpdate:value":a[1]||(a[1]=e=>T(l)?l.value=e:null),onKeyup:q(s,["enter"])},{suffix:x(()=>[P(c,{checked:z(i),"onUpdate:checked":a[0]||(a[0]=e=>T(i)?i.value=e:null)},{default:x(()=>[F(L(e.$t("file.includeSubdir")),1)]),_:1},8,["checked"])]),_:1},8,["placeholder","value"]),P(d,{type:"primary",onClick:s},{icon:x(()=>[P(f,{name:"search",size:"16"})]),_:1})]),_:1})])}}}),[["__scopeId","data-v-7bef8870"]]),Ha=y({__name:"ContextMenu",setup(e,{expose:a}){const{t:t}=I(),{addTab:l}=k("file-provide"),i=k("fileStore"),{waitForPaste:o}=i,s=_(!1),r=_("empty"),c=_(0),u=_(1),f=b(()=>{switch(r.value){case"single":return Ee(i,p);case"multiple":return De(p.value,["copy","cut","permission","compression","del"]);default:return o.value?De(p.value,["refresh","upload","create","terminal","paste"]):De(p.value,["refresh","upload","create","terminal"])}});function d(e){if("openNewWindow"===e)!function(){const{choosedKeys:e,fileList:a}=i,t=Le(a.value,e.value)[0];t&&l(t.path,t.nm)}();Fe(e,i),s.value=!1}const p=_({edit:{label:t("Public.Btn.Edit"),key:"edit",icon:()=>P(n,{name:"common-copy",size:"14"},null)},copy:{label:t("Public.Btn.Copy"),key:"copy",icon:()=>P(n,{name:"common-copy",size:"14"},null)},copyPath:{label:"Copy Path",key:"copyPath",icon:()=>P(n,{name:"common-copy",size:"14"},null)},cut:{label:t("file.fileOperation.cut"),key:"cut",icon:()=>P(n,{name:"file-cut",size:"16"},null)},permission:{label:t("file.fileOperation.permission"),key:"permission",icon:()=>P(n,{name:"file-dir-permission",size:"14"},null)},compression:{label:t("file.contextMenu.createCompression"),key:"compression",icon:()=>P(n,{name:"file-compression",size:"16"},null)},decompress:{label:t("file.fileOperation.decompress"),key:"decompress",icon:()=>P(n,{name:"file-compression",size:"16"},null)},conversion:{label:t("file.contextMenu.formatConversion"),key:"conversion",icon:()=>P(n,{name:"file-conversion",size:"16"},null)},del:{label:t("Public.Btn.Delete"),key:"del",icon:()=>P(n,{name:"file-recycling-bin",size:"16"},null)},refresh:{label:t("Public.Btn.Refresh"),key:"refresh",icon:()=>P(n,{name:"base-refresh",size:"14"},null)},upload:{label:t("Public.Btn.Upload"),key:"upload",icon:()=>P(n,{name:"file-upload",size:"16"},null)},create:{label:t("file.contextMenu.newFolderFile"),key:"create",icon:()=>P(n,{name:"base-dir",size:"14"},null),children:[{label:t("file.contextMenu.newFolder"),key:"createDir",icon:()=>P(n,{name:"base-dir",size:"14"},null)},{label:t("file.contextMenu.newFile"),key:"createFile",icon:()=>P(n,{name:"base-file",size:"14"},null)}]},download:{label:t("Public.Btn.Download"),key:"download",icon:()=>P(n,{name:"file-download",size:"16"},null)},terminal:{label:t("file.contextMenu.terminal"),key:"terminal",icon:()=>P(n,{name:"file-terminal",size:"16"},null)},paste:{label:t("file.contextMenu.paste"),key:"paste",icon:()=>P(n,{name:"file-paste",size:"16"},null)},open:{label:t("file.fileOperation.open"),key:"open",icon:()=>P(n,{name:"file-open",size:"16"},null)},openNewWindow:{label:t("file.contextMenu.openInNewWindow"),key:"openNewWindow",icon:()=>P(n,{name:"file-new-window",size:"14"},null)},share:{label:t("file.contextMenu.externalShare"),key:"share",icon:()=>P(n,{name:"file-share",size:"16"},null)},unShare:{label:t("file.contextMenu.cancelShare"),key:"unShare",icon:()=>P(n,{name:"file-share",size:"16"},null)},favorite:{label:t("file.contextMenu.addToFavorites"),key:"favorite",icon:()=>P(n,{name:"file-favorite",size:"14"},null)},unfavorite:{label:t("file.contextMenu.removeFromFavorites"),key:"unfavorite",icon:()=>P(n,{name:"file-favorite",size:"14"},null)},rename:{label:t("file.fileOperation.rename"),key:"rename",icon:()=>P(n,{name:"file-rename",size:"16"},null)},attrs:{label:t("file.contextMenu.properties"),key:"attrs",icon:()=>P(n,{name:"file-attrs",size:"16"},null)},"new-window":{label:t("file.contextMenu.openInNewWindow"),key:"new-window",icon:()=>P(n,{name:"file-new-window",size:"14"},null)},top:{label:t("file.contextMenu.pinToTop"),key:"top",icon:()=>P(n,{name:"file-top",size:"18"},null)},"file-sync":{label:t("file.contextMenu.fileSync"),key:"file-sync",icon:()=>P(n,{name:"common-copy",size:"16"},null)},scan:{label:t("file.contextMenu.malwareScan"),key:"scan",icon:()=>P(n,{name:"file-scan",size:"16"},null)},duplicate:{label:t("file.contextMenu.createCopy"),key:"duplicate",icon:()=>P(n,{name:"common-copy",size:"16"},null)},preview:{label:t("Public.Btn.Preview"),key:"preview",icon:()=>P(n,{name:"drag-preview",size:"14"},null)},playVideo:{label:t("Public.Btn.Play"),key:"playVideo",icon:()=>P(n,{name:"file-play-video",size:"16"},null)}});function m(){s.value=!1}return a({filesOperation:function(e,a){e.preventDefault(),s.value=!1,r.value=a,H().then(()=>{s.value=!0,c.value=e.clientX,u.value=e.clientY})}}),(e,a)=>{const t=aa;return g(),w(t,{placement:"bottom-start",trigger:"manual",x:z(c),y:z(u),options:z(f),show:z(s),"on-clickoutside":m,onSelect:d},null,8,["x","y","options","show"])}}}),Ya={key:0,class:"operation-wrapper"},Xa={class:"mr-4px"},Ja={class:"mr-4px"},Qa=a(y({__name:"FileOperation",props:{file:{}},setup(e){const a=e,t=_(),l=k("fileStore"),{isMiniScreen:i}=l,{t:o}=I(),s=_([{label:o("Public.Btn.Download"),value:"download",handle:()=>Fe("download",l)},{label:o("Public.Btn.Copy"),value:"copy",handle:()=>Fe("copy",l)},{label:o("file.fileOperation.cut"),value:"cut",handle:()=>Fe("cut",l)},{label:o("file.fileOperation.rename"),value:"rename",handle:()=>Fe("rename",l)},{label:o("file.fileOperation.PMSN"),value:"permission",handle:()=>Fe("permission",l)},{label:o("file.fileOperation.compress"),value:"compress",handle:()=>Fe("compression",l)},{label:o("Public.Btn.Delete"),value:"delete",handle:()=>Fe("del",l)}]);b(()=>s.value.map(e=>({label:e.label,key:e.value,handle:e.handle})));const r=b(()=>{if(se(a.file))return[{label:o("Public.Btn.Preview"),value:"preview",handle:()=>Te(l,a.file.path)},...s.value];if("dir"===a.file.type){const e=[...s.value],a=e.findIndex(e=>"download"==e.value);return e.splice(a,1),[{label:o("file.fileOperation.open"),value:"open",handle:()=>Fe("open",l)},...e]}if(je(a.file))return[{label:o("Public.Btn.Edit"),value:"edit",handle:()=>Fe("edit",l)},...s.value];if(Me(a.file.ext)){const e=[...s.value];return e.splice(-2,0,{label:o("file.fileOperation.decompress"),value:"decompress",handle:()=>Fe("decompress",l)}),e}return s.value});function c(e){!function(e,a){const{choosedKeys:l}=a;let i="empty";e.target.closest("tr")&&(i=l.value.length>1?"multiple":1==l.value.length?"single":"empty"),H(()=>t.value.filesOperation(e,i))}(e,l)}return(e,a)=>{const l=ea,o=n;return g(),S(O,null,[z(i)?(g(),w(l,{key:1,text:"","icon-placement":"right",onClick:c},{default:x(()=>[C("span",Ja,L(e.$t("Public.Table.Action")),1),P(o,{name:"down",size:"14"})]),_:1})):(g(),S("div",Ya,[(g(!0),S(O,null,D(z(r),e=>(g(),w(l,{key:e.value,text:"",type:"primary",onClick:Y(e.handle,["stop"])},{default:x(()=>[F(L(e.label),1)]),_:2},1032,["onClick"]))),128)),P(l,{text:"","icon-placement":"right",onClick:c},{default:x(()=>[C("span",Xa,L(e.$t("Public.Btn.More")),1),P(o,{name:"down",size:"14"})]),_:1})])),P(Ha,{ref_key:"fileOperationContextRef",ref:t},null,512)],64)}}}),[["__scopeId","data-v-8101ae96"]]);const Za=a(y({__name:"FileTable",setup(e){const a=k("fileStore"),{sort:t,reverse:l,tableRef:i,fileList:o,choosedKeys:s,tableLoading:f,contextRef:d,currentFile:p,dataTableRef:m}=a,v=_({}),h=e=>e.nm,y=e=>({"data-key":e.nm,onContextmenu(e){e.preventDefault(),Ae(e,a)},onDblclick(){Ve(a,e)},onMouseenter(){e.operation_show=!0},onMouseleave(){e.operation_show=!1}}),b=e=>s.value.includes(e.nm)?"active-row normal-tr-".concat(e.nm):"normal-tr-".concat(e.nm),{t:w}=I(),x=_([{type:"selection",width:40,className:"file-checkbox",cellProps:()=>({style:{cursor:"pointer"}})},{title:()=>w("file.fileName"),key:"name",width:"22%",minWidth:164,sorter:!0,sortOrder:!1,render:e=>e.isCreate?P("div",{class:"flex justify-between items-center gap-2.5 w-100%"},[P("div",{class:"flex justify-start items-center"},[P(oe,{ext:e.ext},null),P(la,{"input-props":{autocomplete:"on",name:"filename"},value:e.editName,"onUpdate:value":a=>e.editName=a,autofocus:!0,id:"createInput",onKeydown:e=>{"Enter"===e.key&&(e.preventDefault(),Ue(a))},onBlur:()=>{Ue(a)}},null)])]):P("div",{class:"flex cursor-pointer",onClick:()=>Ne(a,e)},[P("div",{class:"flex-1 flex items-center w-0 gap-4px"},[P("div",{class:"flex-1 w-0 flex items-center"},[P("div",{class:"flex items-center"},[P(oe,{ext:e.ext},null)]),P("div",{class:"min-w-0"},[P(Qe,null,{default:()=>[P("span",{class:"hover:text-primary cursor-pointer"},[e.lnk?e.nm+e.lnk:e.nm])]})])]),P("div",{class:"flex items-center gap-4px"},[e.isShare?P(n,{name:"file-share",size:"16"},null):null,e.isFavorite?P(n,{name:"file-favorite",size:"16"},null):null])])])},{title:()=>w("file.protected"),key:"protection",width:"8%",minWidth:114,render:e=>P("div",{class:"flex justify-start gap-4px items-center cursor-pointer",onClick:()=>$e(a,e)},[P("span",{class:1===e.protected?"text-primary":""},[1==e.protected?w("file.protectedStatus"):w("file.unprotectedStatus")]),P(n,{size:"14",name:1==e.protected?"file-lock":"file-unlock",class:1===e.protected?"text-primary":"text-weak"},null)])},{title:"PMSN/Owner",key:"accept",width:"8%",minWidth:108,sorter:!0,sortOrder:!1,render:e=>"".concat(e.acc," / ").concat(e.user)},{title:()=>w("file.size"),key:"size",width:"7%",minWidth:90,sorter:!0,sortOrder:!1,render(e){if("dir"===e.type)return P(Be,{path:e.path},null);{let t;return P(ea,{type:"primary",text:!0},"function"==typeof(a=t=c(e.sz))||"[object Object]"===Object.prototype.toString.call(a)&&!J(a)?t:{default:()=>[t]})}var a}},{title:()=>w("file.modifyTime"),key:"mtime",width:"10%",minWidth:140,sorter:!0,sortOrder:!1,render:e=>u(e.mt)},{title:()=>w("file.remarks"),key:"rmk",minWidth:164,render:e=>P("div",{class:"min-w-134px min-h-26px",onMouseenter:()=>{return(a=e).remarks_hover=!0,void(a.editRemarks=a.rmk);var a},onMouseleave:()=>{var a;(a=e).isEditRemarks||(a.remarks_hover=!1)}},[e.remarks_hover?P(la,{value:e.editRemarks,"onUpdate:value":a=>e.editRemarks=a,size:"small",onClick:a=>{a.preventDefault(),e.isEditRemarks=!0,v.value=e,p.value=e,p.value.editRemarks=e.rmk,p.value.isEditRemarks=!0},onBlur:()=>{Ue(a)},onKeydown:e=>{"Enter"===e.key&&(e.preventDefault(),Ue(a))}},null):P("span",{title:e.rmk},[e.rmk])])},{title:()=>w("file.operation"),key:"operation",width:"22%",maxWidth:340,align:"right",render(e){if(e.operation_show||s.value.includes(e.nm))return P(Qa,{file:e},null)}}]),R=e=>{x.value.forEach(a=>{const t=a;t.key===e.columnKey?t.sortOrder=e.order:t.sortOrder=!1}),r(e.order)?(l.value="ascend"===e.order?"False":"True",t.value="".concat(e.columnKey)):(t.value="",l.value="False"),Oe(a)};function D(e){s.value=e}return X(s,()=>ue(a)),N(()=>{Ie(a),i.value.oncontextmenu=e=>{e.preventDefault(),e.target.closest("tr")||(s.value.length,d.value.filesOperation(e))}}),(e,a)=>{const t=oa;return g(),S(O,null,[C("div",{ref_key:"tableRef",ref:i,class:"h-full relative"},[P(t,{class:"h-full",ref_key:"dataTableRef",ref:m,"flex-height":"",columns:z(x),"row-key":h,data:z(o),"row-class-name":b,"on-update:checked-row-keys":D,"row-props":y,"checked-row-keys":z(s),loading:z(f),"scrollbar-props":{trigger:"none"},"onUpdate:sorter":R},null,8,["columns","data","checked-row-keys","loading"])],512),P(Ha,{ref_key:"contextRef",ref:d},null,512)],64)}}}),[["__scopeId","data-v-14098e72"]]),et={class:"h-full overflow-auto"},at=["onMouseenter","onMouseleave","onClick","data-key","onContextmenu","onDblclick"],tt={class:"single-line-ellipsis"},lt=["onMouseenter","onMouseleave","onClick","data-key","onContextmenu"],it=a(y({__name:"CardList",setup(e){const a=k("fileStore"),{normalCardList:t,cardRectArr:l,fileList:i,choosedKeys:n,tableLoading:o,currentFile:s}=a,r=_(),c=_(),u=_();X(s,e=>{(null==e?void 0:e.isCreate)&&H(()=>{const e=c.value.querySelector("input");e&&(e.focus(),e.select())})});const d=b(()=>i.value.map(e=>(n.value.includes(e.nm)?e.card_choosed=!0:e.card_choosed=!1,e)));async function p(e){e.isRenameForCard||(n.value=[e.nm],"dir"===e.type&&await We(a))}function m(e){const a=[];for(let t=0;t<l.value.length;t++){const[[i,n]]=Object.entries(l.value[t]);qe(e,n.getClientRects()[0])&&a.push(i)}n.value=a}function v(e,i){!function(){t.value=document.querySelectorAll(".file-item");const e=[];for(let a=0;a<t.value.length;a++){const l=t.value[a].dataset.key;e.push({[l]:t.value[a]})}l.value=e}(),"INPUT"==e.target.nodeName?i.m_flag.value=!1:(i.m_flag.value=!0,Ue(a))}function h(e){if(e.target.closest("div.file-item")){const a=e.target.closest("div.file-item").dataset.key;if(n.value.includes(a))return;n.value=[a]}else n.value=[]}function y(e,a){n.value.length>1?r.value.filesOperation(e,"multiple"):(1==n.value.length||(n.value=[a.nm]),r.value.filesOperation(e,"single"))}return N(()=>{u.value=Ge(c,m,v),c.value.oncontextmenu=e=>{e.preventDefault(),e.target.closest("div.file-item")||(n.value.length,r.value.filesOperation(e))}}),Q(()=>{c.value.oncontextmenu=null}),(e,t)=>{const l=sa,i=la,s=f;return g(),S("div",et,[P(s,{show:z(o),class:"h-full"},{default:x(()=>[C("div",{class:"card-list",ref_key:"cardListRef",ref:c,onContextmenu:h},[(g(!0),S(O,null,D(z(d),e=>(g(),S(O,{key:e.nm},[e.isRenameForCard||e.isCreate?e.isRenameForCard||e.isCreate?(g(),S("div",{key:1,class:E(["file-item",{active:e.card_hover||e.card_choosed}]),onMouseenter:a=>z(ma)(e),onMouseleave:a=>z(va)(e),onClick:a=>p(e),"data-key":e.nm,onContextmenu:a=>y(a,e)},[P(oe,{ext:e.ext,size:"large"},null,8,["ext"]),P(i,{value:e.editName,"onUpdate:value":a=>e.editName=a,size:"small",autofocus:"",autoselect:"",onClick:Y(()=>!1,["stop"]),onKeydown:t[0]||(t[0]=q(()=>z(Ue)(z(a)),["enter"]))},null,8,["value","onUpdate:value"])],42,lt)):$("",!0):(g(),w(l,{key:0,trigger:"hover",placement:"bottom"},{trigger:x(()=>[C("div",{class:E(["file-item",{active:e.card_hover||e.card_choosed}]),onMouseenter:a=>z(ma)(e),onMouseleave:a=>z(va)(e),onClick:a=>p(e),"data-key":e.nm,onContextmenu:a=>y(a,e),onDblclick:t=>function(e){e.isRenameForCard||"dir"!==e.type&&(n.value=[e.nm],Ke(a))}(e)},[P(oe,{ext:e.ext,size:"large"},null,8,["ext"]),C("span",tt,L(e.nm),1)],42,at)]),default:x(()=>[F(" "+L(e.nm),1)]),_:2},1024))],64))),128))],544)]),_:1},8,["show"]),P(Ha,{ref_key:"contextRef",ref:r},null,512)])}}}),[["__scopeId","data-v-ae5d241c"]]),nt={class:"flex items-center justify-between"},ot={class:"flex justify-start items-center whitespace-pre"},st={key:1,class:"i-svg-spinners:90-ring-with-bg text-7 text-primary"},rt=y({__name:"FileTableFooter",setup(e){const{t:a}=I(),t=k("fileStore"),{dirNums:l,fileNums:i,page:n,size:o,total:r,currentPath:c,currentDirSize:u}=t,f=_(!1),d=[100,500,1e3,1500,2e3];async function p(){try{f.value=!0;const e=await s.post("/files?action=GetDirSize",{path:c.value},{requestOptions:{isOriginalResult:!0}});u.value=e.message}catch(e){console.warn(e)}finally{f.value=!1}}return(e,s)=>{const c=ea,m=pa;return g(),S("div",nt,[C("div",ot,[F(L(z(a)("file.tableFooter.summary",{dirNum:z(l),fileNum:z(i)}))+" ",1),z(f)?(g(),S("i",st)):(g(),S(O,{key:0},[-1===z(u)?(g(),w(c,{key:0,type:"primary",text:"",onClick:p},{default:x(()=>[F(L(z(a)("file.tableFooter.calculate")),1)]),_:1})):(g(),w(c,{key:1,text:"",type:"primary"},{default:x(()=>[F(L(z(u)),1)]),_:1}))],64))]),P(m,{page:z(n),"onUpdate:page":s[0]||(s[0]=e=>T(n)?n.value=e:null),"page-size":z(o),"onUpdate:pageSize":s[1]||(s[1]=e=>T(o)?o.value=e:null),"item-count":z(r),"page-sizes":d,onRefresh:s[2]||(s[2]=()=>z(Oe)(z(t)))},null,8,["page","page-size","item-count"])])}}}),ct={class:"flex flex-col gap-16px h-full p-16px overflow-hidden"},ut=y({__name:"main",props:{path:{default:"/"},view:{default:"list"}},emits:["currentPathChange","viewChange","rendered"],setup(e,{emit:a}){const t=e,i=_(),n=function(){const e=_(),a=_("list"),t=_("/www"),i=_([]),n=_(!1),o=_([]),s=_([]),r=_([]),c=_(),u=_(),f=_(),d=_([]),p=_([]),m=_({url:"http://",path:t.value,filename:""}),v=_({reference:"",per:0,speed:"0",used:"0",except:"--",total:0}),h=_(!1),y=_([]),k=_({text:"",exts:"html,php",path:t.value,is_subdir:0,mode:0,isword:0,iscase:1,noword:0}),w=_({}),g=_({files:0,times:0}),x=_([]),C=_([{label:za("file.favoriteListModal.management"),key:"management",icon:"settings"}]),z=_([]),P=_([]),R=_({back_sub_dir:1,path:"",remark:""}),S=Ca,O=wa,D=ga,E=xa,F={PasteConfirm:()=>M(()=>l(()=>import("./PasteConfirm.js?v=1769066082311"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]))),PasteSingleConfirm:()=>M(()=>l(()=>import("./PasteSingleConfirm.js?v=1769066082311"),__vite__mapDeps([18,1,2,3,4,5,6,7,8,9,10,19,11,12,13,14,15]))),UploadFile:()=>M(()=>l(()=>import("./UploadFile.js?v=1769066082311"),__vite__mapDeps([20,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,21]))),RemoteDownload:()=>M(()=>l(()=>import("./RemoteDownload.js?v=1769066082311"),__vite__mapDeps([22,1,2,3,4,5,6,7,8,9,10,19,11,12,13,14,15]))),SearchFileContent:()=>M(()=>l(()=>import("./SearchFileContent.js?v=1769066082311"),__vite__mapDeps([23,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,24,25,26,27,28]))),FavoriteList:()=>M(()=>l(()=>import("./FavoriteList.js?v=1769066082311"),__vite__mapDeps([29,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]))),ShareList:()=>M(()=>l(()=>import("./ShareList.js?v=1769066082311"),__vite__mapDeps([30,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,31,19]))),Backup:()=>M(()=>l(()=>import("./Backup.js?v=1769066082311"),__vite__mapDeps([32,1,2,3,4,5,6,7,8,9,10,24,11,12,13,14,15,25,26,27]))),Recycle:()=>M(()=>l(()=>import("./Recycle.js?v=1769066082311"),__vite__mapDeps([33,1,2,3,4,5,6,7,8,9,10,34,35,36,11,12,13,14,15,37]))),Terminal:()=>M(()=>l(()=>import("./Terminal.js?v=1769066082311"),__vite__mapDeps([38,1,2,3,4,5,6,7,8,9,10,39,40,41,42,43]))),Softlink:()=>M(()=>l(()=>import("./SoftLink.js?v=1769066082311"),__vite__mapDeps([44,1,2,3,4,5,6,7,8,9,10,19,11,12,13,14,15,24,25,26,27]))),Share:()=>M(()=>l(()=>import("./Share.js?v=1769066082311"),__vite__mapDeps([45,1,2,3,4,5,6,7,8,9,10,19,46,11,12,13,14,15,31]))),Permission:()=>M(()=>l(()=>import("./Permission.js?v=1769066082311"),__vite__mapDeps([47,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,48]))),Properties:()=>M(()=>l(()=>import("./Properties.js?v=1769066082311"),__vite__mapDeps([49,1,2,3,4,5,6,7,8,9,10,50,51,11,12,13,14,15,52]))),Del:()=>M(()=>l(()=>import("./Del.js?v=1769066082311"),__vite__mapDeps([53,16,6,2,3,7,4,5,9,8,17,11,12,13,14,15,54]))),Compression:()=>M(()=>l(()=>import("./Compression.js?v=1769066082311"),__vite__mapDeps([55,1,2,3,4,5,6,7,8,9,10,19,11,12,13,14,15,24,25,26,27]))),Decompress:()=>M(()=>l(()=>import("./Decompress.js?v=1769066082311"),__vite__mapDeps([56,1,2,3,4,5,6,7,8,9,10,19,11,12,13,14,15]))),AceEditor:()=>M(()=>l(()=>import("./index191.js?v=1769066082311"),__vite__mapDeps([57,2,3,6,7,4,5,9,8,58])))},L=j(null),T=_(),I=_(!1),V=_(!1),A=_([]),U=_(!1),N=_(!1),$=_(!1),B=_(!1),G=_(),W=_(!1),K=b(()=>i.value.filter(e=>se(e)).map(e=>e.path)),q=b(()=>i.value.filter(e=>re(e.ext)).map(e=>({path:e.path,name:e.nm}))),H=_(""),Y=_({path:"",name:""}),X=_(!1),J=_(!1),Q=_(1),Z=_(0),ee=_(0),ae=_(1),te=_(100),le=_(""),ie=_("False"),ne=_(0),oe=_(null),ce=_(),ue=_([]),fe=_(1),de=_(0),pe=_(-1),me=_();return{mainRef:e,filesView:a,currentPath:t,fileList:i,tableLoading:n,normalTrList:o,trRectArr:s,choosedKeys:r,tableRef:c,dataTableRef:u,contextRef:f,normalCardList:d,cardRectArr:p,downloadFileFormData:m,downloadProgressData:v,downloadProgressShow:h,resourceManagerWindow:y,searchFileContentFormData:k,resetSearchFileContentFormData:function(){k.value={text:"",exts:"html,php",path:t.value,is_subdir:0,mode:0,isword:0,iscase:1,noword:0}},searchRes:w,searchStatistics:g,favoriteList:x,favoriteOptions:C,resetFavoriteOptions:function(){C.value=[{label:za("file.favoriteListModal.management"),key:"management",icon:"settings"}]},shareList:z,backupList:P,backupForm:R,fileOperationFlag:S,fileCopyCache:O,waitForPaste:D,copiedFile:E,dynamicCmptObj:F,dynamicCmpt:L,dynamicCmptRef:T,fileRecycle:I,menuShow:V,uploadFileList:A,uploadShow:U,uploadComplete:N,startUpload:$,fileConflictShow:B,optionToolsRef:G,isMiniScreen:W,imgWaitPreview:K,videoWaitPreview:q,currentPreviewImg:H,currentPreviewVideo:Y,previewShow:X,previewVideoShow:J,operationType:Q,dirNums:Z,fileNums:ee,page:ae,size:te,sort:le,reverse:ie,total:ne,currentFile:oe,choosePathRef:ce,diskMountPoint:ue,shareListPage:fe,shareListTotal:de,currentDirSize:pe,dragUploadRef:me}}(),o=Z();te("fileStore",n);const{dynamicCmpt:s,dynamicCmptRef:r,currentPath:c,filesView:u,choosedKeys:f,mainRef:p,currentFile:m,dragUploadRef:v}=n;c.value=t.path,u.value=t.view;const h=a;function y(e){h("viewChange",{view:e,currentPath:c.value})}return X(c,e=>{sessionStorage.setItem("currentPath",e),h("currentPathChange",e)}),V(()=>{Oe(n),document.onkeydown=async e=>{var a,t,l;const i=e.target;if("INPUT"===i.tagName||"TEXTAREA"===i.tagName)return;if("/files"!=o.path)return;if((null==(a=m.value)?void 0:a.isCreate)||(null==(t=m.value)?void 0:t.isEditRemarks)||(null==(l=m.value)?void 0:l.isRename))return;if(!document.querySelector(".aceEditors")){if(e.ctrlKey&&"c"===e.key){if(0==f.value.length)return;await be(n)}if(e.ctrlKey&&"v"===e.key&&xe(n),e.ctrlKey&&"x"===e.key){if(0==f.value.length)return;we(n)}}}}),ee(()=>{Oe(n)}),He(n),N(()=>h("rendered",c.value)),(e,a)=>{const t=d;return g(),S("div",{ref_key:"mainRef",ref:p,class:"flex-1 overflow-hidden"},[C("div",ct,[C("div",null,[P(qa)]),P(t),C("div",null,[P(Ia,{"files-view":z(u),"onUpdate:filesView":a[0]||(a[0]=e=>T(u)?u.value=e:null),onViewChange:y},null,8,["files-view"])]),C("div",{ref_key:"listRef",ref:i,class:"flex-1 overflow-hidden",tabindex:"0"},["list"==z(u)?(g(),w(Za,{key:0})):"card"==z(u)?(g(),w(it,{key:1})):$("",!0)],512),P(rt)]),(g(),w(ae(z(s)),{ref_key:"dynamicCmptRef",ref:r},null,512)),P(Oa,{ref_key:"dragUploadRef",ref:v},null,512),P(Fa),P(ba)],512)}}}),ft={class:"tabs"},dt=["onClick"],pt={class:"flex justify-start gap-5"},mt={class:"tab-tit"},vt={class:"tab-tit"},ht=a(y({__name:"index",setup(e){const a=_(null),{mainHeight:t}=le(p()),l=b(()=>t.value-16-16),o=_(),s=_(),r=_(),c=_(!1),u={id:"tab-0",title:"www",path:"/www",view:"list"},f=ie("file-tabs",[ra(u)]),d=ie("file-tabs-active","tab-0"),y=ie("file-tabs-view","list");X(d,e=>{const a=f.value.find(a=>a.id==e);a&&(y.value=a.view)},{immediate:!0});const k=b(()=>{const e=f.value.find(e=>e.id==d.value);return e?e.path:"tab-0"});function F(e="",a=""){if(f.value.length>=14)return void i.warning("Only 14 tags can be opened at most");const t="tab-".concat((new Date).getTime()),l=ra(u);l.id=t,e&&(l.path=e),a&&(l.title=a),f.value.push(l),d.value=t}function T(e){const a=e.split("/").slice(-1)[0];f.value.forEach(t=>{t.id==d.value&&(t.path=e,t.title=""==a?"/":a)})}function j({view:e,path:a}){y.value=e,f.value.forEach(t=>{t.id==d.value&&(t.path=a,t.view=e)})}function M(e){"left"==e?r.value.scrollLeft-=100:"right"==e&&(r.value.scrollLeft+=100)}return te("file-provide",{addTab:F}),N(()=>{r.value.addEventListener("mousewheel",e=>{e.preventDefault(),r.value.scrollLeft+=e.deltaY})}),function(){const e=v("Path");if(e){const a="tab-".concat((new Date).getTime());f.value.push({id:a,title:e,path:e,view:"list"});const t=f.value.find(a=>a.path==e);t&&(d.value=t.id)}h("Path")}(),N(async()=>{await m("/static/ace/styles/icons.css?v=1769066082311",a.value),Ye()}),(e,t)=>{const i=n,u=sa,p=ca;return g(),S("div",{ref_key:"fileRef",ref:a,id:"file-main",class:"p-16px"},[P(p,{style:R({height:z(l)+"px"}),"content-style":{display:"flex",flexDirection:"column",overflow:"hidden"}},{default:x(()=>[C("div",ft,[C("div",{class:E(["tabs-scroll",{"has-scroll":z(c)}]),ref_key:"tabScrollRef",ref:o},[z(c)?(g(),S("div",{key:0,class:"left",onClick:t[0]||(t[0]=e=>M("left"))},t[3]||(t[3]=[C("i",{class:"i-tdesign:caret-left text-7"},null,-1)]))):$("",!0),z(c)?(g(),S("div",{key:1,class:"right",onClick:t[1]||(t[1]=e=>M("right"))},t[4]||(t[4]=[C("i",{class:"i-tdesign:caret-right text-7"},null,-1)]))):$("",!0),C("div",{class:"scroll-container",ref_key:"tabScrollContainerRef",ref:r},[C("div",{class:"tabs-wrapper",ref_key:"tabWrapperRef",ref:s},[(g(!0),S(O,null,D(z(f),e=>(g(),w(u,{placement:"bottom",key:e.id},{trigger:x(()=>[C("div",{class:E(["tab-item",{active:e.id==z(d)}]),onClick:a=>{return t=e.id,void(d.value=t);var t}},[C("div",pt,[P(i,{name:"file-dir",size:"18"}),C("span",mt,L(e.title),1)]),e.id==z(d)&&z(f).length>1?(g(),w(i,{key:0,name:"base-error",size:"18",color:"#bbb",onClick:a=>function(e){if(1==f.value.length)return void(d.value=f.value[0].id);const a=f.value.findIndex(a=>a.id==e);f.value.splice(a,1),setTimeout(()=>d.value=f.value[f.value.length-1].id,50)}(e.id)},null,8,["onClick"])):$("",!0)],10,dt)]),default:x(()=>[C("span",vt,L(e.title),1)]),_:2},1024))),128)),C("div",{class:"tab-item add",onClick:t[2]||(t[2]=e=>F())},[P(i,{name:"base-add",size:"18",color:"#ccc"})])],512)],512)],2)]),(g(),w(ne,null,[(g(),w(ae(ut),{key:z(d),onCurrentPathChange:T,path:z(k),view:z(y),onViewChange:j},null,40,["path","view"]))],1024))]),_:1},8,["style"])],512)}}}),[["__scopeId","data-v-dbb99f65"]]),yt=Object.freeze(Object.defineProperty({__proto__:null,default:ht},Symbol.toStringTag,{value:"Module"}));export{Wa as C,yt as i};
