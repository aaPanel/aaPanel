System.register(["./index-legacy243.js?v=1762424784323","./vue-legacy.js?v=1762424784323","./public-legacy.js?v=1762424784323","./index-legacy167.js?v=1762424784323","./page_layout-legacy.js?v=1762424784323","./naive-legacy.js?v=1762424784323","./soft-legacy.js?v=1762424784323","./site-legacy.js?v=1762424784323","./index.vue_vue_type_script_setup_true_lang-legacy.js?v=1762424784323","./__commonjsHelpers__-legacy.js?v=1762424784323","./common-legacy.js?v=1762424784323"],function(e,a){"use strict";var n,t,s,i,r,o,l,d,c,p,u,m,v,g,b,_,x,h,y,f,w,$,D,k,M,P,C,j,A,S,q,z,U,B,O,F,I,L,R,E,H,N,T;return{setters:[e=>{n=e._},e=>{t=e.i,s=e.p,i=e.k,r=e.P,o=e.r,l=e.R,d=e.V,c=e.S,p=e.W,u=e.a4,m=e.U,v=e.a2,g=e.F,b=e.a3,_=e.j,x=e.e,h=e.ak},e=>{y=e._,f=e.a,w=e.b,$=e.d},e=>{D=e._},e=>{k=e.t,M=e.i,P=e.L,C=e.u,j=e.q,A=e.d,S=e.m,q=e.f7,z=e.w,U=e.p,B=e.c},e=>{O=e.aC,F=e.dV,I=e.da,L=e.d5,R=e.dR,E=e.df},e=>{H=e.a},e=>{N=e.g},e=>{T=e._},null,null],execute:function(){var a=document.createElement("style");a.textContent=".access-btn[data-v-989f4d59]{padding:0 24px;--n-height: 40px;--n-border-radius: 4px;--n-color: var(--button-gray-color);--n-text-color: var(--color-text-2);--n-border: none;--n-color-hover: var(--color-primary);--n-border-hover: 1px solid var(--color-primary);--n-text-color-hover: #fff;--n-color-focus: var(--color-primary);--n-text-color-focus: #fff;--n-border-focus: 1px solid var(--color-primary)}.bg-recommend[data-v-989f4d59]{position:absolute;width:32px;height:32px;top:-1px;left:-1px;background-image:url(/static/vite/images/recommend.svg);background-repeat:no-repeat;background-position:center;background-size:contain}\n/*$vite$:1*/",document.head.appendChild(a);const V=Symbol("php-admin"),{t:W}=M.global,G=()=>k.post("/adminer_manager?action=get_status"),J=e=>k.post("/adminer_manager?action=switch_php",e,{requestOptions:{loading:W("Database.adminerManager.switchingPhp"),successMessage:!0}}),K=e=>k.post("/adminer_manager?action=install",e,{requestOptions:{loading:W("Database.adminerManager.installing"),successMessage:!0}}),Q=()=>k.post("/adminer_manager?action=uninstall",{},{requestOptions:{loading:W("Database.adminerManager.uninstalling"),successMessage:!0}}),X=e=>k.post("/adminer_manager?action=switch_port",e,{requestOptions:{loading:W("Database.adminerManager.switchingPort"),successMessage:!0}});async function Y(e,a,n,t=""){const s=document.createElement("form");s.action=`${P()}/adminer/index.php?driver=${e}&username=${a}`,s.method="post",s.target="_blank",s.style.display="none";let i="";"mongo"===e&&(i="localhost:27017"+("root"===a?"/admin?authSource=admin":`/${a}?authSource=${a}`),t="root"===a?"admin":t);const r=`\n\t\t<input type="text" name="auth[driver]" id="driver" value="${e}" size="24" />\n\t\t<input type="text" name="auth[username]" id="username" value="${a}" size="24" />\n\t\t<input type="password" name="auth[password]" id="password" value="${n}" size="24" />\n\t\t<input type="text" name="auth[db]" id="db" value="${t}" size="24" />\n\t\t<input type="text" name="auth[server]" id="server" value="${i}" size="24" />\n\t`;s.innerHTML=r,document.body.appendChild(s),s.submit(),document.body.removeChild(s)}const Z={class:"p-4px"},ee={class:"flex items-center h-40px mb-10px text-14px whitespace-pre-wrap"},ae={class:"flex gap-10px"},ne={class:"mt-20px"},te={class:"flex gap-24px mt-20px"},se=i({__name:"index",setup(e,{expose:a}){const{t:n}=r(),{type:s,db:i,username:x,password:h}=t(V),$=C(),M=o(!1),U=o(""),B=async()=>{f({title:n("Database.adminerManager.service.fixed"),content:n("Database.adminerManager.service.confirmFixed"),onConfirm:async()=>{await K({version:U.value}),H()}})},F=()=>{f({title:n("Database.adminerManager.service.uninstall"),content:n("Database.adminerManager.service.confirmUninstall"),onConfirm:async()=>{await Q(),H()}})},I=()=>{f({title:n("Database.adminerManager.service.install"),content:n("Database.adminerManager.service.confirmInstall"),onConfirm:async()=>{const{message:e}=await k.post("/adminer_manager?action=support_versions");z(e)&&await K({version:e[0]}),H()}})},L=new Map([["pgsql","postgres"],["mongo","root"]]),R=async()=>{if($.isFree)return void w({source:160});if(x&&h&&i)return void Y(s,x,h,i);const e=S.loading(n("Database.adminerManager.service.jumpingToAdminer"));try{if("mongo"===s)return void(await E());const{message:e}=await q(s);A(e)&&Y(s,L.get(s)||"",e.result)}finally{e.close()}},E=async()=>{const{message:e}=await q("mongodb");A(e)&&Y(s,L.get(s)||"",e.root)},H=async()=>{const{message:e}=await G();A(e)&&(M.value=1===e.install,U.value=e.version)};return H(),a({init:H}),(e,a)=>{const n=D,t=O,i=j,r=y;return d(),l("div",Z,[c("div",ee,[c("span",null,u(e.$t("Database.adminerManager.service.currentStatus")),1),p(n,{value:m(M)},null,8,["value"])]),c("div",ae,[m(M)?(d(),l(g,{key:0},[p(t,{onClick:B},{default:b(()=>[_(u(e.$t("Database.adminerManager.service.fixed")),1)]),_:1}),p(t,{onClick:F},{default:b(()=>[_(u(e.$t("Public.Btn.Uninstall")),1)]),_:1})],64)):(d(),v(t,{key:1,onClick:I},{default:b(()=>[_(u(e.$t("Public.Btn.Install")),1)]),_:1}))]),c("div",ne,[p(i,{dashed:""})]),c("div",te,[p(t,{class:"access-btn",onClick:R},{default:b(()=>[c("span",null,u(e.$t("Database.PhpAdmin.index_11")),1),a[1]||(a[1]=c("span",{class:"bg-recommend"},null,-1))]),_:1,__:[1]}),p(t,{class:"access-btn",onClick:a[0]||(a[0]=e=>(async()=>{window.open(`${P()}/adminer/index.php?driver=${s}`)})())},{default:b(()=>[_(u(e.$t("Database.PhpAdmin.index_6")),1)]),_:1})]),p(r,{class:"mt-16px"},{default:b(()=>[c("li",null,u(e.$t("Database.PhpAdmin.index_7")),1),c("li",null,u(e.$t("Database.PhpAdmin.index_33")),1)]),_:1})])}}}),ie=U(se,[["__scopeId","data-v-989f4d59"]]),re={class:"p-8px"},oe={class:"w-160px"},le=i({__name:"index",setup(e,{expose:a}){const{t:n}=r(),t=x({php_version:null}),s=o([]),{loading:i,setLoading:v}=$(),g=async()=>{try{v(!0);const[e,a]=await Promise.all([N(),G()]),{message:n}=e;z(n)&&(s.value=n.filter(e=>"00"!==e.version).map(e=>({label:e.name,value:e.version})));const{message:i}=a;t.php_version=L(i,"php_version",null)}finally{v(!1)}},h=async()=>{const e=t.php_version;null!==e?(await J({php_version:e}),g()):S.error(n("Database.PhpAdmin.index_32"))},y=async()=>{const{message:e}=await B({sName:"php-"+Number(t.php_version)/10});A(e)&&H(e)};return g(),a({init:g}),(e,a)=>{const n=F,r=O,o=I;return d(),l("div",re,[p(o,{class:"items-center"},{default:b(()=>[c("span",null,u(e.$t("Database.PhpAdmin.index_31")),1),c("div",oe,[p(n,{value:m(t).php_version,"onUpdate:value":a[0]||(a[0]=e=>m(t).php_version=e),loading:m(i),options:m(s)},null,8,["value","loading","options"])]),p(r,{disabled:null===m(t).php_version,type:"primary",onClick:h},{default:b(()=>[_(u(e.$t("Public.Btn.Save")),1)]),_:1},8,["disabled"]),p(r,{disabled:null===m(t).php_version,onClick:y},{default:b(()=>a[1]||(a[1]=[_(" Settings ",-1)])),_:1,__:[1]},8,["disabled"])]),_:1})])}}}),de={class:"p-4px"},ce={class:"w-142px mr-8px"},pe=i({__name:"index",setup(e,{expose:a}){const{t:n}=r(),t=o(null),s=async()=>{const e=t.value;null!==e?(await X({port:e}),v()):S.error(n("Database.PhpAdmin.index_25"))},i=o(!1),v=async()=>{const{message:e}=await G();t.value=L(e,"port",null)},g=()=>{v()};return g(),a({init:g}),(e,a)=>{const n=E,r=O,o=R,v=T;return d(),l("div",de,[p(v,{"label-width":"160"},{default:b(()=>[p(o,{label:e.$t("Database.PhpAdmin.index_16"),"label-width":"auto"},{default:b(()=>[c("div",ce,[p(n,{value:m(t),"onUpdate:value":a[0]||(a[0]=e=>h(t)?t.value=e:null),min:0,max:66325,"show-button":!1,loading:m(i),placeholder:""},null,8,["value","loading"])]),p(r,{type:"primary",onClick:s},{default:b(()=>[_(u(e.$t("Public.Btn.Save")),1)]),_:1})]),_:1},8,["label"])]),_:1})])}}}),ue={class:"h-580px"};e("default",i({__name:"index",props:{type:{},username:{},password:{},db:{}},setup(e){const a=e,{t:t}=r(),i=o("service"),c=[{key:"service",label:t("Database.PhpAdmin.index_1"),component:ie},{key:"php",label:t("Database.PhpAdmin.index_2"),component:le},{key:"safe",label:t("Database.PhpAdmin.index_3"),component:pe}];var u;return u={type:a.type,username:a.username,password:a.password,db:a.db},s(V,u),(e,a)=>{const t=n;return d(),l("div",ue,[p(t,{value:m(i),"onUpdate:value":a[0]||(a[0]=e=>h(i)?i.value=e:null),ref:"tabsRef",data:c},null,8,["value"])])}}}))}}});
