System.register(["./public-legacy.js?v=1764233927359","./page_layout-legacy.js?v=1764233927359","./vue-legacy.js?v=1764233927359","./php-legacy.js?v=1764233927359","./index.vue_vue_type_script_setup_true_lang-legacy.js?v=1764233927359","./naive-legacy.js?v=1764233927359","./leader-line-vue-legacy.js?v=1764233927359"],function(e,l){"use strict";var a,t,n,i,s,o,d,u,r,c,p,v,m,x,f,g,_,b,w,y,S,h,P,$,k,C,I,j,H,N,U,E,B,O,z,A,T,L,R,M,V,q,D,F,W,X,G,J,K,Q,Y;return{setters:[e=>{a=e._,t=e.c,n=e.f,i=e.a,s=e.d,o=e.h,d=e.u},e=>{u=e.eM,r=e.bm,c=e.u,p=e._,v=e.m,m=e.eN,x=e.X,f=e.p,g=e.eE,_=e.o,b=e.T,w=e.d},e=>{y=e.k,S=e.e,h=e.r,P=e.R,$=e.V,k=e.W,C=e.a3,I=e.U,j=e.S,H=e.a4,N=e.a0,U=e.P,E=e.o,B=e.n,O=e.b,z=e.j,A=e.ak,T=e.c,L=e.w,R=e.a2,M=e.an},e=>{V=e.j,q=e.k},e=>{D=e._},e=>{F=e.dR,W=e.dV,X=e.da,G=e.d8,J=e.dU,K=e.dT,Q=e.dj},e=>{Y=e.L}],execute:function(){var l=document.createElement("style");l.textContent=".border-view[data-v-4bcfd2a2]{width:90%;border-width:1px;border-color:var(--color-border);border-radius:4px;border-style:solid;padding:12px}[data-v-030ea397] .n-spin-description{color:#20a53a!important}\n/*$vite$:1*/",document.head.appendChild(l);const Z={class:"p-16px"},ee=y({__name:"server-select",props:{callBack:{type:Function,default:()=>{}}},setup(e,{expose:l}){const t=e,n=S({webServer:"nginx"}),i=h([{label:"Nginx",value:"nginx"},{label:"Apache",value:"apache"},{label:"Openlitespeed",value:"openlitespeed"}]);return l({onConfirm:async()=>{await u({status:"disable",reserve:n.webServer}),t.callBack()}}),(e,l)=>{const t=W,s=F,o=D,d=a;return $(),P("div",Z,[k(o,{class:"my-16px",model:I(n)},{default:C(()=>[k(s,{label:e.$t("Soft.Plugin.index_8")},{default:C(()=>[k(t,{class:"w-300px!",value:I(n).webServer,"onUpdate:value":l[0]||(l[0]=e=>I(n).webServer=e),options:I(i)},null,8,["value","options"])]),_:1},8,["label"])]),_:1},8,["model"]),k(d,null,{default:C(()=>[j("li",null,H(e.$t("Soft.Plugin.index_18")),1)]),_:1})])}}}),le={class:"p-16px"},ae={class:"border-view mb-20px",id:"nginx-select"},te={class:"border-view",id:"proxy-select"},ne={class:"flex items-center my-20px"},ie={class:"mr-10px"},se={class:"w-280px"},oe={class:"w-280px"},de=f(y({__name:"version-select",setup(e,{expose:l}){const t=r(),{webserver:n}=N(t),{t:i}=U(),s=c(),o=h(1),d=h([{name:"Nginx",icon:"nginx",value:"1.24",version:[{label:"Nginx 1.24",value:"1.24"},{label:"Nginx 1.25",value:"1.25"},{label:"Nginx 1.26",value:"1.26"},{label:"Nginx 1.27",value:"1.27"},{label:"Nginx 1.28",value:"1.28"}],disabled:!1},{name:"Apache",icon:"apache",value:"2.4",version:[{label:"Apache 2.4",value:"2.4"}],disabled:!1},{name:"Openlitespeed",icon:"openlitespeed",value:"1.8",version:[{label:"Openlitespeed 1.8",value:"1.8"}],disabled:!1}]);let u=null;return E(async()=>{await t.getPHPConfig(),await B(),d.value.forEach(e=>{e.icon===n.value&&(e.disabled=!0)}),setTimeout(()=>{(()=>{const e=document.getElementById("nginx-select"),l=document.getElementById("proxy-select");e&&l?u=Y.setLine(e,l,{color:"var(--color-border)",size:2,path:"grid",startSocket:"right",endSocket:"right"}):console.warn("Elements not found, will retry on mounted")})()},500)}),O(()=>{u&&u.remove()}),l({onConfirm:async()=>{const e=v.loading(i("Home.Install.index_13"));try{const e=d.value.filter(e=>e.disabled);for(const l of d.value)e.includes(l)||await m({sName:l.icon,version:l.value,type:o.value,id:50,Skip:!0});await x(),s.getConfigSimple()}finally{e.close()}}}),(e,l)=>{const t=p,n=W,i=X,s=J,u=G,r=K,c=a;return $(),P("div",le,[j("div",ae,[k(i,{class:"flex-nowrap! items-center"},{default:C(()=>[k(t,{name:`soft-${I(d)[0].icon}`,size:"32"},null,8,["name"]),k(n,{value:I(d)[0].value,"onUpdate:value":l[0]||(l[0]=e=>I(d)[0].value=e),options:I(d)[0].version,disabled:I(d)[0].disabled},null,8,["value","options","disabled"])]),_:1})]),j("div",te,[k(i,{class:"flex-nowrap! items-center"},{default:C(()=>[k(t,{name:`soft-${I(d)[1].icon}`,size:"32"},null,8,["name"]),k(n,{value:I(d)[1].value,"onUpdate:value":l[1]||(l[1]=e=>I(d)[1].value=e),options:I(d)[1].version,disabled:I(d)[1].disabled},null,8,["value","options","disabled"])]),_:1}),k(i,{class:"flex-nowrap! items-center mt-12px"},{default:C(()=>[k(t,{name:`soft-${I(d)[2].icon}`,size:"32"},null,8,["name"]),k(n,{value:I(d)[2].value,"onUpdate:value":l[2]||(l[2]=e=>I(d)[2].value=e),options:I(d)[2].version,disabled:I(d)[2].disabled},null,8,["value","options","disabled"])]),_:1})]),j("div",ne,[j("span",ie,H(e.$t("Home.Install.index_4")),1),k(r,{value:I(o),"onUpdate:value":l[3]||(l[3]=e=>A(o)?o.value=e:null)},{default:C(()=>[k(u,{trigger:"hover"},{trigger:C(()=>[k(s,{value:1},{default:C(()=>[z(H(e.$t("Home.Install.index_5")),1)]),_:1})]),default:C(()=>[j("div",se,H(e.$t("Home.Install.index_6")),1)]),_:1}),k(u,{trigger:"hover"},{trigger:C(()=>[k(s,{value:0},{default:C(()=>[z(H(e.$t("Home.Install.index_7")),1)]),_:1})]),default:C(()=>[j("div",oe,H(e.$t("Home.Install.index_8")),1)]),_:1})]),_:1},8,["value"])]),k(c,{class:"mt-10px"},{default:C(()=>[j("li",null,H(e.$t("Soft.Plugin.index_19")),1)]),_:1})])}}}),[["__scopeId","data-v-4bcfd2a2"]]),ue=y({__name:"index",setup(e,{expose:l}){const{t:u}=U(),r=c(),{isMultiServiceInstall:p,taskCount:v}=N(r),m=h(!1),x=T(()=>v.value>0&&p.value),{table:f,columns:y}=t([{key:"webserver",title:u("Soft.Plugin.index_8")},{key:"status",title:u("Soft.Plugin.index_9"),render:e=>k("span",{class:e.status?"text-primary":"text-error"},[e.status?u("Soft.Plugin.index_10"):u("Soft.Plugin.index_11")])},n({width:190,options:e=>[{label:u("Home.index_7"),onClick:()=>{i({title:u("Home.index_7"),content:"The restart process will make the website inaccessible. Do you want to continue?",onConfirm:async()=>{await g({name:e.name,type:"restart"})}})}},{label:u("Soft.Plugin.index_12"),onClick:()=>{P(e.name)}}]})]),S=async e=>{d(e?{title:u("Soft.Plugin.index_14"),width:400,footer:!0,component:de}:{title:u("Soft.Plugin.index_13"),width:480,footer:!0,data:{callBack:()=>{O(),r.getConfigSimple()}},component:ee})},P=async e=>{i({title:u("Soft.Plugin.index_15"),content:u("Soft.Plugin.index_16"),onConfirm:async()=>{await V({server:e})}})},{loading:E,setLoading:B}=s();L(()=>x.value,e=>{e||O()});const O=async()=>{try{B(!0);const{message:e}=await q();w(e)&&(m.value=e.status,f.data=Object.entries(e).filter(([e])=>"status"!==e).map(([e,l])=>({webserver:e.charAt(0).toUpperCase()+e.slice(1),name:e,status:l})))}finally{B(!1)}};return O(),l({init:O}),(e,l)=>{const t=Q,n=X,i=_,s=a,d=o,u=b;return $(),R(u,{show:I(E)||I(x),description:I(x)?e.$t("Soft.Plugin.index_2"):""},{default:C(()=>[k(n,{class:"items-center mt-10px"},{default:C(()=>[j("span",null,H(e.$t("Soft.Plugin.index_17")),1),k(t,{value:I(m),"onUpdate:value":S,disabled:I(x)},null,8,["value","disabled"])]),_:1}),k(s,{class:"my-16px"},{default:C(()=>[j("li",null,[z(H(e.$t("Soft.Plugin.index_3"))+" ",1),l[0]||(l[0]=j("span",{class:"text-warning"},"8188, 8189, 8190, 8288, 8289, 8290, 80, 443",-1))]),j("li",null,H(e.$t("Soft.Plugin.index_4")),1),j("li",null,H(e.$t("Soft.Plugin.index_5")),1),l[1]||(l[1]=j("li",null,[z("If one of the services fails to start, click "),j("b",null,"Repair"),z(" to repair it.")],-1)),j("li",null,[z(H(e.$t("Soft.Plugin.index_6")),1),k(i,{class:"ml-5px",target:"_blank",href:"https://www.aapanel.com/docs/faq/multi-webserver_hosting.html"},{default:C(()=>[z(H(e.$t("Soft.Plugin.index_7")),1)]),_:1})])]),_:1,__:[1]}),I(m)?($(),R(d,{key:0,data:I(f).data,columns:I(y),loading:I(E)},null,8,["data","columns","loading"])):M("",!0)]),_:1},8,["show","description"])}}});e("O",f(ue,[["__scopeId","data-v-030ea397"]]))}}});
