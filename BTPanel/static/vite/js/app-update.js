import{_ as t}from"./index.js?v=1767769852656";import{e,_ as a}from"./public.js?v=1767769852656";import{u as s,q as l,c as i,d as n,W as o,m as p,X as r,p as m}from"./page_layout.js?v=1767769852656";import{u}from"./soft.js?v=1767769852656";import{g as _}from"./soft2.js?v=1767769852656";import{_ as c,a as d}from"./index.vue_vue_type_script_setup_true_lang4.js?v=1767769852656";import{da as f,dX as v,aC as x}from"./naive.js?v=1767769852656";import{k as h,P as w,r as j,R as y,an as g,U as k,V as b,W as S,S as H,a3 as P,a4 as U,j as W}from"./vue.js?v=1767769852656";import"./common.js?v=1767769852656";import"./__commonjsHelpers__.js?v=1767769852656";import"./site.js?v=1767769852656";import"./index.vue_vue_type_script_setup_true_lang5.js?v=1767769852656";import"./index.vue_vue_type_script_setup_true_lang6.js?v=1767769852656";import"./index.vue_vue_type_script_setup_true_lang.js?v=1767769852656";import"./index100.js?v=1767769852656";import"./theme-monokai.js?v=1767769852656";import"./file.js?v=1767769852656";const $={key:0,class:"p-30px"},C=["src"],T=["title"],q={class:"color-#888888"},I={class:"font-600 mt-30px"},L=["innerHTML"],M=m(h({__name:"app-update",props:{row:{},callback:{},hide:{}},setup(m){const{t:h}=w(),M=s(),N=m,{row:R}=N,X=["nginx","apache","mysql","php"],O=j(),V=j(),z=j(),A=async(t=1)=>{var e;try{5!==z.value&&(E.data={plugin_title:R.title,plugin_name:R.name},E.show=!0);const{message:a}=await o({sName:R.name,version:5===z.value?R.m_version:V.value,upgrade:5===z.value?R.m_version:V.value,type:t},5===z.value);if(n(a)){if(a.result)return p.success(a.result),M.taskCount+=1,null==(e=N.callback)||e.call(N),N.hide(),void r();await u({name:a.name,tmp_path:a.tmp_path,title:h("Soft.index_21")},()=>{var t;null==(t=N.callback)||t.call(N)})}N.hide()}catch(a){N.hide()}},B=()=>{var t;(t=R.name,X.includes(t)||t.startsWith("php-"))?D.show=!0:A(1)},D=e(h("Home.Install.index_7"),{name:R.name,callback:()=>{A(0)}}),E=e("");return(async()=>{const{message:t}=await i({sName:R.name},!0);n(t)&&(z.value=t.type,V.value=R.m_version+"."+R.version,O.value=t.version)})(),(e,s)=>{const i=v,n=f,o=x,p=l,r=a,m=t;return k(R)?(b(),y("div",$,[S(n,{class:"justify-between! items-center"},{default:P(()=>[S(n,{class:"items-center"},{default:P(()=>[H("img",{class:"w-40px",src:k(_)(k(R).name)},null,8,C),H("div",null,[H("p",{class:"font-600 text-18px max-w-290px truncate",title:"".concat(k(R).title," ").concat(k(O))},U(k(R).title)+" "+U(k(R).title.indexOf("PHP-")>-1?"":k(O)),9,T),S(i,{dot:""},{default:P(()=>[H("p",q,U(e.$t("Soft.index_51"))+"："+U(k(V)),1)]),_:1})])]),_:1}),S(n,null,{default:P(()=>[S(o,{type:"primary",onClick:B},{default:P(()=>[W(U(e.$t("Home.Update.index_19")),1)]),_:1})]),_:1}),S(p)]),_:1}),H("div",I,U(k(h)("Soft.index_52"))+"：",1),H("span",{class:"py-10px inline-block leading-20px text-font2",innerHTML:k(R).update_msg},null,8,L),S(r,null,{default:P(()=>[H("li",null,U(e.$t("Soft.index_35")),1),H("li",null,U(k(h)("Soft.index_53")),1),H("li",null,U(k(h)("Soft.index_54")),1)]),_:1}),S(m,{show:k(D).show,"onUpdate:show":s[0]||(s[0]=t=>k(D).show=t),title:k(D).title,data:k(D).data,width:480,footer:!0,"confirm-text":e.$t("WP.TableRow.index_13"),component:c},null,8,["show","title","data","confirm-text"]),S(m,{show:k(E).show,"onUpdate:show":s[1]||(s[1]=t=>k(E).show=t),title:k(E).title,data:k(E).data,width:480,component:d},null,8,["show","title","data"])])):g("",!0)}}}),[["__scopeId","data-v-a065841f"]]);export{M as default};
