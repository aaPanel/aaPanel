System.register(["./public-legacy.js?v=1752142539265","./page_layout-legacy.js?v=1752142539265","./file-legacy.js?v=1752142539265","./naive-legacy.js?v=1752142539265","./vue-legacy.js?v=1752142539265","./common-legacy.js?v=1752142539265","./__commonjsHelpers__-legacy.js?v=1752142539265"],(function(e,l){"use strict";var a,t,n,i,s,o,c,d,u,r,p,f,v,m,x,h,y,g,k,_,b,C,w,P,j,S;return{setters:[e=>{a=e.b,t=e.c,n=e.f},e=>{i=e._,s=e.d,o=e.X},e=>{c=e.a},e=>{d=e._,u=e.c2,r=e.bR,p=e.ay,f=e.bX,v=e.d0},e=>{m=e.k,x=e.P,h=e.r,y=e.Q,g=e.U,k=e.X,_=e.V,b=e.a2,C=e.j,w=e.a3,P=e.W,j=e.F,S=e.O},null,null],execute:function(){const l={class:"flex flex-col h-full"},$={class:"flex-1 w-0 truncate"},z={class:"flex flex-1 overflow-hidden"},D={class:"w-160px py-12px overflow-auto"},I=["onClick"],E={class:"flex-1 ml-8px"},X={class:"flex-1","b-l":"1 solid #aaa"};e("default",m({__name:"index",props:{data:{}},setup(e,{expose:m}){const{t:F}=x(),H=e,{path:L,checkedType:O,callback:R}=H.data,T=h([]),U=h([]),A=h(L||"/"),{table:K,columns:Q}=a([{key:"checkbox",title:"",width:36,render:e=>O.includes(e.type)?y("div",{onClick:e=>{e.stopPropagation()}},[y(d,{checked:e.filename===U.value[0],onUpdateChecked:l=>{U.value=l?[e.filename]:[]}},null)]):""},{key:"filename",title:F("Component.SelectPath.index_3"),render:e=>y("div",{class:"flex"},[y("div",{class:"flex items-center flex-1 cursor-pointer",onClick:l=>{"dir"===e.type&&(l.preventDefault(),A.value+=`${"/"===A.value?"":"/"}${e.filename}`,G(),l.stopPropagation())}},[y("div",null,["dir"===e.type?y(i,{name:"base-dir",size:"16"},null):"","file"===e.type?y(i,{name:"base-file",size:"16",color:"#666"},null):""]),y("div",{class:"ml-6px flex-1 w-0"},[y(u,null,{default:()=>[e.filename]})])])])},{key:"time",title:F("Component.SelectPath.index_4"),width:146},{key:"permission",title:F("Component.SelectPath.index_5"),width:86},{key:"owner",title:F("Component.SelectPath.index_6"),width:72}]),V=e=>({onClick:()=>{if(O.includes(e.type)){const l=v(U.value,(l=>l===e.filename));U.value=-1!==l?[]:[e.filename]}},onDblclick:()=>{O.includes(e.type)&&(A.value+=`${"/"===A.value?"":"/"}${e.filename}`,G())}}),W=()=>{const e=A.value.substring(0,A.value.lastIndexOf("/"));A.value=""===e?"/":e,G()},{loading:q,setLoading:B}=t(),G=async()=>{try{B(!0),K.data=[],U.value=[];const{message:e}=await c({path:A.value});if(s(e)){const l=[],a=r(e,"DIR",[]),t=r(e,"FILES",[]);a.forEach((e=>{l.push(J(e,"dir"))})),t.forEach((e=>{l.push(J(e,"file"))})),A.value=e.PATH,K.data=l,T.value=r(e,"DISK",[])}}finally{B(!1)}},J=(e,l)=>{const a=e.split(";"),t=a[0],n=o(a[2]),i=a[3],s=a[4];return{path:("/"!==A.value?A.value+"/":"")+t,filename:t,time:n,permission:i,owner:s,type:l}};return G(),m({onConfirm:({hide:e})=>{const l=U.value.length>0?U.value[0]:"",a=("/"!==A.value?A.value+"/":"")+l,t=K.data.find((e=>e.filename===l));R?.(a,t),e()}}),(e,a)=>{const t=p,s=f,o=n;return k(),g("div",l,[y(s,{class:"items-center h-50px px-12px","b-b":"1 solid #aaa"},{default:b((()=>[y(t,{onClick:W},{default:b((()=>[C(w(e.$t("Component.SelectPath.index_1")),1)])),_:1}),_("div",$,w(e.$t("Component.SelectPath.index_2"))+": "+w(P(A)),1)])),_:1}),_("div",z,[_("div",D,[(k(!0),g(j,null,S(P(T),(e=>(k(),g("div",{key:e.path,class:"flex items-center p-8px pl-16px hover:bg-#ececec cursor-pointer transition-colors",onClick:l=>{return a=e.path,A.value=a,void G();var a}},[y(i,{name:"file-disk",size:"18",color:"#666"}),_("div",E,w(e.path)+" "+w(e.size[2]?`(${e.size[2]})`:""),1)],8,I)))),128))]),_("div",X,[y(o,{loading:P(q),"loading-num":10,bordered:!1,"virtual-scroll":!0,"max-height":456,data:P(K).data,columns:P(Q),"row-props":V},null,8,["loading","data","columns"])])])])}}}))}}}));
