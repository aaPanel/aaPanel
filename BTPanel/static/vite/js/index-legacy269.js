System.register(["./index-legacy107.js?v=1763625242172","./page_layout-legacy.js?v=1763625242172","./ssl-legacy.js?v=1763625242172","./cert-legacy.js?v=1763625242172","./index-legacy241.js?v=1763625242172","./public-legacy.js?v=1763625242172","./index-legacy99.js?v=1763625242172","./ssl-lets-progress-legacy.js?v=1763625242172","./naive-legacy.js?v=1763625242172","./vue-legacy.js?v=1763625242172","./index-legacy132.js?v=1763625242172","./index-legacy.js?v=1763625242172","./index.vue_vue_type_script_setup_true_lang-legacy5.js?v=1763625242172","./utils-legacy3.js?v=1763625242172","./index-legacy217.js?v=1763625242172","./index.vue_vue_type_script_setup_true_lang-legacy.js?v=1763625242172","./site-legacy.js?v=1763625242172","./common-legacy.js?v=1763625242172","./__commonjsHelpers__-legacy.js?v=1763625242172","./index-legacy245.js?v=1763625242172","./index.vue_vue_type_script_setup_true_lang-legacy12.js?v=1763625242172","./index-legacy100.js?v=1763625242172","./theme-monokai-legacy.js?v=1763625242172","./file-legacy.js?v=1763625242172","./index.vue_vue_type_script_setup_true_lang-legacy10.js?v=1763625242172","./index-legacy98.js?v=1763625242172","./index-legacy263.js?v=1763625242172","./new-legacy.js?v=1763625242172","./index.vue_vue_type_script_setup_true_lang-legacy7.js?v=1763625242172","./index.vue_vue_type_script_setup_true_lang-legacy8.js?v=1763625242172","./soft-legacy.js?v=1763625242172","./index-legacy104.js?v=1763625242172","./index.vue_vue_type_script_setup_true_lang-legacy6.js?v=1763625242172","./paypal-js-legacy.js?v=1763625242172"],(function(e,t){"use strict";var a,n,s,l,i,d,o,u,r,c,_,p,S,m,y,f,h,v,x,g,w,b,C,L,k,$,j,P,B,E,D,R,N,U,O,A,z,I,T,M,F,J,H,q,G,X,V,W,Y,K,Q,Z,ee,te,ae,ne,se,le,ie,de,oe,ue,re,ce,_e,pe,Se,me,ye,fe,he,ve,xe,ge,we,be,Ce,Le,ke,$e,je,Pe,Be,Ee,De,Re,Ne,Ue,Oe,Ae,ze,Ie,Te,Me;return{setters:[e=>{a=e._},e=>{n=e.dU,s=e.m,l=e.e2,i=e.c,d=e.e3,o=e.e4,u=e.o,r=e.cx,c=e.T,_=e.p,p=e._,S=e.u,m=e.du,y=e.dv,f=e.dw,h=e.a,v=e.e6,x=e.e7,g=e.x,w=e.am,b=e.aY,C=e.dx},e=>{L=e.c,k=e.s,$=e.a,j=e.g,P=e.b},e=>{B=e.C},e=>{E=e.u},e=>{D=e.a,R=e.u,N=e._,U=e.e,O=e.c,A=e.f,z=e.l,I=e.h,T=e.d,M=e.U,F=e.V,J=e.W,H=e.p},e=>{q=e._},e=>{G=e.a},e=>{X=e.e2,V=e.dc,W=e.dj,Y=e.dk,K=e.d9,Q=e.aC,Z=e.d5,ee=e.dU,te=e.dT,ae=e.dP,ne=e._,se=e.eg,le=e.H},e=>{ie=e.k,de=e.P,oe=e.r,ue=e.c,re=e.y,ce=e.R,_e=e.a2,pe=e.a3,Se=e.V,me=e.X,ye=e.U,fe=e.a4,he=e.j,ve=e.S,xe=e.aj,ge=e.an,we=e.F,be=e.O,Ce=e.H,Le=e.a0,ke=e.e,$e=e._,je=e.am,Pe=e.w,Be=e.o,Ee=e.l,De=e.v,Re=e.m,Ne=e.x},e=>{Ue=e._},e=>{Oe=e._},e=>{Ae=e._},e=>{ze=e.u},e=>{Ie=e.A},e=>{Te=e._},e=>{Me=e.a3},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){var Fe=document.createElement("style");Fe.textContent=".n-alert[data-v-4bc7ae38]{--n-font-size: 12px}.cert-info[data-v-4bc7ae38]{display:flex;align-items:center;height:24px}.cert-info .cert-label[data-v-4bc7ae38]{color:var(--site-config-ssl-label);font-weight:700}.cert-info .cert-value[data-v-4bc7ae38]{flex:1;width:0;margin-left:4px}.business-top-tips[data-v-12873ea8]{background:var(--site-config-business-tips)}.n-alert[data-v-50ee5bfe]{--n-font-size: 12px}.cert-info[data-v-50ee5bfe]{display:flex;align-items:center;height:24px}.cert-info .cert-label[data-v-50ee5bfe]{color:var(--site-config-ssl-label);font-weight:700}.cert-info .cert-value[data-v-50ee5bfe]{flex:1;width:0;margin-left:4px}\n",document.head.appendChild(Fe);const Je={class:"cert-info"},He={class:"cert-label"},qe={class:"cert-value"},Ge={class:"cert-info"},Xe={class:"cert-label"},Ve={class:"cert-value"},We={class:"cert-info"},Ye={class:"cert-label"},Ke={class:"cert-value"},Qe={class:"cert-info"},Ze={class:"cert-label"},et={class:"cert-value"},tt={key:0,class:"text-primary"},at={key:1,class:"text-error"},nt={class:"cert-info"},st={class:"cert-label"},lt={class:"cert-value"},it={class:"w-48%"},dt={class:"mb-8px"},ot={class:"w-48%"},ut={class:"mb-8px"},rt=ie({__name:"index",props:{info:{default:null},isRenew:{type:Boolean,default:!1},loading:{type:Boolean,default:!1}},emits:["refresh"],setup(e,{expose:t,emit:a}){const _=e,p=a,{t:S}=de(),{data:m}=E(),y=n(),f=oe(-1),h=oe(!1),v=oe(!1),x=oe(""),g=oe("");let w="";const b=oe("");let C="";const j=oe({issuer:"",notAfter:"",notBefore:"",dns:[],subject:"",endtime:0}),P=ue((()=>f.value===B.LetsEncryptDeploy?S("Site.Cert.index_65"):f.value===B.BusinessDeploy?S("Site.Cert.index_64"):f.value===B.TestDeploy?S("Site.Cert.index_38"):S("Site.Cert.index_37"))),U=ue((()=>!!b.value)),O=ue((()=>_.isRenew||f.value===B.LetsEncryptDeploy)),A=ue((()=>!1)),z=ue((()=>h.value)),I=async e=>{e?(await k({siteName:m.name}),p("refresh")):D({title:S("Site.Cert.index_12"),content:S("Site.Cert.index_13"),onConfirm:async()=>{await L({siteName:m.name}),p("refresh")},onPublicClose:()=>{v.value=!0}})},T=()=>{""!==g.value.trim()&&""!==b.value.trim()?g.value!==w&&w||b.value!==C&&C?D({title:S("Site.Cert.index_10"),content:S("Site.Cert.index_11"),onConfirm:async()=>{await M()}}):M():s.error(S("Site.Cert.index_9"))},M=async()=>{const{message:e}=await l({key:g.value,cert:b.value});i(e)&&e.hash&&(await d({hash:e.hash,domains:JSON.stringify([m.name]),append:1}),s.success(S("SSL.index_32"))),H()},F=async()=>{const{message:e}=await o({hash:_.info?.hash||""});i(e)&&R({hideClose:!0,data:{isJump:!1,task_id:e.task_id,onFinish:()=>{p("refresh")}},component:G})},J=async()=>{await $({updateOf:1,siteName:m.name}),H()},H=()=>{p("refresh"),y.setRefresh(!0)};return re((()=>{const{info:e}=_;e&&(f.value=e.type,h.value=e.status,v.value=e.httpTohttps,g.value=e.key||"",w=e.key||"",b.value=e.csr||"",C=e.csr||"",j.value=e.cert_data,x.value=e.index)})),t({init:p("refresh")}),(e,t)=>{const a=u,n=X,s=V,l=W,i=r,d=Y,o=q,_=K,p=Q,S=N,m=c;return ce(),_e(m,{show:e.loading},{default:pe((()=>[Se(U)?(ce(),_e(d,{key:0,class:"mb-16px",type:"success","show-icon":!1},{default:pe((()=>[me(i,{"x-gap":12,cols:"15"},{default:pe((()=>[me(n,{span:"8"},{default:pe((()=>[ye("div",Je,[ye("div",He,fe(e.$t("Site.Cert.index_44"))+fe(e.$t("Public.Punctuation.Colon")),1),ye("div",qe,[me(a,null,{default:pe((()=>[he(fe(Se(P)),1)])),_:1})])])])),_:1}),me(n,{span:"7"},{default:pe((()=>[ye("div",Ge,[ye("div",Xe,fe(e.$t("Site.Cert.index_45"))+fe(e.$t("Public.Punctuation.Colon")),1),ye("div",Ve,[me(s,null,{default:pe((()=>[he(fe(Se(j).issuer||"other"),1)])),_:1})])])])),_:1}),me(n,{span:"8"},{default:pe((()=>[ye("div",We,[ye("div",Ye,fe(e.$t("Site.Cert.index_46"))+fe(e.$t("Public.Punctuation.Colon")),1),ye("div",Ke,[me(s,null,{default:pe((()=>[he(fe(Se(j).dns.join(e.$t("Public.Punctuation.Comma"))),1)])),_:1})])])])),_:1}),me(n,{span:"7"},{default:pe((()=>[ye("div",Qe,[ye("div",Ze,fe(e.$t("Site.Cert.index_47"))+fe(e.$t("Public.Punctuation.Colon")),1),ye("div",et,[Se(j).endtime>0?(ce(),ve("span",tt,fe(e.$t("Site.Cert.index_48",{date:Se(j).notAfter,days:Se(j).endtime})),1)):(ce(),ve("span",at,fe(e.$t("Site.Cert.index_47")),1))])])])),_:1}),me(n,{span:"8"},{default:pe((()=>[ye("div",nt,[ye("div",st,fe(e.$t("Site.Cert.index_49"))+fe(e.$t("Public.Punctuation.Colon")),1),ye("div",lt,[me(l,{value:Se(v),"onUpdate:value":[t[0]||(t[0]=e=>xe(v)?v.value=e:null),I],size:"small"},null,8,["value"])])])])),_:1})])),_:1})])),_:1})):ge("",!0),me(_,{class:"mb-16px",size:10,justify:"space-between"},{default:pe((()=>[ye("div",it,[ye("div",dt,fe(e.$t("Site.Cert.index_50")),1),me(o,{value:Se(g),"onUpdate:value":t[1]||(t[1]=e=>xe(g)?g.value=e:null),rows:10},null,8,["value"])]),ye("div",ot,[ye("div",ut,fe(e.$t("Site.Cert.index_51")),1),me(o,{value:Se(b),"onUpdate:value":t[2]||(t[2]=e=>xe(b)?b.value=e:null),rows:10},null,8,["value"])])])),_:1}),me(_,{class:"mb-12px"},{default:pe((()=>[me(p,{type:"primary",onClick:T},{default:pe((()=>[he(fe(Se(h)?e.$t("Public.Btn.Save"):e.$t("Site.Cert.index_52")),1)])),_:1}),Se(O)?(ce(),_e(p,{key:0,type:"primary",onClick:F},{default:pe((()=>[he(fe(e.$t("Site.Cert.index_53")),1)])),_:1})):ge("",!0),Se(A)?(ce(),_e(p,{key:1},{default:pe((()=>[he(fe(e.$t("Site.Cert.index_54")),1)])),_:1})):ge("",!0),Se(z)?(ce(),_e(p,{key:2,onClick:J},{default:pe((()=>[he(fe(e.$t("Site.Cert.index_55")),1)])),_:1})):ge("",!0)])),_:1}),me(S,null,{default:pe((()=>[ye("li",null,fe(e.$t("Site.Cert.index_33")),1),ye("li",null,fe(e.$t("Site.Cert.index_34")),1),ye("li",null,fe(e.$t("Site.Cert.index_35")),1),ye("li",null,fe(e.$t("Site.Cert.index_36")),1)])),_:1})])),_:1},8,["show"])}}}),ct=_(rt,[["__scopeId","data-v-4bc7ae38"]]),_t={class:"business-top-tips flex flex-wrap border-#d6e9c6 border-1px rounded-5px p-12px"},pt={class:"text-#3c763d w-100%"},St=_(ie({__name:"top-tips",setup(e){const{t:t}=de(),a=[t("SSL.SiteSSL.index_5"),t("SSL.SiteSSL.index_6"),t("SSL.SiteSSL.index_7"),t("SSL.SiteSSL.index_8"),t("SSL.SiteSSL.index_9"),t("SSL.SiteSSL.index_10"),t("SSL.SiteSSL.index_11")];return(e,t)=>{const n=p,s=K;return ce(),ve("div",_t,[(ce(),ve(we,null,be(a,((e,t)=>me(s,{size:5,key:e,class:Ce(["flex-nowrap! leading-20px",{"w-33%":t!==a.length-1}])},{default:pe((()=>[me(n,{name:"base-tick",size:16,color:"#ff8d00"}),ye("span",pt,fe(e),1)])),_:2},1032,["class"]))),64))])}}}),[["__scopeId","data-v-12873ea8"]]),mt={class:"my-10px"},yt=ie({__name:"table",setup(e){const a=$e((()=>h((()=>t.import("./index-legacy212.js?v=1763625242172")),void 0))),s=$e((()=>h((()=>t.import("./index-legacy213.js?v=1763625242172")),void 0))),l=$e((()=>h((()=>t.import("./domain-verification-legacy.js?v=1763625242172")),void 0))),d=S(),{userInfo:o}=Le(d),u=n(),{t:r}=de(),c=ke({p:1,limit:9999}),_=U(r("SSL.Business.index_41"),{onRefresh:(e,t)=>{x.data.request=!0,x.data.uc_id=t,x.data.verify=e,x.show=!0,C()}}),p=U(r("SSL.index_44")),v=U(r("SSL.index_49"),{onRefresh:()=>{C(),u.setRefresh(!0)}}),x=U(r("SSL.Business.index_42"),{onRefresh:()=>{C()}}),{table:g,columns:w}=O([{key:"verify_domains",title:r("Layout.Sider.mail_3"),render:e=>me("span",{innerHTML:e.verify_domains&&e.verify_domains.length>0?e.verify_domains.join("<br/>"):"--"},null)},{key:"title",title:r("Site.Cert.index_44"),render:e=>e.order_info.title,ellipsis:{tooltip:!0}},ze({title:r("SSL.index_54")}),{key:"order_status",title:r("SSL.Business.index_43"),render:e=>{const t=e.order_info;return t.certId||t.domains.length?!t.certId&&t.domains.length?me("span",{class:"color-warning"},[he(" "),r("SSL.Business.index_45"),he(" ")]):"PENDING"===t.order_status&&1===t.status?me("span",{class:"color-warning"},[he(" "),r("SSL.Business.index_46"),he(" ")]):"COMPLETE"===t.order_status&&1===t.status?me("span",{class:"color-#20a53a"},[he(" "),r("SSL.Business.index_47"),he(" ")]):"CANCELLED"===t.order_status&&1===t.status||-1===t.status?me("span",{class:"color-warning"},[he(" "),r("SSL.Business.index_48"),he(" ")]):"FAILED"===t.order_status&&1===t.status?me("span",{class:"color-error"},[he(" "),r("SSL.Business.index_49"),he(" ")]):"EXPIRED"===t.order_status&&1===t.status?me("span",{class:"color-warning"},[he(" "),r("SSL.Business.index_50"),he(" ")]):1!==t.status||["PENDING","COMPLETE","CANCELLED","FAILED","EXPIRED"].includes(t.order_status)?0===t.status?me("span",{class:"color-warning"},[he(" "),r("SSL.Business.index_52"),he(" ")]):void 0:me("span",{class:"color-warning"},[he(" "),r("SSL.Business.index_51"),he(" ")]):me("span",{class:"color-warning cursor-pointer",onClick:()=>b(e)},[" ",r("SSL.Business.index_44")," "])}},A({width:140,options:e=>[{show:!e.order_info.certId&&!e.order_info.domains.length,label:r("SSL.Business.index_53"),onClick:()=>{b(e)}},{show:"PENDING"===e.order_info.order_status&&1===e.order_info.status,label:r("SSL.Business.index_54"),onClick:async()=>{const{message:t}=await m({uc_id:e.order_info.uc_id});i(t)&&(x.data.uc_id=e.order_info.uc_id,x.data.verify=t.data,x.data.paths=t.paths,x.show=!0)}},{show:"COMPLETE"===e.order_info.order_status&&1===e.order_info.status,label:r("SSL.index_58"),onClick:async()=>{v.data.row=e,v.show=!0}},{show:"COMPLETE"===e.order_info.order_status&&1===e.order_info.status,label:r("Ftp.Label.index_11"),onClick:async()=>{const t=window.location.origin+"/v2/business_ssl?action=download_cert&uc_id="+e.order_info.uc_id;window.open(t)}},{show:!1,label:r("Public.Btn.Del"),onClick:()=>{D({title:r("SSL.index_59"),content:r("SSL.index_60"),onConfirm:async()=>{await y({hash:e.hash}),C()}})}}]})]),b=e=>{_.data.row=e,_.show=!0},C=async()=>{try{g.loading=!0;const{message:e}=await f(c);i(e)&&(g.data=e.data,g.total=e.total)}finally{g.loading=!1}};return o.value.status&&C(),(e,t)=>{const n=Q,i=I,d=Ae,u=Oe,c=Ue;return ce(),ve("div",mt,[me(c,{install:Se(o).status},{desc:pe((()=>[t[5]||(t[5]=ye("span",{class:"mr-10px"},"Business certificates require login panel to start using them",-1)),me(n,{type:"primary",onClick:Se(z)},{default:pe((()=>[he(fe(e.$t("Login.index_3")),1)])),_:1},8,["onClick"])])),default:pe((()=>[me(d,null,{toolsLeft:pe((()=>[me(n,{type:"primary",onClick:t[0]||(t[0]=e=>Se(p).show=!0)},{default:pe((()=>[he(fe(Se(r)("SSL.index_44")),1)])),_:1})])),table:pe((()=>[me(i,{loading:Se(g).loading,data:Se(g).data,columns:Se(w),"max-height":220},null,8,["loading","data","columns"])])),_:1}),me(u,{show:Se(p).show,"onUpdate:show":t[1]||(t[1]=e=>Se(p).show=e),title:Se(p).title,data:Se(p).data,"min-height":250,component:Ie},null,8,["show","title","data"]),me(u,{show:Se(_).show,"onUpdate:show":t[2]||(t[2]=e=>Se(_).show=e),title:Se(_).title,data:Se(_).data,width:650,"min-height":450,component:Se(a)},null,8,["show","title","data","component"]),me(u,{show:Se(v).show,"onUpdate:show":t[3]||(t[3]=e=>Se(v).show=e),title:Se(v).title,data:Se(v).data,width:720,height:530,component:Se(s)},null,8,["show","title","data","component"]),me(u,{show:Se(x).show,"onUpdate:show":t[4]||(t[4]=e=>Se(x).show=e),title:Se(x).title,data:Se(x).data,width:650,"min-height":450,component:Se(l)},null,8,["show","title","data","component"])])),_:1},8,["install"])])}}}),ft={class:"text-error"},ht=_({},[["render",function(e,t){const a=u,n=N;return ce(),_e(n,null,{default:pe((()=>[ye("li",ft,fe(e.$t("SSL.SiteSSL.index_1")),1),ye("li",null,fe(e.$t("SSL.SiteSSL.index_2")),1),ye("li",null,fe(e.$t("SSL.SiteSSL.index_3")),1),ye("li",null,[he(fe(e.$t("SSL.SiteSSL.index_4"))+" ",1),me(a,{href:"https://www.aapanel.com/docs/Function/BusinessCertificate.html",target:"_blank"},{default:pe((()=>[he(fe(e.$t("SSL.Business.index_20")),1)])),_:1})])])),_:1})}]]),vt=ie({__name:"index",setup:e=>(e,t)=>(ce(),ve("div",null,[me(St),me(yt),me(ht)]))}),xt={class:"cert-info"},gt={class:"cert-label"},wt={class:"cert-value"},bt={class:"cert-info"},Ct={class:"cert-label"},Lt={class:"cert-value"},kt={class:"cert-info"},$t={class:"cert-label"},jt={class:"cert-value"},Pt={class:"cert-info"},Bt={class:"cert-label"},Et={class:"cert-value"},Dt={key:0,class:"text-primary"},Rt={key:1,class:"text-error"},Nt={class:"w-48%"},Ut={class:"mb-8px"},Ot={class:"w-48%"},At={class:"mb-8px"},zt=ie({__name:"cert",emits:["update"],setup(e,{emit:t}){const a=t;de();const{data:s}=E(),l=n(),d=oe(!1),u=oe(1),_=oe(""),p=oe(""),S=ke({hash:"",issuer:"",notAfter:"",notBefore:"",dns:[],subject:"",endtime:0}),m=async()=>{const{message:e}=await o({hash:S.hash});i(e)&&R({hideClose:!0,data:{isJump:!1,task_id:e.task_id,onFinish:()=>{v()}},component:G})},y=async()=>{await $({updateOf:1,siteName:s.name}),a("update"),l.setRefresh(!0)},{loading:f,setLoading:h}=T(),v=async()=>{try{h(!0);const{message:e}=await j({siteName:s.name});i(e)&&(d.value=e.status,S.hash=e.hash,S.issuer=e.cert_data.issuer,S.notAfter=e.cert_data.notAfter,S.notBefore=e.cert_data.notBefore,S.dns=e.cert_data.dns,S.subject=e.cert_data.subject,S.endtime=e.cert_data.endtime,_.value=e.key,p.value=e.csr,u.value=e.auto_renew)}finally{h(!1)}};return v(),(e,t)=>{const a=X,n=V,s=r,l=Y,i=q,d=K,o=Q,h=N,v=c;return ce(),_e(v,{show:Se(f)},{default:pe((()=>[me(l,{class:"mb-16px",type:"success","show-icon":!1},{default:pe((()=>[me(s,{"x-gap":12,cols:"15"},{default:pe((()=>[Se(u)?(ce(),_e(a,{key:0,span:"16"},{default:pe((()=>[ye("div",xt,[ye("div",gt,fe(e.$t("SSL.SiteSSL.index_22"))+"：",1),ye("div",wt,fe(e.$t("SSL.SiteSSL.index_23")),1)])])),_:1})):ge("",!0),me(a,{span:"7"},{default:pe((()=>[ye("div",bt,[ye("div",Ct,fe(e.$t("Site.Cert.index_45"))+"：",1),ye("div",Lt,[me(n,null,{default:pe((()=>[he(fe(Se(S).issuer),1)])),_:1})])])])),_:1}),me(a,{span:"8"},{default:pe((()=>[ye("div",kt,[ye("div",$t,fe(e.$t("Site.Cert.index_46"))+"：",1),ye("div",jt,[me(n,null,{default:pe((()=>[he(fe(Se(S).dns.join(e.$t("Public.Punctuation.Comma"))),1)])),_:1})])])])),_:1}),me(a,{span:"7"},{default:pe((()=>[ye("div",Pt,[ye("div",Bt,fe(e.$t("Site.Cert.index_47"))+fe(e.$t("Public.Punctuation.Colon")),1),ye("div",Et,[Se(S).endtime>0?(ce(),ve("span",Dt,fe(e.$t("Site.Cert.index_48",{date:Se(S).notAfter,days:Se(S).endtime})),1)):(ce(),ve("span",Rt,fe(e.$t("Site.Cert.index_47")),1))])])])),_:1})])),_:1})])),_:1}),me(d,{class:"mb-16px",size:10,justify:"space-between"},{default:pe((()=>[ye("div",Nt,[ye("div",Ut,fe(e.$t("Site.Cert.index_50")),1),me(i,{readonly:"",value:Se(_),"onUpdate:value":t[0]||(t[0]=e=>xe(_)?_.value=e:null),rows:14},null,8,["value"])]),ye("div",Ot,[ye("div",At,fe(e.$t("Site.Cert.index_51")),1),me(i,{readonly:"",value:Se(p),"onUpdate:value":t[1]||(t[1]=e=>xe(p)?p.value=e:null),rows:14},null,8,["value"])])])),_:1}),me(d,{class:"mb-12px"},{default:pe((()=>[me(o,{type:"primary",onClick:m},{default:pe((()=>[he(fe(e.$t("Site.Cert.index_53")),1)])),_:1}),me(o,{onClick:y},{default:pe((()=>[he(fe(e.$t("Site.Cert.index_55")),1)])),_:1})])),_:1}),me(h,null,{default:pe((()=>[ye("li",null,fe(e.$t("SSL.SiteSSL.index_24")),1),ye("li",null,fe(e.$t("SSL.SiteSSL.index_25")),1)])),_:1})])),_:1},8,["show"])}}}),It=_(zt,[["__scopeId","data-v-50ee5bfe"]]),Tt={class:"flex items-center"},Mt={class:"leading-17px"},Ft={class:"w-full"},Jt={class:"w-full"},Ht={class:"text-error"},qt=ie({__name:"apply",emits:["update"],setup(e,{emit:t}){const a=je(),{t:l}=de(),{data:d}=E(),o=n(),u=t,r=ke({auth_type:"http",dns_manual:0,auto_wildcard:0,domains:[],all:!1}),_={domains:{required:!0,trigger:"change",type:"array",message:l("SSL.SiteSSL.index_16")}},S=oe(null),m=oe([]),y=e=>m.value.find((t=>t.name===e))?.auto,f=()=>{a.push("/ssl_domain/domain")},h=ue((()=>r.domains.length>0&&r.domains.length<m.value.length));Pe((()=>r.domains),(e=>{e.length===m.value.length?r.all=!0:e.length||(r.all=!1)})),Pe((()=>r.all),(e=>{e?(r.domains=m.value.map((e=>e.name)),S.value?.validate()):r.domains=[]})),Pe((()=>r.auth_type),(e=>{"dns"===e?(r.domains=m.value.filter((e=>e.auto)).map((e=>e.name)),S.value?.validate()):r.domains=[]}));const C=ue((()=>r.domains.filter((e=>!y(e))))),L=async()=>{if(await(S.value?.validate()),"dns"===r.auth_type&&C.value.length&&!r.dns_manual)return void s.error({content:()=>Re("span",{innerHTML:`${C.value.join("<br/>")}${l("SSL.SiteSSL.index_14")}`})});let e={auth_type:r.dns_manual?"dns_manual":r.auth_type,auto_wildcard:r.auto_wildcard,domains:JSON.stringify(r.domains),site_id:r.dns_manual?d.id:void 0,deploy:r.dns_manual?0:1};if(r.dns_manual&&"dns"===r.auth_type){const{message:t}=await v({site_id:d.id,domains:JSON.stringify(r.domains)});if(i(t)&&Object.keys(t).length)return void M(t.auths,d.id,r.domains,(()=>{u("update"),o.setRefresh(!0)}),!0);const n=R({width:500,height:300,hideClose:!0,component:F});try{const{message:t}=await x(e,!1);i(t)&&(t.deploy?(s.success(t.result||l("SSL.index_32")),u("update"),o.setRefresh(!0)):Array.isArray(t.auths)&&t.auths.length&&M(t.auths,d.id,r.domains,(()=>{u("update"),o.setRefresh(!0)})))}catch(a){J(Z(a,"message",""))}finally{n.hide()}return}const{message:t}=await x(e);i(t)&&R({hideClose:!0,data:{isJump:!1,task_id:t.task_id,onFinish:()=>{u("update"),o.setRefresh(!0)}},component:G})},{loading:k,setLoading:$}=T();return Be((()=>{(async()=>{try{$(!0);const{message:e}=await Me({id:d.id});if(g(e)){const t=e.map((async e=>{const{message:t}=await w({domain:e.name});i(t)&&m.value.push({name:e.name,auto:t.support.includes("auto")})}));await Promise.all(t)}}finally{$(!1)}})()})),(e,t)=>{const a=p,n=Y,s=ee,l=b,i=te,d=ae,o=ne,u=K,v=se,x=le,g=c,w=Q,$=Te,j=N;return ce(),ve("div",null,[Ee(me(n,{"show-icon":!1,class:"mb-10px"},{default:pe((()=>[ye("div",Tt,[me(a,{name:"base-info",size:"17",class:"mr-8px"}),ye("span",Mt,fe(e.$t("SSL.SiteSSL.index_12")),1)])])),_:1},512),[[De,"dns"===Se(r).auth_type]]),me($,{ref_key:"formRef",ref:S,model:Se(r),rules:_,"label-width":"140"},{default:pe((()=>[me(d,{label:e.$t("Config.Safe.Ssl.index_2")},{default:pe((()=>[me(i,{value:Se(r).auth_type,"onUpdate:value":t[0]||(t[0]=e=>Se(r).auth_type=e)},{default:pe((()=>[me(l,null,{default:pe((()=>[me(s,{value:"http"},{default:pe((()=>[he(fe(e.$t("SSL.SiteSSL.index_17")),1)])),_:1}),me(s,{value:"dns"},{default:pe((()=>[he(fe(e.$t("SSL.index_12"))+" (Wildcard support) ",1)])),_:1})])),_:1})])),_:1},8,["value"])])),_:1},8,["label"]),Ee(me(d,{label:" ","show-feedback":!1},{default:pe((()=>[me(o,{checked:Se(r).dns_manual,"onUpdate:checked":t[1]||(t[1]=e=>Se(r).dns_manual=e),"checked-value":1,"unchecked-value":0},{default:pe((()=>[he(fe(e.$t("SSL.index_2")),1)])),_:1},8,["checked"])])),_:1},512),[[De,"dns"===Se(r).auth_type]]),Ee(me(d,{label:" "},{default:pe((()=>[me(o,{checked:Se(r).auto_wildcard,"onUpdate:checked":t[2]||(t[2]=e=>Se(r).auto_wildcard=e),"checked-value":1,"unchecked-value":0},{default:pe((()=>[he(fe(e.$t("SSL.SiteSSL.index_20")),1)])),_:1},8,["checked"])])),_:1},512),[[De,"dns"===Se(r).auth_type]]),me(d,{label:e.$t("Mail.Domain.index_3"),path:"domains"},{default:pe((()=>[me(g,{show:Se(k),class:"p-12px w-300px max-h-300px min-h-100px overflow-auto border border-solid border-#ccc"},{default:pe((()=>[me(o,{class:"mb-12px",checked:Se(r).all,"onUpdate:checked":t[3]||(t[3]=e=>Se(r).all=e),label:e.$t("Public.SelectAll"),indeterminate:Se(h)},null,8,["checked","label","indeterminate"]),Se(m).length?(ce(),_e(v,{key:0,value:Se(r).domains,"onUpdate:value":t[4]||(t[4]=e=>Se(r).domains=e)},{default:pe((()=>[me(u,{class:"flex-col!",size:12},{default:pe((()=>[(ce(!0),ve(we,null,be(Se(m),(e=>(ce(),_e(o,{key:e.name,value:e.name,label:e.name},null,8,["value","label"])))),128))])),_:1})])),_:1},8,["value"])):(ce(),_e(x,{key:1,description:"No domain name"}))])),_:1},8,["show"])])),_:1},8,["label"]),Ee(me(d,{label:" "},{default:pe((()=>[me(n,{"show-icon":!1,type:Se(C).length?"warning":"success"},{default:pe((()=>[(ce(!0),ve(we,null,be(Se(r).domains,(t=>(ce(),_e(u,{key:t},{default:pe((()=>[y(t)?(ce(),_e(u,{key:0,class:"flex-nowrap! py-3px"},{default:pe((()=>[me(a,{name:"base-success",size:"17",color:"#20a53a"}),ye("span",Ft,"["+fe(t)+"] "+fe(e.$t("SSL.SiteSSL.index_13")),1)])),_:2},1024)):(ce(),_e(u,{key:1,class:"flex-nowrap! py-3px items-center!"},{default:pe((()=>[me(a,{name:"base-error",size:"17",color:"#E85445"}),ye("span",Jt,"["+fe(t)+"] "+fe(e.$t("SSL.SiteSSL.index_14")),1),me(w,{type:"primary",size:"tiny",onClick:f},{default:pe((()=>[he(fe(e.$t("SSL.SiteSSL.index_21")),1)])),_:1})])),_:2},1024))])),_:2},1024)))),128))])),_:1},8,["type"])])),_:1},512),[[De,"dns"===Se(r).auth_type&&Se(r).domains.length&&!Se(r).dns_manual]]),me(d,{label:" "},{default:pe((()=>[me(w,{type:"primary",onClick:L},{default:pe((()=>[he(fe(e.$t("Public.Btn.Apply")),1)])),_:1})])),_:1})])),_:1},8,["model"]),Ee(me(j,{class:"mt-16px"},{default:pe((()=>[ye("li",Ht,fe(e.$t("SSL.SiteSSL.index_15")),1),ye("li",null,fe(e.$t("Site.Cert.index_21")),1),ye("li",null,fe(e.$t("Site.Cert.index_23")),1),ye("li",null,fe(e.$t("Site.Cert.index_24")),1)])),_:1},512),[[De,"http"===Se(r).auth_type]]),Ee(me(j,{class:"mt-24px"},{default:pe((()=>[t[5]||(t[5]=ye("li",null,"Manually resolved certificates do not support auto-renewal",-1)),ye("li",null,fe(e.$t("Site.Cert.index_25")),1),ye("li",null,fe(e.$t("Site.Cert.index_26")),1),ye("li",null,fe(e.$t("Site.Cert.index_27")),1),ye("li",null,fe(e.$t("Site.Cert.index_28")),1)])),_:1,__:[5]},512),[[De,"dns"===Se(r).auth_type]])])}}}),Gt=ie({__name:"index",props:{isOpen:{type:Boolean},type:{},onRefresh:{type:Function}},setup(e){const t=e,a=()=>{t.onRefresh()};return(e,n)=>(ce(),ve("div",null,[t.isOpen&&"Let's Encrypt"===t.type?(ce(),_e(It,{key:0,onUpdate:a})):(ce(),_e(qt,{key:1,onUpdate:a}))]))}}),Xt=ie({__name:"index",props:{onMenuChange:{type:Function}},setup(e,{expose:t}){const{data:a}=E(),{t:n}=de(),l=ke({p:1,limit:99999}),{columns:o,table:u}=O([{key:"domain",title:n("Site.Cert.index_29"),render:e=>me("span",{innerHTML:e.verify_domains.length>0?e.verify_domains.join("<br/>"):"--"},null)},ze({title:n("SSL.index_54"),width:140}),{key:"issuer",title:n("Site.Cert.index_30"),ellipsis:{tooltip:!0}},A({width:150,options:t=>[{label:n("Public.Btn.Deploy"),onClick:async()=>{try{await d({hash:t.hash,domains:JSON.stringify([a.name]),append:1}),s.success(n("SSL.index_32")),setTimeout((()=>{e.onMenuChange()}),500)}catch(l){console.log(l)}}},{show:"Let's Encrypt"===t.provider,label:n("Public.Btn.Del"),onClick:()=>{(e=>{H({title:n("Site.Cert.index_31"),content:n("Site.Cert.index_32"),onConfirm:async()=>{await y({hash:e.hash}),_()}})})(t)}}]})]),{loading:r,setLoading:c}=T(!0),_=async()=>{try{c(!0);const{message:e}=await C(l);i(e)&&(u.data=e.data)}finally{c(!1)}};return _(),t({init:_}),(e,t)=>{const a=I;return ce(),ve("div",null,[me(a,{loading:Se(r),columns:Se(o),data:Se(u).data,"max-height":510},null,8,["loading","columns","data"])])}}}),Vt={class:"mr-12px"},Wt={key:0,class:"mr-12px"},Yt={key:1,class:"mr-12px"};e("default",ie({__name:"index",setup(e,{expose:t}){const s=n(),{data:l}=E(),{t:d}=de(),u=oe("current"),r=oe(""),c=oe(B.NotDeploy),_=oe(""),p=oe(!1),S=oe(0),m=oe(!1),y=oe(""),f=async()=>{const{message:e}=await o({hash:r.value});i(e)&&R({hideClose:!0,data:{isJump:!1,task_id:e.task_id,onFinish:()=>{v()}},component:G})},h=e=>{x.value[0].data&&(x.value[0].data.loading=e)},v=async()=>{try{h(!0);const{message:a}=await P({siteName:l.name});i(a)&&(c.value=a.type,p.value=a.status,S.value=Z(a,"cert_data.endtime",0),y.value=a.cert_data.issuer_O||"",m.value=(()=>{let e=!1;return S.value<=30&&(e=!0),c.value===B.TestDeploy&&S.value<0&&(e=!0),c.value!==B.SaveOrHolderDeploy&&c.value!==B.NotDeploy||(e=!1),e})(),_.value=a.cert_data.dns.join(","),r.value=a.hash,t=a,x.value[0].data&&(x.value[0].data.info=t),e=m.value,x.value[0].data&&(x.value[0].data.isRenew=e))}catch{p.value=!1,m.value=!1}finally{h(!1)}var e,t},x=oe([{key:"current",label:()=>me("div",null,[me("span",null,[he("Current Certs - ")]),me("span",{class:p.value?"text-#1d9534":"text-red-500"},[he("["),p.value?"Deployed":"Not Deployed",he("]")])]),data:{info:null,isRenew:!1,loading:!0,onRefresh:v},component:Ne(ct)},{key:"business",label:d("Site.Cert.index_64"),component:Ne(vt)},{key:"let",label:d("Site.Cert.index_65"),data:{isOpen:ue((()=>p.value)),type:ue((()=>y.value)),onRefresh:v},component:Ne(Gt)},{key:"holder",label:d("Site.Cert.index_66"),component:Ne(Xt),data:{onMenuChange:()=>{u.value="current",v(),s.setRefresh(!0)}}}]);return t({init:()=>{v()}}),(e,t)=>{const n=Q,s=Y,l=a;return ce(),ve("div",null,[Se(p)?ge("",!0):(ce(),_e(s,{key:0,class:"mb-12px",type:"error","show-icon":!1,style:{"--n-padding":"9px 16px"}},{default:pe((()=>[ye("span",Vt,fe(e.$t("Site.Cert.index_41")),1),me(n,{size:"tiny",type:"primary",onClick:t[0]||(t[0]=e=>u.value="business")},{default:pe((()=>[he(fe(e.$t("Site.Cert.index_43")),1)])),_:1})])),_:1})),Se(p)&&Se(m)?(ce(),_e(s,{key:1,class:"mb-12px",type:"error","show-icon":!1,style:{"--n-padding":"9px 16px"}},{default:pe((()=>[Se(S)>0?(ce(),ve("span",Wt,fe(e.$t("SSL.SiteSSL.index_26",[Se(_),Se(S)])),1)):(ce(),ve("span",Yt,fe(e.$t("SSL.SiteSSL.index_19",[Se(_)])),1)),me(n,{size:"tiny",type:"primary",onClick:f},{default:pe((()=>[he(fe(e.$t("Site.Cert.index_53")),1)])),_:1})])),_:1})):ge("",!0),me(l,{value:Se(u),"onUpdate:value":t[1]||(t[1]=e=>xe(u)?u.value=e:null),options:Se(x)},null,8,["value","options"])])}}}))}}}));
