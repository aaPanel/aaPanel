import{_ as e}from"./index109.js?v=1767769852656";import{d as a,_ as s,a as l,c as t,h as n}from"./public.js?v=1767769852656";import{_ as i}from"./index99.js?v=1767769852656";import{ae as o,af as r}from"./mail.js?v=1767769852656";import{s as d}from"./index50.js?v=1767769852656";import{m as u,p as c,gK as p,gL as _,d as m}from"./page_layout.js?v=1767769852656";import{da as f,dj as y,dk as v,aC as h,dR as x}from"./naive.js?v=1767769852656";import{k as b,P as w,r as k,c as j,R as g,V as C,a2 as S,an as $,W as D,U as L,a3 as P,S as U,a4 as z,ak as M,j as R,am as A,e as B}from"./vue.js?v=1767769852656";import{_ as V}from"./index.vue_vue_type_script_setup_true_lang.js?v=1767769852656";import"./common.js?v=1767769852656";import"./__commonjsHelpers__.js?v=1767769852656";import"./index.js?v=1767769852656";import"./index.vue_vue_type_script_setup_true_lang5.js?v=1767769852656";import"./index.vue_vue_type_script_setup_true_lang6.js?v=1767769852656";import"./index.vue_vue_type_script_setup_true_lang7.js?v=1767769852656";const G={class:"cert-info"},N={class:"cert-label"},O={class:"cert-value"},q={class:"cert-info"},H={class:"cert-label"},I={class:"cert-value"},K={class:"cert-info mt-10px"},T={class:"cert-label mr-10px"},W={class:"w-48%"},Y={class:"mb-8px"},E={class:"w-48%"},F={class:"mb-8px"},J=c(b({__name:"index",props:{row:{}},emits:["close","refresh"],setup(e,{emit:t}){const n=e,c=t,{row:p}=n,{t:_}=w(),m=k(p.ssl_info.key||""),x=k(p.ssl_info.src||""),b=j(()=>(p.ssl_info.dns||[]).join(", ")),A=async()=>{""!==m.value&&""!==x.value?(await o({domain:p.domain,key:m.value,csr:x.value}),c("refresh"),c("close")):u.error(_("Mail.Domain.index_31"))},B=()=>{l({title:_("Mail.Domain.index_32"),content:_("Mail.Domain.index_33"),onConfirm:async()=>{await r({domain:p.domain,key:m.value,csr:x.value}),c("refresh"),c("close")}})},{loading:V,setLoading:J}=a(),Q=async e=>{try{J(!0),await d({domain:p.domain,open:e}),p.ssl_alarm=e}catch(a){p.ssl_alarm=1===e?0:1}finally{J(!1)}};return(e,a)=>{const l=f,t=y,n=v,o=i,r=h,d=s;return C(),g("div",null,[L(p).ssl_status?(C(),S(n,{key:0,class:"mb-16px",type:"success","show-icon":!1},{default:P(()=>[D(l,{class:"items-center"},{default:P(()=>[U("div",G,[U("span",N,z(e.$t("Site.Cert.index_30"))+z(e.$t("Public.Punctuation.Colon")),1),U("span",O,z(L(p).ssl_info.issuer),1)]),U("div",q,[U("span",H,z(e.$t("Site.Cert.index_46"))+z(e.$t("Public.Punctuation.Colon")),1),U("span",I,z(L(b)),1)])]),_:1}),U("div",K,[U("span",T,z(e.$t("SSL.Domain.index_26")),1),D(t,{size:"small",loading:L(V),"rubber-band":!1,value:L(p).ssl_alarm,"onUpdate:value":Q,"checked-value":1,"unchecked-value":0},null,8,["loading","value"])])]),_:1})):$("",!0),D(l,{class:"mb-16px",size:10,justify:"space-between"},{default:P(()=>[U("div",W,[U("div",Y,z(e.$t("Site.Cert.index_50")),1),D(o,{value:L(m),"onUpdate:value":a[0]||(a[0]=e=>M(m)?m.value=e:null),rows:10},null,8,["value"])]),U("div",E,[U("div",F,z(e.$t("Site.Cert.index_51")),1),D(o,{value:L(x),"onUpdate:value":a[1]||(a[1]=e=>M(x)?x.value=e:null),rows:10},null,8,["value"])])]),_:1}),D(l,{class:"mb-12px"},{default:P(()=>[D(r,{type:"primary",onClick:A},{default:P(()=>[R(z(e.$t("Public.Btn.Save")),1)]),_:1}),D(r,{onClick:B},{default:P(()=>[R(z(e.$t("Public.Btn.Delete")),1)]),_:1})]),_:1}),D(d,null,{default:P(()=>[U("li",null,z(e.$t("Site.Cert.index_33")),1),U("li",null,z(e.$t("Site.Cert.index_34")),1),U("li",null,z(e.$t("Site.Cert.index_35")),1),U("li",null,z(e.$t("Site.Cert.index_36")),1)]),_:1})])}}}),[["__scopeId","data-v-ec749ad6"]]),Q={key:0},X={key:1},Z={class:"color-#3c763d"},ee={class:"color-#3c763d"},ae=b({__name:"index",props:{row:{}},emits:["refresh"],setup(e,{emit:a}){const s=e,l=a,{row:i}=s,o=A(),r=B({ssl_method:"2"}),d=k({}),u=j(()=>i.ssl_hash&&Object.keys(d.value).length>0),{table:c,columns:y}=t([{key:"type",title:"Type",width:50},{key:"record",title:"Record",width:120,ellipsis:{tooltip:!0}},{key:"value",title:"Value",ellipsis:{tooltip:!0}},{key:"necessary",title:"Necessary"}]),b=()=>{o.push("/ssl_domain/domain")},w=async()=>{},M=async()=>{await p({hash:i.ssl_hash,domain:i.domain}),l("refresh")};return(async()=>{if(i.ssl_hash){const{message:e}=await _({hash:i.ssl_hash});m(e)&&(d.value=e,r.ssl_method="2")}})(),(e,a)=>{const s=v,l=x,t=h,o=f,p=n,_=V;return C(),S(_,{model:L(r),"label-width":"180px"},{default:P(()=>[D(l,{label:"Domain name"},{default:P(()=>[D(s,{class:"min-w-250px h-36px",type:"default","show-icon":!1},{default:P(()=>[U("span",null,z(L(i).domain),1)]),_:1})]),_:1}),D(l,{label:"SSL to be applied for"},{default:P(()=>[D(s,{class:"min-w-250px h-36px",type:"default","show-icon":!1},{default:P(()=>[L(d).dns?(C(),g("span",Q,z(L(d).dns.join(",")),1)):(C(),g("span",X,"--"))]),_:1})]),_:1}),"1"===L(r).ssl_method?(C(),S(l,{key:0,label:" "},{default:P(()=>[D(o,{class:"flex-col!"},{default:P(()=>[D(s,{type:"warning"},{default:P(()=>[D(o,{class:"items-center flex-nowrap!"},{default:P(()=>[a[1]||(a[1]=U("span",null,"After clicking Generate, the system will submit a verification request to Lets encrypt for you, please follow the prompts to your domain name hosting provider to add the corresponding resolution",-1)),D(t,{type:"primary",size:"small",ghost:"",onClick:w},{default:P(()=>a[0]||(a[0]=[R("Generate",-1)])),_:1,__:[0]})]),_:1,__:[1]})]),_:1}),D(p,{columns:L(y),data:L(c).data},null,8,["columns","data"])]),_:1})]),_:1})):(C(),S(l,{key:1,label:" "},{default:P(()=>[D(o,{class:"flex-col!"},{default:P(()=>[L(u)?(C(),S(s,{key:1,type:"success"},{default:P(()=>a[4]||(a[4]=[U("span",{class:"color-#3c763d font-bold"},"Does the system find a matching certificate for you and deploy it immediately?",-1)])),_:1,__:[4]})):(C(),S(s,{key:0,type:"error"},{default:P(()=>[D(o,{class:"items-center flex-nowrap!"},{default:P(()=>[a[3]||(a[3]=U("span",null,"Your domain has not yet been integrated with the domain management center.",-1)),D(t,{type:"primary",size:"small",ghost:"",onClick:b},{default:P(()=>a[2]||(a[2]=[R("Add Now",-1)])),_:1,__:[2]})]),_:1,__:[3]})]),_:1})),L(u)?(C(),S(o,{key:2,class:"flex-col!"},{default:P(()=>[a[7]||(a[7]=U("div",null,"Valid certificate",-1)),D(s,{type:"success","show-icon":!1},{default:P(()=>[U("div",Z,[a[5]||(a[5]=U("span",{class:"font-bold"},"Brand：",-1)),R(z(L(d).info.issuer_O+" "+L(d).info.issuer),1)]),U("div",ee,[a[6]||(a[6]=U("span",{class:"font-bold"},"Certificate domain(s)：",-1)),R(" "+z(L(d).dns.join(",")),1)])]),_:1})]),_:1,__:[7]})):$("",!0)]),_:1})]),_:1})),D(l,{label:" "},{default:P(()=>[D(t,{type:"primary",onClick:M,disabled:!L(u)},{default:P(()=>[R(z(e.$t("SSL.index_29")),1)]),_:1},8,["disabled"])]),_:1})]),_:1},8,["model"])}}}),se={class:"h-full p-16px"},le=b({__name:"index",props:{row:{}},emits:["close","refresh"],setup(a,{emit:s}){const l=a,t=s,{row:n}=l,{t:i}=w(),o={row:n,onClose:()=>{t("close")},onRefresh:()=>{t("refresh")}},r=k("other"),d=[{key:"other",label:i("Mail.Domain.index_30"),component:J},{key:"apply",label:"Apply for SSL",component:ae}];return(a,s)=>{const l=e;return C(),g("div",se,[D(l,{value:L(r),"onUpdate:value":s[0]||(s[0]=e=>M(r)?r.value=e:null),data:o,options:d},null,8,["value"])])}}});export{le as default};
