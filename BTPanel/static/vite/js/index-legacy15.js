System.register(["./page_layout-legacy.js?v=1767769852656","./index-legacy.js?v=1767769852656","./public-legacy.js?v=1767769852656","./index.vue_vue_type_script_setup_true_lang-legacy.js?v=1767769852656","./vue-legacy.js?v=1767769852656","./backup-info-legacy.js?v=1767769852656","./utils-legacy.js?v=1767769852656","./naive-legacy.js?v=1767769852656"],function(e,t){"use strict";var a,s,o,l,n,i,r,d,p,u,c,_,g,h,m,w,f,x,b,y,v,C,k,M,j,T,U,q,P,$,D,O,S,R,z,B,E,I;return{setters:[e=>{a=e.T,s=e.n,o=e._,l=e.aE,n=e.i,i=e.a,r=e.d},e=>{d=e._},e=>{p=e.e,u=e.p,c=e._},e=>{_=e._},e=>{g=e.k,h=e.P,m=e.a0,w=e.a2,f=e.V,x=e.U,b=e.a3,y=e.W,v=e.S,C=e.j,k=e.a4,M=e.e,j=e.r,T=e._,U=e.a5},e=>{q=e.default},e=>{P=e.u},e=>{$=e.dR,D=e.da,O=e.dd,S=e.dh,R=e.dk,z=e.au,B=e.df,E=e.aC,I=e.dS}],execute:function(){const V=g({__name:"index",setup(e){const{t:t}=h(),l=P(),{loading:n,backupData:i}=m(l);return l.getData(),(e,l)=>{const r=O,d=o,p=S,u=D,c=$,g=_,h=a;return f(),w(h,{show:x(n),class:"p-16px"},{default:b(()=>[y(g,{ref:"formRef"},{default:b(()=>[y(c,{label:x(t)("Config.Migrate.index_10")},{default:b(()=>[y(u,null,{default:b(()=>[y(r,{class:"mr-8px"},{default:b(()=>[C(k(x(s)(x(i).disk_use)),1)]),_:1}),v("div",null,[v("span",null,k(x(t)("Config.Migrate.index_11")),1),y(r,{type:"success",class:"ml-16px mr-8px"},{default:b(()=>[C(k(x(s)(x(i).disk_free)),1)]),_:1}),y(p,{trigger:"hover",placement:"top-start"},{trigger:b(()=>[y(d,{name:"base-warning",class:"text-warning mr-4px",size:"16"})]),default:b(()=>[v("span",null,[v("li",null,k(x(t)("Config.Migrate.index_12"))+" "+k(x(s)(1.5*x(i).disk_use)),1),v("li",null,k(x(t)("Config.Migrate.index_13")),1)])]),_:1})])]),_:1})]),_:1},8,["label"]),y(c,{label:"Backup Data"},{default:b(()=>[y(q,{class:"w-600px"})]),_:1})]),_:1},512)]),_:1},8,["show"])}}}),W=(e("g",()=>l.post("/mod/backup_restore/com/get_migrate_progress")),e("c",()=>l.post("/mod/backup_restore/com/stop_migrate",{},{requestOptions:{loading:n.global.t("Component.Pay.index_12"),successMessage:!0}})),e("a",()=>l.post("/mod/backup_restore/com/close_migrate_popup",{},{requestOptions:{loading:n.global.t("Component.Pay.index_12"),successMessage:!1}})),g({__name:"index",setup(e){const a=T(()=>i(()=>t.import("./index-legacy116.js?v=1767769852656"),void 0)),s=T(()=>i(()=>t.import("./migrate-success-legacy.js?v=1767769852656"),void 0)),o=T(()=>i(()=>t.import("./migrate-error-legacy.js?v=1767769852656"),void 0)),{t:g}=h(),m=p(g("Config.Migrate.index_4")),q=p(g("Config.Migrate.index_5"),{onRefresh:(e,t)=>{"success"===e?(P.data=t,P.show=!0):(O.data.errData=t,O.show=!0)}}),P=p(g("Config.Migrate.index_6")),O=p(g("Config.Migrate.index_7"),{onRetry:e=>{O.show=!1,q.show=!1,W.ip=e.server_ip,W.port=e.ssh_port,W.account=e.ssh_user,W.password=e.password,H()}}),S=j(null),W=M({ip:"",port:22,account:"",password:""}),A={ip:{required:!0,message:g("Term.index_9"),trigger:["blur","input"]},port:{required:!0,type:"number",message:g("Security.Conf.Index_28"),trigger:["blur","input"]},account:{required:!0,message:g("Term.index_11"),trigger:["blur","input"]},password:{required:!0,message:g("Term.index_14"),trigger:["blur","input"]}},F=()=>{m.show=!0},G=()=>({auth_type:"password",server_ip:W.ip,ssh_port:W.port,ssh_user:W.account,password:W.password,ps:W.ip}),H=async()=>{await(S.value?.validate()),u({title:g("Config.Migrate.index_8"),content:()=>y("span",null,[y(U("i18n-t"),{keypath:"Config.Migrate.index_9",scope:"global"},{default:()=>[y("b",{class:"color-warning text-2xl"},[C(" "),W.ip,C(" ")])]})]),onConfirm:async()=>{var e;await(e=G(),l.post("/mod/backup_restore/com/ssh_auth_check",e,{requestOptions:{loading:n.global.t("Component.Pay.index_12"),successMessage:!0}})),await(e=>l.post("/mod/backup_restore/com/add_migrate_task",e,{requestOptions:{loading:n.global.t("Component.Pay.index_12"),successMessage:!0}}))(G()),q.show=!0}})};return(async()=>{const{message:e}=await l.post("/mod/backup_restore/com/get_migrate_status");r(e)&&e.is_running&&(q.show=!0,W.ip=e.server_ip,W.port=e.ssh_port,W.account=e.ssh_user,W.password=e.password)})(),(e,t)=>{const l=z,n=$,i=B,r=D,p=E,u=_,h=c,M=d,j=I;return f(),w(j,{class:"p-16px"},{default:b(()=>[y(x(R),{type:"warning",class:"mb-16px"},{default:b(()=>[v("span",null,k(x(g)("Config.Migrate.index_1")),1)]),_:1}),y(u,{ref_key:"formRef",ref:S,model:x(W),rules:A},{default:b(()=>[y(r,null,{default:b(()=>[y(n,{label:e.$t("Term.index_8"),path:"ip"},{default:b(()=>[y(l,{class:"w-190px!",value:x(W).ip,"onUpdate:value":t[0]||(t[0]=e=>x(W).ip=e),placeholder:e.$t("Term.index_9")},null,8,["value","placeholder"])]),_:1},8,["label"]),y(n,{path:"port"},{default:b(()=>[y(i,{"show-button":!1,class:"w-80px!",value:x(W).port,"onUpdate:value":t[1]||(t[1]=e=>x(W).port=e),placeholder:e.$t("Docker.Container.create.index_7")},null,8,["value","placeholder"])]),_:1})]),_:1}),y(n,{label:e.$t("Term.index_10"),path:"account"},{default:b(()=>[y(l,{class:"w-280px!",value:x(W).account,"onUpdate:value":t[2]||(t[2]=e=>x(W).account=e),placeholder:e.$t("Term.index_11")},null,8,["value","placeholder"])]),_:1},8,["label"]),y(n,{label:e.$t("Database.index_14"),path:"password"},{default:b(()=>[y(l,{class:"w-280px!",value:x(W).password,"onUpdate:value":t[3]||(t[3]=e=>x(W).password=e),placeholder:e.$t("Term.index_14")},null,8,["value","placeholder"])]),_:1},8,["label"]),y(n,{label:" "},{default:b(()=>[y(p,{type:"primary",onClick:H},{default:b(()=>[C(k(x(g)("Config.Migrate.index_2")),1)]),_:1})]),_:1})]),_:1},8,["model"]),y(h,null,{default:b(()=>[t[8]||(t[8]=v("li",{class:"text-warning font-bold"},"Please use root user",-1)),v("li",null,[y(p,{type:"primary",text:"",onClick:F},{default:b(()=>[C(k(x(g)("Config.Migrate.index_3")),1)]),_:1})])]),_:1,__:[8]}),y(M,{show:x(m).show,"onUpdate:show":t[4]||(t[4]=e=>x(m).show=e),title:x(m).title,data:x(m).data,width:"850","min-height":250,component:V},null,8,["show","title","data"]),y(M,{show:x(q).show,"onUpdate:show":t[5]||(t[5]=e=>x(q).show=e),title:x(q).title,hideClose:!0,data:x(q).data,width:"750","min-height":250,component:x(a)},null,8,["show","title","data","component"]),y(M,{show:x(P).show,"onUpdate:show":t[6]||(t[6]=e=>x(P).show=e),title:x(P).title,hideClose:!0,data:x(P).data,width:"750","min-height":250,component:x(s)},null,8,["show","title","data","component"]),y(M,{show:x(O).show,"onUpdate:show":t[7]||(t[7]=e=>x(O).show=e),title:x(O).title,hideClose:!0,data:x(O).data,width:"750","min-height":250,component:x(o)},null,8,["show","title","data","component"])]),_:1})}}})),A=Object.freeze(Object.defineProperty({__proto__:null,default:W},Symbol.toStringTag,{value:"Module"}));e("i",A)}}});
