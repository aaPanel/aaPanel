System.register(["./vue-legacy.js?v=1769066082311","./page_layout-legacy.js?v=1769066082311","./public-legacy.js?v=1769066082311","./soft-legacy2.js?v=1769066082311","./naive-legacy.js?v=1769066082311"],function(t,e){"use strict";var i,a,n,s,o,l,c,r,p,u,d,f,v,m,g,h,b,y,x,k,w,_,C,S,F,j,O,P,R,L,N,M,T,q,z,D,K,I,E;return{setters:[t=>{i=t.r,a=t.ak,n=t.aC,s=t.aD,o=t._,l=t.n,c=t.ap,r=t.W,p=t.F,u=t.k,d=t.c,f=t.R,v=t.V,m=t.H,g=t.U,h=t.P,b=t.a2,y=t.a3,x=t.j,k=t.a4},t=>{w=t.w,_=t.r,C=t.aE,S=t.y,F=t.i,j=t.x,O=t.a,P=t.m,R=t.d,L=t.aJ,N=t.p},t=>{M=t.b,T=t.u,q=t.a,z=t.p,D=t.i},t=>{K=t.c},t=>{I=t._,E=t.aC}],execute:function(){var J=document.createElement("style");function U(t,e,i){_("FileEditorPath",i),openEditorView(t,e)}function A(t,e,s){const o=i(!0),l=i(0),c=i(0),r=i(0),p=i(0),u=i(0),d=i(0),f=i(0),v=i(0);let m;a(t)?m=t.value:"string"==typeof t?m=document.querySelector(t):t instanceof Element&&(m=t);const g=function(){let t=null;return!!e&&(()=>{t||(t=setTimeout(()=>{e({m_flag:o,m_left:l,m_right:c,m_bottom:p,m_top:r,m_x:f,m_y:v,m_height:u,m_width:d}),clearTimeout(t),t=null},10))})}();function h(t){const{left:e,right:i,top:a,bottom:n,height:s,width:o,x:m,y:g}=t.getBoundingClientRect();l.value=e,c.value=i,r.value=a,p.value=n,u.value=s,d.value=o,f.value=m,v.value=g}const b=t=>{if(s&&s(t,{m_flag:o,m_left:l,m_right:c,m_bottom:p,m_top:r,m_x:f,m_y:v,m_height:u,m_width:d}),!o.value)return;const{left:e,right:i,top:a,bottom:b}=m.getBoundingClientRect(),y=document.createElement("div"),x=t.clientX,k=t.clientY;y.style.position="absolute",y.style.left=x-e+"px",y.style.top=k-a+"px",y.style.width="0px",y.style.height="0px",y.style.backgroundColor="rgba(135, 182, 130, 0.1)",y.classList.add("district-wrapper"),m.appendChild(y),t.preventDefault();const{pause:w,resume:_,isActive:C}=n(()=>{O.scrollTop>=O.scrollHeight-O.clientHeight?w():(y.style.height=y.offsetHeight+10+"px",y.style.marginTop=parseInt(getComputedStyle(y).marginTop)-10+"px",O.scrollTop+=10,P=O.scrollTop,h(y),g&&g())},{immediate:!1}),{pause:S,resume:F,isActive:j}=n(()=>{O.scrollTop<=0?S():(y.style.height=y.offsetHeight+10+"px",O.scrollTop-=10,R+=10,h(y),g&&g())},{immediate:!1}),O=m.querySelector(".n-scrollbar-container");let P=0,R=0;document.onmousemove=t=>{t.preventDefault(),C.value||j.value||(x<=t.clientX?y.style.width=t.clientX-x+"px":(y.style.width=x-t.clientX+"px",y.style.marginLeft=-(x-t.clientX)+"px"),k<=t.clientY?(y.style.height=t.clientY-k+P+"px",y.style.marginTop=-P+"px"):(y.style.height=k-t.clientY+R+"px",y.style.marginTop=-(k-t.clientY)+"px"),t.clientX<e&&(y.style.width=x-e+"px",y.style.marginLeft=-(x-e)+"px"),t.clientX>i&&(y.style.width=i-x+"px")),t.clientY>b&&_(),t.clientY<a&&F(),h(y),g&&g()},document.onmouseup=()=>{document.onmousemove=null,m.contains(y)&&m.removeChild(y)}};return m&&(m.onmousedown=b),{m_flag:o,m_x:f,m_y:v,m_left:l,m_right:c,m_top:r,m_bottom:p,m_height:u,m_width:d}}function B(t,e){const i=s(t.m_left),a=s(t.m_right),n=s(t.m_top),o=s(t.m_bottom),l=s(e.left),c=s(e.right),r=s(e.top),p=s(e.bottom);return!(c<i||l>a||p<n||r>o)}J.textContent=".files-icon[data-v-0a2d98fb]{display:inline-block;width:25px;height:25px;background-image:url(/static/vite/images/file_icon.png);background-repeat:no-repeat;background-size:25px;background-position:0px -375px}.files-icon.medium-icon.swf-icon[data-v-0a2d98fb]{background-position:0px 0px}.files-icon.medium-icon.webm-icon[data-v-0a2d98fb]{background-position:0px -25px}.files-icon.medium-icon.webp-icon[data-v-0a2d98fb]{background-position:0px -50px}.files-icon.medium-icon.wma-icon[data-v-0a2d98fb]{background-position:0px -75px}.files-icon.medium-icon.wmv-icon[data-v-0a2d98fb]{background-position:0px -100px}.files-icon.medium-icon.xls-icon[data-v-0a2d98fb]{background-position:0px -125px}.files-icon.medium-icon.xml-icon[data-v-0a2d98fb]{background-position:0px -150px}.files-icon.medium-icon.access-icon[data-v-0a2d98fb]{background-position:0px -175px}.files-icon.medium-icon.apk-icon[data-v-0a2d98fb]{background-position:0px -200px}.files-icon.medium-icon.avi-icon[data-v-0a2d98fb],.files-icon.medium-icon.bmp-icon[data-v-0a2d98fb]{background-position:0px -250px}.files-icon.medium-icon.cdr-icon[data-v-0a2d98fb]{background-position:0px -275px}.files-icon.medium-icon.compress-icon[data-v-0a2d98fb]{background-position:0px -300px}.files-icon.medium-icon.css-icon[data-v-0a2d98fb]{background-position:0px -325px}.files-icon.medium-icon.doc-icon[data-v-0a2d98fb]{background-position:0px -350px}.files-icon.medium-icon.file-icon[data-v-0a2d98fb]{background-position:0px -375px}.files-icon.medium-icon.folder-icon[data-v-0a2d98fb]{background-position:0px -400px}.files-icon.medium-icon.gif-icon[data-v-0a2d98fb]{background-position:0px -425px}.files-icon.medium-icon.html-icon[data-v-0a2d98fb]{background-position:0px -450px}.files-icon.medium-icon.ico-icon[data-v-0a2d98fb]{background-position:0px -475px}.files-icon.medium-icon.java-icon[data-v-0a2d98fb]{background-position:0px -500px}.files-icon.medium-icon.js-icon[data-v-0a2d98fb]{background-position:0px -525px}.files-icon.medium-icon.bt_split_json-icon[data-v-0a2d98fb]{background-position:0px -550px}.files-icon.medium-icon.jpeg-icon[data-v-0a2d98fb]{background-position:0px -575px}.files-icon.medium-icon.jpg-icon[data-v-0a2d98fb]{background-position:0px -600px}.files-icon.medium-icon.json-icon[data-v-0a2d98fb]{background-position:0px -625px}.files-icon.medium-icon.log-icon[data-v-0a2d98fb]{background-position:0px -650px}.files-icon.medium-icon.lua-icon[data-v-0a2d98fb]{background-position:0px -675px}.files-icon.medium-icon.mkv-icon[data-v-0a2d98fb]{background-position:0px -700px}.files-icon.medium-icon.mov-icon[data-v-0a2d98fb]{background-position:0px -725px}.files-icon.medium-icon.mp4-icon[data-v-0a2d98fb]{background-position:0px -750px}.files-icon.medium-icon.mpg-icon[data-v-0a2d98fb]{background-position:0px -775px}.files-icon.medium-icon.mpeg-icon[data-v-0a2d98fb]{background-position:0px -800px}.files-icon.medium-icon.pdf-icon[data-v-0a2d98fb]{background-position:0px -825px}.files-icon.medium-icon.php-icon[data-v-0a2d98fb]{background-position:0px -850px}.files-icon.medium-icon.png-icon[data-v-0a2d98fb]{background-position:0px -875px}.files-icon.medium-icon.ppt-icon[data-v-0a2d98fb]{background-position:0px -900px}.files-icon.medium-icon.py-icon[data-v-0a2d98fb]{background-position:0px -925px}.files-icon.medium-icon.rm-icon[data-v-0a2d98fb]{background-position:0px -950px}.files-icon.medium-icon.rmvb-icon[data-v-0a2d98fb]{background-position:0px -975px}.files-icon.medium-icon.sh-icon[data-v-0a2d98fb]{background-position:0px -1000px}.files-icon.medium-icon.bt_split-icon[data-v-0a2d98fb]{background-position:0px -1025px}.files-icon.medium-icon.sql-icon[data-v-0a2d98fb]{background-position:0px -1050px}.files-icon.large-icon[data-v-0a2d98fb]{width:50px;height:50px;background-size:50px;background-position:0px -750px}.files-icon.large-icon.swf-icon[data-v-0a2d98fb]{background-position:0px 0px}.files-icon.large-icon.webm-icon[data-v-0a2d98fb]{background-position:0px -50px}.files-icon.large-icon.webp-icon[data-v-0a2d98fb]{background-position:0px -100px}.files-icon.large-icon.wma-icon[data-v-0a2d98fb]{background-position:0px -150px}.files-icon.large-icon.wmv-icon[data-v-0a2d98fb]{background-position:0px -200px}.files-icon.large-icon.xls-icon[data-v-0a2d98fb]{background-position:0px -250px}.files-icon.large-icon.xml-icon[data-v-0a2d98fb]{background-position:0px -300px}.files-icon.large-icon.access-icon[data-v-0a2d98fb]{background-position:0px -350px}.files-icon.large-icon.apk-icon[data-v-0a2d98fb]{background-position:0px -400px}.files-icon.large-icon.avi-icon[data-v-0a2d98fb]{background-position:0px -450px}.files-icon.large-icon.bmp-icon[data-v-0a2d98fb]{background-position:0px -500px}.files-icon.large-icon.cdr-icon[data-v-0a2d98fb]{background-position:0px -550px}.files-icon.large-icon.compress-icon[data-v-0a2d98fb]{background-position:0px -600px}.files-icon.large-icon.css-icon[data-v-0a2d98fb]{background-position:0px -650px}.files-icon.large-icon.doc-icon[data-v-0a2d98fb]{background-position:0px -700px}.files-icon.large-icon.file-icon[data-v-0a2d98fb]{background-position:0px -750px}.files-icon.large-icon.folder-icon[data-v-0a2d98fb]{background-position:0px -800px}.files-icon.large-icon.gif-icon[data-v-0a2d98fb]{background-position:0px -850px}.files-icon.large-icon.html-icon[data-v-0a2d98fb]{background-position:0px -900px}.files-icon.large-icon.ico-icon[data-v-0a2d98fb]{background-position:0px -950px}.files-icon.large-icon.java-icon[data-v-0a2d98fb]{background-position:0px -1000px}.files-icon.large-icon.js-icon[data-v-0a2d98fb]{background-position:0px -1050px}.files-icon.large-icon.bt_split_json-icon[data-v-0a2d98fb]{background-position:0px -1100px}.files-icon.large-icon.jpeg-icon[data-v-0a2d98fb]{background-position:0px -1150px}.files-icon.large-icon.jpg-icon[data-v-0a2d98fb]{background-position:0px -1200px}.files-icon.large-icon.json-icon[data-v-0a2d98fb]{background-position:0px -1250px}.files-icon.large-icon.log-icon[data-v-0a2d98fb]{background-position:0px -1300px}.files-icon.large-icon.lua-icon[data-v-0a2d98fb]{background-position:0px -1350px}.files-icon.large-icon.mkv-icon[data-v-0a2d98fb]{background-position:0px -1400px}.files-icon.large-icon.mov-icon[data-v-0a2d98fb]{background-position:0px -1450px}.files-icon.large-icon.mp4-icon[data-v-0a2d98fb]{background-position:0px -1500px}.files-icon.large-icon.mpg-icon[data-v-0a2d98fb]{background-position:0px -1550px}.files-icon.large-icon.mpeg-icon[data-v-0a2d98fb]{background-position:0px -1600px}.files-icon.large-icon.pdf-icon[data-v-0a2d98fb]{background-position:0px -1650px}.files-icon.large-icon.php-icon[data-v-0a2d98fb]{background-position:0px -1700px}.files-icon.large-icon.png-icon[data-v-0a2d98fb]{background-position:0px -1750px}.files-icon.large-icon.ppt-icon[data-v-0a2d98fb]{background-position:0px -1800px}.files-icon.large-icon.py-icon[data-v-0a2d98fb]{background-position:0px -1850px}.files-icon.large-icon.rm-icon[data-v-0a2d98fb]{background-position:0px -1900px}.files-icon.large-icon.rmvb-icon[data-v-0a2d98fb]{background-position:0px -1950px}.files-icon.large-icon.sh-icon[data-v-0a2d98fb]{background-position:0px -2000px}.files-icon.large-icon.bt_split-icon[data-v-0a2d98fb]{background-position:0px -2050px}.files-icon.large-icon.sql-icon[data-v-0a2d98fb]{background-position:0px -2100px}\n/*$vite$:1*/",document.head.appendChild(J),t({$:G,A:At,B:nt,C:function(t){return!!["file-txt","file-json","file-html","file-css","file-js","file-php","file-doc","file-sh"].includes(It(t.ext))},D:Jt,E:Z,G:function(t,e){const{currentPath:i}=t;"dir"==e.type?(i.value="/"==i.value?`/${e.nm}`:i.value+"/"+e.nm,W(t)):$t(e)?nt(t,e.path):Jt(e.ext)?Bt(t,"Decompress",t=>t.value.open()):Et(e.ext)?st(t,e):Ot(t)},H:tt,I:rt,K:async function(t,e){const{close:a}=P.loading("Processing, please wait...");try{await K("tamper_core",71);const{message:a}=await C.post("/tamper_core/get_effective_path.json",{path:e.path},{requestOptions:{isOriginalResult:!0}});if(R(a)&&a.status){const{data:n}=a;"dir"===e.type?function(t,e,i){const{pid:a,lock:n,action:s}=i,o=(n?"Turning off protection ":"Turning on protection ")+`[${e.path}]`,l=Y(n?"file.tableController.afterTurningOffProtectionDir":"file.tableController.afterTurningOnProtectionDir");q({width:480,title:o,content:l,onConfirm:async()=>{if("create"===s[0]&&0===a)return await it(e.path,[]),void W(t);const i=[];n?i.push({key:-1!=e.path.indexOf("/www/server/panel/class")?"add_wd":s[0],values:[e.path]}):i.push({key:s[0],values:[e.path]}),await at(a,i),W(t)}})}(t,e,n):function(t,e,a){const{pid:n,lock:s,action:o}=a,l=Y(s?"file.tableController.turningOffProtection":"file.tableController.turningOnProtection",{path:e.path}),c=Y(s?"file.tableController.afterTurningOffProtectionFile":"file.tableController.afterTurningOnProtectionFile"),u=i(!1),d=i(!0);q({title:l,width:480,content:()=>r(p,null,[r("div",null,[c]),r("div",{class:"mt-8px"},[r(I,{checked:d.value,"onUpdate:checked":t=>d.value=t},{default:()=>[r("span",null,[Y(s?"file.tableController.turningOffProtectionFile":"file.tableController.turningOnProtectionFile",{path:e.nm})])]})]),r("div",{class:"mt-8px"},[r(I,{checked:u.value,"onUpdate:checked":t=>u.value=t},{default:()=>[r("span",null,[Y(s?"file.tableController.turningOffProtectionSuffix":"file.tableController.turningOnProtectionSuffix",{suffix:e.ext})])]})])]),onConfirm:async()=>{if("create"===o[0]&&0===n){const i=e.path.substring(0,e.path.lastIndexOf("/")),a=[];if(d.value){const t=e.path.split("/"),i=t.length>=2?t[t.length-2]:"";a.push(`${i}/${e.nm}`)}return u.value&&a.push("."+e.ext),await it(i,a),void W(t)}const i=[];s?(d.value&&(i.push({key:"remove_bf",values:[e.path]}),i.push({key:"add_wf",values:[e.path]})),u.value&&i.push({key:"remove_bf",values:["."+e.ext]})):(d.value&&(i.push({key:"add_bf",values:[e.path]}),i.push({key:"remove_wf",values:[e.path]})),u.value&&i.push({key:"add_bf",values:["."+e.ext]})),await at(n,i),W(t)}})}(t,e,n)}}finally{a()}},L:A,M:Pt,N:Ot,O:B,P:async function(t){if(document.querySelector(".file-task-modal"))return;const{message:i}=await pt();j(i)&&i.length>0&&T({title:Y("file.tableController.realtimeTaskQueue"),width:510,class:"file-task-modal",unstableShowMask:!1,data:{store:t,taskList:i},component:o(()=>O(()=>e.import("./FileTask-legacy.js?v=1769066082311"),void 0))})},Q:async function(){await async function(){await w("/static/vite/oldjs/jquery-2.2.4.min.js?v=1769066082311"),await w("/static/layer/layer.js?v=1769066082311"),await w("/static/vite/oldjs/jsencrypt.min.js?v=1769066082311"),await w("/static/language/English/lan.js?v=1769066082311"),await w("/static/ace/ace.js?v=1769066082311"),await w("/static/ace/ext-language_tools.js?v=1769066082311"),await w("/static/vite/oldjs/polyfill.min.js?v=1769066082311"),await w("/static/vite/oldjs/public.js?v=1769066082311"),await w("/static/vite/oldjs/public_backup.js?v=1769066082311")}(),window.usePay=M,$("#file-main").append('\n\t\t<script type="text/template" id="aceTmplate">\n\t\t\t\t<div id="ace_conter">\n\t\t\t\t\t\t<div class="ace_header" style="top: 0">\n\t\t\t\t\t\t\t\t<span class="saveFile"><i class="glyphicon glyphicon-floppy-disk" aria-hidden="true"></i><span>Save</span></span>\n\t\t\t\t\t\t\t\t<span class="saveFileAll"><i class="glyphicon glyphicon-duplicate" aria-hidden="true"></i><span>Save All</span></span>\n\t\t\t\t\t\t\t\t<span class="refreshs"><i class="glyphicon glyphicon-refresh" aria-hidden="true"></i><span>Refresh</span></span>\n\t\t\t\t\t\t\t\t<span class="searchs"><i class="glyphicon glyphicon-search" aria-hidden="true"></i><span>Search</span></span>\n\t\t\t\t\t\t\t\t<span class="replaces"><i class="glyphicon glyphicon-retweet" aria-hidden="true"></i><span>Replace</span></span>\n\t\t\t\t\t\t\t\t<span class="jumpLine"><i class="glyphicon glyphicon-pushpin" aria-hidden="true"></i><span>JumpLine</span></span>\n\t\t\t\t\t\t\t\t<span class="fontSize"><i class="glyphicon glyphicon-text-width" aria-hidden="true"></i><span>Font</span></span>\n\t\t\t\t\t\t\t\t<span class="themes"><i class="glyphicon glyphicon-magnet" aria-hidden="true"></i><span>Theme</span></span>\n\t\t\t\t\t\t\t\t<span class="setUp"><i class="glyphicon glyphicon-cog" aria-hidden="true"></i><span>Set</span></span>\n\t\t\t\t\t\t\t\t<span class="helps"><i class="glyphicon glyphicon-question-sign" aria-hidden="true"></i><span>Help</span></span>\n\t\t\t\t\t\t\t\t<div class="pull-down" title="Hide toolbar" style="top: 0"><i class="glyphicon glyphicon-menu-down" aria-hidden="true"></i></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="ace_overall" style="top: 35px;">\n\t\t\t\t\t\t\t\t\x3c!-- 编辑器目录 --\x3e\n\t\t\t\t\t\t\t\t<div class="ace_catalogue" style="left:0px">\n\t\t\t\t\t\t\t\t\t\t<div class="ace_catalogue_title">Directory<div class="dir-menu-right"><span class="glyphicon glyphicon-minus" aria-hidden="true"></span></div></div>\n\t\t\t\t\t\t\t\t\t<div class="ace_dir_tools">\n\t\t\t\t\t\t\t\t\t\t<div class="upper_level"  title="Return to parent directory">\n\t\t\t\t\t\t\t\t\t\t\t<i class="glyphicon glyphicon-share-alt" aria-hidden="true"></i>\n\t\t\t\t\t\t\t\t\t\t\t<span>Back</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="search_file" title="Search File">\n\t\t\t\t\t\t\t\t\t\t\t<i class="glyphicon glyphicon-search" aria-hidden="true"></i>\n\t\t\t\t\t\t\t\t\t\t\t<span>Search</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="new_folder" title="File/Folder">\n\t\t\t\t\t\t\t\t\t\t\t<i class="glyphicon glyphicon-plus"  aria-hidden="true"></i>\n\t\t\t\t\t\t\t\t\t\t\t<span>New</span>\n\t\t\t\t\t\t\t\t\t\t\t<ul class="folder_down_up">\n\t\t\t\t\t\t\t\t\t\t\t\t<li data-type="2"><i class="folder-icon"></i>Folder</li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li data-type="3"><i class="text-icon"></i>File</li>\n\t\t\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="refresh_dir" title="Refresh list">\n\t\t\t\t\t\t\t\t\t\t\t<span class="glyphicon glyphicon-refresh" aria-hidden="true"></span>\n\t\t\t\t\t\t\t\t\t\t\t<span>Refresh</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<span class="ace_editor_main_storey"></span>\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t<div class="ace_catalogue_list">\n\t\t\t\t\t\t\t\t\t\t\t\t<ul class="cd-accordion-menu"></ul>\n\t\t\t\t\t\t\t\t\t\t\t\t<ul class="ace_catalogue_menu">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<li data-type="0"><i class="glyphicon glyphicon-refresh" aria-hidden="true"></i><span>Refresh</span></li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<li data-type="1"><i class="glyphicon glyphicon-folder-open" aria-hidden="true"></i><span>Subdirectory</span></li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<li data-type="2"><i class="folder-icon"></i><span>New Folder</span></li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<li data-type="3"><i class="text-icon"></i><span>New File</span></li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<li data-type="4"><i class="rename-icon img-icon"></i><span>Rename</span></li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<li data-type="5"><i class="down-icon img-icon"></i><span>Download</span></li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<li data-type="6"><i class="del-icon img-icon"></i><span>Delete</span></li>\n\t\t\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="ace_catalogue_drag_icon">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="drag_icon_conter"></div>\n\t\t\t\t\t\t\t\t\t\t\t\t<span class="fold_icon_conter" title="Hide file directory"></span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\x3c!-- 编辑内容 --\x3e\n\t\t\t\t\t\t\t\t<div class="ace_editor_main">\n\t\t\t\t\t\t\t\t\t\t<ul class="ace_conter_menu"></ul>\n\t\t\t\t\t\t\t\t\t\t<div class="ace_conter_tips"><div class="tips"></div></div>\n\t\t\t\t\t\t\t\t\t\t<div class="ace_editor_main_storey"></div>\n\t\t\t\t\t\t\t\t\t\t<div class="ace_conter_editor"></div>\n\t\t\t\t\t\t\t\t\t\t<div class="ace_conter_toolbar">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="pull-left size_ellipsis">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span data-type="path" class="size_ellipsis"></span>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="pull-right">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span data-type="cursor"></span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span data-type="history"></span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span data-type="tab"></span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span data-type="encoding"></span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span data-type="lang"></span>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="ace_toolbar_menu" style="display: none;">\n\t\t\t\t\t\t\t\t\t\t<div class="menu-item menu-tabs" style="display: none;">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="menu-title">Set tabs</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<ul class="tabsType">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li data-value="nbsp">Indent using spaces</li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li data-value="tabs">Indent using "Tab"</li>\n\t\t\t\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="menu-title" style="margin-top:15px">Set the tab length</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<ul class="tabsSize">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li data-value="1">1</li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li data-value="2">2</li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li data-value="3">3</li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li data-value="4">4</li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li data-value="5">5</li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li data-value="6">6</li>\n\t\t\t\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="menu-item menu-encoding" style="display: none;">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="menu-title">Set file save encoding format</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<ul></ul>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="menu-item menu-files" style="display: none;">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="menu-conter">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<input type="text" class="menu-input" placeholder="Input language mode">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<i class="fa fa-close" aria-hidden="true"></i>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="menu-title">Set file language association</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<ul></ul>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="menu-item menu-fontSize" style="display: none;">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="menu-title">Set editor font size</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="menu-conter">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="set_font_size">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type="number" min="12" max="45"/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="tips error">Font setting range 12-45</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button class="btn-save">Save</button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="menu-item menu-jumpLine" style="display: none;">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="menu-title">Jump to specified line</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="menu-conter">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="set_jump_line">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type="number" min="0"/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button class="btn-save">Jump</button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="menu-item menu-themes" style="display: none;">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="menu-title">Set editor theme</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<ul></ul>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="menu-item menu-history" style="display: none;">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="menu-title">History version</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<ul></ul>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="menu-item menu-setUp"  style="display: none;">\n\t\t\t\t\t\t\t\t\t\t\t<div class="menu-title">Editor setting [ Some settings need to be restart editor ]</div>\n\t\t\t\t\t\t\t\t\t\t\t<ul class="editor_menu">\n\t\t\t\t\t\t\t\t\t\t\t\t<li data-type="wrap">Auto wrap</li>\n\t\t\t\t\t\t\t\t\t\t\t\t<li data-type="enableLiveAutocompletion">Code autocomplete</li>\n\t\t\t\t\t\t\t\t\t\t\t\t<li data-type="enableSnippets">Enable snippets</li>\n\t\t\t\t\t\t\t\t\t\t\t\t<li data-type="showInvisibles">Show hidden characters</li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li data-type="showLineNumbers">Show line numbers</li>\n\n\t\t\t\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t<\/script>\n\t')},R:qt,S:St,T:_t,U:Ct,V:async function(t,e,i,a,n,s,o=!1,l){const c=[],r=Math.ceil(t.size/i);for(let u=0;u<r;u++){const e=u*i,n=Math.min(e+i,t.size),s=t.slice(e,n),o=new FormData;o.append("f_path",a),o.append("f_name",t.name),o.append("f_size",`${t.size}`),o.append("f_start",`${e}`),o.append("blob",s),c.push(o)}try{for(let t=0;t<c.length;t++){const i=await C.post(e,c[t],{headers:{"Content-Type":"multipart/form-data"},requestOptions:{isOriginalResult:!0}});"number"==typeof i.message&&s&&s(i),n(Math.round(t/c.length*100),i)}n(100,null)}catch(p){return console.log(p),Promise.reject({msg:p.message})}},W:U,X:It,Y:Ut,Z:mt,a:Et,a0:V,a1:async function(t,e){try{await C.post("/files?action=CreateLink",{sfile:t,dfile:e},{requestOptions:{loading:ut("file.buttonGroup.loading.creatingSoftlink"),successMessage:!0}})}catch(i){console.warn(i)}},a2:async function(t,e,i,a){try{await C.post("/files?action=Zip",{sfile:t,dfile:e,z_type:i,path:a},{requestOptions:{loading:wt("file.contextMenu.loading.compressing"),successMessage:!0}})}catch(n){console.warn(n)}},a3:async function(t){await C.post("/files?action=UnZip",t,{requestOptions:{loading:wt("file.contextMenu.loading.decompressing"),successMessage:!0}})},a4:pt,a5:async function(t){return C.post("/task?action=remove_task",{id:t},{requestOptions:{loading:Y("file.tableController.deletingTask"),successMessage:!0}})},b:function(t){Bt(t,"RemoteDownload",t=>{t.value.open()})},c:function(t){const{optionToolsRef:e,isMiniScreen:i}=t;e.value.offsetWidth<1560?i.value=!0:i.value=!1},d:Bt,e:function(t,e){switch(e){case"dir":vt(t,ut("file.buttonGroup.defaultNames.untitledDirectory"),"dir","folder");break;case"file":vt(t,ut("file.buttonGroup.defaultNames.untitledFile"),"file","unknown");break;case"softlink":Bt(t,"Softlink",t=>{t.value.open()})}},f:function(t){Bt(t,"SearchFileContent",t=>{t.value.open()})},g:function(t,e,i){"management"==e?ft(t):function(t,e,i){const{currentPath:a}=t,{type:n,name:s}=i,o=Dt(s,n);"dir"==n?(a.value=e,W(t)):function(t){return"file-img"===It(t)}(o)?nt(t,e):Jt(o)?Bt(t,"Decompress",t=>t.value.open(e,o)):Et(o)?st(t,{path:e,nm:i.name}):Ot(t)}(t,e,i)},h:function(t){Bt(t,"UploadFile",t=>{t.value.open()})},i:$t,j:function(t){Bt(t,"ShareList",t=>{t.value.open()})},k:function(t){Bt(t,"Terminal",t=>{t.value.open()})},l:function(t){const{currentPath:e}=t;e.value="/",W(t)},m:Lt,n:Nt,p:Tt,q:Mt,r:function(t){Bt(t,"Backup",t=>{t.value.open()})},s:function(t){Bt(t,"Recycle",t=>{t.value.open()})},u:dt,v:function(t,e){const{filesView:i}=t;i.value=e},w:W,x:jt,y:function(t,e){const{fileList:i,choosedKeys:a}=t,n=At(i.value,a.value)[0];let s=["share","favorite","permission","copy","copyPath","cut","rename","del","compression","attrs"];if(!n)return jt(e.value,["refresh","upload","create","terminal"]);if("dir"==n.type?s.unshift("open","openNewWindow"):s.unshift("edit","download"),$t(n)&&(s.unshift("preview"),s=s.filter(t=>"edit"!==t)),Et(n.ext)&&(s.unshift("playVideo"),s=s.filter(t=>"edit"!==t)),n.isFavorite){const t=s.findIndex(t=>"favorite"==t);s[t]="unfavorite"}if(n.isShare){const t=s.findIndex(t=>"share"==t);s[t]="unShare"}return Jt(n.ext)&&(s.unshift("decompress"),s=s.filter(t=>"edit"!==t)),jt(e.value,s)},z:function(t,e){const{menuShow:i}=e;switch(t){case"edit":Ot(e);break;case"copy":Lt(e);break;case"copyPath":!async function(t){const{choosedKeys:e,fileList:i}=t,a=At(i.value,e.value)[0];a&&D(a.path)}(e);break;case"cut":Nt(e);break;case"paste":Mt(e);break;case"permission":Bt(e,"Permission",t=>t.value.open());break;case"compression":Tt(e);break;case"decompress":Bt(e,"Decompress",t=>t.value.open());break;case"conversion":console.log("conversion");break;case"del":ht(e);break;case"refresh":W(e);break;case"upload":Bt(e,"UploadFile",t=>t.value.open());break;case"createFile":vt(e,wt("file.contextMenu.defaultNames.untitledFile"),"file","file");break;case"createDir":vt(e,wt("file.contextMenu.defaultNames.untitledDirectory"),"dir","folder");break;case"download":!async function(t){const{currentPath:e,choosedKeys:i}=t;L(`${"/"===e.value?"":e.value}/${i.value[0]}`)}(e);break;case"terminal":Bt(e,"Terminal",t=>t.value.open());break;case"open":Pt(e);break;case"share":Bt(e,"Share",t=>t.value.open());break;case"unShare":!function(t){const{choosedKeys:e,fileList:i,shareList:a}=t,n=At(i.value,e.value)[0],s=a.value.find(t=>t.filename.includes(n.nm));G(t,s?.id)}(e);break;case"favorite":!async function(t){const{choosedKeys:e,fileList:i}=t,a=i.value.find(t=>t.nm==e.value[0]);try{await C.post("/files?action=add_files_store",{path:a.path},{requestOptions:{loading:wt("file.contextMenu.loading.addingToFavorites"),successMessage:!0}}),Q(t),W(t)}catch(n){console.warn(n)}}(e);break;case"unfavorite":!async function(t){const{choosedKeys:e,fileList:i}=t,a=At(i.value,e.value)[0];mt(t,a.path)}(e);break;case"rename":!async function(t){const{choosedKeys:e,fileList:i,currentFile:a,filesView:n}=t,s=At(i.value,e.value)[0];a.value=s,"card"===n.value?(a.value.isRenameForCard=!0,a.value.editName=a.value.nm):(s.isCreate=!0,s.isRename=!0,s.editName=s.nm,l(et))}(e);break;case"attrs":Bt(e,"Properties",t=>t.value.open());break;case"preview":!function(t){const{choosedKeys:e,fileList:i}=t,a=At(i.value,e.value)[0];nt(t,a.path)}(e);break;case"playVideo":!function(t){const{choosedKeys:e,fileList:i}=t,a=At(i.value,e.value)[0];st(t,a)}(e)}i.value=!1}});const{t:H}=F.global;async function V(t){const{shareList:e,shareListPage:i,shareListTotal:a}=t;try{const t=await C.post("/files?action=get_download_url_list",{p:i.value,row:12});return e.value=t.message.data,a.value=S(t.message.page),e.value}catch(n){return console.warn(n),[]}}async function G(t,e){try{await C.post("/files?action=remove_download_url",{id:e},{requestOptions:{loading:H("file.shareListModal.deletingShare"),successMessage:!0}}),W(t)}catch(i){console.warn(i)}}const X=c(t=>rt(t),100),{t:Y}=F.global;async function W(t,e){const{tableLoading:i,currentPath:a,favoriteList:n,fileRecycle:s,fileList:o,filesView:c,dirNums:r,fileNums:p,total:u,page:d,size:f,sort:v,reverse:m,diskMountPoint:g,currentFile:h,currentDirSize:b,uploadFileList:y,dragUploadRef:x}=t;i.value=!0;try{const i=await Ut(a.value,t=>{n.value=t.store,s.value=t.file_recycle,r.value=t.dir.length,p.value=t.files.length,u.value=S(t.page),g.value=t.disk,a.value=t.path},{p:d.value,showRow:f.value,...v.value?{sort:v.value,reverse:m.value}:{},disk:!0,...e});h.value=null,b.value=-1;const k=await Q(t);let w=[];k.length&&(w=k.map(t=>t.key));const _=await V(t);let C=[];_.length&&(C=_.map(t=>t.filename)),o.value=i.map(t=>(t.remarks_hover=!1,t.isEditRemarks=!1,t.isCreate=!1,t.card_hover=!1,t.card_choosed=!1,t.isRenameForCard=!1,t.operation_show=!1,w.includes(t.path)?t.isFavorite=!0:t.isFavorite=!1,C.includes(t.path)&&(t.isShare=!0),t)),y.value=[],x.value?.listenDragEvent(),l(()=>{"list"==c.value&&(Z(t),function(t){const{tableRef:e,choosePathRef:i}=t;let a=0;const n=setInterval(()=>{if(a<10?a++:clearInterval(n),e.value){const a=e.value;a.querySelector(".n-data-table-base-table-body")&&Z(t),a.oncontextmenu=e=>{e.preventDefault(),tt(e,t)},a.onclick=e=>{"INPUT"!=e.target.nodeName&&(X(t),i.value.handleEnterDown())},clearInterval(n)}},1e3)}(t))}),function(t){const{choosedKeys:e,waitForPaste:i}=t;e.value=[]}(t)}catch(k){console.warn(k)}finally{i.value=!1}}function Z(t){const{tableRef:e}=t;e.value&&A(e.value.querySelector(".n-data-table-base-table-body"),e=>function(t,e){const{trRectArr:i,choosedKeys:a}=t,n=[];for(let s=0;s<i.value.length;s++){const[[t,a]]=Object.entries(i.value[s]);B(e,a.getClientRects()[0])&&n.push(t)}a.value=[...new Set(n)]}(t,e),(e,i)=>function(t,e,i){const{choosedKeys:a}=i;if(!t.target.closest(".n-checkbox-box")){if(t.target.classList.contains("file-checkbox")){const e=t.target.closest("tr").dataset.key;return void(a.value.includes(e)?a.value=a.value.filter(t=>t!==e):a.value.push(e))}if(function(t){const{normalTrList:e,trRectArr:i}=t;e.value=document.querySelectorAll('[class*="normal-tr"]');const a=[];for(let n=0;n<e.value.length;n++){const t=e.value[n].dataset.key;a.push({[t]:e.value[n]})}i.value=a}(i),t.target.closest("tr")){const e=t.target.closest("tr").dataset.key;if(0==t.button&&(a.value=[e]),2==t.button){if(a.value.includes(e))return;a.value=[e]}}"INPUT"==t.target.nodeName?e.m_flag.value=!1:e.m_flag.value=!0}}(e,i,t))}async function Q(t){const{resetFavoriteOptions:e,favoriteOptions:i}=t;try{const t=(await C.post("/files?action=get_files_store",{},{requestOptions:{isOriginalResult:!0}})).message.map(t=>({type:t.type,icon:t.type,label:t.name,key:t.path}));return e(),i.value=[...t,...i.value],i.value}catch(a){return console.warn(a),[]}}function tt(t,e){const{choosedKeys:i,contextRef:a}=e;let n="empty";t.target.closest("tr")&&(n=i.value.length>1?"multiple":1==i.value.length?"single":"empty"),a.value.filesOperation(t,n)}function et(){const t=document.querySelector("#createInput")?.querySelector("input");t?.focus(),t?.select()}async function it(t,e){const{message:i}=await C.post("/tamper_core/create_path.json",{path:t,exts:JSON.stringify(e)},{requestOptions:{loading:Y("file.tableController.creatingDirectoryProtection"),isOriginalResult:!0}});if(R(i)){if(!i.status)return P.error(i.msg),Promise.reject();P.success(i.msg)}}async function at(t,e){const{message:i}=await C.post("/tamper_core/batch_setting.json",{pid:t,settings:JSON.stringify(e)},{requestOptions:{loading:Y("file.tableController.executing"),isOriginalResult:!0}});if(R(i)){if(!i.status)return P.error(i.msg),Promise.reject();P.success(i.msg)}}function nt(t,e){const{currentPreviewImg:i,previewShow:a}=t;i.value=e,a.value=!0}function st(t,e){const{currentPreviewVideo:i,previewVideoShow:a}=t;i.value={path:e.path,name:e.nm},a.value=!0}async function ot(t){const{currentFile:e,currentPath:i}=t;if(e.value&&(e.value.isCreate&&e.value.isRename||e.value.isRenameForCard)&&(e.value.editName||(e.value.isCreate=!1),e.value.editName==e.value.nm&&(e.value.isCreate=!1),e.value.isCreate&&e.value.isRename||e.value.isRenameForCard)){if(e.value.editName!==e.value.nm){try{await(a=e.value.path,n=i.value+"/"+e.value.editName,Ft(a,n,{rename:!0})),W(t)}catch(s){console.log(s)}finally{e.value.isCreate=!1,e.value.isRenameForCard=!1,e.value.isRename=!1}return!0}e.value.isCreate=!1,e.value.isRenameForCard=!1,e.value.isRename=!1}var a,n}async function lt(t){const{currentFile:e,currentPath:i,fileList:a}=t;if(e.value&&e.value.isCreate&&!e.value.isRename)if(""==e.value.editName)a.value.shift();else try{return"dir"==e.value.type?await dt(i.value+"/"+e.value.editName):await async function(t){try{await C.post("/files?action=CreateFile",{path:t},{requestOptions:{loading:ut("file.buttonGroup.loading.creatingFile"),successMessage:!0}})}catch(e){console.warn(e)}}(i.value+"/"+e.value.editName),await W(t),!0}catch(n){a.value.shift(),console.warn(n)}}async function ct(t){const{currentFile:e}=t;if(e.value&&e.value.isEditRemarks)return e.value.editRemarks!=e.value.rmk?(await async function(t){await C.post("/files?action=set_file_ps",t,{requestOptions:{successMessage:!0}})}({filename:e.value.path,ps_type:0,ps_body:e.value.editRemarks}),await W(t),!0):(e.value.isEditRemarks=!1,e.value.remarks_hover=!1,!1)}async function rt(t){await ct(t)||await ot(t)||await lt(t)}async function pt(){return C.post("/task?action=get_task_lists",{status:-3})}t("J",c((t,e)=>{const{choosedKeys:i}=t;"dir"==e.type&&(i.value=[e.nm],Pt(t))},200));const{t:ut}=F.global;async function dt(t){try{await C.post("/files?action=CreateDir",{path:t},{requestOptions:{loading:ut("file.buttonGroup.loading.creatingDirectory"),successMessage:!0}})}catch(e){console.warn(e)}}const ft=t("o",t=>{Bt(t,"FavoriteList",t=>{t.value.open()})});function vt(t,e,i,a){const{fileList:n,currentFile:s}=t,o={nm:e,isCreate:!0,type:i,ext:a,path:"",editName:e};s.value=o,s.value.editName=s.value.nm,n.value.unshift(s.value),l(et)}async function mt(t,e){try{await C.post("/files?action=del_files_store",{path:e},{requestOptions:{loading:ut("file.buttonGroup.loading.deletingFavorite"),successMessage:!0}}),W(t)}catch(i){console.warn(i)}}const{t:gt}=F.global,ht=t("t",t=>{const{fileRecycle:e}=t;e.value?bt(t):yt(t)}),bt=t=>{const{currentPath:e,choosedKeys:i,fileList:a}=t,n=a.value.filter(t=>i.value.includes(t.nm));q({title:1===n.length?gt("file.deleteController.deleteSingleFileTitle",{name:n[0].nm}):gt("file.deleteController.batchDeleteTitle"),content:gt("file.deleteController.recycleBinMessage"),width:400,onConfirm:async()=>{1===n.length?await xt(n[0].path,n[0].type):await kt(n.map(t=>t.nm),e.value),W(t)}})},yt=t=>{const{currentPath:e,choosedKeys:i,fileList:a}=t,n=a.value.filter(t=>i.value.includes(t.nm));z({title:1===n.length?gt("file.deleteController.deleteSingleFileTitle",{name:n[0].nm}):gt("file.deleteController.batchDeleteTitle"),content:()=>r("span",{class:"text-error"},[gt("file.deleteController.permanentDeleteMessage")]),width:400,onConfirm:async()=>{1===n.length?await xt(n[0].path,n[0].type):await kt(n.map(t=>t.nm),e.value),W(t)}})};async function xt(t,e){await C.post("/files?action="+("dir"===e?"DeleteDir":"DeleteFile"),{path:t},{requestOptions:{loading:gt("file.deleteController.deletingSingle"),successMessage:!0}})}async function kt(t,e){await C.post("/files?action=SetBatchData",{data:JSON.stringify(t),type:4,path:e},{requestOptions:{loading:gt("file.deleteController.deletingBatch"),successMessage:!0}})}const{t:wt}=F.global;async function _t(t,e){return(await C.post("/files?action=CheckExistsFiles",{dfile:t,filename:e},{requestOptions:{isOriginalResult:!0}})).message.length>0}async function Ct(t,e){return await C.post("/files?action=CopyFile",{sfile:t,dfile:e},{requestOptions:{loading:wt("file.contextMenu.loading.copying"),successMessage:!0}})}async function St(t,e){return await C.post("/files?action=BatchPaste",{type:t,path:e},{requestOptions:{loading:wt("file.contextMenu.loading.pasting"),successMessage:!0}})}async function Ft(t,e,i){return await C.post("/files?action=MvFile",{sfile:t,dfile:e,...i},{requestOptions:{loading:wt("file.contextMenu.loading.moving"),successMessage:!0}})}function jt(t,e){return e.map(e=>t[e])}function Ot(t){const{choosedKeys:e,currentPath:i,fileList:a}=t,n=a.value.find(t=>t.nm==e.value[0]);n&&U(0,n.path,i.value)}function Pt(t){const{choosedKeys:e,currentPath:i,fileList:a}=t,n=a.value.find(t=>t.nm==e.value[0]);t.page.value=1,i.value=n.path,W(t)}async function Rt(t,e,i){const{choosedKeys:a,fileList:n,fileCopyCache:s,waitForPaste:o,copiedFile:l,currentPath:c}=t;if(1==a.value.length)P.success(e),s.value=JSON.parse(JSON.stringify(a.value)),l.value=At(n.value,s.value)[0],o.value=!0;else try{const t=await async function(t,e,i){return await C.post("/files?action=SetBatchData",{data:JSON.stringify(t),type:e,path:i},{requestOptions:{loading:wt("file.contextMenu.loading.batchSetting"),successMessage:!0}})}(a.value,i,c.value);0==t.status&&(s.value=JSON.parse(JSON.stringify(a.value)),o.value=!0)}catch(r){console.warn(r)}}async function Lt(t){const{fileOperationFlag:e,waitForPaste:i}=t;e.value=1,await Rt(t,wt("file.contextMenu.messages.copySuccess"),1),i.value=!0}async function Nt(t){const{fileOperationFlag:e,waitForPaste:i}=t;e.value=2,await Rt(t,wt("file.contextMenu.messages.cutSuccess"),2),i.value=!0}async function Mt(t){const{fileCopyCache:e,currentPath:i,waitForPaste:a}=t;if(!a.value)return;let n=!1;1==e.value.length?n=await _t(i.value,e.value[0]):e.value.length>1&&(n=await _t(i.value)),n?1==e.value.length?Bt(t,"PasteSingleConfirm",t=>t.value.open()):e.value.length>1&&Bt(t,"PasteConfirm",t=>t.value.open()):async function(t){const{fileCopyCache:e,fileOperationFlag:i,currentPath:a,copiedFile:n,waitForPaste:s}=t;e.value.length>1?await St(i.value,a.value):1==e.value.length&&(1==i.value?await Ct(n.value.path,a.value+"/"+n.value.nm):2==i.value&&await Ft(n.value.path,a.value+"/"+n.value.nm)),W(t),s.value=!1}(t)}function Tt(t){Bt(t,"Compression",t=>t.value.open())}function qt(t){const{type:e,list:i,path:a}=t,n=[];for(const s of i)n.push(zt({type:e,item:s,path:a}));return n}function zt(t){const{type:e,item:i,path:a}=t,{nm:n,sz:s,is_link:o,lnk:l,mt:c,ctime:r,atime:p,gid:u,uid:d,group:f,user:v,acc:m,rmk:g,durl:h,cmp:b,fav:y,top:x,sn:k}=i;return{ext:Dt(i.nm,e),nm:n,sz:s,mt:c,acc:m,user:v,is_link:o?l:"",lnk:l,durl:h,cmp:b,fav:y,rmk:g,top:x,sn:k,path:Kt(a,n),ctime:r,atime:p,gid:u,uid:d,group:f,type:e}}function Dt(t,e){if("dir"===e)return"folder";const i=["tar.gz"],a=t.toLowerCase();for(const s of i)if(a.endsWith(s))return s;const n=a.lastIndexOf(".");return-1!==n?a.substring(n+1):"file"}function Kt(t,e){return function(t){return t.replace(/\/\//g,"/")}(`${t}/${e}`)}function It(t){return["folder"].includes(t)?"file-dir":["txt","rtf","md","log","conf"].includes(t)?"file-txt":["json"].includes(t)?"file-json":["htm","html","xhtml"].includes(t)?"file-html":["css","less","scss"].includes(t)?"file-css":["js","ts"].includes(t)?"file-js":["php"].includes(t)?"file-php":["doc","docx","docm","dot","dotx","dotm"].includes(t)?"file-doc":["pdf","pdfa","pdfx","pdfu"].includes(t)?"file-pdf":["xlsx","xlsm","xltx","xltm"].includes(t)?"file-excel":["jpg","jpeg","png","gif","bmp","webp","tiff","tif","psd","ai","eps","cr2","cr3","nef","nrw","dng","svg","cdr","wmf","emf","apng","heic","ico","xbm","xpm","xcf","iff","pnm"].includes(t)?"file-img":["py","java","js","ts","c","cpp","cs","php","rb","go","swift","kt","html","css","jsx","vue","scss","less","tsx","json","xml","yaml","yml","ini","properties","env","sql","pl","sh","bat","ps1","m","swift","kt","gradle","makefile","cmake","jar","war","exe","md","gitignore","dockerfile","yml","ipynb","asm","lua","rs","hs"].includes(t)?"file-sh":["zip","rar","7z","tar","tar.gz","gz","tgz","tar.bz2","tar.xz","cab","iso","msi","rpm","deb","xz","zipx","lz4","zst","rar5","part1.rar","rar.part1","z01","z02"].includes(t)?"file-compression":"file-unknown-file"}function Et(t){return["mp3","mp4","avi","mov","mkv","wmv","flv","3gp","3g2","vob","webm","ogv"].includes(t)}function $t(t){return"file-img"===It(t.ext)}function Jt(t){return"file-compression"===It(t)}async function Ut(t,e,i){try{const{message:a}=await C.post("/files?action=GetDirNew",{path:t,is_operating:!0,...i});e&&e(a);let n=qt({type:"dir",list:a.dir,path:a.path}),s=qt({type:"file",list:a.files,path:a.path});return n=n.map((t,e)=>({...t,protected:a.tamper_data.dirs&&a.tamper_data.dirs[e]?Number(a.tamper_data.dirs[e].split(";")[0]):0,protected_rule:a.tamper_data.dirs&&a.tamper_data.dirs[e]?Number(a.tamper_data.dirs[e].split(";")[1]):0})),s=s.map((t,e)=>({...t,protected:a.tamper_data.files&&a.tamper_data.files[e]?Number(a.tamper_data.files[e].split(";")[0]):0,protected_rule:a.tamper_data.files&&a.tamper_data.files[e]?Number(a.tamper_data.files[e].split(";")[1]):0})),[...n,...s]}catch(a){return console.warn(a),[]}}function At(t,e){return t.filter(t=>e.includes(t.nm))}async function Bt(t,e,i){const{dynamicCmptObj:a,dynamicCmpt:n,dynamicCmptRef:s}=t,o=a[e]();await o.__asyncLoader(),n.value=o,l(()=>{i&&i(s)})}t("F",N(u({__name:"FileIcon",props:{ext:{type:String,default:""},size:{type:String,default:"medium"}},setup(t){const e=d(()=>Jt(t.ext)?"compress":"Dir"===t.ext?"folder":t.ext);return(i,a)=>(v(),f("div",{class:m(["files-icon",[`${g(e)}-icon`,`${t.size}-icon`]])},null,2))}}),[["__scopeId","data-v-0a2d98fb"]]));const Ht={key:1,class:"i-svg-spinners:90-ring-with-bg text-[#36ad6a] text-7"};t("_",u({__name:"CalcSize",props:{path:{}},setup(t){const{t:e}=h(),a=t,n=i(-1),s=i(!1);async function o(){-1==n.value&&(s.value=!0,n.value=await async function(t){try{return(await C.post("/files?action=GetDirSize",{path:t},{requestOptions:{isOriginalResult:!0}})).message}catch(e){return console.warn(e),"计算失败"}}(a.path),s.value=!1)}return(t,i)=>{const a=E;return g(s)?(v(),f("i",Ht)):(v(),b(a,{key:0,text:"",type:"primary",onClick:o},{default:y(()=>[x(k(-1!==g(n)?g(n):g(e)("file.tableFooter.calculate")),1)]),_:1}))}}}))}}});
