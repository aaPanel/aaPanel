System.register(["./page_layout-legacy.js?v=1769066082311","./index-legacy.js?v=1769066082311","./index.vue_vue_type_script_setup_true_lang-legacy5.js?v=1769066082311","./index.vue_vue_type_script_setup_true_lang-legacy7.js?v=1769066082311","./index.vue_vue_type_script_setup_true_lang-legacy9.js?v=1769066082311","./public-legacy.js?v=1769066082311","./index.vue_vue_type_script_setup_true_lang-legacy8.js?v=1769066082311","./index.vue_vue_type_script_setup_true_lang-legacy.js?v=1769066082311","./index-legacy222.js?v=1769066082311","./naive-legacy.js?v=1769066082311","./vue-legacy.js?v=1769066082311","./index-legacy223.js?v=1769066082311","./xterm-legacy.js?v=1769066082311","./xterm-addon-canvas-legacy.js?v=1769066082311"],function(e,t){"use strict";var a,s,o,l,n,r,d,i,c,p,u,y,_,h,w,m,f,v,g,k,b,x,R,S,A,C,j,$,P,T,U,E,z,H,O,L,D,N,M,B,K,Z,q,F,V,W,I,G,J,Q,X,Y,ee,te,ae,se,oe,le,ne,re,de,ie,ce,pe,ue,ye,_e,he,we,me,fe,ve,ge,ke,be,xe,Re,Se,Ae,Ce,je,$e,Pe,Te,Ue,Ee,ze,He,Oe,Le,De;return{setters:[e=>{a=e.x,s=e.m,o=e.i,l=e.d,n=e.a,r=e.T,d=e.aA,i=e.p,c=e.y},e=>{p=e._},e=>{u=e._},e=>{y=e._},e=>{_=e._},e=>{h=e.e,w=e.c,m=e.f,f=e.a,v=e.d,g=e.u,k=e.K,b=e.C,x=e._,R=e.h},e=>{S=e._},e=>{A=e._},e=>{C=e.d,j=e.g,$=e.a,P=e.r,T=e.b,U=e.c,E=e.v,z=e.t,H=e.e,O=e.f},e=>{L=e.db,D=e.au,N=e.aC,M=e.dh,B=e.dS,K=e.dW,Z=e.dj,q=e.dZ,F=e.de,V=e.G,W=e.bJ,I=e.dT,G=e.dg,J=e.dU,Q=e.dV,X=e.e2},e=>{Y=e.k,ee=e.P,te=e.r,ae=e.e,se=e.R,oe=e.V,le=e.W,ne=e.S,re=e.a3,de=e.ak,ie=e.U,ce=e.j,pe=e.a4,ue=e.N,ye=e.Z,_e=e.ae,he=e.a0,we=e.s,me=e._,fe=e.a2,ve=e.O,ge=e.an,ke=e.F,be=e.w,xe=e.ap,Re=e.o,Se=e.b,Ae=e.n,Ce=e.i,je=e.c,$e=e.af,Pe=e.p,Te=e.ay,Ue=e.u},e=>{Ee=e._},e=>{ze=e.x,He=e.a,Oe=e.b,Le=e.c},e=>{De=e.x}],execute:function(){var Ne=document.createElement("style");Ne.textContent=".monitor-card[data-v-46d0d2ec]{border:1px solid var(--color-border)}[data-v-688bd5ac] .xterm{padding:12px!important}\n/*$vite$:1*/",document.head.appendChild(Ne);const Me={class:"p-20px"},Be={class:"flex-1"},Ke={class:"mt-12px"},Ze={class:"px-20px pt-24px pb-8px"},qe={class:"w-150px"},Fe=Y({__name:"set",props:{data:{}},setup(e){const{t:t}=ee(),o=e,{setOptions:l}=o.data,n=te(""),r=async()=>{const e=n.value.trim();""!==e?(await $({name:e}),n.value="",await g(),l()):s.error(t("Site.PHP.index_46"))},d=h(),i=te(null),c=ae({id:-1,name:""}),u={name:{required:!0,message:t("Site.PHP.index_46"),trigger:["blur","change"]}},y=async({hide:e})=>{await(i.value?.validate()),await $(ue(c)),await g(),l(),e()},{table:_,columns:v}=w([{key:"name",title:"Name"},m({width:120,options:e=>[{label:t("Public.Btn.Edit"),show:!1,onClick:()=>{(e=>{c.id=e.id,c.name=e.name,d.title=`${t("Site.PHP.index_48")} [${e.name}]`,d.show=!0})(e)}},{label:t("Public.Btn.Delete"),onClick:()=>{f({title:`${t("Site.PHP.index_49")} [${e.name}]`,content:t("Site.PHP.index_50"),onConfirm:async({hide:t})=>{await C({id:e.id}),await g(),l(e.id),t()}})}}]})]),g=async()=>{const{message:e}=await j();_.data=a(e)?e:[]};return g(),(e,t)=>{const a=D,s=N,o=L,l=M,h=B,w=A,m=p;return oe(),se("div",Me,[le(o,null,{default:re(()=>[ne("div",Be,[le(a,{value:ie(n),"onUpdate:value":t[0]||(t[0]=e=>de(n)?n.value=e:null),placeholder:e.$t("Site.PHP.index_46")},null,8,["value","placeholder"])]),ne("div",null,[le(s,{type:"primary",onClick:r},{default:re(()=>[ce(pe(e.$t("Site.Cert.index_62")),1)]),_:1})])]),_:1}),ne("div",Ke,[le(l,{"max-height":300,data:ie(_).data,columns:ie(v)},null,8,["data","columns"])]),le(m,{show:ie(d).show,"onUpdate:show":t[2]||(t[2]=e=>ie(d).show=e),title:ie(d).title,width:350,footer:!0,onConfirm:y},{default:re(()=>[ne("div",Ze,[le(w,{ref_key:"formRef",ref:i,model:ie(c),rules:u},{default:re(()=>[le(h,{label:e.$t("Site.PHP.index_47"),path:"name"},{default:re(()=>[ne("div",qe,[le(a,{value:ie(c).name,"onUpdate:value":t[1]||(t[1]=e=>ie(c).name=e),placeholder:""},null,8,["value"])])]),_:1},8,["label"])]),_:1},8,["model"])])]),_:1},8,["show","title"])])}}}),Ve=e("u",ye("node-manage",()=>({categoryList:te([]),nodeRow:te({}),nodeType:te("1")}),{persist:{pick:["nodeType"]}})),We={class:"w-160px"},Ie=Y({__name:"index",props:{value:{},valueModifiers:{}},emits:["update:value"],setup(e,{expose:t}){const s=_e(e,"value"),{t:o}=ee(),{loading:l,setLoading:n}=v(),r=Ve(),{categoryList:d}=he(r),i=h(o("Site.PHP.index_44"),{setOptions:e=>{u(),s.value===e&&(s.value="")}}),c=()=>{i.show=!0},u=async()=>{try{n(!0);const{message:e}=await j();a(e)&&(d.value=e.map(e=>({label:e.name,value:e.id})))}finally{d.value.unshift({label:o("Default category"),value:0}),d.value.unshift({label:o("Site.PHP.index_45"),value:""}),n(!1)}};return t({getList:u}),(e,t)=>{const a=N,o=K,n=p;return oe(),se("div",We,[le(o,we(e.$attrs,{value:s.value,"onUpdate:value":t[0]||(t[0]=e=>s.value=e),loading:ie(l),options:ie(d)}),{action:re(()=>[le(a,{block:"",onClick:c},{default:re(()=>[ce(pe(e.$t("Site.PHP.index_43")),1)]),_:1})]),_:1},16,["value","loading","options"]),le(n,{show:ie(i).show,"onUpdate:show":t[1]||(t[1]=e=>ie(i).show=e),width:350,title:ie(i).title,data:ie(i).data,component:Fe},null,8,["show","title","data"])])}}}),{t:Ge}=o.global,Je=e=>[{key:"edit",label:Ge("Edit node"),icon:()=>le("i",{class:"i-material-symbols-light:edit-square-sharp text-18px"},null)},{key:"restart_panel",label:Ge("Restart panel"),show:!Ye(e),icon:()=>le("i",{class:"i-material-symbols-light:bottom-panel-close text-18px"},null)},{key:"restart_service",label:Ge("Restart service"),show:!Ye(e),icon:()=>le("i",{class:"i-material-symbols:service-toolbox-outline-rounded text-18px"},null)}],Qe=e=>{const t=Ve(),{categoryList:a}=he(t);return a.value.find(t=>t.value===e)?.label},Xe=e=>[Ge("Online"),Ge("Unknown"),Ge("Offline"),Ge("Abnormal"),Ge("Restarting")][e],Ye=(e("v",e=>!e||(/^((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(e)||/^([a-zA-Z0-9]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}$/.test(e))),e=>""===e.api_key&&""===e.app_key&&e.ssh_conf&&Object.keys(e.ssh_conf).length),{t:et}=o.global;function tt(e){return{handleAction:async(t,a)=>{switch(t){case"visit":{const{message:e}=await E({node_id:a.id});l(e)&&window.open(e.target_panel_url,"_blank");break}case"manage":e({option:"option",optionType:"other"},a);break;case"edit":e({option:"option",optionType:"edit"},a);break;case"delete":f({title:et("Delete node"),content:et("Are you sure you want to delete the node [{0}]?",[a.remarks]),onConfirm:async()=>{await U({ids:String(a.id)}),e({option:"refresh"})}});break;case"restart_panel":f({title:et("Restart panel"),content:et("Are you sure you want to restart the node [{0}] panel?",[a.remarks]),onConfirm:async()=>{await T({node_id:a.id}),e({option:"refresh"})}});break;case"restart_service":f({title:et("Restart service"),content:et("Are you sure you want to restart the node [{0}] service?",[a.remarks]),onConfirm:async()=>{await P({node_id:a.id}),e({option:"refresh"})}})}}}}const{t:at}=o.global;function st(e){const{handleAction:t}=tt(e);return{key:"action",title:at("Site.TableRow.index_30"),width:180,align:"right",render:e=>le(L,{size:2,class:"justify-end!"},{default:()=>[le(k,{options:[{label:at("Visit"),show:!Ye(e)&&"local"!==e.api_key,onClick:()=>t("visit",e)},{label:at("Manage"),show:"local"!==e.api_key,onClick:()=>t("manage",e)},{label:at("Delete"),show:"local"!==e.api_key,onClick:()=>t("delete",e)}]},null),"local"!==e.api_key?le(Z,{trigger:"click",options:Je(e),onSelect:a=>((e,a)=>{t(e,a)})(a,e)},{default:()=>[le("i",{class:"i-famicons:ellipsis-vertical text-18px cursor-pointer"},null)]}):""]})}}const ot=(e,a)=>[{key:"category",label:at("Crontab.Planned.index_19"),onBatch:e=>{g({title:at("Site.Batch.index_22"),width:350,minHeight:72,footer:!0,data:{rows:e,onRefresh:a},component:me(()=>n(()=>t.import("./batch-legacy3.js?v=1769066082311"),void 0))})}},{key:"restart_panel",type:"confirm",label:at("Restart panel"),confirm:{title:at("Restart panel"),desc:at("Are you sure you want to restart the selected node?"),columns:[e.value[1]],api:e=>T({node_id:e.id},!1),done:()=>{a()}}},{key:"restart_service",type:"confirm",label:at("Restart service"),confirm:{title:at("Restart service"),desc:at("Are you sure you want to restart the selected node?"),columns:[e.value[1]],api:e=>P({node_id:e.id},!1),done:()=>{a()}}},{key:"delete",type:"confirm",label:at("Delete node"),confirm:{title:at("Delete node"),desc:at("Are you sure you want to delete the selected node?"),columns:[e.value[1]],api:e=>U({ids:String(e.id)},!1),done:()=>{a()}}}],lt={class:"text-16px font-bold"},nt={class:"text-desc"},rt={class:"text-desc"},dt={class:"h-100px flex items-center justify-center"},it={class:"text-desc"},ct={class:"text-desc"},pt={class:"flex justify-end h-18px"},ut={class:"flex cursor-pointer color-primary"},yt=Y({__name:"index",props:{list:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},emits:["action"],setup(e,{emit:t}){const{t:a}=ee(),s=t,{handleAction:o}=tt((e,t)=>{s("action",e,t)}),l=e=>[{label:a("Visit"),key:"visit",show:!Ye(e)},{label:a("Manage"),key:"manage"},{label:a("Delete"),key:"delete"},{label:a("Edit"),key:"edit"},{label:a("Restart panel"),key:"restart_panel",show:!Ye(e)},{label:a("Restart service"),key:"restart_service",show:!Ye(e)}];return(t,a)=>{const s=F,n=L,i=V,c=W,p=Z,u=I,y=q,_=d,h=r;return oe(),fe(h,{show:e.loading},{default:re(()=>[e.list.length?(oe(),fe(_,{key:0,cols:"1 s:1 m:2 l:3 xl:4 2xl:5",responsive:"screen","x-gap":20,"y-gap":20},{default:re(()=>[(oe(!0),se(ke,null,ve(e.list,e=>(oe(),fe(y,{key:e.id},{default:re(()=>[le(u,{class:"monitor-card p-16px"},{default:re(()=>[le(n,{class:"justify-between! items-center"},{default:re(()=>[ne("span",lt,pe(e.remarks),1),le(s,{type:0===e.data.status?"success":"error",size:"small",round:"",bordered:!1},{default:re(()=>[ce(pe(ie(Xe)(e.data.status)),1)]),_:2},1032,["type"])]),_:2},1024),le(n,{class:"justify-between! items-center my-16px"},{default:re(()=>[ne("span",null,pe(t.$t("Address")),1),ne("span",nt,pe(e.address),1)]),_:2},1024),le(n,{class:"justify-between! items-center"},{default:re(()=>[ne("span",null,pe(t.$t("Category")),1),ne("span",rt,pe(ie(Qe)(e.category_id)),1)]),_:2},1024),ne("div",dt,[2===e.data.status?(oe(),fe(i,{key:0,description:t.$t("Node is offline, no metrics")},null,8,["description"])):(oe(),fe(n,{key:1,class:"flex-col! flex-1",size:16},{default:re(()=>[ne("div",null,[le(n,{class:"justify-between! items-center mb-8px"},{default:re(()=>[a[0]||(a[0]=ne("span",null,"CPU",-1)),ne("span",it,pe(e.data.cpu)+"%",1)]),_:2,__:[0]},1024),le(c,{type:"line",status:"success",percentage:e.data.cpu,"show-indicator":!1,height:6},null,8,["percentage"])]),ne("div",null,[le(n,{class:"justify-between! items-center mb-8px"},{default:re(()=>[ne("span",null,pe(t.$t("Memory")),1),ne("span",ct,pe(e.data.memNewTotal)+" ("+pe(e.data.memory)+"%)",1)]),_:2},1024),le(c,{type:"line",status:"success",percentage:e.data.memory,"show-indicator":!1,height:6},null,8,["percentage"])])]),_:2},1024))]),ne("div",pt,["local"!==e.api_key?(oe(),fe(p,{key:0,trigger:"hover",placement:"bottom",options:l(e),onSelect:t=>((e,t)=>{o(e,t)})(t,e)},{default:re(()=>[ne("div",ut,[ne("span",null,pe(t.$t("Site.TableRow.index_30")),1),a[1]||(a[1]=ne("i",{class:"i-material-symbols:keyboard-arrow-down text-18px"},null,-1))])]),_:2},1032,["options","onSelect"])):ge("",!0)])]),_:2},1024)]),_:2},1024))),128))]),_:1})):(oe(),fe(i,{key:1,class:"h-200px flex items-center justify-center"}))]),_:1},8,["show"])}}}),_t=i(yt,[["__scopeId","data-v-46d0d2ec"]]),ht={class:"p-20px"},wt=Y({__name:"ssh-form",props:{row:{type:Object,default:()=>({})},onRefresh:{type:Function,default:()=>{}}},setup(e,{expose:t}){const{t:a}=ee(),s=e,o=Ve(),l=te(null),n=ae({port:22,ssh_type:"password",password:"",private_key:"",passphrase:""}),r={port:{required:!0,message:a("Enter port"),trigger:"blur",type:"number"},password:{required:!0,message:a("Enter password"),trigger:"blur"},private_key:{required:!0,message:a("Enter key"),trigger:"blur"}},{loading:d,setLoading:i}=v(),c=e=>{const t=s.row.ssh_conf?.host||s.row.server_ip;return{node_id:s.row.id,host:t,port:n.port,test_case:e,pkey:"key"===n.ssh_type?n.private_key:null,pkey_passwd:"key"===n.ssh_type?n.passphrase:null,password:"password"===n.ssh_type?n.password:null}},p=async()=>{try{i(!0),await(l.value?.validate()),await z(c(1))}finally{i(!1)}};return t({onConfirm:async()=>{await(l.value?.validate()),await z(c(0)),o.nodeRow&&(o.nodeRow.ssh_conf||(o.nodeRow.ssh_conf={}),o.nodeRow.ssh_conf.port=n.port,"password"===n.ssh_type?(o.nodeRow.ssh_conf.password=n.password,o.nodeRow.ssh_conf.pkey="",o.nodeRow.ssh_conf.pkey_passwd=""):(o.nodeRow.ssh_conf.password="",o.nodeRow.ssh_conf.pkey=n.private_key,o.nodeRow.ssh_conf.pkey_passwd=n.passphrase)),s.onRefresh()}}),s.row.ssh_conf&&(n.port=s.row.ssh_conf.port||22,n.ssh_type=s.row.ssh_conf.pkey?"key":"password",n.password=s.row.ssh_conf.password||"",n.private_key=s.row.ssh_conf.pkey||s.row.ssh_conf.private_key||"",n.passphrase=s.row.ssh_conf.pkey_passwd||s.row.ssh_conf.private_key_password||""),(e,t)=>{const a=G,s=B,o=Q,i=L,c=J,u=D,y=N,_=A;return oe(),se("div",ht,[le(_,{ref_key:"formRef",ref:l,model:ie(n),rules:r},{default:re(()=>[le(s,{label:e.$t("Port"),path:"port"},{default:re(()=>[le(a,{class:"w-120px!",value:ie(n).port,"onUpdate:value":t[0]||(t[0]=e=>ie(n).port=e),"show-button":!1,placeholder:"22"},null,8,["value"])]),_:1},8,["label"]),le(s,{label:e.$t("Authentication"),path:"ssh_type"},{default:re(()=>[le(c,{value:ie(n).ssh_type,"onUpdate:value":t[1]||(t[1]=e=>ie(n).ssh_type=e)},{default:re(()=>[le(i,null,{default:re(()=>[le(o,{value:"password"},{default:re(()=>[ce(pe(e.$t("Site.Lable.index_27")),1)]),_:1}),le(o,{value:"key"},{default:re(()=>t[5]||(t[5]=[ce("Key",-1)])),_:1,__:[5]})]),_:1})]),_:1},8,["value"])]),_:1},8,["label"]),"password"===ie(n).ssh_type?(oe(),fe(s,{key:0,label:e.$t("Site.Lable.index_27"),path:"password"},{default:re(()=>[le(i,{class:"items-center"},{default:re(()=>[le(u,{class:"w-250px!",value:ie(n).password,"onUpdate:value":t[2]||(t[2]=e=>ie(n).password=e),type:"password","show-password-on":"click",placeholder:e.$t("Enter SSH password")},null,8,["value","placeholder"]),le(y,{onClick:p,loading:ie(d)},{default:re(()=>[ce(pe(e.$t("Test connection")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["label"])):ge("",!0),"key"===ie(n).ssh_type?(oe(),se(ke,{key:1},[le(s,{label:"Key",path:"private_key"},{default:re(()=>[le(i,{class:"items-end"},{default:re(()=>[le(u,{class:"w-250px!",value:ie(n).private_key,"onUpdate:value":t[3]||(t[3]=e=>ie(n).private_key=e),type:"textarea",placeholder:e.$t("Enter SSH key")},null,8,["value","placeholder"]),le(y,{onClick:p,loading:ie(d)},{default:re(()=>[ce(pe(e.$t("Test connection")),1)]),_:1},8,["loading"])]),_:1})]),_:1}),le(s,{label:e.$t("Key password"),path:"passphrase"},{default:re(()=>[le(u,{class:"w-250px!",value:ie(n).passphrase,"onUpdate:value":t[4]||(t[4]=e=>ie(n).passphrase=e),type:"password","show-password-on":"click",placeholder:e.$t("Enter SSH key password")},null,8,["value","placeholder"])]),_:1},8,["label"])],64)):ge("",!0)]),_:1},8,["model"])])}}}),mt=Y({__name:"index",props:{data:{}},setup(e,{expose:t}){const{t:a}=ee(),s=e,{data:o}=s,{ws:l,status:n,send:r,open:d,close:i}=b("/webssh",{get verifyData(){return{host:o.host,port:o.port,username:o.username,password:o.password,pkey:o.pkey,pkey_passwd:o.pkey_passwd,id:o.id}},onMessage:(e,t)=>{const s=t.data;if(s.indexOf("Authentication timeout.")>-1)u.value=!0;else if("\\r\\nlogout\\r\\n"==s||"logout\\r\\n"==s||"\r\nlogout\r\n"==s||"logout\r\n"==s||s.search(/logout[\r\n]+$/)>-1)return c.write("\r"+a("Component.Terminal.index_1")+"\r"),f(),void i()}});let c,p;const u=te(!1),y=te(null);let _=null;const h=()=>{const e=l.value;e&&(c.loadAddon(p),c.loadAddon(new De.CanvasAddon),c.loadAddon(new Le.WebLinksAddon),_=new ze.AttachAddon(e),c.loadAddon(_),setTimeout(()=>{p.fit()},100))};be([l,n],([e,t])=>{if("CLOSED"===t&&e)return c.write("\r\n"+a("Component.Terminal.index_2")+"\r\n"),void setTimeout(()=>{d()},500);"OPEN"===t&&e&&(_&&_.dispose(),_=new ze.AttachAddon(e),c.loadAddon(_),setTimeout(()=>{p.fit();const{cols:e,rows:t}=c;r({cols:e,rows:t,resize:1})},100))},{immediate:!1});const w=()=>{y.value&&c.open(y.value)};let m=!1;const f=()=>{m=!1},v=()=>{c.focus(),c.onData(e=>{const t=l.value;"\r"===e&&u.value&&(u.value=!1,c.write("\r\n"),g()),void 0!==t||"\r"!==e||m||(m=!0,c.write("\r\n"+a("Component.Terminal.index_2")+"\r\n"),g())})},g=()=>{d(),v();const e=l.value;e&&c.loadAddon(new ze.AttachAddon(e))},k=()=>{Ae(()=>{if(p.fit(),"CLOSED"!==n.value){const{cols:e,rows:t}=c;r({cols:e,rows:t,resize:1})}})};let x=!0;const R=new ResizeObserver(()=>{xe(()=>{x?x=!1:k()},200)()});return t({send:r}),Re(async()=>{c=new He.Terminal({cursorBlink:!0,fontSize:14,fontFamily:"Monaco, Menlo, Consolas, 'Courier New', monospace",theme:{background:"#333",foreground:"#ececec"}}),p=new Oe.FitAddon,h(),w(),v(),k(),(()=>{const e=y.value;e&&R.observe(e)})()}),Se(()=>{R?.disconnect(),i(),c?.dispose()}),(e,t)=>(oe(),se("div",{ref_key:"terminalRef",ref:y,class:"w-full box"},null,512))}}),ft=i(mt,[["__scopeId","data-v-688bd5ac"]]),vt=Y({__name:"index",setup(e){const{t:t}=ee(),a=Ve(),{nodeRow:s}=he(a),o=Ce("onRefresh"),l=te(!1),n=te(null),d=te(!!s.value?.ssh_conf?.host),i=h(t("Edit connection"),{row:s.value,ssh_type:n.value,onRefresh:()=>{d.value=!0,l.value=!1}}),c=je(()=>[{label:t("Terminal"),key:"terminal",show:d.value,onClick:()=>{l.value=!0}},{label:t("Edit"),key:"edit",onClick:()=>{i.show=!0}},{label:t("Delete"),key:"delete",show:d.value,onClick:async()=>{await H({node_id:s.value?.id}),d.value=!1,o?.()}}]),u=je(()=>({id:"nodeTerminal",host:s.value?.ssh_conf?.host||s.value?.server_ip,port:s.value?.ssh_conf?.port||22,username:"root",password:s.value?.ssh_conf?.password,pkey:s.value?.ssh_conf?.pkey,pkey_passwd:s.value?.ssh_conf?.pkey_passwd}));return(e,t)=>{const a=F,s=N,o=L,n=k,y=x,_=p,h=r;return oe(),fe(h,{show:!1},{default:re(()=>[le(o,{class:"justify-between!"},{default:re(()=>[le(o,{class:"items-center"},{default:re(()=>[ne("span",null,pe(e.$t("Root password")),1),le(a,{type:ie(d)?"success":"error"},{default:re(()=>[ce(pe(ie(d)?e.$t("Set"):e.$t("Not set")),1)]),_:1},8,["type"]),ie(d)?ge("",!0):(oe(),fe(s,{key:0,onClick:t[0]||(t[0]=e=>ie(i).show=!0)},{default:re(()=>[ce(pe(e.$t("Set")),1)]),_:1}))]),_:1}),le(n,{options:ie(c)},null,8,["options"])]),_:1}),le(y,{class:"my-16px"},{default:re(()=>[ne("li",null,pe(e.$t("Save root password for terminal or node function calls")),1)]),_:1}),ie(l)?(oe(),fe(ft,{key:0,class:"h-480px",url:"/webssh",data:ie(u)},null,8,["data"])):ge("",!0),le(_,{show:ie(i).show,"onUpdate:show":t[1]||(t[1]=e=>ie(i).show=e),title:ie(i).title,data:ie(i).data,width:550,"min-height":200,footer:!0,component:wt},null,8,["show","title","data"])]),_:1})}}}),gt={class:"h-600px!"},kt=Y({__name:"index",props:{row:{},menuType:{default:"ssh"},onRefresh:{}},setup(e){const t=e,{menuType:a}=$e(t);Ve().nodeRow=t.row,Pe("onRefresh",()=>t.onRefresh?.());const s=te(a.value),o=[{key:"ssh",label:"SSH",component:vt}];return(e,t)=>{const a=Ee;return oe(),se("div",gt,[le(a,{value:ie(s),"onUpdate:value":t[0]||(t[0]=e=>de(s)?s.value=e:null),data:o},null,8,["value"])])}}}),bt=Y({__name:"index",setup(e){const a=me(()=>n(()=>t.import("./index-legacy221.js?v=1769066082311"),void 0)),{t:s}=ee(),o=h(s("Add node"),{onRefresh:()=>{C()}}),r=h(s("Node management"),{onRefresh:()=>{C()}}),d=()=>{o.title=s("Add node"),o.data.row=null,o.show=!0},i=({option:e,optionType:t},a)=>{"option"===e?"edit"===t?(o.title=s("Edit node"),o.data.row=a,o.show=!0):"other"===t&&((e,t)=>{r.data.row=e,r.title=s("Node management")+` [${e.address}]`,r.data.menuType=t,r.show=!0})(a):"refresh"===e&&C()},m=te(),f=Ve(),v=ae({p:1,limit:20,search:"",category_id:"",node_type:f.nodeType});be(()=>v.node_type,e=>{f.nodeType=e});const{keys:g,table:k,columns:b}=w([{type:"selection",width:40},{title:s("Node name"),key:"remarks"},{title:s("Address"),key:"address"},{title:s("Status"),key:"status",render:e=>{let t;return le(F,{type:0===e.data.status?"success":"error",size:"small",round:!0,bordered:!1},"function"==typeof(a=t=Xe(e.data.status))||"[object Object]"===Object.prototype.toString.call(a)&&!Ue(a)?t:{default:()=>[t]});var a}},{title:s("CPU/Memory"),key:"cpu",render:e=>{const{data:t}=e;return t.status?le("span",null,[ce("--/--")]):le("span",null,[e.data.cpu_usage,ce(" "),s("Home.index_36"),ce(" ("),e.data.cpu,ce("%) / "),e.data.memNewTotal,ce(" ("),e.data.memory,ce("%)")])}},{title:s("Category"),key:"category_id",render:e=>le("span",null,[Qe(e.category_id)])},st(i)]),x=ot(b,()=>{C()}),A=()=>{v.p=1,C()},C=async()=>{try{k.loading=!0;const{message:e}=await O({p:v.p,limit:v.limit,search:v.search,category_id:""===v.category_id?null:v.category_id});l(e)&&(k.data=e.data,k.total=c(e.page))}finally{k.loading=!1}};return Re(async()=>{m.value?.getList(),C()}),(e,t)=>{const l=N,n=X,c=J,h=S,w=R,f=_,j=y,$=u,P=p,T=I;return oe(),fe(T,{class:"p-16px"},{default:re(()=>[le($,null,Te({toolsLeft:re(()=>[le(l,{type:"primary",onClick:d},{default:re(()=>[ce(pe(ie(s)("Add node")),1)]),_:1})]),toolsRight:re(()=>[le(c,{value:ie(v).node_type,"onUpdate:value":t[0]||(t[0]=e=>ie(v).node_type=e)},{default:re(()=>[le(n,{value:"1"},{default:re(()=>[ce(pe(ie(s)("List mode")),1)]),_:1}),le(n,{value:"2"},{default:re(()=>[ce(pe(ie(s)("Probe mode")),1)]),_:1})]),_:1},8,["value"]),le(Ie,{ref_key:"siteCategoryRef",ref:m,value:ie(v).category_id,"onUpdate:value":[t[1]||(t[1]=e=>ie(v).category_id=e),C]},null,8,["value"]),le(h,{value:ie(v).search,"onUpdate:value":t[2]||(t[2]=e=>ie(v).search=e),placeholder:"Enter node name",onSearch:A},null,8,["value"])]),table:re(()=>["1"===ie(v).node_type?(oe(),fe(w,{key:0,"checked-row-keys":ie(g),"onUpdate:checkedRowKeys":t[3]||(t[3]=e=>de(g)?g.value=e:null),"row-key":"id",loading:ie(k).loading,data:ie(k).data,columns:ie(b)},null,8,["checked-row-keys","loading","data","columns"])):"2"===ie(v).node_type?(oe(),fe(_t,{key:1,list:ie(k).data,loading:ie(k).loading,onAction:i},null,8,["list","loading"])):ge("",!0)]),pageRight:re(()=>[le(j,{page:ie(v).p,"onUpdate:page":t[5]||(t[5]=e=>ie(v).p=e),"page-size":ie(v).limit,"onUpdate:pageSize":t[6]||(t[6]=e=>ie(v).limit=e),"item-count":ie(k).total,"store-key":"node-manage",onRefresh:C},null,8,["page","page-size","item-count"])]),_:2},["1"===ie(v).node_type?{name:"pageLeft",fn:re(()=>[le(f,{"checked-row-keys":ie(g),"onUpdate:checkedRowKeys":t[4]||(t[4]=e=>de(g)?g.value=e:null),data:ie(k).data,options:ie(x)},null,8,["checked-row-keys","data","options"])]),key:"0"}:void 0]),1024),le(P,{show:ie(o).show,"onUpdate:show":t[7]||(t[7]=e=>ie(o).show=e),title:ie(o).title,data:ie(o).data,width:600,"min-height":380,footer:!0,component:ie(a)},null,8,["show","title","data","component"]),le(P,{show:ie(r).show,"onUpdate:show":t[8]||(t[8]=e=>ie(r).show=e),title:ie(r).title,data:ie(r).data,width:900,component:kt},null,8,["show","title","data"])]),_:1})}}}),xt=Object.freeze(Object.defineProperty({__proto__:null,default:bt},Symbol.toStringTag,{value:"Module"}));e("i",xt)}}});
