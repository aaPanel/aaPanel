import{_ as e}from"./index.js?v=1769066082311";import{e as a,_ as t}from"./public.js?v=1769066082311";import{u as s,q as l,W as n,d as i,m as o,X as p,c as u,p as r}from"./page_layout.js?v=1769066082311";import{u as m}from"./soft.js?v=1769066082311";import{g as _}from"./soft2.js?v=1769066082311";import{_ as c,a as d}from"./index.vue_vue_type_script_setup_true_lang4.js?v=1769066082311";import{db as v,dW as f,aC as x,di as h}from"./naive.js?v=1769066082311";import{k as w,P as j,r as y,R as g,an as b,U as k,V as H,W as $,S,a3 as W,H as C,a4 as I,a2 as P,ak as U,j as T,m as q}from"./vue.js?v=1769066082311";import"./common.js?v=1769066082311";import"./__commonjsHelpers__.js?v=1769066082311";import"./site.js?v=1769066082311";import"./index.vue_vue_type_script_setup_true_lang5.js?v=1769066082311";import"./index.vue_vue_type_script_setup_true_lang6.js?v=1769066082311";import"./index.vue_vue_type_script_setup_true_lang.js?v=1769066082311";import"./index105.js?v=1769066082311";import"./theme-monokai.js?v=1769066082311";import"./file.js?v=1769066082311";const L={key:0,class:"p-30px"},M=["src"],N=["title"],R={class:"font-600 mt-30px"},O=["innerHTML"],V=r(w({__name:"index",props:{name:{},callback:{},hide:{}},setup(r){const{t:w}=j(),V=s(),X=r,z=["nginx","apache","mysql","php"],A=e=>z.includes(e)||e.startsWith("php-"),B=y(),D=y(""),E=y(),F=(e,a)=>{D.value=a.ps},G=y(5),J=e=>q(h,{trigger:"hover",placement:"top-start"},{trigger:()=>q("span",e.label),default:()=>q("span",e.label)}),K=y(),Q=async(e=1)=>{var a;try{if(K.value){5!==G.value&&(ee.data={plugin_title:K.value.title,plugin_name:K.value.name},ee.show=!0);const{message:t}=await n({sName:K.value.name,version:B.value,type:e},5===G.value);if(i(t)){if(t.result)return o.success(t.result),V.taskCount+=1,null==(a=X.callback)||a.call(X),X.hide(),void p();await m({name:t.name,tmp_path:t.tmp_path,title:w("Soft.index_21")},()=>{var e;null==(e=X.callback)||e.call(X)})}X.hide()}}catch(t){X.hide()}},Y=()=>{Z.show=!0},Z=a(w("Home.Install.index_7"),{name:X.name,callback:()=>{Q(0)}}),ee=a("");return(async()=>{const{message:e}=await u({sName:X.name},!0);i(e)&&(K.value=e,E.value=e.versions.map(a=>{const t=a.m_version+"."+a.version;return{label:5===e.type?a.m_version:t||a.m_version,value:5===e.type?a.m_version:t||a.m_version,ps:a.update_msg}}),B.value=E.value[0].value,D.value=E.value[0].ps,G.value=e.type)})(),(a,s)=>{const n=v,i=f,o=x,p=l,u=t,r=e;return k(K)?(H(),g("div",L,[$(n,{class:"justify-between! items-center"},{default:W(()=>[$(n,{class:"items-center"},{default:W(()=>[S("img",{class:"w-40px",src:k(_)(k(K).name)},null,8,M),S("div",null,[S("p",{class:C(["font-600 text-18px max-w-290px",{"max-w-190px!":A(k(K).name)}]),title:"".concat(k(K).title," ").concat(k(B))},I(k(K).title)+" "+I(k(K).title.indexOf("PHP-")>-1?"":k(B)),11,N)])]),_:1}),$(n,null,{default:W(()=>[$(i,{class:"w-100px!",value:k(B),"onUpdate:value":[s[0]||(s[0]=e=>U(B)?B.value=e:null),F],options:k(E),"consistent-menu-width":!1,"render-label":J},null,8,["value","options"]),A(k(K).name)?(H(),P(o,{key:0,onClick:Y},{default:W(()=>[T(I(a.$t("Home.Install.index_7")),1)]),_:1})):b("",!0),$(o,{type:"primary",onClick:s[1]||(s[1]=e=>Q(1))},{default:W(()=>[T(I(A(k(K).name)?a.$t("Home.Install.index_5"):a.$t("Soft.index_34")),1)]),_:1})]),_:1}),$(p)]),_:1}),S("div",R,I(a.$t("Soft.index_39"))+"ï¼š",1),S("span",{class:"py-10px inline-block leading-20px text-font2",innerHTML:k(D)},null,8,O),$(u,null,{default:W(()=>[S("li",null,I(a.$t("Soft.index_35")),1),S("li",null,I(a.$t("Soft.index_36")),1),S("li",null,I(a.$t("Soft.index_37")),1)]),_:1}),$(r,{show:k(Z).show,"onUpdate:show":s[2]||(s[2]=e=>k(Z).show=e),title:k(Z).title,data:k(Z).data,width:480,footer:!0,"confirm-text":a.$t("WP.TableRow.index_13"),component:c},null,8,["show","title","data","confirm-text"]),$(r,{show:k(ee).show,"onUpdate:show":s[3]||(s[3]=e=>k(ee).show=e),title:k(ee).title,data:k(ee).data,width:480,component:d},null,8,["show","title","data"])])):b("",!0)}}}),[["__scopeId","data-v-fafc5002"]]);export{V as default};
