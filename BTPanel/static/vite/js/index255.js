import{_ as e}from"./index.js?v=1763625242172";import{_ as t}from"./index.vue_vue_type_script_setup_true_lang5.js?v=1763625242172";import{_ as a}from"./index.vue_vue_type_script_setup_true_lang7.js?v=1763625242172";import{_ as l,c as s,d as i,h as n,I as o,f as d,u as p,e as r,a as u}from"./public.js?v=1763625242172";import{_}from"./index.vue_vue_type_script_setup_true_lang8.js?v=1763625242172";import{x as c,m,c as h,bh as x,q as f,e1 as y,p as v}from"./page_layout.js?v=1763625242172";import{q as g,r as w,t as S,v as P,w as b,x as j,y as k,z as W,A as R,B as $,C as U,D as C}from"./index87.js?v=1763625242172";import{_ as z}from"./index.vue_vue_type_script_setup_true_lang.js?v=1763625242172";import{k as L,P as T,r as B,e as I,R as q,S as D,X as N,a3 as A,U as F,V as H,a4 as K,aj as M,ae as O,j as V,l as E,v as J,av as X,c as G,N as Q,ay as Y}from"./vue.js?v=1763625242172";import{au as Z,dP as ee,aC as te}from"./naive.js?v=1763625242172";import{_ as ae}from"./index.vue_vue_type_script_setup_true_lang20.js?v=1763625242172";import{u as le}from"./file.js?v=1763625242172";import"./common.js?v=1763625242172";import"./__commonjsHelpers__.js?v=1763625242172";import"./index.vue_vue_type_script_setup_true_lang6.js?v=1763625242172";import"./index132.js?v=1763625242172";import"./index.vue_vue_type_script_setup_true_lang12.js?v=1763625242172";import"./index130.js?v=1763625242172";import"./php.js?v=1763625242172";import"./soft.js?v=1763625242172";import"./site.js?v=1763625242172";import"./site4.js?v=1763625242172";import"./index.vue_vue_type_script_setup_true_lang15.js?v=1763625242172";import"./index245.js?v=1763625242172";import"./index99.js?v=1763625242172";import"./index107.js?v=1763625242172";import"./index.vue_vue_type_script_setup_true_lang10.js?v=1763625242172";import"./index98.js?v=1763625242172";import"./index100.js?v=1763625242172";import"./theme-monokai.js?v=1763625242172";import"./refersh.js?v=1763625242172";import"./index.vue_vue_type_script_setup_true_lang17.js?v=1763625242172";import"./index104.js?v=1763625242172";import"./ssl.js?v=1763625242172";import"./cert.js?v=1763625242172";import"./ssl-lets-progress.js?v=1763625242172";import"./utils3.js?v=1763625242172";import"./index217.js?v=1763625242172";import"./paypal-js.js?v=1763625242172";import"./upload.js?v=1763625242172";const se={class:"p-20px"},ie={class:"w-280px"},ne=L({__name:"index",props:{data:{}},setup(e,{expose:t}){const{t:a}=T(),s=e,{getList:i}=s.data,n=B(null),o=I({name:""}),d={name:{required:!0,message:a("Security.Conf.Index_28"),trigger:["blur","input"]}};return t({onConfirm:async({hide:e})=>{var t;await(null==(t=n.value)?void 0:t.validate()),await g({...o}),null==i||i(),e()}}),(e,t)=>{const a=Z,s=ee,i=z,p=l;return q(),D("div",se,[N(i,{ref_key:"formRef",ref:n,model:H(o),rules:d},{default:A((()=>[N(s,{label:e.$t("Site.TableRow.index_2"),path:"name"},{default:A((()=>[F("div",ie,[N(a,{type:"text",value:H(o).name,"onUpdate:value":t[0]||(t[0]=e=>H(o).name=e),placeholder:e.$t("WP.Sets.index_11")},null,8,["value","placeholder"])])])),_:1},8,["label"])])),_:1},8,["model"]),N(p,{class:"mt-4px"},{default:A((()=>[F("li",null,K(e.$t("WP.Sets.index_12")),1)])),_:1})])}}}),oe={class:"p-20px"},de=L({__name:"index",props:{data:{}},setup(e,{expose:t}){const{t:a}=T(),o=e,{id:d}=o.data,{keys:p,table:r,columns:u}=s([{type:"selection",width:40},{key:"name",title:a("Site.TableRow.index_2")}]),{loading:_,setLoading:h}=i();(async()=>{try{h(!0);const{message:e}=await w();c(e)&&(r.data=e)}finally{p.value=[],h(!1)}})();return t({onConfirm:async()=>{if(!p.value.length)return m.error(a("WP.Sets.index_18")),!1;const e=p.value.join(",");await S({set_id:d,site_ids:e})}}),(e,t)=>{const a=n,s=l;return q(),D("div",oe,[N(a,{"checked-row-keys":H(p),"onUpdate:checkedRowKeys":t[0]||(t[0]=e=>M(p)?p.value=e:null),"row-key":"id",loading:H(_),data:H(r).data,"max-height":220,columns:H(u)},null,8,["checked-row-keys","loading","data","columns"]),N(s,{class:"mt-16px"},{default:A((()=>[F("li",null,K(e.$t("WP.Sets.index_17")),1),F("li",null,K(e.$t("WP.Sets.index_19")),1)])),_:1})])}}}),pe={class:"flex-1 flex flex-col gap-10px"},re="/tmp",ue=L({__name:"upload-btn",props:{path:{},pathModifiers:{},name:{default:""},nameModifiers:{}},emits:["update:path","update:name"],setup(e){const t=O(e,"path"),a=O(e,"name"),l=B([]),{t:s}=T(),i=async({file:e})=>{const{close:i}=m.loading(s("Component.Api.index_4"));try{const l=new FormData;l.append("f_path",re),l.append("f_name",e.name),l.append("f_start","0"),e.file&&(l.append("blob",e.file),l.append("f_size",e.file.size.toString()));const{message:s}=await le(l);h(s)&&m.success(s.result),a.value=e.name,t.value=re+"/"+e.name}finally{l.value=[],i()}};return(e,t)=>{const s=te,n=x;return q(),D("div",pe,[N(n,{"file-list":H(l),"onUpdate:fileList":t[0]||(t[0]=e=>M(l)?l.value=e:null),action:"",accept:".zip",multiple:!1,"show-file-list":!1,"custom-request":i},{default:A((()=>[N(s,{type:"primary"},{default:A((()=>[V(K(e.$t("WP.Sets.index_31")),1)])),_:1})])),_:1},8,["file-list"]),E(F("div",{class:"text-font3"},K(e.$t("WP.Sets.index_32")),513),[[J,!a.value]]),E(F("div",{class:"text-primary"},K(e.$t("WP.Sets.index_33",[a.value])),513),[[J,a.value]])])}}}),_e={class:"p-20px"},ce={class:"w-240px"},me={class:"w-240px"},he={class:"my-16px"},xe={class:"leading-20px text-font2"},fe=L({__name:"index",props:{id:{type:Number,default:0},type:{type:Number,default:1},refresh:{type:Function}},setup(e,{expose:t}){const a=X("formRef"),l=X("pathItemRef"),s=B(!1),i=B(""),{t:n}=T(),o=G((()=>1===e.type?n("WP.Sets.index_28"):n("WP.Sets.index_29"))),d=G((()=>1===e.type?n("WP.Sets.index_24"):n("WP.Sets.index_25"))),p=I({set_id:e.id,path:"",type:1===e.type?"plugin":"theme",slug:"",title:""}),r={path:{trigger:["change"],validator:(e,t)=>!!t||new Error(n("WP.Sets.index_30"))}},u=e=>{e&&i.value?(p.slug=i.value.replace(".zip",""),p.title=i.value.replace(".zip","")):(p.slug="",p.title="")},_=()=>{var e;null==(e=l.value)||e.restoreValidation()},c=e=>{s.value&&(p.slug=e.replace(".zip",""),p.title=e.replace(".zip",""))};return t({onConfirm:async()=>{var t,l;await(null==(t=a.value)?void 0:t.validate()),await P(Q(p)),null==(l=e.refresh)||l.call(e)}}),(e,t)=>{const n=ee,m=Z,h=ae,x=z,y=f;return q(),D("div",_e,[N(x,{ref_key:"formRef",ref:a,model:H(p),rules:r,"label-width":"160px"},{default:A((()=>[N(n,{ref_key:"pathItemRef",ref:l,label:H(o),path:"path"},{default:A((()=>[N(ue,{path:H(p).path,"onUpdate:path":[t[0]||(t[0]=e=>H(p).path=e),_],name:H(i),"onUpdate:name":[t[1]||(t[1]=e=>M(i)?i.value=e:null),c]},null,8,["path","name"])])),_:1},8,["label"]),N(h,{show:H(s),"onUpdate:show":[t[4]||(t[4]=e=>M(s)?s.value=e:null),u],title:e.$t("WP.Sets.index_20")},{default:A((()=>[N(n,{label:e.$t("WP.Sets.index_21")},{default:A((()=>[F("div",ce,[N(m,{value:H(p).slug,"onUpdate:value":t[2]||(t[2]=e=>H(p).slug=e),placeholder:e.$t("WP.Sets.index_22")},null,8,["value","placeholder"])])])),_:1},8,["label"]),N(n,{label:e.$t("WP.Sets.index_23")},{default:A((()=>[F("div",me,[N(m,{value:H(p).title,"onUpdate:value":t[3]||(t[3]=e=>H(p).title=e),placeholder:H(d)},null,8,["value","placeholder"])])])),_:1},8,["label"])])),_:1},8,["show","title"])])),_:1},8,["model"]),F("div",he,[N(y)]),F("div",xe,[F("p",null,K(e.$t("WP.Sets.index_26")),1),F("p",null,K(e.$t("WP.Sets.index_27")),1)])])}}}),ye={class:"p-20px"},ve=v(L({__name:"index",props:{id:{},type:{},getList:{}},setup(e){const{t:a}=T(),r=X("searchRef"),u=e,{id:x,type:v,getList:g}=u,w=()=>{p({title:a(1===v?"WP.Sets.index_34":"WP.Sets.index_35"),width:500,footer:!0,data:{id:x,type:v,refresh:Z},component:fe})},{keys:S,table:P,columns:U}=s([{key:"title",title:a("Site.TableRow.index_2"),width:"70%"},o({key:"state",title:a("WP.TableRow.index_9"),minWidth:100,onClick:async(e,t)=>{await b({item_ids:t.id,state:e?1:0,type:v}),Z()}}),d({width:80,options:e=>[{label:a("Public.Btn.Del"),onClick:async()=>{await j({item_ids:e.id,type:v}),Z(),null==g||g()}}]})]),{keys:C,table:z,columns:L}=s([{type:"selection",width:40,disabled:e=>e.is_in_set},{key:"name",title:a("Site.TableRow.index_2"),width:"60%"},{key:"title",title:a("WP.index_19"),render:e=>N(y,{size:"small",readonly:!0,color:"#4fb233",value:e.rating/20},null)}]),B=I({p:1,p_size:999,keyword:"",set_id:x}),O=async()=>{var e;if(!C.value.length)return m.error(a("WP.Sets.index_14")),void(null==(e=r.value)||e.focus());const t=z.data.filter((e=>C.value.includes(e.slug))).map((e=>({slug:e.slug,title:e.name,description:1===v?e.short_description:e.description})));await W({set_id:x,items:JSON.stringify(t),type:v}),Z(),null==g||g()},E=async()=>{if(B.keyword)try{const{message:e}=1===v?await R(Q(B),!0):await $(Q(B),!0);h(e)&&(z.total=e.total,c(e.list)?(z.data=e.list,z.data.length||m.error(a("WP.Sets.index_16"))):(z.data=[],z.total=0))}finally{C.value=[]}else m.error(a("WP.Sets.index_15"))},{loading:J,setLoading:G}=i(),Z=async()=>{try{G(!0);const{message:e}=await k({set_id:x,type:v});c(e)&&(P.data=e)}finally{S.value=[],G(!1)}};return Z(),(e,a)=>{const s=te,i=_,o=n,d=t,p=f,u=l;return q(),D("div",ye,[N(d,null,Y({toolsLeft:A((()=>[N(s,{type:"primary",onClick:O},{default:A((()=>[V(K(e.$t("Public.Btn.Add")),1)])),_:1}),N(s,{onClick:w},{default:A((()=>[V(K(e.$t("Public.Btn.Upload")),1)])),_:1})])),toolsRight:A((()=>[N(i,{ref_key:"searchRef",ref:r,value:H(B).keyword,"onUpdate:value":a[0]||(a[0]=e=>H(B).keyword=e),placeholder:e.$t("Public.Btn.Search"),onSearch:E},null,8,["value","placeholder"])])),_:2},[H(z).data.length?{name:"table",fn:A((()=>[N(o,{class:"custom-table",bordered:!1,"checked-row-keys":H(C),"onUpdate:checkedRowKeys":a[1]||(a[1]=e=>M(C)?C.value=e:null),"row-key":"slug","max-height":150,data:H(z).data,columns:H(L)},null,8,["checked-row-keys","data","columns"])])),key:"0"}:void 0]),1024),N(p,{class:"my-20px!"}),N(o,{loading:H(J),data:H(P).data,columns:H(U),"max-height":150},null,8,["loading","data","columns"]),N(u,{class:"mt-16px"},{default:A((()=>[F("li",null,K(e.$t("WP.Sets.index_13")),1),F("li",null,K(e.$t("WP.Sets.index_36")),1)])),_:1})])}}}),[["__scopeId","data-v-a0020a5f"]]),ge={class:"p-20px"},we=L({__name:"index",setup(l,{expose:o}){const{t:p}=T(),c=r(p("WP.Sets.index_2")),m=I({p:1,p_size:10,keyword:""}),x=()=>{k.show=!0},f=()=>{m.p=1,b()},y=(e,t,a)=>{j.title=t,j.data.id=e.id,j.data.type=a,j.show=!0},{keys:v,table:g,columns:w}=s([{key:"name",title:p("Site.TableRow.index_2"),width:"40%",ellipsis:{tooltip:{width:"trigger"}}},d({title:p("WP.Sets.index_3"),align:"center",options:e=>[{label:p("WP.Sets.index_4",[e.plugins.length]),onClick:()=>{y(e,p("WP.Sets.index_5"),1)}}]}),d({title:p("WP.Sets.index_6"),align:"center",options:e=>[{label:p("WP.Sets.index_7",[e.themes.length]),onClick:()=>{y(e,p("WP.Sets.index_8"),2)}}]}),d({width:100,align:"center",options:e=>[{label:p("WP.TableRow.index_13"),disabled:!e.plugins.length&&!e.themes.length,onClick:()=>{c.data.id=e.id,c.show=!0}},{label:p("Public.Btn.Del"),onClick:()=>{u({title:"".concat(p("Site.TableOP.index_6")," [").concat(e.name,"]"),content:p("WP.Sets.index_9"),onConfirm:async({hide:t})=>{await U({set_id:e.id}),b(),t()}})}}]})]),{loading:S,setLoading:P}=i(),b=async()=>{try{P(!0);const{message:e}=await C(Q(m));h(e)&&(g.data=e.list,g.total=e.total)}finally{v.value=[],P(!1)}},j=r(p("WP.Sets.index_5"),{getList:b}),k=r(p("WP.Sets.index_10"),{getList:b});return b(),o({init:b}),(l,s)=>{const i=te,o=_,d=n,p=a,r=t,u=e;return q(),D("div",ge,[N(r,null,{toolsLeft:A((()=>[N(i,{type:"primary",onClick:x},{default:A((()=>[V(K(l.$t("WP.Sets.index_1")),1)])),_:1})])),toolsRight:A((()=>[N(o,{value:H(m).keyword,"onUpdate:value":s[0]||(s[0]=e=>H(m).keyword=e),placeholder:l.$t("Security.History.Index_14"),onSearch:f},null,8,["value","placeholder"])])),table:A((()=>[N(d,{"max-height":250,loading:H(S),data:H(g).data,columns:H(w)},null,8,["loading","data","columns"])])),pageRight:A((()=>[N(p,{page:H(m).p,"onUpdate:page":s[1]||(s[1]=e=>H(m).p=e),"page-size":H(m).p_size,"onUpdate:pageSize":s[2]||(s[2]=e=>H(m).p_size=e),"item-count":H(g).total,onRefresh:b},null,8,["page","page-size","item-count"])])),_:1}),N(u,{show:H(k).show,"onUpdate:show":s[3]||(s[3]=e=>H(k).show=e),title:H(k).title,data:H(k).data,width:480,footer:!0,component:ne},null,8,["show","title","data"]),N(u,{show:H(j).show,"onUpdate:show":s[4]||(s[4]=e=>H(j).show=e),title:H(j).title,data:H(j).data,width:600,"min-height":350,footer:!1,component:ve},null,8,["show","title","data"]),N(u,{show:H(c).show,"onUpdate:show":s[5]||(s[5]=e=>H(c).show=e),title:H(c).title,data:H(c).data,width:480,"min-height":350,footer:!0,"confirm-text":l.$t("WP.TableRow.index_13"),component:de},null,8,["show","title","data","confirm-text"])])}}});export{we as default};
