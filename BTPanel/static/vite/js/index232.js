import{_ as e}from"./index107.js?v=1762424784323";import{_ as a}from"./index.vue_vue_type_script_setup_true_lang.js?v=1762424784323";import{_ as t}from"./index.vue_vue_type_script_setup_true_lang10.js?v=1762424784323";import{_ as s}from"./index99.js?v=1762424784323";import{o as l,w as i,_ as n,q as d,g as r,d as o,m as p,bS as u,b3 as _,p as c}from"./page_layout.js?v=1762424784323";import{k as v,P as m,a0 as f,ae as P,c as h,R as g,V as b,F as y,S as x,an as w,W as S,U as H,a3 as $,j,a4 as U,r as k,n as q,e as E,l as L,a2 as R,ak as I,v as C}from"./vue.js?v=1762424784323";import{g as M,f as z,aO as O,aP as B}from"./site.js?v=1762424784323";import{n as D,d as T,u as G,i as J}from"./public.js?v=1762424784323";import{u as N}from"./index84.js?v=1762424784323";import{dV as Q,dR as V,dT as A,dU as F,au as W,da as K,dj as X,dg as Y,dh as Z}from"./naive.js?v=1762424784323";import{D as ee}from"./domain-input.js?v=1762424784323";import{g as ae}from"./git-ps.js?v=1762424784323";import{l as te}from"./php.js?v=1762424784323";import"./index98.js?v=1762424784323";import"./common.js?v=1762424784323";import"./__commonjsHelpers__.js?v=1762424784323";import"./index132.js?v=1762424784323";import"./index.vue_vue_type_script_setup_true_lang5.js?v=1762424784323";import"./index.vue_vue_type_script_setup_true_lang6.js?v=1762424784323";import"./index.vue_vue_type_script_setup_true_lang7.js?v=1762424784323";import"./index.vue_vue_type_script_setup_true_lang12.js?v=1762424784323";import"./index.vue_vue_type_script_setup_true_lang8.js?v=1762424784323";import"./index130.js?v=1762424784323";import"./soft.js?v=1762424784323";import"./soft2.js?v=1762424784323";import"./useOperate.js?v=1762424784323";import"./useModal2.js?v=1762424784323";import"./index.vue_vue_type_script_setup_true_lang15.js?v=1762424784323";import"./index.js?v=1762424784323";const se={class:"w-150px"},le={key:0,class:"ml-8px"},ie=v({__name:"select-ftp",props:{value:{default:"0"},valueModifiers:{}},emits:["update:value"],setup(e){const{t:a}=m(),t=N(),{ftp:s}=f(t),i=P(e,"value"),n=[{label:a("Site.PHP.add_site_31"),value:"0"},{label:a("Site.PHP.add_site_34"),value:"1"}],d=h(()=>!s.value.setup),r=()=>{D("pureftpd")};return(e,a)=>{const t=Q,s=l;return b(),g(y,null,[x("div",se,[S(t,{value:i.value,"onUpdate:value":a[0]||(a[0]=e=>i.value=e),class:"ftp-select",options:n,disabled:H(d)},null,8,["value","disabled"])]),H(d)?(b(),g("div",le,[S(s,{onClick:r},{default:$(()=>[j(U(e.$t("Site.PHP.add_site_33")),1)]),_:1})])):w("",!0)],64)}}}),ne={class:"w-150px"},de={key:0,class:"ml-8px"},re=v({__name:"select-database",props:{value:{default:"0"},valueModifiers:{}},emits:["update:value"],setup(e){const{t:a}=m(),t=N(),{mysql:s}=f(t),i=P(e,"value"),n=[{label:a("Site.PHP.add_site_31"),value:"0"},{label:a("Site.PHP.add_site_32"),value:"MySQL"}],d=h(()=>!s.value.setup),r=()=>{D("mysql")};return(e,a)=>{const t=Q,s=l;return b(),g(y,null,[x("div",ne,[S(t,{value:i.value,"onUpdate:value":a[0]||(a[0]=e=>i.value=e),class:"db-select",options:n,disabled:H(d)},null,8,["value","disabled"])]),H(d)?(b(),g("div",de,[S(s,{onClick:r},{default:$(()=>[j(U(e.$t("Site.PHP.add_site_30")),1)]),_:1})])):w("",!0)],64)}}}),oe={class:"w-150px"},pe=v({__name:"select-php",props:{value:{},valueModifiers:{}},emits:["update:value"],setup(e){const a=P(e,"value"),{loading:t,setLoading:s}=T(),l=k([]);return(async()=>{try{s(!0);const{message:e}=await M(),t=i(e)?e:[];l.value=t.reverse().map(e=>({label:e.name,value:e.version})),await q(),t.length>0&&(a.value=t[0].version)}finally{s(!1)}})(),(e,s)=>{const i=Q;return b(),g("div",oe,[S(i,{value:a.value,"onUpdate:value":s[0]||(s[0]=e=>a.value=e),class:"php-select",loading:H(t),options:H(l)},null,8,["value","loading","options"])])}}}),ue={class:"w-150px"},_e=v({__name:"select-category",props:{value:{},valueModifiers:{}},emits:["update:value"],setup(e){const a=P(e,"value"),{loading:t,setLoading:s}=T(),l=k([]);return(async()=>{try{s(!0);const{message:e}=await z();i(e)?(l.value=e.map(e=>({label:e.name,value:e.id})),e.length>0&&(a.value=e[0].id)):l.value=[]}finally{s(!1)}})(),(e,s)=>{const i=Q;return b(),g("div",ue,[S(i,{value:a.value,"onUpdate:value":s[0]||(s[0]=e=>a.value=e),class:"type-select",loading:H(t),options:H(l)},null,8,["value","loading","options"])])}}}),ce={class:"flex items-center w-600px py-30px px-50px"},ve={class:"w-120px text-primary"},me={class:"flex flex-col gap-16px flex-1 ml-60px"},fe={key:0,class:"leading-24px"},Pe={class:"flex items-center h-30px"},he={class:"mt-8px"},ge={class:"font-bold"},be={class:"font-bold"},ye={key:1,class:"leading-24px"},xe={class:"flex items-center h-30px"},we={class:"mt-8px"},Se={class:"font-bold"},He={class:"font-bold"},$e=v({__name:"site-result",props:{data:{}},setup(e){const a=e,{info:t}=a.data;return(e,a)=>{const s=n,l=d;return b(),g("div",ce,[x("div",ve,[S(s,{name:"base-success",size:"120"})]),x("div",me,[H(t).ftpStatus?(b(),g("div",fe,[x("div",Pe,U(e.$t("Site.PHP.add_site_35")),1),S(l,{dashed:""}),x("div",he,[j(U(e.$t("Site.PHP.add_site_37")),1),x("span",ge,U(H(t).ftpUser||"--"),1)]),x("div",null,[j(U(e.$t("Site.PHP.add_site_38")),1),x("span",be,U(H(t).ftpPass||"--"),1)])])):w("",!0),H(t).databaseStatus?(b(),g("div",ye,[x("div",xe,U(e.$t("Site.PHP.add_site_36")),1),S(l,{dashed:""}),x("div",we,[j(U(e.$t("Site.PHP.add_site_37"))+" ",1),x("span",Se,U(H(t).databaseUser||"--"),1)]),x("div",null,[j(U(e.$t("Site.PHP.add_site_38"))+" ",1),x("span",He,U(H(t).databasePass||"--"),1)])])):w("",!0)])])}}}),je={class:"w-440px"},Ue={class:"w-400px"},ke={class:"w-400px"},qe={class:"flex-1"},Ee={class:"w-174px"},Le={class:"ml-8px"},Re={class:"w-174px"},Ie={class:"mt-8px text-desc"},Ce={class:"flex-1"},Me={class:"w-174px"},ze={class:"ml-8px"},Oe={class:"w-174px"},Be={class:"mt-8px text-desc"},De={class:"w-150px"},Te=v({__name:"index",setup(e,{expose:l}){const{t:i}=m(),d=N(),u=k("0"),_=k("0"),c=k(null),v=k(null),f=k([]),P=E({type:0,domain:[""],webname:{domain:""},ps:"",path:d.sitePath,ftp:!1,ftp_username:"",ftp_password:"",sql:!1,codeing:"utf8",datauser:"",datapassword:"",version:null,type_id:null,set_ssl:!1,force_ssl:!1,is_create_default_file:!0}),h={"webname.domain":{required:!0,trigger:["blur","change"],validator:(e,a)=>""!==a.trim()||0!==P.type||new Error(i("Site.PHP.add_site_23"))},domain:{trigger:["blur"],validator:(e,a)=>!(!a[0]&&1===P.type)||new Error(i("Site.PHP.add_site_23"))},path:{trigger:["blur","change"],validator:(e,a)=>""!==a||new Error(i("Site.PHP.add_site_26"))},version:{trigger:"change",validator:(e,a)=>null!==a||new Error(i("Site.PHP.add_site_27"))},type_id:{trigger:"change",validator:(e,a)=>null!==a||new Error(i("Site.PHP.add_site_28"))}},y=e=>{if(!e)return void(P.webname.domain=P.domain.filter(Boolean).join("\n"));const a=P.webname.domain.trim();a!==P.domain.join("\n")&&(P.domain=a?a.split("\n").filter(Boolean):[""],P.domain.forEach((e,a)=>{var t;return null==(t=c.value)?void 0:t.onDomainItemBlur(e,a)}))},q=e=>{const a=null==e?void 0:e.trim().split("\n")[0].split(":")[0];if(a){const e=a.replace(new RegExp(/([-.])/g),"_");P.ps=e,P.path="".concat(d.sitePath,"/").concat(a),P.ftp_username="ftp_".concat(e),P.ftp_password=r(16),P.datauser="sql_".concat(e),P.datapassword=r(16)}else P.ps="",P.path=d.sitePath,P.ftp_username="",P.ftp_password="",P.datauser="",P.datapassword=""},M=e=>{P.ftp="1"===e},z=e=>{P.sql="0"!==e&&e};return l({onConfirm:async()=>{var e;await new Promise((e,a)=>{0===f.value.filter(e=>e.support.includes("auto")).length&&1===P.type?(p.error("This domain does not support automatic resolution, please choose manual resolution"),a(!1)):e(!0)}),await(null==(e=v.value)?void 0:e.validate());const{message:a}=await O((()=>{const{version:e,type_id:a}=P;if(null===e)throw p.error(i("Site.PHP.add_site_27")),new Error(i("Site.PHP.add_site_27"));if(null===a)throw p.error(i("Site.PHP.add_site_28")),new Error(i("Site.PHP.add_site_28"));const t=P.webname.domain.trim().split("\n"),s=t[0]+"\r",l=t[0].split(":")[1]||"80",n=t.length>1?t.slice(1):[],d=f.value.map(e=>({domain:e.domain,hash:e.hash,support:[...e.auto?["auto"]:[],...e.ssl_cert?["ssl_cert"]:[],...e.cf_proxy?["cf_proxy"]:[]]}));let r={webname:{domain:s,domainlist:n,count:n.length},parse_list:1===P.type&&d.length?JSON.stringify(d):null,port:l,type:"PHP",ps:P.ps,path:P.path,ftp:P.ftp,sql:P.sql,codeing:P.codeing,version:e,type_id:a,set_ssl:P.set_ssl?1:0,force_ssl:P.force_ssl?1:0,is_create_default_file:P.is_create_default_file};return P.ftp&&(r=Object.assign(r,{ftp_username:P.ftp_username,ftp_password:P.ftp_password})),P.sql&&(r=Object.assign(r,{datauser:P.datauser,datapassword:P.datapassword})),r})());var t;!o(a)||!1===a.ftpStatus&&!1===a.databaseStatus?p.success(i("Site.PHP.add_site_29")):(t=a,G({title:i("Site.PHP.add_site_29"),data:{info:t},component:$e})),d.setRefresh(!0)}}),(e,l)=>{const i=F,d=A,r=n,o=V,p=s,m=W,k=t,E=K,O=X,B=a;return b(),g("div",null,[S(B,{ref_key:"formRef",ref:v,model:H(P),rules:h},{default:$(()=>[S(o,{label:e.$t("SSL.index_1")},{default:$(()=>[S(d,{value:H(P).type,"onUpdate:value":[l[0]||(l[0]=e=>H(P).type=e),y]},{default:$(()=>[S(i,{value:0},{default:$(()=>[j(U(e.$t("SSL.index_2")),1)]),_:1}),S(i,{value:1},{default:$(()=>[j(U(e.$t("SSL.index_3")),1)]),_:1})]),_:1},8,["value"]),S(r,{name:"ssl-stars",size:22})]),_:1},8,["label"]),L(S(o,{label:e.$t("Site.PHP.add_site_4"),path:"domain"},{default:$(()=>[S(ee,{ref_key:"domainInputRef",ref:c,value:H(P).domain,"onUpdate:value":l[1]||(l[1]=e=>H(P).domain=e),"parse-list":H(f),"onUpdate:parseList":l[2]||(l[2]=e=>I(f)?f.value=e:null),"onUpdate:domain":q},null,8,["value","parse-list"])]),_:1},8,["label"]),[[C,1===H(P).type]]),L(S(o,{label:e.$t("Site.PHP.add_site_4"),path:"webname.domain"},{default:$(()=>[x("div",je,[S(p,{value:H(P).webname.domain,"onUpdate:value":[l[3]||(l[3]=e=>H(P).webname.domain=e),q],name:"domain"},{default:$(()=>[x("p",null,U(e.$t("Site.PHP.add_site_5")),1),x("p",null,U(e.$t("Site.PHP.add_site_6")),1),x("p",null,U(e.$t("Site.PHP.add_site_7")),1)]),_:1},8,["value"])])]),_:1},8,["label"]),[[C,0===H(P).type]]),S(o,{label:e.$t("Site.PHP.add_site_8"),path:"ps"},{default:$(()=>[x("div",Ue,[S(m,{value:H(P).ps,"onUpdate:value":l[4]||(l[4]=e=>H(P).ps=e),"input-props":{name:"ps"},placeholder:""},null,8,["value"])])]),_:1},8,["label"]),S(o,{label:e.$t("Site.PHP.add_site_9"),path:"path"},{default:$(()=>[x("div",ke,[S(k,{value:H(P).path,"onUpdate:value":l[5]||(l[5]=e=>H(P).path=e),"input-props":{name:"path"}},null,8,["value"])])]),_:1},8,["label"]),S(o,{label:e.$t("Site.PHP.add_site_10")},{default:$(()=>[S(ie,{value:H(u),"onUpdate:value":[l[6]||(l[6]=e=>I(u)?u.value=e:null),M]},null,8,["value"])]),_:1},8,["label"]),"1"===H(u)?(b(),R(o,{key:0,label:e.$t("Site.PHP.add_site_11")},{default:$(()=>[x("div",qe,[S(E,{class:"items-center"},{default:$(()=>[x("div",Ee,[S(m,{value:H(P).ftp_username,"onUpdate:value":l[7]||(l[7]=e=>H(P).ftp_username=e),"input-props":{name:"ftp_username"},placeholder:e.$t("Site.PHP.add_site_12")},null,8,["value","placeholder"])]),x("div",Le,U(e.$t("Site.PHP.add_site_13")),1),x("div",Re,[S(m,{value:H(P).ftp_password,"onUpdate:value":l[8]||(l[8]=e=>H(P).ftp_password=e),"input-props":{name:"ftp_password"},placeholder:e.$t("Site.PHP.add_site_14")},null,8,["value","placeholder"])])]),_:1}),x("div",Ie,U(e.$t("Site.PHP.add_site_15")),1)])]),_:1},8,["label"])):w("",!0),S(o,{label:e.$t("Site.PHP.add_site_16")},{default:$(()=>[S(re,{value:H(_),"onUpdate:value":[l[9]||(l[9]=e=>I(_)?_.value=e:null),z]},null,8,["value"])]),_:1},8,["label"]),"MySQL"===H(_)?(b(),R(o,{key:1,label:e.$t("Site.PHP.add_site_17")},{default:$(()=>[x("div",Ce,[S(E,{class:"items-center"},{default:$(()=>[x("div",Me,[S(m,{value:H(P).datauser,"onUpdate:value":l[10]||(l[10]=e=>H(P).datauser=e),"input-props":{name:"db_username"},placeholder:e.$t("Site.PHP.add_site_18")},null,8,["value","placeholder"])]),x("div",ze,U(e.$t("Site.PHP.add_site_13")),1),x("div",Oe,[S(m,{value:H(P).datapassword,"onUpdate:value":l[11]||(l[11]=e=>H(P).datapassword=e),"input-props":{name:"db_password"},placeholder:e.$t("Site.PHP.add_site_19")},null,8,["value","placeholder"])])]),_:1}),x("div",Be,U(e.$t("Site.PHP.add_site_20")),1)])]),_:1},8,["label"])):w("",!0),S(o,{label:e.$t("Site.PHP.add_site_21"),path:"version"},{default:$(()=>[x("div",De,[S(pe,{value:H(P).version,"onUpdate:value":l[12]||(l[12]=e=>H(P).version=e)},null,8,["value"])])]),_:1},8,["label"]),S(o,{label:e.$t("Site.PHP.add_site_22"),path:"type_id"},{default:$(()=>[S(_e,{value:H(P).type_id,"onUpdate:value":l[13]||(l[13]=e=>H(P).type_id=e)},null,8,["value"])]),_:1},8,["label"]),S(o,{label:e.$t("SSL.SiteSSL.index_18")},{default:$(()=>[S(O,{value:H(P).is_create_default_file,"onUpdate:value":l[14]||(l[14]=e=>H(P).is_create_default_file=e)},null,8,["value"])]),_:1},8,["label"])]),_:1},8,["model"])])}}}),Ge={class:"px-10px"},Je={class:"mt-8px leading-22px text-default"},Ne={class:"mt-6px"},Qe=v({__name:"index",setup(e,{expose:t}){const{t:l}=m(),i=N(),n=E({domain:"domain|1|0|0|0\ndomain|1|0|0|0\ndomain|1|0|0|0"}),d=k([{key:"name",title:l("Site.TableRow.index_1")},{key:"ftp",title:l("Site.PHP.add_site_10"),render:e=>e.succesInfo?e.succesInfo.ftp_status?S("span",{class:"text-primary"},[l("Site.PHP.index_35")]):"".concat(l("Site.PHP.index_37")):"--"},{key:"database",title:l("Site.PHP.add_site_16"),render:e=>e.succesInfo?e.succesInfo.db_status?S("span",{class:"text-primary"},[l("Site.PHP.index_35")]):"".concat(l("Site.PHP.index_37")):"--"},{key:"result",title:l("Site.DelSite.index_10"),render:e=>"error"===e.status?S("span",{class:"text-error"},[e.errorMsg]):S("span",{class:"text-primary"},[l("Site.PHP.index_35")])}]);return t({onConfirm:async()=>{let e=[];const a=n.domain.trim().split("\n");for(let s=0;s<a.length;s++){const t=a[s].split("|");for(let a=0;a<t.length;a++){const i=s+1,n=t[a].trim();switch(a){case 0:e=n.split(",");for(let a=0;a<e.length;a++){const a=e[0],t=a.split(":");if(!u(t[0]))return void p.error("".concat(l("Site.PHP.index_39")," ").concat(i,", ").concat(l("Site.PHP.index_40")," [").concat(a,"]"));if(void 0!==t[1]&&_(t[1]))return void p.error("".concat(l("Site.PHP.index_39")," ").concat(i,", ").concat(l("Site.PHP.index_41")," [").concat(t[1],"]"))}break;case 1:if("1"!==n&&n.indexOf("/")<-1)return void p.error("".concat(l("Site.PHP.index_39")," ").concat(i,", ").concat(l("Site.PHP.index_42")," [").concat(n,"]"))}}}const{message:t}=await B({websites_content:a});o(t)&&(p.success(t.msg),(e=>{const a=[];Object.entries(e.error).forEach(([e,t])=>{a.push({name:e,status:"error",errorMsg:t.result})}),Object.entries(e.success).forEach(([e,t])=>{a.push({name:e,status:"success",succesInfo:t})}),G({title:l("Site.PHP.index_38"),content:()=>S("div",{class:"w-500px p-20px"},[S(Y,{data:a,columns:d.value},null)])})})(t)),i.setRefresh(!0)}}),(e,t)=>{const l=s,i=V,d=a;return b(),g("div",Ge,[S(d,{ref:"formRef"},{default:$(()=>[S(i,{label:""},{default:$(()=>[S(l,{value:H(n).domain,"onUpdate:value":t[0]||(t[0]=e=>H(n).domain=e),rows:10,name:"batch-domain"},null,8,["value"])]),_:1})]),_:1},512),x("div",Je,[x("p",null,U(e.$t("Site.PHP.add_site_39")),1),x("p",Ne,U(e.$t("Site.PHP.add_site_40")),1),x("p",null,U(e.$t("Site.PHP.add_site_41")),1),x("p",null,U(e.$t("Site.PHP.add_site_42")),1),x("p",null,U(e.$t("Site.PHP.add_site_43")),1),x("p",null,U(e.$t("Site.PHP.add_site_44")),1),t[1]||(t[1]=x("p",{class:"mt-6px"},"Eq, bt.cn,test.cn:8081|/www/wwwroot/bt.cn|1|1|56",-1))])])}}}),Ve={class:"w-440px"},Ae={class:"w-400px"},Fe={key:0},We=["src"],Ke=v({__name:"index",setup(e,{expose:l}){const{t:i}=m(),d=N(),u=k(null),_=k(null),c=k([]),v=E({type:0,domain:[""],webname:{domain:""},ps:"",path:d.sitePath,ftp:!1,ftp_username:"",ftp_password:"",sql:!1,codeing:"utf8",datauser:"",datapassword:"",version:null,type_id:null,set_ssl:!1,force_ssl:!1,deploy_type:"ssh",git_repo:null,git_branch:null,ssh_key:"",ssh_repo:null,deploy_script:"",ssh_branch:""}),f={"webname.domain":{required:!0,trigger:["blur","change"],validator:(e,a)=>""!==a.trim()||0!==v.type||new Error(i("Site.PHP.add_site_23"))},domain:{trigger:["blur"],validator:(e,a)=>!(!a[0]&&1===v.type)||new Error(i("Site.PHP.add_site_23"))},path:{trigger:["blur","change"],validator:(e,a)=>""!==a||new Error(i("Site.PHP.add_site_26"))},version:{trigger:"change",validator:(e,a)=>null!==a||new Error(i("Site.PHP.add_site_27"))},type_id:{trigger:"change",validator:(e,a)=>null!==a||new Error(i("Site.PHP.add_site_28"))},git_repo:{required:!0,trigger:["blur","change"],message:"Please select a repository"},git_branch:{required:!0,trigger:["blur","change"],message:"Please select a branch"},ssh_repo:{required:!0,trigger:["blur","change"],message:"Please input ssh repository"},deploy_script:{required:!0,trigger:["blur","change"],message:"Please input deploy script"},ssh_branch:{required:!0,trigger:["blur","change"],message:"Please input ssh branch"}},P=k([]),h=k([]),y=e=>{if(!e)return void(v.webname.domain=v.domain.filter(Boolean).join("\n"));const a=v.webname.domain.trim();a!==v.domain.join("\n")&&(v.domain=a?a.split("\n").filter(Boolean):[""],v.domain.forEach((e,a)=>{var t;return null==(t=u.value)?void 0:t.onDomainItemBlur(e,a)}))},q=()=>{J(v.ssh_key)},M=e=>{const a=null==e?void 0:e.trim().split("\n")[0].split(":")[0];if(a){const e=a.replace(new RegExp(/([-.])/g),"_");v.ps=e,v.path="".concat(d.sitePath,"/").concat(a),v.ftp_username="ftp_".concat(e),v.ftp_password=r(16),v.datauser="sql_".concat(e),v.datapassword=r(16)}else v.ps="",v.path=d.sitePath,v.ftp_username="",v.ftp_password="",v.datauser="",v.datapassword=""};return(async()=>{const{message:e}=await te();o(e)&&(v.ssh_key=e.result)})(),l({onConfirm:async()=>{var e;await new Promise((e,a)=>{0===c.value.filter(e=>e.support.includes("auto")).length&&1===v.type?(p.error("This domain does not support automatic resolution, please choose manual resolution"),a(!1)):e(!0)}),await(null==(e=_.value)?void 0:e.validate());const{message:a}=await O((()=>{const{version:e}=v;if(null===e)throw p.error(i("Site.PHP.add_site_27")),new Error(i("Site.PHP.add_site_27"));const a=v.webname.domain.trim().split("\n"),t=a[0]+"\r",s=a[0].split(":")[1]||"80",l=a.length>1?a.slice(1):[],n=c.value.map(e=>({domain:e.domain,hash:e.hash,support:[...e.auto?["auto"]:[],...e.ssl_cert?["ssl_cert"]:[],...e.cf_proxy?["cf_proxy"]:[]]}));return{webname:{domain:t,domainlist:l,count:l.length},parse_list:1===v.type&&n.length?JSON.stringify(n):null,port:s,type:"PHP",ps:v.ps,path:v.path,ftp:v.ftp,sql:v.sql,codeing:v.codeing,version:e,type_id:null,set_ssl:v.set_ssl?1:0,force_ssl:v.force_ssl?1:0,deploy_type:v.deploy_type,deploy_script:v.deploy_script,repo:v.ssh_repo,branch:"ssh"===v.deploy_type?v.ssh_branch:v.git_branch}})());o(a)&&(p.success(a.result),d.setRefresh(!0))}}),(e,l)=>{const i=F,d=A,r=n,o=V,p=s,m=t,k=K,E=Q,z=W,O=Z,B=a;return b(),g("div",null,[S(B,{ref_key:"formRef",ref:_,model:H(v),rules:f},{default:$(()=>[S(o,{label:e.$t("SSL.index_1")},{default:$(()=>[S(d,{value:H(v).type,"onUpdate:value":[l[0]||(l[0]=e=>H(v).type=e),y]},{default:$(()=>[S(i,{value:0},{default:$(()=>[j(U(e.$t("SSL.index_2")),1)]),_:1}),S(i,{value:1},{default:$(()=>[j(U(e.$t("SSL.index_3")),1)]),_:1})]),_:1},8,["value"]),S(r,{name:"ssl-stars",size:22})]),_:1},8,["label"]),L(S(o,{label:e.$t("Site.PHP.add_site_4"),path:"domain"},{default:$(()=>[S(ee,{ref_key:"domainInputRef",ref:u,value:H(v).domain,"onUpdate:value":l[1]||(l[1]=e=>H(v).domain=e),"parse-list":H(c),"onUpdate:parseList":l[2]||(l[2]=e=>I(c)?c.value=e:null),"onUpdate:domain":M},null,8,["value","parse-list"])]),_:1},8,["label"]),[[C,1===H(v).type]]),L(S(o,{label:e.$t("Site.PHP.add_site_4"),path:"webname.domain"},{default:$(()=>[x("div",Ve,[S(p,{value:H(v).webname.domain,"onUpdate:value":[l[3]||(l[3]=e=>H(v).webname.domain=e),M],name:"domain"},{default:$(()=>[x("p",null,U(e.$t("Site.PHP.add_site_5")),1),x("p",null,U(e.$t("Site.PHP.add_site_6")),1),x("p",null,U(e.$t("Site.PHP.add_site_7")),1)]),_:1},8,["value"])])]),_:1},8,["label"]),[[C,0===H(v).type]]),S(o,{label:e.$t("Site.PHP.add_site_9"),path:"path"},{default:$(()=>[x("div",Ae,[S(m,{value:H(v).path,"onUpdate:value":l[4]||(l[4]=e=>H(v).path=e),"input-props":{name:"path"}},null,8,["value"])])]),_:1},8,["label"]),S(o,{label:e.$t("Site.PHP.add_site_21"),path:"version"},{default:$(()=>[S(pe,{class:"w-400px",value:H(v).version,"onUpdate:value":l[5]||(l[5]=e=>H(v).version=e)},null,8,["value"])]),_:1},8,["label"]),S(o,{label:"Git provider",path:"deploy_type"},{default:$(()=>[S(d,{value:H(v).deploy_type,"onUpdate:value":l[6]||(l[6]=e=>H(v).deploy_type=e)},{default:$(()=>[w("",!0),S(i,{value:"ssh"},{default:$(()=>[S(k,{class:"items-center",size:2},{default:$(()=>l[14]||(l[14]=[x("i",{class:"i-octicon:git-branch-16 text-18px"},null,-1),x("span",null,"Custom",-1)])),_:1,__:[14]})]),_:1})]),_:1},8,["value"])]),_:1}),"github"===H(v).deploy_type?(b(),g("div",Fe,[S(o,{label:" "},{default:$(()=>[x("div",null,[S(o,{label:"Repository",path:"git_repo","label-placement":"top"},{default:$(()=>[S(E,{class:"w-400px",value:H(v).git_repo,"onUpdate:value":l[7]||(l[7]=e=>H(v).git_repo=e),name:"git_repo",options:H(P)},null,8,["value","options"])]),_:1}),S(o,{label:"Branch",path:"git_branch","label-placement":"top"},{default:$(()=>[S(E,{class:"w-400px",value:H(v).git_branch,"onUpdate:value":l[8]||(l[8]=e=>H(v).git_branch=e),name:"git_branch",options:H(h)},null,8,["value","options"])]),_:1})])]),_:1}),S(o,{label:"Deploy script",path:"deploy_script"},{default:$(()=>[S(z,{autosize:{minRows:4},class:"w-400px!",type:"textarea",value:H(v).deploy_script,"onUpdate:value":l[9]||(l[9]=e=>H(v).deploy_script=e),placeholder:'cd /www/wwwroot/aapanel.com\ngit pull origin master\necho "" | sudo -S service php8.3-fpm reload\necho "ðŸš€ Application deployed!"',name:"deploy_script"},null,8,["value"])]),_:1})])):w("",!0),"ssh"===H(v).deploy_type?(b(),R(o,{key:1,label:" "},{default:$(()=>[x("div",null,[S(o,{label:"SSH key","label-placement":"top"},{default:$(()=>[S(k,null,{default:$(()=>[S(k,{class:"items-center"},{default:$(()=>[S(z,{readonly:"",type:"textarea",class:"w-400px!",value:H(v).ssh_key,"onUpdate:value":l[10]||(l[10]=e=>H(v).ssh_key=e)},null,8,["value"]),S(r,{class:"cursor-pointer",name:"common-copy",size:22,onClick:q})]),_:1}),l[15]||(l[15]=x("div",null,"Make sure to add this SSH key to the repository in the GIT provider.",-1))]),_:1,__:[15]})]),_:1}),S(o,{label:"Repository",path:"ssh_repo","label-placement":"top"},{default:$(()=>[S(k,null,{default:$(()=>[S(z,{class:"w-400px!",value:H(v).ssh_repo,"onUpdate:value":l[11]||(l[11]=e=>H(v).ssh_repo=e)},null,8,["value"]),l[17]||(l[17]=x("div",null,"(e.g. git@github.com:username/repo.git)",-1)),S(O,{trigger:"hover"},{trigger:$(()=>l[16]||(l[16]=[x("span",{class:"text-primary cursor-pointer"},"How to get it?",-1)])),default:$(()=>[x("img",{width:"400px",src:H(ae),alt:"git desc"},null,8,We)]),_:1})]),_:1,__:[17]})]),_:1}),S(o,{label:"Branch",path:"ssh_branch","label-placement":"top"},{default:$(()=>[S(k,{class:"flex-col!"},{default:$(()=>[S(z,{class:"w-400px!",value:H(v).ssh_branch,"onUpdate:value":l[12]||(l[12]=e=>H(v).ssh_branch=e)},null,8,["value"]),l[18]||(l[18]=x("div",null,"(e.g. master)",-1))]),_:1,__:[18]})]),_:1})])]),_:1})):w("",!0)]),_:1},8,["model"])])}}}),Xe={class:"p-20px h-full"},Ye=c(v({__name:"index",setup(a,{expose:t}){const{t:s}=m(),l=k("single"),i=k(),n=[{key:"single",label:s("Site.PHP.add_site_1"),isLazy:!0,component:Te},{key:"git",label:"Create for Git ",isLazy:!0,component:Ke},{key:"batch",label:s("Site.PHP.add_site_2"),isLazy:!0,component:Qe}];return t({onConfirm:async()=>{var e;await(null==(e=i.value)?void 0:e.onConfirm())}}),(a,t)=>{const s=e;return b(),g("div",Xe,[S(s,{ref_key:"tabsRef",ref:i,value:H(l),"onUpdate:value":t[0]||(t[0]=e=>I(l)?l.value=e:null),options:n},null,8,["value"])])}}}),[["__scopeId","data-v-7cde43b1"]]);export{Ye as default};
