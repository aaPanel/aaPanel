System.register(["./index-legacy251.js?v=1767769852656","./public-legacy.js?v=1767769852656","./page_layout-legacy.js?v=1767769852656","./vue-legacy.js?v=1767769852656","./common-legacy.js?v=1767769852656","./naive-legacy.js?v=1767769852656","./site-legacy.js?v=1767769852656","./index.vue_vue_type_script_setup_true_lang-legacy.js?v=1767769852656","./__commonjsHelpers__-legacy.js?v=1767769852656"],function(e,a){"use strict";var t,n,l,s,i,o,d,p,u,r,c,m,v,_,b,h,x,y,f,g,w,P,A,D,$,k,C,j,S,U,q,B,L,N,z,E,H,I,R,T,F,M,V,W,G,J,K,O,Q,X,Y,Z;return{setters:[e=>{t=e._},e=>{n=e._,l=e.b,s=e.a,i=e.d},e=>{o=e.u,d=e.q,p=e.m,u=e.c,r=e.fj,c=e.d,m=e.aL,v=e.p,_=e.x,b=e.fk,h=e.fl,x=e.fm,y=e.fn,f=e.fo,g=e.fp,w=e.fq},e=>{P=e.i,A=e.p,D=e.k,$=e.P,k=e.r,C=e.R,j=e.V,S=e.S,U=e.W,q=e.a3,B=e.j,L=e.a4,N=e.U,z=e.e,E=e.an,H=e.ak,I=e.F,R=e.t},e=>{T=e._},e=>{F=e._,M=e.aC,V=e.d5,W=e.dV,G=e.da,J=e.dR,K=e.df,O=e.dj,Q=e.au,X=e.d1},e=>{Y=e.g},e=>{Z=e._},null],execute:function(){var a=document.createElement("style");a.textContent=".n-button[data-v-70acc0cb]{padding:0 24px;--n-height: 40px;--n-border-radius: 4px;--n-color: var(--button-gray-color);--n-text-color: var(--color-text-2);--n-border: none;--n-color-hover: var(--color-primary);--n-border-hover: 1px solid var(--color-primary);--n-text-color-hover: #fff;--n-color-focus: var(--color-primary);--n-text-color-focus: #fff;--n-border-focus: 1px solid var(--color-primary)}.bg-recommend[data-v-70acc0cb]{position:absolute;width:32px;height:32px;top:-1px;left:-1px;background-image:url(/static/vite/images/recommend.svg);background-repeat:no-repeat;background-position:center;background-size:contain}\n/*$vite$:1*/",document.head.appendChild(a);const ee=Symbol("php-admin");function ae(e,a,t,n){return new Promise(l=>{const s=`${e}/index.php?lang=en`,i=document.createElement("form"),o=`\n\t\t\t<input type="text" name="pma_username" id="pma_username" value="${t}" />\n\t\t\t<input type="password" name="pma_password" id="pma_password" value="${n}" />\n\t\t\t<input type="text" name="server" value="1" />\n\t\t\t<input type="text" name="target" value="index.php" />\n\t\t\t<input type="text" name="db" id="db" value="${a}" />\n\t\t`;i.action=s,i.setAttribute("public-data",s),i.method="post",i.target="_blank",i.style.display="none",i.innerHTML=o,document.body.appendChild(i),i.submit(),document.body.removeChild(i),l(i)})}async function te(e,a){const{data:t}=await T.get("/phpmyadmin/index.php?lang=en"),n={session:"",token:""},l=t.match(/"set_session"\s+value="(\w+)"/),s=t.match(/"token"\s+value="(\w+)"/);l&&l.length>1&&(n.session=l[1]||""),s&&s.length>1&&(n.token=s[1]||"");const i=document.createElement("form");i.action="/phpmyadmin/index.php",i.method="post",i.target="_blank",i.style.display="none";const o=`\n\t\t<input  name="set_session" id="input_session" value="${n.session}" />\n\t\t<input type="text" name="pma_username" id="pma_username" value="${e}" size="24" />\n\t\t<input type="password" name="pma_password" id="pma_password" value="${a}" size="24" />\n\t\t<input  name="token" id="input_token" value="${n.token}" />\n\t\t<input  name="target" id="input_target" value="index.php" />\n\t\t<input  name="server" value="1" id="input_server" />\n\t`;i.innerHTML=o,document.body.appendChild(i),i.submit(),document.body.removeChild(i)}const ne={class:"p-4px"},le={class:"mb-16px"},se={class:"text-error"},ie={class:"mt-20px"},oe="phpmyadmin",de=D({__name:"index",setup(e,{expose:a}){const{t:t}=$(),i=o(),{mysqlInfo:v}=P(ee),_=k(!1),b=e=>{s({title:t("Database.PhpAdmin.index_12",[t(e?"Public.Status.Start":"Public.Status.Stop")]),content:t("Database.PhpAdmin.index_13",[t(e?"Public.Status.start":"Public.Status.stop")]),onConfirm:async()=>{await m({name:oe,type:e?"start":"stop"}),x()}})},h=async e=>{const a=p.loading(t("Database.PhpAdmin.index_14"));try{const{message:n}=await u({sName:oe}),s=V(n,"ext.url",""),o=V(n,"ext.auth",!1);if("panel"==e){if(o)return p.error(t("Database.PhpAdmin.index_15")),void a.close();if(i.isFree)return l({source:160}),void a.close();if(v.value)await te(v.value.username,v.value.password);else{const{message:e}=await r(),a=V(e,"result","");await te("root",a)}}else if(v.value)await ae(s,v.value.name,v.value.username,v.value.password);else{const{message:e}=await r(),a=V(e,"result","");await ae(s,"","root",a)}a.close()}catch(n){a.close(),console.error(n)}},x=async()=>{const{message:e}=await u({sName:oe});c(e)&&(_.value=e.status)};return x(),a({init:x}),(e,a)=>{const t=F,l=n,s=d,i=M;return j(),C("div",ne,[S("div",le,[U(t,{checked:N(_),"onUpdate:checked":b},{default:q(()=>[B(L(e.$t("Database.PhpAdmin.index_4")),1)]),_:1},8,["checked"])]),U(l,{class:"mb-20px"},{default:q(()=>[S("li",se,L(e.$t("Database.PhpAdmin.index_5")),1)]),_:1}),U(s,{dashed:""}),S("div",ie,[U(i,{onClick:a[0]||(a[0]=e=>h("panel"))},{default:q(()=>[S("span",null,L(e.$t("Database.PhpAdmin.index_11")),1),a[2]||(a[2]=S("span",{class:"bg-recommend"},null,-1))]),_:1,__:[2]}),U(i,{class:"ml-24px",onClick:a[1]||(a[1]=e=>h())},{default:q(()=>[B(L(e.$t("Database.PhpAdmin.index_6")),1)]),_:1})]),U(l,{class:"mt-16px"},{default:q(()=>[S("li",null,L(e.$t("Database.PhpAdmin.index_7")),1),S("li",null,L(e.$t("Database.PhpAdmin.index_8")),1),S("li",null,L(e.$t("Database.PhpAdmin.index_9")),1),S("li",null,L(e.$t("Database.PhpAdmin.index_10")),1)]),_:1})])}}}),pe=v(de,[["__scopeId","data-v-70acc0cb"]]),ue={class:"w-160px"},re=D({__name:"index",setup(e,{expose:a}){const{t:t}=$(),n=z({php_version:null}),l=k([]),{loading:s,setLoading:o}=i(),d=async()=>{try{o(!0);const[e,a]=await Promise.all([Y(),u({sName:"phpmyadmin"})]),{message:t}=e;_(t)&&(l.value=t.map(e=>({label:e.name,value:e.version})));const{message:s}=a;n.php_version=V(s,"ext.phpversion",null)}finally{o(!1)}},r=async()=>{const e=n.php_version;null!==e?(await b({phpversion:e}),d()):p.error(t("Database.PhpAdmin.index_32"))};return d(),a({init:d}),(e,a)=>{const t=W,i=M,o=G;return j(),C("div",null,[U(o,{class:"items-center"},{default:q(()=>[S("span",null,L(e.$t("Database.PhpAdmin.index_31")),1),S("div",ue,[U(t,{value:N(n).php_version,"onUpdate:value":a[0]||(a[0]=e=>N(n).php_version=e),loading:N(s),options:N(l)},null,8,["value","loading","options"])]),U(i,{type:"primary",onClick:r},{default:q(()=>[B(L(e.$t("Public.Btn.Save")),1)]),_:1})]),_:1})])}}}),ce={class:"p-4px"},me={class:"w-142px mr-8px"},ve={class:"w-142px mr-8px"},_e={class:"w-240px"},be={class:"w-240px"},he={class:"w-240px"},xe=D({__name:"index",setup(e,{expose:a}){const{t:t}=$(),l=k(null),i=k(!1),o=k(null),r=k(!1);let c=!1;const m=z({username:"",password:"",repass:""}),v=async()=>{const e=l.value;null!==e?(await h({port:e}),R()):p.error(t("Database.PhpAdmin.index_25"))},_=async e=>{await x({v:e?1:0}),F()},b=async()=>{const e=o.value;null!==e?(await y({port:e}),F()):p.error(t("Database.PhpAdmin.index_26"))},P=e=>{!e&&c?s({title:t("Public.Confirm.Title"),content:t("Database.PhpAdmin.index_27"),onConfirm:async()=>{await w(),R()}}):r.value=e},A=async()=>{""!==m.password.trim()&&""!==m.username.trim()?m.password.length<3||m.username.length<3?p.error(t("Database.PhpAdmin.index_29")):m.password===m.repass?(await f({username:m.username,password:m.password}),R()):p.error(t("Database.PhpAdmin.index_30")):p.error(t("Database.PhpAdmin.index_28"))},D=k(!1),R=async()=>{try{D.value=!0;const{message:e}=await u({sName:"phpmyadmin"}),a=V(e,"ext.port",null);l.value=a?X(a):null,r.value=V(e,"ext.auth",!1),c=r.value}finally{D.value=!1}},T=k(!1),F=async()=>{try{T.value=!0;const{message:e}=await g();i.value=V(e,"status",!1);const a=V(e,"port",null);o.value=a?X(a):null}finally{T.value=!1}},W=()=>{Promise.all([R(),F()])};return W(),a({init:W}),(e,a)=>{const t=K,s=M,p=J,u=d,c=O,h=Q,x=n,y=Z;return j(),C("div",ce,[U(y,{"label-width":"160"},{default:q(()=>[U(p,{label:e.$t("Database.PhpAdmin.index_16")},{default:q(()=>[S("div",me,[U(t,{value:N(l),"onUpdate:value":a[0]||(a[0]=e=>H(l)?l.value=e:null),min:0,max:66325,"show-button":!1,loading:N(D),placeholder:""},null,8,["value","loading"])]),U(s,{type:"primary",onClick:v},{default:q(()=>[B(L(e.$t("Public.Btn.Save")),1)]),_:1})]),_:1},8,["label"]),U(u,{dashed:""}),U(p,{class:"mt-20px",label:e.$t("Database.PhpAdmin.index_17")},{default:q(()=>[U(c,{value:N(i),loading:N(T),"onUpdate:value":_},null,8,["value","loading"])]),_:1},8,["label"]),U(p,{label:e.$t("Database.PhpAdmin.index_18")},{default:q(()=>[S("div",ve,[U(t,{value:N(o),"onUpdate:value":a[1]||(a[1]=e=>H(o)?o.value=e:null),min:0,max:66325,"show-button":!1,loading:N(T),placeholder:""},null,8,["value","loading"])]),U(s,{type:"primary",onClick:b},{default:q(()=>[B(L(e.$t("Public.Btn.Save")),1)]),_:1})]),_:1},8,["label"]),U(u,{dashed:""}),U(p,{class:"mt-20px",label:e.$t("Database.PhpAdmin.index_19")},{default:q(()=>[U(c,{value:N(r),loading:N(D),"onUpdate:value":P},null,8,["value","loading"])]),_:1},8,["label"]),N(r)?(j(),C(I,{key:0},[U(p,{label:e.$t("Database.PhpAdmin.index_20")},{default:q(()=>[S("div",_e,[U(h,{value:N(m).username,"onUpdate:value":a[2]||(a[2]=e=>N(m).username=e),placeholder:e.$t("Database.PhpAdmin.index_23")},null,8,["value","placeholder"])])]),_:1},8,["label"]),U(p,{label:e.$t("Database.PhpAdmin.index_21")},{default:q(()=>[S("div",be,[U(h,{value:N(m).password,"onUpdate:value":a[3]||(a[3]=e=>N(m).password=e),type:"password",placeholder:e.$t("Database.PhpAdmin.index_23")},null,8,["value","placeholder"])])]),_:1},8,["label"]),U(p,{label:e.$t("Database.PhpAdmin.index_22")},{default:q(()=>[S("div",he,[U(h,{value:N(m).repass,"onUpdate:value":a[4]||(a[4]=e=>N(m).repass=e),type:"password",placeholder:e.$t("Database.PhpAdmin.index_23")},null,8,["value","placeholder"])])]),_:1},8,["label"]),U(p,{label:" "},{default:q(()=>[U(s,{type:"primary",onClick:A},{default:q(()=>[B(L(e.$t("Public.Btn.Save")),1)]),_:1})]),_:1})],64)):E("",!0),U(x,null,{default:q(()=>[S("li",null,L(e.$t("Database.PhpAdmin.index_24")),1)]),_:1})]),_:1})])}}}),ye={class:"h-580px"};e("default",D({__name:"index",props:{row:{default:void 0}},setup(e){const a=R(e,"row"),{t:n}=$(),l=k("service"),s=[{key:"service",label:n("Database.PhpAdmin.index_1"),component:pe},{key:"php",label:n("Database.PhpAdmin.index_2"),component:re},{key:"safe",label:n("Database.PhpAdmin.index_3"),component:xe}];return A(ee,{mysqlInfo:a}),(e,a)=>{const n=t;return j(),C("div",ye,[U(n,{value:N(l),"onUpdate:value":a[0]||(a[0]=e=>H(l)?l.value=e:null),ref:"tabsRef",data:s},null,8,["value"])])}}}))}}});
