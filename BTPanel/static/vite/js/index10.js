const __vite__fileDeps=["js/index67.js?v=1721298337096","js/index.vue_vue_type_script_setup_true_lang6.js?v=1721298337096","js/vue.js?v=1721298337096","js/index.js?v=1721298337096","js/pinia.js?v=1721298337096","css/index34.css?v=1721298337096","js/index.vue_vue_type_script_setup_true_lang7.js?v=1721298337096","js/index.vue_vue_type_script_setup_true_lang8.js?v=1721298337096","js/InputGroupLabel.js?v=1721298337096","js/InputGroup.js?v=1721298337096","js/index63.js?v=1721298337096","js/index64.js?v=1721298337096","css/index9.css?v=1721298337096","js/useTableColumns.js?v=1721298337096","js/Progress.js?v=1721298337096","css/useTableColumns.css?v=1721298337096","js/Select.js?v=1721298337096","js/Tag.js?v=1721298337096","js/Empty.js?v=1721298337096"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{e as a,x as e,y as t,j as s,z as o,A as i,u as n,g as l,n as r,s as d,o as u,h as p,t as c,w as m,k as _,m as h,l as y,B as w,p as f,q as g,r as k,v}from"./index.js?v=1721298337096";import{_ as b}from"./index.vue_vue_type_script_setup_true_lang.js?v=1721298337096";import{_ as x}from"./index.vue_vue_type_script_setup_true_lang2.js?v=1721298337096";import{_ as j}from"./index.vue_vue_type_script_setup_true_lang3.js?v=1721298337096";import{u as C,_ as S}from"./useTableData.js?v=1721298337096";import{_ as R}from"./index.vue_vue_type_script_setup_true_lang4.js?v=1721298337096";import{u as D}from"./useLoading.js?v=1721298337096";import{_ as U,a as B,b as z}from"./useTableColumns.js?v=1721298337096";import{a as P,b as I,d as L,_ as T,e as W,g as A,u as E,c as q}from"./index63.js?v=1721298337096";import{g as G}from"./hooks.js?v=1721298337096";import{_ as H}from"./index.vue_vue_type_script_setup_true_lang5.js?v=1721298337096";import{P as K,q as N,l as V,r as O,f as Z,S as F,Z as J,V as M,_ as Q,W as X,t as Y,w as $,U as aa,b as ea,a1 as ta}from"./vue.js?v=1721298337096";import{_ as sa,a as oa}from"./index.vue_vue_type_script_setup_true_lang6.js?v=1721298337096";import{_ as ia}from"./index.vue_vue_type_script_setup_true_lang7.js?v=1721298337096";import{_ as na}from"./index68.js?v=1721298337096";import"./pinia.js?v=1721298337096";import"./DataTable.js?v=1721298337096";import"./Checkbox.js?v=1721298337096";import"./Ellipsis.js?v=1721298337096";import"./Select.js?v=1721298337096";import"./Tag.js?v=1721298337096";import"./Empty.js?v=1721298337096";import"./omit.js?v=1721298337096";import"./Skeleton.js?v=1721298337096";import"./Progress.js?v=1721298337096";import"./index64.js?v=1721298337096";import"./index65.js?v=1721298337096";import"./index.vue_vue_type_script_setup_true_lang8.js?v=1721298337096";import"./InputGroupLabel.js?v=1721298337096";import"./InputGroup.js?v=1721298337096";const la={class:"px-20px pt-24px pb-8px"},ra={class:"w-320px"},da=V({__name:"index",setup(a,{expose:i}){const n=O(null),l=Z({password:""}),r={password:{required:!0,message:"Root password cannot be empty",trigger:"blur"}},{loading:d,setLoading:u}=D();return(async()=>{try{u(!0);const{message:a}=await t();s(a)&&(l.password=o(a.root)?a.root:"")}finally{u(!1)}})(),i({onConfirm:async({hide:a})=>{var t;try{await(null==(t=n.value)?void 0:t.validate()),await e(Y(l)),a()}catch(s){console.error(s)}}}),(a,e)=>{const t=ia,s=sa,o=oa;return F(),J("div",la,[K(o,{ref_key:"formRef",ref:n,model:X(l),rules:r},{default:M((()=>[K(s,{label:"Root password",path:"password"},{default:M((()=>[Q("div",ra,[K(t,{value:X(l).password,"onUpdate:value":e[0]||(e[0]=a=>X(l).password=a),loading:X(d),default:!1},null,8,["value","loading"])])])),_:1})])),_:1},8,["model"])])}}}),ua={class:"px-20px py-24px"},pa=Q("li",null," Security authentication: After this function is enabled, an account and password are required to access data ",-1),ca=V({__name:"index",props:{data:{}},setup(a){const e=a,{status:t,getInfo:s}=e.data,o=Z({status:t}),n=async()=>{await i(Y(o)),null==s||s()};return(a,e)=>{const t=U,s=sa,i=oa,l=na;return F(),J("div",ua,[K(i,{"label-width":"160"},{default:M((()=>[K(s,{label:"Security authentication","show-feedback":!1},{default:M((()=>[K(t,{value:X(o).status,"onUpdate:value":[e[0]||(e[0]=a=>X(o).status=a),n],"checked-value":1},null,8,["value"])])),_:1})])),_:1}),K(l,{class:"mt-16px"},{default:M((()=>[pa])),_:1})])}}}),ma={class:"p-16px"},_a=V({__name:"index",setup(e){const o=ta((()=>v((()=>import("./index67.js?v=1721298337096")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18])))),i=n(),U=l("Add Database",{status:!1}),V=()=>{U.data.status="enabled"===_a.authorization,U.show=!0},O=l("Change database password"),J=()=>{"enabled"===_a.authorization?O.show=!0:(oa(),r.warning("Please enable security authentication first!"))},sa=l("Security authentication",{status:0}),oa=()=>{sa.data.status="enabled"===_a.authorization?1:0,sa.data.getInfo=ha,sa.show=!0},ia=()=>{A()},na=async()=>{await d(i.type,{ids:[]}),ga()},{keys:la,table:ra,columns:ua}=C([{type:"selection",width:40},{key:"name",title:"Database name",width:"12%",minWidth:120},{key:"username",title:"Username",width:"12%",minWidth:120},{key:"password",title:"Password",minWidth:150,render:a=>K(H,{value:a.password},null)},{key:"backup_count",title:"Backup",width:"12%",render:e=>K("div",{class:"flex items-center"},[K(a,{type:e.backup_count>0?"primary":"warning",onClick:()=>{P(e)}},{default:()=>[e.backup_count>0?"Exists(".concat(e.backup_count,")"):"Not exist"]}),K("span",{class:"mx-4px"},[N("|")]),K(a,{onClick:()=>{I(e)}},{default:()=>[N("Import")]})])},{key:"sid",title:"Position",width:"12%",minWidth:120,render:a=>G(a)},B({onBlur:async(a,e)=>{await u({id:e.id,ps:a})}}),z({width:100,options:a=>[{label:"CHG PW",onClick:()=>{E(a)}},{label:"Del",onClick:()=>{q([a])}}]})]),pa=[{key:"sync",label:"Sync to Server",onBatch:a=>{p({title:"Batch Sync to Server",content:"Please be cautious, The selected item will be [Sync to Server] after confirmation",onConfirm:async({hide:e})=>{await d(i.type,{ids:a.map((a=>a.id))}),e()}})}},{key:"backup",type:"confirm",label:"DB backup",confirm:{title:"Batch backup database",desc:"Do you continue to operate in batch backup database?",api:a=>c(i.type,{id:a.id},!1),done:()=>{ga()},columns:[{key:"name",title:"Database Name"}]}},{key:"delete",label:"Delete database",onBatch:a=>{q(a)}}],_a=Z({authorization:"",msg:"",port:"",root:""}),ha=async()=>{const{message:a}=await t();s(a)&&(_a.authorization=a.authorization,_a.msg=a.msg,_a.port=a.port,_a.root=a.root)},{loading:ya,setLoading:wa}=D(),fa=Z({p:1,limit:10,sid:-1,search:""}),ga=async()=>{try{wa(!0);const{message:a}=await m(i.type,(()=>{const a={...Y(fa)};return-1===a.sid&&delete a.sid,a})());s(a)?(ra.data=_(a.data)?a.data:[],ra.total=h(a.page)):(ra.data=[],ra.total=0)}finally{la.value=[],wa(!1)}};$((()=>i.isRefresh),(a=>{a&&(i.setRefresh(!1),i.delRemoteId===fa.sid&&(fa.sid=-1),ga())}));return(async()=>{await i.getRemote(),i.install?(ga(),ha()):y()})(),(a,e)=>{const t=w,s=f,i=R,n=S,l=j,r=x,d=b,u=g,p=k;return F(),aa(X(W),null,{default:M((()=>[K(p,null,{default:M((()=>[Q("div",ma,[K(d,null,{toolsLeft:M((()=>[K(t,{type:"primary",onClick:V},{default:M((()=>[N("Add DB")])),_:1}),K(t,{onClick:J},{default:M((()=>[N("Root password")])),_:1}),K(t,{onClick:oa},{default:M((()=>[N("Security authentication")])),_:1}),K(t,{onClick:ia},{default:M((()=>[N("Remote DB")])),_:1}),K(s,{class:"mx-0!",vertical:""}),K(t,{onClick:na},{default:M((()=>[N("Sync all")])),_:1}),K(t,{onClick:X(L)},{default:M((()=>[N("Get DB from server")])),_:1},8,["onClick"])])),toolsRight:M((()=>[K(X(T),{value:X(fa).sid,"onUpdate:value":e[0]||(e[0]=a=>X(fa).sid=a),"store-key":"database-mongo-page",onChange:ga},null,8,["value"]),K(i,{value:X(fa).search,"onUpdate:value":e[1]||(e[1]=a=>X(fa).search=a),placeholder:"Database search",onSearch:ga},null,8,["value"])])),table:M((()=>[K(n,{"checked-row-keys":X(la),"onUpdate:checkedRowKeys":e[2]||(e[2]=a=>ea(la)?la.value=a:null),loading:X(ya),data:X(ra).data,columns:X(ua)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:M((()=>[K(l,{"checked-row-keys":X(la),"onUpdate:checkedRowKeys":e[3]||(e[3]=a=>ea(la)?la.value=a:null),data:X(ra).data,options:pa},null,8,["checked-row-keys","data"])])),pageRight:M((()=>[K(r,{page:X(fa).p,"onUpdate:page":e[4]||(e[4]=a=>X(fa).p=a),"page-size":X(fa).limit,"onUpdate:pageSize":e[5]||(e[5]=a=>X(fa).limit=a),"store-key":"database-mongo-page","item-count":X(ra).total,onRefresh:ga},null,8,["page","page-size","item-count"])])),_:1}),K(u,{show:X(U).show,"onUpdate:show":e[6]||(e[6]=a=>X(U).show=a),title:X(U).title,width:540,minHeight:176,footer:!0,data:X(U).data,component:X(o)},null,8,["show","title","data","component"]),K(u,{show:X(O).show,"onUpdate:show":e[7]||(e[7]=a=>X(O).show=a),title:X(O).title,width:520,footer:!0,component:da},null,8,["show","title"]),K(u,{show:X(sa).show,"onUpdate:show":e[8]||(e[8]=a=>X(sa).show=a),title:X(sa).title,width:400,data:X(sa).data,component:ca},null,8,["show","title","data"])])])),_:1})])),_:1})}}});export{_a as default};
