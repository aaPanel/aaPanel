System.register(["./public-legacy.js?v=1767769852656","./index.vue_vue_type_script_setup_true_lang-legacy.js?v=1767769852656","./index.vue_vue_type_script_setup_true_lang-legacy11.js?v=1767769852656","./index-legacy99.js?v=1767769852656","./page_layout-legacy.js?v=1767769852656","./site-legacy.js?v=1767769852656","./vue-legacy.js?v=1767769852656","./naive-legacy.js?v=1767769852656","./common-legacy.js?v=1767769852656","./__commonjsHelpers__-legacy.js?v=1767769852656","./index-legacy98.js?v=1767769852656"],function(e,t){"use strict";var l,a,r,u,i,s,o,n,d,p,_,y,x,c,v,h,g,m,P,f,S,b,k,$,w,j,U,H;return{setters:[e=>{l=e._},e=>{a=e._},e=>{r=e._},e=>{u=e._},e=>{i=e.dD,s=e.bi},e=>{o=e.bb},e=>{n=e.k,d=e.P,p=e.r,_=e.e,y=e.R,x=e.V,c=e.W,v=e.a3,h=e.a2,g=e.an,m=e.U,P=e.S,f=e.a4,S=e.j,b=e.ak},e=>{k=e.dR,$=e.dj,w=e.da,j=e.dV,U=e.au,H=e.d8},null,null,null],execute:function(){const t={class:"m-15px"},R={class:"w-440px"},q={class:"list-none!"},E={class:"list-none!"},C={class:"list-none!"};e("default",n({__name:"index",emits:["refresh"],setup(e,{expose:n,emit:N}){const{t:V}=d(),B=N,D=()=>{"2"===z.proxy_type?z.proxy_host="$http_host":z.proxy_host=""},I=e=>{if("2"===z.proxy_type)return void(z.proxy_host="$http_host");let t=e.replace(/^http[s]?:\/\//,"");t=t.replace(/(:|\?|\/|\\)(.*)$/,""),J.value||(z.proxy_host=t)},J=p(!1),L=()=>{z.proxy_host&&"$http_host"!==z.proxy_host&&(J.value=!0)},O=p(null),W=[{label:V("Site.Proxy.index_11"),value:"1"},{label:V("Site.Proxy.index_12"),value:"2"}],z=_({domains:"",proxy_type:"1",url:"http://",unx:"",proxy_host:"$http_host",remark:"",keepuri:1,rewrite:[{key:"",value:""}]}),A=p([{key:"",value:""}]),F={domains:{required:!0,trigger:["blur","change"],validator:(e,t)=>{if(""===t.trim())return new Error(V("Site.PHP.add_site_23"));const l=t.trim().split("\n")[0].split(":")[1];return!(l&&(!s(l)||Number(l)<100))||new Error(V("Site.Proxy.index_13"))}},url:{required:!0,trigger:["blur","change"],validator:(e,t)=>{if(!t.replace(/^http[s]?:\/\//,""))return new Error(V("Site.Proxy.index_14"));const l=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;let a=t.replace(/^http[s]?:\/\//,"");return a=a.replace(/(:|\?|\/|\\)(.*)$/,""),J.value||(l.test(a)?z.proxy_host="$http_host":z.proxy_host=a),!0}},unx:{required:!0,message:V("Site.PHP.add_site_26"),trigger:["blur","change"]},proxy_host:{required:!0,message:V("Site.PHP.add_site_26"),trigger:["blur","change"]}},G=e=>{const t=e.trim().split("\n")[0].split(":")[0];t&&(z.remark=t)};return n({onConfirm:async()=>{await(O.value?.validate());const e=A.value.filter(e=>""!==e.key||""!==e.value).map(e=>({dir1:e.key,dir2:e.value}));let t={...z,proxy_type:"1"==z.proxy_type,proxy_pass:"1"==z.proxy_type?z.url:z.unx,rewritedir:JSON.stringify(e)};await o(t),B("refresh")}}),(e,s)=>{const o=$,n=k,d=u,p=j,_=U,N=r,V=w,B=H,J=i,K=a,M=l;return x(),y("div",t,[c(K,{ref_key:"formRef",ref:O,model:m(z),rules:F},{default:v(()=>["1"==m(z).proxy_type?(x(),h(n,{key:0,label:"Show Proxy Path"},{default:v(()=>[c(o,{value:m(z).keepuri,"onUpdate:value":s[0]||(s[0]=e=>m(z).keepuri=e),"checked-value":1,"unchecked-value":0},null,8,["value"])]),_:1})):g("",!0),c(n,{label:e.$t("Site.PHP.add_site_4"),path:"domains"},{default:v(()=>[P("div",R,[c(d,{value:m(z).domains,"onUpdate:value":[s[1]||(s[1]=e=>m(z).domains=e),G]},{default:v(()=>[P("p",null,f(e.$t("Site.PHP.add_site_5")),1),P("p",null,f(e.$t("Site.PHP.add_site_6")),1),P("p",null,f(e.$t("Site.PHP.add_site_7")),1)]),_:1},8,["value"])])]),_:1},8,["label"]),c(V,null,{default:v(()=>[c(n,{label:e.$t("Site.Proxy.index_1")},{default:v(()=>[c(p,{value:m(z).proxy_type,"onUpdate:value":[s[2]||(s[2]=e=>m(z).proxy_type=e),D],options:W,class:"w-120px"},null,8,["value"])]),_:1},8,["label"]),"1"==m(z).proxy_type?(x(),h(n,{key:0,path:"url",class:"w-310px"},{default:v(()=>[c(_,{value:m(z).url,"onUpdate:value":s[3]||(s[3]=e=>m(z).url=e),onInput:I},null,8,["value"])]),_:1})):(x(),h(n,{key:1,path:"unx",class:"w-310px"},{default:v(()=>[c(N,{"checked-type":["dir","file"],value:m(z).unx,"onUpdate:value":s[4]||(s[4]=e=>m(z).unx=e),onChange:I},null,8,["value"])]),_:1}))]),_:1}),"1"==m(z).proxy_type?(x(),h(n,{key:1,label:e.$t("Site.Proxy.index_2"),path:"proxy_host",class:"w-570px"},{default:v(()=>[c(B,{trigger:"hover"},{trigger:v(()=>[c(_,{value:m(z).proxy_host,"onUpdate:value":s[5]||(s[5]=e=>m(z).proxy_host=e),onBlur:L},null,8,["value"])]),default:v(()=>[S(" "+f(e.$t("Site.Proxy.index_4")),1)]),_:1})]),_:1},8,["label"])):g("",!0),c(n,{label:"URL Rewrite"},{default:v(()=>[c(J,{class:"w-440px",min:1,value:m(A),"onUpdate:value":s[6]||(s[6]=e=>b(A)?A.value=e:null),preset:"pair","key-placeholder":"/aaa","value-placeholder":"/bbb"},null,8,["value"])]),_:1}),c(n,{label:e.$t("Site.Proxy.index_3"),class:"w-570px"},{default:v(()=>[c(_,{value:m(z).remark,"onUpdate:value":s[7]||(s[7]=e=>m(z).remark=e),placeholder:e.$t("Site.Proxy.index_5")},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"]),c(M,{class:"mt-16px"},{default:v(()=>[P("li",null,f(e.$t("Site.Proxy.index_6")),1),P("li",null,f(e.$t("Site.Proxy.index_7")),1),P("li",q,f(e.$t("Site.Proxy.index_8")),1),P("li",E,f(e.$t("Site.Proxy.index_9")),1),P("li",C,f(e.$t("Site.Proxy.index_10")),1)]),_:1})])}}}))}}});
