const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/index117.js?v=1767769852656","js/index.vue_vue_type_script_setup_true_lang5.js?v=1767769852656","js/index.vue_vue_type_script_setup_true_lang6.js?v=1767769852656","js/page_layout.js?v=1767769852656","js/vue.js?v=1767769852656","js/__commonjsHelpers__.js?v=1767769852656","js/naive.js?v=1767769852656","js/common.js?v=1767769852656","js/public.js?v=1767769852656","css/public.css?v=1767769852656","css/page_layout.css?v=1767769852656","css/index17.css?v=1767769852656","js/index.vue_vue_type_script_setup_true_lang7.js?v=1767769852656","js/planned.js?v=1767769852656","js/soft.js?v=1767769852656","js/site.js?v=1767769852656","js/set2.js?v=1767769852656","js/index.js?v=1767769852656","css/index120.css?v=1767769852656","js/index.vue_vue_type_script_setup_true_lang.js?v=1767769852656","js/index118.js?v=1767769852656","js/index104.js?v=1767769852656","css/index21.css?v=1767769852656","css/index79.css?v=1767769852656","js/batch.js?v=1767769852656"])))=>i.map(i=>d[i]);
import{o as e,i as a,a as l,x as t,a7 as n,p as s,T as o,aM as d,aN as i,m as u}from"./page_layout.js?v=1767769852656";import{_ as r}from"./index.js?v=1767769852656";import{_ as p}from"./index.vue_vue_type_script_setup_true_lang5.js?v=1767769852656";import{_ as c}from"./index.vue_vue_type_script_setup_true_lang9.js?v=1767769852656";import{r as _,u as b,a as m,d as v,e as y,_ as h,c as x,f as w,h as f}from"./public.js?v=1767769852656";import{_ as g}from"./index.vue_vue_type_script_setup_true_lang8.js?v=1767769852656";import{s as C,g as k,e as P,a as U,b as T,d as $,c as N,f as S}from"./planned.js?v=1767769852656";import{W as E,j as B,_ as j,r as L,k as V,P as D,ah as q,R as I,V as A,a3 as R,a4 as H,U as O,ak as M,ad as W,ae as z,c as F,o as J,a2 as K,an as Y,S as Z,e as G,w as Q,F as X,N as ee}from"./vue.js?v=1767769852656";import{da as ae,_ as le,aC as te,dV as ne,dR as se,av as oe,df as de,dZ as ie,au as ue,dk as re,dS as pe}from"./naive.js?v=1767769852656";import{_ as ce}from"./index.vue_vue_type_script_setup_true_lang.js?v=1767769852656";import{_ as _e}from"./index99.js?v=1767769852656";import{t as be,w as me,u as ve,r as ye,a as he,m as xe,s as we,d as fe,b as ge,c as Ce,e as ke,f as Pe,g as Ue,h as Te,p as $e,i as Ne,o as Se,j as Ee,k as Be,l as je,n as Le,q as Ve,v as De}from"./utils2.js?v=1767769852656";import{_ as qe}from"./index.vue_vue_type_script_setup_true_lang11.js?v=1767769852656";import"./common.js?v=1767769852656";import"./__commonjsHelpers__.js?v=1767769852656";import"./index.vue_vue_type_script_setup_true_lang6.js?v=1767769852656";import"./compiler.js?v=1767769852656";import"./index98.js?v=1767769852656";const{t:Ie}=a.global,Ae=e=>E(_,{onClick:a=>{const l=L(!1);m({title:Ie("Crontab.Planned.index_7"),content:()=>E("div",null,[1==e.row.status?E("div",null,[E("span",null,[Ie("Crontab.Planned.index_79")]),E(ae,{class:"items-center mt-8px"},{default:()=>[E(le,{checked:l.value,"on-update:checked":e=>{l.value=e}},null),Ie("Crontab.Planned.index_80")]})]):"",0==e.row.status?E("div",null,[Ie("Crontab.Planned.index_81")]):""]),onConfirm:async()=>{await C({id:e.row.id,if_stop:l.value}),e.row.status=a}})},value:e.row.status.toString()},null),Re=a=>{const{row:t}=a;return E("div",null,["logs"==t.sType?E("span",null,[t.save]):"","logs"!==t.sType?E("div",null,[t.save?"":E("span",null,[B("--")]),t.save>0?E(e,{type:t.save>0?"primary":"warning",onClick:()=>{b({title:"".concat(Ie("Crontab.Script.index_35")," [").concat(t.name,"]"),width:800,minHeight:200,data:{row:t},component:j(()=>l(()=>import("./index117.js?v=1767769852656"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15])))})}},{default:()=>[t.save]}):""]):""])},He={class:"w-160px"},Oe=V({__name:"index",props:{value:{default:null}},setup(e){const{t:a}=D(),n=j(()=>l(()=>import("./set2.js?v=1767769852656"),__vite__mapDeps([16,17,4,5,7,8,3,6,10,9,18,19,13]))),s=q(e,"value"),{loading:o,setLoading:d}=v(),i=L([]),u=y(a("Crontab.Planned.index_29"),{setOptions:(e,a)=>{a===s.value&&(s.value="-1"),i.value=e.map(e=>({label:e.name,value:e.id})),c()}}),p=()=>{u.show=!0},c=()=>{i.value.unshift({label:a("Site.PHP.index_45"),value:""},{label:a("Crontab.Planned.index_82"),value:"-1"},{label:a("Crontab.Planned.index_83"),value:"0"})};return c(),(async()=>{try{d(!0);const{message:e}=await k();t(e)?i.value=e.map(e=>({label:e.name,value:e.id})):i.value=[],c()}finally{d(!1)}})(),(e,a)=>{const l=te,t=ne,d=r;return A(),I("div",He,[E(t,{value:O(s),"onUpdate:value":a[0]||(a[0]=e=>M(s)?s.value=e:null),loading:O(o),options:O(i)},{action:R(()=>[E(l,{block:"",onClick:p},{default:R(()=>[B(H(e.$t("Site.PHP.index_43")),1)]),_:1})]),_:1},8,["value","loading","options"]),E(d,{show:O(u).show,"onUpdate:show":a[1]||(a[1]=e=>O(u).show=e),width:350,title:O(u).title,data:O(u).data,component:O(n)},null,8,["show","title","data","component"])])}}}),{t:Me}=a.global,We={name:{required:!0,trigger:["blur","input"],message:Me("Crontab.Planned.index_49")},sName:{required:!0,trigger:["blur","input"],message:Me("Security.Conf.Index_28")},day:{trigger:["blur","input"],validator:(e,a)=>!(a>=32||a<1||""==a)||new Error("".concat(Me("Site.Placeholder.Index_10")," 1-31"))},hour:{trigger:["blur","input"],validator:(e,a)=>!(a>=24||a<0||null==a)||new Error("".concat(Me("Site.Placeholder.Index_10")," 0-23"))},second:{required:!0,trigger:["blur","input"],validator:(e,a)=>!(a>=60||a<1||""==a)||new Error("".concat(Me("Site.Placeholder.Index_10")," 1-59"))},sBody:{required:!0,trigger:["blur","input"],message:Me("Crontab.Planned.index_50")},save:{trigger:["blur","input"],validator:(e,a)=>!(a<=0||""==a)||new Error(Me("Crontab.Planned.index_51"))},url:{required:!0,trigger:["blur","input"],message:Me("Crontab.Planned.index_53")},splitValue:{trigger:["blur","input"],required:!0,type:"number",message:Me("Site.Placeholder.Index_10")},costom_time:{trigger:["blur","change"],type:"date",required:!0,message:Me("Please select time")}},ze={class:"mt-8px"},Fe=s(V({__name:"time-select",props:W({isEdit:{type:Boolean,default:!1}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const a=e,l=z(e,"modelValue"),t=F(()=>{const e=l.value.time,a="once"===e;return{day:!a&&("day-n"===e||"month"===e),week:!a&&"week"===e,hour:!a&&"hour"!==e&&"minute-n"!==e&&"second-n"!==e,minute:!a&&"second-n"!==e,second:!a&&"second-n"===e,custom_time:a}}),s=e=>e<Date.now()-864e5,o=e=>{const a=new Date,l=new Date(e),t=a.getFullYear()===l.getFullYear()&&a.getMonth()===l.getMonth()&&a.getDate()===l.getDate();return{isHourDisabled:e=>t&&e<a.getHours(),isMinuteDisabled:(e,l)=>t&&null!==l&&l===a.getHours()&&e<a.getMinutes(),isSecondDisabled:(e,l,n)=>t&&null!==n&&n===a.getHours()&&null!==l&&l===a.getMinutes()&&e<a.getSeconds()}};return J(()=>{be.value=be.value.map(e=>("once"===e.value&&(e.disabled=a.isEdit),e))}),(a,d)=>{const i=ne,u=se,r=de,p=ie,c=oe,_=n,b=ae;return A(),K(b,null,{default:R(()=>[E(u,{label:a.$t("Crontab.Planned.index_9")},{default:R(()=>[E(i,{class:"w-105px!",value:l.value.time,"onUpdate:value":d[0]||(d[0]=e=>l.value.time=e),options:O(be),disabled:"once"===l.value.time&&e.isEdit},null,8,["value","options","disabled"])]),_:1},8,["label"]),O(t).day?(A(),K(u,{key:0,path:"day"},{default:R(()=>[E(c,{class:"w-100px!"},{default:R(()=>[E(r,{value:l.value.day,"onUpdate:value":d[1]||(d[1]=e=>l.value.day=e),"show-button":!1,placeholder:""},null,8,["value"]),E(p,null,{default:R(()=>[B(H(a.$t("Crontab.arrange.index_41")),1)]),_:1})]),_:1})]),_:1})):Y("",!0),O(t).week?(A(),K(u,{key:1,path:"week"},{default:R(()=>[E(i,{class:"w-100px!",value:l.value.week,"onUpdate:value":d[2]||(d[2]=e=>l.value.week=e),options:O(me)},null,8,["value","options"])]),_:1})):Y("",!0),O(t).hour?(A(),K(u,{key:2,path:"hour"},{default:R(()=>[E(c,null,{default:R(()=>[E(r,{value:l.value.hour,"onUpdate:value":d[3]||(d[3]=e=>l.value.hour=e),class:"w-50px","show-button":!1,placeholder:"","input-props":{name:"hour"}},null,8,["value"]),E(p,null,{default:R(()=>[B(H(a.$t("Crontab.arrange.index_43")),1)]),_:1})]),_:1})]),_:1})):Y("",!0),O(t).minute?(A(),K(u,{key:3,path:"minute",class:"second"},{default:R(()=>[E(c,null,{default:R(()=>[E(r,{value:l.value.minute,"onUpdate:value":d[4]||(d[4]=e=>l.value.minute=e),class:"w-50px","show-button":!1,placeholder:"","input-props":{name:"minute"}},null,8,["value"]),E(p,null,{default:R(()=>[B(H(a.$t("Crontab.arrange.index_44")),1)]),_:1})]),_:1})]),_:1})):Y("",!0),O(t).second?(A(),K(u,{key:4,path:"second"},{default:R(()=>[E(c,null,{default:R(()=>[E(r,{value:l.value.second,"onUpdate:value":d[5]||(d[5]=e=>l.value.second=e),class:"w-50px","show-button":!1,placeholder:"","input-props":{name:"second"}},null,8,["value"]),E(p,null,{default:R(()=>[B(H(a.$t("Waf.Setting.config_53")),1)]),_:1})]),_:1})]),_:1})):Y("",!0),O(t).custom_time?(A(),K(u,{key:5,path:"costom_time"},{default:R(()=>[E(_,{"formatted-value":l.value.costom_time,"onUpdate:formattedValue":d[6]||(d[6]=e=>l.value.costom_time=e),type:"datetime",clearable:"","is-date-disabled":s,"is-time-disabled":o,"value-format":"yyyy-MM-dd HH:mm:ss"},null,8,["formatted-value"])]),_:1})):Y("",!0),Z("span",ze,H(O(ve)(l.value)),1)]),_:1})}}}),[["__scopeId","data-v-69cb9b47"]]),Je={key:0},Ke={key:0,class:"ml-126px mb-8px mt--10px"},Ye={key:0},Ze={class:"mr-10px"},Ge={class:"mr-10px text-nowrap"},Qe={key:1},Xe=V({__name:"backup-setting",props:W({isEdit:{type:Boolean,default:!1}},{modelValue:{required:!0},modelModifiers:{}}),emits:W(["onChangePath","onUpdateTaskName","onChangeBDType"],["update:modelValue"]),setup(e,{emit:a}){const l=a,t=z(e,"modelValue"),n=e=>{l("onChangePath",e)},s=(e,a)=>{l("onUpdateTaskName",e,a)},o=e=>{l("onChangeBDType",e)};return(a,l)=>{const d=ne,i=se,u=ae,r=qe,p=de,c=ie,_=oe,b=le;return"site"==t.value.type||"database"==t.value.type||"enterpriseBackup"==t.value.type||"path"==t.value.type?(A(),I("div",Je,[E(u,null,{default:R(()=>[E(i,{label:a.$t("Crontab.Planned.index_64")},{default:R(()=>[E(d,{class:"w-200px!",value:t.value.reminder,"onUpdate:value":l[0]||(l[0]=e=>t.value.reminder=e),options:O(ye)},null,8,["value","options"])]),_:1},8,["label"]),"1"==t.value.reminder?(A(),K(i,{key:0,label:a.$t("Crontab.Planned.index_65")},{default:R(()=>[E(d,{class:"w-200px!",value:t.value.message,"onUpdate:value":l[1]||(l[1]=e=>t.value.message=e),options:O(xe),"render-label":O(he)},null,8,["value","options","render-label"])]),_:1},8,["label"])):Y("",!0)]),_:1}),"1"==t.value.reminder?(A(),I("div",Ke,H(a.$t("Crontab.Planned.index_66")),1)):Y("",!0),E(u,null,{default:R(()=>["path"==t.value.type?(A(),K(i,{key:0,label:a.$t("Crontab.Planned.index_67"),path:"sName"},{default:R(()=>[E(r,{value:t.value.sName,"onUpdate:value":l[2]||(l[2]=e=>t.value.sName=e),disabled:e.isEdit,onChange:n},null,8,["value","disabled"])]),_:1},8,["label"])):Y("",!0),"path"!==t.value.type?(A(),K(i,{key:1,label:"site"==t.value.type?a.$t("Crontab.Planned.index_68"):a.$t("Crontab.Planned.index_69")},{default:R(()=>[E(u,null,{default:R(()=>["site"==t.value.type?(A(),K(d,{key:0,class:"w-200px!",value:t.value.sName,"onUpdate:value":[l[3]||(l[3]=e=>t.value.sName=e),s],disabled:e.isEdit,filterable:"",options:O(we)},null,8,["value","disabled","options"])):Y("",!0),"database"==t.value.type?(A(),K(d,{key:1,class:"w-120px!",value:t.value.databaseType,"onUpdate:value":[l[4]||(l[4]=e=>t.value.databaseType=e),o],disabled:e.isEdit,options:O(fe)},null,8,["value","disabled","options"])):Y("",!0),"database"==t.value.type||"enterpriseBackup"==t.value.type?(A(),K(u,{key:2,class:"items-center"},{default:R(()=>["database"==t.value.type?(A(),I("div",Ye,H(a.$t("Site.PHP.add_site_16")),1)):Y("",!0),E(d,{class:"w-140px!",value:t.value.sName,"onUpdate:value":[l[5]||(l[5]=e=>t.value.sName=e),s],filterable:"",options:O(ge),disabled:e.isEdit},null,8,["value","options","disabled"])]),_:1})):Y("",!0)]),_:1})]),_:1},8,["label"])):Y("",!0),E(i,null,{default:R(()=>[Z("span",Ze,H(a.$t("Crontab.Planned.index_11")),1),E(d,{class:"w-150px!",value:t.value.backupTo,"onUpdate:value":l[6]||(l[6]=e=>t.value.backupTo=e),options:O(Ce)},null,8,["value","options"])]),_:1}),E(i,{path:"save"},{default:R(()=>[Z("span",Ge,H(a.$t("Docker.Container.log.index_18")),1),E(_,null,{default:R(()=>[E(p,{class:"w-50px!",value:t.value.save,"onUpdate:value":l[7]||(l[7]=e=>t.value.save=e),"show-button":!1,placeholder:""},null,8,["value"]),E(c,null,{default:R(()=>[B(H(a.$t("Crontab.Planned.index_94")),1)]),_:1})]),_:1})]),_:1})]),_:1}),"localhost"!==t.value.backupTo?(A(),I("div",Qe,[E(i,{label:a.$t("Crontab.Script.index_55")},{default:R(()=>[E(b,{checked:t.value.backup,"onUpdate:checked":l[8]||(l[8]=e=>t.value.backup=e)},{default:R(()=>[B(H(a.$t("Crontab.Script.index_56")),1)]),_:1},8,["checked"])]),_:1},8,["label"])])):Y("",!0)])):Y("",!0)}}}),ea={class:"ml-8px color-#ef0808"},aa=V({__name:"index",props:{data:{}},setup(e,{expose:a}){const l=e,{getList:t,isEdit:n,row:s}=l.data,{t:i}=D(),u=L(null),r=G({type:"toShell",name:"",get newName(){return"".concat(p.value).concat(p.value?c.value?c.value:"[ALL]":"").concat("database"!=this.type||n?"":"--".concat(this.databaseType))},time:"day",day:1,week:"1",hour:1,minute:30,second:5,user:"root",sBody:"",reminder:"0",message:"ALL",sName:"ALL",backupTo:"localhost",save:3,databaseType:"mysql",zip:"",url:"http://",agent:"",dbBackupPath:"/www/backup",id:0,region:"Asia",splitType:"",splitValue:3,backup:!0,costom_time:null}),p=L(""),c=L(""),_=(e,a)=>{c.value="[".concat(a.label,"]")},b=e=>{c.value="[".concat(e,"]")},m=e=>{c.value="[".concat(e,"]")},y=e=>{r.region=Be(e),r.sName=e,c.value="[".concat(Be(e)," / ").concat(e,"]")},x={...We,minute:{required:!0,trigger:["blur","input"],validator:(e,a)=>a>=60||a<0||null==a?new Error("".concat(i("Site.Placeholder.Index_10")," 0-59")):"hour-n"!=r.time||0!=a||0!=r.hour||new Error(i("Crontab.Script.index_60"))}},w=async()=>{await je(r.databaseType),r.sName="ALL",c.value=""},f=e=>{var a;null==(a=u.value)||a.restoreValidation();r.sName={sync_time:"Aqtau",path:"/www/wwwroot"}[e]||"ALL",r.url="webshell"===e?"ALL":"http://",r.save="logs"===e?180:3,r.time="day",Le(e);const l=Pe.find(a=>a.value===e);p.value=l&&"toShell"!==e?l.label:"",["site","database","enterpriseBackup"].includes(e)?w():c.value={path:"[/www/wwwroot]",toUrl:"[http://]",sync_time:"[Asia / Aqtau]",rememory:" "}[e]||""};Q(()=>r.newName,e=>r.name=e);a({onConfirm:async({hide:e})=>{var a;await(null==(a=u.value)?void 0:a.validate()),n?await P(ee(Ve(r))):await U(ee(Ve(r))),null==t||t(),e()}});const{loading:g,setLoading:C}=v();return(async()=>{try{C(!0),await Le(n?s.sType:"toShell"),n&&s&&(r.type=s.sType,r.name=s.name,r.time=s.type,r.day=Number(s.where1),r.week=s.where1,r.hour=s.where_hour,r.minute=s.where_minute?s.where_minute:Number(s.where1),r.second=Number(s.second),r.user=s.user,r.sBody=s.sBody,r.reminder=s.notice.toString(),r.message=s.notice_channel,r.sName="sync_time"===s.sType?s.sName.split("/").pop():s.sName,r.backupTo=De(s.backupTo),r.databaseType=s.db_type,r.save=Number(s.save),r.url=s.urladdress,r.agent=s.user_agent,r.dbBackupPath=s.db_backup_path,r.id=s.id,r.splitType=s.split_type,r.splitValue=Number(s.split_value),r.backup=!!s.save_local,r.costom_time="once"===s.type?s.where1:null)}finally{C(!1)}})(),(e,a)=>{const l=ne,t=se,s=ue,i=_e,p=de,c=ie,v=oe,C=ae,k=d,P=te,U=ce,T=re,$=h,N=o;return A(),K(N,{class:"p-20px",show:O(g)},{default:R(()=>[E(U,{ref_key:"formRef",ref:u,model:O(r),rules:x},{default:R(()=>[E(t,{label:e.$t("Crontab.Planned.index_60")},{default:R(()=>[E(l,{class:"w-250px",value:O(r).type,"onUpdate:value":[a[0]||(a[0]=e=>O(r).type=e),f],options:O(Pe),disabled:O(n),"render-label":O(ke)},null,8,["value","options","disabled","render-label"])]),_:1},8,["label"]),E(t,{label:e.$t("Crontab.Planned.index_61"),path:"name"},{default:R(()=>[E(s,{class:"w-350px!",value:O(r).name,"onUpdate:value":a[1]||(a[1]=e=>O(r).name=e),"input-props":{name:"name"},disabled:O(Ue)(O(r).type),placeholder:e.$t("Crontab.Planned.index_49")},null,8,["value","disabled","placeholder"])]),_:1},8,["label"]),E(Fe,{modelValue:O(r),"onUpdate:modelValue":a[2]||(a[2]=e=>M(r)?r.value=e:null),isEdit:O(n)},null,8,["modelValue","isEdit"]),"toShell"==O(r).type?(A(),I(X,{key:0},[E(t,{label:e.$t("Crontab.Planned.index_62")},{default:R(()=>[E(l,{class:"w-250px",value:O(r).user,"onUpdate:value":a[3]||(a[3]=e=>O(r).user=e),options:O(Te)},null,8,["value","options"])]),_:1},8,["label"]),E(t,{label:e.$t("Crontab.Planned.index_63"),path:"sBody"},{default:R(()=>[E(i,{class:"w-550px",value:O(r).sBody,"onUpdate:value":a[4]||(a[4]=e=>O(r).sBody=e),rows:8,name:"sBody",placeholder:e.$t("Crontab.Planned.index_50")},null,8,["value","placeholder"])]),_:1},8,["label"])],64)):Y("",!0),E(Xe,{modelValue:O(r),"onUpdate:modelValue":a[5]||(a[5]=e=>M(r)?r.value=e:null),isEdit:O(n),onOnChangeBDType:w,onOnChangePath:b,onOnUpdateTaskName:_},null,8,["modelValue","isEdit"]),"site"==O(r).type||"path"==O(r).type?(A(),K(t,{key:1,label:e.$t("Crontab.Planned.index_70"),path:"rules"},{default:R(()=>[E(s,{class:"w-550px!",autosize:{minRows:8},value:O(r).sBody,"onUpdate:value":a[6]||(a[6]=e=>O(r).sBody=e),type:"textarea",placeholder:O($e)},null,8,["value","placeholder"])]),_:1},8,["label"])):Y("",!0),"enterpriseBackup"==O(r).type?(A(),K(t,{key:2,label:e.$t("Crontab.Planned.index_71")},{default:R(()=>[E(s,{class:"w-250px!",value:O(r).zip,"onUpdate:value":a[7]||(a[7]=e=>O(r).zip=e),type:"text",placeholder:e.$t("Crontab.Planned.index_72")},null,8,["value","placeholder"]),Z("span",ea," *"+H(e.$t("Crontab.Planned.index_73")),1)]),_:1},8,["label"])):Y("",!0),"logs"==O(r).type?(A(),K(C,{key:3},{default:R(()=>[E(t,{label:e.$t("Crontab.Planned.index_74")},{default:R(()=>[E(l,{class:"w-150px!",value:O(r).sName,"onUpdate:value":[a[8]||(a[8]=e=>O(r).sName=e),_],options:O(we),disabled:O(n)},null,8,["value","options","disabled"])]),_:1},8,["label"]),E(t,{path:"save"},{default:R(()=>[E(v,null,{default:R(()=>[E(p,{class:"w-50px!",value:O(r).save,"onUpdate:value":a[9]||(a[9]=e=>O(r).save=e),"show-button":!1,placeholder:""},null,8,["value"]),E(c,null,{default:R(()=>[B(H(e.$t("Crontab.Planned.index_94")),1)]),_:1})]),_:1})]),_:1})]),_:1})):Y("",!0),"webshell"==O(r).type?(A(),I(X,{key:4},[E(t,{label:e.$t("Home.index_68")},{default:R(()=>[E(l,{class:"w-150px!",value:O(r).sName,"onUpdate:value":[a[10]||(a[10]=e=>O(r).sName=e),_],options:O(we),disabled:O(n)},null,8,["value","options","disabled"])]),_:1},8,["label"]),E(t,{label:e.$t("Crontab.Planned.index_65")},{default:R(()=>[E(l,{class:"w-200px!",value:O(r).url,"onUpdate:value":a[11]||(a[11]=e=>O(r).url=e),options:O(xe),"render-label":O(he)},null,8,["value","options","render-label"])]),_:1},8,["label"])],64)):Y("",!0),"sync_time"==O(r).type?(A(),K(t,{key:5,label:e.$t("Crontab.Planned.index_75")},{default:R(()=>[E(k,{class:"w-300px!",value:O(r).sName,"onUpdate:value":a[12]||(a[12]=e=>O(r).sName=e),options:O(Ne),"on-update:value":y,"check-strategy":"child"},null,8,["value","options"])]),_:1},8,["label"])):Y("",!0),"toUrl"==O(r).type?(A(),I(X,{key:6},[E(C,null,{default:R(()=>[E(t,{label:e.$t("Site.Proxy.index_11"),path:"url"},{default:R(()=>[E(s,{class:"w-350px!",value:O(r).url,"onUpdate:value":a[13]||(a[13]=e=>O(r).url=e),placeholder:"",onInput:m},null,8,["value"])]),_:1},8,["label"]),E(t,{path:"url"},{default:R(()=>[E(P,{onClick:a[14]||(a[14]=e=>O(Se)(O(r).url))},{default:R(()=>[B(H(e.$t("Crontab.Planned.index_84")),1)]),_:1})]),_:1})]),_:1}),E(t,{label:e.$t("Crontab.Planned.index_76")},{default:R(()=>[E(s,{class:"w-350px!",type:"textarea",value:O(r).agent,"onUpdate:value":a[15]||(a[15]=e=>O(r).agent=e),placeholder:e.$t("Crontab.Planned.index_77")},null,8,["value","placeholder"])]),_:1},8,["label"])],64)):Y("",!0)]),_:1},8,["model"]),"second-n"==O(r).time?(A(),K(T,{key:0,type:"warning"},{default:R(()=>a[16]||(a[16]=[Z("span",null,"To maintain service stability and ensure smooth performance, please refrain from frequently running high-load scripts and avoid adding too many such tasks",-1)])),_:1,__:[16]})):Y("",!0),O(Ee)(O(r).type)?(A(),K($,{key:1},{default:R(()=>[Z("li",null,H(O(Ee)(O(r).type)),1)]),_:1})):Y("",!0)]),_:1},8,["show"])}}}),la=V({__name:"index",setup(e){const a=i(),n=j(()=>l(()=>import("./index118.js?v=1767769852656"),__vite__mapDeps([20,21,3,4,5,6,7,8,9,10,22,19,13,23]))),{t:s}=D(),o=()=>{q.title=s("Crontab.Planned.index_4"),q.data.isEdit=!1,q.show=!0},d=e=>{I.title=s("Crontab.Planned.index_6",[e.name]),I.data.id=e.id,I.show=!0},{keys:_,table:h,columns:C}=x([{type:"selection",width:40},{key:"name",title:s("Site.TableRow.index_2"),minWidth:"20%",ellipsis:{tooltip:{width:"trigger"}}},{key:"status",title:s("Public.Table.Status"),minWidth:90,render:e=>E(Ae,{row:e},null)},{key:"cycle",title:s("Crontab.Planned.index_9")},{key:"save",title:s("Crontab.Planned.index_10"),align:"center",minWidth:80,render:e=>E(Re,{row:e},null)},{key:"backupTo",title:s("Crontab.Planned.index_11"),align:"center",render:e=>e.backupTo?e.backupTo:"--"},{key:"addtime",title:s("Crontab.Planned.index_12")},w({title:s("Public.Table.Operation"),width:240,options:e=>[{label:s("Docker.LocalImage.pull.index_12"),class:"execute-btn",onClick:()=>{m({title:s("Crontab.Planned.index_13"),content:s("Crontab.Planned.index_14",[e.name]),onConfirm:async()=>{await T({id:e.id}),V(),d(e)}})}},{label:s("Public.Btn.Edit"),class:"edit-btn",onClick:()=>{q.title=s("Crontab.arrange.index_37"),q.data.isEdit=!0,q.data.row=e,q.show=!0}},{label:s("Ftp.Table.index_15"),class:"logs-btn",onClick:()=>{d(e)}},{label:s("Public.Btn.Del"),class:"delete-btn",onClick:()=>{m({title:s("Crontab.arrange.index_3",[e.name]),content:s("Crontab.Planned.index_78",[e.name]),onConfirm:async()=>{await $({id:e.id}),V()}})}}]})]),k=[{key:"execute",type:"confirm",label:s("Crontab.Planned.index_20"),confirm:{title:s("Crontab.Planned.index_16",[s("Crontab.Planned.index_20")]),desc:s("Crontab.Planned.index_17",[s("Crontab.Planned.index_20")]),columns:[C.value[1]],api:e=>T({id:e.id},!1),done:()=>{V()}}},{key:"start",label:s("Crontab.Planned.index_15"),onBatch:()=>{m({title:s("Crontab.Planned.index_16",[s("Crontab.Planned.index_15")]),content:s("Crontab.Planned.index_17",[s("Crontab.Planned.index_15")]),onConfirm:async({hide:e})=>{try{await N({id_list:JSON.stringify(_.value),type:"start",if_stop:!1}),u.success(s("Security.Compiler.Index_4"))}catch(a){console.error(a)}V(),e()}})}},{key:"stop",label:s("Crontab.Planned.index_18"),onBatch:()=>{m({title:s("Crontab.Planned.index_16",[s("Crontab.Planned.index_18")]),content:s("Crontab.Planned.index_17",[s("Crontab.Planned.index_18")]),onConfirm:async({hide:e})=>{try{await N({id_list:JSON.stringify(_.value),type:"stop",if_stop:!1}),u.success(s("Security.Compiler.Index_4"))}catch(a){console.error(a)}V(),e()}})}},{key:"category",label:s("Crontab.Planned.index_19"),onBatch:e=>{b({title:s("Crontab.Planned.index_16",[s("Crontab.Planned.index_19")]),width:350,minHeight:72,footer:!0,data:{rows:e},component:j(()=>l(()=>import("./batch.js?v=1767769852656"),__vite__mapDeps([24,19,4,5,6,7,3,8,9,10,13])))})}},{key:"delete",type:"confirm",label:s("Crontab.Planned.index_22"),confirm:{title:s("Crontab.Planned.index_16",[s("Crontab.Planned.index_22")]),desc:s("Crontab.Planned.index_17",[s("Crontab.Planned.index_22")]),columns:[C.value[1]],api:e=>$({id:e.id},!1),done:()=>{V()}}}],P=G({search:"",type_id:"",order_param:""}),{loading:U,setLoading:L}=v(!0),V=async()=>{try{L(!0);const{message:e}=await S(ee({...P}));t(e)?h.data=e:(h.data=[],h.total=0)}finally{_.value=[],L(!1)}};V(),Q(()=>a.isRefresh,e=>{e&&(a.setRefresh(!1),V())});const q=y(s("Crontab.Planned.index_4"),{getList:V}),I=y("",{getList:V});return(e,a)=>{const l=te,t=g,d=f,i=c,u=p,b=r,m=pe;return A(),K(m,null,{default:R(()=>[E(u,{class:"p-16px",feedback:!0},{toolsLeft:R(()=>[E(l,{class:"add-task-btn",type:"primary",onClick:o},{default:R(()=>[B(H(O(s)("Crontab.Planned.index_4")),1)]),_:1})]),toolsRight:R(()=>[E(Oe,{value:O(P).type_id,"onUpdate:value":[a[0]||(a[0]=e=>O(P).type_id=e),V]},null,8,["value"]),E(t,{value:O(P).search,"onUpdate:value":a[1]||(a[1]=e=>O(P).search=e),placeholder:e.$t("Crontab.Planned.index_5"),onSearch:V},null,8,["value","placeholder"])]),table:R(()=>[E(d,{"checked-row-keys":O(_),"onUpdate:checkedRowKeys":a[2]||(a[2]=e=>M(_)?_.value=e:null),loading:O(U),data:O(h).data,columns:O(C)},null,8,["checked-row-keys","loading","data","columns"])]),pageLeft:R(()=>[E(i,{"checked-row-keys":O(_),"onUpdate:checkedRowKeys":a[3]||(a[3]=e=>M(_)?_.value=e:null),data:O(h).data,options:k},null,8,["checked-row-keys","data"])]),_:1}),E(b,{show:O(q).show,"onUpdate:show":a[4]||(a[4]=e=>O(q).show=e),title:O(q).title,data:O(q).data,width:950,footer:!0,component:aa},null,8,["show","title","data"]),E(b,{show:O(I).show,"onUpdate:show":a[5]||(a[5]=e=>O(I).show=e),title:O(I).title,data:O(I).data,width:800,"min-height":550,footer:!1,component:O(n)},null,8,["show","title","data","component"])]),_:1})}}});export{la as default};
