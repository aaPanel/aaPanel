System.register(["./public-legacy.js?v=1763625242172","./page_layout-legacy.js?v=1763625242172","./soft-legacy.js?v=1763625242172","./vue-legacy.js?v=1763625242172","./naive-legacy.js?v=1763625242172"],(function(e,a){"use strict";var t,s,n,l,i,o,u,r,c,_,p,d,g,m,k,f;return{setters:[e=>{t=e.c,s=e.q},e=>{n=e.bf,l=e.i,i=e.c,o=e.n,u=e._},e=>{r=e.a},e=>{c=e.Z,_=e.r,p=e.a0,d=e.X,g=e.j,m=e.F},e=>{k=e.d8,f=e.dX}],execute:function(){e("g",(()=>n.post("/mod/backup_restore/com/get_backup_list"))),e("F",(e=>n.post("/mod/backup_restore/com/add_backup",e,{requestOptions:{loading:l.global.t("Component.Pay.index_12"),successMessage:!0}}))),e("K",(e=>n.post("/mod/backup_restore/com/get_progress",e))),e("J",(e=>n.post("/mod/backup_restore/com/task_stop",e,{requestOptions:{loading:l.global.t("Component.Pay.index_12"),successMessage:!0}}))),e("i",(e=>n.post("/mod/backup_restore/com/exec_backup",e,{requestOptions:{loading:l.global.t("Component.Pay.index_12"),successMessage:!0}}))),e("d",((e,a=!0)=>n.post("/mod/backup_restore/com/del_backup",e,{requestOptions:{loading:a?l.global.t("Component.Pay.index_12"):"",successMessage:a}}))),e("H",(e=>n.post("/mod/backup_restore/com/get_details",e))),e("I",(e=>n.post("/mod/backup_restore/com/get_exec_logs",e))),e("G",(e=>n.post("/mod/backup_restore/com/add_restore",e,{requestOptions:{loading:l.global.t("Component.Pay.index_12"),successMessage:!0}})));const{t:a}=l.global,b=e("u",c("backup",(()=>{const e=_(!1),t=_(!1),s=_([]),l=_({});return{backupData:l,storageType:s,showBackupStatus:t,loading:e,getData:async o=>{try{let u;e.value=!0,o?(t.value=!0,u=o):(t.value=!1,u=(await n.post("/mod/backup_restore/com/get_data_total")).message),i(u)&&(B.value=u.oss_list&&u.oss_list.length?u.oss_list.map((e=>({label:e.name,value:e.value,disabled:!e.status}))):[],B.value.unshift({value:"local",label:a("Crontab.Script.index_24"),disabled:!1}),l.value=u,w.data=u.site_list,h.data=u.database_list,O.data=[{name:"SSH",size:u.ssh_info.ssh_size,status:u.ssh_info.status,err_msg:u.ssh_info.err_msg},{name:"Command",size:u.ssh_info.command_size,status:u.ssh_info.status,err_msg:u.ssh_info.err_msg}],j.data=u.wp_list,q.data=u.ftp_list,M.data=u.crontab_list,T.data=[{name:"IP Rules",value:u.firewall_info.firewall_ip,status:u.firewall_info.status,err_msg:u.firewall_info.err_msg},{name:"Region Rules",value:u.firewall_info.firewall_conutry,status:u.firewall_info.status,err_msg:u.firewall_info.err_msg},{name:"Port Rules",value:u.firewall_info.firewall_new,status:u.firewall_info.status,err_msg:u.firewall_info.err_msg},{name:"Port Forwarding Rules",value:u.firewall_info.firewall_forward,status:u.firewall_info.status,err_msg:u.firewall_info.err_msg}],A.data=u.plugin_list,G.data=u.soft_data,$.data=Object.values(u.vmail_info).length?[u.vmail_info]:[],H.data=[...u.ssl_info.ssl_list.map((e=>({...e,type:"ssl"}))),...u.ssl_info.provider_list.map((e=>({...e,type:"provider"})))],u.oss_list&&u.oss_list.length&&(s.value=u.oss_list.map((e=>({label:e.name,value:e.value,disabled:!e.status}))).concat({label:"Local Storage",value:"local",disabled:!1})))}finally{e.value=!1}}}}))),y=b(),{showBackupStatus:x}=p(y),{t:C}=l.global,B=(e("E",(e=>e<Date.now()-864e5)),e("C",_([]))),v=(e("D",(e=>e.disabled?d("div",null,[d("span",null,[e.label]),d("span",{class:"float-right cursor-pointer color-#ef0808",onClick:()=>(async(e,a)=>{await s(e),await r({name:e,title:a,admin:!0})})(e.value,e.label)},[g("["),C("Crontab.Planned.index_47"),g("]")])]):d("span",null,[e.label]))),e("B",(e=>{const a=new Date(e||Date.now()),t=e=>e<10?"0"+e:e;return`Backup-${a.getFullYear()}-${t(a.getMonth()+1)}-${t(a.getDate())}-${t(a.getHours())}${t(a.getMinutes())}`})),e("b",(e=>({key:"name",title:C("Config.Backup.index_22"),render:a=>0===a.backup_status?d("span",{class:"text-#999"},[C("Config.Backup.index_23")]):1===a.restore_status?d("span",{class:"text-warning cursor-pointer",onClick:()=>{e("restore")}},[C("Config.Backup.index_24")]):1===a.backup_status?d("span",{class:"text-primary cursor-pointer",onClick:()=>{e("backup")}},[C("Config.Backup.index_25")]):d("div",{class:"items-center! cursor-pointer",onClick:()=>{e("log",a)}},[d(f,{type:"success",dot:!0},null),g(" "),C("Config.Backup.index_26"),g("("),a.backup_count.success||"--",g(")"),d(f,{type:"error",class:"ml-10px!",dot:!0},null),g(" "),C("Config.Backup.index_27"),g("("),a.backup_count.failed||"--",g(")")])}))),()=>({title:C("Public.Table.Status"),key:"status",align:"center",width:80,render:e=>x.value?2===e.status?d(u,{name:"base-success",class:"text-#20a53a",size:"16"},null):d(k,null,{trigger:()=>d(u,{name:"base-error",class:"text-error",size:"16"},null),default:()=>d(m,null,[e.err_msg])}):d("span",{class:"text-#20a53a"},[g("Ready")])})),{table:w,columns:z}=t([{title:C("Config.Backup.index_28"),key:"name"},{title:C("Config.Backup.index_29"),key:"size",render:e=>o(Number(e.size))},{title:C("Config.Backup.index_30"),key:"type"},v()]);e({s:w,a:z});const{table:h,columns:P}=t([{title:C("Config.Backup.index_31"),key:"name"},{title:C("Config.Backup.index_32"),key:"size",render:e=>o(Number(e.size))},{title:C("Config.Backup.index_33"),key:"type"},v()]);e({c:h,e:P});const{table:j,columns:S}=t([{title:C("Config.Backup.index_28"),key:"name"},{title:C("Config.Backup.index_29"),key:"size",render:e=>o(Number(e.size))},{title:C("Config.Backup.index_30"),key:"type"},v()]);e({w:j,f:S});const{table:q,columns:D}=t([{title:C("Config.Backup.index_34"),key:"name"},v()]);e({h:q,j:D});const{table:M,columns:N}=t([{title:C("Config.Backup.index_35"),key:"name"},v()]);e({t:M,k:N});const{table:O,columns:R}=t([{title:C("Config.Backup.index_36"),key:"name"},{title:C("Config.Backup.index_37"),key:"size",render:e=>o(Number(e.size))},v()]);e({z:O,A:R});const{table:$,columns:F}=t([{title:C("Config.Backup.index_38"),key:"name"},{title:C("Config.Backup.index_39"),key:"size",render:e=>o(Number(e.size))},v()]);e({v:$,l:F});const{table:H,columns:I}=t([{title:C("Config.Backup.index_40"),key:"type"},{title:C("Config.Backup.index_41"),key:"name"},{title:C("Config.Backup.index_42"),key:"ps"},v()]);e({m:H,n:I});const{table:T,columns:X}=t([{title:C("Config.Backup.index_43"),key:"name"},{title:C("Config.Backup.index_44"),key:"value"},v()]);e({o:T,p:X});const{table:A,columns:E}=t([{title:C("Config.Backup.index_45"),key:"name"},{title:C("Config.Backup.index_46"),key:"size",render:e=>o(Number(e.size))},v()]);e({q:A,r:E});const{table:G,columns:J}=t([{title:C("Config.Backup.index_47"),key:"name"},{title:C("Config.Backup.index_48"),key:"version"},{title:C("Config.Backup.index_37"),key:"size",render:e=>o(Number(e.size))},v()]);e({x:G,y:J})}}}));
