import{_ as e}from"./index.js?v=1767769852656";import{_ as a}from"./index.vue_vue_type_script_setup_true_lang.js?v=1767769852656";import{gq as l,aE as o}from"./page_layout.js?v=1767769852656";import{b as t,g as r}from"./index38.js?v=1767769852656";import{k as i,P as s,i as u,r as n,av as d,a2 as p,V as m,a3 as v,S as f,W as _,U as w,ak as c}from"./vue.js?v=1767769852656";import{dR as h,au as j}from"./naive.js?v=1767769852656";import"./common.js?v=1767769852656";import"./__commonjsHelpers__.js?v=1767769852656";import"./public.js?v=1767769852656";import"./soft2.js?v=1767769852656";import"./soft.js?v=1767769852656";import"./site.js?v=1767769852656";import"./file2.js?v=1767769852656";import"./index.vue_vue_type_script_setup_true_lang7.js?v=1767769852656";const b={class:"p-20px pt-28px"},g={class:"w-320px"},x={class:"w-320px"},D={class:"w-320px"},M=i({__name:"RemoteDownload",setup(i,{expose:M}){const{t:R}=s(),y=u("fileStore"),{downloadFileFormData:E,currentPath:U}=y,q=n(!1),k=d("formRef"),F={url:{trigger:["input","blur"],validator:()=>E.value.url?!!l(E.value.url)||new Error(R("file.remoteDownloadModal.validation.urlInvalid")):new Error(R("file.remoteDownloadModal.validation.urlRequired"))},path:{trigger:["input","blur"],validator:()=>!!E.value.path||new Error(R("file.remoteDownloadModal.validation.pathRequired"))},filename:{trigger:["input","blur"],validator:()=>!!E.value.filename||new Error(R("file.remoteDownloadModal.validation.filenameRequired"))}},P=e=>{const a=e.split("/").pop();E.value.filename=a||""};M({open(){E.value.url="http://",E.value.path=U.value,E.value.filename="",q.value=!0},close(){q.value=!1}});const S=async()=>{var e;await(null==(e=k.value)?void 0:e.validate()),await o.post("/files?action=DownloadFile",{...E.value}),t(y),r(y)};return(l,o)=>{const t=j,r=h,i=a,s=e;return m(),p(s,{show:w(q),"onUpdate:show":o[3]||(o[3]=e=>c(q)?q.value=e:null),title:w(R)("file.remoteDownloadModal.title"),width:500,footer:!0,onConfirm:S},{default:v(()=>[f("div",b,[_(i,{ref_key:"formRef",ref:k,model:w(E),rules:F},{default:v(()=>[_(r,{label:w(R)("file.remoteDownloadModal.urlAddress"),path:"url"},{default:v(()=>[f("div",g,[_(t,{value:w(E).url,"onUpdate:value":[o[0]||(o[0]=e=>w(E).url=e),P]},null,8,["value"])])]),_:1},8,["label"]),_(r,{label:w(R)("file.remoteDownloadModal.downloadTo"),path:"path"},{default:v(()=>[f("div",x,[_(t,{value:w(E).path,"onUpdate:value":o[1]||(o[1]=e=>w(E).path=e)},null,8,["value"])])]),_:1},8,["label"]),_(r,{label:w(R)("file.remoteDownloadModal.fileName"),path:"filename"},{default:v(()=>[f("div",D,[_(t,{value:w(E).filename,"onUpdate:value":o[2]||(o[2]=e=>w(E).filename=e)},null,8,["value"])])]),_:1},8,["label"])]),_:1},8,["model"])])]),_:1},8,["show","title"])}}});export{M as default};
