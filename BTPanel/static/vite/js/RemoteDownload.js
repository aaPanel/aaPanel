import{_ as e}from"./index.js?v=1769066082311";import{_ as a}from"./index.vue_vue_type_script_setup_true_lang.js?v=1769066082311";import{gt as l,aE as o}from"./page_layout.js?v=1769066082311";import{P as t,w as r}from"./CalcSize.vue_vue_type_script_setup_true_lang.js?v=1769066082311";import{k as i,P as u,i as s,r as n,av as d,a2 as p,V as m,a3 as v,S as f,W as _,U as w,ak as c}from"./vue.js?v=1769066082311";import{dS as h,au as j}from"./naive.js?v=1769066082311";import"./common.js?v=1769066082311";import"./__commonjsHelpers__.js?v=1769066082311";import"./public.js?v=1769066082311";import"./soft2.js?v=1769066082311";import"./soft.js?v=1769066082311";import"./site.js?v=1769066082311";const D={class:"p-20px pt-28px"},b={class:"w-320px"},g={class:"w-320px"},x={class:"w-320px"},M=i({__name:"RemoteDownload",setup(i,{expose:M}){const{t:R}=u(),y=s("fileStore"),{downloadFileFormData:E,currentPath:U}=y,S=n(!1),k=d("formRef"),q={url:{trigger:["input","blur"],validator:()=>E.value.url?!!l(E.value.url)||new Error(R("file.remoteDownloadModal.validation.urlInvalid")):new Error(R("file.remoteDownloadModal.validation.urlRequired"))},path:{trigger:["input","blur"],validator:()=>!!E.value.path||new Error(R("file.remoteDownloadModal.validation.pathRequired"))},filename:{trigger:["input","blur"],validator:()=>!!E.value.filename||new Error(R("file.remoteDownloadModal.validation.filenameRequired"))}},F=e=>{const a=e.split("/").pop();E.value.filename=a||""};M({open(){E.value.url="http://",E.value.path=U.value,E.value.filename="",S.value=!0},close(){S.value=!1}});const P=async()=>{var e;await(null==(e=k.value)?void 0:e.validate()),await o.post("/files?action=DownloadFile",{...E.value}),t(y),r(y)};return(l,o)=>{const t=j,r=h,i=a,u=e;return m(),p(u,{show:w(S),"onUpdate:show":o[3]||(o[3]=e=>c(S)?S.value=e:null),title:w(R)("file.remoteDownloadModal.title"),width:500,footer:!0,onConfirm:P},{default:v(()=>[f("div",D,[_(i,{ref_key:"formRef",ref:k,model:w(E),rules:q},{default:v(()=>[_(r,{label:w(R)("file.remoteDownloadModal.urlAddress"),path:"url"},{default:v(()=>[f("div",b,[_(t,{value:w(E).url,"onUpdate:value":[o[0]||(o[0]=e=>w(E).url=e),F]},null,8,["value"])])]),_:1},8,["label"]),_(r,{label:w(R)("file.remoteDownloadModal.downloadTo"),path:"path"},{default:v(()=>[f("div",g,[_(t,{value:w(E).path,"onUpdate:value":o[1]||(o[1]=e=>w(E).path=e)},null,8,["value"])])]),_:1},8,["label"]),_(r,{label:w(R)("file.remoteDownloadModal.fileName"),path:"filename"},{default:v(()=>[f("div",x,[_(t,{value:w(E).filename,"onUpdate:value":o[2]||(o[2]=e=>w(E).filename=e)},null,8,["value"])])]),_:1},8,["label"])]),_:1},8,["model"])])]),_:1},8,["show","title"])}}});export{M as default};
