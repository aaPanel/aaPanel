import{u as e,m as a,fj as t,c7 as s,_ as l,k as o,fk as n,I as i,j as p}from"./page_layout.js?v=1744703330658";import{R as c}from"./public.js?v=1744703330658";import{cn as r,a2 as m,cm as d,c0 as v,cl as u,T as y,cq as f}from"./naive.js?v=1744703330658";import{d as x,O as A,t as g,r as h,R as I,S as H,U as _,a1 as b,V as w,F as C,N as E,$ as L,P as B,a0 as V,c as S,af as q,x as N,ai as P,a3 as k}from"./vue.js?v=1744703330658";import"./common.js?v=1744703330658";import"./__commonjsHelpers__.js?v=1744703330658";const Q={class:"recommend-item"},R={class:"recommend-title"},D={class:"content"},T={class:"soft-list"},U={key:0,class:"flex-center w-32px"},j=["src"],F={class:"flex items-center my-20px"},W={class:"mr-10px"},M={class:"w-280px"},Y={class:"w-280px"},J={class:"flex justify-center"},Z=o(x({__name:"item",props:{data:{},memTotal:{default:0}},emits:["close"],setup(o,{emit:n}){const i=o,p=n,{t:c}=A(),f=e(),x=g((()=>i.data)),N=g((()=>i.memTotal)),P=h((()=>{const{soft:e}=x.value,a={};return e.forEach((e=>{a[e.type]={value:e.value,checked:!0},"DNS-Server"!==e.type&&"Mail-Server"!==e.type||(a[e.type].checked=!1)})),a})()),k=h(1),Z=new Map([["5.1",{max:256,rec:512}],["5.5",{max:600,rec:1024}],["5.6",{max:800,rec:1024}],["5.7",{max:1500,rec:2048}],["8.0",{max:5e3,rec:6144}],["AliSQL",{max:800,rec:1024}],["mariadb_10.0",{max:800,rec:1024}],["mariadb_10.1",{max:1500,rec:2048}]]),K=new Map([["5.2","4.0"],["5.3","4.0"],["5.4","4.4"],["5.5","4.4"]]),z={mysql:e=>{const t=Z.get(e),s=(null==t?void 0:t.max)||0,l=(null==t?void 0:t.rec)||0;if(N.value<s){const t=c("Home.Install.index_10",[l/1024,e]);a.error(t)}},apache:e=>{"2.2"==e?a.info(c("Home.Install.index_11",["2.2","php5_module"])):a.info(c("Home.Install.index_11",["2.4","php-fpm"]))},php:e=>{if("lnmp"===x.value.type){const a=K.get(e)||"4.9";P.value.phpMyAdmin.value=a}if("lamp"===x.value.type){const t=e;"2.2"==P.value.Apache.value?"5.2"!=t&&"5.3"!=t&&"5.4"!=t&&(a.error(c("Home.Install.index_12",["2.2",t])),P.value.PHP.value="5.4"):"5.2"==t&&(a.error(c("Home.Install.index_12",["2.4",t])),P.value.PHP.value="5.4")}}},X=async()=>{const e=a.loading(c("Home.Install.index_13"));try{const e=(()=>{const e=[];return Object.entries(P.value).forEach((([a,t])=>{if(t.checked){let s=a.toLowerCase();"pure-ftpd"===s&&(s="pureftpd"),"php"===s&&(s="php-"+t.value),"dns-server"===s&&(s="dns_manager"),"mail-server"===s&&(s="mail_sys"),e.push({sName:s,version:"".concat(t.value),type:k.value,id:"lnmp"===x.value.type?50:41})}})),e})();for(let a=0;a<e.length;a++)await t(e[a]);a.success(c("Home.Install.index_14")),f.getConfigSimple(),p("close"),s()}finally{e.close()}};return(e,a)=>{const t=l,s=r,o=m,n=d,i=v,p=u,c=y;return I(),H("div",Q,[_("div",R,b(w(x).title),1),_("div",D,[_("ul",T,[(I(!0),H(C,null,E(w(x).soft,(e=>(I(),H("li",{key:e.type},["mail"===e.icon||"dns"===e.icon?(I(),H("div",U,[_("img",{class:"w-20px",src:"mail"===e.icon?w("/static/vite/images/mail-server.png"):w("data:image/png;base64,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"),alt:""},null,8,j)])):(I(),L(t,{key:1,name:"soft-".concat(e.icon),size:"32"},null,8,["name"])),B(s,{value:w(P)[e.type].value,"onUpdate:value":[a=>w(P)[e.type].value=a,a=>((e,a)=>{e=e.toLowerCase();const t=z[e];null==t||t(a)})(e.type,a)],class:"flex-1 ml-10px mr-20px",options:e.options},null,8,["value","onUpdate:value","options"]),B(o,{checked:w(P)[e.type].checked,"onUpdate:checked":a=>w(P)[e.type].checked=a},null,8,["checked","onUpdate:checked"])])))),128))]),_("div",F,[_("span",W,b(e.$t("Home.Install.index_4")),1),B(p,{value:w(k),"onUpdate:value":a[0]||(a[0]=e=>q(k)?k.value=e:null)},{default:V((()=>[B(i,{trigger:"hover"},{trigger:V((()=>[B(n,{value:1},{default:V((()=>[S(b(e.$t("Home.Install.index_5")),1)])),_:1})])),default:V((()=>[_("div",M,b(e.$t("Home.Install.index_6")),1)])),_:1}),B(i,{trigger:"hover"},{trigger:V((()=>[B(n,{value:0},{default:V((()=>[S(b(e.$t("Home.Install.index_7")),1)])),_:1})])),default:V((()=>[_("div",Y,b(e.$t("Home.Install.index_8")),1)])),_:1})])),_:1},8,["value"])]),_("div",J,[B(c,{type:"primary",onClick:X},{default:V((()=>[S(b(e.$t("Home.Install.index_9")),1)])),_:1})])])])}}}),[["__scopeId","data-v-27a16286"]]),K={class:"w-680px p-20px"},z={class:"recommend-list"},X=o(x({__name:"index",props:{memTotal:{}},emits:["close"],setup(e,{expose:a,emit:t}){const s=e,l=t,{t:o}=A(),{memTotal:r}=s,m=N([]),d=[{type:"lnmp",title:o("Home.Install.index_2"),soft:[{type:"Nginx",icon:"nginx",value:void 0,options:[]},{type:"MySQL",icon:"mysql",value:void 0,options:[]},{type:"PHP",icon:"php",value:void 0,options:[]},{type:"Pure-Ftpd",icon:"pure-ftpd",value:void 0,options:[]},{type:"phpMyAdmin",icon:"phpmyadmin",value:void 0,options:[]},{type:"DNS-Server",icon:"dns",value:void 0,options:[]},{type:"Mail-Server",icon:"mail",value:void 0,options:[]}]},{type:"lamp",title:o("Home.Install.index_3"),soft:[{type:"Apache",icon:"apache",value:void 0,options:[]},{type:"MySQL",icon:"mysql",value:void 0,options:[]},{type:"PHP",icon:"php",value:void 0,options:[]},{type:"Pure-Ftpd",icon:"pure-ftpd",value:void 0,options:[]},{type:"phpMyAdmin",icon:"phpmyadmin",value:void 0,options:[]},{type:"DNS-Server",icon:"dns",value:void 0,options:[]},{type:"Mail-Server",icon:"mail",value:void 0,options:[]}]}],v=P(),u=()=>{v.push("/soft")},y=()=>{l("close")};return(async()=>{const{message:e}=await n();i(e)&&e.forEach((e=>{const{name:a}=e;if("Tomcat"===a)return;let t;const s=[];e.versions.forEach((({version:e},l)=>{(!t&&("PHP"===a&&0===l)||"MySQL"===a&&0===l||"phpMyAdmin"===a&&0===l)&&(t=e),s.push({label:"".concat(a," ").concat(e),value:e})})),!t&&s.length>0&&(t=s[0].value),d.forEach((e=>{for(let l=0;l<e.soft.length;l++)if(e.soft[l].type===a){e.soft[l].value=t,e.soft[l].options=s;break}})),m.value=d}))})(),a({onClose:()=>{c()}}),(e,a)=>{const t=p,s=k("i18n-t"),l=f;return I(),H("div",K,[B(l,{class:"mb-16px",type:"warning"},{default:V((()=>[B(s,{tag:"div",keypath:"Home.Install.index_1_1",scope:"global"},{soft_:V((()=>[B(t,{class:"mx-4px",onClick:u},{default:V((()=>[S(b(e.$t("Home.Install.index_1_2")),1)])),_:1})])),_:1})])),_:1}),_("div",z,[(I(!0),H(C,null,E(w(m),(e=>(I(),L(Z,{key:e.type,data:e,"mem-total":w(r),onClose:y},null,8,["data","mem-total"])))),128))])])}}}),[["__scopeId","data-v-0065ab1d"]]);export{X as default};
