System.register(["./index-legacy251.js?v=1767769852656","./public-legacy.js?v=1767769852656","./page_layout-legacy.js?v=1767769852656","./vue-legacy.js?v=1767769852656","./naive-legacy.js?v=1767769852656","./common-legacy.js?v=1767769852656","./__commonjsHelpers__-legacy.js?v=1767769852656"],function(e,a){"use strict";var l,t,s,n,i,o,r,c,u,d,m,p,f,h,v,_,x,y,S,w,g,b,k,L,C,$,j,z,A,R,N,U,D,T,H,P,I,J;return{setters:[e=>{l=e._},e=>{t=e._,s=e.a},e=>{n=e.h3,i=e.d,o=e.fV,r=e.T,c=e._,u=e.dH,d=e.m,m=e.p,p=e.q,f=e.h4,h=e.h5},e=>{v=e.r,_=e.k,x=e.P,y=e.af,S=e.e,w=e.c,g=e.o,b=e.a5,k=e.R,L=e.V,C=e.S,$=e.W,j=e.a3,z=e.a4,A=e.U,R=e.j,N=e.ak,U=e.an,D=e.a2},e=>{T=e.em,H=e.dP,P=e.aC,I=e.da,J=e.dk},null,null],execute:function(){var a=document.createElement("style");a.textContent="[data-v-1cd65fd9] .n-tabs-tab__label{height:24px}[data-v-1cd65fd9] .n-tabs-tab--active{color:#20a53a!important}.icon-box[data-v-5d5ba104]{rotate:-90deg;transform-origin:center;display:flex;justify-content:center;align-items:center;color:#666;background-color:#def7e8;border-radius:50%;width:50px;height:50px;margin:10px auto}:deep(.n-tabs-tab__label){height:24px}:deep(.n-tabs-tab--active){color:#20a53a!important}\n/*$vite$:1*/",document.head.appendChild(a);const O=v(!1),V=v({}),q=async e=>{try{O.value=!0;const{message:a}=await n({hash:e});i(a)&&(V.value=a)}finally{O.value=!1}},E={class:"text-#20a53a"},M={class:"mt-16px"},W=m(_({__name:"index",props:{row:{},onRefresh:{}},setup(e){const{t:a}=x(),l=e,{row:n}=y(l),m=v("all"),p=S({domains:n.value.user_for.sites||[]}),f=v([]),h=v([]),_=w(()=>"matched"===m.value?h.value:f.value),U=({option:e})=>{const a=e.match?"ssl-lock":"ssl-unlock",l=e.match?"text-#20a53a":"text-error";return $(I,{size:5,class:"items-center flex-nowrap!"},{default:()=>[$(c,{name:a,class:l,size:18},null),$("div",{class:"truncate w-full"},[e.label])]})},D=()=>{s({title:"Deploy SSL Certificate",content:p.domains.length?"Are you sure you want to deploy this certificate?":"Are you sure you want to cancel the deployment",onConfirm:async()=>{const{message:e}=await u({hash:n.value.hash,domains:JSON.stringify(p.domains)});i(e)&&(e.faild?d.error(`${a("SSL.index_31")}（${e.faildList.map(e=>e.siteName).join(",")}）`):d.success(a("SSL.index_32")),l.onRefresh())}})},J=e=>e.map(e=>({label:e.name,value:e.name,match:e.match}));return g(()=>{(async()=>{await q(n.value.hash);const e=V.value.sites.filter(e=>e.match),a=V.value.sites.filter(e=>!e.match);f.value=J([...e,...a]),h.value=J(e),p.domains=p.domains.filter(e=>f.value.some(a=>a.value===e))})()}),(e,a)=>{const l=b("i18n-t"),s=T,i=H,u=o,d=r,f=P,h=c,v=t;return L(),k("div",null,[C("div",null,[$(l,{keypath:"SSL.index_26",tag:"span",scope:"global"},{a:j(()=>[C("span",E,z(A(n)?.verify_domains?.join(",")),1)]),_:1}),a[2]||(a[2]=C("span",null," site",-1))]),$(i,{type:"segment",animated:"",value:A(m),"onUpdate:value":a[0]||(a[0]=e=>N(m)?m.value=e:null),class:"my-10px"},{default:j(()=>[$(s,{name:"all"},{default:j(()=>[R(z(e.$t("SSL.index_28")),1)]),_:1}),$(s,{name:"matched"},{default:j(()=>[R(z(e.$t("SSL.index_27")),1)]),_:1})]),_:1},8,["value"]),$(d,{show:A(O)},{default:j(()=>[$(u,{"render-source-label":U,"render-target-label":U,value:A(p).domains,"onUpdate:value":a[1]||(a[1]=e=>A(p).domains=e),options:A(_),"source-filterable":"","virtual-scroll":""},null,8,["value","options"])]),_:1},8,["show"]),C("div",M,[$(f,{type:"primary",onClick:D},{default:j(()=>[R(z(e.$t("SSL.index_29")),1)]),_:1})]),$(v,{class:"mt-20px"},{default:j(()=>[C("li",null,[$(h,{name:"ssl-lock",class:"text-#20a53a",size:18}),a[3]||(a[3]=C("span",{class:"ml-8px"},"This SSL is applicable to the this domain",-1))]),C("li",null,[$(h,{name:"ssl-unlock",class:"text-error",size:18}),a[4]||(a[4]=C("span",{class:"ml-8px"},'After using this SSL, accessing the domain will show a "Not Secure" warning',-1))])]),_:1})])}}}),[["__scopeId","data-v-1cd65fd9"]]),B={key:0,class:"text-#20a53a"},F={class:"icon-box"},G=m(_({__name:"index",props:{row:{}},setup(e){const a=e,{row:l}=y(a),n=S({domains:"",issuer:"",end_date:"",is_match:1}),i=e=>{s({title:"Deploy SSL Certificate",content:0===e?"Are you sure to deploy this SSL certificate to the panel?":"Are you sure you want to restore it?",onConfirm:async()=>{await f({hash:l.value.hash,recover:e}),window.location.href=window.location.href.split("?")[0]+"?_t="+Date.now()}})};return g(()=>{(async()=>{await q(l.value.hash),n.domains=V.value.panel[0].info.subject,n.issuer=V.value.panel[0].info.issuer,n.end_date=V.value.panel[0].info.notAfter,n.is_match=V.value.panel[0].match})()}),(e,a)=>{const s=b("i18n-t"),o=c,u=p,d=I,m=J,f=r,h=P,v=t;return L(),k("div",null,[C("div",null,[$(s,{keypath:"SSL.index_26",tag:"span",scope:"global"},{a:j(()=>[A(l)?(L(),k("span",B,z(A(l).verify_domains.join(",")),1)):U("",!0)]),_:1}),a[2]||(a[2]=C("span",null," panel",-1))]),$(f,{show:A(O),class:"my-16px"},{default:j(()=>[$(m,{type:"info","show-icon":!1},{default:j(()=>[$(d,{class:"py-2px text-12px items-center flex-nowrap!"},{default:j(()=>[a[3]||(a[3]=C("b",{class:"text-nowrap!"},"Current SSL",-1)),$(o,{name:"ssl-lock",class:"text-#20a53a",size:18}),$(u,{vertical:""}),C("div",null,[C("div",null,[R(z(e.$t("Config.Safe.index_37")),1),C("b",null,z(A(n).domains),1)]),C("div",null,[R(z(e.$t("Config.Safe.index_38")),1),C("b",null,z(A(n).issuer),1)]),C("div",null,[R(z(e.$t("Config.Safe.index_39")),1),C("b",null,z(A(n).end_date),1)])])]),_:1,__:[3]})]),_:1}),C("div",F,[$(o,{name:"file-back",size:40,color:"#0a8c46"})]),$(m,{type:A(n).is_match?"success":"error","show-icon":!1},{default:j(()=>[$(d,{class:"py-2px text-12px items-center flex-nowrap! text-primary"},{default:j(()=>[a[4]||(a[4]=C("b",{class:"text-nowrap!"},"New SSL",-1)),A(n).is_match?(L(),D(o,{key:0,name:"ssl-lock",class:"text-#20a53a",size:18})):(L(),D(o,{key:1,name:"ssl-unlock",class:"text-error",size:18})),$(u,{vertical:""}),C("div",null,[C("div",null,[R(z(e.$t("Config.Safe.index_37")),1),C("b",null,z(A(l).verify_domains.join(",")),1)]),C("div",null,[R(z(e.$t("Config.Safe.index_38")),1),C("b",null,z(A(l).provider+" "+A(l).issuer),1)]),C("div",null,[R(z(e.$t("Config.Safe.index_39")),1),C("b",null,z(A(l).end_date),1)])])]),_:1,__:[4]})]),_:1},8,["type"])]),_:1},8,["show"]),C("div",null,[$(h,{type:"primary",onClick:a[0]||(a[0]=e=>i(0))},{default:j(()=>[R(z(e.$t("SSL.index_29")),1)]),_:1})]),$(u,{class:"my-16px!"}),$(d,{class:"items-center"},{default:j(()=>[a[6]||(a[6]=C("span",{class:"text-desc"},"Restore to panel self-signed certificate?",-1)),$(h,{type:"primary",ghost:"",onClick:a[1]||(a[1]=e=>i(1))},{default:j(()=>a[5]||(a[5]=[R("Restore",-1)])),_:1,__:[5]})]),_:1,__:[6]}),$(v,{class:"mt-20px"},{default:j(()=>[C("li",null,[$(o,{name:"ssl-lock",class:"text-#20a53a",size:18}),a[7]||(a[7]=C("span",{class:"ml-8px"},"This SSL is applicable to the this panel",-1))]),C("li",null,[$(o,{name:"ssl-unlock",class:"text-error",size:18}),a[8]||(a[8]=C("span",{class:"ml-8px"},'After using this SSL, accessing the panel will show a "Not Secure" warning',-1))])]),_:1})])}}}),[["__scopeId","data-v-5d5ba104"]]),K={class:"text-#20a53a"},Q={class:"mt-16px"},X=_({__name:"index",props:{row:{},onRefresh:{}},setup(e){const{t:a}=x(),l=e,{row:n}=y(l),u=v("all"),m=S({domains:n.value.user_for.mails}),p=v([]),f=v([]),_=w(()=>"matched"===u.value?f.value:p.value),g=({option:e})=>{const a=e.match?"ssl-lock":"ssl-unlock",l=e.match?"text-#20a53a":"text-error";return $(I,{size:5,class:"items-center flex-nowrap!"},{default:()=>[$(c,{name:a,class:l,size:18},null),$("div",{class:"truncate w-full"},[e.label])]})},U=()=>{s({title:"Deploy SSL Certificate",content:m.domains.length?"Are you sure you want to deploy this certificate?":"Are you sure you want to cancel the deployment",onConfirm:async()=>{try{const{message:e}=await h({hash:n.value.hash,domains:JSON.stringify(m.domains)});i(e)&&(e.faild?d.error(`${a("SSL.index_31")}（${e.faildList.map(e=>e.siteName).join(",")}）`):d.success(a("SSL.index_32")))}finally{l.onRefresh()}}})},D=e=>e.map(e=>({label:e.domain,value:e.domain,match:e.match}));return(async()=>{await q(n.value.hash);const e=V.value.mails.filter(e=>e.match),a=V.value.mails.filter(e=>!e.match);p.value=D([...e,...a]),f.value=D(e)})(),(e,a)=>{const l=b("i18n-t"),s=T,i=H,d=o,p=r,f=P,h=c,v=t;return L(),k("div",null,[C("div",null,[$(l,{keypath:"SSL.index_26",tag:"span",scope:"global"},{a:j(()=>[C("span",K,z(A(n)?.verify_domains?.join(",")),1)]),_:1}),a[2]||(a[2]=C("span",null," mail",-1))]),$(i,{type:"segment",animated:"",value:A(u),"onUpdate:value":a[0]||(a[0]=e=>N(u)?u.value=e:null),class:"my-10px"},{default:j(()=>[$(s,{name:"all"},{default:j(()=>[R(z(e.$t("SSL.index_28")),1)]),_:1}),$(s,{name:"matched"},{default:j(()=>[R(z(e.$t("SSL.index_27")),1)]),_:1})]),_:1},8,["value"]),$(p,{show:A(O)},{default:j(()=>[$(d,{"render-source-label":g,"render-target-label":g,value:A(m).domains,"onUpdate:value":a[1]||(a[1]=e=>A(m).domains=e),options:A(_),"source-filterable":"","virtual-scroll":""},null,8,["value","options"])]),_:1},8,["show"]),C("div",Q,[$(f,{type:"primary",onClick:U},{default:j(()=>[R(z(e.$t("SSL.index_29")),1)]),_:1})]),$(v,{class:"mt-20px"},{default:j(()=>[C("li",null,[$(h,{name:"ssl-lock",class:"text-#20a53a",size:18}),a[3]||(a[3]=C("span",{class:"ml-8px"},"This SSL is applicable to the this domain",-1))]),C("li",null,[$(h,{name:"ssl-unlock",class:"text-error",size:18}),a[4]||(a[4]=C("span",{class:"ml-8px"},'After using this SSL, accessing the domain will show a "Not Secure" warning',-1))])]),_:1})])}}});e("default",_({__name:"index",props:{data:{}},setup(e){const{t:a}=x(),t=e,{row:s,onRefresh:n,menu:i}=t.data,o=v("site"),r=[{key:"site",label:a("Home.index_68"),component:W,data:{row:s,onRefresh:n}},{key:"mail",label:"Mail",component:X,data:{row:s,onRefresh:n}},{key:"panel",label:"Panel",component:G,data:{row:s}}];return o.value=i||"site",(e,a)=>{const t=l;return L(),D(t,{value:A(o),"onUpdate:value":a[0]||(a[0]=e=>N(o)?o.value=e:null),data:r},null,8,["value"])}}}))}}});
