System.register(["./index.vue_vue_type_script_setup_true_lang-legacy.js?v=1769066082311","./page_layout-legacy.js?v=1769066082311","./public-legacy.js?v=1769066082311","./site-legacy.js?v=1769066082311","./index-legacy50.js?v=1769066082311","./vue-legacy.js?v=1769066082311","./naive-legacy.js?v=1769066082311","./common-legacy.js?v=1769066082311","./__commonjsHelpers__-legacy.js?v=1769066082311","./index-legacy.js?v=1769066082311","./index.vue_vue_type_script_setup_true_lang-legacy5.js?v=1769066082311","./index.vue_vue_type_script_setup_true_lang-legacy6.js?v=1769066082311","./index.vue_vue_type_script_setup_true_lang-legacy7.js?v=1769066082311","./mail-legacy.js?v=1769066082311"],function(e,a){"use strict";var n,l,i,s,t,o,r,u,p,d,_,c,v,m,g,y,f,h,j,x,b,w,S,M,W,k,P;return{setters:[e=>{n=e._},e=>{l=e.m,i=e.d},e=>{s=e.d},e=>{t=e.c},e=>{o=e.i},e=>{r=e.k,u=e.P,p=e.r,d=e.e,_=e.am,c=e.R,v=e.V,m=e.W,g=e.a3,y=e.S,f=e.a2,h=e.an,j=e.U,x=e.j,b=e.a4,w=e.F},e=>{S=e.dS,M=e.av,W=e.au,k=e.d_,P=e.dW},null,null,null,null,null,null,null],execute:function(){const a={class:"p-20px pt-24px pb-8px"},$={class:"w-240px"},U={class:"w-240px"};e("default",r({__name:"install",props:{domain:{type:Object}},emits:["refresh"],setup(e,{expose:r,emit:C}){const E=C,{t:H}=u(),I=p(null),R=d({domain:"",php_version:null}),F={domain:{trigger:"change",validator:()=>""!==R.domain.trim()||new Error(H("Mail.Setting.index_20"))},php_version:{trigger:"change",validator:()=>null!==R.php_version||new Error(H("Mail.Setting.index_21"))}},L=p([]),O=async()=>{const{message:e}=await t();if(i(e)){L.value=e.versions.reverse().map(e=>({label:e.name,value:e.version}));const a=e.versions.findIndex(e=>"74"===e.version);R.php_version=-1!==a?e.versions[a].version:e.versions[0].version}},{loading:V,setLoading:q}=s(),z=_();return(async()=>{try{q(!0),await Promise.all([O()])}finally{q(!1)}})(),r({onConfirm:async()=>{await(I.value?.validate()),await o({webmail_domain:`${R.domain}.${e.domain?.domain||""}`,php_version:R.php_version||"",domain:e.domain?.domain||""});const{close:a}=l.success({content:()=>m(w,null,[x("WebMail Installation Successful, "),m("br",null,null),x(' Manage WebMail view in "'),m("a",{class:"bt-link",href:"javascript:;",onClick:()=>{z.push("/site/php"),a()}},[x("Website > PHP Project")]),x('"')]),close:!0,maxWidth:480});E("refresh")}}),(l,i)=>{const s=W,t=k,o=M,r=S,u=P,p=n;return v(),c("div",a,[m(p,{ref_key:"formRef",ref:I,model:j(R),rules:F},{default:g(()=>[m(r,{label:l.$t("Mail.Setting.index_18"),path:"domain"},{default:g(()=>[y("div",$,[m(o,null,{default:g(()=>[m(s,{value:j(R).domain,"onUpdate:value":i[0]||(i[0]=e=>j(R).domain=e)},null,8,["value"]),e.domain?.domain?(v(),f(t,{key:0},{default:g(()=>[x(" ."+b(e.domain?.domain),1)]),_:1})):h("",!0)]),_:1})])]),_:1},8,["label"]),m(r,{label:l.$t("Mail.Setting.index_19"),path:"php_version"},{default:g(()=>[y("div",U,[m(u,{value:j(R).php_version,"onUpdate:value":i[1]||(i[1]=e=>j(R).php_version=e),loading:j(V),options:j(L)},null,8,["value","loading","options"])])]),_:1},8,["label"])]),_:1},8,["model"])])}}}))}}});
