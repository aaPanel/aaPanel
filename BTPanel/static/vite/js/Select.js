import{l as e,x as n,E as o,G as t,k as l,r as i,p as r,L as a,y as s,a as c,J as d,d as u,w as p,A as h,n as v,I as b,F as f,B as g,M as m}from"./vue.js?v=1723125373998";import{c4 as w,c5 as x,b0 as y,bQ as C,bZ as S,c6 as F,c0 as z,bV as T,c7 as O,bz as R,aK as k,bK as P,c8 as M,b5 as B,c9 as I,aE as A,aH as E,aG as D,aC as L,aW as N,aL as _,aN as j,aM as H,aO as W,aP as K,bo as V,bX as U,bR as $,aQ as q,ca as G,aT as X,bq as Y,b2 as Q,cb as Z,bA as J,bn as ee,cc as ne,cd as oe,ce as te,bb as le,aX as ie,bH as re,cf as ae,bN as se,cg as ce,bI as de,ch as ue,ci as pe,cj as he,ck as ve,bB as be,cl as fe,cm as ge,aZ as me}from"./index.js?v=1723125373998";import{_ as we}from"./Tag.js?v=1723125373998";import{e as xe,_ as ye}from"./Empty.js?v=1723125373998";function Ce(e){switch(typeof e){case"string":return e||void 0;case"number":return String(e);default:return}}function Se(e){const n=e.filter((e=>void 0!==e));if(0!==n.length)return 1===n.length?n[0]:n=>{e.forEach((e=>{e&&e(n)}))}}function Fe(e){return e&-e}class ze{constructor(e,n){this.l=e,this.min=n;const o=new Array(e+1);for(let t=0;t<e+1;++t)o[t]=0;this.ft=o}add(e,n){if(0===n)return;const{l:o,ft:t}=this;for(e+=1;e<=o;)t[e]+=n,e+=Fe(e)}get(e){return this.sum(e+1)-this.sum(e)}sum(e){if(void 0===e&&(e=this.l),e<=0)return 0;const{ft:n,min:o,l:t}=this;if(e>t)throw new Error("[FinweckTree.sum]: `i` is larger than length.");let l=e*o;for(;e>0;)l+=n[e],e-=Fe(e);return l}getBound(e){let n=0,o=this.l;for(;o>n;){const t=Math.floor((n+o)/2),l=this.sum(t);if(l>e)o=t;else{if(!(l<e))return t;if(n===t)return this.sum(n+1)<=e?n+1:t;n=t}}return n}}let Te,Oe;function Re(){return"undefined"==typeof document?1:(void 0===Oe&&(Oe="chrome"in window?window.devicePixelRatio:1),Oe)}const ke=F(".v-vl",{maxHeight:"inherit",height:"100%",overflow:"auto",minWidth:"1px"},[F("&:not(.v-vl--show-scrollbar)",{scrollbarWidth:"none"},[F("&::-webkit-scrollbar, &::-webkit-scrollbar-track-piece, &::-webkit-scrollbar-thumb",{width:0,height:0,display:"none"})])]),Pe=e({name:"VirtualList",inheritAttrs:!1,props:{showScrollbar:{type:Boolean,default:!0},items:{type:Array,default:()=>[]},itemSize:{type:Number,required:!0},itemResizable:Boolean,itemsStyle:[String,Object],visibleItemsTag:{type:[String,Object],default:"div"},visibleItemsProps:Object,ignoreItemResize:Boolean,onScroll:Function,onWheel:Function,onResize:Function,defaultScrollKey:[Number,String],defaultScrollIndex:Number,keyField:{type:String,default:"key"},paddingTop:{type:[Number,String],default:0},paddingBottom:{type:[Number,String],default:0}},setup(e){const r=w();ke.mount({id:"vueuc/virtual-list",head:!0,anchorMetaName:x,ssr:r}),n((()=>{const{defaultScrollIndex:n,defaultScrollKey:o}=e;null!=n?S({index:n}):null!=o&&S({key:o})}));let a=!1,s=!1;o((()=>{a=!1,s?S({top:f.value,left:b}):s=!0})),t((()=>{a=!0,s||(s=!0)}));const c=l((()=>{const n=new Map,{keyField:o}=e;return e.items.forEach(((e,t)=>{n.set(e[o],t)})),n})),d=i(null),u=i(void 0),p=new Map,h=l((()=>{const{items:n,itemSize:o,keyField:t}=e,l=new ze(n.length,o);return n.forEach(((e,n)=>{const o=e[t],i=p.get(o);void 0!==i&&l.add(n,i)})),l})),v=i(0);let b=0;const f=i(0),g=y((()=>Math.max(h.value.getBound(f.value-C(e.paddingTop))-1,0))),m=l((()=>{const{value:n}=u;if(void 0===n)return[];const{items:o,itemSize:t}=e,l=g.value,i=Math.min(l+Math.ceil(n/t+1),o.length-1),r=[];for(let e=l;e<=i;++e)r.push(o[e]);return r})),S=(e,n)=>{if("number"==typeof e)return void k(e,n,"auto");const{left:o,top:t,index:l,key:i,position:r,behavior:a,debounce:s=!0}=e;if(void 0!==o||void 0!==t)k(o,t,a);else if(void 0!==l)R(l,a,s);else if(void 0!==i){const e=c.value.get(i);void 0!==e&&R(e,a,s)}else"bottom"===r?k(0,Number.MAX_SAFE_INTEGER,a):"top"===r&&k(0,0,a)};let F,O=null;function R(n,o,t){const{value:l}=h,i=l.sum(n)+C(e.paddingTop);if(t){F=n,null!==O&&window.clearTimeout(O),O=window.setTimeout((()=>{F=void 0,O=null}),16);const{scrollTop:e,offsetHeight:t}=d.value;if(i>e){const r=l.get(n);i+r<=e+t||d.value.scrollTo({left:0,top:i+r-t,behavior:o})}else d.value.scrollTo({left:0,top:i,behavior:o})}else d.value.scrollTo({left:0,top:i,behavior:o})}function k(e,n,o){d.value.scrollTo({left:e,top:n,behavior:o})}const P=!("undefined"!=typeof document&&(void 0===Te&&(Te="matchMedia"in window&&window.matchMedia("(pointer:coarse)").matches),Te));let M=!1;function B(){const{value:e}=d;null!=e&&(f.value=e.scrollTop,b=e.scrollLeft)}function I(e){let n=e;for(;null!==n;){if("none"===n.style.display)return!0;n=n.parentElement}return!1}return{listHeight:u,listStyle:{overflow:"auto"},keyToIndex:c,itemsStyle:l((()=>{const{itemResizable:n}=e,o=T(h.value.sum());return v.value,[e.itemsStyle,{boxSizing:"content-box",height:n?"":o,minHeight:n?o:"",paddingTop:T(e.paddingTop),paddingBottom:T(e.paddingBottom)}]})),visibleItemsStyle:l((()=>(v.value,{transform:"translateY(".concat(T(h.value.sum(g.value)),")")}))),viewportItems:m,listElRef:d,itemsElRef:i(null),scrollTo:S,handleListResize:function(n){if(a)return;if(I(n.target))return;if(n.contentRect.height===u.value)return;u.value=n.contentRect.height;const{onResize:o}=e;void 0!==o&&o(n)},handleListScroll:function(n){var o;null===(o=e.onScroll)||void 0===o||o.call(e,n),P&&M||B()},handleListWheel:function(n){var o;if(null===(o=e.onWheel)||void 0===o||o.call(e,n),P){const e=d.value;if(null!=e){if(0===n.deltaX){if(0===e.scrollTop&&n.deltaY<=0)return;if(e.scrollTop+e.offsetHeight>=e.scrollHeight&&n.deltaY>=0)return}n.preventDefault(),e.scrollTop+=n.deltaY/Re(),e.scrollLeft+=n.deltaX/Re(),B(),M=!0,z((()=>{M=!1}))}}},handleItemResize:function(n,o){var t,l,i;if(a)return;if(e.ignoreItemResize)return;if(I(o.target))return;const{value:r}=h,s=c.value.get(n),u=r.get(s),b=null!==(i=null===(l=null===(t=o.borderBoxSize)||void 0===t?void 0:t[0])||void 0===l?void 0:l.blockSize)&&void 0!==i?i:o.contentRect.height;if(b===u)return;0===b-e.itemSize?p.delete(n):p.set(n,b-e.itemSize);const f=b-u;if(0===f)return;r.add(s,f);const g=d.value;if(null!=g){if(void 0===F){const e=r.sum(s);g.scrollTop>e&&g.scrollBy(0,f)}else if(s<F)g.scrollBy(0,f);else if(s===F){b+r.sum(s)>g.scrollTop+g.offsetHeight&&g.scrollBy(0,f)}B()}v.value++}}},render(){const{itemResizable:e,keyField:n,keyToIndex:o,visibleItemsTag:t}=this;return r(S,{onResize:this.handleListResize},{default:()=>{var l,i;return r("div",a(this.$attrs,{class:["v-vl",this.showScrollbar&&"v-vl--show-scrollbar"],onScroll:this.handleListScroll,onWheel:this.handleListWheel,ref:"listElRef"}),[0!==this.items.length?r("div",{ref:"itemsElRef",class:"v-vl-items",style:this.itemsStyle},[r(t,Object.assign({class:"v-vl-visible-items",style:this.visibleItemsStyle},this.visibleItemsProps),{default:()=>this.viewportItems.map((t=>{const l=t[n],i=o.get(l),a=this.$slots.default({item:t,index:i})[0];return e?r(S,{key:l,onResize:e=>this.handleItemResize(l,e)},{default:()=>a}):(a.key=l,a)}))})]):null===(i=(l=this.$slots).empty)||void 0===i?void 0:i.call(l)])}})}});function Me(e,o){o&&(n((()=>{const{value:n}=e;n&&O.registerHandler(n,o)})),s((()=>{const{value:n}=e;n&&O.unregisterHandler(n)})))}const Be=e({name:"Checkmark",render:()=>r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},r("g",{fill:"none"},r("path",{d:"M14.046 3.486a.75.75 0 0 1-.032 1.06l-7.93 7.474a.85.85 0 0 1-1.188-.022l-2.68-2.72a.75.75 0 1 1 1.068-1.053l2.234 2.267l7.468-7.038a.75.75 0 0 1 1.06.032z",fill:"currentColor"})))}),Ie=e({props:{onFocus:Function,onBlur:Function},setup:e=>()=>r("div",{style:"width: 0; height: 0",tabindex:0,onFocus:e.onFocus,onBlur:e.onBlur})}),Ae={height:"calc(var(--n-option-height) * 7.6)",paddingSmall:"4px 0",paddingMedium:"4px 0",paddingLarge:"4px 0",paddingHuge:"4px 0",optionPaddingSmall:"0 12px",optionPaddingMedium:"0 12px",optionPaddingLarge:"0 12px",optionPaddingHuge:"0 12px",loadingSize:"18px"},Ee=R({name:"InternalSelectMenu",common:k,peers:{Scrollbar:P,Empty:xe},self:e=>{const{borderRadius:n,popoverColor:o,textColor3:t,dividerColor:l,textColor2:i,primaryColorPressed:r,textColorDisabled:a,primaryColor:s,opacityDisabled:c,hoverColor:d,fontSizeSmall:u,fontSizeMedium:p,fontSizeLarge:h,fontSizeHuge:v,heightSmall:b,heightMedium:f,heightLarge:g,heightHuge:m}=e;return Object.assign(Object.assign({},Ae),{optionFontSizeSmall:u,optionFontSizeMedium:p,optionFontSizeLarge:h,optionFontSizeHuge:v,optionHeightSmall:b,optionHeightMedium:f,optionHeightLarge:g,optionHeightHuge:m,borderRadius:n,color:o,groupHeaderTextColor:t,actionDividerColor:l,optionTextColor:i,optionTextColorPressed:r,optionTextColorDisabled:a,optionTextColorActive:s,optionOpacityDisabled:c,optionCheckColor:s,optionColorPending:d,optionColorActive:"rgba(0, 0, 0, 0)",optionColorActivePending:d,actionTextColor:i,loadingColor:s})}});const De=e({name:"NBaseSelectOption",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(e){const{valueRef:n,pendingTmNodeRef:o,multipleRef:t,valueSetRef:l,renderLabelRef:i,renderOptionRef:r,labelFieldRef:a,valueFieldRef:s,showCheckmarkRef:d,nodePropsRef:u,handleOptionClick:p,handleOptionMouseEnter:h}=c(I),v=y((()=>{const{value:n}=o;return!!n&&e.tmNode.key===n.key}));return{multiple:t,isGrouped:y((()=>{const{tmNode:n}=e,{parent:o}=n;return o&&"group"===o.rawNode.type})),showCheckmark:d,nodeProps:u,isPending:v,isSelected:y((()=>{const{value:o}=n,{value:i}=t;if(null===o)return!1;const r=e.tmNode.rawNode[s.value];if(i){const{value:e}=l;return e.has(r)}return o===r})),labelField:a,renderLabel:i,renderOption:r,handleMouseMove:function(n){const{tmNode:o}=e,{value:t}=v;o.disabled||t||h(n,o)},handleMouseEnter:function(n){const{tmNode:o}=e;o.disabled||h(n,o)},handleClick:function(n){const{tmNode:o}=e;o.disabled||p(n,o)}}},render(){const{clsPrefix:e,tmNode:{rawNode:n},isSelected:o,isPending:t,isGrouped:l,showCheckmark:i,nodeProps:a,renderOption:s,renderLabel:c,handleClick:u,handleMouseEnter:p,handleMouseMove:h}=this,v=function(e,n){return r(d,{name:"fade-in-scale-up-transition"},{default:()=>e?r(B,{clsPrefix:n,class:"".concat(n,"-base-select-option__check")},{default:()=>r(Be)}):null})}(o,e),b=c?[c(n,o),i&&v]:[M(n[this.labelField],n,o),i&&v],f=null==a?void 0:a(n),g=r("div",Object.assign({},f,{class:["".concat(e,"-base-select-option"),n.class,null==f?void 0:f.class,{["".concat(e,"-base-select-option--disabled")]:n.disabled,["".concat(e,"-base-select-option--selected")]:o,["".concat(e,"-base-select-option--grouped")]:l,["".concat(e,"-base-select-option--pending")]:t,["".concat(e,"-base-select-option--show-checkmark")]:i}],style:[(null==f?void 0:f.style)||"",n.style||""],onClick:Se([u,null==f?void 0:f.onClick]),onMouseenter:Se([p,null==f?void 0:f.onMouseenter]),onMousemove:Se([h,null==f?void 0:f.onMousemove])}),r("div",{class:"".concat(e,"-base-select-option__content")},b));return n.render?n.render({node:g,option:n,selected:o}):s?s({node:g,option:n,selected:o}):g}}),Le=e({name:"NBaseSelectGroupHeader",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(){const{renderLabelRef:e,renderOptionRef:n,labelFieldRef:o,nodePropsRef:t}=c(I);return{labelField:o,nodeProps:t,renderLabel:e,renderOption:n}},render(){const{clsPrefix:e,renderLabel:n,renderOption:o,nodeProps:t,tmNode:{rawNode:l}}=this,i=null==t?void 0:t(l),a=n?n(l,!1):M(l[this.labelField],l,!1),s=r("div",Object.assign({},i,{class:["".concat(e,"-base-select-group-header"),null==i?void 0:i.class]}),a);return l.render?l.render({node:s,option:l}):o?o({node:s,option:l,selected:!1}):s}}),Ne=A("base-select-menu","\n line-height: 1.5;\n outline: none;\n z-index: 0;\n position: relative;\n border-radius: var(--n-border-radius);\n transition:\n background-color .3s var(--n-bezier),\n box-shadow .3s var(--n-bezier);\n background-color: var(--n-color);\n",[A("scrollbar","\n max-height: var(--n-height);\n "),A("virtual-list","\n max-height: var(--n-height);\n "),A("base-select-option","\n min-height: var(--n-option-height);\n font-size: var(--n-option-font-size);\n display: flex;\n align-items: center;\n ",[E("content","\n z-index: 1;\n white-space: nowrap;\n text-overflow: ellipsis;\n overflow: hidden;\n ")]),A("base-select-group-header","\n min-height: var(--n-option-height);\n font-size: .93em;\n display: flex;\n align-items: center;\n "),A("base-select-menu-option-wrapper","\n position: relative;\n width: 100%;\n "),E("loading, empty","\n display: flex;\n padding: 12px 32px;\n flex: 1;\n justify-content: center;\n "),E("loading","\n color: var(--n-loading-color);\n font-size: var(--n-loading-size);\n "),E("header","\n padding: 8px var(--n-option-padding-left);\n font-size: var(--n-option-font-size);\n transition: \n color .3s var(--n-bezier),\n border-color .3s var(--n-bezier);\n border-bottom: 1px solid var(--n-action-divider-color);\n color: var(--n-action-text-color);\n "),E("action","\n padding: 8px var(--n-option-padding-left);\n font-size: var(--n-option-font-size);\n transition: \n color .3s var(--n-bezier),\n border-color .3s var(--n-bezier);\n border-top: 1px solid var(--n-action-divider-color);\n color: var(--n-action-text-color);\n "),A("base-select-group-header","\n position: relative;\n cursor: default;\n padding: var(--n-option-padding);\n color: var(--n-group-header-text-color);\n "),A("base-select-option","\n cursor: pointer;\n position: relative;\n padding: var(--n-option-padding);\n transition:\n color .3s var(--n-bezier),\n opacity .3s var(--n-bezier);\n box-sizing: border-box;\n color: var(--n-option-text-color);\n opacity: 1;\n ",[D("show-checkmark","\n padding-right: calc(var(--n-option-padding-right) + 20px);\n "),L("&::before",'\n content: "";\n position: absolute;\n left: 4px;\n right: 4px;\n top: 0;\n bottom: 0;\n border-radius: var(--n-border-radius);\n transition: background-color .3s var(--n-bezier);\n '),L("&:active","\n color: var(--n-option-text-color-pressed);\n "),D("grouped","\n padding-left: calc(var(--n-option-padding-left) * 1.5);\n "),D("pending",[L("&::before","\n background-color: var(--n-option-color-pending);\n ")]),D("selected","\n color: var(--n-option-text-color-active);\n ",[L("&::before","\n background-color: var(--n-option-color-active);\n "),D("pending",[L("&::before","\n background-color: var(--n-option-color-active-pending);\n ")])]),D("disabled","\n cursor: not-allowed;\n ",[N("selected","\n color: var(--n-option-text-color-disabled);\n "),D("selected","\n opacity: var(--n-option-opacity-disabled);\n ")]),E("check","\n font-size: 16px;\n position: absolute;\n right: calc(var(--n-option-padding-right) - 4px);\n top: calc(50% - 7px);\n color: var(--n-option-check-color);\n transition: color .3s var(--n-bezier);\n ",[_({enterScale:"0.5"})])])]),_e=e({name:"InternalSelectMenu",props:Object.assign(Object.assign({},j.props),{clsPrefix:{type:String,required:!0},scrollable:{type:Boolean,default:!0},treeMate:{type:Object,required:!0},multiple:Boolean,size:{type:String,default:"medium"},value:{type:[String,Number,Array],default:null},autoPending:Boolean,virtualScroll:{type:Boolean,default:!0},show:{type:Boolean,default:!0},labelField:{type:String,default:"label"},valueField:{type:String,default:"value"},loading:Boolean,focusable:Boolean,renderLabel:Function,renderOption:Function,nodeProps:Function,showCheckmark:{type:Boolean,default:!0},onMousedown:Function,onScroll:Function,onFocus:Function,onBlur:Function,onKeyup:Function,onKeydown:Function,onTabOut:Function,onMouseenter:Function,onMouseleave:Function,onResize:Function,resetMenuOnOptionsChange:{type:Boolean,default:!0},inlineThemeDisabled:Boolean,onToggle:Function}),setup(e){const{mergedClsPrefixRef:o,mergedRtlRef:t}=H(e),r=W("InternalSelectMenu",t,o),a=j("InternalSelectMenu","-internal-select-menu",Ne,Ee,e,u(e,"clsPrefix")),c=i(null),d=i(null),b=i(null),f=l((()=>e.treeMate.getFlattenedNodes())),g=l((()=>G(f.value))),m=i(null);function w(){const{value:n}=m;n&&!e.treeMate.getNode(n.key)&&(m.value=null)}let x;p((()=>e.show),(n=>{n?x=p((()=>e.treeMate),(()=>{e.resetMenuOnOptionsChange?(e.autoPending?function(){const{treeMate:n}=e;let o=null;const{value:t}=e;null===t?o=n.getFirstAvailableNode():(o=e.multiple?n.getNode((t||[])[(t||[]).length-1]):n.getNode(t),o&&!o.disabled||(o=n.getFirstAvailableNode())),O(o||null)}():w(),v(R)):w()}),{immediate:!0}):null==x||x()}),{immediate:!0}),s((()=>{null==x||x()}));const y=l((()=>C(a.value.self[X("optionHeight",e.size)]))),S=l((()=>Y(a.value.self[X("padding",e.size)]))),F=l((()=>e.multiple&&Array.isArray(e.value)?new Set(e.value):new Set)),z=l((()=>{const e=f.value;return e&&0===e.length}));function T(n){const{onScroll:o}=e;o&&o(n)}function O(e,n=!1){m.value=e,n&&R()}function R(){var n,o;const t=m.value;if(!t)return;const l=g.value(t.key);null!==l&&(e.virtualScroll?null===(n=d.value)||void 0===n||n.scrollTo({index:l}):null===(o=b.value)||void 0===o||o.scrollTo({index:l,elSize:y.value}))}h(I,{handleOptionMouseEnter:function(e,n){n.disabled||O(n,!1)},handleOptionClick:function(n,o){o.disabled||function(n){const{onToggle:o}=e;o&&o(n)}(o)},valueSetRef:F,pendingTmNodeRef:m,nodePropsRef:u(e,"nodeProps"),showCheckmarkRef:u(e,"showCheckmark"),multipleRef:u(e,"multiple"),valueRef:u(e,"value"),renderLabelRef:u(e,"renderLabel"),renderOptionRef:u(e,"renderOption"),labelFieldRef:u(e,"labelField"),valueFieldRef:u(e,"valueField")}),h(Z,c),n((()=>{const{value:e}=b;e&&e.sync()}));const k=l((()=>{const{size:n}=e,{common:{cubicBezierEaseInOut:o},self:{height:t,borderRadius:l,color:i,groupHeaderTextColor:r,actionDividerColor:s,optionTextColorPressed:c,optionTextColor:d,optionTextColorDisabled:u,optionTextColorActive:p,optionOpacityDisabled:h,optionCheckColor:v,actionTextColor:b,optionColorPending:f,optionColorActive:g,loadingColor:m,loadingSize:w,optionColorActivePending:x,[X("optionFontSize",n)]:y,[X("optionHeight",n)]:C,[X("optionPadding",n)]:S}}=a.value;return{"--n-height":t,"--n-action-divider-color":s,"--n-action-text-color":b,"--n-bezier":o,"--n-border-radius":l,"--n-color":i,"--n-option-font-size":y,"--n-group-header-text-color":r,"--n-option-check-color":v,"--n-option-color-pending":f,"--n-option-color-active":g,"--n-option-color-active-pending":x,"--n-option-height":C,"--n-option-opacity-disabled":h,"--n-option-text-color":d,"--n-option-text-color-active":p,"--n-option-text-color-disabled":u,"--n-option-text-color-pressed":c,"--n-option-padding":S,"--n-option-padding-left":Y(S,"left"),"--n-option-padding-right":Y(S,"right"),"--n-loading-color":m,"--n-loading-size":w}})),{inlineThemeDisabled:P}=e,M=P?K("internal-select-menu",l((()=>e.size[0])),k,e):void 0,B={selfRef:c,next:function(){const{value:e}=m;e&&O(e.getNext({loop:!0}),!0)},prev:function(){const{value:e}=m;e&&O(e.getPrev({loop:!0}),!0)},getPendingTmNode:function(){const{value:e}=m;return e||null}};return Me(c,e.onResize),Object.assign({mergedTheme:a,mergedClsPrefix:o,rtlEnabled:r,virtualListRef:d,scrollbarRef:b,itemSize:y,padding:S,flattenedNodes:f,empty:z,virtualListContainer(){const{value:e}=d;return null==e?void 0:e.listElRef},virtualListContent(){const{value:e}=d;return null==e?void 0:e.itemsElRef},doScroll:T,handleFocusin:function(n){var o,t;(null===(o=c.value)||void 0===o?void 0:o.contains(n.target))&&(null===(t=e.onFocus)||void 0===t||t.call(e,n))},handleFocusout:function(n){var o,t;(null===(o=c.value)||void 0===o?void 0:o.contains(n.relatedTarget))||null===(t=e.onBlur)||void 0===t||t.call(e,n)},handleKeyUp:function(n){var o;Q(n,"action")||null===(o=e.onKeyup)||void 0===o||o.call(e,n)},handleKeyDown:function(n){var o;Q(n,"action")||null===(o=e.onKeydown)||void 0===o||o.call(e,n)},handleMouseDown:function(n){var o;null===(o=e.onMousedown)||void 0===o||o.call(e,n),e.focusable||n.preventDefault()},handleVirtualListResize:function(){var e;null===(e=b.value)||void 0===e||e.sync()},handleVirtualListScroll:function(e){var n;null===(n=b.value)||void 0===n||n.sync(),T(e)},cssVars:P?void 0:k,themeClass:null==M?void 0:M.themeClass,onRender:null==M?void 0:M.onRender},B)},render(){const{$slots:e,virtualScroll:n,clsPrefix:o,mergedTheme:t,themeClass:l,onRender:i}=this;return null==i||i(),r("div",{ref:"selfRef",tabindex:this.focusable?0:-1,class:["".concat(o,"-base-select-menu"),this.rtlEnabled&&"".concat(o,"-base-select-menu--rtl"),l,this.multiple&&"".concat(o,"-base-select-menu--multiple")],style:this.cssVars,onFocusin:this.handleFocusin,onFocusout:this.handleFocusout,onKeyup:this.handleKeyUp,onKeydown:this.handleKeyDown,onMousedown:this.handleMouseDown,onMouseenter:this.onMouseenter,onMouseleave:this.onMouseleave},V(e.header,(e=>e&&r("div",{class:"".concat(o,"-base-select-menu__header"),"data-header":!0,key:"header"},e))),this.loading?r("div",{class:"".concat(o,"-base-select-menu__loading")},r(U,{clsPrefix:o,strokeWidth:20})):this.empty?r("div",{class:"".concat(o,"-base-select-menu__empty"),"data-empty":!0},q(e.empty,(()=>[r(ye,{theme:t.peers.Empty,themeOverrides:t.peerOverrides.Empty})]))):r($,{ref:"scrollbarRef",theme:t.peers.Scrollbar,themeOverrides:t.peerOverrides.Scrollbar,scrollable:this.scrollable,container:n?this.virtualListContainer:void 0,content:n?this.virtualListContent:void 0,onScroll:n?void 0:this.doScroll},{default:()=>n?r(Pe,{ref:"virtualListRef",class:"".concat(o,"-virtual-list"),items:this.flattenedNodes,itemSize:this.itemSize,showScrollbar:!1,paddingTop:this.padding.top,paddingBottom:this.padding.bottom,onResize:this.handleVirtualListResize,onScroll:this.handleVirtualListScroll,itemResizable:!0},{default:({item:e})=>e.isGroup?r(Le,{key:e.key,clsPrefix:o,tmNode:e}):e.ignored?null:r(De,{clsPrefix:o,key:e.key,tmNode:e})}):r("div",{class:"".concat(o,"-base-select-menu-option-wrapper"),style:{paddingTop:this.padding.top,paddingBottom:this.padding.bottom}},this.flattenedNodes.map((e=>e.isGroup?r(Le,{key:e.key,clsPrefix:o,tmNode:e}):r(De,{clsPrefix:o,key:e.key,tmNode:e}))))}),V(e.action,(e=>e&&[r("div",{class:"".concat(o,"-base-select-menu__action"),"data-action":!0,key:"action"},e),r(Ie,{onFocus:this.onTabOut,key:"focus-detector"})])))}}),je={paddingSingle:"0 26px 0 12px",paddingMultiple:"3px 26px 0 12px",clearSize:"16px",arrowSize:"16px"},He=R({name:"InternalSelection",common:k,peers:{Popover:J},self:e=>{const{borderRadius:n,textColor2:o,textColorDisabled:t,inputColor:l,inputColorDisabled:i,primaryColor:r,primaryColorHover:a,warningColor:s,warningColorHover:c,errorColor:d,errorColorHover:u,borderColor:p,iconColor:h,iconColorDisabled:v,clearColor:b,clearColorHover:f,clearColorPressed:g,placeholderColor:m,placeholderColorDisabled:w,fontSizeTiny:x,fontSizeSmall:y,fontSizeMedium:C,fontSizeLarge:S,heightTiny:F,heightSmall:z,heightMedium:T,heightLarge:O}=e;return Object.assign(Object.assign({},je),{fontSizeTiny:x,fontSizeSmall:y,fontSizeMedium:C,fontSizeLarge:S,heightTiny:F,heightSmall:z,heightMedium:T,heightLarge:O,borderRadius:n,textColor:o,textColorDisabled:t,placeholderColor:m,placeholderColorDisabled:w,color:l,colorDisabled:i,colorActive:l,border:"1px solid ".concat(p),borderHover:"1px solid ".concat(a),borderActive:"1px solid ".concat(r),borderFocus:"1px solid ".concat(a),boxShadowHover:"none",boxShadowActive:"0 0 0 2px ".concat(ee(r,{alpha:.2})),boxShadowFocus:"0 0 0 2px ".concat(ee(r,{alpha:.2})),caretColor:r,arrowColor:h,arrowColorDisabled:v,loadingColor:r,borderWarning:"1px solid ".concat(s),borderHoverWarning:"1px solid ".concat(c),borderActiveWarning:"1px solid ".concat(s),borderFocusWarning:"1px solid ".concat(c),boxShadowHoverWarning:"none",boxShadowActiveWarning:"0 0 0 2px ".concat(ee(s,{alpha:.2})),boxShadowFocusWarning:"0 0 0 2px ".concat(ee(s,{alpha:.2})),colorActiveWarning:l,caretColorWarning:s,borderError:"1px solid ".concat(d),borderHoverError:"1px solid ".concat(u),borderActiveError:"1px solid ".concat(d),borderFocusError:"1px solid ".concat(u),boxShadowHoverError:"none",boxShadowActiveError:"0 0 0 2px ".concat(ee(d,{alpha:.2})),boxShadowFocusError:"0 0 0 2px ".concat(ee(d,{alpha:.2})),colorActiveError:l,caretColorError:d,clearColor:b,clearColorHover:f,clearColorPressed:g})}}),We=L([A("base-selection","\n --n-padding-single: var(--n-padding-single-top) var(--n-padding-single-right) var(--n-padding-single-bottom) var(--n-padding-single-left);\n --n-padding-multiple: var(--n-padding-multiple-top) var(--n-padding-multiple-right) var(--n-padding-multiple-bottom) var(--n-padding-multiple-left);\n position: relative;\n z-index: auto;\n box-shadow: none;\n width: 100%;\n max-width: 100%;\n display: inline-block;\n vertical-align: bottom;\n border-radius: var(--n-border-radius);\n min-height: var(--n-height);\n line-height: 1.5;\n font-size: var(--n-font-size);\n ",[A("base-loading","\n color: var(--n-loading-color);\n "),A("base-selection-tags","min-height: var(--n-height);"),E("border, state-border","\n position: absolute;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n pointer-events: none;\n border: var(--n-border);\n border-radius: inherit;\n transition:\n box-shadow .3s var(--n-bezier),\n border-color .3s var(--n-bezier);\n "),E("state-border","\n z-index: 1;\n border-color: #0000;\n "),A("base-suffix","\n cursor: pointer;\n position: absolute;\n top: 50%;\n transform: translateY(-50%);\n right: 10px;\n ",[E("arrow","\n font-size: var(--n-arrow-size);\n color: var(--n-arrow-color);\n transition: color .3s var(--n-bezier);\n ")]),A("base-selection-overlay","\n display: flex;\n align-items: center;\n white-space: nowrap;\n pointer-events: none;\n position: absolute;\n top: 0;\n right: 0;\n bottom: 0;\n left: 0;\n padding: var(--n-padding-single);\n transition: color .3s var(--n-bezier);\n ",[E("wrapper","\n flex-basis: 0;\n flex-grow: 1;\n overflow: hidden;\n text-overflow: ellipsis;\n ")]),A("base-selection-placeholder","\n color: var(--n-placeholder-color);\n ",[E("inner","\n max-width: 100%;\n overflow: hidden;\n ")]),A("base-selection-tags","\n cursor: pointer;\n outline: none;\n box-sizing: border-box;\n position: relative;\n z-index: auto;\n display: flex;\n padding: var(--n-padding-multiple);\n flex-wrap: wrap;\n align-items: center;\n width: 100%;\n vertical-align: bottom;\n background-color: var(--n-color);\n border-radius: inherit;\n transition:\n color .3s var(--n-bezier),\n box-shadow .3s var(--n-bezier),\n background-color .3s var(--n-bezier);\n "),A("base-selection-label","\n height: var(--n-height);\n display: inline-flex;\n width: 100%;\n vertical-align: bottom;\n cursor: pointer;\n outline: none;\n z-index: auto;\n box-sizing: border-box;\n position: relative;\n transition:\n color .3s var(--n-bezier),\n box-shadow .3s var(--n-bezier),\n background-color .3s var(--n-bezier);\n border-radius: inherit;\n background-color: var(--n-color);\n align-items: center;\n ",[A("base-selection-input","\n font-size: inherit;\n line-height: inherit;\n outline: none;\n cursor: pointer;\n box-sizing: border-box;\n border:none;\n width: 100%;\n padding: var(--n-padding-single);\n background-color: #0000;\n color: var(--n-text-color);\n transition: color .3s var(--n-bezier);\n caret-color: var(--n-caret-color);\n ",[E("content","\n text-overflow: ellipsis;\n overflow: hidden;\n white-space: nowrap; \n ")]),E("render-label","\n color: var(--n-text-color);\n ")]),N("disabled",[L("&:hover",[E("state-border","\n box-shadow: var(--n-box-shadow-hover);\n border: var(--n-border-hover);\n ")]),D("focus",[E("state-border","\n box-shadow: var(--n-box-shadow-focus);\n border: var(--n-border-focus);\n ")]),D("active",[E("state-border","\n box-shadow: var(--n-box-shadow-active);\n border: var(--n-border-active);\n "),A("base-selection-label","background-color: var(--n-color-active);"),A("base-selection-tags","background-color: var(--n-color-active);")])]),D("disabled","cursor: not-allowed;",[E("arrow","\n color: var(--n-arrow-color-disabled);\n "),A("base-selection-label","\n cursor: not-allowed;\n background-color: var(--n-color-disabled);\n ",[A("base-selection-input","\n cursor: not-allowed;\n color: var(--n-text-color-disabled);\n "),E("render-label","\n color: var(--n-text-color-disabled);\n ")]),A("base-selection-tags","\n cursor: not-allowed;\n background-color: var(--n-color-disabled);\n "),A("base-selection-placeholder","\n cursor: not-allowed;\n color: var(--n-placeholder-color-disabled);\n ")]),A("base-selection-input-tag","\n height: calc(var(--n-height) - 6px);\n line-height: calc(var(--n-height) - 6px);\n outline: none;\n display: none;\n position: relative;\n margin-bottom: 3px;\n max-width: 100%;\n vertical-align: bottom;\n ",[E("input","\n font-size: inherit;\n font-family: inherit;\n min-width: 1px;\n padding: 0;\n background-color: #0000;\n outline: none;\n border: none;\n max-width: 100%;\n overflow: hidden;\n width: 1em;\n line-height: inherit;\n cursor: pointer;\n color: var(--n-text-color);\n caret-color: var(--n-caret-color);\n "),E("mirror","\n position: absolute;\n left: 0;\n top: 0;\n white-space: pre;\n visibility: hidden;\n user-select: none;\n -webkit-user-select: none;\n opacity: 0;\n ")]),["warning","error"].map((e=>D("".concat(e,"-status"),[E("state-border","border: var(--n-border-".concat(e,");")),N("disabled",[L("&:hover",[E("state-border","\n box-shadow: var(--n-box-shadow-hover-".concat(e,");\n border: var(--n-border-hover-").concat(e,");\n "))]),D("active",[E("state-border","\n box-shadow: var(--n-box-shadow-active-".concat(e,");\n border: var(--n-border-active-").concat(e,");\n ")),A("base-selection-label","background-color: var(--n-color-active-".concat(e,");")),A("base-selection-tags","background-color: var(--n-color-active-".concat(e,");"))]),D("focus",[E("state-border","\n box-shadow: var(--n-box-shadow-focus-".concat(e,");\n border: var(--n-border-focus-").concat(e,");\n "))])])])))]),A("base-selection-popover","\n margin-bottom: -3px;\n display: flex;\n flex-wrap: wrap;\n margin-right: -8px;\n "),A("base-selection-tag-wrapper","\n max-width: 100%;\n display: inline-flex;\n padding: 0 7px 3px 0;\n ",[L("&:last-child","padding-right: 0;"),A("tag","\n font-size: 14px;\n max-width: 100%;\n ",[E("content","\n line-height: 1.25;\n text-overflow: ellipsis;\n overflow: hidden;\n ")])])]),Ke=e({name:"InternalSelection",props:Object.assign(Object.assign({},j.props),{clsPrefix:{type:String,required:!0},bordered:{type:Boolean,default:void 0},active:Boolean,pattern:{type:String,default:""},placeholder:String,selectedOption:{type:Object,default:null},selectedOptions:{type:Array,default:null},labelField:{type:String,default:"label"},valueField:{type:String,default:"value"},multiple:Boolean,filterable:Boolean,clearable:Boolean,disabled:Boolean,size:{type:String,default:"medium"},loading:Boolean,autofocus:Boolean,showArrow:{type:Boolean,default:!0},inputProps:Object,focused:Boolean,renderTag:Function,onKeydown:Function,onClick:Function,onBlur:Function,onFocus:Function,onDeleteOption:Function,maxTagCount:[String,Number],ellipsisTagPopoverProps:Object,onClear:Function,onPatternInput:Function,onPatternFocus:Function,onPatternBlur:Function,renderLabel:Function,status:String,inlineThemeDisabled:Boolean,ignoreComposition:{type:Boolean,default:!0},onResize:Function}),setup(e){const{mergedClsPrefixRef:o,mergedRtlRef:t}=H(e),r=W("InternalSelection",t,o),a=i(null),s=i(null),c=i(null),d=i(null),h=i(null),f=i(null),g=i(null),m=i(null),w=i(null),x=i(null),y=i(!1),C=i(!1),S=i(!1),F=j("InternalSelection","-internal-selection",We,He,e,u(e,"clsPrefix")),z=l((()=>e.clearable&&!e.disabled&&(S.value||e.active))),T=l((()=>e.selectedOption?e.renderTag?e.renderTag({option:e.selectedOption,handleClose:()=>{}}):e.renderLabel?e.renderLabel(e.selectedOption,!0):M(e.selectedOption[e.labelField],e.selectedOption,!0):e.placeholder)),O=l((()=>{const n=e.selectedOption;if(n)return n[e.labelField]})),R=l((()=>e.multiple?!(!Array.isArray(e.selectedOptions)||!e.selectedOptions.length):null!==e.selectedOption));function k(){var n;const{value:o}=a;if(o){const{value:t}=s;t&&(t.style.width="".concat(o.offsetWidth,"px"),"responsive"!==e.maxTagCount&&(null===(n=w.value)||void 0===n||n.sync({showAllItemsBeforeCalculate:!1})))}}function P(n){const{onPatternInput:o}=e;o&&o(n)}function B(n){!function(n){const{onDeleteOption:o}=e;o&&o(n)}(n)}p(u(e,"active"),(e=>{e||function(){const{value:e}=x;e&&(e.style.display="none")}()})),p(u(e,"pattern"),(()=>{e.multiple&&v(k)}));const I=i(!1);let A=null;let E=null;function D(){null!==E&&window.clearTimeout(E)}p(R,(e=>{e||(y.value=!1)})),n((()=>{b((()=>{const n=f.value;n&&(e.disabled?n.removeAttribute("tabindex"):n.tabIndex=C.value?-1:0)}))})),Me(c,e.onResize);const{inlineThemeDisabled:L}=e,N=l((()=>{const{size:n}=e,{common:{cubicBezierEaseInOut:o},self:{borderRadius:t,color:l,placeholderColor:i,textColor:r,paddingSingle:a,paddingMultiple:s,caretColor:c,colorDisabled:d,textColorDisabled:u,placeholderColorDisabled:p,colorActive:h,boxShadowFocus:v,boxShadowActive:b,boxShadowHover:f,border:g,borderFocus:m,borderHover:w,borderActive:x,arrowColor:y,arrowColorDisabled:C,loadingColor:S,colorActiveWarning:z,boxShadowFocusWarning:T,boxShadowActiveWarning:O,boxShadowHoverWarning:R,borderWarning:k,borderFocusWarning:P,borderHoverWarning:M,borderActiveWarning:B,colorActiveError:I,boxShadowFocusError:A,boxShadowActiveError:E,boxShadowHoverError:D,borderError:L,borderFocusError:N,borderHoverError:_,borderActiveError:j,clearColor:H,clearColorHover:W,clearColorPressed:K,clearSize:V,arrowSize:U,[X("height",n)]:$,[X("fontSize",n)]:q}}=F.value,G=Y(a),Q=Y(s);return{"--n-bezier":o,"--n-border":g,"--n-border-active":x,"--n-border-focus":m,"--n-border-hover":w,"--n-border-radius":t,"--n-box-shadow-active":b,"--n-box-shadow-focus":v,"--n-box-shadow-hover":f,"--n-caret-color":c,"--n-color":l,"--n-color-active":h,"--n-color-disabled":d,"--n-font-size":q,"--n-height":$,"--n-padding-single-top":G.top,"--n-padding-multiple-top":Q.top,"--n-padding-single-right":G.right,"--n-padding-multiple-right":Q.right,"--n-padding-single-left":G.left,"--n-padding-multiple-left":Q.left,"--n-padding-single-bottom":G.bottom,"--n-padding-multiple-bottom":Q.bottom,"--n-placeholder-color":i,"--n-placeholder-color-disabled":p,"--n-text-color":r,"--n-text-color-disabled":u,"--n-arrow-color":y,"--n-arrow-color-disabled":C,"--n-loading-color":S,"--n-color-active-warning":z,"--n-box-shadow-focus-warning":T,"--n-box-shadow-active-warning":O,"--n-box-shadow-hover-warning":R,"--n-border-warning":k,"--n-border-focus-warning":P,"--n-border-hover-warning":M,"--n-border-active-warning":B,"--n-color-active-error":I,"--n-box-shadow-focus-error":A,"--n-box-shadow-active-error":E,"--n-box-shadow-hover-error":D,"--n-border-error":L,"--n-border-focus-error":N,"--n-border-hover-error":_,"--n-border-active-error":j,"--n-clear-size":V,"--n-clear-color":H,"--n-clear-color-hover":W,"--n-clear-color-pressed":K,"--n-arrow-size":U}})),_=L?K("internal-selection",l((()=>e.size[0])),N,e):void 0;return{mergedTheme:F,mergedClearable:z,mergedClsPrefix:o,rtlEnabled:r,patternInputFocused:C,filterablePlaceholder:T,label:O,selected:R,showTagsPanel:y,isComposing:I,counterRef:g,counterWrapperRef:m,patternInputMirrorRef:a,patternInputRef:s,selfRef:c,multipleElRef:d,singleElRef:h,patternInputWrapperRef:f,overflowRef:w,inputTagElRef:x,handleMouseDown:function(n){e.active&&e.filterable&&n.target!==s.value&&n.preventDefault()},handleFocusin:function(n){var o;n.relatedTarget&&(null===(o=c.value)||void 0===o?void 0:o.contains(n.relatedTarget))||function(n){const{onFocus:o}=e;o&&o(n)}(n)},handleClear:function(n){!function(n){const{onClear:o}=e;o&&o(n)}(n)},handleMouseEnter:function(){S.value=!0},handleMouseLeave:function(){S.value=!1},handleDeleteOption:B,handlePatternKeyDown:function(n){if("Backspace"===n.key&&!I.value&&!e.pattern.length){const{selectedOptions:n}=e;(null==n?void 0:n.length)&&B(n[n.length-1])}},handlePatternInputInput:function(n){const{value:o}=a;if(o){const e=n.target.value;o.textContent=e,k()}e.ignoreComposition&&I.value?A=n:P(n)},handlePatternInputBlur:function(n){var o;C.value=!1,null===(o=e.onPatternBlur)||void 0===o||o.call(e,n)},handlePatternInputFocus:function(n){var o;C.value=!0,null===(o=e.onPatternFocus)||void 0===o||o.call(e,n)},handleMouseEnterCounter:function(){e.active||(D(),E=window.setTimeout((()=>{R.value&&(y.value=!0)}),100))},handleMouseLeaveCounter:function(){D()},handleFocusout:function(n){var o;(null===(o=c.value)||void 0===o?void 0:o.contains(n.relatedTarget))||function(n){const{onBlur:o}=e;o&&o(n)}(n)},handleCompositionEnd:function(){I.value=!1,e.ignoreComposition&&P(A),A=null},handleCompositionStart:function(){I.value=!0},onPopoverUpdateShow:function(e){e||(D(),y.value=!1)},focus:function(){var n,o,t;e.filterable?(C.value=!1,null===(n=f.value)||void 0===n||n.focus()):e.multiple?null===(o=d.value)||void 0===o||o.focus():null===(t=h.value)||void 0===t||t.focus()},focusInput:function(){const{value:e}=s;e&&(!function(){const{value:e}=x;e&&(e.style.display="inline-block")}(),e.focus())},blur:function(){var n,o;if(e.filterable)C.value=!1,null===(n=f.value)||void 0===n||n.blur(),null===(o=s.value)||void 0===o||o.blur();else if(e.multiple){const{value:e}=d;null==e||e.blur()}else{const{value:e}=h;null==e||e.blur()}},blurInput:function(){const{value:e}=s;e&&e.blur()},updateCounter:function(e){const{value:n}=g;n&&n.setTextContent("+".concat(e))},getCounter:function(){const{value:e}=m;return e},getTail:function(){return s.value},renderLabel:e.renderLabel,cssVars:L?void 0:N,themeClass:null==_?void 0:_.themeClass,onRender:null==_?void 0:_.onRender}},render(){const{status:e,multiple:n,size:o,disabled:t,filterable:l,maxTagCount:i,bordered:a,clsPrefix:s,ellipsisTagPopoverProps:c,onRender:d,renderTag:u,renderLabel:p}=this;null==d||d();const h="responsive"===i,v="number"==typeof i,b=h||v,g=r(oe,null,{default:()=>r(ne,{clsPrefix:s,loading:this.loading,showArrow:this.showArrow,showClear:this.mergedClearable&&this.selected,onClear:this.handleClear},{default:()=>{var e,n;return null===(n=(e=this.$slots).arrow)||void 0===n?void 0:n.call(e)}})});let m;if(n){const{labelField:e}=this,n=n=>r("div",{class:"".concat(s,"-base-selection-tag-wrapper"),key:n.value},u?u({option:n,handleClose:()=>{this.handleDeleteOption(n)}}):r(we,{size:o,closable:!n.disabled,disabled:t,onClose:()=>{this.handleDeleteOption(n)},internalCloseIsButtonTag:!1,internalCloseFocusable:!1},{default:()=>p?p(n,!0):M(n[e],n,!0)})),a=()=>(v?this.selectedOptions.slice(0,i):this.selectedOptions).map(n),d=l?r("div",{class:"".concat(s,"-base-selection-input-tag"),ref:"inputTagElRef",key:"__input-tag__"},r("input",Object.assign({},this.inputProps,{ref:"patternInputRef",tabindex:-1,disabled:t,value:this.pattern,autofocus:this.autofocus,class:"".concat(s,"-base-selection-input-tag__input"),onBlur:this.handlePatternInputBlur,onFocus:this.handlePatternInputFocus,onKeydown:this.handlePatternKeyDown,onInput:this.handlePatternInputInput,onCompositionstart:this.handleCompositionStart,onCompositionend:this.handleCompositionEnd})),r("span",{ref:"patternInputMirrorRef",class:"".concat(s,"-base-selection-input-tag__mirror")},this.pattern)):null,w=h?()=>r("div",{class:"".concat(s,"-base-selection-tag-wrapper"),ref:"counterWrapperRef"},r(we,{size:o,ref:"counterRef",onMouseenter:this.handleMouseEnterCounter,onMouseleave:this.handleMouseLeaveCounter,disabled:t})):void 0;let x;if(v){const e=this.selectedOptions.length-i;e>0&&(x=r("div",{class:"".concat(s,"-base-selection-tag-wrapper"),key:"__counter__"},r(we,{size:o,ref:"counterRef",onMouseenter:this.handleMouseEnterCounter,disabled:t},{default:()=>"+".concat(e)})))}const y=h?l?r(te,{ref:"overflowRef",updateCounter:this.updateCounter,getCounter:this.getCounter,getTail:this.getTail,style:{width:"100%",display:"flex",overflow:"hidden"}},{default:a,counter:w,tail:()=>d}):r(te,{ref:"overflowRef",updateCounter:this.updateCounter,getCounter:this.getCounter,style:{width:"100%",display:"flex",overflow:"hidden"}},{default:a,counter:w}):v&&x?a().concat(x):a(),C=b?()=>r("div",{class:"".concat(s,"-base-selection-popover")},h?a():this.selectedOptions.map(n)):void 0,S=b?Object.assign({show:this.showTagsPanel,trigger:"hover",overlap:!0,placement:"top",width:"trigger",onUpdateShow:this.onPopoverUpdateShow,theme:this.mergedTheme.peers.Popover,themeOverrides:this.mergedTheme.peerOverrides.Popover},c):null,F=!this.selected&&(!this.active||!this.pattern&&!this.isComposing)?r("div",{class:"".concat(s,"-base-selection-placeholder ").concat(s,"-base-selection-overlay")},r("div",{class:"".concat(s,"-base-selection-placeholder__inner")},this.placeholder)):null,z=l?r("div",{ref:"patternInputWrapperRef",class:"".concat(s,"-base-selection-tags")},y,h?null:d,g):r("div",{ref:"multipleElRef",class:"".concat(s,"-base-selection-tags"),tabindex:t?void 0:0},y,g);m=r(f,null,b?r(le,Object.assign({},S,{scrollable:!0,style:"max-height: calc(var(--v-target-height) * 6.6);"}),{trigger:()=>z,default:C}):z,F)}else if(l){const e=this.pattern||this.isComposing,n=this.active?!e:!this.selected,o=!this.active&&this.selected;m=r("div",{ref:"patternInputWrapperRef",class:"".concat(s,"-base-selection-label"),title:this.patternInputFocused?void 0:Ce(this.label)},r("input",Object.assign({},this.inputProps,{ref:"patternInputRef",class:"".concat(s,"-base-selection-input"),value:this.active?this.pattern:"",placeholder:"",readonly:t,disabled:t,tabindex:-1,autofocus:this.autofocus,onFocus:this.handlePatternInputFocus,onBlur:this.handlePatternInputBlur,onInput:this.handlePatternInputInput,onCompositionstart:this.handleCompositionStart,onCompositionend:this.handleCompositionEnd})),o?r("div",{class:"".concat(s,"-base-selection-label__render-label ").concat(s,"-base-selection-overlay"),key:"input"},r("div",{class:"".concat(s,"-base-selection-overlay__wrapper")},u?u({option:this.selectedOption,handleClose:()=>{}}):p?p(this.selectedOption,!0):M(this.label,this.selectedOption,!0))):null,n?r("div",{class:"".concat(s,"-base-selection-placeholder ").concat(s,"-base-selection-overlay"),key:"placeholder"},r("div",{class:"".concat(s,"-base-selection-overlay__wrapper")},this.filterablePlaceholder)):null,g)}else m=r("div",{ref:"singleElRef",class:"".concat(s,"-base-selection-label"),tabindex:this.disabled?void 0:0},void 0!==this.label?r("div",{class:"".concat(s,"-base-selection-input"),title:Ce(this.label),key:"input"},r("div",{class:"".concat(s,"-base-selection-input__content")},u?u({option:this.selectedOption,handleClose:()=>{}}):p?p(this.selectedOption,!0):M(this.label,this.selectedOption,!0))):r("div",{class:"".concat(s,"-base-selection-placeholder ").concat(s,"-base-selection-overlay"),key:"placeholder"},r("div",{class:"".concat(s,"-base-selection-placeholder__inner")},this.placeholder)),g);return r("div",{ref:"selfRef",class:["".concat(s,"-base-selection"),this.rtlEnabled&&"".concat(s,"-base-selection--rtl"),this.themeClass,e&&"".concat(s,"-base-selection--").concat(e,"-status"),{["".concat(s,"-base-selection--active")]:this.active,["".concat(s,"-base-selection--selected")]:this.selected||this.active&&this.pattern,["".concat(s,"-base-selection--disabled")]:this.disabled,["".concat(s,"-base-selection--multiple")]:this.multiple,["".concat(s,"-base-selection--focus")]:this.focused}],style:this.cssVars,onClick:this.onClick,onMouseenter:this.handleMouseEnter,onMouseleave:this.handleMouseLeave,onKeydown:this.onKeydown,onFocusin:this.handleFocusin,onFocusout:this.handleFocusout,onMousedown:this.handleMouseDown},m,a?r("div",{class:"".concat(s,"-base-selection__border")}):null,a?r("div",{class:"".concat(s,"-base-selection__state-border")}):null)}});function Ve(e){return"group"===e.type}function Ue(e){return"ignored"===e.type}function $e(e,n){try{return!!(1+n.toString().toLowerCase().indexOf(e.trim().toLowerCase()))}catch(o){return!1}}function qe(e,n){return{getIsGroup:Ve,getIgnored:Ue,getKey:n=>Ve(n)?n.name||n.key||"key-required":n[e],getChildren:e=>e[n]}}const Ge=R({name:"Select",common:k,peers:{InternalSelection:He,InternalSelectMenu:Ee},self:function(e){const{boxShadow2:n}=e;return{menuBoxShadow:n}}}),Xe=L([A("select","\n z-index: auto;\n outline: none;\n width: 100%;\n position: relative;\n "),A("select-menu","\n margin: 4px 0;\n box-shadow: var(--n-menu-box-shadow);\n ",[_({originalTransition:"background-color .3s var(--n-bezier), box-shadow .3s var(--n-bezier)"})])]),Ye=e({name:"Select",props:Object.assign(Object.assign({},j.props),{to:de.propTo,bordered:{type:Boolean,default:void 0},clearable:Boolean,clearFilterAfterSelect:{type:Boolean,default:!0},options:{type:Array,default:()=>[]},defaultValue:{type:[String,Number,Array],default:null},keyboard:{type:Boolean,default:!0},value:[String,Number,Array],placeholder:String,menuProps:Object,multiple:Boolean,size:String,filterable:Boolean,disabled:{type:Boolean,default:void 0},remote:Boolean,loading:Boolean,filter:Function,placement:{type:String,default:"bottom-start"},widthMode:{type:String,default:"trigger"},tag:Boolean,onCreate:Function,fallbackOption:{type:[Function,Boolean],default:void 0},show:{type:Boolean,default:void 0},showArrow:{type:Boolean,default:!0},maxTagCount:[Number,String],ellipsisTagPopoverProps:Object,consistentMenuWidth:{type:Boolean,default:!0},virtualScroll:{type:Boolean,default:!0},labelField:{type:String,default:"label"},valueField:{type:String,default:"value"},childrenField:{type:String,default:"children"},renderLabel:Function,renderOption:Function,renderTag:Function,"onUpdate:value":[Function,Array],inputProps:Object,nodeProps:Function,ignoreComposition:{type:Boolean,default:!0},showOnFocus:Boolean,onUpdateValue:[Function,Array],onBlur:[Function,Array],onClear:[Function,Array],onFocus:[Function,Array],onScroll:[Function,Array],onSearch:[Function,Array],onUpdateShow:[Function,Array],"onUpdate:show":[Function,Array],displayDirective:{type:String,default:"show"},resetMenuOnOptionsChange:{type:Boolean,default:!0},status:String,showCheckmark:{type:Boolean,default:!0},onChange:[Function,Array],items:Array}),setup(e){const{mergedClsPrefixRef:n,mergedBorderedRef:o,namespaceRef:t,inlineThemeDisabled:r}=H(e),a=j("Select","-select",Xe,Ge,e,n),s=i(e.defaultValue),c=u(e,"value"),d=ie(c,s),h=i(!1),v=i(""),b=l((()=>{const{valueField:n,childrenField:o}=e,t=qe(n,o);return be(B.value,t)})),f=l((()=>function(e,n,o){const t=new Map;return e.forEach((e=>{Ve(e)?e[o].forEach((e=>{t.set(e[n],e)})):t.set(e[n],e)})),t}(P.value,e.valueField,e.childrenField))),g=i(!1),m=ie(u(e,"show"),g),w=i(null),x=i(null),y=i(null),{localeRef:C}=re("Select"),S=l((()=>{var n;return null!==(n=e.placeholder)&&void 0!==n?n:C.value.placeholder})),F=ae(e,["items","options"]),z=[],T=i([]),O=i([]),R=i(new Map),k=l((()=>{const{fallbackOption:n}=e;if(void 0===n){const{labelField:n,valueField:o}=e;return e=>({[n]:String(e),[o]:e})}return!1!==n&&(e=>Object.assign(n(e),{value:e}))})),P=l((()=>O.value.concat(T.value).concat(F.value))),M=l((()=>{const{filter:n}=e;if(n)return n;const{labelField:o,valueField:t}=e;return(e,n)=>{if(!n)return!1;const l=n[o];if("string"==typeof l)return $e(e,l);const i=n[t];return"string"==typeof i?$e(e,i):"number"==typeof i&&$e(e,String(i))}})),B=l((()=>{if(e.remote)return F.value;{const{value:n}=P,{value:o}=v;return o.length&&e.filterable?function(e,n,o,t){return n?function e(l){if(!Array.isArray(l))return[];const i=[];for(const r of l)if(Ve(r)){const n=e(r[t]);n.length&&i.push(Object.assign({},r,{[t]:n}))}else{if(Ue(r))continue;n(o,r)&&i.push(r)}return i}(e):e}(n,M.value,o,e.childrenField):n}}));function I(n){const o=e.remote,{value:t}=R,{value:l}=f,{value:i}=k,r=[];return n.forEach((e=>{if(l.has(e))r.push(l.get(e));else if(o&&t.has(e))r.push(t.get(e));else if(i){const n=i(e);n&&r.push(n)}})),r}const A=l((()=>{if(e.multiple){const{value:e}=d;return Array.isArray(e)?I(e):[]}return null})),E=l((()=>{const{value:n}=d;return e.multiple||Array.isArray(n)||null===n?null:I([n])[0]||null})),D=se(e),{mergedSizeRef:L,mergedDisabledRef:N,mergedStatusRef:_}=D;function W(n,o){const{onChange:t,"onUpdate:value":l,onUpdateValue:i}=e,{nTriggerFormChange:r,nTriggerFormInput:a}=D;t&&me(t,n,o),i&&me(i,n,o),l&&me(l,n,o),s.value=n,r(),a()}function V(n){const{onBlur:o}=e,{nTriggerFormBlur:t}=D;o&&me(o,n),t()}function U(){var n;const{remote:o,multiple:t}=e;if(o){const{value:o}=R;if(t){const{valueField:t}=e;null===(n=A.value)||void 0===n||n.forEach((e=>{o.set(e[t],e)}))}else{const n=E.value;n&&o.set(n[e.valueField],n)}}}function $(n){const{onUpdateShow:o,"onUpdate:show":t}=e;o&&me(o,n),t&&me(t,n),g.value=n}function q(){N.value||($(!0),g.value=!0,e.filterable&&te())}function G(){$(!1)}function X(){v.value="",O.value=z}const Y=i(!1);function Z(e){J(e.rawNode)}function J(n){if(N.value)return;const{tag:o,remote:t,clearFilterAfterSelect:l,valueField:i}=e;if(o&&!t){const{value:e}=O,n=e[0]||null;if(n){const e=T.value;e.length?e.push(n):T.value=[n],O.value=z}}if(t&&R.value.set(n[i],n),e.multiple){const r=function(n){if(!Array.isArray(n))return[];if(k.value)return Array.from(n);{const{remote:o}=e,{value:t}=f;if(o){const{value:e}=R;return n.filter((n=>t.has(n)||e.has(n)))}return n.filter((e=>t.has(e)))}}(d.value),a=r.findIndex((e=>e===n[i]));if(~a){if(r.splice(a,1),o&&!t){const e=ee(n[i]);~e&&(T.value.splice(e,1),l&&(v.value=""))}}else r.push(n[i]),l&&(v.value="");W(r,I(r))}else{if(o&&!t){const e=ee(n[i]);T.value=~e?[T.value[e]]:z}oe(),G(),W(n[i],n)}}function ee(n){return T.value.findIndex((o=>o[e.valueField]===n))}function ne(n){var o,t,l,i,r;if(e.keyboard)switch(n.key){case" ":if(e.filterable)break;n.preventDefault();case"Enter":if(!(null===(o=w.value)||void 0===o?void 0:o.isComposing))if(m.value){const n=null===(t=y.value)||void 0===t?void 0:t.getPendingTmNode();n?Z(n):e.filterable||(G(),oe())}else if(q(),e.tag&&Y.value){const n=O.value[0];if(n){const o=n[e.valueField],{value:t}=d;e.multiple&&Array.isArray(t)&&t.some((e=>e===o))||J(n)}}n.preventDefault();break;case"ArrowUp":if(n.preventDefault(),e.loading)return;m.value&&(null===(l=y.value)||void 0===l||l.prev());break;case"ArrowDown":if(n.preventDefault(),e.loading)return;m.value?null===(i=y.value)||void 0===i||i.next():q();break;case"Escape":m.value&&(ge(n),G()),null===(r=w.value)||void 0===r||r.focus()}else n.preventDefault()}function oe(){var e;null===(e=w.value)||void 0===e||e.focus()}function te(){var e;null===(e=w.value)||void 0===e||e.focusInput()}U(),p(u(e,"options"),U);const le={focus:()=>{var e;null===(e=w.value)||void 0===e||e.focus()},focusInput:()=>{var e;null===(e=w.value)||void 0===e||e.focusInput()},blur:()=>{var e;null===(e=w.value)||void 0===e||e.blur()},blurInput:()=>{var e;null===(e=w.value)||void 0===e||e.blurInput()}},ue=l((()=>{const{self:{menuBoxShadow:e}}=a.value;return{"--n-menu-box-shadow":e}})),pe=r?K("select",void 0,ue,e):void 0;return Object.assign(Object.assign({},le),{mergedStatus:_,mergedClsPrefix:n,mergedBordered:o,namespace:t,treeMate:b,isMounted:ce(),triggerRef:w,menuRef:y,pattern:v,uncontrolledShow:g,mergedShow:m,adjustedTo:de(e),uncontrolledValue:s,mergedValue:d,followerRef:x,localizedPlaceholder:S,selectedOption:E,selectedOptions:A,mergedSize:L,mergedDisabled:N,focused:h,activeWithoutMenuOpen:Y,inlineThemeDisabled:r,onTriggerInputFocus:function(){e.filterable&&(Y.value=!0)},onTriggerInputBlur:function(){e.filterable&&(Y.value=!1,m.value||X())},handleTriggerOrMenuResize:function(){var e;m.value&&(null===(e=x.value)||void 0===e||e.syncPosition())},handleMenuFocus:function(e){h.value=!0},handleMenuBlur:function(e){var n;(null===(n=w.value)||void 0===n?void 0:n.$el.contains(e.relatedTarget))||(h.value=!1,V(e),G())},handleMenuTabOut:function(){var e;null===(e=w.value)||void 0===e||e.focus(),G()},handleTriggerClick:function(){N.value||(m.value?e.filterable?te():G():q())},handleToggle:Z,handleDeleteOption:J,handlePatternInput:function(n){m.value||q();const{value:o}=n.target;v.value=o;const{tag:t,remote:l}=e;if(function(n){const{onSearch:o}=e;o&&me(o,n)}(o),t&&!l){if(!o)return void(O.value=z);const{onCreate:n}=e,t=n?n(o):{[e.labelField]:o,[e.valueField]:o},{valueField:l,labelField:i}=e;F.value.some((e=>e[l]===t[l]||e[i]===t[i]))||T.value.some((e=>e[l]===t[l]||e[i]===t[i]))?O.value=z:O.value=[t]}},handleClear:function(n){n.stopPropagation();const{multiple:o}=e;!o&&e.filterable&&G(),function(){const{onClear:n}=e;n&&me(n)}(),o?W([],[]):W(null,null)},handleTriggerBlur:function(e){var n,o;(null===(o=null===(n=y.value)||void 0===n?void 0:n.selfRef)||void 0===o?void 0:o.contains(e.relatedTarget))||(h.value=!1,V(e),G())},handleTriggerFocus:function(n){!function(n){const{onFocus:o,showOnFocus:t}=e,{nTriggerFormFocus:l}=D;o&&me(o,n),l(),t&&q()}(n),h.value=!0},handleKeydown:ne,handleMenuAfterLeave:X,handleMenuClickOutside:function(e){var n;m.value&&((null===(n=w.value)||void 0===n?void 0:n.$el.contains(fe(e)))||G())},handleMenuScroll:function(n){!function(n){const{onScroll:o}=e;o&&me(o,n)}(n)},handleMenuKeydown:ne,handleMenuMousedown:function(e){Q(e,"action")||Q(e,"empty")||e.preventDefault()},mergedTheme:a,cssVars:r?void 0:ue,themeClass:null==pe?void 0:pe.themeClass,onRender:null==pe?void 0:pe.onRender})},render(){return r("div",{class:"".concat(this.mergedClsPrefix,"-select")},r(ue,null,{default:()=>[r(pe,null,{default:()=>r(Ke,{ref:"triggerRef",inlineThemeDisabled:this.inlineThemeDisabled,status:this.mergedStatus,inputProps:this.inputProps,clsPrefix:this.mergedClsPrefix,showArrow:this.showArrow,maxTagCount:this.maxTagCount,ellipsisTagPopoverProps:this.ellipsisTagPopoverProps,bordered:this.mergedBordered,active:this.activeWithoutMenuOpen||this.mergedShow,pattern:this.pattern,placeholder:this.localizedPlaceholder,selectedOption:this.selectedOption,selectedOptions:this.selectedOptions,multiple:this.multiple,renderTag:this.renderTag,renderLabel:this.renderLabel,filterable:this.filterable,clearable:this.clearable,disabled:this.mergedDisabled,size:this.mergedSize,theme:this.mergedTheme.peers.InternalSelection,labelField:this.labelField,valueField:this.valueField,themeOverrides:this.mergedTheme.peerOverrides.InternalSelection,loading:this.loading,focused:this.focused,onClick:this.handleTriggerClick,onDeleteOption:this.handleDeleteOption,onPatternInput:this.handlePatternInput,onClear:this.handleClear,onBlur:this.handleTriggerBlur,onFocus:this.handleTriggerFocus,onKeydown:this.handleKeydown,onPatternBlur:this.onTriggerInputBlur,onPatternFocus:this.onTriggerInputFocus,onResize:this.handleTriggerOrMenuResize,ignoreComposition:this.ignoreComposition},{arrow:()=>{var e,n;return[null===(n=(e=this.$slots).arrow)||void 0===n?void 0:n.call(e)]}})}),r(he,{ref:"followerRef",show:this.mergedShow,to:this.adjustedTo,teleportDisabled:this.adjustedTo===de.tdkey,containerClass:this.namespace,width:this.consistentMenuWidth?"target":void 0,minWidth:"target",placement:this.placement},{default:()=>r(d,{name:"fade-in-scale-up-transition",appear:this.isMounted,onAfterLeave:this.handleMenuAfterLeave},{default:()=>{var e,n,o;return this.mergedShow||"show"===this.displayDirective?(null===(e=this.onRender)||void 0===e||e.call(this),g(r(_e,Object.assign({},this.menuProps,{ref:"menuRef",onResize:this.handleTriggerOrMenuResize,inlineThemeDisabled:this.inlineThemeDisabled,virtualScroll:this.consistentMenuWidth&&this.virtualScroll,class:["".concat(this.mergedClsPrefix,"-select-menu"),this.themeClass,null===(n=this.menuProps)||void 0===n?void 0:n.class],clsPrefix:this.mergedClsPrefix,focusable:!0,labelField:this.labelField,valueField:this.valueField,autoPending:!0,nodeProps:this.nodeProps,theme:this.mergedTheme.peers.InternalSelectMenu,themeOverrides:this.mergedTheme.peerOverrides.InternalSelectMenu,treeMate:this.treeMate,multiple:this.multiple,size:"medium",renderOption:this.renderOption,renderLabel:this.renderLabel,value:this.mergedValue,style:[null===(o=this.menuProps)||void 0===o?void 0:o.style,this.cssVars],onToggle:this.handleToggle,onScroll:this.handleMenuScroll,onFocus:this.handleMenuFocus,onBlur:this.handleMenuBlur,onKeydown:this.handleMenuKeydown,onTabOut:this.handleMenuTabOut,onMousedown:this.handleMenuMousedown,show:this.mergedShow,showCheckmark:this.showCheckmark,resetMenuOnOptionsChange:this.resetMenuOnOptionsChange}),{empty:()=>{var e,n;return[null===(n=(e=this.$slots).empty)||void 0===n?void 0:n.call(e)]},header:()=>{var e,n;return[null===(n=(e=this.$slots).header)||void 0===n?void 0:n.call(e)]},action:()=>{var e,n;return[null===(n=(e=this.$slots).action)||void 0===n?void 0:n.call(e)]}}),"show"===this.displayDirective?[[m,this.mergedShow],[ve,this.handleMenuClickOutside,void 0,{capture:!0}]]:[[ve,this.handleMenuClickOutside,void 0,{capture:!0}]])):null}})})]}))}});export{Ie as F,_e as N,Pe as V,Ye as _,qe as c,Ce as g,Ee as i,Se as m,Ge as s};
