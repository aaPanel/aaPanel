const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/index139.js?v=1764830988434","js/index.vue_vue_type_script_setup_true_lang.js?v=1764830988434","js/vue.js?v=1764830988434","js/__commonjsHelpers__.js?v=1764830988434","js/naive.js?v=1764830988434","js/common.js?v=1764830988434","js/page_layout.js?v=1764830988434","js/public.js?v=1764830988434","css/public.css?v=1764830988434","css/page_layout.css?v=1764830988434","js/index.vue_vue_type_script_setup_true_lang2.js?v=1764830988434","js/index96.js?v=1764830988434","css/index14.css?v=1764830988434","js/index132.js?v=1764830988434","js/index133.js?v=1764830988434","css/index25.css?v=1764830988434","js/soft.js?v=1764830988434","js/site.js?v=1764830988434"])))=>i.map(i=>d[i]);
import{i as a,o as e,aL as t,aO as s,aP as i,aS as n,d as o,x as l,y as d,q as p,a as r,aR as c}from"./page_layout.js?v=1764830988434";import{_}from"./index.js?v=1764830988434";import{_ as u}from"./index.vue_vue_type_script_setup_true_lang5.js?v=1764830988434";import{_ as m}from"./index.vue_vue_type_script_setup_true_lang7.js?v=1764830988434";import{_ as b}from"./index.vue_vue_type_script_setup_true_lang9.js?v=1764830988434";import{s as y,e as h,c as k,v as g,f,a as x,d as w,h as v,w as D}from"./public.js?v=1764830988434";import{_ as j}from"./index.vue_vue_type_script_setup_true_lang8.js?v=1764830988434";import{u as C,a as R,b as U,c as q,h as P,_ as S,d as $,e as B,f as L,g as W}from"./index132.js?v=1764830988434";import{g as O}from"./hooks.js?v=1764830988434";import{W as z,j as A,u as I,k as E,P as K,e as V,w as H,a2 as N,V as T,a3 as F,S as G,U as J,ak as M,a4 as Q,_ as X,N as Y}from"./vue.js?v=1764830988434";import{dS as Z,aC as aa}from"./naive.js?v=1764830988434";import"./common.js?v=1764830988434";import"./__commonjsHelpers__.js?v=1764830988434";import"./index.vue_vue_type_script_setup_true_lang6.js?v=1764830988434";import"./index133.js?v=1764830988434";import"./soft.js?v=1764830988434";import"./site.js?v=1764830988434";const{t:ea}=a.global;const ta={class:"p-16px"},sa=E({__name:"index",setup(a){const E=X(()=>r(()=>import("./index139.js?v=1764830988434"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]))),{t:sa}=K(),ia=t(),na=h(),oa=()=>{na.show=!0},la=()=>{L()},da=()=>{W()},pa=async()=>{await i(ia.type,{ids:[]}),ha()},ra=V({p:1,limit:10,sid:-1,search:""}),{keys:ca,table:_a,columns:ua}=k([{type:"selection",width:40},{key:"name",title:sa("Database.index_12"),width:"12%",minWidth:120},{key:"username",title:sa("Database.index_13"),width:"12%",minWidth:120},{key:"password",title:ea("Database.index_14"),minWidth:150,render:a=>z(y,{value:a.password},null)},{key:"backup_count",title:ea("Database.index_16"),width:"12%",render:a=>{let t;return z("div",{class:"flex items-center"},[z(e,{type:a.backup_count>0?"primary":"warning",onClick:()=>{C(a)}},{default:()=>[a.backup_count>0?"".concat(ea("Database.mongo.index_7"),"(").concat(a.backup_count,")"):ea("Database.index_18")]}),z("span",{class:"mx-4px"},[A("|")]),z(e,{onClick:()=>{R(a,"pgsql")}},(s=t=ea("Public.Btn.Import"),"function"==typeof s||"[object Object]"===Object.prototype.toString.call(s)&&!I(s)?t:{default:()=>[t]}))]);var s}},{key:"sid",title:ea("Database.mongo.index_8"),width:"12%",minWidth:120,render:a=>O(a)},g({onBlur:async(a,e)=>{await c({id:e.id,ps:a})}}),f({width:220,options:a=>[{label:"Adminer",show:0===a.db_type,onClick:()=>{ka(a)}},{label:"Password",onClick:()=>{U(a)}},{label:sa("Public.Btn.Del"),onClick:()=>{q([a])}}]})]),ma=[{key:"sync",label:sa("Database.index_24"),onBatch:a=>{x({title:sa("Database.index_25"),content:sa("Database.index_26"),onConfirm:async({hide:e})=>{await i(ia.type,{ids:a.map(a=>a.id)}),e()}})}},{key:"backup",type:"confirm",label:sa("Database.index_27"),confirm:{title:sa("Database.index_28"),desc:sa("Database.index_29"),api:a=>s(ia.type,{id:a.id},!1),done:()=>{ha()},columns:[{key:"name",title:sa("Database.index_12")}]}},{key:"delete",label:sa("Database.index_30"),onBatch:a=>{q(a)}}],{loading:ba,setLoading:ya}=w(),ha=async()=>{try{ya(!0);const{message:a}=await n(ia.type,(()=>{const a={...Y(ra)};return-1===a.sid&&delete a.sid,a})());o(a)?(_a.data=l(a.data)?a.data:[],_a.total=d(a.page)):(_a.data=[],_a.total=0)}finally{ca.value=[],ya(!1)}};H(()=>ia.isRefresh,a=>{a&&(ia.setRefresh(!1),ia.delRemoteId===ra.sid&&(ra.sid=-1),ha())});const ka=a=>{P(a?{type:"pgsql",username:a.username,password:a.password,db:a.name}:{type:"pgsql"})};return(async()=>{await ia.getRemote(),ia.install?ha():D()})(),(a,e)=>{const t=aa,s=p,i=j,n=v,o=b,l=m,d=u,r=_,c=Z;return T(),N(J(B),null,{default:F(()=>[z(c,null,{default:F(()=>[G("div",ta,[z(d,{feedback:!0},{toolsLeft:F(()=>[z(t,{type:"primary",onClick:oa},{default:F(()=>[A(Q(a.$t("Database.index_1")),1)]),_:1}),z(t,{onClick:la},{default:F(()=>[A(Q(a.$t("Database.index_2")),1)]),_:1}),z(t,{onClick:e[0]||(e[0]=a=>ka())},{default:F(()=>e[8]||(e[8]=[A(" Adminer ",-1)])),_:1,__:[8]}),z(t,{onClick:da},{default:F(()=>[A(Q(a.$t("Database.index_4")),1)]),_:1}),z(s,{class:"mx-0!",vertical:""}),z(t,{onClick:pa},{default:F(()=>[A(Q(a.$t("Database.index_5")),1)]),_:1}),z(t,{onClick:J($)},{default:F(()=>[A(Q(a.$t("Database.index_6")),1)]),_:1},8,["onClick"])]),toolsRight:F(()=>[z(J(S),{value:J(ra).sid,"onUpdate:value":e[1]||(e[1]=a=>J(ra).sid=a),"store-key":"database-pgsql-page",onChange:ha},null,8,["value"]),z(i,{value:J(ra).search,"onUpdate:value":e[2]||(e[2]=a=>J(ra).search=a),placeholder:"Database search",onSearch:ha},null,8,["value"])]),table:F(()=>[z(n,{"checked-row-keys":J(ca),"onUpdate:checkedRowKeys":e[3]||(e[3]=a=>M(ca)?ca.value=a:null),loading:J(ba),data:J(_a).data,columns:J(ua)},null,8,["checked-row-keys","loading","data","columns"])]),pageLeft:F(()=>[z(o,{"checked-row-keys":J(ca),"onUpdate:checkedRowKeys":e[4]||(e[4]=a=>M(ca)?ca.value=a:null),data:J(_a).data,options:ma},null,8,["checked-row-keys","data"])]),pageRight:F(()=>[z(l,{page:J(ra).p,"onUpdate:page":e[5]||(e[5]=a=>J(ra).p=a),"page-size":J(ra).limit,"onUpdate:pageSize":e[6]||(e[6]=a=>J(ra).limit=a),"store-key":"database-pgsql-page","item-count":J(_a).total,onRefresh:ha},null,8,["page","page-size","item-count"])]),_:1}),z(r,{show:J(na).show,"onUpdate:show":e[7]||(e[7]=a=>J(na).show=a),title:a.$t("Database.mongo.index_4"),width:540,"min-height":280,footer:!0,component:J(E)},null,8,["show","title","component"])])]),_:1})]),_:1})}}});export{sa as default};
