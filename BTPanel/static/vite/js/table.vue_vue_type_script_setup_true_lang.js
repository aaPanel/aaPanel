const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/index163.js?v=1762424784323","js/index.js?v=1762424784323","js/vue.js?v=1762424784323","js/__commonjsHelpers__.js?v=1762424784323","js/common.js?v=1762424784323","js/public.js?v=1762424784323","js/page_layout.js?v=1762424784323","js/naive.js?v=1762424784323","css/page_layout.css?v=1762424784323","css/public.css?v=1762424784323","css/index109.css?v=1762424784323","js/index107.js?v=1762424784323","css/index21.css?v=1762424784323","js/index.vue_vue_type_script_setup_true_lang.js?v=1762424784323","js/index.vue_vue_type_script_setup_true_lang20.js?v=1762424784323","js/index99.js?v=1762424784323","css/index14.css?v=1762424784323","js/index.vue_vue_type_script_setup_true_lang10.js?v=1762424784323","js/index98.js?v=1762424784323","css/index13.css?v=1762424784323","js/index104.js?v=1762424784323","css/index19.css?v=1762424784323","js/index.vue_vue_type_script_setup_true_lang22.js?v=1762424784323","css/index81.css?v=1762424784323"])))=>i.map(i=>d[i]);
import{t as e,bQ as a,m as l,d as t,w as o,p as s,_ as n,a as i,c0 as d}from"./page_layout.js?v=1762424784323";import{_ as r}from"./index.js?v=1762424784323";import{_ as u}from"./index.vue_vue_type_script_setup_true_lang5.js?v=1762424784323";import{D as c,u as m,c as p,f as g,e as _,d as f,h as k}from"./public.js?v=1762424784323";import{k as v,P as w,r as x,R as h,V as C,W as y,U as I,c as D,S as b,a4 as j,ak as $,a3 as U,j as S,F as P,e as R,w as L,aj as O,_ as B,N as E}from"./vue.js?v=1762424784323";import{_ as T}from"./index104.js?v=1762424784323";import{dV as V,aC as z,au as W,dh as q}from"./naive.js?v=1762424784323";const A={class:"h-400px bg-#282c34 rounded-b-4px"},F=v({__name:"index",props:{name:{type:String,default:""}},emits:["close"],setup(e,{emit:t}){const o=t,{t:s}=w(),n=a(),i=x(s("Docker.CloudImage.index_9")+"\n"),{send:d,close:r}=c("/ws_model",{onMessage:(e,a)=>{const{data:t}=a;i.value+=t,t.includes("successful")?(l.success(s("Docker.CloudImage.pull.success")),n.setRefresh(!0),setTimeout(()=>{o("close")},1500),r()):t.includes("failed")&&(l.error(s("Docker.CloudImage.pull.failed")),r())}});return d({model_index:"btdocker",mod_name:"image",def_name:"pull_from_some_registry",ws_callback:111,name:"Docker public repository",image:e.name}),(e,a)=>{const l=T;return C(),h("div",A,[y(l,{log:I(i)},null,8,["log"])])}}}),H={class:"p-20px"},K={class:"info"},M={class:"info-title"},N={class:"flex gap-8px"},Q={class:"flex-1"},G=s(v({__name:"image",props:{row:{type:Object,default:()=>({})}},setup(a){const{t:s}=w(),n=x({}),i=x(null),d=D(()=>"library"===n.value.namespace?s("Docker.CloudImage.detail.yes"):s("Docker.CloudImage.detail.no")),r=D(()=>{const e=n.value.pull_count;return e?e.toLocaleString():"--"}),u=x(!1),c=x([]),p=({option:e})=>y(P,null,[e.label]),g=e=>{const a=e.data;return y("div",{class:"flex items-center justify-between py-10px"},[y("div",{class:"max-w-250px flex-1 w-0"},[y("div",{class:"leading-[1.4] text-14px text-font2 truncate"},[a.tag_name]),y("div",{class:"mt-10px leading-[1.2] text-font3 truncate"},[a.digest])]),y("div",{class:"text-14px text-font2"},[a.last_updated,S(" "),s("Docker.CloudImage.detail.updated")])])},_=()=>{if(!i.value)return void l.error(s("Docker.CloudImage.detail.selectImageError"));const e="".concat(a.row.name,":").concat(i.value);m({title:s("Docker.CloudImage.detail.pullImageTitle"),width:660,data:{name:e},component:F})},f=async()=>{const{message:l}=await(o={image:a.row.name},e.post("/btdocker/image/get_image_detail",o));var o;t(l)&&(n.value=l)},k=async()=>{var l;const{message:t}=await(s={image:a.row.name,id:(null==(l=n.value)?void 0:l.id)||0,search:""},e.post("/btdocker/image/get_image_tags",s));var s;o(t)&&(c.value=t.map(e=>({label:e.tag_name,value:e.tag_name,data:e})))};return(async()=>{try{u.value=!0,await f(),await k()}finally{u.value=!1}})(),(e,l)=>{const t=V,o=z;return C(),h("div",H,[b("div",K,[b("div",M,j(a.row.name),1),b("ul",null,[b("li",null,[b("span",null,j(e.$t("Docker.CloudImage.detail.lastUpdated")),1),b("span",null,j(I(n).last_updated),1)]),b("li",null,[b("span",null,j(e.$t("Docker.CloudImage.detail.isOfficial")),1),b("span",null,j(I(d)),1)]),b("li",null,[b("span",null,j(e.$t("Docker.CloudImage.detail.source")),1),b("span",null,j(e.$t("Docker.CloudImage.detail.dockerHub")),1)]),b("li",null,[b("span",null,j(e.$t("Docker.CloudImage.detail.pullsCount")),1),b("span",null,j(I(r)),1)])])]),b("div",N,[b("div",Q,[y(t,{value:I(i),"onUpdate:value":l[0]||(l[0]=e=>$(i)?i.value=e:null),options:I(c),loading:I(u),filterable:!0,"render-tag":p,"render-label":g,placeholder:e.$t("Docker.CloudImage.detail.selectPlaceholder")},null,8,["value","options","loading","placeholder"])]),y(o,{type:"primary",onClick:_},{default:U(()=>[S(j(e.$t("Docker.CloudImage.detail.pullButton")),1)]),_:1})])])}}}),[["__scopeId","data-v-c5b9ee13"]]),J={class:"w-510px"},X={class:"ml-4px"},Y=v({__name:"table",setup(e){const t=B(()=>i(()=>import("./index163.js?v=1762424784323"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23]))),{t:s}=w(),c=a(),m=()=>{M.page=1,N()},v=()=>{""!==K.name?window.open("https://hub.docker.com/search?type=image&q="+K.name):l.error(s("Docker.CloudImage.index_1"))},x=R({show:!1,image:""}),{table:D,columns:T}=p([{key:"name",title:s("Docker.CloudImage.index_5"),width:200},{key:"star_count",title:s("Docker.CloudImage.index_6"),width:70},{key:"is_official",title:s("Docker.CloudImage.index_7"),width:100,render:e=>e.is_official?"Official":"Unofficial"},{key:"description",title:s("Docker.CloudImage.index_8"),minWidth:130,ellipsis:{tooltip:!0}},g({width:230,options:e=>[{label:s("Docker.CloudImage.index_11"),onClick:()=>{x.show=!0,x.image=e.name}},{label:s("Docker.CloudImage.index_10"),onClick:()=>{A(e)}}]})]),V=_(s("Docker.CloudImage.index_4"),{row:void 0}),A=e=>{V.data.row=e,V.show=!0},{loading:F,setLoading:H}=f(),K=R({name:""}),M=R({page:1,pageSize:10}),N=async()=>{try{H(!0);const{message:e}=await d(E(K));D.data=o(e)?e:[]}finally{H(!1)}};return L(()=>c.isRefresh,e=>{e&&(c.setRefresh(!1),N())}),N(),(e,a)=>{const l=W,o=z,s=n,i=q,d=k,c=u,p=r;return C(),h(P,null,[y(c,null,{toolsLeft:U(()=>[b("div",J,[y(l,{value:I(K).name,"onUpdate:value":a[0]||(a[0]=e=>I(K).name=e),placeholder:e.$t("Docker.CloudImage.index_1"),onKeyup:O(m,["enter"])},null,8,["value","placeholder"])]),y(o,{type:"primary",onClick:m},{default:U(()=>[S(j(e.$t("Public.Btn.Search")),1)]),_:1}),y(i,null,{trigger:U(()=>[y(o,{onClick:v},{default:U(()=>[y(s,{name:"soft-docker",size:"16"}),b("span",X,j(e.$t("Public.Btn.Search")),1)]),_:1})]),default:U(()=>[b("span",null,j(e.$t("Docker.CloudImage.index_3")),1)]),_:1})]),table:U(()=>[y(d,{page:I(M),"onUpdate:page":a[1]||(a[1]=e=>$(M)?M.value=e:null),"row-key":"name",loading:I(F),data:I(D).data,columns:I(T),"is-page":!0},null,8,["page","loading","data","columns"])]),_:1}),y(I(t),{show:I(x).show,"onUpdate:show":a[2]||(a[2]=e=>I(x).show=e),image:I(x).image},null,8,["show","image"]),y(p,{show:I(V).show,"onUpdate:show":a[3]||(a[3]=e=>I(V).show=e),title:I(V).title,data:I(V).data,width:540,component:G},null,8,["show","title","data"])],64)}}});export{Y as _};
