const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/index164.js?v=1763625242172","js/index.js?v=1763625242172","js/vue.js?v=1763625242172","js/__commonjsHelpers__.js?v=1763625242172","js/common.js?v=1763625242172","js/public.js?v=1763625242172","js/page_layout.js?v=1763625242172","js/naive.js?v=1763625242172","css/page_layout.css?v=1763625242172","css/public.css?v=1763625242172","css/index110.css?v=1763625242172","js/index107.js?v=1763625242172","css/index21.css?v=1763625242172","js/index.vue_vue_type_script_setup_true_lang.js?v=1763625242172","js/index.vue_vue_type_script_setup_true_lang20.js?v=1763625242172","js/index99.js?v=1763625242172","css/index14.css?v=1763625242172","js/index.vue_vue_type_script_setup_true_lang10.js?v=1763625242172","js/index98.js?v=1763625242172","css/index13.css?v=1763625242172","js/index104.js?v=1763625242172","css/index19.css?v=1763625242172","js/index.vue_vue_type_script_setup_true_lang22.js?v=1763625242172","css/index82.css?v=1763625242172"])))=>i.map(i=>d[i]);
import{bf as e,bU as a,m as l,c as t,x as o,p as s,a as n,c4 as i,_ as d}from"./page_layout.js?v=1763625242172";import{_ as r}from"./index.js?v=1763625242172";import{_ as u}from"./index.vue_vue_type_script_setup_true_lang5.js?v=1763625242172";import{C as c,u as m,c as p,f as g,e as _,d as f,h as k}from"./public.js?v=1763625242172";import{k as v,P as w,r as x,R as h,S as C,X as y,V as I,c as b,U as D,a4 as j,aj as $,a3 as U,j as S,F as P,e as R,w as L,ak as O,_ as B,N as E}from"./vue.js?v=1763625242172";import{_ as T}from"./index104.js?v=1763625242172";import{dV as V,aC as z,au as q,dh as A}from"./naive.js?v=1763625242172";const F={class:"h-400px bg-#282c34 rounded-b-4px"},H=v({__name:"index",props:{name:{type:String,default:""}},emits:["close"],setup(e,{emit:t}){const o=t,{t:s}=w(),n=a(),i=x(s("Docker.CloudImage.index_9")+"\n"),{send:d,close:r}=c("/ws_model",{onMessage:(e,a)=>{const{data:t}=a;i.value+=t,t.includes("successful")?(l.success(s("Docker.CloudImage.pull.success")),n.setRefresh(!0),setTimeout((()=>{o("close")}),1500),r()):t.includes("failed")&&(l.error(s("Docker.CloudImage.pull.failed")),r())}});return d({model_index:"btdocker",mod_name:"image",def_name:"pull_from_some_registry",ws_callback:111,name:"Docker public repository",image:e.name}),(e,a)=>{const l=T;return h(),C("div",F,[y(l,{log:I(i)},null,8,["log"])])}}}),K={class:"p-20px"},M={class:"info"},N={class:"info-title"},W={class:"flex gap-8px"},X={class:"flex-1"},G=s(v({__name:"image",props:{row:{type:Object,default:()=>({})}},setup(a){const{t:s}=w(),n=x({}),i=x(null),d=b((()=>"library"===n.value.namespace?s("Docker.CloudImage.detail.yes"):s("Docker.CloudImage.detail.no"))),r=b((()=>{const e=n.value.pull_count;return e?e.toLocaleString():"--"})),u=x(!1),c=x([]),p=({option:e})=>y(P,null,[e.label]),g=e=>{const a=e.data;return y("div",{class:"flex items-center justify-between py-10px"},[y("div",{class:"max-w-250px flex-1 w-0"},[y("div",{class:"leading-[1.4] text-14px text-font2 truncate"},[a.tag_name]),y("div",{class:"mt-10px leading-[1.2] text-font3 truncate"},[a.digest])]),y("div",{class:"text-14px text-font2"},[a.last_updated,S(" "),s("Docker.CloudImage.detail.updated")])])},_=()=>{if(!i.value)return void l.error(s("Docker.CloudImage.detail.selectImageError"));const e="".concat(a.row.name,":").concat(i.value);m({title:s("Docker.CloudImage.detail.pullImageTitle"),width:660,data:{name:e},component:H})},f=async()=>{const{message:l}=await(o={image:a.row.name},e.post("/btdocker/image/get_image_detail",o));var o;t(l)&&(n.value=l)},k=async()=>{var l;const{message:t}=await(s={image:a.row.name,id:(null==(l=n.value)?void 0:l.id)||0,search:""},e.post("/btdocker/image/get_image_tags",s));var s;o(t)&&(c.value=t.map((e=>({label:e.tag_name,value:e.tag_name,data:e}))))};return(async()=>{try{u.value=!0,await f(),await k()}finally{u.value=!1}})(),(e,l)=>{const t=V,o=z;return h(),C("div",K,[D("div",M,[D("div",N,j(a.row.name),1),D("ul",null,[D("li",null,[D("span",null,j(e.$t("Docker.CloudImage.detail.lastUpdated")),1),D("span",null,j(I(n).last_updated),1)]),D("li",null,[D("span",null,j(e.$t("Docker.CloudImage.detail.isOfficial")),1),D("span",null,j(I(d)),1)]),D("li",null,[D("span",null,j(e.$t("Docker.CloudImage.detail.source")),1),D("span",null,j(e.$t("Docker.CloudImage.detail.dockerHub")),1)]),D("li",null,[D("span",null,j(e.$t("Docker.CloudImage.detail.pullsCount")),1),D("span",null,j(I(r)),1)])])]),D("div",W,[D("div",X,[y(t,{value:I(i),"onUpdate:value":l[0]||(l[0]=e=>$(i)?i.value=e:null),options:I(c),loading:I(u),filterable:!0,"render-tag":p,"render-label":g,placeholder:e.$t("Docker.CloudImage.detail.selectPlaceholder")},null,8,["value","options","loading","placeholder"])]),y(o,{type:"primary",onClick:_},{default:U((()=>[S(j(e.$t("Docker.CloudImage.detail.pullButton")),1)])),_:1})])])}}}),[["__scopeId","data-v-42cf0db8"]]),J={class:"w-510px"},Q={class:"ml-4px"},Y=v({__name:"table",setup(e){const t=B((()=>n((()=>import("./index164.js?v=1763625242172")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23])))),{t:s}=w(),c=a(),m=()=>{N.page=1,W()},v=()=>{""!==M.name?window.open("https://hub.docker.com/search?type=image&q="+M.name):l.error(s("Docker.CloudImage.index_1"))},x=R({show:!1,image:""}),{table:b,columns:T}=p([{key:"name",title:s("Docker.CloudImage.index_5"),width:200},{key:"star_count",title:s("Docker.CloudImage.index_6"),width:70},{key:"is_official",title:s("Docker.CloudImage.index_7"),width:100,render:e=>e.is_official?"Official":"Unofficial"},{key:"description",title:s("Docker.CloudImage.index_8"),minWidth:130,ellipsis:{tooltip:!0}},g({width:230,options:e=>[{label:s("Docker.CloudImage.index_11"),onClick:()=>{x.show=!0,x.image=e.name}},{label:s("Docker.CloudImage.index_10"),onClick:()=>{F(e)}}]})]),V=_(s("Docker.CloudImage.index_4"),{row:void 0}),F=e=>{V.data.row=e,V.show=!0},{loading:H,setLoading:K}=f(),M=R({name:""}),N=R({page:1,pageSize:10}),W=async()=>{try{K(!0);const{message:e}=await i(E(M));b.data=o(e)?e:[]}finally{K(!1)}};return L((()=>c.isRefresh),(e=>{e&&(c.setRefresh(!1),W())})),W(),(e,a)=>{const l=q,o=z,s=d,n=A,i=k,c=u,p=r;return h(),C(P,null,[y(c,null,{toolsLeft:U((()=>[D("div",J,[y(l,{value:I(M).name,"onUpdate:value":a[0]||(a[0]=e=>I(M).name=e),placeholder:e.$t("Docker.CloudImage.index_1"),onKeyup:O(m,["enter"])},null,8,["value","placeholder"])]),y(o,{type:"primary",onClick:m},{default:U((()=>[S(j(e.$t("Public.Btn.Search")),1)])),_:1}),y(n,null,{trigger:U((()=>[y(o,{onClick:v},{default:U((()=>[y(s,{name:"soft-docker",size:"16"}),D("span",Q,j(e.$t("Public.Btn.Search")),1)])),_:1})])),default:U((()=>[D("span",null,j(e.$t("Docker.CloudImage.index_3")),1)])),_:1})])),table:U((()=>[y(i,{page:I(N),"onUpdate:page":a[1]||(a[1]=e=>$(N)?N.value=e:null),"row-key":"name",loading:I(H),data:I(b).data,columns:I(T),"is-page":!0},null,8,["page","loading","data","columns"])])),_:1}),y(I(t),{show:I(x).show,"onUpdate:show":a[2]||(a[2]=e=>I(x).show=e),image:I(x).image},null,8,["show","image"]),y(p,{show:I(V).show,"onUpdate:show":a[3]||(a[3]=e=>I(V).show=e),title:I(V).title,data:I(V).data,width:540,component:G},null,8,["show","title","data"])],64)}}});export{Y as _};
