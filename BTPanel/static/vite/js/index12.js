import{P as a,a0 as e,N as n,k as o,ad as i,ae as t,c as s,r as l,R as g,V as c,S as _,a2 as m,U as u,a4 as p,q as r,W as f,ak as d,a3 as v,j as b,F as C,an as U}from"./vue.js?v=1767769852656";import{i as I,A as y,m as h,aE as w,d as k,aF as x,aG as S,p as B,aH as D,q as O}from"./page_layout.js?v=1767769852656";import{a as j}from"./public.js?v=1767769852656";import{u as R}from"./file.js?v=1767769852656";import{S as $}from"./index108.js?v=1767769852656";import{S as z}from"./index110.js?v=1767769852656";import{bJ as q,aC as A,df as F,dj as M,dS as P}from"./naive.js?v=1767769852656";import"./__commonjsHelpers__.js?v=1767769852656";import"./common.js?v=1767769852656";const{t:E}=I.global,L={favicon:"/static/favicon.ico",show_login_logo:!0,show_login_bg_images:!1,login_logo:"/static/icons/logo-green.svg",login_bg_images:"",login_bg_images_opacity:100,show_main_bg_images:!0,main_bg_images:"/static/icons/main_bg.png",main_bg_images_dark:"/static/icons/main_bg_dark.png",main_bg_images_opacity:100,main_content_opacity:100,main_shadow_color:"#000000",main_shadow_opacity:5,menu_logo:"/static/icons/menu_logo.png",menu_bg_opacity:100,theme_color:"#3c444d",theme_name:"default",home_state_font_size:24},T=new Map([["menu_logo",E("Config.UI.logo")],["favicon",E("Config.UI.websiteIcon")],["login_bg_images",E("Config.UI.loginBackgroundImage")],["login_logo",E("Config.UI.loginLogoImage")],["main_bg_images",E("Config.UI.mainBackgroundImage")],["theme_color",E("Config.UI.sidebarColor")],["theme_name",E("Config.UI.colorTheme")],["menu_bg_opacity",E("Config.UI.sidebarBackgroundOpacity")],["main_content_opacity",E("Config.UI.contentOpacity")],["main_bg_images_opacity",E("Config.UI.mainBackgroundImageOpacity")],["login_bg_images_opacity",E("Config.UI.loginBackgroundOpacity")],["main_shadow_color",E("Config.UI.mainShadowColor")],["main_shadow_opacity",E("Config.UI.mainShadowOpacity")]]),H=()=>{const{t:o}=a(),i=y(),{pageConfig:t}=e(i),s=async()=>{const{message:a}=await w.post("/config?action=get_panel_asset");k(a)&&(t.value=a)},l=async(a={})=>{await w.post("/config?action=set_panel_asset",n({...t.value,...a}),{requestOptions:{loading:o("Config.UI.savingInterfaceSettings"),successMessage:!0}}),s()},g=a=>T.get(a)||a;return{pageConfig:t,fetchConfig:s,saveConfig:l,resetConfig:a=>{j({title:o("Config.UI.restoreDefaultSettings"),content:o("Config.UI.confirmRestore",{name:g(a)}),onConfirm:async()=>{await l({[a]:L[a]})}})},uploadImage:async(a,e)=>{if(e.file){const i=h.loading(o("Config.UI.uploadingImage"));try{const o=((a,e)=>{const n=(a=>{const e=a.lastIndexOf(".");return-1!==e?a.substring(e+1):"png"})(e);return"".concat(a,"_").concat(Date.now(),".").concat(n)})(a,e.name),i=new FormData;i.append("f_path","/www/server/panel/BTPanel/static/temp"),i.append("f_name",o),i.append("f_start","0"),i.append("blob",e.file),i.append("f_size",e.file.size.toString()),await R(i),await w.post("/config?action=set_panel_asset",n({...t.value,[a]:"/static/temp/".concat(o)}),{requestOptions:{successMessage:!0}}),"favicon"===a&&(a=>{const e=document.querySelector("link[rel*='icon']");e&&(e.href=x(a))})("/static/temp/".concat(o)),s()}finally{i.close()}}},resetAllConfig:()=>{j({title:o("Config.UI.restoreDefaultSettings"),content:o("Config.UI.confirmRestoreAll"),onConfirm:async()=>{await l(L)}})}}},G={class:"logo-preview"},J={key:1,class:"text-font3"},N={class:"logo-tips"},V={class:"upload-action"},W=B(o({__name:"upload",props:i({onUpload:Function},{value:{default:""},valueModifiers:{}}),emits:i(["reset"],["update:value"]),setup(e,{emit:n}){const{t:o}=a(),i=n,C=t(e,"value"),U=s(()=>x(C.value)),I=l([]),y=({file:a})=>{if(a.file){if(!a.file.type.includes("image"))return h.error(o("Config.UI.imageFileOnlyError")),!1;if(a.file.size>5242880)return h.error(o("Config.UI.imageSizeError")),!1}return!0},w=async({file:a})=>{var n;await(null==(n=e.onUpload)?void 0:n.call(e,a)),I.value=[]},k=()=>{i("reset")};return(a,e)=>{const n=q,o=A,i=S;return c(),g("div",null,[_("div",G,[C.value?(c(),m(n,{key:0,width:"100%",height:"100%",src:u(U),"preview-disabled":!0},null,8,["src"])):(c(),g("span",J,p(a.$t("Config.UI.uploadImagePlaceholder")),1))]),_("div",N,[r(a.$slots,"desc",{},void 0,!0)]),_("div",V,[f(i,{"file-list":u(I),"onUpdate:fileList":e[0]||(e[0]=a=>d(I)?I.value=a:null),class:"w-auto",action:"",multiple:!1,"show-file-list":!1,"custom-request":w,onBeforeUpload:y},{default:v(()=>[f(o,{size:"small"},{default:v(()=>[r(a.$slots,"upload",{},void 0,!0)]),_:3})]),_:3},8,["file-list"]),f(o,{onClick:k},{default:v(()=>[b(p(a.$t("Config.UI.resetDefault")),1)]),_:1})])])}}}),[["__scopeId","data-v-f0cd1801"]]),K=o({__name:"index",setup(e){const{t:n}=a(),{pageConfig:o,uploadImage:i,resetConfig:t}=H();return(a,e)=>(c(),g(C,null,[f(z,{label:u(n)("Config.UI.logo")},{content:v(()=>[f(W,{value:u(o).menu_logo,"onUpdate:value":e[0]||(e[0]=a=>u(o).menu_logo=a),onUpload:e[1]||(e[1]=a=>u(i)("menu_logo",a)),onReset:e[2]||(e[2]=()=>u(t)("menu_logo"))},{desc:v(()=>[b(p(u(n)("Config.UI.logoDescription")),1)]),upload:v(()=>[b(p(u(n)("Config.UI.uploadLogo")),1)]),_:1},8,["value"])]),_:1},8,["label"]),f(z,{label:u(n)("Config.UI.websiteIcon")},{content:v(()=>[f(W,{value:u(o).favicon,"onUpdate:value":e[3]||(e[3]=a=>u(o).favicon=a),onUpload:e[4]||(e[4]=a=>u(i)("favicon",a)),onReset:e[5]||(e[5]=()=>u(t)("favicon"))},{desc:v(()=>[b(p(u(n)("Config.UI.iconDescription")),1)]),upload:v(()=>[b(p(u(n)("Config.UI.uploadIcon")),1)]),_:1},8,["value"])]),_:1},8,["label"])],64))}}),Q={class:"flex items-center"},X={class:"w-120px mr-24px"},Y={class:"text-font3"},Z={class:"flex items-center gap-10px mt-10px"},aa=o({__name:"slider",props:{value:{default:0},valueModifiers:{}},emits:i(["save","reset"],["update:value"]),setup(e,{emit:n}){const{t:o}=a(),i=t(e,"value"),s=n,l=()=>{s("save")},m=()=>{s("reset")};return(a,e)=>{const n=D,t=F,s=A;return c(),g("div",null,[_("div",Q,[_("div",X,[f(n,{value:i.value,"onUpdate:value":e[0]||(e[0]=a=>i.value=a),step:10},null,8,["value"])]),f(t,{value:i.value,"onUpdate:value":e[1]||(e[1]=a=>i.value=a),class:"w-150px",min:0,max:100,size:"small"},null,8,["value"])]),_("div",Y,p(u(o)("Config.UI.transparencyTip")),1),_("div",Z,[f(s,{size:"small",onClick:l},{default:v(()=>[b(p(a.$t("Public.Btn.Save")),1)]),_:1}),f(s,{size:"small",onClick:m},{default:v(()=>[b(p(u(o)("Config.UI.resetDefault")),1)]),_:1})])])}}}),ea=o({__name:"index",setup(e){const{t:n}=a(),{pageConfig:o,saveConfig:i,resetConfig:t}=H();return(a,e)=>(c(),m(z,{label:u(n)("Config.UI.sidebarBackgroundOpacity")},{content:v(()=>[f(aa,{value:u(o).menu_bg_opacity,"onUpdate:value":e[0]||(e[0]=a=>u(o).menu_bg_opacity=a),onSave:e[1]||(e[1]=()=>u(i)()),onReset:e[2]||(e[2]=()=>u(t)("menu_bg_opacity"))},null,8,["value"])]),_:1},8,["label"]))}}),na={class:"flex-1"},oa={class:"flex items-center h-32px"},ia=o({__name:"index",setup(e){const{t:n}=a(),{pageConfig:o,saveConfig:i,resetConfig:t,uploadImage:s}=H();return(a,e)=>{const l=M;return c(),g(C,null,[f(z,{label:u(n)("Config.UI.mainBackgroundImage")},{content:v(()=>[_("div",na,[_("div",oa,[f(l,{value:u(o).show_main_bg_images,"onUpdate:value":[e[0]||(e[0]=a=>u(o).show_main_bg_images=a),u(i)]},{checked:v(()=>[b(p(u(n)("Config.UI.show")),1)]),unchecked:v(()=>[b(p(u(n)("Config.UI.hide")),1)]),_:1},8,["value","onUpdate:value"])]),u(o).show_main_bg_images?(c(),m(W,{key:0,value:u(o).main_bg_images,"onUpdate:value":e[1]||(e[1]=a=>u(o).main_bg_images=a),class:"mt-10px",onUpload:e[2]||(e[2]=a=>u(s)("main_bg_images",a)),onReset:e[3]||(e[3]=()=>u(t)("main_bg_images"))},{desc:v(()=>[b(p(u(n)("Config.UI.mainBackgroundDescription")),1)]),upload:v(()=>[b(p(u(n)("Config.UI.uploadImage")),1)]),_:1},8,["value"])):U("",!0)])]),_:1},8,["label"]),u(o).show_main_bg_images?(c(),m(z,{key:0,label:u(n)("Config.UI.mainBackgroundImageDark")},{content:v(()=>[f(W,{value:u(o).main_bg_images_dark,"onUpdate:value":e[4]||(e[4]=a=>u(o).main_bg_images_dark=a),class:"mt-10px",onUpload:e[5]||(e[5]=a=>u(s)("main_bg_images_dark",a)),onReset:e[6]||(e[6]=()=>u(t)("main_bg_images_dark"))},{desc:v(()=>[b(p(u(n)("Config.UI.mainBackgroundDescription")),1)]),upload:v(()=>[b(p(u(n)("Config.UI.uploadImage")),1)]),_:1},8,["value"])]),_:1},8,["label"])):U("",!0),f(z,{label:u(n)("Config.UI.backgroundOpacity")},{content:v(()=>[f(aa,{value:u(o).main_bg_images_opacity,"onUpdate:value":e[7]||(e[7]=a=>u(o).main_bg_images_opacity=a),onSave:e[8]||(e[8]=()=>u(i)()),onReset:e[9]||(e[9]=()=>u(t)("main_bg_images_opacity"))},null,8,["value"])]),_:1},8,["label"]),f(z,{label:u(n)("Config.UI.contentOpacity")},{content:v(()=>[f(aa,{value:u(o).main_content_opacity,"onUpdate:value":e[10]||(e[10]=a=>u(o).main_content_opacity=a),onSave:e[11]||(e[11]=()=>u(i)()),onReset:e[12]||(e[12]=()=>u(t)("main_content_opacity"))},null,8,["value"])]),_:1},8,["label"])],64)}}}),ta={class:"flex-1"},sa={class:"flex items-center h-32px"},la=o({__name:"index",setup(a){const{pageConfig:e,saveConfig:n,resetConfig:o,uploadImage:i}=H();return(a,t)=>{const s=M;return c(),g(C,null,[f(z,{label:a.$t("Config.UI.loginBackgroundImage")},{content:v(()=>[_("div",ta,[_("div",sa,[f(s,{value:u(e).show_login_bg_images,"onUpdate:value":[t[0]||(t[0]=a=>u(e).show_login_bg_images=a),u(n)]},{checked:v(()=>[b(p(a.$t("Config.UI.show")),1)]),unchecked:v(()=>[b(p(a.$t("Config.UI.hide")),1)]),_:1},8,["value","onUpdate:value"])]),u(e).show_login_bg_images?(c(),m(W,{key:0,value:u(e).login_bg_images,"onUpdate:value":t[1]||(t[1]=a=>u(e).login_bg_images=a),class:"mt-10px",onUpload:t[2]||(t[2]=a=>u(i)("login_bg_images",a)),onReset:t[3]||(t[3]=()=>u(o)("login_bg_images"))},{desc:v(()=>[b(p(a.$t("Config.UI.backgroundDescription")),1)]),upload:v(()=>[b(p(a.$t("Config.UI.uploadImage")),1)]),_:1},8,["value"])):U("",!0)])]),_:1},8,["label"]),u(e).show_login_bg_images?(c(),m(z,{key:0,label:a.$t("Config.UI.loginBackgroundOpacity")},{content:v(()=>[f(aa,{value:u(e).login_bg_images_opacity,"onUpdate:value":t[4]||(t[4]=a=>u(e).login_bg_images_opacity=a),onSave:t[5]||(t[5]=()=>u(n)()),onReset:t[6]||(t[6]=()=>u(o)("login_bg_images_opacity"))},null,8,["value"])]),_:1},8,["label"])):U("",!0)],64)}}}),ga={class:"py-16px"},ca={class:"my-16px"},_a=o({__name:"index",setup(e){const{t:n}=a(),{fetchConfig:o,resetAllConfig:i}=H();return o(),(a,e)=>{const o=O,t=A,s=P;return c(),m(s,{class:"p-16px"},{default:v(()=>[f($,{class:"mb-16px"},{default:v(()=>[b(p(u(n)("Config.UI.logoSettings")),1)]),_:1}),f(K),f($,{class:"mt-12px mb-16px"},{default:v(()=>[b(p(u(n)("Config.UI.sidebarSettings")),1)]),_:1}),f(ea),f($,{class:"mt-12px mb-16px"},{default:v(()=>[b(p(u(n)("Config.UI.mainBackgroundSettings")),1)]),_:1}),f(ia),f($,{class:"mt-12px mb-16px"},{default:v(()=>[b(p(u(n)("Config.UI.loginInterfaceSettings")),1)]),_:1}),f(la),_("div",ga,[_("div",ca,[f(o)]),f(t,{onClick:e[0]||(e[0]=()=>u(i)())},{default:v(()=>[b(p(u(n)("Config.UI.resetAllDefaults")),1)]),_:1})])]),_:1})}}});export{_a as default};
