import{_ as e}from"./index.js?v=1764233927359";import{_ as t}from"./index107.js?v=1764233927359";import{a9 as i,n as l,bf as s,d as a,m as o,T as r,q as n,_ as p,gw as u,p as d}from"./page_layout.js?v=1764233927359";import{f as m,a as f,i as c}from"./public.js?v=1764233927359";import{o as v,F as _}from"./index39.js?v=1764233927359";import{k as y,P as h,i as $,r as g,c as b,W as x,F as w,aK as j,a2 as k,V as z,a3 as T,S as C,U as P,ak as F,a4 as H,j as O,l as q,R as M}from"./vue.js?v=1764233927359";import{dQ as N,au as R,dc as S,dg as U}from"./naive.js?v=1764233927359";import"./common.js?v=1764233927359";import"./__commonjsHelpers__.js?v=1764233927359";import"./soft2.js?v=1764233927359";import"./soft.js?v=1764233927359";import"./site.js?v=1764233927359";import"./file2.js?v=1764233927359";import"./index.vue_vue_type_script_setup_true_lang7.js?v=1764233927359";const I={class:"properties-wrapper"},K={class:"content"},L={class:"info-group"},W={class:"info-item h-60px"},D={class:"info-item-label"},Q={class:"info-item-value"},V={class:"w-360px"},A={class:"my-10px"},B={class:"info-group"},E={class:"info-item"},G={class:"info-item-label"},J={class:"info-item-value"},X={class:"info-item"},Y={class:"info-item-label"},Z={class:"info-item-value flex"},ee={class:"max-w-300px"},te={class:"info-item",style:{"margin-bottom":"0"}},ie={class:"info-item-label"},le={class:"info-item-value"},se={class:"my-10px"},ae={class:"info-group"},oe={class:"info-item"},re={class:"info-item-label"},ne={class:"info-item-value"},pe={class:"info-item"},ue={class:"info-item-label"},de={class:"info-item-value"},me={class:"info-item",style:{"margin-bottom":"0"}},fe={class:"info-item-label"},ce={class:"info-item-value"},ve={class:"my-10px"},_e={class:"info-group"},ye={class:"info-item"},he={class:"info-item-label"},$e={class:"info-item-value"},ge={class:"info-item"},be={class:"info-item-label"},xe={class:"info-item-value"},we={class:"content overflow-auto"},je={width:"200"},ke={class:"content"},ze=d(y({__name:"Properties",setup(d,{expose:y}){const{t:ze}=h(),Te=$("fileStore"),{choosedKeys:Ce,fileList:Pe,currentPath:Fe}=Te,He=g(!1),Oe=g("general"),qe=g(!1),Me=g({st_atime:0,st_mtime:0,st_ctime:0}),Ne=b(()=>Me.value.path?"".concat(Me.value.path,"/").concat(Me.value.name):"--"),Re=g([{key:"st_mtime",title:()=>ze("file.properties.modifiedTime"),width:154,render:e=>i(e.st_mtime)},{key:"st_size",title:()=>ze("file.properties.size"),width:80,render:e=>l(e.st_size)},{key:"md5",title:()=>ze("file.properties.md5"),ellipsis:{tooltip:!0}},m({width:110,options:e=>[{label:ze("file.properties.view"),onClick:()=>{!async function(){v(0,"".concat(Me.value.path,"/").concat(Me.value.name),Fe.value)}()}},{label:ze("file.properties.restore"),onClick:()=>{!async function(e){f({title:ze("file.properties.restoreHistoryFiles"),width:480,content:()=>x(w,null,[x("div",null,[ze("file.properties.restoreHistoryConfirm",{time:i(e.st_mtime)})]),x("div",{class:"mt-8px text-12px text-default leading-[1.4]"},[ze("file.properties.restoreHistoryWarning")])]),onConfirm:async()=>{await async function(e,t){const i=o.loading(ze("file.properties.restoring"));try{const{status:i}=await s.post("/files?action=re_history",{filename:e,history:t},{requestOptions:{errorMessage:!1}});0===i?o.success(ze("file.properties.restoreSuccess")):o.error(ze("file.properties.restoreFailed"))}finally{i.close()}}("".concat(Me.value.path,"/").concat(Me.value.name),e.st_mtime)}})}(e)}}]})]),Se=()=>{c(Ne.value)};return y({open(){He.value=!0;!async function(e){qe.value=!0;try{const{message:t}=await s.post("/files?action=get_file_attribute",{filename:e},{requestOptions:{isOriginalResult:!0}});a(t)&&(Me.value=t)}finally{qe.value=!1}}(Pe.value.find(e=>e.nm==Ce.value[0]).path)},close(){He.value=!1}}),(s,a)=>{const o=R,d=n,m=S,f=p,c=N,v=u,y=U,h=t,$=r,g=e,b=j("table");return z(),k(g,{show:P(He),"onUpdate:show":a[1]||(a[1]=e=>F(He)?He.value=e:null),width:580,title:"[".concat(P(Me).name,"] - ").concat(s.$t("file.properties.fileProperties"))},{default:T(()=>[C("div",I,[x($,{show:P(qe)},{default:T(()=>[x(h,{value:P(Oe),"onUpdate:value":a[0]||(a[0]=e=>F(Oe)?Oe.value=e:null)},{default:T(()=>[x(c,{name:"general",tab:s.$t("file.properties.general")},{default:T(()=>[C("div",K,[C("div",L,[C("div",W,[C("div",D,[x(_,{ext:"".concat(P(Me).st_type),size:"large"},null,8,["ext"])]),C("div",Q,[C("div",V,[x(o,{value:P(Me).name,readonly:""},null,8,["value"])])])])]),C("div",A,[x(d)]),C("div",B,[C("div",E,[C("div",G,H(s.$t("file.properties.type"))+":",1),C("div",J,H(P(Me).st_type),1)]),C("div",X,[C("div",Y,H(s.$t("file.properties.location"))+":",1),C("div",Z,[C("div",ee,[x(m,null,{default:T(()=>[O(H(P(Ne)),1)]),_:1})]),x(f,{class:"ml-10px cursor-pointer",name:"common-copy",size:"14",onClick:Se})])]),C("div",te,[C("div",ie,H(s.$t("file.properties.size"))+":",1),C("div",le,H(P(l)(P(Me).st_size)),1)])]),C("div",se,[x(d)]),C("div",ae,[C("div",oe,[C("div",re,H(s.$t("file.properties.permissions"))+":",1),C("div",ne,H(P(Me).mode),1)]),C("div",pe,[C("div",ue,H(s.$t("file.properties.group"))+":",1),C("div",de,H(P(Me).group),1)]),C("div",me,[C("div",fe,H(s.$t("file.properties.user"))+":",1),C("div",ce,H(P(Me).user),1)])]),C("div",ve,[x(d)]),C("div",_e,[C("div",ye,[C("div",he,H(s.$t("file.properties.visitTime"))+":",1),C("div",$e,H(P(i)(P(Me).st_atime)),1)]),C("div",ge,[C("div",be,H(s.$t("file.properties.modifiedTime"))+":",1),C("div",xe,H(P(i)(P(Me).st_mtime)),1)])])])]),_:1},8,["tab"]),x(c,{name:"details",tab:s.$t("file.properties.details")},{default:T(()=>[q((z(),M("div",we,[x(v,null,{default:T(()=>[C("thead",null,[C("tr",null,[C("th",je,H(s.$t("file.properties.name")),1),C("th",null,H(s.$t("file.properties.value")),1)])]),C("tbody",null,[C("tr",null,[C("td",null,H(s.$t("file.properties.name")),1),C("td",null,H(P(Me).name),1)]),C("tr",null,[C("td",null,H(s.$t("file.properties.type")),1),C("td",null,H(P(Me).st_type),1)]),C("tr",null,[C("td",null,H(s.$t("file.properties.location")),1),C("td",null,H(P(Me).path),1)]),C("tr",null,[C("td",null,H(s.$t("file.properties.size")),1),C("td",null,H(P(l)(P(Me).st_size)),1)]),C("tr",null,[C("td",null,H(s.$t("file.properties.visitTime")),1),C("td",null,H(P(i)(P(Me).st_atime)),1)]),C("tr",null,[C("td",null,H(s.$t("file.properties.modifiedTime")),1),C("td",null,H(P(i)(P(Me).st_mtime)),1)]),C("tr",null,[C("td",null,H(s.$t("file.properties.metadataModificationTime")),1),C("td",null,H(P(i)(P(Me).st_mtime)),1)]),C("tr",null,[C("td",null,H(s.$t("file.properties.md5")),1),C("td",null,H(P(Me).md5),1)]),C("tr",null,[C("td",null,H(s.$t("file.properties.sha1")),1),C("td",null,H(P(Me).sha1),1)]),C("tr",null,[C("td",null,H(s.$t("file.properties.user")),1),C("td",null,H(P(Me).user),1)]),C("tr",null,[C("td",null,H(s.$t("file.properties.group")),1),C("td",null,H(P(Me).group),1)]),C("tr",null,[C("td",null,H(s.$t("file.properties.permissions")),1),C("td",null,H(P(Me).mode),1)]),C("tr",null,[C("td",null,H(s.$t("file.properties.uid")),1),C("td",null,H(P(Me).st_uid),1)]),C("tr",null,[C("td",null,H(s.$t("file.properties.gid")),1),C("td",null,H(P(Me).st_gid),1)]),C("tr",null,[C("td",null,H(s.$t("file.properties.numOfInodeLinks")),1),C("td",null,H(Number(P(Me).is_link)),1)]),C("tr",null,[C("td",null,H(s.$t("file.properties.inodeNodeNum")),1),C("td",null,H(P(Me).st_ino),1)]),C("tr",null,[C("td",null,H(s.$t("file.properties.inodeProtectionMode")),1),C("td",null,H(P(Me).st_mode),1)]),C("tr",null,[C("td",null,H(s.$t("file.properties.inodeResidentDevice")),1),C("td",null,H(P(Me).st_dev),1)])])]),_:1})])),[[b]])]),_:1},8,["tab"]),x(c,{name:"history",tab:s.$t("file.properties.history")},{default:T(()=>[C("div",ke,[x(y,{"max-height":"386px",columns:P(Re),data:P(Me).history||[]},null,8,["columns","data"])])]),_:1},8,["tab"])]),_:1},8,["value"])]),_:1},8,["show"])])]),_:1},8,["show","title"])}}}),[["__scopeId","data-v-f7957a5e"]]);export{ze as default};
