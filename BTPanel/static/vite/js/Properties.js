import{_ as e}from"./index.js?v=1769066082311";import{_ as t}from"./index114.js?v=1769066082311";import{aa as i,n as l,aE as s,d as a,m as o,T as r,q as n,_ as p,gu as u,p as d}from"./page_layout.js?v=1769066082311";import{f as m,a as f,i as c}from"./public.js?v=1769066082311";import{W as v,F as _}from"./CalcSize.vue_vue_type_script_setup_true_lang.js?v=1769066082311";import{k as y,P as h,i as $,r as g,c as b,W as x,F as w,aK as j,a2 as k,V as z,a3 as T,S as C,U as P,ak as F,a4 as H,j as O,l as R,R as S}from"./vue.js?v=1769066082311";import{dR as q,au as M,dd as N,dh as U}from"./naive.js?v=1769066082311";import"./common.js?v=1769066082311";import"./__commonjsHelpers__.js?v=1769066082311";import"./soft2.js?v=1769066082311";import"./soft.js?v=1769066082311";import"./site.js?v=1769066082311";const W={class:"properties-wrapper"},I={class:"content"},K={class:"info-group"},L={class:"info-item h-60px"},D={class:"info-item-label"},E={class:"info-item-value"},V={class:"w-360px"},A={class:"my-10px"},B={class:"info-group"},G={class:"info-item"},J={class:"info-item-label"},Q={class:"info-item-value"},X={class:"info-item"},Y={class:"info-item-label"},Z={class:"info-item-value flex"},ee={class:"max-w-300px"},te={class:"info-item",style:{"margin-bottom":"0"}},ie={class:"info-item-label"},le={class:"info-item-value"},se={class:"my-10px"},ae={class:"info-group"},oe={class:"info-item"},re={class:"info-item-label"},ne={class:"info-item-value"},pe={class:"info-item"},ue={class:"info-item-label"},de={class:"info-item-value"},me={class:"info-item",style:{"margin-bottom":"0"}},fe={class:"info-item-label"},ce={class:"info-item-value"},ve={class:"my-10px"},_e={class:"info-group"},ye={class:"info-item"},he={class:"info-item-label"},$e={class:"info-item-value"},ge={class:"info-item"},be={class:"info-item-label"},xe={class:"info-item-value"},we={class:"content overflow-auto"},je={width:"200"},ke={class:"content"},ze=d(y({__name:"Properties",setup(d,{expose:y}){const{t:ze}=h(),Te=$("fileStore"),{choosedKeys:Ce,fileList:Pe,currentPath:Fe}=Te,He=g(!1),Oe=g("general"),Re=g(!1),Se=g({st_atime:0,st_mtime:0,st_ctime:0}),qe=b(()=>Se.value.path?"".concat(Se.value.path,"/").concat(Se.value.name):"--"),Me=g([{key:"st_mtime",title:()=>ze("file.properties.modifiedTime"),width:154,render:e=>i(e.st_mtime)},{key:"st_size",title:()=>ze("file.properties.size"),width:80,render:e=>l(e.st_size)},{key:"md5",title:()=>ze("file.properties.md5"),ellipsis:{tooltip:!0}},m({width:110,options:e=>[{label:ze("file.properties.view"),onClick:()=>{!async function(){v(0,"".concat(Se.value.path,"/").concat(Se.value.name),Fe.value)}()}},{label:ze("file.properties.restore"),onClick:()=>{!async function(e){f({title:ze("file.properties.restoreHistoryFiles"),width:480,content:()=>x(w,null,[x("div",null,[ze("file.properties.restoreHistoryConfirm",{time:i(e.st_mtime)})]),x("div",{class:"mt-8px text-12px text-default leading-[1.4]"},[ze("file.properties.restoreHistoryWarning")])]),onConfirm:async()=>{await async function(e,t){const i=o.loading(ze("file.properties.restoring"));try{const{status:i}=await s.post("/files?action=re_history",{filename:e,history:t},{requestOptions:{errorMessage:!1}});0===i?o.success(ze("file.properties.restoreSuccess")):o.error(ze("file.properties.restoreFailed"))}finally{i.close()}}("".concat(Se.value.path,"/").concat(Se.value.name),e.st_mtime)}})}(e)}}]})]),Ne=()=>{c(qe.value)};return y({open(){He.value=!0;!async function(e){Re.value=!0;try{const{message:t}=await s.post("/files?action=get_file_attribute",{filename:e},{requestOptions:{isOriginalResult:!0}});a(t)&&(Se.value=t)}finally{Re.value=!1}}(Pe.value.find(e=>e.nm==Ce.value[0]).path)},close(){He.value=!1}}),(s,a)=>{const o=M,d=n,m=N,f=p,c=q,v=u,y=U,h=t,$=r,g=e,b=j("table");return z(),k(g,{show:P(He),"onUpdate:show":a[1]||(a[1]=e=>F(He)?He.value=e:null),width:580,title:"[".concat(P(Se).name,"] - ").concat(s.$t("file.properties.fileProperties"))},{default:T(()=>[C("div",W,[x($,{show:P(Re)},{default:T(()=>[x(h,{value:P(Oe),"onUpdate:value":a[0]||(a[0]=e=>F(Oe)?Oe.value=e:null)},{default:T(()=>[x(c,{name:"general",tab:s.$t("file.properties.general")},{default:T(()=>[C("div",I,[C("div",K,[C("div",L,[C("div",D,[x(_,{ext:"".concat(P(Se).st_type),size:"large"},null,8,["ext"])]),C("div",E,[C("div",V,[x(o,{value:P(Se).name,readonly:""},null,8,["value"])])])])]),C("div",A,[x(d)]),C("div",B,[C("div",G,[C("div",J,H(s.$t("file.properties.type"))+":",1),C("div",Q,H(P(Se).st_type),1)]),C("div",X,[C("div",Y,H(s.$t("file.properties.location"))+":",1),C("div",Z,[C("div",ee,[x(m,null,{default:T(()=>[O(H(P(qe)),1)]),_:1})]),x(f,{class:"ml-10px cursor-pointer",name:"common-copy",size:"14",onClick:Ne})])]),C("div",te,[C("div",ie,H(s.$t("file.properties.size"))+":",1),C("div",le,H(P(l)(P(Se).st_size)),1)])]),C("div",se,[x(d)]),C("div",ae,[C("div",oe,[C("div",re,H(s.$t("file.properties.permissions"))+":",1),C("div",ne,H(P(Se).mode),1)]),C("div",pe,[C("div",ue,H(s.$t("file.properties.group"))+":",1),C("div",de,H(P(Se).group),1)]),C("div",me,[C("div",fe,H(s.$t("file.properties.user"))+":",1),C("div",ce,H(P(Se).user),1)])]),C("div",ve,[x(d)]),C("div",_e,[C("div",ye,[C("div",he,H(s.$t("file.properties.visitTime"))+":",1),C("div",$e,H(P(i)(P(Se).st_atime)),1)]),C("div",ge,[C("div",be,H(s.$t("file.properties.modifiedTime"))+":",1),C("div",xe,H(P(i)(P(Se).st_mtime)),1)])])])]),_:1},8,["tab"]),x(c,{name:"details",tab:s.$t("file.properties.details")},{default:T(()=>[R((z(),S("div",we,[x(v,null,{default:T(()=>[C("thead",null,[C("tr",null,[C("th",je,H(s.$t("file.properties.name")),1),C("th",null,H(s.$t("file.properties.value")),1)])]),C("tbody",null,[C("tr",null,[C("td",null,H(s.$t("file.properties.name")),1),C("td",null,H(P(Se).name),1)]),C("tr",null,[C("td",null,H(s.$t("file.properties.type")),1),C("td",null,H(P(Se).st_type),1)]),C("tr",null,[C("td",null,H(s.$t("file.properties.location")),1),C("td",null,H(P(Se).path),1)]),C("tr",null,[C("td",null,H(s.$t("file.properties.size")),1),C("td",null,H(P(l)(P(Se).st_size)),1)]),C("tr",null,[C("td",null,H(s.$t("file.properties.visitTime")),1),C("td",null,H(P(i)(P(Se).st_atime)),1)]),C("tr",null,[C("td",null,H(s.$t("file.properties.modifiedTime")),1),C("td",null,H(P(i)(P(Se).st_mtime)),1)]),C("tr",null,[C("td",null,H(s.$t("file.properties.metadataModificationTime")),1),C("td",null,H(P(i)(P(Se).st_mtime)),1)]),C("tr",null,[C("td",null,H(s.$t("file.properties.md5")),1),C("td",null,H(P(Se).md5),1)]),C("tr",null,[C("td",null,H(s.$t("file.properties.sha1")),1),C("td",null,H(P(Se).sha1),1)]),C("tr",null,[C("td",null,H(s.$t("file.properties.user")),1),C("td",null,H(P(Se).user),1)]),C("tr",null,[C("td",null,H(s.$t("file.properties.group")),1),C("td",null,H(P(Se).group),1)]),C("tr",null,[C("td",null,H(s.$t("file.properties.permissions")),1),C("td",null,H(P(Se).mode),1)]),C("tr",null,[C("td",null,H(s.$t("file.properties.uid")),1),C("td",null,H(P(Se).st_uid),1)]),C("tr",null,[C("td",null,H(s.$t("file.properties.gid")),1),C("td",null,H(P(Se).st_gid),1)]),C("tr",null,[C("td",null,H(s.$t("file.properties.numOfInodeLinks")),1),C("td",null,H(Number(P(Se).is_link)),1)]),C("tr",null,[C("td",null,H(s.$t("file.properties.inodeNodeNum")),1),C("td",null,H(P(Se).st_ino),1)]),C("tr",null,[C("td",null,H(s.$t("file.properties.inodeProtectionMode")),1),C("td",null,H(P(Se).st_mode),1)]),C("tr",null,[C("td",null,H(s.$t("file.properties.inodeResidentDevice")),1),C("td",null,H(P(Se).st_dev),1)])])]),_:1})])),[[b]])]),_:1},8,["tab"]),x(c,{name:"history",tab:s.$t("file.properties.history")},{default:T(()=>[C("div",ke,[x(y,{"max-height":"386px",columns:P(Me),data:P(Se).history||[]},null,8,["columns","data"])])]),_:1},8,["tab"])]),_:1},8,["value"])]),_:1},8,["show"])])]),_:1},8,["show","title"])}}}),[["__scopeId","data-v-f7957a5e"]]);export{ze as default};
