import{_ as e}from"./index.js?v=1762424784323";import{_ as t}from"./index107.js?v=1762424784323";import{a8 as i,n as l,t as s,d as a,m as o,S as r,q as n,_ as p,fS as u,p as d}from"./page_layout.js?v=1762424784323";import{f as m,a as f,i as c}from"./public.js?v=1762424784323";import{o as v,F as _}from"./index39.js?v=1762424784323";import{k as y,P as h,i as $,r as g,c as b,W as x,F as w,aK as j,a2 as k,V as z,a3 as T,S as C,U as P,ak as S,a4 as F,j as H,l as O,R as q}from"./vue.js?v=1762424784323";import{dQ as M,au as N,dc as R,dg as U}from"./naive.js?v=1762424784323";import"./common.js?v=1762424784323";import"./__commonjsHelpers__.js?v=1762424784323";import"./soft2.js?v=1762424784323";import"./soft.js?v=1762424784323";import"./site.js?v=1762424784323";import"./file2.js?v=1762424784323";import"./index.vue_vue_type_script_setup_true_lang7.js?v=1762424784323";const I={class:"properties-wrapper"},K={class:"content"},L={class:"info-group"},W={class:"info-item h-60px"},D={class:"info-item-label"},Q={class:"info-item-value"},V={class:"w-360px"},A={class:"my-10px"},B={class:"info-group"},E={class:"info-item"},G={class:"info-item-label"},J={class:"info-item-value"},X={class:"info-item"},Y={class:"info-item-label"},Z={class:"info-item-value flex"},ee={class:"max-w-300px"},te={class:"info-item",style:{"margin-bottom":"0"}},ie={class:"info-item-label"},le={class:"info-item-value"},se={class:"my-10px"},ae={class:"info-group"},oe={class:"info-item"},re={class:"info-item-label"},ne={class:"info-item-value"},pe={class:"info-item"},ue={class:"info-item-label"},de={class:"info-item-value"},me={class:"info-item",style:{"margin-bottom":"0"}},fe={class:"info-item-label"},ce={class:"info-item-value"},ve={class:"my-10px"},_e={class:"info-group"},ye={class:"info-item"},he={class:"info-item-label"},$e={class:"info-item-value"},ge={class:"info-item"},be={class:"info-item-label"},xe={class:"info-item-value"},we={class:"content overflow-auto"},je={width:"200"},ke={class:"content"},ze=d(y({__name:"Properties",setup(d,{expose:y}){const{t:ze}=h(),Te=$("fileStore"),{choosedKeys:Ce,fileList:Pe,currentPath:Se}=Te,Fe=g(!1),He=g("general"),Oe=g(!1),qe=g({st_atime:0,st_mtime:0,st_ctime:0}),Me=b(()=>qe.value.path?"".concat(qe.value.path,"/").concat(qe.value.name):"--"),Ne=g([{key:"st_mtime",title:()=>ze("file.properties.modifiedTime"),width:154,render:e=>i(e.st_mtime)},{key:"st_size",title:()=>ze("file.properties.size"),width:80,render:e=>l(e.st_size)},{key:"md5",title:()=>ze("file.properties.md5"),ellipsis:{tooltip:!0}},m({width:110,options:e=>[{label:ze("file.properties.view"),onClick:()=>{!async function(){v(0,"".concat(qe.value.path,"/").concat(qe.value.name),Se.value)}()}},{label:ze("file.properties.restore"),onClick:()=>{!async function(e){f({title:ze("file.properties.restoreHistoryFiles"),width:480,content:()=>x(w,null,[x("div",null,[ze("file.properties.restoreHistoryConfirm",{time:i(e.st_mtime)})]),x("div",{class:"mt-8px text-12px text-default leading-[1.4]"},[ze("file.properties.restoreHistoryWarning")])]),onConfirm:async()=>{await async function(e,t){const i=o.loading(ze("file.properties.restoring"));try{const{status:i}=await s.post("/files?action=re_history",{filename:e,history:t},{requestOptions:{errorMessage:!1}});0===i?o.success(ze("file.properties.restoreSuccess")):o.error(ze("file.properties.restoreFailed"))}finally{i.close()}}("".concat(qe.value.path,"/").concat(qe.value.name),e.st_mtime)}})}(e)}}]})]),Re=()=>{c(Me.value)};return y({open(){Fe.value=!0;!async function(e){Oe.value=!0;try{const{message:t}=await s.post("/files?action=get_file_attribute",{filename:e},{requestOptions:{isOriginalResult:!0}});a(t)&&(qe.value=t)}finally{Oe.value=!1}}(Pe.value.find(e=>e.nm==Ce.value[0]).path)},close(){Fe.value=!1}}),(s,a)=>{const o=N,d=n,m=R,f=p,c=M,v=u,y=U,h=t,$=r,g=e,b=j("table");return z(),k(g,{show:P(Fe),"onUpdate:show":a[1]||(a[1]=e=>S(Fe)?Fe.value=e:null),width:580,title:"[".concat(P(qe).name,"] - ").concat(s.$t("file.properties.fileProperties"))},{default:T(()=>[C("div",I,[x($,{show:P(Oe)},{default:T(()=>[x(h,{value:P(He),"onUpdate:value":a[0]||(a[0]=e=>S(He)?He.value=e:null)},{default:T(()=>[x(c,{name:"general",tab:s.$t("file.properties.general")},{default:T(()=>[C("div",K,[C("div",L,[C("div",W,[C("div",D,[x(_,{ext:"".concat(P(qe).st_type),size:"large"},null,8,["ext"])]),C("div",Q,[C("div",V,[x(o,{value:P(qe).name,readonly:""},null,8,["value"])])])])]),C("div",A,[x(d)]),C("div",B,[C("div",E,[C("div",G,F(s.$t("file.properties.type"))+":",1),C("div",J,F(P(qe).st_type),1)]),C("div",X,[C("div",Y,F(s.$t("file.properties.location"))+":",1),C("div",Z,[C("div",ee,[x(m,null,{default:T(()=>[H(F(P(Me)),1)]),_:1})]),x(f,{class:"ml-10px cursor-pointer",name:"common-copy",size:"14",onClick:Re})])]),C("div",te,[C("div",ie,F(s.$t("file.properties.size"))+":",1),C("div",le,F(P(l)(P(qe).st_size)),1)])]),C("div",se,[x(d)]),C("div",ae,[C("div",oe,[C("div",re,F(s.$t("file.properties.permissions"))+":",1),C("div",ne,F(P(qe).mode),1)]),C("div",pe,[C("div",ue,F(s.$t("file.properties.group"))+":",1),C("div",de,F(P(qe).group),1)]),C("div",me,[C("div",fe,F(s.$t("file.properties.user"))+":",1),C("div",ce,F(P(qe).user),1)])]),C("div",ve,[x(d)]),C("div",_e,[C("div",ye,[C("div",he,F(s.$t("file.properties.visitTime"))+":",1),C("div",$e,F(P(i)(P(qe).st_atime)),1)]),C("div",ge,[C("div",be,F(s.$t("file.properties.modifiedTime"))+":",1),C("div",xe,F(P(i)(P(qe).st_mtime)),1)])])])]),_:1},8,["tab"]),x(c,{name:"details",tab:s.$t("file.properties.details")},{default:T(()=>[O((z(),q("div",we,[x(v,null,{default:T(()=>[C("thead",null,[C("tr",null,[C("th",je,F(s.$t("file.properties.name")),1),C("th",null,F(s.$t("file.properties.value")),1)])]),C("tbody",null,[C("tr",null,[C("td",null,F(s.$t("file.properties.name")),1),C("td",null,F(P(qe).name),1)]),C("tr",null,[C("td",null,F(s.$t("file.properties.type")),1),C("td",null,F(P(qe).st_type),1)]),C("tr",null,[C("td",null,F(s.$t("file.properties.location")),1),C("td",null,F(P(qe).path),1)]),C("tr",null,[C("td",null,F(s.$t("file.properties.size")),1),C("td",null,F(P(l)(P(qe).st_size)),1)]),C("tr",null,[C("td",null,F(s.$t("file.properties.visitTime")),1),C("td",null,F(P(i)(P(qe).st_atime)),1)]),C("tr",null,[C("td",null,F(s.$t("file.properties.modifiedTime")),1),C("td",null,F(P(i)(P(qe).st_mtime)),1)]),C("tr",null,[C("td",null,F(s.$t("file.properties.metadataModificationTime")),1),C("td",null,F(P(i)(P(qe).st_mtime)),1)]),C("tr",null,[C("td",null,F(s.$t("file.properties.md5")),1),C("td",null,F(P(qe).md5),1)]),C("tr",null,[C("td",null,F(s.$t("file.properties.sha1")),1),C("td",null,F(P(qe).sha1),1)]),C("tr",null,[C("td",null,F(s.$t("file.properties.user")),1),C("td",null,F(P(qe).user),1)]),C("tr",null,[C("td",null,F(s.$t("file.properties.group")),1),C("td",null,F(P(qe).group),1)]),C("tr",null,[C("td",null,F(s.$t("file.properties.permissions")),1),C("td",null,F(P(qe).mode),1)]),C("tr",null,[C("td",null,F(s.$t("file.properties.uid")),1),C("td",null,F(P(qe).st_uid),1)]),C("tr",null,[C("td",null,F(s.$t("file.properties.gid")),1),C("td",null,F(P(qe).st_gid),1)]),C("tr",null,[C("td",null,F(s.$t("file.properties.numOfInodeLinks")),1),C("td",null,F(Number(P(qe).is_link)),1)]),C("tr",null,[C("td",null,F(s.$t("file.properties.inodeNodeNum")),1),C("td",null,F(P(qe).st_ino),1)]),C("tr",null,[C("td",null,F(s.$t("file.properties.inodeProtectionMode")),1),C("td",null,F(P(qe).st_mode),1)]),C("tr",null,[C("td",null,F(s.$t("file.properties.inodeResidentDevice")),1),C("td",null,F(P(qe).st_dev),1)])])]),_:1})])),[[b]])]),_:1},8,["tab"]),x(c,{name:"history",tab:s.$t("file.properties.history")},{default:T(()=>[C("div",ke,[x(y,{"max-height":"386px",columns:P(Ne),data:P(qe).history||[]},null,8,["columns","data"])])]),_:1},8,["tab"])]),_:1},8,["value"])]),_:1},8,["show"])])]),_:1},8,["show","title"])}}}),[["__scopeId","data-v-f7957a5e"]]);export{ze as default};
