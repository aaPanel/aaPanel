import{_ as e}from"./index.js?v=1764830988434";import{_ as t}from"./index.vue_vue_type_script_setup_true_lang5.js?v=1764830988434";import{_ as a}from"./index.vue_vue_type_script_setup_true_lang7.js?v=1764830988434";import{_ as l,c as s,d as i,h as n,I as o,f as d,u as p,e as r,a as u}from"./public.js?v=1764830988434";import{_}from"./index.vue_vue_type_script_setup_true_lang8.js?v=1764830988434";import{x as c,m,aF as h,d as x,q as f,dA as y,p as v}from"./page_layout.js?v=1764830988434";import{q as g,r as w,t as S,v as P,w as b,x as k,y as j,z as W,A as R,B as $,C as U,D as C}from"./index85.js?v=1764830988434";import{_ as z}from"./index.vue_vue_type_script_setup_true_lang.js?v=1764830988434";import{k as L,P as T,r as B,e as I,R as q,V as A,W as D,U as N,a3 as F,S as H,a4 as K,ak as M,ae as O,l as V,j as E,v as J,av as G,c as Q,N as X,ay as Y}from"./vue.js?v=1764830988434";import{dR as Z,au as ee,aC as te}from"./naive.js?v=1764830988434";import{_ as ae}from"./index.vue_vue_type_script_setup_true_lang19.js?v=1764830988434";import{u as le}from"./file.js?v=1764830988434";import"./common.js?v=1764830988434";import"./__commonjsHelpers__.js?v=1764830988434";import"./index.vue_vue_type_script_setup_true_lang6.js?v=1764830988434";import"./index133.js?v=1764830988434";import"./index.vue_vue_type_script_setup_true_lang9.js?v=1764830988434";import"./index131.js?v=1764830988434";import"./php.js?v=1764830988434";import"./soft.js?v=1764830988434";import"./site.js?v=1764830988434";import"./site4.js?v=1764830988434";import"./index.vue_vue_type_script_setup_true_lang13.js?v=1764830988434";import"./index246.js?v=1764830988434";import"./index97.js?v=1764830988434";import"./index107.js?v=1764830988434";import"./index.vue_vue_type_script_setup_true_lang10.js?v=1764830988434";import"./index96.js?v=1764830988434";import"./index98.js?v=1764830988434";import"./theme-monokai.js?v=1764830988434";import"./refersh.js?v=1764830988434";import"./index.vue_vue_type_script_setup_true_lang16.js?v=1764830988434";import"./index102.js?v=1764830988434";import"./ssl.js?v=1764830988434";import"./cert.js?v=1764830988434";import"./ssl-lets-progress.js?v=1764830988434";import"./utils3.js?v=1764830988434";import"./index218.js?v=1764830988434";import"./paypal-js.js?v=1764830988434";import"./upload.js?v=1764830988434";const se={class:"p-20px"},ie={class:"w-280px"},ne=L({__name:"index",props:{data:{}},setup(e,{expose:t}){const{t:a}=T(),s=e,{getList:i}=s.data,n=B(null),o=I({name:""}),d={name:{required:!0,message:a("Security.Conf.Index_28"),trigger:["blur","input"]}};return t({onConfirm:async({hide:e})=>{var t;await(null==(t=n.value)?void 0:t.validate()),await g({...o}),null==i||i(),e()}}),(e,t)=>{const a=ee,s=Z,i=z,p=l;return A(),q("div",se,[D(i,{ref_key:"formRef",ref:n,model:N(o),rules:d},{default:F(()=>[D(s,{label:e.$t("Site.TableRow.index_2"),path:"name"},{default:F(()=>[H("div",ie,[D(a,{type:"text",value:N(o).name,"onUpdate:value":t[0]||(t[0]=e=>N(o).name=e),placeholder:e.$t("WP.Sets.index_11")},null,8,["value","placeholder"])])]),_:1},8,["label"])]),_:1},8,["model"]),D(p,{class:"mt-4px"},{default:F(()=>[H("li",null,K(e.$t("WP.Sets.index_12")),1)]),_:1})])}}}),oe={class:"p-20px"},de=L({__name:"index",props:{data:{}},setup(e,{expose:t}){const{t:a}=T(),o=e,{id:d}=o.data,{keys:p,table:r,columns:u}=s([{type:"selection",width:40},{key:"name",title:a("Site.TableRow.index_2")}]),{loading:_,setLoading:h}=i();(async()=>{try{h(!0);const{message:e}=await w();c(e)&&(r.data=e)}finally{p.value=[],h(!1)}})();return t({onConfirm:async()=>{if(!p.value.length)return m.error(a("WP.Sets.index_18")),!1;const e=p.value.join(",");await S({set_id:d,site_ids:e})}}),(e,t)=>{const a=n,s=l;return A(),q("div",oe,[D(a,{"checked-row-keys":N(p),"onUpdate:checkedRowKeys":t[0]||(t[0]=e=>M(p)?p.value=e:null),"row-key":"id",loading:N(_),data:N(r).data,"max-height":220,columns:N(u)},null,8,["checked-row-keys","loading","data","columns"]),D(s,{class:"mt-16px"},{default:F(()=>[H("li",null,K(e.$t("WP.Sets.index_17")),1),H("li",null,K(e.$t("WP.Sets.index_19")),1)]),_:1})])}}}),pe={class:"flex-1 flex flex-col gap-10px"},re="/tmp",ue=L({__name:"upload-btn",props:{path:{},pathModifiers:{},name:{default:""},nameModifiers:{}},emits:["update:path","update:name"],setup(e){const t=O(e,"path"),a=O(e,"name"),l=B([]),{t:s}=T(),i=async({file:e})=>{const{close:i}=m.loading(s("Component.Api.index_4"));try{const l=new FormData;l.append("f_path",re),l.append("f_name",e.name),l.append("f_start","0"),e.file&&(l.append("blob",e.file),l.append("f_size",e.file.size.toString()));const{message:s}=await le(l);x(s)&&m.success(s.result),a.value=e.name,t.value=re+"/"+e.name}finally{l.value=[],i()}};return(e,t)=>{const s=te,n=h;return A(),q("div",pe,[D(n,{"file-list":N(l),"onUpdate:fileList":t[0]||(t[0]=e=>M(l)?l.value=e:null),action:"",accept:".zip",multiple:!1,"show-file-list":!1,"custom-request":i},{default:F(()=>[D(s,{type:"primary"},{default:F(()=>[E(K(e.$t("WP.Sets.index_31")),1)]),_:1})]),_:1},8,["file-list"]),V(H("div",{class:"text-font3"},K(e.$t("WP.Sets.index_32")),513),[[J,!a.value]]),V(H("div",{class:"text-primary"},K(e.$t("WP.Sets.index_33",[a.value])),513),[[J,a.value]])])}}}),_e={class:"p-20px"},ce={class:"w-240px"},me={class:"w-240px"},he={class:"my-16px"},xe={class:"leading-20px text-font2"},fe=L({__name:"index",props:{id:{type:Number,default:0},type:{type:Number,default:1},refresh:{type:Function}},setup(e,{expose:t}){const a=G("formRef"),l=G("pathItemRef"),s=B(!1),i=B(""),{t:n}=T(),o=Q(()=>1===e.type?n("WP.Sets.index_28"):n("WP.Sets.index_29")),d=Q(()=>1===e.type?n("WP.Sets.index_24"):n("WP.Sets.index_25")),p=I({set_id:e.id,path:"",type:1===e.type?"plugin":"theme",slug:"",title:""}),r={path:{trigger:["change"],validator:(e,t)=>!!t||new Error(n("WP.Sets.index_30"))}},u=e=>{e&&i.value?(p.slug=i.value.replace(".zip",""),p.title=i.value.replace(".zip","")):(p.slug="",p.title="")},_=()=>{var e;null==(e=l.value)||e.restoreValidation()},c=e=>{s.value&&(p.slug=e.replace(".zip",""),p.title=e.replace(".zip",""))};return t({onConfirm:async()=>{var t,l;await(null==(t=a.value)?void 0:t.validate()),await P(X(p)),null==(l=e.refresh)||l.call(e)}}),(e,t)=>{const n=Z,m=ee,h=ae,x=z,y=f;return A(),q("div",_e,[D(x,{ref_key:"formRef",ref:a,model:N(p),rules:r,"label-width":"160px"},{default:F(()=>[D(n,{ref_key:"pathItemRef",ref:l,label:N(o),path:"path"},{default:F(()=>[D(ue,{path:N(p).path,"onUpdate:path":[t[0]||(t[0]=e=>N(p).path=e),_],name:N(i),"onUpdate:name":[t[1]||(t[1]=e=>M(i)?i.value=e:null),c]},null,8,["path","name"])]),_:1},8,["label"]),D(h,{show:N(s),"onUpdate:show":[t[4]||(t[4]=e=>M(s)?s.value=e:null),u],title:e.$t("WP.Sets.index_20")},{default:F(()=>[D(n,{label:e.$t("WP.Sets.index_21")},{default:F(()=>[H("div",ce,[D(m,{value:N(p).slug,"onUpdate:value":t[2]||(t[2]=e=>N(p).slug=e),placeholder:e.$t("WP.Sets.index_22")},null,8,["value","placeholder"])])]),_:1},8,["label"]),D(n,{label:e.$t("WP.Sets.index_23")},{default:F(()=>[H("div",me,[D(m,{value:N(p).title,"onUpdate:value":t[3]||(t[3]=e=>N(p).title=e),placeholder:N(d)},null,8,["value","placeholder"])])]),_:1},8,["label"])]),_:1},8,["show","title"])]),_:1},8,["model"]),H("div",he,[D(y)]),H("div",xe,[H("p",null,K(e.$t("WP.Sets.index_26")),1),H("p",null,K(e.$t("WP.Sets.index_27")),1)])])}}}),ye={class:"p-20px"},ve=v(L({__name:"index",props:{id:{},type:{},getList:{}},setup(e){const{t:a}=T(),r=G("searchRef"),u=e,{id:h,type:v,getList:g}=u,w=()=>{p({title:a(1===v?"WP.Sets.index_34":"WP.Sets.index_35"),width:500,footer:!0,data:{id:h,type:v,refresh:Z},component:fe})},{keys:S,table:P,columns:U}=s([{key:"title",title:a("Site.TableRow.index_2"),width:"70%"},o({key:"state",title:a("WP.TableRow.index_9"),minWidth:100,onClick:async(e,t)=>{await b({item_ids:t.id,state:e?1:0,type:v}),Z()}}),d({width:80,options:e=>[{label:a("Public.Btn.Del"),onClick:async()=>{await k({item_ids:e.id,type:v}),Z(),null==g||g()}}]})]),{keys:C,table:z,columns:L}=s([{type:"selection",width:40,disabled:e=>e.is_in_set},{key:"name",title:a("Site.TableRow.index_2"),width:"60%"},{key:"title",title:a("WP.index_19"),render:e=>D(y,{size:"small",readonly:!0,color:"#4fb233",value:e.rating/20},null)}]),B=I({p:1,p_size:999,keyword:"",set_id:h}),O=async()=>{var e;if(!C.value.length)return m.error(a("WP.Sets.index_14")),void(null==(e=r.value)||e.focus());const t=z.data.filter(e=>C.value.includes(e.slug)).map(e=>({slug:e.slug,title:e.name,description:1===v?e.short_description:e.description}));await W({set_id:h,items:JSON.stringify(t),type:v}),Z(),null==g||g()},V=async()=>{if(B.keyword)try{const{message:e}=1===v?await R(X(B),!0):await $(X(B),!0);x(e)&&(z.total=e.total,c(e.list)?(z.data=e.list,z.data.length||m.error(a("WP.Sets.index_16"))):(z.data=[],z.total=0))}finally{C.value=[]}else m.error(a("WP.Sets.index_15"))},{loading:J,setLoading:Q}=i(),Z=async()=>{try{Q(!0);const{message:e}=await j({set_id:h,type:v});c(e)&&(P.data=e)}finally{S.value=[],Q(!1)}};return Z(),(e,a)=>{const s=te,i=_,o=n,d=t,p=f,u=l;return A(),q("div",ye,[D(d,null,Y({toolsLeft:F(()=>[D(s,{type:"primary",onClick:O},{default:F(()=>[E(K(e.$t("Public.Btn.Add")),1)]),_:1}),D(s,{onClick:w},{default:F(()=>[E(K(e.$t("Public.Btn.Upload")),1)]),_:1})]),toolsRight:F(()=>[D(i,{ref_key:"searchRef",ref:r,value:N(B).keyword,"onUpdate:value":a[0]||(a[0]=e=>N(B).keyword=e),placeholder:e.$t("Public.Btn.Search"),onSearch:V},null,8,["value","placeholder"])]),_:2},[N(z).data.length?{name:"table",fn:F(()=>[D(o,{class:"custom-table",bordered:!1,"checked-row-keys":N(C),"onUpdate:checkedRowKeys":a[1]||(a[1]=e=>M(C)?C.value=e:null),"row-key":"slug","max-height":150,data:N(z).data,columns:N(L)},null,8,["checked-row-keys","data","columns"])]),key:"0"}:void 0]),1024),D(p,{class:"my-20px!"}),D(o,{loading:N(J),data:N(P).data,columns:N(U),"max-height":150},null,8,["loading","data","columns"]),D(u,{class:"mt-16px"},{default:F(()=>[H("li",null,K(e.$t("WP.Sets.index_13")),1),H("li",null,K(e.$t("WP.Sets.index_36")),1)]),_:1})])}}}),[["__scopeId","data-v-a0020a5f"]]),ge={class:"p-20px"},we=L({__name:"index",setup(l,{expose:o}){const{t:p}=T(),c=r(p("WP.Sets.index_2")),m=I({p:1,p_size:10,keyword:""}),h=()=>{j.show=!0},f=()=>{m.p=1,b()},y=(e,t,a)=>{k.title=t,k.data.id=e.id,k.data.type=a,k.show=!0},{keys:v,table:g,columns:w}=s([{key:"name",title:p("Site.TableRow.index_2"),width:"40%",ellipsis:{tooltip:{width:"trigger"}}},d({title:p("WP.Sets.index_3"),align:"center",options:e=>[{label:p("WP.Sets.index_4",[e.plugins.length]),onClick:()=>{y(e,p("WP.Sets.index_5"),1)}}]}),d({title:p("WP.Sets.index_6"),align:"center",options:e=>[{label:p("WP.Sets.index_7",[e.themes.length]),onClick:()=>{y(e,p("WP.Sets.index_8"),2)}}]}),d({width:100,align:"center",options:e=>[{label:p("WP.TableRow.index_13"),disabled:!e.plugins.length&&!e.themes.length,onClick:()=>{c.data.id=e.id,c.show=!0}},{label:p("Public.Btn.Del"),onClick:()=>{u({title:"".concat(p("Site.TableOP.index_6")," [").concat(e.name,"]"),content:p("WP.Sets.index_9"),onConfirm:async({hide:t})=>{await U({set_id:e.id}),b(),t()}})}}]})]),{loading:S,setLoading:P}=i(),b=async()=>{try{P(!0);const{message:e}=await C(X(m));x(e)&&(g.data=e.list,g.total=e.total)}finally{v.value=[],P(!1)}},k=r(p("WP.Sets.index_5"),{getList:b}),j=r(p("WP.Sets.index_10"),{getList:b});return b(),o({init:b}),(l,s)=>{const i=te,o=_,d=n,p=a,r=t,u=e;return A(),q("div",ge,[D(r,null,{toolsLeft:F(()=>[D(i,{type:"primary",onClick:h},{default:F(()=>[E(K(l.$t("WP.Sets.index_1")),1)]),_:1})]),toolsRight:F(()=>[D(o,{value:N(m).keyword,"onUpdate:value":s[0]||(s[0]=e=>N(m).keyword=e),placeholder:l.$t("Security.History.Index_14"),onSearch:f},null,8,["value","placeholder"])]),table:F(()=>[D(d,{"max-height":250,loading:N(S),data:N(g).data,columns:N(w)},null,8,["loading","data","columns"])]),pageRight:F(()=>[D(p,{page:N(m).p,"onUpdate:page":s[1]||(s[1]=e=>N(m).p=e),"page-size":N(m).p_size,"onUpdate:pageSize":s[2]||(s[2]=e=>N(m).p_size=e),"item-count":N(g).total,onRefresh:b},null,8,["page","page-size","item-count"])]),_:1}),D(u,{show:N(j).show,"onUpdate:show":s[3]||(s[3]=e=>N(j).show=e),title:N(j).title,data:N(j).data,width:480,footer:!0,component:ne},null,8,["show","title","data"]),D(u,{show:N(k).show,"onUpdate:show":s[4]||(s[4]=e=>N(k).show=e),title:N(k).title,data:N(k).data,width:600,"min-height":350,footer:!1,component:ve},null,8,["show","title","data"]),D(u,{show:N(c).show,"onUpdate:show":s[5]||(s[5]=e=>N(c).show=e),title:N(c).title,data:N(c).data,width:480,"min-height":350,footer:!0,"confirm-text":l.$t("WP.TableRow.index_13"),component:de},null,8,["show","title","data","confirm-text"])])}}});export{we as default};
