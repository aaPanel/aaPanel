System.register(["./page_layout-legacy.js?v=1763625242172","./public-legacy.js?v=1763625242172","./index.vue_vue_type_script_setup_true_lang-legacy8.js?v=1763625242172","./vue-legacy.js?v=1763625242172","./logs-legacy.js?v=1763625242172","./index-legacy107.js?v=1763625242172","./index.vue_vue_type_script_setup_true_lang-legacy5.js?v=1763625242172","./index.vue_vue_type_script_setup_true_lang-legacy7.js?v=1763625242172","./naive-legacy.js?v=1763625242172","./index-legacy104.js?v=1763625242172","./index-legacy.js?v=1763625242172","./site-legacy.js?v=1763625242172","./logs.vue_vue_type_script_setup_true_lang-legacy.js?v=1763625242172","./common-legacy.js?v=1763625242172","./__commonjsHelpers__-legacy.js?v=1763625242172","./index.vue_vue_type_script_setup_true_lang-legacy6.js?v=1763625242172"],(function(e,t){"use strict";var a,l,n,s,i,o,c,r,d,u,p,g,_,y,x,m,v,f,b,h,w,k,C,S,N,j,L,$,P,R,U,T,W,q,I,z,B,H,F,A,K,D,E,O,V,X,G,J,M,Q,Y,Z,ee,te,ae,le;return{setters:[e=>{a=e.cz,l=e.x,n=e.j,s=e.cr,i=e.p,o=e.c,c=e.y,r=e.bm,d=e.o,u=e.m},e=>{p=e.d,g=e.c,_=e.h,y=e.u,x=e.a,m=e._},e=>{v=e._},e=>{f=e.k,b=e.r,h=e.e,w=e.R,k=e.S,C=e.X,S=e.V,N=e.U,j=e.a3,L=e.a2,$=e.an,P=e.F,R=e.O,U=e.l,T=e.v,W=e.H,q=e.a4,I=e.N,z=e.P,B=e.w,H=e.j,F=e.aj,A=e.c},e=>{K=e.c,D=e.e,E=e.f,O=e.h,V=e.s,X=e.i},e=>{G=e._},e=>{J=e._},e=>{M=e._},e=>{Q=e.aC,Y=e.bH,Z=e.dS},e=>{ee=e._},e=>{te=e._},e=>{ae=e.a},e=>{le=e._},null,null,null],execute:function(){var t=document.createElement("style");t.textContent=".item[data-v-5e09d3e2]{border:1px solid #e9e9e9}.list[data-v-5e09d3e2]{padding:10px;cursor:pointer}.list[data-v-5e09d3e2]:not(:last-child){border-bottom:1px solid #e9e9e9}.list[data-v-5e09d3e2]:hover{background:var(--log-type-list-hover-bg)}.list-active[data-v-5e09d3e2]{background:var(--log-type-list-active-bg);--un-text-opacity:1;color:rgb(32 165 58 / var(--un-text-opacity))}[data-v-5bc24312] .button-color{color:var(--color-error)}.website-box[data-v-0a3ec0ba]{display:flex;gap:16px;height:calc(100vh - 176px)}\n",document.head.appendChild(t);const ne={class:"flex flex-col w-240px"},se={class:"item flex-1 mt-10px overflow-hidden"},ie=["onClick"],oe=f({__name:"index",setup(e){const t=a(),i=b(""),o=h({search:""}),c=b([]),{loading:r,setLoading:d}=p(),u=async()=>{try{d(!0);const{message:e}=await K(I(o));l(e)&&(t.setWebsite(e[0].name),i.value=e[0].name,c.value=e)}finally{d(!1)}};return u(),(e,a)=>{const l=v,d=n,p=s;return w(),k("div",ne,[C(l,{value:S(o).search,"onUpdate:value":a[0]||(a[0]=e=>S(o).search=e),placeholder:e.$t("Logs.Panel.index_4"),onSearch:u},null,8,["value","placeholder"]),N("div",se,[C(p,{class:"h-full"},{default:j((()=>[S(r)?(w(),L(d,{key:0,height:"36px",text:"",repeat:6})):$("",!0),(w(!0),k(P,null,R(S(c),(e=>U((w(),k("div",{class:W(["list",{"list-active":S(i)==e.name}]),key:e.name,onClick:a=>{return l=e.name,t.setWebsite(l),void(i.value=l);var l}},q(e.name),11,ie)),[[T,!S(r)]]))),128))])),_:1})])])}}}),ce=i(oe,[["__scopeId","data-v-5e09d3e2"]]),re=f({__name:"index",setup(e,{expose:t}){const l=a(),{t:n}=z(),{keys:s,table:i,columns:r}=g([{key:"username",title:n("Ftp.Analysis.Index_27")},{key:"type",title:n("Logs.Panel.index_6")},{key:"log",title:n("Public.Btn.Details")},{key:"addtime",align:"right",title:n("Logs.Panel.index_7")}]),d=h({search:l.websiteName,p:1,limit:10,stype:"Site manager"}),{loading:u,setLoading:y}=p(),x=async()=>{try{y(!0);const{message:e}=await D(d);o(e)&&(i.data=e.data,i.total=c(e.page))}finally{s.value=[],y(!1)}};B((()=>l.websiteName),(e=>{e&&(d.p=1,d.search=e,x())}));const m=()=>{l.websiteName&&x()};return m(),t({getList:m}),(e,t)=>{const a=Q,l=_,n=M,o=J;return w(),L(o,{feedback:!1},{toolsLeft:j((()=>[C(a,{type:"primary",onClick:m},{default:j((()=>[H(q(e.$t("Public.Btn.Refresh")),1)])),_:1})])),table:j((()=>[C(l,{"checked-row-keys":S(s),"onUpdate:checkedRowKeys":t[0]||(t[0]=e=>F(s)?s.value=e:null),"row-key":"name",loading:S(u),data:S(i).data,columns:S(r)},null,8,["checked-row-keys","loading","data","columns"])])),pageRight:j((()=>[C(n,{page:S(d).p,"onUpdate:page":t[1]||(t[1]=e=>S(d).p=e),"page-size":S(d).limit,"onUpdate:pageSize":t[2]||(t[2]=e=>S(d).limit=e),"item-count":S(i).total,onRefresh:m},null,8,["page","page-size","item-count"])])),_:1})}}}),de={class:"flex flex-col h-full gap-8px"},ue={class:"flex-1 overflow-hidden"},pe=f({__name:"index",setup(e,{expose:t}){const l=a(),{loading:n,setLoading:s}=p(),i=b("None"),c=async()=>{s(!0);try{const{message:e}=await E({siteName:l.websiteName});o(e)&&(i.value=e.result?e.result.slice(-4e4):"None")}catch{i.value="None"}finally{s(!1)}};B((()=>l.websiteName),(e=>{e&&c()}));const r=()=>{l.websiteName&&c()};return r(),t({getList:r}),(e,t)=>{const a=Q,l=ee;return w(),k("div",de,[C(a,{class:"self-start",type:"primary",onClick:r},{default:j((()=>[H(q(e.$t("Public.Btn.Refresh")),1)])),_:1}),N("div",ue,[C(l,{loading:S(n),log:S(i)},null,8,["loading","log"])])])}}}),ge={class:"flex flex-col h-full gap-8px"},_e={class:"flex-1 overflow-hidden"},ye=f({__name:"index",setup(e,{expose:t}){const l=a(),{loading:n,setLoading:s}=p(),i=b("None"),c=async()=>{s(!0);try{const{message:e}=await O({siteName:l.websiteName});o(e)&&(i.value=e.result?e.result.slice(-4e4):"None")}catch{i.value="None"}finally{s(!1)}};B((()=>l.websiteName),(e=>{e&&c()}));const r=()=>{l.websiteName&&c()};return r(),t({getList:r}),(e,t)=>{const a=Q,l=ee;return w(),k("div",ge,[C(a,{class:"self-start",type:"primary",onClick:r},{default:j((()=>[H(q(e.$t("Public.Btn.Refresh")),1)])),_:1}),N("div",_e,[C(l,{loading:S(n),log:S(i)},null,8,["loading","log"])])])}}}),xe={class:"text-error"},me={class:"w-400px p-20px"},ve={class:"mb-16px"},fe=i(f({__name:"index",setup(e,{expose:t}){const l=a(),n=r(),{t:s}=z(),i=b(!1),c=b(0),{keys:v,table:f,columns:h}=g([{key:"start_time",title:s("Logs.Panel.index_13")},{key:"time",title:s("Public.Unit.Time"),render:e=>Number(e.time).toFixed(2)+" Sec"},{key:"xss",title:s("Site.TableRow.index_4"),render:e=>e.xss>0?C(d,{onClick:()=>{R("xss")}},{default:()=>[e.xss]}):e.xss},{key:"sql",title:s("Site.TableRow.index_5"),render:e=>e.sql>0?C(d,{onClick:()=>{R("sql")}},{default:()=>[e.sql]}):e.sql},{key:"san",title:s("Site.TableRow.index_6"),render:e=>e.san>0?C(d,{class:"button-color",onClick:()=>{R("san")}},{default:()=>[e.san]}):e.san},{key:"php",title:s("Logs.Panel.index_14"),render:e=>e.php>0?C(d,{onClick:()=>{R("php")}},{default:()=>[e.php]}):e.php},{key:"ip",title:s("Logs.Website.index_5"),render:e=>e.ip>0?C(d,{onClick:()=>{R("ip")}},{default:()=>[e.ip]}):e.ip},{key:"url",title:s("Logs.Website.index_1"),render:e=>e.url>0?C(d,{onClick:()=>{R("url")}},{default:()=>[e.url]}):e.url},{key:"log",title:s("Security.Anti.Index_7"),render:e=>e.xss+e.sql+e.san+e.php+e.ip+e.url}]),L=()=>{x({title:s("Site.Config.index_104"),content:s("Logs.Website.index_3",[l.websiteName]),onConfirm:async({hide:e})=>{try{await V({siteName:U.value}),i.value=!0,$()}finally{e()}}})},$=(e=0)=>{let t=setTimeout((async()=>{const{message:e}=await ae({path:U.value});o(e)&&(c.value=e.result,c.value>=100?(u.success(s("Site.Config.index_107")),i.value=!1,c.value=0,I(),clearTimeout(t)):$(1e3))}),e)},R=e=>{y({title:`[${e}] ${s("Site.Config.index_103")}`,data:{type:e,path:U.value},component:le})},U=A((()=>{let e="";switch(n.webserver){case"nginx":e=".log";break;case"apache":e="-access_log";break;default:e="_ols.access_log"}return`/www/wwwlogs/${l.websiteName}${e}`})),{loading:T,setLoading:W}=p(),I=async()=>{try{W(!0);const{message:e}=await X({siteName:U.value});o(e)&&(f.data=e.is_status?[e]:[])}finally{v.value=[],W(!1)}};return B((()=>l.websiteName),(e=>{e&&I()})),I(),t({init:I}),(e,t)=>{const a=Q,l=_,n=J,s=m,o=Y,r=te;return w(),k(P,null,[C(n,{feedback:!1},{toolsLeft:j((()=>[C(a,{type:"primary",onClick:L},{default:j((()=>[H(q(e.$t("Site.Config.index_104")),1)])),_:1})])),table:j((()=>[C(l,{"checked-row-keys":S(v),"onUpdate:checkedRowKeys":t[0]||(t[0]=e=>F(v)?v.value=e:null),"row-key":"name","max-height":1e3,loading:S(T),data:S(f).data,columns:S(h)},null,8,["checked-row-keys","loading","data","columns"])])),_:1}),C(s,{class:"mt-16px"},{default:j((()=>[N("li",null,[H(q(e.$t("Site.Config.index_108"))+" ",1),N("span",xe,q(e.$t("Site.Config.index_109")),1)]),N("li",null,q(e.$t("Site.Config.index_110")),1),N("li",null,q(e.$t("Site.Config.index_111")),1),N("li",null,q(e.$t("Site.Config.index_112")),1),N("li",null,[C(d,{href:"https://www.aapanel.com/forum/d/3351-nginx-waf-instructions",target:"_blank"},{default:j((()=>[H(q(e.$t("Site.Config.index_113")),1)])),_:1}),H(" "+q(e.$t("Site.Config.index_114")),1)])])),_:1}),C(r,{show:S(i),"onUpdate:show":t[1]||(t[1]=e=>F(i)?i.value=e:null)},{default:j((()=>[N("div",me,[N("div",ve,q(e.$t("Site.Config.index_115")),1),C(o,{type:"line",status:"success",height:24,percentage:S(c),"border-radius":4,"indicator-placement":"inside"},null,8,["percentage"])])])),_:1},8,["show"])],64)}}}),[["__scopeId","data-v-5bc24312"]]),be=f({__name:"index",setup(e){const{t:t}=z(),a=b("operation"),l=[{key:"operation",label:t("Security.Tabs.Index_7"),component:re},{key:"access",label:t("Logs.Website.index_2"),component:pe},{key:"error",label:t("Logs.Website.index_4"),component:ye},{key:"security",label:t("Site.Config.index_102"),component:fe}];return(e,t)=>{const n=G;return w(),L(n,{class:"h-full",value:S(a),"onUpdate:value":t[0]||(t[0]=e=>F(a)?a.value=e:null),options:l},null,8,["value"])}}}),he={class:"website-box"};e("default",i(f({__name:"index",setup(e){const t=r();return(async()=>{await t.getPHPConfig()})(),(e,t)=>{const a=Z;return w(),L(a,{class:"p-16px"},{default:j((()=>[N("div",he,[C(ce),C(be)])])),_:1})}}}),[["__scopeId","data-v-0a3ec0ba"]]))}}}));
