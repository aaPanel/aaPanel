import{k as e,P as a,X as t,w as l,R as s,S as n,a3 as i,j as o,a4 as r,V as d,aj as u,r as c,e as m,a0 as p,a2 as v,O as _,H as h,au as x,U as f,I as k,F as g,an as w,a6 as y,l as b,v as C,o as T,b as j}from"./vue.js?v=1763625242172";import{dE as E,x as L,f as U,_ as S,p as I}from"./page_layout.js?v=1763625242172";import{c as P,f as R,a as D,d as F,h as $,i as B,e as q}from"./public.js?v=1763625242172";import{_ as z}from"./index107.js?v=1763625242172";import{_ as H}from"./index.vue_vue_type_script_setup_true_lang5.js?v=1763625242172";import{d as K,g as O,e as X,a as V,b as Y,c as A}from"./term.js?v=1763625242172";import{o as G,T as J}from"./terminal2.js?v=1763625242172";import{aC as M,au as N,dP as Q,d9 as W,dS as Z}from"./naive.js?v=1763625242172";import{_ as ee}from"./index.js?v=1763625242172";import{_ as ae}from"./index.vue_vue_type_script_setup_true_lang.js?v=1763625242172";import"./__commonjsHelpers__.js?v=1763625242172";import"./common.js?v=1763625242172";import"./index.vue_vue_type_script_setup_true_lang6.js?v=1763625242172";import"./xterm.js?v=1763625242172";import"./xterm-addon-canvas.js?v=1763625242172";const te=e({__name:"index",setup(e,{expose:c}){const{t:m}=a(),p=E(),{keys:v,table:_,columns:h}=P([{key:"host",title:m("Term.index_8"),ellipsis:{tooltip:{width:"trigger"}},render:e=>t("span",{class:"cursor-pointer w-100%",onClick:()=>f(e)},[e.host])},R({width:130,options:e=>[{label:m("Site.TableOP.index_7"),onClick:()=>{const a={title:m("Term.index_22"),data:{isEdit:!0,row:e}};G(a)}},{label:m("Public.Btn.Del"),onClick:()=>{D({title:m("Term.index_6"),content:m("Term.index_7",[e.host]),onConfirm:async({hide:a})=>{await K({host:e.host}),w(),a()}})}}]})]),x=()=>{const e={title:m("Term.index_19"),data:{isEdit:!1}};G(e)},f=e=>{p.server={...e,time:new Date}},{loading:k,setLoading:g}=F(),w=async()=>{try{g(!0);const{message:e}=await O();L(e)&&(_.data=e)}finally{v.value=[],g(!1)}};return w(),l((()=>p.isRefresh),(e=>{e&&(p.setRefresh(!1),w())})),c({init:w}),(e,a)=>{const l=M,c=$,m=H;return s(),n("div",null,[t(m,null,{toolsLeft:i((()=>[t(l,{type:"primary",onClick:x},{default:i((()=>[o(r(e.$t("Term.index_19")),1)])),_:1})])),table:i((()=>[t(c,{"checked-row-keys":d(v),"onUpdate:checkedRowKeys":a[0]||(a[0]=e=>u(v)?v.value=e:null),loading:d(k),"max-height":"calc(100vh - 250px)",data:d(_).data,columns:d(h)},null,8,["checked-row-keys","loading","data","columns"])])),_:1})])}}}),le={class:"p-20px"},se=e({__name:"form",props:{data:{}},setup(e,{expose:l}){const{t:o}=a(),r=e,{isEdit:u,row:p,getList:v}=r.data,_=c(null),h=m({name:"",content:""}),x={name:{required:!0,message:o("Security.Conf.Index_28"),trigger:["blur","input"]},content:{required:!0,message:o("Security.Conf.Index_28"),trigger:["blur","input"]}};return u&&p&&(h.name=p.title,h.content=p.shell),l({onConfirm:async({hide:e})=>{var a;await(null==(a=_.value)?void 0:a.validate()),u?await X({shell:h.content,title:p?p.title:"",new_title:h.name}):await V({shell:h.content,title:h.name}),null==v||v(),e()}}),(e,a)=>{const l=N,o=Q,r=ae;return s(),n("div",le,[t(r,{ref_key:"formRef",ref:_,model:d(h),rules:x},{default:i((()=>[t(o,{label:e.$t("Docker.Compose.form.index_3"),path:"name"},{default:i((()=>[t(l,{class:"w-280px!",value:d(h).name,"onUpdate:value":a[0]||(a[0]=e=>d(h).name=e),placeholder:e.$t("Term.idnex_1")},null,8,["value","placeholder"])])),_:1},8,["label"]),t(o,{label:e.$t("Docker.LocalImage.build_5"),path:"content"},{default:i((()=>[t(l,{class:"w-280px!",type:"textarea",rows:6,value:d(h).content,"onUpdate:value":a[1]||(a[1]=e=>d(h).content=e),placeholder:e.$t("Term.index_2")},null,8,["value","placeholder"])])),_:1},8,["label"])])),_:1},8,["model"])])}}}),ne=e({__name:"index",setup(e,{expose:l}){const{t:c}=a(),{keys:m,table:p,columns:v}=P([{key:"title",title:c("Term.index_4"),ellipsis:{tooltip:{width:"trigger"}},render:e=>t("span",{class:"cursor-pointer w-100%",onClick:()=>{_(e.shell)}},[e.title])},R({width:130,options:e=>[{label:c("Public.Btn.Copy"),onClick:()=>{_(e.shell)}},{label:c("Public.Btn.Edit"),onClick:()=>{w(e)}},{label:c("Public.Btn.Del"),onClick:()=>{D({title:c("Term.index_20"),content:c("Term.index_21",[e.title]),onConfirm:async({hide:a})=>{await Y({title:e.title}),f(),a()}})}}]})]),_=e=>{B(e)},{loading:h,setLoading:x}=F(),f=async()=>{try{x(!0);const{message:e}=await A();L(e)&&(p.data=e)}finally{m.value=[],x(!1)}},k=q(c("Term.index_3"),{isEdit:!1,getList:f}),g=()=>{k.data.isEdit=!1,k.title=c("Term.index_3"),k.show=!0},w=e=>{k.data.row=e,k.data.isEdit=!0,k.title=c("Term.index_5"),k.show=!0};return f(),l({init:f}),(e,a)=>{const l=M,c=$,_=H,x=ee;return s(),n("div",null,[t(_,null,{toolsLeft:i((()=>[t(l,{type:"primary",onClick:g},{default:i((()=>[o(r(e.$t("Term.index_3")),1)])),_:1})])),table:i((()=>[t(c,{"checked-row-keys":d(m),"onUpdate:checkedRowKeys":a[0]||(a[0]=e=>u(m)?m.value=e:null),loading:d(h),"max-height":"calc(100vh - 250px)",data:d(p).data,columns:d(v)},null,8,["checked-row-keys","loading","data","columns"])])),_:1}),t(x,{show:d(k).show,"onUpdate:show":a[1]||(a[1]=e=>d(k).show=e),title:d(k).title,data:d(k).data,width:480,footer:!0,component:se},null,8,["show","title","data"])])}}}),ie=e({__name:"index",setup(e){const{t:l}=a(),i=c("server"),o=[{key:"server",label:l("Term.index_23"),component:te},{key:"command",label:l("Term.index_24"),component:ne}];return(e,a)=>{const l=z;return s(),n("div",null,[t(l,{class:"w-300px!",value:d(i),"onUpdate:value":a[0]||(a[0]=e=>u(i)?i.value=e:null),options:o},null,8,["value"])])}}}),oe=["onClick","onContextmenu"],re=["title"],de=["onClick"],ue={class:"terminal bg-#333333"},ce=I(e({__name:"index",setup(e){const{t:u}=a(),m=E(),{isFull:T,server:j,isShow:L}=p(m),I=c([{id:"aaaaaaaaa",host:"127.0.0.1",port:22,ps:u("Database.form.index_12"),state:!0}]),P=["Copy session","Close session","Close to right","Close other"],R=c("aaaaaaaaa"),D=()=>{const e={title:u("Term.index_19"),data:{isEdit:!1}};G(e)},F=e=>{const a=U(9,"letter");I.value.push({id:a,host:e.host,port:e.port,ps:e.ps,state:!0}),setTimeout((()=>{$(a)}),20)},$=e=>{R.value=e},B=(e,a)=>{I.value=I.value.map((t=>t.id===e?{...t,state:a}:t))},q=e=>{I.value=I.value.filter((a=>a.id!==e)),R.value=I.value.length>0?I.value[I.value.length-1].id:"aaaaaaaaa"},z=c(!1),H=c(0),K=c(0),O=c({id:"",host:"",port:0,ps:"",state:!1});return document.addEventListener("click",(()=>{z.value=!1})),l((()=>j.value),(e=>{null!==e&&F(e)}),{deep:!0}),(e,a)=>{const l=S,u=W;return s(),v(u,{vertical:"",class:"gap-0!"},{default:i((()=>[t(u,{class:"head gap-0! xterm-head"},{default:i((()=>[(s(!0),n(g,null,_(d(I),(e=>(s(),n("div",{key:e.id,class:h(["item",{"item-active":d(R)===e.id}]),onClick:a=>$(e.id),onContextmenu:x((a=>{return t=a,l=e,O.value=l,H.value=t.clientX,K.value=t.clientY,void(z.value=!0);var t,l}),["prevent"])},[f("div",{class:"text",title:e.ps},[f("span",{class:h(["icon",{"icon-active":!e.state}])},null,2),o(r(e.ps?e.ps:e.host),1)],8,re),t(l,{name:"base-close",class:"close-terminal",size:16,onClick:x((a=>q(e.id)),["stop"])},null,8,["onClick"]),d(z)?(s(),n("div",{key:0,class:"context-menu",style:k({top:d(K)-20+"px",left:d(H)-180+"px"})},[f("ul",null,[(s(),n(g,null,_(P,((e,a)=>f("li",{key:a,onClick:a=>(e=>{if(!O.value)return;let a;switch(e){case"Copy session":F(O.value);break;case"Close session":q(O.value.id);break;case"Close to right":a=I.value.findIndex((e=>e.id===O.value.id)),-1!==a&&(I.value.splice(a+1),setTimeout((()=>{var e;$((null==(e=I.value[a])?void 0:e.id)||"aaaaaaaaa")}),20));break;case"Close other":I.value=I.value.filter((e=>e.id===O.value.id)),setTimeout((()=>{$(O.value.id)}),20)}z.value=!1})(e)},r(e),9,de))),64))])],4)):w("",!0)],42,oe)))),128)),f("div",{class:"add-terminal",onClick:D},[t(l,{name:"base-add",size:24})]),f("div",{class:"absolute right-0px add-terminal",onClick:a[0]||(a[0]=e=>T.value=!d(T))},[t(l,{name:"base-full",size:24})])])),_:1}),f("div",ue,[(s(),v(y,null,[(s(!0),n(g,null,_(d(I),(e=>b((s(),v(J,{key:e.id,data:e,active:d(R)===e.id,onUpdateFull:$,onUpdateState:B},null,8,["data","active"])),[[C,e.id===d(R)]]))),128))],1024)),f("div",{class:h(["terminal-contract-tool",{active:!d(L)}]),onClick:a[1]||(a[1]=e=>L.value=!d(L))},null,2)])])),_:1})}}}),[["__scopeId","data-v-efd124da"]]),me={class:"p-16px box"},pe=I(e({__name:"index",setup(e){const a=E(),{isShow:o,isFull:r}=p(a),u=c(null);l((()=>r.value),(e=>{var a;e?(o.value=!1,null==(a=u.value)||a.requestFullscreen()):document.exitFullscreen().catch((e=>{console.log(e.message)}))}));const m=()=>{document.fullscreenElement?r.value=!0:r.value=!1};return T((()=>{document.addEventListener("fullscreenchange",m)})),j((()=>{document.removeEventListener("fullscreenchange",m)})),(e,a)=>{const l=W,r=Z;return s(),n("div",me,[t(r,{class:"p-16px h-100%"},{default:i((()=>[f("div",{class:"h-100%",ref_key:"contentRef",ref:u},[t(l,{class:"flex-nowrap! h-100%"},{default:i((()=>[t(ce,{class:"flex-1 overflow-hidden"}),b(t(ie,null,null,512),[[C,d(o)]])])),_:1})],512)])),_:1})])}}}),[["__scopeId","data-v-57762b9d"]]);export{pe as default};
