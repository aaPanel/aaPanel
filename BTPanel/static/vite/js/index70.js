import{s as e,o as s,u as t,a,b as n,c as i,d as o,_ as l,R as r}from"./tableColumns.js?v=1769066082311";import{cM as p,p as c,u,E as m,X as d,m as _,cN as f,cO as v,d as g,y as x,o as y}from"./page_layout.js?v=1769066082311";import{b as h,c as k,f as b,L as S,M as w,N as j,O as C,P,m as R,a as $,d as H,Q as L,h as N}from"./public.js?v=1769066082311";import{k as U,r as z,a2 as I,V as M,a3 as O,S as B,R as E,a4 as T,O as A,H as F,U as Q,F as V,a0 as W,an as X,W as Y,j as q,P as D,w as G,N as J}from"./vue.js?v=1769066082311";import{db as K,aC as Z,dT as ee}from"./naive.js?v=1769066082311";import{_ as se}from"./index.vue_vue_type_script_setup_true_lang5.js?v=1769066082311";import{_ as te}from"./index.vue_vue_type_script_setup_true_lang7.js?v=1769066082311";import{a as ae}from"./soft.js?v=1769066082311";import"./index.js?v=1769066082311";import"./index.vue_vue_type_script_setup_true_lang8.js?v=1769066082311";import"./soft2.js?v=1769066082311";import"./common.js?v=1769066082311";import"./__commonjsHelpers__.js?v=1769066082311";import"./index.vue_vue_type_script_setup_true_lang6.js?v=1769066082311";import"./site.js?v=1769066082311";const ne={class:"w-80px inline-block"},ie=["onClick"],oe=c(U({__name:"app-sort",setup(t){const a=p(),n=z(e.type);return(()=>{const s=Number(localStorage.getItem("soft-app"));s&&(n.value=s,e.type=s)})(),(t,i)=>{const o=K;return M(),I(o,{class:"py-16px items-center"},{default:O(()=>[B("span",ne,T(t.$t("Soft.index_7")),1),(M(!0),E(V,null,A(Q(s),s=>(M(),E("div",{class:F(["list",{active:Q(n)===s.value}]),key:s.value,onClick:t=>{return i=s.value,n.value=i,e.p=1,e.type=i,localStorage.setItem("soft-app",i.toString()),void a.setRefresh(!0);var i}},T(s.label),11,ie))),128))]),_:1})}}}),[["__scopeId","data-v-f20307d1"]]),le={key:0,class:"box appStore-pro-tips"},re={key:0,class:"mr-15px"},pe={key:1,class:"mr-10px"},ce=c(U({__name:"index",setup(e){const s=u(),{isPro:t,authExpired:a}=W(s);return(e,s)=>{const n=Z;return"Lifetime"!==Q(a)?(M(),E("div",le,[Q(t)?(M(),E("span",re,T(e.$t("Soft.index_16",[Q(a)])),1)):(M(),E("span",pe,T(e.$t("Soft.index_17")),1)),Y(n,{type:"primary",size:"small",onClick:s[0]||(s[0]=e=>{h({source:t.value?30:29})})},{default:O(()=>[q(T(Q(t)?e.$t("Soft.index_18"):e.$t("Home.index_22")),1)]),_:1})])):X("",!0)}}}),[["__scopeId","data-v-c3090a2b"]]),ue=U({__name:"index",setup(s){const{t:l}=D(),r=p(),c=u(),{multiService:U}=W(c),{keys:z,table:B,columns:E}=k([t(),{key:"name",title:l("Soft.index_9"),width:"100",ellipsis:{tooltip:{width:"trigger"}},render:e=>e.author?e.author:l("Soft.index_11")},{key:"name",title:l("Soft.index_10"),ellipsis:{tooltip:{width:"trigger"}},render:e=>Y("span",{innerHTML:e.ps},null)},{key:"name",title:l("Soft.index_12"),width:"60",render:e=>"0.00"===e.price||0===e.price?Y("span",null,[l("Soft.index_13")]):Y("span",{class:"color-#fc6d26"},["$".concat(e.price)])},a(),n(),i(),o(),b({width:180,align:"right",options:e=>e.custom?[{label:l("Config.Panel.index_83_1"),onClick:()=>{m.push(e.route)}}]:[{label:l("Home.index_5"),show:S(e),onClick:()=>{const s=C(e),t={name:e.name,title:e.title,m_version:e.versions[s].m_version,version:e.versions[s].version,update_msg:e.versions[s].update_msg};P(t,()=>{V()})}},{label:l("Layout.Sider.mail_12"),show:e.setup&&!w(e),onClick:()=>{ae(e)}},{label:-1===e.endtime?l("Component.Auth.index_3"):l("Soft.index_18"),show:w(e),onClick:()=>{const s={source:-1===e.endtime?31:32,plugin:{name:e.title,pid:e.pid,type:e.type,plugin:!0,renew:e.endtime,ps:e.ps}};h(s)}},{label:j(e),show:!e.setup&&!w(e),onClick:()=>{"1"===e.task?R(e.name,()=>{V()}):d()}},{label:l("Public.Btn.Uninstall"),show:e.setup,onClick:()=>{U.value&&["nginx","apache","openlitespeed"].includes(e.name)?_.error("You cannot uninstall if multiple services are enabled. Please disable multiple services before uninstalling."):$({title:l("Public.Btn.Uninstall"),content:l("Soft.index_15",[e.title,e.version]),onConfirm:async()=>{const s=e.name.includes("nginx");e.version=e.name.includes("php-")?e.versions[0].m_version:e.version,await f({sName:e.name,version:s?"":e.version}),V()}})}}]})]),{loading:A,setLoading:F}=H();G(()=>r.isRefresh,e=>{e&&(r.setRefresh(!1),V())}),G(()=>c.taskCount,e=>{e&&console.log(e),V()});const V=async()=>{try{F(!0);const{message:s}=await v(J(e),!!e.force);g(s)&&(s.m_list=s.m_list||[],B.data=[...s.list.data,...s.m_list.map(e=>({...e,custom:!0,price:"0.00"}))],B.total=x(s.list.page))}finally{z.value=[],e.force=0,F(!1)}};return V(),(s,t)=>{const a=y,n=N,i=te,o=se;return M(),I(o,{class:"py-16px"},{table:O(()=>[Y(n,{"row-key":"name",loading:Q(A),data:Q(B).data,columns:Q(E)},{empty:O(()=>[Y(a,{onClick:Q(L)},{default:O(()=>[q(T(s.$t("Soft.index_26")),1)]),_:1},8,["onClick"])]),_:1},8,["loading","data","columns"])]),pageRight:O(()=>[Y(i,{page:Q(e).p,"onUpdate:page":t[0]||(t[0]=s=>Q(e).p=s),"page-size":Q(e).row,"onUpdate:pageSize":t[1]||(t[1]=s=>Q(e).row=s),"item-count":Q(B).total,onRefresh:V},null,8,["page","page-size","item-count"])]),_:1})}}}),me=U({__name:"index",setup:e=>(e,s)=>{const t=ee;return M(),I(t,{class:"p-16px"},{default:O(()=>[Y(l),Y(r),Y(oe),Y(ce),Y(ue)]),_:1})}});export{me as default};
